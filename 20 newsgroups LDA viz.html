
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Bokeh Plot</title>
        
<link rel="stylesheet" href="https://cdn.pydata.org/bokeh/release/bokeh-0.12.6.min.css" type="text/css" />
        
<script type="text/javascript" src="https://cdn.pydata.org/bokeh/release/bokeh-0.12.6.min.js"></script>
<script type="text/javascript">
    Bokeh.set_log_level("info");
</script>
        <style>
          html {
            width: 100%;
            height: 100%;
          }
          body {
            width: 90%;
            height: 100%;
            margin: auto;
          }
        </style>
    </head>
    <body>
        
        <div class="bk-root">
            <div class="bk-plotdiv" id="04400f71-71b6-4a82-8dab-6706fc46c85a"></div>
        </div>
        
        <script type="text/javascript">
            (function() {
          var fn = function() {
            Bokeh.safely(function() {
              var docs_json = {"d645900d-1343-4a70-a528-8bb7ec23110b":{"roots":{"references":[{"attributes":{"text_color":{"value":"black"},"x":{"value":-6.290654141902013},"y":{"value":0.5474887854382674}},"id":"4607e894-6c6f-4216-a707-448a2ac0e480","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["docs documentation latest en readthedocs"]}},"id":"4530ef5b-1752-479c-9504-da3898c9abc5","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"b86c70b5-a7ef-4d87-b99c-47bcac41b7d7","type":"ColumnDataSource"},"glyph":{"id":"997ad564-33d5-492a-913a-3e0092f49f8a","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"75b8157e-878b-4ead-919b-f74b4d457889","type":"Text"},"selection_glyph":null},"id":"a7dd36e4-4d00-47d8-92d8-4b73fd0c7b58","type":"GlyphRenderer"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-16.063934148690535},"y":{"value":1.4737641112603403}},"id":"5b6469a6-dec9-45d1-bc20-0330c6ccfc6c","type":"Text"},{"attributes":{"data_source":{"id":"7b2cb725-d866-4349-b291-043f9a31b050","type":"ColumnDataSource"},"glyph":{"id":"43147d13-2d82-4578-8fc2-f141682e0e80","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"fa5d1078-af8a-43ee-8566-296579ecebf5","type":"Text"},"selection_glyph":null},"id":"c4fd8475-74ab-4004-8d7d-3330ec97e428","type":"GlyphRenderer"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":0.6214270258363711},"y":{"value":-6.3130714377527575}},"id":"8f7b6efe-ca6a-40f3-957a-ab17189c6d16","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-16.063934148690535},"y":{"value":1.4737641112603403}},"id":"4c964e0e-29ae-4019-b840-3e77101f3924","type":"Text"},{"attributes":{"data_source":{"id":"e494bd2e-3f46-408f-8438-3d710315f570","type":"ColumnDataSource"},"glyph":{"id":"8d788b86-f58f-43a6-9465-ff1b838efabf","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"672b4125-1363-44c7-91bc-ea1528737ee4","type":"Text"},"selection_glyph":null},"id":"6424db85-7964-4409-a72c-9b6dfc288442","type":"GlyphRenderer"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["line file py lib packages"]}},"id":"daa04c98-aa74-4ca5-8b74-6c7a57718adc","type":"ColumnDataSource"},{"attributes":{"min_border":1,"plot_height":1100,"plot_width":1400,"renderers":[{"id":"29df0758-eaf1-466a-b2fd-85077652d754","type":"BoxAnnotation"},{"id":"5c8dcfea-ac0a-48d1-9ad1-6a0fd122b95c","type":"GlyphRenderer"},{"id":"a93688a0-f50b-4311-8d5f-508c7a9d76fc","type":"GlyphRenderer"},{"id":"885e50b7-7c90-4d10-bd3a-59750081915c","type":"GlyphRenderer"},{"id":"80ee3dcf-6495-4157-8c65-187409acf542","type":"GlyphRenderer"},{"id":"b346d6de-6f1e-4a8b-832d-cc47d04d9f3b","type":"GlyphRenderer"},{"id":"9a2231ff-743b-4b12-913d-49330093bde3","type":"GlyphRenderer"},{"id":"03ba5561-effb-447f-ace7-642049e97e71","type":"GlyphRenderer"},{"id":"98a92a61-cd42-455a-90c5-6fe667091fa7","type":"GlyphRenderer"},{"id":"dfda66a2-d552-4c18-bef2-472e864ccb36","type":"GlyphRenderer"},{"id":"62981eae-7c1b-4e79-b385-fcf5a026a68e","type":"GlyphRenderer"},{"id":"6efcc021-cc3b-4cc9-8fea-2d9384cf89ca","type":"GlyphRenderer"},{"id":"6379fdc7-1087-4728-a60a-4567932af818","type":"GlyphRenderer"},{"id":"6ffed050-794d-47ed-8aa8-5ac6639edee7","type":"GlyphRenderer"},{"id":"067a6b1a-ea96-48b0-86a2-d12b123bc2e8","type":"GlyphRenderer"},{"id":"0c16d91c-d89a-4394-925f-b93a55777866","type":"GlyphRenderer"},{"id":"16a4325e-4689-46f2-854d-18f9f5ce8d71","type":"GlyphRenderer"},{"id":"786fdff0-5d55-47eb-880c-5863e614e674","type":"GlyphRenderer"},{"id":"6424db85-7964-4409-a72c-9b6dfc288442","type":"GlyphRenderer"},{"id":"906d82e6-6c89-41fd-b2d7-cfdb21e897cd","type":"GlyphRenderer"},{"id":"54f0cb5e-9709-4c1a-92e0-f1157e8db27c","type":"GlyphRenderer"},{"id":"c2ccc0be-343e-4d5c-b319-db1ad2329704","type":"GlyphRenderer"},{"id":"c4fd8475-74ab-4004-8d7d-3330ec97e428","type":"GlyphRenderer"},{"id":"0e971831-8dfc-412c-9845-39773f8f2cd3","type":"GlyphRenderer"},{"id":"8c88dbed-3e5c-4e41-8df3-ce48b71a3a29","type":"GlyphRenderer"},{"id":"c4efd096-f318-44a6-a634-6a5727aa6a3a","type":"GlyphRenderer"},{"id":"76827c7a-9278-407d-91c2-859b0fd07987","type":"GlyphRenderer"},{"id":"a7dd36e4-4d00-47d8-92d8-4b73fd0c7b58","type":"GlyphRenderer"},{"id":"bfefaa0f-6ce0-461c-a426-8eaa0d85785c","type":"GlyphRenderer"},{"id":"9f0a4765-2bf9-4e63-8c0b-7e21ee08264a","type":"GlyphRenderer"},{"id":"22bbba11-83b0-4d08-81c1-373af645c208","type":"GlyphRenderer"},{"id":"a33ae946-a9e3-477b-9498-209008fdebcc","type":"GlyphRenderer"},{"id":"65811a33-8fda-4cac-a435-6ef8f6e2f0ec","type":"GlyphRenderer"},{"id":"168f1a86-9f12-464f-b006-76826b477cb2","type":"GlyphRenderer"},{"id":"1a510cb4-7d1c-4b84-945f-ff653580ae8b","type":"GlyphRenderer"},{"id":"67842bce-f4a7-4738-ad82-ef34b09203ad","type":"GlyphRenderer"},{"id":"325efc86-f11a-4deb-aa1b-9e3490471faf","type":"GlyphRenderer"},{"id":"0a364a57-c309-4339-8ed8-7452956d5c22","type":"GlyphRenderer"},{"id":"8f4dd5cc-463a-4bf3-89e0-d9aef36c3098","type":"GlyphRenderer"},{"id":"2ce91689-6ae4-4f3d-9757-8eae5643f8c3","type":"GlyphRenderer"},{"id":"4119689d-88fc-4ae1-a21a-45faf9e677a0","type":"GlyphRenderer"},{"id":"b16233f4-119d-4242-832e-ddb9aa7dfc8d","type":"GlyphRenderer"},{"id":"3910bfc6-afce-4da3-b57d-95ff521bed18","type":"GlyphRenderer"},{"id":"df961d7b-774d-42c6-90db-be18b422f930","type":"GlyphRenderer"},{"id":"77826264-bf10-4516-8d74-ce42998f5ea5","type":"GlyphRenderer"},{"id":"68e71da7-81df-4192-b2ca-116e29e34b84","type":"GlyphRenderer"},{"id":"9222ff07-503e-41f9-a3ec-3c646405e455","type":"GlyphRenderer"},{"id":"2a1ddef3-d884-48d2-b27b-13e425cf1f5a","type":"GlyphRenderer"},{"id":"b5723939-3bc2-4b49-8625-33426a9681fd","type":"GlyphRenderer"},{"id":"412f95a3-de25-4974-9384-a973c8d7c820","type":"GlyphRenderer"},{"id":"e5a407ab-8e8d-426b-9f15-eb9bbe9da52e","type":"GlyphRenderer"},{"id":"82f66ef3-dec1-480a-9b08-32df2f67e168","type":"GlyphRenderer"},{"id":"d297720d-770c-4ec3-a880-56360026a55e","type":"GlyphRenderer"},{"id":"06c05487-7222-4e85-84ea-277a55cd628b","type":"GlyphRenderer"},{"id":"d70f9c9f-231f-4c8e-bd40-1a547677e97c","type":"GlyphRenderer"},{"id":"17d88604-090a-4f0f-8058-cc3e858b1c4e","type":"GlyphRenderer"},{"id":"ddb4ffd3-8e78-4d34-9402-609db1c120c3","type":"GlyphRenderer"},{"id":"65b2915e-09f8-42f5-9292-e1e8382b78d4","type":"GlyphRenderer"},{"id":"30e036de-a19f-4edc-a87f-3472ac769fae","type":"GlyphRenderer"},{"id":"4d987bf3-31b9-4e4e-9935-a535f951d3e3","type":"GlyphRenderer"},{"id":"5e1f91c2-2b9d-42c6-8816-c86113e24e71","type":"GlyphRenderer"},{"id":"b49cca33-92f8-4f7d-a5e8-cdea28e82fd8","type":"GlyphRenderer"}],"title":{"id":"86a2a08b-ecc7-48fd-b75c-e16d7f479250","type":"Title"},"tool_events":{"id":"e68e7eaf-2cd9-4ded-a40a-2d8a085b7859","type":"ToolEvents"},"toolbar":{"id":"33106ba9-161d-45c4-95f4-d13efe6aab18","type":"Toolbar"},"x_range":{"id":"1dccfa4b-4905-4357-8d23-d64c66a4f80a","type":"DataRange1d"},"x_scale":{"id":"ca190edd-52af-44a2-9921-fa4595e162ef","type":"LinearScale"},"y_range":{"id":"5e3ae4fd-dddb-470e-9327-24c7af48fe88","type":"DataRange1d"},"y_scale":{"id":"f6ffe1d3-2475-4680-adff-f2091f2cc8ad","type":"LinearScale"}},"id":"c6f187f7-74ac-4a91-a79e-65f3b674b7fa","subtype":"Figure","type":"Plot"},{"attributes":{"text_color":{"value":"black"},"x":{"value":13.164038544190726},"y":{"value":-10.833708443946605}},"id":"7292c1e8-a6fa-4f98-8c7e-f706664c4789","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":5.080899503440006},"y":{"value":-13.159288874540737}},"id":"27672e20-f9c5-4bf0-9a90-163522b1f5cb","type":"Text"},{"attributes":{"data_source":{"id":"c163c853-05c9-4076-a280-bde4c877a11f","type":"ColumnDataSource"},"glyph":{"id":"635e62a7-fe92-4844-99f4-4520f28635da","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"f144d0d4-e9cd-42d7-bad6-1d1e5bdbfc0f","type":"Text"},"selection_glyph":null},"id":"1a510cb4-7d1c-4b84-945f-ff653580ae8b","type":"GlyphRenderer"},{"attributes":{"text_color":{"value":"black"},"x":{"value":0.8617641679162753},"y":{"value":-2.1743612877431775}},"id":"431ae4b9-88bb-4558-a135-1bbc42e511cd","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["make case does work sure"]}},"id":"fd4de187-5c90-439c-858e-43c7706da678","type":"ColumnDataSource"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["make case does work sure"]}},"id":"ee77ffd3-39fa-4008-b897-8f250177ebc6","type":"ColumnDataSource"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":11.205568761116897},"y":{"value":10.924329687088932}},"id":"b52ff2d2-16c4-472b-ad5c-df5aaa3865cf","type":"Text"},{"attributes":{"data_source":{"id":"b345414c-a5f1-4b63-98cf-44ea0ab89e8f","type":"ColumnDataSource"},"glyph":{"id":"58d672fb-acf3-4edb-8748-5b89e9005858","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"386165ee-da73-4c60-8e88-e30a56ad5e95","type":"Text"},"selection_glyph":null},"id":"8c88dbed-3e5c-4e41-8df3-ce48b71a3a29","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"b3e566ec-fb10-41d3-99cd-f1df2f84b203","type":"ColumnDataSource"},"glyph":{"id":"38608572-f400-4aee-aac6-b6ddd8d9a5d3","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"cc18db1d-d511-4b3a-83cc-4c4b6bb659cd","type":"Text"},"selection_glyph":null},"id":"76827c7a-9278-407d-91c2-859b0fd07987","type":"GlyphRenderer"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-9.906856849698142},"y":{"value":12.09120865460718}},"id":"df525c00-f5ad-4e69-a8ba-13cd618f89e9","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["line file py lib packages"]}},"id":"f54023e5-3a70-4017-9494-64024e020ccb","type":"ColumnDataSource"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":10.691760478188936},"y":{"value":0.2147773986702442}},"id":"151dd32d-ed0e-4d44-be3d-67382135a12f","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-10.379383622641004},"y":{"value":1.3776975004569043}},"id":"b59a41df-6edd-4b00-bf1e-9a7c0ae7337f","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["make case does work sure"]}},"id":"8a01b03d-e491-4da1-af9e-2ba232837fd9","type":"ColumnDataSource"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-13.829111853111977},"y":{"value":-10.700331663778508}},"id":"17241ee2-7bd4-4a2a-b861-d443cd2616f0","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":7.667309720996942},"y":{"value":14.303423589774484}},"id":"d3a068ec-e245-47a8-8e5e-229371bfef67","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":5.080899503440006},"y":{"value":-13.159288874540737}},"id":"627dd0cb-02d2-4a1e-8459-b1a91db94a91","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":3.271808159886695},"y":{"value":10.73945666145928}},"id":"26ad0107-2dfa-46c3-90fa-1c7d9755c72f","type":"Text"},{"attributes":{"data_source":{"id":"0fb854b3-c18e-4f62-809c-ad43867a2524","type":"ColumnDataSource"},"glyph":{"id":"17241ee2-7bd4-4a2a-b861-d443cd2616f0","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"f9b1d2e5-45bd-49a5-98df-dca30cf225cd","type":"Text"},"selection_glyph":null},"id":"30e036de-a19f-4edc-a87f-3472ac769fae","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"4530ef5b-1752-479c-9504-da3898c9abc5","type":"ColumnDataSource"},"glyph":{"id":"670f8b56-fc38-4655-8100-89f39952d833","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1de1da7b-fed8-47c5-bfd9-f0467e053e30","type":"Text"},"selection_glyph":null},"id":"d297720d-770c-4ec3-a880-56360026a55e","type":"GlyphRenderer"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-2.936334240519639},"y":{"value":9.251630498031428}},"id":"2c726cb8-ec93-49bb-8cfd-20c7d5957dd0","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":5.080899503440006},"y":{"value":-13.159288874540737}},"id":"670f8b56-fc38-4655-8100-89f39952d833","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["server run running output message"]}},"id":"cdb1b7b5-71c8-4ccf-8f84-2b70568b8afe","type":"ColumnDataSource"},{"attributes":{"plot":{"id":"c6f187f7-74ac-4a91-a79e-65f3b674b7fa","subtype":"Figure","type":"Plot"}},"id":"2e00f79b-3314-40f4-b4fd-093bf0796560","type":"SaveTool"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["js static require npm main"]}},"id":"b86c70b5-a7ef-4d87-b99c-47bcac41b7d7","type":"ColumnDataSource"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":11.205568761116897},"y":{"value":10.924329687088932}},"id":"baa3c032-870a-44d9-868f-b3714d19f2c9","type":"Text"},{"attributes":{"data_source":{"id":"369e9512-ae20-46d4-ae8f-2e44d85e5c96","type":"ColumnDataSource"},"glyph":{"id":"7292c1e8-a6fa-4f98-8c7e-f706664c4789","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"7db291be-34f9-4e78-b08c-a61220a59e62","type":"Text"},"selection_glyph":null},"id":"65b2915e-09f8-42f5-9292-e1e8382b78d4","type":"GlyphRenderer"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":3.271808159886695},"y":{"value":10.73945666145928}},"id":"41e95b21-c57f-475a-9683-0b747cfade8d","type":"Text"},{"attributes":{"data_source":{"id":"e4c258d3-dc00-4da0-b0cd-d1b7e84c759f","type":"ColumnDataSource"},"glyph":{"id":"0ce4ed7a-6f55-47a9-8079-a2443445876d","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"f3b4e7f4-d3e6-40aa-bcf8-c55994a4fdf6","type":"Text"},"selection_glyph":null},"id":"9f0a4765-2bf9-4e63-8c0b-7e21ee08264a","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"bcc56b34-107c-48da-b7d8-d0ac7b097439","type":"ColumnDataSource"},"glyph":{"id":"627dd0cb-02d2-4a1e-8459-b1a91db94a91","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"ee32f7b1-f9a0-42e1-8dc3-689ab8a58964","type":"Text"},"selection_glyph":null},"id":"65811a33-8fda-4cac-a435-6ef8f6e2f0ec","type":"GlyphRenderer"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-13.829111853111977},"y":{"value":-10.700331663778508}},"id":"672b4125-1363-44c7-91bc-ea1528737ee4","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-10.379383622641004},"y":{"value":1.3776975004569043}},"id":"3444694d-73a4-46f2-b79c-c55d8f0c439a","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-13.829111853111977},"y":{"value":-10.700331663778508}},"id":"d5098947-81ee-4066-ba6e-9e39717a264c","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["config extensions extension nbextensions nbextension"]}},"id":"0fc02496-e464-46ba-adc5-057df3968abd","type":"ColumnDataSource"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["js static require npm main"]}},"id":"056e9bc7-689c-4d9b-8e10-4aacf99b176a","type":"ColumnDataSource"},{"attributes":{"text_color":{"value":"black"},"x":{"value":5.10962402899887},"y":{"value":2.6416720452979803}},"id":"2609e4ce-8c09-4f57-bb35-41891e5e30dd","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["problem try issues browser chrome"]}},"id":"d46b1bbf-c3b8-4d82-93aa-e4a20cd41573","type":"ColumnDataSource"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-4.989522886225234},"y":{"value":-2.9107161689360863}},"id":"0f62dbc8-5235-40c9-b0ac-743e64bd8caf","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":13.164038544190726},"y":{"value":-10.833708443946605}},"id":"997fb059-6a3e-476f-a52d-0625e6523ad5","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["file files path directory home"]}},"id":"998a52f8-262d-4c2d-82b0-095bc65da4c8","type":"ColumnDataSource"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":11.205568761116897},"y":{"value":10.924329687088932}},"id":"4b28c330-1206-4ba8-8324-a0c69f625afd","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-6.90822581905499},"y":{"value":4.489129954532823}},"id":"2882c2a1-ab0d-4fca-bc61-40db595e37b0","type":"Text"},{"attributes":{"data_source":{"id":"d46b1bbf-c3b8-4d82-93aa-e4a20cd41573","type":"ColumnDataSource"},"glyph":{"id":"72c08bc2-d0a4-442c-8fc7-92eb68a35168","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"7dc6c19d-9562-45d4-bd53-80189cfc6539","type":"Text"},"selection_glyph":null},"id":"c4efd096-f318-44a6-a634-6a5727aa6a3a","type":"GlyphRenderer"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-16.063934148690535},"y":{"value":1.4737641112603403}},"id":"8bb2b99a-01d9-4010-be4e-35723d68e624","type":"Text"},{"attributes":{"data_source":{"id":"4fdc4de7-b908-445e-8c2f-733a4eaa8581","type":"ColumnDataSource"},"glyph":{"id":"4e19a531-4632-4bfe-8dcb-1a68f5965a1d","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"0e69e633-6d91-4c5b-ad27-20090d41aa67","type":"Text"},"selection_glyph":null},"id":"2ce91689-6ae4-4f3d-9757-8eae5643f8c3","type":"GlyphRenderer"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-9.906856849698142},"y":{"value":12.09120865460718}},"id":"c906bc4a-f9ab-45ec-adad-60f110f83b57","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["notifications view email wrote reply"]}},"id":"7b2cb725-d866-4349-b291-043f9a31b050","type":"ColumnDataSource"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-2.936334240519639},"y":{"value":9.251630498031428}},"id":"c7169f8f-4b2b-40dd-b547-e3ba75d7b7a1","type":"Text"},{"attributes":{"data_source":{"id":"daa04c98-aa74-4ca5-8b74-6c7a57718adc","type":"ColumnDataSource"},"glyph":{"id":"bbe7aeeb-b2d2-4001-ab00-4b2d1a09dfca","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"180edd97-e128-46cc-b823-c552c6691cae","type":"Text"},"selection_glyph":null},"id":"4119689d-88fc-4ae1-a21a-45faf9e677a0","type":"GlyphRenderer"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-2.936334240519639},"y":{"value":9.251630498031428}},"id":"69e083a0-052e-4d98-93d1-838cb1784271","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":8.941888871109946},"y":{"value":12.873792922911283}},"id":"7e9505d2-815f-47e0-b328-ffa82d9ff708","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["assets cloud githubusercontent png 11e5"]}},"id":"c163c853-05c9-4076-a280-bde4c877a11f","type":"ColumnDataSource"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-2.936334240519639},"y":{"value":9.251630498031428}},"id":"1b280ef3-183b-4bae-8661-5028670e3395","type":"Text"},{"attributes":{"data_source":{"id":"f93fc94d-e8e9-4654-ba02-d01cb8cff711","type":"ColumnDataSource"},"glyph":{"id":"d88328ba-279b-47b1-ab83-0159069e696a","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"ec32c195-0726-4fa0-8622-982961e1b51b","type":"Text"},"selection_glyph":null},"id":"3910bfc6-afce-4da3-b57d-95ff521bed18","type":"GlyphRenderer"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["problem try issues browser chrome"]}},"id":"5ca2eded-7c03-474b-8da3-db1160f7b7c9","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"13b31f67-f4e3-4e56-aced-04bf706dba42","type":"ColumnDataSource"},"glyph":{"id":"89d22dff-b3a4-4e16-999f-ac87868f09a3","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"8b72b40f-03b0-438a-81fc-b55aed27b23b","type":"Text"},"selection_glyph":null},"id":"df961d7b-774d-42c6-90db-be18b422f930","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"2cdd007d-6822-4a18-8602-c8e513a08e9e","type":"ColumnDataSource"},"glyph":{"id":"2609e4ce-8c09-4f57-bb35-41891e5e30dd","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"545fa07f-d720-4a02-abc6-1f6d60e87126","type":"Text"},"selection_glyph":null},"id":"2a1ddef3-d884-48d2-b27b-13e425cf1f5a","type":"GlyphRenderer"},{"attributes":{"callback":null,"column_names":["content","topic_key","y","x","line_color","fill_color"],"data":{"content":["While this is an issue in our ipythongfm codemirror mode, I suspect it's a bug in CodeMirror's implementation of multiplexing modes, where the multiplexing ends up stripping the previous mode's handling of newlines. Let's report it upstream.\n reported on codemirror/CodeMirror#3535 to get more info, bumping as 5.0. \n Fixed upstream. Thanks !\n Let's leave this open and mark it closed when we ship a CodeMirror with the fix. Thanks for taking it upstream, @Carreau!\n","Can we have a third option like `ifNotWindows` (string of object) that would do the sane things and let extensions override that if they really wish to ?\n We could. Though I think if we go that way, it should probably be `ifPossible` rather than `ifNotWindows` - in some cases it may be possible to make a symlink on Windows.\n > We could. Though I think if we go that way, it should probably be `ifPossible`\n\nYep... I think is a better name...\n I'm not sure. I might be inclined to just force `symlink=False` on Windows (maybe warn). That seems relatively common practice for other projects. Windows may technically have symlinks now, but they don't seem reliably functional.\n I believe that if you succeed in making them they work, but making them in the first place requires a permission bit that non-admin users don't have by default. But it's probably rare enough that we could just assume there's no symlinking on Windows.\n We now force symlink=False when os.symlink is undefined (Windows Python 2). This may be sufficient, though we should think about what we do in the symlinks-available-but-not-allowed case.\n > This may be sufficient, though we should think about what we do in the symlinks-available-but-not-allowed case.\n\nI guess some kind of warn and force to False...\n I'm not sure we can reliably detect the case until we get to the end and it fails, though.\n I know this one has been dormant for a while, but I don't think we should attempt to copy if a symlink fails and a user has requested `symlink=True`. Too much surprise.\n","cc @Carreau and @jdfreder\n A custom KernelManager could add an environment variable when a kernel is started, though the KernelManager doesn't have access to the notebook path. A SessionManager could pass that down, though it wouldn't be updated when the notebook is renamed, so a filename is probably not the best key to use.\n You can put a GUID in the notebook-level metadata.  I think you can do it without JS, at the web server level, on new or existing notebook load.\n --- oh, this is issue #1000 ! :cake: :tada: \n :-P\n Wouldn't a  custom `MappingKernelManager` that store the various kernel-models in a shared DB we enough ? (or I miss something about the notebook name).\n\nIt is highly unlikely that the notebook would be renamed during the swap of VMs.\n\nThere might need some extra logic for clean startup/exit/restart, but that **should** be able to resume connections.\n So, I've picked up this work where @aggFTW left off.  I think this is how we're thinking about doing this:\n1. Use a custom SessionManager that passes down the notebook name as an argument to the MappingKernelManager.  \n2. Use a custom KernelManager that communicates the notebook name to the new kernel process on startup (through an environment variable or some other method).  \n3. Our custom kernels will take the notebook name as a key and will update their metadata as appropriate in the way that @aggFTW described above.\n4. Use a custom ContentsManager to update the metadata necessary for resuming stale sessions when a method is renamed.\n\nItem (4) will certainly be an internal extension to Jupyter for us, but we were wondering whether items (1) and (2) would have any chance of being accepted upstream.  I understand that the kernel not knowing what's talking to it is part of the design, but it seems like it would be generally useful (not just for this scenario) if kernels could be made aware what the name of their notebook is either through an environment variable, a command-line argument, or a 0mq message.  Do you suppose there would be any interest in that PR?  \n I think it is generally useful, and we should probably do it. An environment variable is the way to go, I think. The only disadvantage of that is that you cannot update the file location on rename after the kernel has started, but a zmq message updating the file doesn't seem like the right thing to do, to me.\n Was this ever resolved? I'm making output and figure folders based off of the name of the notebooks and this code works *in* the notebooks, but when I \r\n\r\n```python\r\nfrom IPython.core.display import Javascript\r\nfrom IPython.display import display\r\n\r\n\r\ndef get_notebook_name():\r\n    \"\"\"Returns the name of the current notebook as a string\r\n    \r\n    From From https://mail.scipy.org/pipermail/ipython-dev/2014-June/014096.html\r\n    \"\"\"\r\n    display(Javascript('IPython.notebook.kernel.execute(\"theNotebook = \" + \\\r\n    \"\\'\"+IPython.notebook.notebook_name+\"\\'\");'))\r\n    return theNotebook\r\n```\r\n\r\nBut when I move it into a `common.py` file so it can be accessed across all notebooks, I get a NameError:\r\n\r\n![image](https://cloud.githubusercontent.com/assets/806256/22041524/117c04ce-dcbc-11e6-8b2d-439564fb2372.png)\r\n\r\nIs this because the `.py` file has no notebook? Is there a way to get the `.py` file to recognize the notebook it is being called from? ```\r\ndisplay(Javascript('IPython.notebook.kernel.execute(\"theNotebook = \" + \\\r\n\"\\'\"+IPython.notebook.notebook_name+\"\\'\");'))\r\n## Here are dragons. \r\nreturn theNotebook\r\n```\r\nHandwaving:\r\n\r\nThe display javascript will take some time to reach the browser, and it will take some time execute the JS and get back to the  kernel. \r\n\r\nDuring this time IPython have have to continue executing code, so try to \"return theNotebook\" which is undefined. So it raise. even if you could \"Wait for the JS to execute\" you could not set the name of the notebook before returning the function . \r\n\r\nDoes that make some sens ? The JS sets the name in the main user namespace. When the function is moved into a module, it's looking in the module namespace, so it never sees that name. But that function is a hack, and I wouldn't rely on it in any case.","The test error is a known/fixed error involving jpg images, which I don't think is related to this PR.\n Poked tests now that IPython rc2 has fixed the test failures. I'm fine with this implementation. Did you want to tackle the two tasks you assigned yourself (test, better notification) in this PR?\n Yes. When are we hoping to release a new version? I'd really like it in the next version.\n The installation work going on in #879 is going to take some time, so I think it's a pretty safe bet that this can make it in.\n Perhaps this can be in a quicker bugfix release, presuming I finish it quickly? I've seen it cause people confusion and problems.\n 4.2 seems like the right target. It should be pretty soon.\n After thinking about this more, I think the HoldingKernel approach/kludge should be scrapped and instead we should implement proper support for the notebook to queue cell evaluations until a kernel is available.\n Okay, new plan: implement buffering for kernel messages at the kernel level (eliminating the need to check to see if the kernel is connected), and then also implement cell execution buffering for when the kernel is not set in the notebook (if needed...)\n @minrk, @SylvainCorlay, @Carreau - this is ready for review.\n @blink1073 - I can see the case for the 'move-to-the-end' behavior, and I can also see the case for it not being there. In the commit message, I give a case where the move-to-the-end behavior is surprising:\n\n\"This may still give surprising results, for example, if cell 1 defines a variable and cell 2 increments and prints the variable.\nIf the execution order is cell 1, cell 2, cell 1, then before this commit cell 2 would print fine, whereas now cell 2 will throw an error.\"\n\nWhat do you think?\n I think the right thing to do might be to clear the queue after itself if you rerun the same cell, and clear the prompt on remaining cells, so it is clear which cells are actually pending. \nAnother option is to update the queue in place, assuming no destructive chages have been made to the cell. \n The kernel queue seems great. I'm less fond of the notebook queue, and adding a `Notebook.execute(cell)` method. Since the Kernel can now queue messages prior to the websocket connection being established, is it possible to get `cell.kernel` defined more promptly so the notebook queue doesn't need to exist?\n I'm also less fond of the notebook queue as well - that's where the tricky logic is. The problem, as you point out, is that the cell.kernel can be null, and I'm not sure when exactly it is going to be null. The basic usecase I'm trying to address is starting up a notebook and immediately executing cells before a kernel is set up. I'll look into it more to see if it's clear when the cell.kernel is set, and if it can be set earlier.\n\nEdit: I'm also tempted to go back to having a HoldingKernel as a good-enough solution, but I'd rather not go back to that.\n It could just be that executing a cell without a kernel just sets the input to `In[ ]`, so you know it had no effect.\n @blink1073, That is basically the use-case I'm addressing - execution is ignored.  What this means is that if you have a slow kernel startup, and you open a notebook and start executing cells, the first few cells are ignored, and then often there are huge errors in later cells because one of the first cells (containing imports, for example) wasn't executed.\n Does the current notebook show `In [*]` or `In [ ]` in that case?\n Just a check - how will these abstractions be implemented in jupyterlab?\n\nOn Thu, Mar 17, 2016 at 7:59 AM, Steven Silvester notifications@github.com\nwrote:\n\n> Does the current notebook show In [*] or In [ ] in that case?\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1002#issuecomment-197920332\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @blink1073 - Oh, I'm not sure. My point is not what the cell displays, but what the user expects and the frustrations that come from expecting execution to okay immediately.\n @ellisonbg, we'd add a similar queue to `Kernel`, but you still get a `KernelFuture` back.  The notebook would be handled the same way as here.\n If you press `shift+enter`, the cell does not advance, the input prompt clears, and there is a kernel status indicator that says \"No Kernel!\", I think that's pretty explicit.\n But in JupyterLab, isn't everything inverted - cells just emit signals when\nthey need execution. Before a kernel is going, the controller could just\nwatch those signals and queue things - wouldn't need to involve the\nnotebook at all?\n\nOn Thu, Mar 17, 2016 at 8:08 AM, Steven Silvester notifications@github.com\nwrote:\n\n> @ellisonbg https://github.com/ellisonbg, we'd add a similar queue to\n> Kernel, but you still get a KernelFuture back. The notebook would be\n> handled the same way as here.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1002#issuecomment-197924971\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @blink1073 - in the current notebook - but if you use the menu to run all cells?\n @ellisonbg, execution is done at the notebook level in JupyterLab at the moment.  The keyboard shortcut is tied to the `runActiveCell()` method on the `INotebookModel`.\n @ellisonbg - nope, cells don't emit execution signals. The shift-enter is caught at the notebook level, and presumably pressing a play button or something like that is also caught at the notebook level. So it's even simpler, in that there is no listening.\n @jasongrout, run all could be special-cased to wait for a kernel, but change all of the prompts to `In [*]`.\n The tricky thing is deciding how to treat a cell being queued multiple times. There are multiple right answers, depending on user assumptions. Options include:\n1. Queue the cell multiple times, but actually execute it when the kernel is available (i.e., that's when the text is 'frozen' in the execution call)\n2. Move a cell to the back of the queue each time it is executed\n3. Let the cell \"execute\" and take the text at that point in time. If the cell is modified and re-executed, the new execution text is entered in the queue also, and doesn't replace earlier executions.\n\nI think (3) is the least surprising, but I can also see users thinking that they can edit a cell's contents before it is actually executed and getting those edits in under the wire.\n We could make a cell read-only while it is being \"executed\".\n But that would be harsh for a long-running cell..\n Also, I think (3) is the trickiest one to get right in the current notebook, where the cell is assuming there is a kernel there that is doing execution. I think the easiest way to get (3) working is to provide a special HoldingKernel (a slight modification of what I had earlier) that stores the input text and any execution options, and then replays those in order. That also probably requires modifying the current logic of how a cell executes.\n Making a cell read-only while it is executing is an interesting idea. That would solve a lot of the tricky issues here...\n but yeah, a long-running cell that was, perhaps, displaying continuously running output, would be a case to handle. We could support the user pressing the interrupt button to interrupt such a computation.\n I would think pressing interrupt should clear the read-only and `In [*]` state of a cell (probably setting it to `In [ ]`).\n @blink1073 - I agree. That said, making a cell read-only while executing is a pretty drastic change (possibly for the better, though).\n\nThe kinds of subtleties that we are discussing with the notebook cell queue probably don't come up all that often (i.e., executing cells, then re-executing some of them, possibly while editing them, all without a kernel/session started in the notebook).\n\nTo be consistent with how execution works when the kernel is running, we should do (3) above. Since it's difficult to guess when the notebook will have a kernel set vs. not set, it sounds like (3) above would be the least surprising alternative.\n I can agree with (3), but we should discuss the read-only approach for JupyterLab.\n @blink1073 - agreed.\n (3) is only tricky for the case that the Kernel object hasn't yet been instantiated since the kernel queue ought to handle it without telling it anything about cells. A slow-starting kernel does not affect when the Kernel is instantiated, it only affects when the kernel_ready event fires and true execution can begin. Currently, the Kernel object is instantiated as soon as the session REST API returns, which is quite prompt. If we could do any of:\n1. instantiate the Kernel object immediately, since it's useful immediately now, or\n2. accept the longstanding behavior for the much shorter period between load and Kernel existing, or\n3. disable execution (clearly) for the very brief time until the kernel exists\n\nthen the easy to follow queue on the kernel would be all we need.\n I should say that (3) is actually the only version that makes sense to me. Asking to execute a cell shouldn't change behavior depending on how long it takes, so (2) doesn't seem right for me. And I would expect it to be hard to avoid annoying flashes when toggling read-only during execution from whatever we use for a visual indication that it has become read-only, even if for just a fraction of a second.\n Okay. I'm just about finished with another take on the Holding kernel that we can set at the very start. If the rest api really does take a very short time to get back with a session/kernel object, then that's probably good enough for me. I'll check to see if it's okay.\n\nOr - how about I slim down this PR to just have the kernel queue, and see how that works in practice. If we need to do something more for when the kernel is not set, I'll revisit this issue.\n > Currently, the Kernel object is instantiated as soon as the session REST API returns, which is quite prompt.\n\nI don't think it's so prompt. I tried delaying kernel startup by adding the following patch to ipykernel:\n\n``` diff\ndiff --git a/ipykernel/__main__.py b/ipykernel/__main__.py\nindex d1f0cf5..adeb68a 100644\n--- a/ipykernel/__main__.py\n+++ b/ipykernel/__main__.py\n@@ -1,3 +1,6 @@\n if __name__ == '__main__':\n+    from time import sleep\n+    print('sleeping')\n+    sleep(5)\n     from ipykernel import kernelapp as app\n     app.launch_new_instance()\n```\n\nand the notebook now is unresponsive (even with the kernel message queue) for those 5 seconds.\n Oh, wait, never mind. I was testing the wrong thing...\n > Or - how about I slim down this PR to just have the kernel queue, and see how that works in practice.\n\nI like that idea a lot. It should be a big improvement no matter what, and then we can better see the tradeoff of the more complicated buffering on the cell or notebook as a separate change.\n @minrk - ready for review. This seems to solve my use-case.\n :+1: \n Awesome, thanks @jasongrout!\n Thank you! That took a lot longer than I thought to get right.\n","This is a bug in Chrome 48 (dev channel). I just tested in Chrome 47 (no bug), updated to 48 and saw it. Hopefully it will be fixed by the time it reaches stable.\n I believe that Chrome 48 is already stable.\n Ah, so it is. Well, crap. I'll see if I can make a reproducible test case and reopen the upstream Chrome bug.\n [Reported upstream](https://code.google.com/p/chromium/issues/detail?id=582141). It seems we can workaround it if we ensure that `div.input_area` has a width specified explicitly, defeating the entire purpose of flexbox.\n Cheers for getting to this. Also seen it too. +1\n\nFYI, this is a problem on Windows with version Chrome 48 too.\n Updated the title of the issue so it is easier to find via search parameters.\n Yeah this is bugging the heck out of me too (Chrome 48, Windows 7).At least in my case, I'm able to switch the input type to Markdown (ctrl+M) (where it automatically text-wraps to multiple lines), do the editing I need, switch back to code (ctrl+Y), and execute.\n [Comment #4 upstream](https://bugs.chromium.org/p/chromium/issues/detail?id=582141#c4)  says this is not a regression and won't be fixed.\n\n> This is not a regression, the parent needs min-width: 0. We fixed our implementation to match the spec (we also match Firefox and Edge now). See https://drafts.csswg.org/css-flexbox/#min-size-auto\n Adding `min-width:0` to `.inner_cell` in the notebook appears to correct Chrome.\n And I'm a day late to the party: https://github.com/jupyter/notebook/commit/7934f299178c60e8450af2caff93f85f19987f25\n\nThanks @minrk!\n","Hello @IsakFalk,\n\nThe rendered version of the file can be seen on ReadTheDocs here: http://jupyter-notebook.readthedocs.org/en/latest/ui_components.html\n\nI will look into the links within GitHub. Thanks.\n this issue has been fixed and should be closed - I'm a Jupyter Day Chicago attendee\n\ncc @captainsafia \n Thanks @eckerr \n Thanks @eckrr :cake:\n","Thanks @IsakFalk for the PR to address issue #1004. For consistency with other docs, please remove the added dot and slash so the image directive is the following format:\n\n```\n.. image:: _static/images/jupyter-notebook-dashboard.png\n\n```\n\nThanks!\n @willingc it looks like your PR #1046 is the same as this, and without the change you asked Isak to make - was that just an oversight? Should the leading `./` still be dropped?\n Tagging as `closed-PR`, and closing as this is seem to have stalled a bit. \nThis is just to keep the PR queue a bit shorter and focusing on what is actually worked on.\nFeel free to reopen, (or ask for reopening if you don't have enough right to do so). \nIf you were not the original author, and want to revive this, please feel free to do so. \n\nAlso, we are doing our best to enable people to learn how to contribute to the project, and get commits in. If you are missing time or have any other issues that prevent you to work on that, please feel free to tell us, we can try to build on top of what you did. \n\nThanks a lot and looking forward to see this moving forward again.\n","Multiple cursors are possible - on my system I can Ctrl + click to create them. I forget if there's a keyboard shortcut, but somebody else should be able to tell you.\n @radaniba This [mailing list thread](http://comments.gmane.org/gmane.comp.python.ipython.devel/14016) gives a bit of detail on the subject.\n\nHere are some documents that you may find helpful on configuring the notebook frontend and keyboard shortcuts:\n[Configuring the notebook frontend](http://jupyter-notebook.readthedocs.org/en/latest/frontend_config.html)\n\n[Keyboard shortcut configuration](http://nbviewer.jupyter.org/github/jupyter/notebook/blob/master/docs/source/examples/Notebook/Custom%20Keyboard%20Shortcuts.ipynb)\n Codemirror (used by Jupyter) already supports multiple cursors, but the key bindings used in Jupyter don't match the ones you would expect as a Sublime or Atom user. To make cmd-D (or ctrl-D) work see: #278 \n @takluyver @willingc @slundberg Thank you, yes indeed ! that worked for me as well. Thank you guys\n","The port selection certainly isn't random, that's a poor choice of words. Are you running a wrapper script or anything that spawns the notebook? Perhaps your interrupts are only killing the parent, rather than the server itself. The Jupyter Notebook is only one process (not counting kernels, but those won't hold the server's port), so if anything exits it's the notebook server.\n The notebook is started with `jupyter notebook &` and stopped with Ctrl-C.\n The `&` will put it in the background, and Ctrl-C will only be delivered to the foreground process group. Are you foregrounding it again before trying to stop it?\n Ah, got it. No, I wasn't so that makes sense. Thanks.\n Thanks @takluyver. We're glad to help, @jamiebull1. Closing this issue.\n If you want a better way to see and stop running notebook servers, have a look at https://github.com/takluyver/nbmanager .  The application is a GUI for desktop use, but the api module could be used to construct a CLI or a web interface or whatever you needed.\n","dash would be technically incorrect (minus/hyphen: -, dashes: \u2013, \u2014). I'd be fine with `minus`. Subtract does seem weird. I think a lot of people don't know the word 'hyphen'.\n FYI, looking into this\n","it can be a simple and fast dashboard\n","I don't suppose you have an `operator.py` or `operator` directory in the working directory?\n No? I tried launching directly in the `jupyter_notebook` directory at first. It doesn't launch in any directory.\n What happens when you do this in a regular IPython session:\n\n``` python\nimport operator\nprint(operator.__file__)\nimport hmac\n```\n <pre>\nIn [1]: import operator\nIn [2]: print(operator.__file__)\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-2-9d31da67500b> in <module>()\n----> 1 print(operator.__file__)\nAttributeError: 'module' object has no attribute '__file__'\nIn [3]: import hmac\n---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\n<ipython-input-3-3e28f1954a71> in <module>()\n----> 1 import hmac\n/home/alex/anaconda/lib/python2.7/hmac.py in <module>()\n      6 import warnings as _warnings\n      7 \n----> 8 from operator import _compare_digest as compare_digest\n      9 \n     10 \nImportError: cannot import name _compare_digest\n</pre>\n\nThe same commands do work when the virtualenv isn't activated. The operator file is:\n\n```\n/home/alex/anaconda/lib/python2.7/lib-dynload/operator.so\n```\n Then I think your virtualenv is the problem, because it's missing an important part of the standard library. Try creating a new env and see if you still have the issue.\n What do you see from `print(operator)` in the broken env?\n ```\nIn [3]: print(operator)\n<module 'operator' (built-in)>\n```\n Thanks for walking me through this. I tried redoing everything, and still no luck. Could the problem be related to the `pip install` bit? In order to get that to work I need to replace the command with:\n\n```\nenv CC=/usr/bin/gcc-4.8 pip install -r requirements.txt -e .\n```\n Since it's part of the stdlib, I don't think pip would be involved. The virtualenv is missing critical files somehow.\n Is the virtualenv entirely necessary? Are there alternate installation instructions somewhere?\n The virtualenv isn't necessary, just suggested when you run unstable versions of software so that you can easily get back to your standard environment. If you're not worried about that, use pip with the `--user` option to install things under your home directory.\n","Do you observe this in chrome? If so, it's likely a known rounding bug in recent chrome: mathjax/MathJax#1300\n Yes, thanks for pointing that out. It's not a bug with notebook, then, so I'll close this out. I assume that we will get an update that includes MathJax 2.6 in the near future, which fixes this? Looks like it addresses a large number of rendering issues that could affect many users.\n Issue is with https://github.com/mathjax/MathJax/issues/1300, which should be fixed in version 2.6. For now, either apply a local patch or use a non-Chrome browser.\n I think this bug should not yet be closed as the required MathJax version in bower.json is still 2.5 which shows the described behavior. Therefore even though the bug is closed in MathJax, jupyter notebook still has a problem which needs to be fixed. It works fine with version 2.6 as far as I can tell.\n Reopening to remind us to upgrade MathJax\n Good call. Thanks for ensuring attention to this!\n Until MathJax gets upgraded by, notebook server hosts can add the line\n`c.NotebookApp.mathjax_url = 'https://cdn.mathjax.org/mathjax/latest/MathJax.js'`\nto their `jupyter_notebook_config.py` file to use the latest stable version from the MathJax CDN.\n Is there any way to somehow embed or use that URL @DMRobertson referenced inside notebooks for distribution (instead of modifying the notebook server config)? \n @minrk @takluyver Now that notebook 4.2 has been released, this should now work. Correct?\n Just double-checked: it works with notebook v4.2 + chrome 50. Mathjax v2.6 is used.\n Thanks @akhmerov for checking. \ud83c\udf0a \n","Actually, I think there's a better way. Let's use RTD's new conda support. I'll have a go at it.\n @takluyver Sounds good to me.\n @takluyver Ran into this issue with Sphinx, RTD conda support a few weeks ago when I was experimenting. FYI https://github.com/willingc/calpoly-cnw/blob/master/doc-workflow/experimental-conda-rtd.md\n","See note re: sphinx==1.3.1 on #1012 \n Thanks, I just added `sphinx>=1.3` to the requirements.\n @takluyver ReadTheDocs hasn't been able to build the docs without failing since we made this change. I spent a good chunk of my time going through options or workarounds. Here's where it is failing the build (on js):\n![screen shot 2016-01-29 at 9 53 53 am](https://cloud.githubusercontent.com/assets/2680980/12683708/8e1114a2-c66f-11e5-8f45-5a8eaad3f964.png)\n\nThoughts on a solution? Do we really need the js for building the docs?\n I think we need to install the notebook for some of the API docs, and installing it tries to build the JS. But there is a conda package of bower, so maybe it's not too hard:\n\nhttp://anaconda.org/javascript/bower\n We don't need bower on the system, just npm. So if you can get nodejs at all, we should be set.\n\nI faced the same issue on JupyterHub a bit ago, and did a perhaps hacky workaround: don't install the notebook, just add the notebook dir to sys.path in conf.py. (#1025)\n The latest doc build succeeded, after I merged #1025 . Thanks, Min!\n","This is an iPython bug from what I can tell. I have offered up a fix over there.\n Fixed by https://github.com/ipython/ipython/pull/9182\n","Indentation of these things is governed by the CodeMirror mode, not anything in Jupyter, so this is probably a question better raised over there.\n Ah okay, thanks.\n","Oops, sorry, actually looked a few more things up and turns out it was running it from within tmux that created the issue.  \n","I'me fine with conditional import (as long as the behavior if not imported is sane, of course)\n Do you want that for a 4.2 ? or a 5.0 ?\n Seems sensible enough to move the ssl import to where it's used. I just didn't know it was possible for that import to fail.\n","This now uses `properties` to load lazily the module/constructor and console.log a deprecation warning.\nSo require does not complain.\n Are we leaving the global `IPython` for backward compat, or no?\n I think we should be leaving the IPython name for a while. I know we say the JS API isn't stable, but people are using it anyway, and breaking all code when it's easy enough to leave that reference around would be a bit rude.\n > I think we should be leaving the IPython name for a while. I know we say the JS API isn't stable, but people are using it anyway, and breaking all code when it's easy enough to leave that reference around would be a bit rude.\n\nI completely agree with this opinion...\n The global is also super useful for debugging, but I'm for slowly deprecating it with a message.\n\nHere it's how it appears as soon as I type dot : \n![screen shot 2015-05-21 at 10 10 21](https://cloud.githubusercontent.com/assets/335567/7750360/a72e1e66-ffa1-11e4-923d-a0ba36cc9a13.png)\n Does it do the same with instances in the `IPython` namespace, or only with classes? `require()` doesn't help you get instances.\n Right now only with Classes, most of the instances should be attached to the object that created them IMHO, but this is another discussion. \n\nI have no opposition (for now) of `main.js` mutating the global namespace, I just don't want the leaves of the dependency tree to require a global and mutate it. \n Moar commits. less globals. \n Along the lines of what @minrk was saying in today's meeting, you still need a way to expose the singleton instances, which are true globals.  Looking at this PR, it looks like you aren't doing that (correct me if I'm wrong).  How about making the instances require-able via main.js?  i.e. `IPython.notebook` -> `require('notebook/js/main').notebook`?\n I don't delete the IPython, neither remove the singleton instance. They are still exposed, I won't remove them in this PR. \n Removed `[WIP]`. \nI start to reach the maximum of things that can be removed easily, and longer will be hard for review. \n Travis is happy. \n Ping.\n You'll want to update `examples/Custom Keyboard shortcuts.ipynb` to use Jupyter instead of IPython.  I noticed this while working on #124 , but since this isn't merged, I didn't do it there.\n @jdfreder Done, thanks.  I also updated the instructions a bit. \n Few comments, otherwise this has my stamp of approval !  :ok: \n Thanks @Carreau \n","Travis errors are for an unrelated bug that appears to be fixed in master.  Thanks, Min!\n Marking as 4.2 to think about backporting. \n","I can confirm this works with https://github.com/ipython/ipywidgets/pull/336, pending a small change there.\n Updated to point to the new, more pythonic name, of `widgetsnbextension`.\n @jdfreder Do any of these need to change: https://github.com/jupyter/notebook/search?utf8=%E2%9C%93&q=ipywidgets ?\n\nAlso, do you wish any changes to the docs?\n Ah thanks @willingc , I need to change the docker file, I missed that.  The other two are already changed in the PR\n > widgetsnbextension\n\n+1, thanks. \n @jdfreder No problem. I did a search on the notebook docs and didn't see any references to ipywidgets. If you see something or want to add something, just let me know.\n\n+1 on the PR\n @jdfreder why is this marked for notebook 4.2? Is it needed to keep 4.x working (i.e. 4.1 is broken)?\n No, without it users won't be able to load the newer widgets- we can target that for 5 if you prefer\n Yes, 4.2 is mostly bug fix, otherwise it's painful we have to backport all the things.\nRetagged as 5.\n Note that ipywidgets 4.1.0 seems to already implements this PR (contrary to the tag?), so widgetsnbextension is required as early as ipywidgets >= 4.1.0 as [reported here](https://github.com/tqdm/tqdm/issues/168).\n","@dpk011 this should be fixed by ipython/ipyparallel#95, which should make it easier to enable/disable the clusters tab appropriately.\n\nIf you are getting a 404, this means that the notebook server extension probably hasn't been loaded. If you add `ipyparallel.nbextension` to NotebookApp.server_extensions in your config and restart the notebook server, it should load.\n","This might be a symptom of #968 - it probably needs to support some HTTP range requests to enable jumping to specific points in the video.\n I think I may have a related issue (not sure it's the same).\r\nIf I open a new tab in Chrome (on an Ubuntu box) and I insert the location of my video, it displays just fine.\r\nThe same happens if I execute an HTML file with this content\r\n```html\r\n<video controls>                                                                \r\n    <source                                                                     \r\n        src=\"/media/[...]/20160706_180451.mp4\"\r\n        type=\"video/mp4\">                                                       \r\n</video>\r\n```\r\nIf I paste this into a Jupyter notebook cell, with some `%%HTML` magic, I end up with this (a blank, unplayable video).\r\n![video](https://cloud.githubusercontent.com/assets/2119355/22828780/2d2c8126-ef6d-11e6-8e5e-d46577f53e7b.png)\r\nNevertheless, I can get to display the video if I execute the following code.\r\n```python\r\nvideo = io.open('/media/[...]/20160706_180451.mp4', 'r+b').read()\r\nencoded = base64.b64encode(video)\r\nHTML(data='''\r\n<video controls>\r\n    <source src=\"data:video/mp4;base64,{0}\" type=\"video/mp4\" />\r\n</video>'''.format(encoded.decode('ascii')))\r\n```\r\nSo, I guess I am having some troubles with the encoding.\r\nAny suggestion would be appreciated.\r\n\r\nOh, just now I noticed this\r\n```\r\n[W 08:38:58.929 NotebookApp] 404 GET /media/[...]/20160706_180451.mp4 (127.0.0.1) 2.00ms\r\n```\r\n\r\nUsing a leading `file://` (so that I end up with something like `file:///media/[...]`) does not work either. `/media/...` in the URL is not the same as a filesystem path `/media/...`, except perhaps if you run your notebook server in the root directory, which we don't recommend.\r\n\r\nI believe that `file://` URLs are generally not loaded from `http[s]://` pages. @takluyver, thank you for getting back to me.\r\nSo, how would you go for displaying this video? Probably copy or symlink it to the directory where the notebook is (this is the working directory, unless you've changed it), and then use a relative URL. @takluyver, haha, I just symlinked it (before reading your answer) and it just did the trick.\r\nNevertheless, the absolute path was working just fine in the HTML file. So, I'm a tad puzzled now.\r\nDo you think you can explain what's going on? If you're loading the HTML page as a `file://` URL, then the absolute path will (I assume) be interpreted as another `file://` URL, so it works. If you run an HTTP server and access it with an `http://` URL, the absolute path will be treated as an `http://` URL, and sent to the server to evaluate. @takluyver, understood. Thank you. I was not aware of these quirks.","I think that's a perfectly reasonable solution.\n Thanks @takluyver and @minrk. \n","I'd guess that that tablet version of IE is prefetching header information on links on the page. Is it a problem for actually using the notebook? If not, don't worry about the warnings in the command prompt.\n\nWe recommend using a browser such as Firefox or Chrome for the notebook, though I think the latest versions of IE mostly work.\n Thanks for getting back to me so promptly Thomas. You are quite right in that the operation and functionality of the notebooks are not affected at all. I take your point about ignoring the warnings in that respect, it is just the irritation factor really. Aesthetically I don't like messages like that in the terminal window.\n\nYour solution worked though! So many thanks Thomas.\n\nIt appears that there is a problem with Microsoft Edge, which is running on both laptop/tablets. When I switched to Internet Explorer and made it the default browser the problem went away. The problem wasn't there before so I guess Microsoft have made some untested changes to Edge. \n\nSo problem solved. Thanks again.\n\nGary\n Thanks for getting back to me so promptly Thomas. You are quite right in\nthat the operation and functionality of the notebooks are not affected at\nall. I take your point about ignoring the warnings in that respect, it is\njust the irritation factor really. Aesthetically I don't like messages like\nthat in the terminal window.\n\nYour solution worked though! So many thanks Thomas.\n\nIt appears that there is a problem with Microsoft Edge, which is running on\nboth laptop/tablets. When I switched to Internet Explorer and made it the\ndefault browser the problem went away. The problem wasn't there before so I\nguess Microsoft have made some untested changes to Edge.\n\nSo problem solved. Thanks again.\n\nGary\n\nOn 30 January 2016 at 11:41, Thomas Kluyver notifications@github.com\nwrote:\n\n> I'd guess that that tablet version of IE is prefetching header information\n> on links on the page. Is it a problem for actually using the notebook? If\n> not, don't worry about the warnings in the command prompt.\n> \n> We recommend using a browser such as Firefox or Chrome for the notebook,\n> though I think the latest versions of IE mostly work.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1026#issuecomment-177153635.\n","Edited to remove explicit ip/port number. We never know.\nI'm not enough familiar with jupyterhub /docker to answer that.\n Actually the request is getting forwarded to the notebook spawner and its responding back with the html. It looks like the proxy is not able to interpret the response.\n\ntest1:10 GET http://10.65.4.131:8000/hub/static/components/jquery-ui/themes/smoothness/jquery-ui.min.css?v=9b2c8d3489227115310662a343fce11c \ntest1:11 GET http://10.65.4.131:8000/hub/static/components/jquery-typeahead/dist/jquery.typeahead.min.css?v=7afb461de36accb1aa133a1710f5bc56 \ntest1:25 GET http://10.65.4.131:8000/hub/custom/custom.css \ntest1:16 GET http://10.65.4.131:8000/hub/static/style/style.min.css?v=807166c81ded9672f91872a576572dcd \ntest1:26 GET http://10.65.4.131:8000/hub/static/components/es6-promise/promise.min.js?v=f004a16cb856e0ff11781d01ec5ca8fe 404 (Not Found)\ntest1:109 GET http://10.65.4.131:8000/hub/static/base/images/logo.png?v=7c4597ba713d804995e8f8dad448a397 404 (Not Found)\n It looks like the single-user server is not getting its base URL set correctly, because it's prompting requests for `/static` instead of `/user/:name/static`, which it shouldn't do.\n\nIs your single-user server Dockerfile available somewhere?\n  Thank you for your swift response. Yes Minrk, I figured it out and things are working fine. The essentials of base url wasnt quite clearly in notebook documentation. I was assuming the proxy would always send any user/username/\\* request to notebook server as a GET \"/\" request by default.\n","> , so whatever the user configures in the jupyter_notebook_config file for this field will be ignored,\n\nFrom a quick that seem untrue as the line you link to is executed only a the config is empty, but I might be missing something :\n\n``` python\n        if not ssl_options:\n    ...\n        else:\n    ...\n            ssl_options['ssl_version'] = ssl.PROTOCOL_TLSv1\n```\n\nI would be fine with looking at the SSLContext patch you propose. \n The override can be fixed by changing\n\n``` python\nssl_options['ssl_version'] = ssl.PROTOCOL_TLSv1\n```\n\nto\n\n``` python\nssl_options.setdefault('ssl_version', ssl.PROTOCOL_TLSv1)\n```\n\nIf you want to open a PR using the context stuff when Python 3 is available, that would be AOK, but we can also start with the simpler direct fix.\n","Sounds like something's being double escaped. Did  you recently update anything? Is this happening when you click on the notebook name from the dashboard page, or are you getting to it another way?\n It happens from both the dashboard page and running notebooks page.\n And what version of the notebook server are you running?\n 4.1.0\n I'm facing exactly the same issue. Everything was working fine until I updated every pip package as follows:\n`pip freeze --local | grep -v '^\\-e' | cut -d = -f 1  | xargs -n1 pip install -U`\n\nI found it suggested here [http://stackoverflow.com/questions/2720014/upgrading-all-packages-with-pip](url)\n\nMoreover, notebook server version is also the same 4.1.0\n +1 \n It certainly does look like double-escaping, though `%%20` isn't exactly what that should look like. That ought to be `%2520`. This makes some sense, since notebook-4.1_fixed_ some double-escaping bugs in 4.0. I just tested a clean install of current stable of everything (new virtualenv, `pip install --upgrade notebook`), and URLs with spaces are all working correctly. Can you share your versions of everything (including Python, browser, and OS)? Do you have any custom templates or configuration?\n\nMy impression is that somehow you have a _partial_ install of 4.1, and it's mixing some files from 4.0, causing inconsistent escaping behavior.\n If you say some commands for the _everything_ you want, I'll post the\noutput here.\n\n2016-03-14 13:51 GMT+01:00 Min RK notifications@github.com:\n\n> It certainly does look like double-escaping, though %%20 isn't exactly\n> what that should look like. That ought to be %2520. This makes some\n> sense, since notebook-4.1_fixed_ some double-escaping bugs in 4.0. I just\n> tested a clean install of current stable of everything (new virtualenv, pip\n> install --upgrade notebook), and URLs with spaces are all working\n> correctly. Can you share your versions of everything (including Python,\n> browser, and OS)? Do you have any custom templates or configuration?\n> \n> My impression is that somehow you have a _partial_ install of 4.1, and\n> it's mixing some files from 4.0, causing inconsistent escaping behavior.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1029#issuecomment-196297571.\n @lucaventurini sorry:\n\n``` bash\npython -V\npython -m platform\npip list\n```\n Here is my output @minrk , thanks a lot:\n**python -V**\n`Python 3.4.3`\n**python -m platform**\n`Linux-3.19.0-30-generic-x86_64-with-Ubuntu-14.04-trusty`\n**pip list**\n\n```\naplazame-math (0.0.1)\naplazame-sdk (0.2.6)\nbackports-abc (0.4)\nbokeh (0.11.1)\nbrain-sdk (0.0.1)\ncharts (0.4.6)\ncycler (0.10.0)\ndecorator (4.0.9)\nelasticsearch (2.3.0)\nelasticsearch-dsl (2.0.0)\nFlask (0.10.1)\nipdb (0.9.0)\nipykernel (4.3.1)\nipython (4.1.2)\nipython-genutils (0.1.0)\nipywidgets (4.1.1)\nitsdangerous (0.24)\nJinja2 (2.8)\njsonschema (2.5.1)\njupyter (1.0.0)\njupyter-client (4.1.1)\njupyter-console (4.1.1)\njupyter-core (4.0.6)\njupyterhub (0.4.1)\nlightning-python (1.2.1)\nlxml (3.5.0)\nMarkupSafe (0.23)\nmatplotlib (1.5.1)\nmistune (0.7.2)\nnbconvert (4.1.0)\nnbformat (4.0.1)\nnotebook (4.1.0)\nnumpy (1.10.4)\npamela (0.2.1)\npandas (0.18.0)\npath.py (8.1.2)\npexpect (4.0.1)\npickleshare (0.6)\npip (8.1.0)\nplotly (1.9.6)\nptyprocess (0.5.1)\npy (1.4.31)\nPygments (2.1.3)\npyparsing (2.1.0)\npytest (2.9.0)\npython-dateutil (2.5.0)\npytz (2016.1)\nPyYAML (3.11)\npyzmq (15.2.0)\nqtconsole (4.2.0)\nrequests (2.9.1)\nscikit-learn (0.17.1)\nscipy (0.17.0)\nsetuptools (20.2.2)\nsimplegeneric (0.8.1)\nsimplepam (0.1.5)\nsix (1.10.0)\nSQLAlchemy (1.0.12)\nterminado (0.6)\ntornado (4.3)\ntraitlets (4.1.0)\nurllib3 (1.14)\nWerkzeug (0.11.4)\nwheel (0.29.0)\n```\n BTW, I've just remove the underscores ( _ ) that I inserted for replacing white spaces, and I've just realized it's working fine.\nTherefore, I guess my previous comment is not useful anymore\n Oh, that reminds me. Can you:\n1. make sure you have restarted the notebook server after the upgrade\n2. do a force-refresh to clear the cache and/or test in an incognito/private tab?\n\nThe mixed-version nature of the bug means it's most likely to be mismatched Python and javascript, resulting from either upgrading the package without relaunching the server, or just stale, cached javascript in the browser.\n @minrk oh, you were right. I never restarted the notebook after the upgrade, and probably not even Chrome.\n\nNow it works perfectly. Thanks!\n","can you open the developers tools of you browser and looks at any error you would have. \n\nJust the look at the command palette hints that something is wrong with the notebook. \n This is the console log output when trying to use command palette.\n\n```\n[Log] Default extension for cell metadata editing loaded. (main.min.js, line 24082)\n[Log] Raw Cell Format toolbar preset loaded. (main.min.js, line 24168)\n[Log] Slideshow extension for metadata editing loaded. (main.min.js, line 24216)\n[Warning] actions jupyter-notebook:find-and-replace does not exist, still binding it in case it will be defined later... (main.min.js, line 28971)\n[Error] Failed to load resource: the server responded with a status of 404 (Not Found) (jquery.min.map, line 0)\n[Log] Session: kernel_created (5da56293-4d43-4939-b1f7-d5f8a5e17c01) (main.min.js, line 23370)\n[Log] Starting WebSockets: ws://localhost:8888/api/kernels/ae9cdd62-4425-4776-85e1-b11b12a72faa (main.min.js, line 22673)\n[Log] Kernel: kernel_connected (ae9cdd62-4425-4776-85e1-b11b12a72faa) (main.min.js, line 22329)\n[Log] Kernel: kernel_ready (ae9cdd62-4425-4776-85e1-b11b12a72faa) (main.min.js, line 22329)\n[Log] Loading extension: widgets/notebook/js/extension (main.min.js, line 12109)\n[Log] loaded widgets (extension.js, line 81)\n[Log] Loading extension: IPython-notebook-extensions-3.x/usability/runtools/main (main.min.js, line 12109)\n[Error] Error\n    check (require.js, line 900)\n    (anonymous function) (require.js, line 1140)\n    (anonymous function) (require.js, line 131)\n    (anonymous function) (require.js, line 1190)\n    each (require.js, line 56)\n    emit (require.js, line 1189)\n    check (require.js, line 940)\n    (anonymous function) (require.js, line 1140)\n    (anonymous function) (require.js, line 131)\n    (anonymous function) (require.js, line 1190)\n    each (require.js, line 56)\n    emit (require.js, line 1189)\n    check (require.js, line 940)\n    enable (require.js, line 1177)\n    init (require.js, line 783)\n    callGetModule (require.js, line 1204)\n    completeLoad (require.js, line 1583)\n    onScriptLoad (require.js, line 1711)\n[Log] Loading extension: cite2c/main (main.min.js, line 12109)\n[Error] Failed to load resource: the server responded with a status of 404 (Not Found) (backbone-min.map, line 0)\n```\n I've run notebooks in both Firefox and Safari and  am having the same issue.  Setting `c.Session.debug = True` doesn't display any information regarding this problem\n What version of the notebook is this, and how was it installed? Can you run the notebook without any extensions to see if an extension is the cause?\n @AGS-Knight If you're still running into this issue, [upgrade notebook](https://github.com/jupyter/jupyter/blob/master/docs/source/projects/upgrade-notebook.rst) and try again.\n","As noted on that PR, the testing dependency should be added to nbformat, not this repo.\n @minrk OK, cool - this makes more sense to me.  Thanks...I felt weird adding something to an external repo, it felt not quite right.  I will update my PR!\n","4.2 or 5.0?\n Here's the what's new page for MathJax 2.6:\nhttps://docs.mathjax.org/en/latest/whats-new-2.6.html\n\nThe changes in there sound OK for us to put in a 4.2 release to me.\n I think that looks fine.\n\nOn Mon, Feb 1, 2016 at 1:29 PM, Thomas Kluyver notifications@github.com\nwrote:\n\n> Here's the what's new page for MathJax 2.6:\n> https://docs.mathjax.org/en/latest/whats-new-2.6.html\n> \n> The changes in there sound OK for us to put in a 4.2 release to me.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1032#issuecomment-178203155.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n From the release notes, it looks like maybe we should switch the output to CommonHTML, but that's probably something to save for 5.0.\n Need backport. \n","This is `/static/notebook/js/main.min.js.map` in a **bad** build:\n\n```\n  \"sources\": [\n    \"components/underscore/underscore-min.js\",\n    \"components/codemirror/lib/codemirror.js\",\n    \"components/moment/moment.js\",\n    \"components/codemirror/mode/meta.js\",\n    \"base/js/utils.js\",\n    \"components/bootstrap/js/bootstrap.min.js\",\n    \"base/js/dialog.js\",\n    \"components/codemirror/addon/edit/matchbrackets.js\",\n    \"components/codemirror/addon/edit/closebrackets.js\",\n    \"components/codemirror/addon/comment/comment.js\",\n    \"notebook/js/cell.js\",\n    \"components/google-caja/html-css-sanitizer-minified.js\",\n    \"base/js/security.js\",\n    \"services/config.js\",\n    \"notebook/js/mathjaxutils.js\",\n    \"notebook/js/celltoolbar.js\",\n    \"components/marked/lib/marked.js\",\n    \"components/codemirror/mode/xml/xml.js\",\n    \"components/codemirror/mode/markdown/markdown.js\",\n    \"components/codemirror/addon/mode/overlay.js\",\n    \"components/codemirror/mode/gfm/gfm.js\",\n    \"components/codemirror/addon/mode/multiplex.js\",\n    \"components/codemirror/mode/python/python.js\",\n    \"components/codemirror/mode/stex/stex.js\",\n    \"notebook/js/codemirror-ipythongfm.js\",\n    \"notebook/js/textcell.js\",\n    \"base/js/keyboard.js\",\n    \"components/jquery-ui/ui/minified/jquery-ui.min.js\",\n    \"notebook/js/outputarea.js\",\n    \"notebook/js/contexthint.js\",\n    \"notebook/js/completer.js\",\n    \"notebook/js/codemirror-ipython.js\",\n    \"notebook/js/codecell.js\",\n    \"services/kernels/comm.js\",\n    \"services/kernels/serialize.js\",\n    \"services/kernels/kernel.js\",\n    \"services/sessions/session.js\",\n    \"components/codemirror/addon/runmode/runmode.js\",\n    \"notebook/js/tooltip.js\",\n    \"notebook/js/celltoolbarpresets/default.js\",\n    \"notebook/js/celltoolbarpresets/rawcell.js\",\n    \"notebook/js/celltoolbarpresets/slideshow.js\",\n    \"notebook/js/scrollmanager.js\",\n    \"notebook/js/quickhelp.js\",\n    \"notebook/js/commandpalette.js\",\n    \"notebook/js/notebook.js\",\n    \"base/js/page.js\",\n    \"auth/js/loginwidget.js\",\n    \"notebook/js/toolbar.js\",\n    \"notebook/js/maintoolbar.js\",\n    \"notebook/js/pager.js\",\n    \"components/bootstrap-tour/build/js/bootstrap-tour.min.js\",\n    \"notebook/js/tour.js\",\n    \"notebook/js/menubar.js\",\n    \"base/js/notificationwidget.js\",\n    \"base/js/notificationarea.js\",\n    \"notebook/js/notificationarea.js\",\n    \"notebook/js/savewidget.js\",\n    \"notebook/js/actions.js\",\n    \"notebook/js/keyboardmanager.js\",\n    \"notebook/js/kernelselector.js\",\n    \"notebook/js/about.js\",\n    \"components/jquery-typeahead/dist/jquery.typeahead.js\",\n    \"notebook/js/searchandreplace.js\",\n    \"notebook/js/main.js\"\n```\n\nThis is a **good** `main.min.js.map`:\n\n```\n  \"sources\": [\n    \"base/js/namespace.js\",\n    \"components/jquery/jquery.min.js\",\n    \"components/underscore/underscore-min.js\",\n    \"components/codemirror/lib/codemirror.js\",\n    \"components/moment/moment.js\",\n    \"components/codemirror/mode/meta.js\",\n    \"base/js/utils.js\",\n    \"components/bootstrap/js/bootstrap.min.js\",\n    \"base/js/dialog.js\",\n    \"components/codemirror/addon/edit/matchbrackets.js\",\n    \"components/codemirror/addon/edit/closebrackets.js\",\n    \"components/codemirror/addon/comment/comment.js\",\n    \"notebook/js/cell.js\",\n    \"components/google-caja/html-css-sanitizer-minified.js\",\n    \"base/js/security.js\",\n    \"services/config.js\",\n    \"notebook/js/mathjaxutils.js\",\n    \"base/js/events.js\",\n    \"notebook/js/celltoolbar.js\",\n    \"components/marked/lib/marked.js\",\n    \"components/codemirror/mode/xml/xml.js\",\n    \"components/codemirror/mode/markdown/markdown.js\",\n    \"components/codemirror/addon/mode/overlay.js\",\n    \"components/codemirror/mode/gfm/gfm.js\",\n    \"components/codemirror/addon/mode/multiplex.js\",\n    \"components/codemirror/mode/python/python.js\",\n    \"components/codemirror/mode/stex/stex.js\",\n    \"notebook/js/codemirror-ipythongfm.js\",\n    \"notebook/js/textcell.js\",\n    \"base/js/keyboard.js\",\n    \"components/jquery-ui/ui/minified/jquery-ui.min.js\",\n    \"notebook/js/outputarea.js\",\n    \"notebook/js/contexthint.js\",\n    \"notebook/js/completer.js\",\n    \"notebook/js/codemirror-ipython.js\",\n    \"notebook/js/codecell.js\",\n    \"services/kernels/comm.js\",\n    \"services/kernels/serialize.js\",\n    \"services/kernels/kernel.js\",\n    \"services/sessions/session.js\",\n    \"components/codemirror/addon/runmode/runmode.js\",\n    \"notebook/js/tooltip.js\",\n    \"notebook/js/celltoolbarpresets/default.js\",\n    \"notebook/js/celltoolbarpresets/rawcell.js\",\n    \"notebook/js/celltoolbarpresets/slideshow.js\",\n    \"notebook/js/scrollmanager.js\",\n    \"notebook/js/quickhelp.js\",\n    \"notebook/js/commandpalette.js\",\n    \"notebook/js/notebook.js\",\n    \"base/js/page.js\",\n    \"auth/js/loginwidget.js\",\n    \"notebook/js/toolbar.js\",\n    \"notebook/js/maintoolbar.js\",\n    \"notebook/js/pager.js\",\n    \"components/bootstrap-tour/build/js/bootstrap-tour.min.js\",\n    \"notebook/js/tour.js\",\n    \"notebook/js/menubar.js\",\n    \"base/js/notificationwidget.js\",\n    \"base/js/notificationarea.js\",\n    \"notebook/js/notificationarea.js\",\n    \"notebook/js/savewidget.js\",\n    \"notebook/js/actions.js\",\n    \"notebook/js/keyboardmanager.js\",\n    \"notebook/js/kernelselector.js\",\n    \"notebook/js/about.js\",\n    \"components/jquery-typeahead/dist/jquery.typeahead.js\",\n    \"notebook/js/searchandreplace.js\",\n    \"notebook/js/main.js\"\n```\n\nSo missing .js files are\n\n```\n    \"components/jquery/jquery.min.js\",\n    \"base/js/namespace.js\",\n    \"base/js/events.js\",\n```\n\nTo me, this is really weird. \n When the page is blank, what do you see in the javascript console of your browser?\n Here is what I saw:\n<img width=\"625\" alt=\"screen shot 2016-02-02 at 1 04 54 am\" src=\"https://cloud.githubusercontent.com/assets/2769972/12744463/3f88e544-c949-11e5-83c8-982aa2814bb6.png\">\n\nThis is the files loaded:\n<img width=\"417\" alt=\"screen shot 2016-02-02 at 1 05 48 am\" src=\"https://cloud.githubusercontent.com/assets/2769972/12744470/45003342-c949-11e5-98e7-b5ef2f0bfd4b.png\">\n\nAs mentioned, if using `--NotebookApp.ignore_minified_js=True`, everything works fine. I think `build-main.js` is the problem here.\n What's the output of `npm list` in the notebook repo?\n This is `npm list`:\n\n```\n\u251c\u2500\u2500 bower@1.7.7\n\u251c\u2500\u252c less@2.6.0\n\u2502 \u251c\u2500\u252c errno@0.1.4\n\u2502 \u2502 \u2514\u2500\u2500 prr@0.0.0\n\u2502 \u251c\u2500\u2500 graceful-fs@3.0.8\n\u2502 \u251c\u2500\u2500 image-size@0.3.5\n\u2502 \u251c\u2500\u2500 mime@1.3.4\n\u2502 \u251c\u2500\u252c mkdirp@0.5.1\n\u2502 \u2502 \u2514\u2500\u2500 minimist@0.0.8\n\u2502 \u251c\u2500\u252c promise@6.1.0\n\u2502 \u2502 \u2514\u2500\u2500 asap@1.0.0\n\u2502 \u251c\u2500\u252c request@2.69.0\n\u2502 \u2502 \u251c\u2500\u2500 aws-sign2@0.6.0\n\u2502 \u2502 \u251c\u2500\u252c aws4@1.2.1\n\u2502 \u2502 \u2502 \u2514\u2500\u2500 lru-cache@2.7.3\n\u2502 \u2502 \u251c\u2500\u252c bl@1.0.1\n\u2502 \u2502 \u2502 \u2514\u2500\u252c readable-stream@2.0.5\n\u2502 \u2502 \u2502   \u251c\u2500\u2500 core-util-is@1.0.2\n\u2502 \u2502 \u2502   \u251c\u2500\u2500 inherits@2.0.1\n\u2502 \u2502 \u2502   \u251c\u2500\u2500 isarray@0.0.1\n\u2502 \u2502 \u2502   \u251c\u2500\u2500 process-nextick-args@1.0.6\n\u2502 \u2502 \u2502   \u251c\u2500\u2500 string_decoder@0.10.31\n\u2502 \u2502 \u2502   \u2514\u2500\u2500 util-deprecate@1.0.2\n\u2502 \u2502 \u251c\u2500\u2500 caseless@0.11.0\n\u2502 \u2502 \u251c\u2500\u252c combined-stream@1.0.5\n\u2502 \u2502 \u2502 \u2514\u2500\u2500 delayed-stream@1.0.0\n\u2502 \u2502 \u251c\u2500\u2500 extend@3.0.0\n\u2502 \u2502 \u251c\u2500\u2500 forever-agent@0.6.1\n\u2502 \u2502 \u251c\u2500\u252c form-data@1.0.0-rc3\n\u2502 \u2502 \u2502 \u2514\u2500\u2500 async@1.5.2\n\u2502 \u2502 \u251c\u2500\u252c har-validator@2.0.6\n\u2502 \u2502 \u2502 \u251c\u2500\u252c chalk@1.1.1\n\u2502 \u2502 \u2502 \u2502 \u251c\u2500\u2500 ansi-styles@2.1.0\n\u2502 \u2502 \u2502 \u2502 \u251c\u2500\u2500 escape-string-regexp@1.0.4\n\u2502 \u2502 \u2502 \u2502 \u251c\u2500\u252c has-ansi@2.0.0\n\u2502 \u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500 ansi-regex@2.0.0\n\u2502 \u2502 \u2502 \u2502 \u251c\u2500\u252c strip-ansi@3.0.0\n\u2502 \u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500 ansi-regex@2.0.0\n\u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500 supports-color@2.0.0\n\u2502 \u2502 \u2502 \u251c\u2500\u252c commander@2.9.0\n\u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500 graceful-readlink@1.0.1\n\u2502 \u2502 \u2502 \u251c\u2500\u252c is-my-json-valid@2.12.4\n\u2502 \u2502 \u2502 \u2502 \u251c\u2500\u2500 generate-function@2.0.0\n\u2502 \u2502 \u2502 \u2502 \u251c\u2500\u252c generate-object-property@1.2.0\n\u2502 \u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500 is-property@1.0.2\n\u2502 \u2502 \u2502 \u2502 \u251c\u2500\u2500 jsonpointer@2.0.0\n\u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500 xtend@4.0.1\n\u2502 \u2502 \u2502 \u2514\u2500\u252c pinkie-promise@2.0.0\n\u2502 \u2502 \u2502   \u2514\u2500\u2500 pinkie@2.0.2\n\u2502 \u2502 \u251c\u2500\u252c hawk@3.1.3\n\u2502 \u2502 \u2502 \u251c\u2500\u2500 boom@2.10.1\n\u2502 \u2502 \u2502 \u251c\u2500\u2500 cryptiles@2.0.5\n\u2502 \u2502 \u2502 \u251c\u2500\u2500 hoek@2.16.3\n\u2502 \u2502 \u2502 \u2514\u2500\u2500 sntp@1.0.9\n\u2502 \u2502 \u251c\u2500\u252c http-signature@1.1.1\n\u2502 \u2502 \u2502 \u251c\u2500\u2500 assert-plus@0.2.0\n\u2502 \u2502 \u2502 \u251c\u2500\u252c jsprim@1.2.2\n\u2502 \u2502 \u2502 \u2502 \u251c\u2500\u2500 extsprintf@1.0.2\n\u2502 \u2502 \u2502 \u2502 \u251c\u2500\u2500 json-schema@0.2.2\n\u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500 verror@1.3.6\n\u2502 \u2502 \u2502 \u2514\u2500\u252c sshpk@1.7.3\n\u2502 \u2502 \u2502   \u251c\u2500\u2500 asn1@0.2.3\n\u2502 \u2502 \u2502   \u251c\u2500\u2500 dashdash@1.12.2\n\u2502 \u2502 \u2502   \u251c\u2500\u2500 ecc-jsbn@0.1.1\n\u2502 \u2502 \u2502   \u251c\u2500\u2500 jodid25519@1.0.2\n\u2502 \u2502 \u2502   \u251c\u2500\u2500 jsbn@0.1.0\n\u2502 \u2502 \u2502   \u2514\u2500\u2500 tweetnacl@0.13.3\n\u2502 \u2502 \u251c\u2500\u2500 is-typedarray@1.0.0\n\u2502 \u2502 \u251c\u2500\u2500 isstream@0.1.2\n\u2502 \u2502 \u251c\u2500\u2500 json-stringify-safe@5.0.1\n\u2502 \u2502 \u251c\u2500\u252c mime-types@2.1.9\n\u2502 \u2502 \u2502 \u2514\u2500\u2500 mime-db@1.21.0\n\u2502 \u2502 \u251c\u2500\u2500 node-uuid@1.4.7\n\u2502 \u2502 \u251c\u2500\u2500 oauth-sign@0.8.1\n\u2502 \u2502 \u251c\u2500\u2500 qs@6.0.2\n\u2502 \u2502 \u251c\u2500\u2500 stringstream@0.0.5\n\u2502 \u2502 \u251c\u2500\u2500 tough-cookie@2.2.1\n\u2502 \u2502 \u2514\u2500\u2500 tunnel-agent@0.4.2\n\u2502 \u2514\u2500\u252c source-map@0.4.4\n\u2502   \u2514\u2500\u2500 amdefine@1.0.0\n\u2514\u2500\u2500 requirejs@2.1.22\n```\n\nUsing `jupyter notebook` giving me blank page and GET errors:\n\n```\n$ jupyter notebook\n[I 09:15:18.455 NotebookApp] Serving notebooks from local directory: /Users/xxx/Documents/yyy\n[I 09:15:18.455 NotebookApp] 0 active kernels\n[I 09:15:18.455 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/\n[I 09:15:18.455 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[W 09:15:21.193 NotebookApp] 404 GET /api/kernels/d75f297a-c6c3-4de2-868f-f2a2fed9f81d/channels?session_id=8DA97D5ED541438E9DA208F061857024 (::1): Kernel does not exist: d75f297a-c6c3-4de2-868f-f2a2fed9f81d\n[W 09:15:21.206 NotebookApp] 404 GET /api/kernels/d75f297a-c6c3-4de2-868f-f2a2fed9f81d/channels?session_id=8DA97D5ED541438E9DA208F061857024 (::1) 20.51ms referer=None\n[W 09:15:26.183 NotebookApp] 404 GET /api/kernels/d75f297a-c6c3-4de2-868f-f2a2fed9f81d/channels?session_id=8DA97D5ED541438E9DA208F061857024 (::1): Kernel does not exist: d75f297a-c6c3-4de2-868f-f2a2fed9f81d\n[W 09:15:26.184 NotebookApp] 404 GET /api/kernels/d75f297a-c6c3-4de2-868f-f2a2fed9f81d/channels?session_id=8DA97D5ED541438E9DA208F061857024 (::1) 2.74ms referer=None\n```\n\nWhile not minify is OK:\n\n```\n$ jupyter notebook --NotebookApp.ignore_minified_js=True\n[I 01:06:06.023 NotebookApp] Serving notebooks from local directory: /Users/xxx/Documents/yyy\n[I 01:06:06.023 NotebookApp] 0 active kernels\n[I 01:06:06.023 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/\n[I 01:06:06.023 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[I 01:06:10.298 NotebookApp] Kernel started: d75f297a-c6c3-4de2-868f-f2a2fed9f81d\n^C[I 09:15:14.634 NotebookApp] interrupted\nServing notebooks from local directory: /Users/xxx/Documents/yyy\n1 active kernels\nThe Jupyter Notebook is running at: http://localhost:8888/\n```\n This error occurs when the `window['jQuery']` variable is undefined.  The notebook that lives in master attempts to isolate jquery to contexts when it's needed, it's possible that this is actually working as intended which is causing bootstrap to fail.  When it's ready, https://github.com/jupyter/notebook/pull/1047 will fix this because it loads all of the jquery stuff globally, which makes sense because jquery and friends will be global whether we like it or not.\n Thanks. Now I see the changes in `notebook/templates/page.html`. But then I also saw that `ignore_minified_js` is removed. Why is that? BTW the `.min` files are not really minified (at least as I see now). They are just concatenated.\n Yeah, I haven't implemented minification yet.  The original argument for the ignore_minified_js flag was that it would allow developers to iterate faster by avoiding rebundling and minifiying.  That's a non-issue with webpack --watch because it caches all the build files and will rebuild the changes you've made, quickly.  If you think there's still reason for the ignore_minified flag that I'm missing, please leave a comment in #1047 so we can discuss it. :)\n I'm still trying to figure out why it's not finding the right files on your system, but it is on mine. If #1047 fixes it, that's fine, too.\n Should this be closed? Sounds like it has run its course...\n Yup, it's working okay, now.\n thx\n","I'm not sure what you mean by this. Can you elaborate?\n Add a time scheduler so the notebook can run as a cronjob. We can see zeppelin\n @minrk Did a search on Zeppelin's Apache Incubation project (https://github.com/apache/incubator-zeppelin/search?utf8=%E2%9C%93&q=cron). Here's the API implementation for their cron support:\nincubator-zeppelin/zeppelin-server/src/main/java/org/apache/zeppelin/rest/message/CronRequest.java\n You can execute a notebook from the command line using nbconvert. So if you want to do something like cron... what's wrong with using cron? ;-)\n\nFor any kind of scheduled task, cron has several advantages over something cron-like reimplemented in the notebook server:\n- Cron is running by default, so your scheduled tasks won't stop when your notebook server is shut down\n- There's no need for us to design and manage a new on-disk format to store scheduled tasks across a restart.\n- You can run more than one notebook server simultaneously, so we would presumably need some logic to ensure that the same scheduled task is not being run by two servers at once.\n ping @yuvipanda, IIRC wikimedia lab want that as a notebook extension: a notebook dropdown that have `daily`, `hourly`, `weekly`, and a content manager that will set/remove the entry from cron on save. \n\nThough it is likely that this will **not** be part of core notebook, and will need to be an extension.\n https://phabricator.wikimedia.org/T124972 is our ticket for tracking this functionality. We're using kubernetes as our spawner, and kubernetes is in the process of adding a distributed cron functionality. Once that's done, I'll write this nbextension that does this. It'll probably be tied to kubernetes though - but should be extensible enough to run with a real cron.\n\nI agree this shouldn't be part of core notebook but an extension.\n @takluyver  My understanding is that `nbconvert` only works for python notebooks.  What if a zeppelin notebook has a bunch of different languages?\n > My understanding is that nbconvert only works for python notebooks.\n\nnbconvert works with any Jupyter notebook file, regardless of the language. Here's a [Julia example](http://nbviewer.jupyter.org/url/jdj.mit.edu/~stevenj/IJulia%20Preview.ipynb) on nbviewer (which uses nbconvert).\n\n> What if a zeppelin notebook has a bunch of different languages?\n\nZeppelin is a completely separate notebook system, nothing to do with our technologies.\n @takluyver  DOH! I thought this was the zeppelin github. My bad.\n","#1036 disables the renderer menu. Do you think we should do something else?\n @pkra what would be the API for limiting the renderer menu to the available output formats, if we wanted to allow NativeMML, for instance?\n The quick and easy way would be to configure `showRenderer: false` to disable the renderer submenu, see http://docs.mathjax.org/en/latest/options/MathMenu.html.\n\nTo modify the content, would needs some configuration work, e.g.,\n\n``` javascript\nMathJax.Hub.Register.StartupHook(\"End Config\", function () {\n          MathJax.Hub.Register.StartupHook(\"MathMenu Ready\", function () {\n            MathJax.Menu.menu.items[2].submenu.items[3].submenu.items[3].disabled = true;\n           });\n        });\n```\n\nwould disable the menu entry for NativeMML output. (Note: there are hidden menus which influence the counting, see https://github.com/mathjax/MathJax/blob/master/unpacked/extensions/MathMenu.js)\n Related : https://github.com/jupyter/notebook/issues/1037\n I did `showRenderer: false` in #1036. I think we'll wait until there's an option like:\n\n``` javascript\n{\n  MathMenu: {\n    renderers: [\"NativeMML\", \"HTML-CSS\"],\n  }\n}\n```\n\nfor specifying the available renderers before we re-enable the menu.\n I would recommend that you not use the indices directly, but use the `Find()` method to locate the menu that you want.  This will work even if other menus are added or removed.  E.g., \n\n```\nMathJax.Hub.Register.StartupHook(\"MathMenu Ready\", function () {\n  var renderers = MathJax.Menu.menu.Find(\"Math Settings\").submenu.Find(\"Math Renderer\").submenu;\n  renderers.Find(\"SVG\").disabled = true;\n  renderers.Find(\"Fast HTML\").disabled = true;\n  renderers.Find(\"PlainSource\").disabled = true;\n});\n```\n\nAdd any renderers that you don't include.  If you don't provide the AssistiveMML or Fast Preview code, then you should disable those as well.\n > I think we'll wait until there's an option like [...]\n\nYou might want to chime in when we redesign the menu in v3.0. But it's unlikely for 2.x, I think.\n I think we can get away with Find for now; it's not exactly a fast-moving target. It would be great if part of slimming a MathJax install could include telling MathJax what output formats are available.\n","Need backport. \n","I'm not sure what the source of 1. is, perhaps conda used to separate MathJax as a package from IPython, but added it as a dependency. That would only affect the pre-Jupyter notebook (IPython < 4).\n\nNumber 2. is a remnant of IPython < 4, when we didn't ship mathjax, due to its size, and the default was to use a CDN. If you wanted local mathjax, you could install it as an nbextension. This no longer has any effect as of notebook 4.0, because we bundle MathJax as a plain old dependency.\n\nThe only relevant one if you are using current versions is 3, now that the notebook bundles a stripped MathJax as a normal dependency.\n That was informative and explains the situation somewhat, thanks. I should have mentioned that I upgraded Conda from v2 to v3, sorry about that. What remains is 2 things : \n1. Assuming that I'm adamant about MathML, how would I ensure that the required files are accessible to the frontend? Just putting the files in the correct location has no effect : the files are just not found.\n2. Why a stripped copy of MathJax? I'm no authority, but I thought \"bundling\" meant a local copy with no relation to the direct release,  and \"dependency\" meant a separate package that the package manager recognizes as required.\n > Assuming that I'm adamant about MathML, how would I ensure that the required files are accessible to the frontend?\n\nYou would need to modify the notebook's build process to change what files are installed, then run `python setup.py install`. [This is where we whitelist MathJax files](https://github.com/jupyter/notebook/blob/4.0.0/setupbase.py#L150).\n\nSince we do the slimming at install time, instead of the above, you will have all of MathJax available if you do a development install:\n\n```\ngit clone https://github.com/jupyter/notebook\ncd notebook\npython setup.py js css\npip install -e .\n```\n\nwhich only links to the source dir, instead of copying the whitelisted files into site-packages.\n\n> Why a stripped copy of MathJax?\n\nSize. A complete MathJax install is many times larger than the entirety of the notebook and all other dependencies combined. A slimmed version without image fonts is still more than everything else combined. So we follow the recommended MathJax process for stripping the size of an install by only including the files/fonts we use at install time.\n\nWe could add MathML as an additional bundled output format, since it is not especially large.\n > Since we do the slimming at install time, instead of the above, you will have all of MathJax available if you do a development install:\n\nEven though I copied the new files (`NativeMML/config.js`) to the location of MathJax (`notebook-4.1.0-py34_0\\Lib\\site-packages\\notebook\\static\\components\\MathJax - v2.5.3`) , the local server gave a 404 when I tried to access the file via browser. Restarting Jupyter, restarting the system, did not help. What was going on?\n\n> We could add MathML as an additional bundled output format, since it is not especially large.\n\nThat would be great. Not all of us live and die by Google's mandates (re: chrome's removal of MathML).\n\n> Size. A complete MathJax install is many times larger than the entirety of the notebook and all other dependencies combined.\n\nOk I understand the point about disproportionate size, but for context : the anaconda installer alone is 330MB. Any number of MathJax files of any size is not going to affect me in any way. And I think such users would form a significant chunk of Jupyter's userbase.\n\nI hope you guys can point me to the reason (github issue/commit) why IPython3/Jupyter moved to a bundled copy of MathJax from a package/nbextension... And would it be possible for me to redirect Jupyter to use a full, separately installed copy of MathJax? I am guessing that I could install a copy of MathJax, and then change some paths in Jupyter.\n If you have a full MathJax installed in nbextensions. That would be:\n\n```\n`jupyter --data-dir`/nbextensions/mathjax\n```\n\nYou can tell the notebook to use that one with:\n\n``` python\nc.NotebookApp.mathjax_url = 'nbextensions/mathjax'\n```\n\nAs for the reasoning for bundling: we used to use MathJax from a CDN because the size of a mathjax dependency was completely unacceptable. That was suboptimal because it meant for most users, math wouldn't work without a network connection (e.g. on a plane). Only by using a stripped copy, following the MathJax documentation for reducing the size of a MathJax install, was it feasible to treat it like the rest of our js dependencies.\n","Is there anything in the browser's JS console when you do that?\n Just: resize to : 36 rows by  40 columns / main.js:43\n\nI found the reason of this behaviour. I have custom.css with this line:\n`.container { width:90% !important; }`\n So if you take the custom CSS away, it works?\n Yes.\n\nBut I'd like to have custom notebook width.\n Someone who's more familiar with the CSS layout (@Carreau?) can either tell you a better way to do that, or devise a better if there isn't currently one.\n ```\n.notebook_app .container {\n    width:70%; !important\n}\n```\n\nwill target only the notebook page. \n\n```\n.terminal-app .container {\n...\n}\n```\n\nWill target only the terminal page (yeah for consistency, - vs _ )\n Thanks @Carreau !\n Thanks. It works.\nBut how change width for terminal ? Is it possible ?\n Does the snippet @Carreau posted above not work?\n When I added \n\n```\n.notebook_app .container {\n    width:90%; !important\n}\n```\n\neverything is OK.\n\nAfter adding\n\n```\n.terminal-app .container {\n    width:90%; !important\n}\n```\n\nproblem came back.\n I guess the 90% sizing is relative to something unexpected. Myeh, CSS.\n > I guess the 90% sizing is relative to something unexpected. Myeh, CSS.\n\nAh, no my guess is he terminal is sized by JS (col times row):\n\nSo reduce the width of container -> reduce terminal size\nreduce terminal size -> container have enough space to shrink\nstart looping until terminal get min width.\n The only thing more 'fun' than CSS is when your CSS is interacting with your javascript.\n Is there any way to force resizing of terminal window from JS ?\n Does anybody found the solution for fix terminal width with custom container css?","We explain this in more detail in the development_js doc:\nhttp://jupyter-notebook.readthedocs.org/en/latest/development_js.html\n\nIs it worth making a link to that page, and/or improving that part of the documentation, rather than duplicating the information?\n My comment in #1037 was meant for added debugging. It shouldn't be necessary, and probably shouldn't be added here, since it gives the false impression that it is necessary. `pip install -e .` should always be sufficient, and if it ever isn't, it is because of a bug somewhere.\n @takluyver and @minrk: Good suggestions. \n\nI think it would be helpful to update the logical outline/flow of all the Developer (defined as those contributing code to the notebook source) documentation. \n\nRight now, the developer information is spread across the README, development_js.rst (which includes both js development as well as creating a release and should likely be split into two shorter documents), and development_faq.rst (which is intended for those contributing code to the notebook source).\n\nIf it's cool with you, I'm going to use this PR to reorganize the three docs mentioned above to be more contributor friendly.\n Sounds great!\n @takluyver @minrk Here's the first pass at reorganizing the existing docs for Developers. I have not yet moved the README contents into it. Feel free to toss in comments. My next step will be moving some things from the README to the docs and then referring via link from the README to docs (or the reverse). Screenshots below for your convenience.\n\n### Navigation from main contents page and sidebar\n\n<img width=\"878\" alt=\"screen shot 2016-02-02 at 11 41 18 am\" src=\"https://cloud.githubusercontent.com/assets/2680980/12762169/c7dd5782-c9a2-11e5-9061-e6df5c42dd7e.png\">\n\n### Developer Landing Page for contributors to the Notebook\n\n<img width=\"1201\" alt=\"screen shot 2016-02-02 at 11 41 46 am\" src=\"https://cloud.githubusercontent.com/assets/2680980/12762196/f252ad96-c9a2-11e5-95c0-3c1e6eb30dce.png\">\n\n### Installing Javascript Machinery page (post-edit)\n\n<img width=\"834\" alt=\"screen shot 2016-02-02 at 11 42 17 am\" src=\"https://cloud.githubusercontent.com/assets/2680980/12762257/3854b5dc-c9a3-11e5-8673-24743943f262.png\">\n\n### Making a release page (post-edit)\n\n<img width=\"548\" alt=\"screen shot 2016-02-02 at 11 42 40 am\" src=\"https://cloud.githubusercontent.com/assets/2680980/12762321/76c6a564-c9a3-11e5-9fa3-0cf49dccbb94.png\">\n It seems a bit odd to have making a release taking up so much space under 'want to contribute' - that information isn't relevant to new contributors.\n\nAlso, more broadly, the heading 'Want to contribute?' feels a bit misleading at present - we have information on how to set up a development environment, but really no guidance to actually contributing.\n\nI think it would be nice to have an overview similar to the CPython developer guide, that provides an overview of the contribution process: https://docs.python.org/devguide/\n @takluyver Thanks for the comments. \n\nI decreased the depth of the Table of Contents section 'Want to Contribute'. \n\nI also divided the section into project specific info and more general Jupyter contribution info which is at jupyter.readthedocs.org. \n Thanks @minrk. @damianavila good point re: conda. I will put it in when I correct a minor typo error.\n","I've noticed that I have to right click inside the little term js widget to get copy paste to work. That definitely needs a fix. Thanks for reporting it!\n See also chjj/term.js#37 and chjj/term.js#51.\n Looks like this has been resolved, yet I'm still not able to paste into the Jupyter terminal (in Ubuntu/Firefox).  I'm running jupyter via your current jupyter/datascience-notebook docker image, seems like it should be recent enough?  Any hints on debugging this?\n @cboettig I don't think this is in the current released version, is set to milestone 4.1 which hasn't been released yet.\n I can still repro this with the 4.1rc1 :(\n Can someone re-open this? This is still happening (Firefox on Linux)\n Some further clarification: The bug preventing paste in _all browsers_ is fixed in notebook 4.1 (term.js 0.0.7). The bug preventing Firefox from pasting is apparently separate (chjj/term.js#51), and fixed in term.js master, but hasn't seen a release. There's nothing for us to do but wait for term.js 0.0.8.\n Actually, the fix hasn't been merged into master, and term.js development seems to have stopped :(\n I'm not sure if this is a dumb question or not, but how are you getting pasting to work? `Ctrl+V` or `right click` don't work.\n\nMy Jupyter installation is:\n\n```\nThe version of the notebook server is 4.2.0 and is running on:\nPython 2.7.11 |Anaconda 2.3.0 (64-bit)| (default, Dec  6 2015, 18:08:32) \n[GCC 4.4.7 20120313 (Red Hat 4.4.7-1)]\n```\n @aggFTW Are you using Firefox? I think the fix for that is still not released.\n I'm using Chrome.\n It sounds like this is working for some people.  For me, right clicking on the terminal does not show the paste option in Chrome Firefox or even IE.  Running Windows 7 on the client side and Jupyter version 4.1.0 on remote server.  The server is Ubuntu 14.04.\nIs there a work around?\n Hey guys,\n\nJust taken a look into this again as while it's not really a huge issue it is a a pain in the ass...  and then i foudn this:\n\nhttps://github.com/sourcelair/xterm.js\n\nA maintained fork of the unsupported term.js. Running a local instance myself and it seems like it solves this problem and a host of others, #1227 for instance.\n\nAny chance we can get term.js swapped out for xterm.js? I have no idea how much work is entailed in doing this, so feel free to shout at me for asking you to move mountains...\n\nCheers\n @rgbkrk I think you were looking into this. Do you have a feel for how easy it would be to swap xterm.js in place of term.js?\n @takluyver, not hard at all ;).  https://github.com/jupyter/notebook/pull/1591\n Fixed by #1591","Oops. Thanks, we;ll try to fix that in a 4.2\n\n@captainsafia , @parleur want to give it a try ? I  know you did poke around the JS not so long ago. \n (marking as sprint-friendly, but not sure if it's really is)\n","Doh. Just saw that all branches are built. Nevermind! I thought only master was going out.\n","I think storing additional data that way is fine, it's just something we neglected to consider when writing the notebook migration code. It's also not obvious that copying the metadata is always the right thing to do, though I suspect it is in more cases than not.\n\nI'm also not sure exactly why we split the cells up like that. It's probably something to do with the removal of heading cells as a separate cell type - but you weren't using heading cells in the original, so I'm not sure why we'd do anything with it.\n I cannot find where we would be splitting the cell on upgrade (it doesn't make sense to ever split on upgrade, only split on downgrade if we wanted to restore heading cells, which I checked and we don't do).\n\nCan you provide more information on what versions were used before upgrading and after, and ideally a complete notebook that reproduces the issue?\n I'll ask my colleague who uncovered the problem if she has a reproducible example.  Thanks!\n Oops, didn't mean to close it.\n I talked to the team about making this discretely reproducible and the thought was that we'd have to roll back to an old version of ipython, create similar notebooks to the ones that have been upgraded, and migrate forward.  All in all, given the effort compared to minor nature of this bug, it doesn't seem like a good use of our time to generate or yours to review.  I think we can just close this one out.\n\nWe'd appreciate any guidelines on how to build plugins that are as future proofed as possible.\n","Turned out to be easier than I feared - jupyter/nbconvert#229. We'll probably want to either do a new release of nbconvert soon, or run the notebook tests with development versions of nbconvert until we do.\n Annoyingly, it seems that the traceback and the hanging were two separate problems - we resolved the traceback, but the tests are still hanging after completion on Jenkins.\n ...running the tests in verbose mode appears to prevent them from hanging. I don't know how that makes sense, but my debugging didn't really get anywhere, so at least it's a way to avoid the issue.\n Myeh, so much for that theory. The tests just hung again on Jenkins. :confused: \n\nhttps://jenkins.jupyter.org/job/jack-of-none/151/console\n This is happening quite frequently on Travis and Jenkins, but so far I haven't managed to reproduce it anywhere where I can begin to debug what's going on. :angry: \n @takluyver It's a bit odd in the output where pip 7.x is being removed. Is it possible to run the `pip install --upgrade pip` or `python -m pip install --upgrade pip` separately before upgrading/installing other packages?\n Yup, running that on Jenkins now to see what happens.\n Ha, pretty sure I found it! It is indeed a zmq-related bug (though it's in this repo). After spending most of my day on this, If I'm right, the patch is two characters, adding a missing `()`. PR incoming, once I make some changes that would make this a bit easier to notice.\n","@ellisonbg , I seem to remember asking for that, but it was decided not-to. \nDo yo remember the reason why ?\n Don't remember the details of the discusion, but after using it for a\nwhile, I fully agree that we should deselect after actions.\n\nOn Thu, Feb 4, 2016 at 3:29 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> @ellisonbg https://github.com/ellisonbg , I seem to remember asking for\n> that, but it was decided not-to.\n> Do yo remember the reason why ?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1044#issuecomment-180101736.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Travis is being a little grumpy, but it's not related to this PR.\n Great! Thanks!\n","Additional note: The issue is found in any of the key map settings. I looked at the console and didn't see any errors.\n\nFYI @oeway @dsblank\n Additional comment on this \"find/replace\" feature:\n\nWhen the find/replace bar appeared, and I typed some word to find, I expect the bar keep still in place, so I can press enter to find the next word, just like you search a word in a webpage with google chrome.\n\nIs there any shortcut to continue the searching? If possible, I think it's more natural to keep the bar, and keep the focus on the bar, when you press enter, it jump to another hit, and if you press escape button, the bar disappear.\n This search replace is just the [Codemirror](http://codemirror.net/doc/manual.html#addon_search) search and replace, we just added a menu. \n\nOur css might conflict, but all other feature/keyboard/bug are likely codemirror ones.\n ``` css\n.CodeMirror {\n    line-height: @code_line_height;  /* Changed from 1em to our global default */\n    font-size: @notebook_font_size;\n    height: auto;     /* Changed to auto to autogrow */\n    background: none;  /* Changed from white to allow our bg to show through */\n}\n```\n\nit's because of the last line (background: none;)\n Anybody want to try tackling this for 5.0? > Anybody want to try tackling this for 5.0?\r\n\r\nThat's typically where I have the new labelling scheme. GitHub has a Standard \"Need Contributor\" label which is standard across 99 % of GitHub repo, and that you can't add here. You have to add the \"cat:new Contributor\" which you can't search across repo  and make issue like this one less discoverable.  OK, if we're saying it's an issue for a new contributor, I'm bumping it to backlog. > GitHub has a Standard \"Need Contributor\" label which is standard across 99 % of GitHub repo, and that you can't add here. You have to add the \"cat:new Contributor\" which you can't search across repo and make issue like this one less discoverable.\r\n\r\nI agree that this labeling approach does not make it easy for new contributors to find issues. I would recommend using the standard New Contributor label and give it a distinct color from the others. It would be fine to keep the cat:New Contributor label as well for reports, etc. So a new contributor issue would be tagged with `New Contributor` in a distinct color and `cat:new Contributor`. cc/ @ellisonbg  I am fine using a global \"New Contributor\" label across all our repos\n(without the \"cat\" prefix). But that is different from \"Need Contributor\"\nwhich is closer to what we are calling Help Wanted.\n\nOn Wed, Feb 1, 2017 at 6:27 AM, Carol Willing <notifications@github.com>\nwrote:\n\n> GitHub has a Standard \"Need Contributor\" label which is standard across 99\n> % of GitHub repo, and that you can't add here. You have to add the \"cat:new\n> Contributor\" which you can't search across repo and make issue like this\n> one less discoverable.\n>\n> I agree that this labeling approach does not make it easy for new\n> contributors to find issues. I would recommend using the standard New\n> Contributor label and give it a distinct color from the others. It would be\n> fine to keep the cat:New Contributor label as well for reports, etc. So a\n> new contributor issue would be tagged with New Contributor in a distinct\n> color and cat:new Contributor. cc/ @ellisonbg\n> <https://github.com/ellisonbg>\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/1045#issuecomment-276670464>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0BRm-JCuLY5EOkKuODXzV3KMlBTKks5rYJZpgaJpZM4HTlT6>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","This is ready!\n\n@Carreau this retains all of the require.js behavior, but as we start adding dependencies on true npm packages, it will make that more difficult.  I'm thinking about adding an index.js or change namespace.js so that it does and exposes imports to various useful modules.  Then, instead of telling people to \n\n``` js\ndefine(['path/to/module'], function(module) {\n})\n```\n\nwe would tell them to \n\n``` js\ndefine(function(require) {\nvar module = require('notebook')['path/to/module'];\n});\n```\n\nor  \n\n``` js\ndefine(function(require) {\nvar module = require('notebook')['modulename'];\n});\n```\n\n(in both cases notebook would be a require js config alias that pointed to a webpacked file somewhere)  \n\nThis way people have a way of importing the webpacked version of the module.\n @Carreau maybe we can schedule a public, recorded meeting to discuss, it may be hard to explain everything without being extremely wordy. :stuck_out_tongue: \n Yeah, let's definitely have a meeting about this. With all the new code we\nwill have in JupyteLab, I think we need to be extra careful to keep the\nother pages working the same for 5.0.\n\nOn Fri, Feb 5, 2016 at 5:43 PM, Jonathan Frederic notifications@github.com\nwrote:\n\n> @Carreau https://github.com/Carreau maybe we can schedule a public,\n> recorded meeting to discuss, it may be hard to explain everything without\n> being extremely wordy. [image: :stuck_out_tongue:]\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1047#issuecomment-180652708.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n This should not affect existing code because it leaves requirejs intact.  Existing code only becomes unloadable via restful path when/if an npm module is used.  It is in that case that existing code must be loaded via a webpacked bundle.\n 1) I'm not unhappy because the watch things rebuild everything fast ! Thanks. \n2) It breaks IBM's guys `urth` as it cannot require jQuery:\n\n```\nutils.js:49 Failed to load extension: [\"jquery\"] Error: Script error for \"jquery\", needed by: nbextensions/urth_dash_js/notebook/deploy-menu/deploy-menu, nbextensions/widgets/notebook/js/widgetarea, nbextensions/urth_dash_js/notebook/dashboard-view/polymer-support(\u2026)(anonymous function) @ utils.js:49\n```\n\nI'll comment inline, but thanks !\n > It breaks IBM's guys urth as it cannot require jQuery:\n\nAh yeah, I'll make jquery requirejs import warn.\n @Carreau thanks for testing this. It looks like you've got a slightly older build of the dashboards stuff installed, but I'm sure the latest will break too.\n\nIf I'm reading the diff right, the libraries will still be available in notebook \"classic\", but they just won't be accessible in the same way in 5.x and eventually will go away completely in 6.x.\n\nIt's understandable that for 5.0, extensions that are relying on these libs will need to change how they access them. For the 4.x series of code, though, it would be nice if, at worst, a deprecation message is logged but the libraries are still available in the same manner. Otherwise, any extensions / custom.js modifications that were depending on them will need to deal with shipping the lib in >=4.2 and using the notebook provided version in <=4.1.\n > It's understandable that for 5.0, extensions that are relying on these libs will need to change how they access them. For the 4.x series of code, though, it would be nice if, at worst, a deprecation message is logged but the libraries are still available in the same manner. Otherwise, any extensions / custom.js modifications that were depending on them will need to deal with shipping the lib in >=4.2 and using the notebook provided version in <=4.1.\n\nI totally agree, I will make sure they can be accessed the same way with deprecation warnings.  To me, that means we still do this, but we'll want to be careful to not use names that can't be imported by requirejs.\n > For the 4.x series of code, though, it would be nice if, at worst, a deprecation message is logged but the libraries are still available in the same manner. Otherwise, any extensions / custom.js modifications that were depending on them will need to deal with shipping the lib in >=4.2 and using the notebook provided version in <=4.1.\n\n:heavy_check_mark: \n > Otherwise, any extensions / custom.js modifications that were depending on them will need to deal with shipping the lib in >=4.2 and using the notebook provided version in <=4.1.\n\nOh, this is target for 5.0.  You won't have to worry about this and 4.x.\n Comments address and rebased!\n I found a path forward that will make everything just work!  Even using requirejs to load npm dependent modules the old way !!  Of course this would be a deprecated behavior...  Working on these alterations now...\n Total success, dev console proof - input: \n\n```\nrequire(['notebook/js/cell'], function(x) { console.log(x); });\n```\n\noutput:  \n\n```\ndeprecated-imports.js:73 Direct module require deprecated.  Instead of using `define(['notebook/js/cell'], function(module) {});`, use `define(['notebook'], function(notebookApp) { var module =  notebookApp['notebook/js/cell']});`\nVM969:2 Object {}\n```\n Very awesome, excellent work Jon. Now refactoring bits of the current notebook and bringing in libraries to replace tiny components will be much easier.\n Kind of crazy how it's done: requirejs bundles -> \"deprecated-imports.js\" -> \"built/index.js\".\n\nWe can later control what APIs we want exposed to the user explicitly in index.js (which builds to built/index.js)\n > Very awesome, excellent work Jon. Now refactoring bits of the current notebook and bringing in libraries to replace tiny components will be much easier.\n\nThanks!\n > Total success, dev console proof - input:\n\nThat there is a feat of backward compatibility engineering. Impressive!\n Need to trigger a Travis rebuild - \n @Carreau check out ae26219 , it adds an info log statement like we talked about after the dev meeting. :smile: \n @jdfreder Minor wording suggestions to log info message in https://github.com/jdfreder/notebook/commit/ae262191bb6edc89b4da9de34c9ec0e6ae479603 \n > @jdfreder Minor wording suggestions to log info message in jdfreder@ae26219\n\n:heavy_check_mark: thanks!\n Marking this as WIP because a bug cropped up and I'm trying to squish it before merge...  Also Travis.\n Woot, okay this is good to go now!! \n\nI even added unit tests to make sure the old style require js imports continue to work.  My thinking is that these tests will make sure we don't break compatibility as we pull in npm packages.\n That's awesome, @jdfreder!\n @jdfreder :musical_keyboard: :notes: :guitar: Nice!\n Login and logout pages don't seem to work. I'm guessing their main scripts didn't get the necessary updates:\n\n<img width=\"628\" alt=\"screen shot 2016-02-11 at 15 29 12\" src=\"https://cloud.githubusercontent.com/assets/151929/12978917/3a346540-d0d4-11e5-8c78-42ec4e4abe20.png\">\n > Login and logout pages don't seem to work. I'm guessing their main scripts didn't get the necessary updates:\n\nI had the auth/main disable, because I assumed the main files weren't being loaded directly using requirejs.  If you look at 801b158e9e , you'll see I uncommented the lines.  Should work now :)\n I can confirm it works now, don't forget to run `npm run build` after checking out the changes\n This is an interesting commit:\n\n>   Merge branch 'webpack' of github.com:jdfreder/notebook into webpack (d0da04f)\n\nDo you know why that happened?\n And login/logout are fixed, thanks!\n > This is an interesting commit:\n> \n> Merge branch 'webpack' of github.com:jdfreder/notebook into webpack (d0da04f)\n> Do you know why that happened?\n\nYeah, I made the mistake of making changes on another computer which was behind my remote.  It asked me to pull, I said sure why not.  I'll squash it!  \n\n...\n\nOkay, squashed\n ...now this doesn't merge cleanly. Sorry!\n Rebased- I'd like to avoid rebasing too many times if possible, is there consensus that we should move forward with the approach in this PR?  Should I ping additional people or the mailing list?\n > I'd like to avoid rebasing too many times if possible,\n\nI understand. Sorry I wont have much time to review/try before next week. \n\n> Should I ping additional people or the mailing list?\n\nYes, I think that would be helpful, especially since it will likely break the notebook from people pulling from master. \n Okay, I just sent a large email to the mailing list and pointed people to this PR.\n Great email wrapup on the mailing list! :rocket: \n I gave @ellisonbg and @willingc an in-person overview (of the code and mechanics)\n ```\nInstalling collected packages: notebook\n  Running setup.py develop for notebook\n    Complete output from command /Users/carol/.virtualenvs/mypy3/bin/python3.5 -c \"import setuptools, tokenize;__file__='/Users/carol/Projects/jupyter-world/notebook/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" develop --no-deps:\n    running develop\n    running jsversion\n    running css\n    running jsdeps\n    bower dependencies up to date\n    > lessc --source-map --include-path=/Users/carol/Projects/jupyter-world/notebook/notebook/static /Users/carol/Projects/jupyter-world/notebook/notebook/static/style/ipython.less /Users/carol/Projects/jupyter-world/notebook/notebook/static/style/ipython.min.css\n    > lessc --source-map --include-path=/Users/carol/Projects/jupyter-world/notebook/notebook/static /Users/carol/Projects/jupyter-world/notebook/notebook/static/style/style.less /Users/carol/Projects/jupyter-world/notebook/notebook/static/style/style.min.css\n    running js\n    /Users/carol/.virtualenvs/mypy3/lib/python3.5/site-packages/setuptools/dist.py:285: UserWarning: Normalizing '5.0.0.dev' to '5.0.0.dev0'\n      normalized_version,\n    Traceback (most recent call last):\n      File \"/Users/carol/Projects/jupyter-world/notebook/setupbase.py\", line 538, in run\n        self.distribution.run_command('js')\n      File \"/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/distutils/dist.py\", line 974, in run_command\n        cmd_obj.run()\n      File \"/Users/carol/Projects/jupyter-world/notebook/setupbase.py\", line 484, in run\n        pool.map(self.build_main, self.apps)\n      File \"/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/multiprocessing/pool.py\", line 260, in map\n        return self._map_async(func, iterable, mapstar, chunksize).get()\n      File \"/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/multiprocessing/pool.py\", line 608, in get\n        raise self._value\n      File \"/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/multiprocessing/pool.py\", line 119, in worker\n        result = (True, func(*args, **kwds))\n      File \"/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/multiprocessing/pool.py\", line 44, in mapstar\n        return list(map(*args))\n      File \"/Users/carol/Projects/jupyter-world/notebook/setupbase.py\", line 473, in build_main\n        if not self.should_run(name, target):\n      File \"/Users/carol/Projects/jupyter-world/notebook/setupbase.py\", line 464, in should_run\n        if mtime(source) > target_mtime:\n      File \"/Users/carol/Projects/jupyter-world/notebook/setupbase.py\", line 308, in mtime\n        return os.stat(path).st_mtime\n    FileNotFoundError: [Errno 2] No such file or directory: '/Users/carol/Projects/jupyter-world/notebook/notebook/static/notebook/js/built/main.js'\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"<string>\", line 1, in <module>\n      File \"/Users/carol/Projects/jupyter-world/notebook/setup.py\", line 199, in <module>\n        main()\n      File \"/Users/carol/Projects/jupyter-world/notebook/setup.py\", line 196, in main\n        setup(**setup_args)\n      File \"/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/distutils/core.py\", line 148, in setup\n        dist.run_commands()\n      File \"/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/distutils/dist.py\", line 955, in run_commands\n        self.run_command(cmd)\n      File \"/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/distutils/dist.py\", line 974, in run_command\n        cmd_obj.run()\n      File \"/Users/carol/Projects/jupyter-world/notebook/setupbase.py\", line 549, in run\n        log.warning(\"rebuilding js and css failed (not a problem)\")\n    AttributeError: module 'distutils.log' has no attribute 'warning'\n\n    ----------------------------------------\nCommand \"/Users/carol/.virtualenvs/mypy3/bin/python3.5 -c \"import setuptools, tokenize;__file__='/Users/carol/Projects/jupyter-world/notebook/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" develop --no-deps\" failed with error code 1 in /Users/carol/Projects/jupyter-world/notebook\n```\n ^ I think that's a setup tools problem, we were able to get it working in person - but pip was still failing.  I don't think I wrote the offending line (it's not in the diff).\n Installed and ran locally, :+1: from me.\n Thanks @blink1073 !\n The AttributeError there is fixed by #1125.\n\nThe FileNotFound is a real bug, and only shows up if you do `pip install -e` _again_ after everything is built. It's a typo in `CompileJS.sources` where a `main.js` should be `main.min.js` (L441).\n > The FileNotFound is a real bug, and only shows up if you do pip install -e again after everything is built. It's a typo in CompileJS.sources where a main.js should be main.min.js (L441).\n\nThanks, I actually forgot a couple to come back and update setupbase after making changes to the build later in the PR.  Last commit (252b0fc) should have aformentioned main name change, and a few other missing build files.\n Great, thanks! I'm :+1: to merge this now, and get testing in the wild. Will check in at tonight's dev meeting.\n From the meeting it sounds like the PR is in favor of merge - thanks for bringing it up @minrk !\n Thanks @jdfreder :sunflower: \n","cc @ellisonbg @jhamrick @cameronoelsen. We decided to implement \"not-deletable\" without UI, and we could do UI later. Perhaps now is later enough.\n I would be in favor of adding some sort of visual indicator for this, but I don't know if it should be easy for people to change the deleteable status by hand. The idea for using it with nbgrader is that it should be quite difficult/annoying to delete cells that are marked as undeleteable, because removing them will totally break nbgrader.\n\nI would guess there are kind of two competing use cases for this functionality. The first, like how nbgrader uses it, is a way for applications that produce notebooks to control how users use those notebooks. The second is a way for users to \"lock\" cells to prevent themselves from accidentally deleting them. In the first case, there shouldn't be an easy way to toggle it except programmatically; in the second case, there should be. So I guess it depends on what type of functionality the undeletable feature is meant to be \"for\".\n I think @jhamrick raises a good distinction between \"deletable\" (as desired in nbgrader) and \"lock\" (as set by a user).\n","+1, do you want to attempt to write a test ?\nif no, we can take care of that.\n Hi Matthias,\nHmmm ... I am quite confuse with the bug raised in test, I'am not able to reproduce the test fail localy ... what exactly does 'circleci' ? I will have an eye about the test, I'd probably ask some technical point then. \n > circleci\n\nDon't worry about it, It's an alternative to Travis. it's testing docker stuff.\n Failing test on travis seem like a random failure (only 1 of the 12 items was failing), I relaunched them.\n Ha yes I also wonder about it .... Random failure ? seriously ? Thanks anyway ;-)\n CircleCI error is just do to Circle not respecting the `circle.yml` and running nosetest instead of docker.\nMerging.\n This is fantastic! Thanks to you all for the fix! :+1: \n\nWhen will this one be pushed into PyPi/Anaconda for public consumption? :)\n > When will this one be pushed into PyPi/Anaconda for public consumption? :)\n\nHum it was originally marked 5.0, I just marked 4.2, so now it should wait for backport, and then 4.2 to be released. There are unfortunately 43 issues open for 4.2 so it will take quite some time. I wouldn't expect it on PyPI/Anaconda before April. \n","Thank you so much @minrk. Ended up rekicking the failed part of the Travis build since it's unrelated.\n\nWe'll probably need to update our Docker Hub links too.\n","+1\n Do we let PYTHONPATH pass down to kernels? Maybe we shouldn't, since that's a bad plan for mixed Python versions.\n That's possibly true, but in that case I'd want to try to run these tests without modifying $HOME, since that makes the kernel fail to start on my system.\n If running the test server when using conda, wouldn't setting PYTHONPATH potentially give unexpected results?\n\nOn a slightly different note, has the project tried using tox in the past for testing environments?\n I don't think using conda would be a problem - it is setting PYTHONPATH only so that the same packages are importable by a subprocess after HOME is changed. If the import paths are correct in the notebook test runner, they should be correct for starting a kernel in the same environment.\n\nMin's concern was about passing on PYTHONPATH when running kernels in a different environment or Python version. That could cause problems, but I don't think we run any such kernels in the notebook tests.\n","> Hopefully stops tests from hanging after completion - seems to work on Jenkins.\n\nIs circle supposed to pass ? (restarted )\n I have also seen the hanging failure on Circle, but I didn't do anything with that in this PR. I'll add that.\n","I asked Alex to open this, because I think most of the pieces are in place that `%edit` could open the web based text editor for a module. We just need something to translate the paths in the edit payload into a URL from the starting directory of the notebook server.\n I think the only thing that would be difficult is the wait that's the default behavior in the terminal, but I think it should be doable, as long as the file is within the notebook server's path (the kernel doesn't know this).\n The Qt console already has edit without wait-to-execute, so that shouldn't be an obstacle.\n","@rgap Thanks for reporting the issue and offering a suggestion. We appreciate it.\n\nThis issue has been reported in #1010 and resolved in #1032. The current development release 4.2 has a solution for this issue, and we hope to backport the fix. If you wish to stay on 4.0.6, please use a FF or Safari.\n\nI'm going to close this issue. Feel free to reopen if needed. Thanks!\n","What are `sys.executable` and `sys.path` in your terminal and in a notebook?\n\nDoes it make a difference if that is the first thing you run in a notebook, compared to if you have already finished running something else in the notebook?\n hi, thanks for the response. from my terminal running python3:\n\n``` python\n>>>import sys\n>>> sys.executable\n'/usr/local/opt/python3/bin/python3.5'\n>>> sys.path\n['', '/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python35.zip', '/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5', '/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/plat-darwin', '/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/lib-dynload', '/usr/local/lib/python3.5/site-packages']\n```\n\nand from a notebook, the sys. exectuable is the same, but the sys.path is:\n\n```\n['',\n '/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python35.zip',\n '/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5',\n '/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/plat-darwin',\n '/usr/local/Cellar/python3/3.5.1/Frameworks/Python.framework/Versions/3.5/lib/python3.5/lib-dynload',\n '/usr/local/lib/python3.5/site-packages',\n '/usr/local/lib/python3.5/site-packages/IPython/extensions',\n '/Users/sg-s/.ipython']\n```\n OK, that confirms it's running the same copy of Python, and looking in the same place to find matplotlib.\n\nYou said it takes a long time just doing the import. Just to confirm, you have split the two lines up, and it's the import, not the plot, that is slow?\n\nWhile it's doing whatever it's doing, can you interrupt it? Click the 'stop' button on the notebook toolbar. If that works, you should get a traceback ending with `KeyboardInterrupt`. Do that a few times, and you can get an idea of what part of the code it's being slow in.\n\n`pyplot` is not a standard top-level module. Are you importing `from matplotlib.pyplot`, `from pylab`,  or do you have another module called `pyplot`?\n hi @takluyver  thanks for the feedback. \n\n> You said it takes a long time just doing the import. Just to confirm, you have split the two lines up, and it's the import, not the plot, that is slow?\n\nyes, the import is slow. just running \n\n```\nfrom matplotlib.pyplot import *\n```\n\ncauses the problem.\n\ninterestingly, using just `from matplotlib import *` works OK\n\nso it's something specific to pyplot. \n\ni tried stopping the kernel using the stop button, but it didn't do anything apart form telling me that it was stopping the kernel. it also flashed a message on the terminal:\n\n```\nKernel interrupted: bd4f986c-ce7c-477a-84f3-df7f0a167bc3\n```\n Hi, after some further digging, i found a workaround. while the issue persists, it doesn't bother me anymore, so please feel free to close this if you want. \n\nfor the record, what I did was go to the [try jupyter](https://try.jupyter.org/) page and used `%matplotlib inline`, this made the plots inline, and is instantanoues. \n\nso using:\n\n```\n%matplotlib inline\nfrom matplotlib.pyplot import *\nshow(plot([1,2,3]))\n```\n\nworked for me. \n I believe importing `matplotlib.pyplot` initialises a backend, which just importing matplotlib doesn't. Using `%matplotlib inline` makes it use the IPython inline backend, so the problem is probably with whichever backend it's picking otherwise.\n\nCan you try `matplotlib.get_backend()` both in a terminal and a notebook, and see what the results are?\n\n@tacaswell, any ideas why setting up the backend would take much longer in an IPython kernel?\n Maybe a poor interaction between a gui frame work and the kernel communication framework? What is your default backbend?  It looks like you are on a mac? I wonder if there are also frame work vs non frame work build issues? Does it depend on browser?\n\nI would also like to ask you not to import \\* and try using `%matplotlib notebook` instead of inline.\n hi, running\n\n```\nimport matplotlib as matplotlib\nmatplotlib.get_backend()\n```\n\n on a notebook or from the terminal (outside jupyter) gave the same result:\n\n```\n'MacOSX'\n```\n\nusing \n\n```\n%matplotlib notebook\nfrom matplotlib.pyplot import plot\nshow(plot([1,2,3]))\n```\n\nworked great too, and made the plot instantly. \n\nit doesn't seem to depend on the browser (tested on Chromium and Firefox)\n How about  `%matplotlib tk` ?\n cool! \n\n```\n%matplotlib tk\nfrom matplotlib.pyplot import *\nshow(plot([1,2,3]))\n```\n\nlaunched the GUI instantly and made the plot (just like in the terminal, outside of jupyter)\n","5.0 of 4.2 ?\n\n+1\n I'm not sure. I could go either way.\n @jasongrout you brought up some follow up that suggested maybe we should include SVG anyhow. Did you want to check in here?\n For reference: Adding SVG with a single font (like we do with HTML-CSS) would increase install size by 2.5 MB, or an additional ~13%.\n Is install size a real worry here? This doesn't seem so bad, I'm ready to merge this.\n I don't think an extra 2.5MB is a problem. IIRC, the full mathjax bundle was about 10x the size of our entire package, which seemed a bit much, but I think it's fine to selectively add bits back in if there's a use for them.\n Okay, this now includes all output formats, including SVG. SVG is scrubbed down to a single font, just like we do with HTML-CSS.\n","Sorry, what's wrong?\n So, I do see an issue trying to build on Circle CI, but it doesn't appear to be limited to there. In fact, I can see the issue when trying to build the docker image locally. Namely, the tests hang after running the test `notebook.auth.tests.test_security.test_passwd_check_unicode`. Not sure why, but it is worth investigating.\n Yes, it would be nice to investigate, but we don't know of a lot of people using the Docker Image and the failure was slowing down development. If you submit  PR that can fix the Docker image, I'll be happy to reenable CircleCI.\n It appears that the Docker image is no longer building because [root user is not allowed to start the notebook server by default](https://github.com/jupyter/notebook/commit/3ce8d95ba1b3ab4e881f403929e9d4c4a4d3b234).\n\n```\nroot@5e9f4e947359:/usr/src/jupyter-notebook# jupyter notebook --no-browser\n[I 02:19:50.425 NotebookApp] Writing notebook server cookie secret to /root/.local/share/jupyter/runtime/notebook_cookie_secret\n[W 02:19:50.440 NotebookApp] WARNING: The notebook server is listening on all IP addresses and not using encryption. This is not recommended.\n[W 02:19:50.440 NotebookApp] WARNING: The notebook server is listening on all IP addresses and not using authentication. This is highly insecure and not recommended.\n[C 02:19:50.445 NotebookApp] Running as root is not recommended. Use --allow-root to bypass.\n```\n\nThe Docker image build just hangs on the first unit test that attempts to launch the NotebookApp:\n\n```\nroot@5e9f4e947359:/usr/src/jupyter-notebook# nosetests -vvv notebook.nbconvert\nnose.config: INFO: Ignoring files matching ['^\\\\.', '^_', '^setup\\\\.py$']\n...\nnose.suite: DEBUG: <nose.suite.ContextSuite context=APITest> setup context <class 'notebook.nbconvert.tests.test_nbconvert_handlers.APITest'>\nnose: DEBUG: call fixture <class 'notebook.nbconvert.tests.test_nbconvert_handlers.APITest'>.setup_class\n```\n\nIt hangs because of a timing issue.  Unfortunately, I don't know enough about tornado and all the goodness going on in [launchnotebook.py](https://github.com/jupyter/notebook/blob/master/notebook/tests/launchnotebook.py#L113) to debug it.\n\nPR #1468 enables the image to be built again.\n","I imagine that freetype and libpng will need to be installed from the system package manager (`apt-get`) before trying to install matplotlib.\n\nThere's also a [scipy-notebook dockerfile](https://github.com/jupyter/docker-stacks/tree/master/scipy-notebook) which sets up pandas, matplotlib and many other packages using conda.\n I tried apt-get but this has the same issue. Also I am not aware of how\napt-get would manage two sets of python.\n\nI did find docker images with conda packet management that work with\nmatplotlib. Perhaps the pip3 is the culprit?\n\nI guess 90% of Jupiter Python users use matplotlib. Strange that I am the\nfirst to notice this bug.\n\nAm 07.02.2016 15:04 schrieb \"Thomas Kluyver\" notifications@github.com:\n\n> I imagine that freetype and libpng will need to be installed from the\n> system package manager (apt-get) before trying to install matplotlib.\n> \n> There's also a scipy-notebook dockerfile\n> https://github.com/jupyter/docker-stacks/tree/master/scipy-notebook\n> which sets up pandas, matplotlib and many other packages using conda.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1057#issuecomment-181020700.\n In apt, Python 3 packages start with `python3-`, and Python 2 packages with `python-`. However, freetype and libpng are not Python packages (that's why pip won't find them). They are compiled libraries that matplotlib uses. You can find the exact names by searching on [packages.ubuntu.com](http://packages.ubuntu.com/). Note that, as pip will compile matplotlib from source, you'll need to install the `-dev` versions of packages. Alternatively, you can use apt to install matplotlib - you'll get an older version, but apt will handle the necessary dependencies.\n\nSo far, I don't think there is actually any bug here. If you're not familiar with this sort of problem, I'd recommend using one of the images built with conda, which avoids this kind of difficulty.\n Thanks!\n\nBest Regards,\nFlorian\n\nOn Sun, Feb 7, 2016 at 3:55 PM, Thomas Kluyver notifications@github.com\nwrote:\n\n> In apt, Python 3 packages start with python3-, and Python 2 packages with\n> python-. However, freetype and libpng are not Python packages (that's why\n> pip won't find them). They are compiled libraries that matplotlib uses. You\n> can find the exact names by searching on packages.ubuntu.com. Note that,\n> as pip will compile matplotlib from source, you'll need to install the\n> -dev versions of packages. Alternatively, you can use apt to install\n> matplotlib - you'll get an older version, but apt will handle the necessary\n> dependencies.\n> \n> So far, I don't think there is actually any bug here. If you're not\n> familiar with this sort of problem, I'd recommend using one of the images\n> built with conda, which avoids this kind of difficulty.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1057#issuecomment-181026734.\n Closing as it sounds like the issue was resolved.\n","I'm interested in working on this. Has anyone made progress?\n I don't think anything has been done on this, but it's a UI question rather than just code, so I'd ping someone like @ellisonbg about it before you dive in.\n @takluyver Sounds good. I'll wait to hear more. \n A couple of thoughts:\n\nIn the short/medium term:\n- Getting a full tree based file brower right from the design and\n  interaction standpoint is extremely difficult and time consuming.\n- We are already building a brand new file newer for JupyterLab that has\n  many more features than the current one. The idea is that it would\n  eventually replace the existing dashboard.\n- I don't think we have the capacity to have 3 file browsers in the\n  pipeline at the same time.\n- My own feeling is that tree-based file browsers are more complex for\n  users.\n- But, It would be possible for a third party to build a tree-based file\n  browser as a 4.x nbextension or JupyterLab plugin that is a separate\n  project that users can install and use.\n\nIn the long run:\n- Eventually, after the existing dashboard file browser has gone away, we\n  may have capacity to tackle a more full blown tree view.\n- In some cases, tree-based file browsers work better.\n- A nice balance is the one in Google Drive, which by default is flat (like\n  ours), but still has a tree based view that sits along side of the flat one.\n\nOn Sat, Feb 20, 2016 at 10:23 AM, Bryan Karlovitz notifications@github.com\nwrote:\n\n> @takluyver https://github.com/takluyver Sounds good. I'll wait to hear\n> more.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1058#issuecomment-186662609.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg Thanks for the detailed feedback. I'm inclined to go the nbextension route here. I'll keep everyone posted. \n","Duplicate of #1053 and #1010 , fixed by #1032 (bug in chrome).\n This is still an issue for me on Chrome.  I have updated the Jupyter Notebook and the pipe still appears after the expression.  What is the fix?\n The fix should be in the latest version of the notebook (4.2.0). If you've just updated, you may be having browser caching issues - hit Ctrl-F5 a few times to force refresh.\n @takluyver confirm that doing `pip install --upgrade notebook` solved the problem for me, thank you ^__^\n I'm still seeing this issue.\n\nRunning Python 3.5.1 (Anaconda 4.0.0 (64-bit)) and Chromium 50.0.2661.102 built  on Ubuntu 14.04, running on LinuxMint 17.2 (64-bit)\n\nRunning `pip install --upgrade jupyter` produces:\n\n> Requirement already up-to-date: jupyter in /opt/continuum/anaconda3/lib/python3.5/site-packages\n\nJupyter version is 4.1.0\n Did you `pip install --upgrade notebook`, or just jupyter.  updating the notebook fixed it for me\n Yes, that did the trick, thanks!\n\nI was under the impression that notebook was deprecated and that jupyter\nwas the replacement.\n\nApparently, I don't understand the relationship between jupyter and\nnotebook.\n\nOn Wed, Jun 1, 2016 at 1:58 PM, Michael Mansour notifications@github.com\nwrote:\n\n> Did you pip install --upgrade notebook, or just jupyter. updating the\n> notebook fixed it for me\n> \n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1059#issuecomment-223091299,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AIOMex-u75TXcQijpPvh06uUYrFlXIR4ks5qHdZUgaJpZM4HVMQG\n> .\n Jupyter is a meta pacakge. \njupyter does nothing by itself it just install the following:\n\n```\n        'notebook',\n        'qtconsole',\n        'jupyter-console',\n        'nbconvert',\n        'ipykernel',\n        'ipywidgets',\n```\n\nEach of these may depend on `jupyter_client`, `nbformat`, etc.... \nIt is perfectly reasonable to only want a subset of these \u2013\u00a0if you are interested in subpart of functionality of have a lightweight computer like a raspberry Pi \u2013\u00a0 and yes we agree that `pip install jupyter --upgrade` should update notebook, and is confusing though it is not how pip works.\n Sorry --- is this still a bug for Github rendering?\n\nExample:\nhttps://github.com/marwahaha/triangles/blob/master/Triangles.ipynb\n Not any more,\nThis was fixed by an update to the notebook.  If you\u2019re still encountering it, update your jupyter-notebook \n\n> On Jul 25, 2016, at 11:21 PM, Kunal Marwaha notifications@github.com wrote:\n> \n> Sorry --- is this still a bug for Github rendering?\n> \n> Example:\n> https://github.com/marwahaha/triangles/blob/master/Triangles.ipynb https://github.com/marwahaha/triangles/blob/master/Triangles.ipynb\n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub https://github.com/jupyter/notebook/issues/1059#issuecomment-235173627, or mute the thread https://github.com/notifications/unsubscribe-auth/AHZJpvIg2XTOe7E194OJo_rKczgAwQBFks5qZad4gaJpZM4HVMQG.\n\n<><><><><><><><><><><><><><>\nMichael Mansour\nData Scientist & Graduate Student @ Galvanize\nIBM Blockchain Labs\n(650) 773-7974\nTwitter: @sourmansweet\n Hi, this bug is still present for me. I am on Chrome 52 and notebook 4.2.2.\n\nEvery jupyter notebook I see on Chrome with latex in it has this issue. Could I get help?\n Ditto, but on Mac (Sierra) in Safari. I updated the notebook via pip as per above, then restarted my terminal, and Safari. Still the same problem.\n Hi @jarmarshall - I had the same problem with new everything (chrome / safari / notebook) on El Capitan - _clearing the cache_ on Chrome and Safari ultimately fixed it for me - your mileage may vary\n Thanks @bearsnowstorm - tried that (via 'Develop -> Empty Cache'). Then restarted the Jupyter notebook server. Still no joy. Maybe I should try running the server via Firefox or ...\n OK, Firefox renders the LaTeX correctly (no bar). I'm guessing this bug is not fully resolved in Safari given the various steps I've taken.\n Just stumbled across this.  FWIW, clearing the cache and refreshing the browser (in Chrome) also cleared the problem for me.","Well, it does work for me, but you are probably hitting a race condition as you are accessing the `IPython` global. \n\n1) it is better to change module values by actually requiring them, to be sure they are loaded in custom,js:\n\n```\nrequire(['notebook/js/cell'], function(cell){\n    cell.Cell.options_default.cm_config.lineWrapping = true\n})\n```\n\n2) the better option woudl be to persist the config of line wrapping through the API (in flux):\n\n```\nIPython.notebook.get_cell(0).class_config.set('cm_config',{'lineWrapping':true})\n```\n\n@takluyver we don't seem to expose the class_config on the class which prevent to do `require([codecell], function(modify config))`. Am I mistaking? Should we allow that ?\n I don't think there's a good way to expose it on the class, because it relies on the `ConfigSection` instance created by `main.js` and passed in when instantiating `Cell`. In this case, `class_config` means 'config relevant to instances of this class', not 'config which is accessed on the class object'.\n @takluyver @Carreau does this work if specified via the frontend-config API?\n I'm not sure I'll try to have a look, assigning to myself. \n > @takluyver @Carreau does this work if specified via the frontend-config API?\n> \n> `IPython.notebook.get_selected_cell().class_config.set('cm_config',{'lineWrapping':true}) // or false`\n\nYes it does work independently for markdown cells and code cell and end up as the following in config:\n\n```\n$ cat ~/.jupyter/nbconfig/notebook.json\n{\n  \"MarkdownCell\": {\n    \"cm_config\": {\n      \"lineWrapping\": false\n    }\n  },\n  \"CodeCell\": {\n    \"cm_config\": {\n      \"lineWrapping\": false\n    }\n  },\n}\n```\n ```\nIPython.notebook.get_selected_cell().class_config.set('cm_config',{'lineWrapping':true}) // or false\n```\n\nDoes not work for me.  \nIPython 4.0.0 \nJupyter 1.0.0\nPython 2.7.10 |Anaconda 2.3.0 (x86_64)| (default, May 28 2015, 17:04:42)\n\n```\n ~/.jupyter/nbconfig/notebook.json \n```\n\ndoes not exist for me. I have \n\n```\n ~/.jupyter/migrated\n```\n > Does not work for me.\n\nWhere did you do that ?\nDid it gave errors?\n- in the js console ?\n- in the terminal ?\n\nDid you reload the page ?\nDid you restart the server ?\n I put this\n\n```\nIPython.notebook.get_selected_cell().class_config.set('cm_config',{'lineWrapping':true}) // or false\n```\n\ninto `custom.js`, as in the old version.\n\nI did restart the server. What happened was: no wrapping, but then when I would try to execute cells that had long lines, I would get a python syntax error where there wasn't one before, with the interpreter giving the same kind of complaint as when one does a line-break without a `\\`.\n No you need to execute that only once in the js console of the browser. Not in custom.js\n Got it - thank you very much indeed.\n Is it possible to turn line wrapping on via the %config magic? If so could you please share the code to do so?\n","Thanks! #1061 should pluralize the ones I noticed.\n","Thanks for writing this up Min, this is way necessary.\n edits applied, thanks @willingc!\n Looks good. Thanks @minrk.\n","+1\n","[edit] updated original comment because I hastily hit 'enter'\n Also worth noting is that I have little javascript development experience, but am willing to learn!  If this feature request is interesting to you all and someone is willing to point me in the right direction, I would be interested in attempting to implement this\n There's actually already a proposed fix for this at #1071, but if you're interested in getting involved with some JS development, that'd be great. Have a look at the [issues tagged sprint friendly](https://github.com/jupyter/notebook/issues?q=is%3Aopen+is%3Aissue+label%3Asprint-friendly). Or somebody who's more familiar with that part of the code than me may be able to give you some idea where to start.\n Oh, great!  Thanks @takluyver I'll bookmark that link and come back when I have some spare cycles.  I'll go ahead and close this issue since there is already jupyter/jupyter#105 and #1071.\n",":+1: \n","I see this too :(\n\nOn Mon, Feb 8, 2016 at 1:31 PM, Peter Parente notifications@github.com\nwrote:\n\n> New Jupyter Notebook 4.0.x and 4.1.0 behavior starting in Chrome 48.\n> Tested on OSX. Not sure about other platforms.\n> \n> [image: chrome]\n> https://cloud.githubusercontent.com/assets/153745/12898402/8d00772a-ce7a-11e5-95ec-dbb23e6eff85.png\n> \n> Any code cell with text that runs longer than the width of the notebook\n> document container exhibits this problem.\n> \n> For comparison, Safari still has the following original (correct) behavior:\n> \n> [image: safari]\n> https://cloud.githubusercontent.com/assets/153745/12898403/8d05414c-ce7a-11e5-9518-9d2d36eb9e56.png\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1067.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Dupe of #1003 \n","Interesting idea.\n","I was able to duplicate the issue with miniconda, jupyter 4.1, openmpi and mpi4py using a conda environment with Python 3.5 and OSX 10.11.3.\n\nIt looks like the mpi4py google group has a solution for mpi4py that is causing the errors [here](https://groups.google.com/forum/#!topic/mpi4py/PTKq6abLpNQ).\n @andyfaff I was able to get mpi4py running with the notebook in a python 2.7 virtualenv by:\n\n```\nbrew install mpich\nexport ARCHFLAGS='-arch x86_64'\npip install mpi4py\npip install jupyter\njupyter notebook\n```\n That you;re seeing `/opt/anaconda1anaconda2anaconda3` in the error suggests there's a problem with the conda package for mpi4py - that should be replaced by the path to your conda env.\n\nPing @ilanschnell\n Thanks, I'll take a look.\n","It does work here, moreover you have the select-all-running option.\nCan you check your IPython version ?\n\n![screen shot 2015-05-21 at 13 04 50](https://cloud.githubusercontent.com/assets/335567/7754363/0daa2d20-ffba-11e4-802a-a230824d4603.png)\n![screen shot 2015-05-21 at 13 04 56](https://cloud.githubusercontent.com/assets/335567/7754364/0dacbdd8-ffba-11e4-99c5-0ae631b860ac.png)\n![screen shot 2015-05-21 at 13 05 02](https://cloud.githubusercontent.com/assets/335567/7754365/0dad7084-ffba-11e4-8836-6b6b574694ac.png)\n Indeed it was a problem with my ipython version. Thanks\n","ping @asmeurer - I don't think this can be a notebook issue.\n Yes, this is a SymPy issue. Please open an issue at https://github.com/sympy/sympy/issues (and use the code formatting button above the issue form to format your code).\n Thanks Aaron, closing here. Do drop a link to the sympy issue once it's created, for anyone who finds this in the future.\n I opened a ticket on [sympy](https://github.com/sympy/sympy/issues/10561).\n Thanks!\n","Also closes #1065\n Oh, thanks @takluyver I didn't see that one\n","Seems reasonable. Do you want to make a PR? It will need to be passed through a few layers in `notebookapp.py` - I'm happy to explain that a bit if you want.\n\nWe'll need to do a new release of terminado before merging this.\n I will try when I get a moment. Thanks\n\nSent from Outlook Mobile\n\nOn Tue, Feb 9, 2016 at 9:47 AM -0800, \"Thomas Kluyver\" notifications@github.com wrote:\n\nSeems reasonable. Do you want to make a PR? It will need to be passed through a few layers in `notebookapp.py` - I'm happy to explain that a bit if you want.\n\nWe'll need to do a new release of terminado before merging this.\n\n---\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/jupyter/notebook/issues/1072#issuecomment-181977974\n If you're seeing that with the terminal websockets, do you see a similar thing in the notebook if you leave an open notebook inactive for 60 seconds? The kernel messages also go over a websocket. But maybe the auto-reconnect code we have there is sufficient to reopen the socket.\n\nI wonder if we should send a PR upstream to tornado for a similar option to ping any websocket that is open and inactive for > X seconds.\n\n@minrk probably has a better idea than me whether that's reasonable.\n No I don't see this with the notebook. It is just the terminal.\n\nSent from Outlook Mobile\n\n```\n_____________________________\n```\n\nFrom: Thomas Kluyver notifications@github.com\nSent: Tuesday, February 9, 2016 4:01 PM\nSubject: Re: [notebook] Add Keep-Alive configurable setting for terminal (#1072)\nTo: jupyter/notebook notebook@noreply.github.com\nCc: zyzhu2000 zyzhu@msn.com\n\nIf you're seeing that with the terminal websockets, do you see a similar thing in the notebook if you leave an open notebook inactive for 60 seconds? The kernel messages also go over a websocket. But maybe the auto-reconnect code we have there is sufficient to reopen the socket.   \n\nI wonder if we should send a PR upstream to tornado for a similar option to ping any websocket that is open and inactive for > X seconds.   \n\n@minrk probably has a better idea than me whether that's reasonable.   \n\n\u2014\nReply to this email directly or view it on GitHub.                              \n The kernel websockets already are sending ws pings, for precisely this reason. This is implemented in [WebSocketMixin](https://github.com/jupyter/notebook/blob/4.1.0/notebook/base/zmqhandlers.py#L99). It seems like the terminal websockets should already be inheriting this behavior, though.\n `TermSocket.open` doesn't call its super method, which is what would set up the pinging.\n @zyzhu2000 I might back out your changes in terminado and just fix it so that it can use the pinging already implemented in Jupyter. Sorry, I didn't realise that Jupyter had already got this code.\n With takluyver/terminado#28, I think this should work with no changes to Jupyter.\n @minrk now I look at this some more, I don't understand why Jupyter's pinging is not already working. `WebSocketMixin` is before `TermSocket` in the base classes, so I think I was wrong about the lack of a super call preventing pinging from being set up. Here's the MRO:\n\n```\nIn [2]: from notebook.terminal.handlers import TermSocket\n\nIn [5]: type.mro(TermSocket)\nOut[5]: \n[notebook.terminal.handlers.TermSocket,\n notebook.base.zmqhandlers.WebSocketMixin,\n notebook.base.handlers.IPythonHandler,\n notebook.base.handlers.AuthenticatedHandler,\n terminado.websocket.TermSocket,\n tornado.websocket.WebSocketHandler,\n tornado.web.RequestHandler,\n object]\n```\n\nSo I'm not sure why the pinging doesn't already work for terminal websockets.\n","At least on my system, they are correctly highlighted with a lowercase `.r` extension, but not with a capital `.R` extension.\n\nWe try two things to set the highlighting mode:\n1. The server calls the Python function `mimetypes.guess_type(path)`. If we get a mimetype, we use CodeMirror's `findModeByMIME()` function to get the mode. On my system, neither `.r` nor `.R` appears to have a registered mime type.\n2. If that hasn't got us a mode, we use the file extension and call CodeMirror's `findModeByExtension()` function. Looking at CodeMirror's [modes data](https://github.com/codemirror/CodeMirror/blob/c8fcffc2ba40251d85dc94c6a88c30b3343d8cb7/mode/meta.js#L108), it recognises `.r` but not `.R`.\n\nMaybe we should make all file extensions lowercase before looking them up. You could in theory differentiate an extension by case, but I can't think of any examples. My system recognises capitalised extensions as equivalent to the lowercase form, e.g. `.PY`. And I can't see any capitalised extensions in the CodeMirror data.\n Thanks! It works with \".r\".\n","This issue seems to parallel a recent issue on JupyterHub https://github.com/jupyter/jupyterhub/pull/417. From a security vantage point, if allowed, it should warn the user and require positive confirmation by the user.\n > if allowed, it should warn the user and require positive confirmation by the user.\n\nAsking confirmation is annoying as the notebook can be ran as a subprocess, in which case it will wait for user input and hang for ever, which is more annoying than failing and giving an error message. \n\nAlso running as root should be something hard instead of \"just confirm a message you do not understand\".\n\nWe can of course ask the user and abort after a few seconds is no answers, but is it worth it ?\n Fair enough. There's more than one use case. Naive end user of a notebook. Use of notebooks run as subprocesses.\n\nIf a naive end user runs the notebook as root, what data or vulnerabilities are they exposing to others?\n > There's more than one use case\n\nYes, but I think in this case, it's pretty straitforward, Notebook is not ment to run as root.\n\n> If a naive end user runs the notebook as root, what data or vulnerabilities are they exposing to others?\n\nDepending on how they run it, from none, to get your bank account number and pwd, SSN, plus get spied on by through camera and microphone. But running as root is typically something you never want to do unless you are confortable enough to know the implications.\n\n Example of software that do that: brew\n\n```\nme@~ $ sudo brew install ruby\nError: Cowardly refusing to 'sudo brew install'\nYou can use brew with sudo, but only if the brew executable is owned by root.\nHowever, this is both not recommended and completely unsupported so do so at\nyour own risk.\nme@~ $\n```\n I'm fine with an `--allow-root` arg for the notebook server.\n Let's not exaggerate the dangers - a naive user running the notebook as root on their local machine is not exposing anything. And if they do expose anything, either because other people can log on to the machine and connect to the server, or because they configure it to serve on the public network interface, it's pretty bad to run the server as their own user anyway (see [relevant xkcd](https://xkcd.com/1200/)).\n\nHowever, it's never a good idea to run with more privileges than necessary, and I don't think many people really want to run the server as root, so :+1: to adding a confirmation flag.\n\n`flit install` also has a similar check, and requires an environment variable `FLIT_ROOT_INSTALL` to override it.\n > flit install also has a similar check, and requires an environment variable FLIT_ROOT_INSTALL to override it.\n\nA very reasonable approach.\n Great tagging as sprint friendly, to give a chance to a new contributor to get something useful and relatively simple in. \n","With that code, it can't inspect L until you've run the cell, because L hasn't been created until you run that code. We don't want to try to run your code in order to do completions.\n\nIf you define L in one cell, and run that, tab completions should work in the next cell.\n\nWe've got plans to use some better completion machinery (jedi) that might be able to complete in that case by doing static analysis, but that's still some way off.\n The workaround is to put the code in a separate cell, and execute it.\nThis also happens on more complex expressions, the workaround I found is to assign the intermediate result to a temporary, at least while you're writing code:\n\n```\ntmp = pd.crosstab(tr['gender'], tr['status'])\n\ntmp.<shift-tab completion works here>\n```\n Is there any update on when this will be implemented?  The relevant machinery is in the kernel. We tried to use jedi for IPython 5, but found some problems and turned it off again. We hope to be able to turn it back on and fix the issues for IPython 6, but there's a lot of things people are doing.","Thanks\n Thanks @takluyver.\n","Neat!\n Thanks @minrk and @takluyver.\n","When ready. Hopefully before SciPy. \n The main tasks we have between us and release:\n- setting up config migration\n- coordinated documentation\n- widget installation\n\nThere will be features and changes in the release, as there always are, but none are officially planned.\n\nThe rough order will be:\n1. traitlets\n2. jupyter-core\n3. nbformat\n4. jupyter-client\n5. nbconvert\n\nThen, to preserve things like `ipython[all]`, we will need to release the rest together.\n Ok, thanks for the fast answer.\n\nI'll be watching the repo time to time for any news.\n","I updated the post because it seems that the dollar triggers these errors. Even escaping it (by adding a back-slash before the dollar sign) doesn't help.\n When Markdown cells are rendered, dollar signs can be used to delimit latex-style formulae. However, I didn't think that affected the syntax highlighting when they're in edit mode. :confused: \n I did a bit of diving into this. I don't think that the \"$\" is the issue but rather how CodeMirror (or possibly our code) behaves when it reaches a special character. There is likely a regex in the CodeMirror code that causes % to be treated as the start of a <span class=\"cm-comment\"> instead of the more common use of <span class=\"cm-delimit cm-delimit-open\"> for the \"$\".\n\nIf any front end folks have a good suggestion to fix this, that would be great.\n\nFWIW, the syntax highlighting is wonky but the rendered cell after hitting SHIFT-ENTER looks fine.\n\n![screen shot 2016-02-11 at 4 48 51 pm](https://cloud.githubusercontent.com/assets/2680980/12996371/02290146-d0e4-11e5-9c33-9e3ea43bed4f.png)\n\n![screen shot 2016-02-11 at 4 48 34 pm](https://cloud.githubusercontent.com/assets/2680980/12996370/01bcd5ac-d0e4-11e5-93ed-c172b5028e48.png)\n The formatting looks OK (while editing) once I remove the dollar sign from\nthe example I've shown.\n\nBut yes, this is a code highlighting problem (that makes it hard to edit),\nbut the Markdown is still correctly rendered\n\nfre 12 feb. 2016 02:29 Carol Willing notifications@github.com skrev:\n\n> I did a bit of diving into this. I don't think that the \"$\" is the issue\n> but rather how CodeMirror (or possibly our code) behaves when it reaches a\n> special character. There is likely a regex in the CodeMirror code that\n> causes % to be treated as the start of a instead of the more common use of\n> for the \"$\".\n> \n> If any front end folks have a good suggestion to fix this, that would be\n> great.\n> \n> FWIW, the syntax highlighting is wonky but the rendered cell after hitting\n> SHIFT-ENTER looks fine.\n> \n> [image: screen shot 2016-02-11 at 4 48 51 pm]\n> https://cloud.githubusercontent.com/assets/2680980/12996371/02290146-d0e4-11e5-9c33-9e3ea43bed4f.png\n> \n> [image: screen shot 2016-02-11 at 4 48 34 pm]\n> https://cloud.githubusercontent.com/assets/2680980/12996370/01bcd5ac-d0e4-11e5-93ed-c172b5028e48.png\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1080#issuecomment-183142847.\n Someone also pointed out to me yesterday that if you put something that looks like a git commit ID in a markdown cell, it gets highlighted in blue and underlined. I guess the syntax highlighting is a bit more Github flavoured than the rendering.\n I also ran into a perhaps similar issue: \n\n![syntax_highlight-issue](http://i.imgur.com/B5b7AdJ.png)\n\nHope this helps\n","Oops, I had left a .pydistutils.cfg file in place that broke my pip3 installation process.\n good on you for putting the solution @damienstanton \ud83d\udc4d  \n","is this **only** with the notebook ? Or can you reproduce using `jupyter qtconsole` or `jupyter console` ? Python stdout when using an IPython kernel  will be a ZMQ stream, but there is no reason for writing to normal stdout to segfault. \n\nCan you give a bit more info on the extension you are using ?\n Hi Carreau, \nInstead of my extension, I found a scipy function that can also trigger the seg fault. It is scipy.optimize.fmin_l_bfgs_b, with display turned on (iprint=1). The same problem happened. And this time I use **jupyter-console**. The following is the code, which runs well in ipython console but not jupyter-console.  My version of jupyter console is `Jupyter Console 4.1.0`\n\n```\nfrom  scipy.optimize import fmin_l_bfgs_b\nimport numpy as np\n\ndef foo(x):\n    return x**2\ndef grad_foo(x):\n    return 2*x\n\nres = fmin_l_bfgs_b(func=foo, fprime=grad_foo, x0=np.array([0,0]), iprint=1)\n```\n\nresult\n\n```\nIn [7]: res = fmin_l_bfgs_b(func=foo, fprime=grad_foo, x0=np.array([0,0]), iprint=1)\nkernel died, restart ([y]/n)? y\n```\n I ran that example in Jupyter console and it completed successfully, with no segfault.\n I ran it as well, and it succeeded. However, it looks like PySys_WriteStdout writes to `sys.__stdout__`, not `sys.stdout`, so the output will appear in the terminal, not in the notebook.\n",":+1: seems like a good idea\n @takluyver Thanks. Going to focus on travis before approaching tox since tox/conda combo complicates things.\n After much slogging through Travis, pip, and coveralls docs as well as Travis build reports, I believe this configuration is more stable.\n- Removed `group: edge` since it was a temporary inclusion https://github.com/jupyter/notebook/commit/f05dfae0f3b2368bead6e374779ac21f7948e245 and is not needed since Python 3.5 is set to 3.5.1.\n- Set python to version 3.5.1 since the default 3.5 on Travis does not yet include 3.5.1 and lower versions of 3.5 had issues.\n- Before install: upgrade pip separately to most recent version to avoid any dependency nonsense. Then, upgrade the key packaging and testing libraries.\n- Split coveralls out as a separate install. I can't explain why but it seems to work better this way.\n- Also reactivated the coveralls.io repo since for some reason it was disabled\n- Added fast_finish option to cause Travis to end on success or initial failure.\n > Also reactivated the coveralls.io repo since for some reason it was disabled\n\nThats because coverall.io is annoying and keep asking for too much access to member of the org (access to all repository including private, read and write) so we started migrating to https://codecov.io which is: \n- more responsive to support request.\n- more polite in support request\n- have an extension for github to show coverage on a per file basis in github UI.\n\nSo strong -1 on reenabling coverall. But fine if merge as is I can remove later.\n\n> Added fast_finish option to cause Travis to end on success or initial failure.\n\n-1 , we have random failures that will force us to rerun all instead of just the failing one(s) . And we have many groups, which test differents part, which mean that you cannot in one glance see all the failing test. \nI hate matplotlib that does that, and don't even test your code if it's not pep8 compliant.\n\n+1 on the rest\n @Carreau I much prefer codecov.io so no objection to using that over coveralls. Will strip coveralls out and look any changes needed for codecov.io.\n\nFair enough on fast_finish, I debated either enable or disable (handy when debugging the travis.yml). Any thoughts on speeding up the tests. They take a looong time for Travis to execute.\n\nI'll make the coveralls and fast_finish changes. Thanks for the review.\n @Carreau Changes made.\n\nIf someone with permissions can activate codecov.io, it should work (working on my local branch).\n We have coverage: https://codecov.io/github/jupyter/notebook\n\nThanks @willingc \n Awesome thanks !\n Nice!\n\nBefore you put too much time into tox, I would start with a bit of caution. If we aren't _using_ tox on things like Travis, I wouldn't bother with it. A while ago ago, tox was added to IPython, but nobody used it so it regularly fell well out of date. In fact, when I started writing this I thought we had removed tox, but now that I look it's still there and wildly out of date. From the looks of it, it hasn't been in a working state for about a year, and nobody seems to have noticed. It ends up being another thing to maintain that doesn't actually get used.\n Thanks @minrk. Thanks for the heads up. When I actually implemented this and conda was working well, I realized tox didn't buy us anything. I forgot to change the issue title :) \n","Thanks @diego898 !\n\nAbout the whitespace: in our projects, yes, we prefer you to leave the whitespace alone (as you've done here - nice one). Other projects may prefer to keep trailing whitespace out. In general, if you keep the lines you're working on tidy and leave other lines alone, most projects should be happy. Unfortunately that's not such a common setting in editors (though PyCharm can do it).\n\nI don't think there's much feedback to give - the changes look fine, and it's passing the tests, so I'm going to merge it. Congratulations on your first contribution! :tada: \n Thank you! I'd like to try the bonus on the issue as well!\n Welcome @diego898 and congratulations on your first contribution :surfer: :sunny: Always nice to see a UCSD scientist around here :D\n","According to this issue https://github.com/ipython/ipywidgets/issues/56 travis tests should be ok, just need a restart.\n Thanks, I restarted the failing Travis build, and it worked this time.\n It's possible to add multi-file/folder download via zip but I'm not sure about necessity of this move.\n","Thanks!\n","Thanks!\n :D :dancer: \n","When you say 'debugger', do you mean the browser Javascript console? If not, can you check that for any errors?\n\nIf you've recently updated, you may need to force refresh (Ctrl-F5) a few times to clear old JS out of the browser's cache.\n yes firefox js console and also started jupyter-notebook with --debug option\nwhen i press one of the options that have dialogs console doesn't output anything\nbut i get a lot of errors in js console when the notebook loads\n\n[notebook-log.txt](https://github.com/jupyter/notebook/files/129956/notebook-log.txt)\n apparently there was something wrong with firefox, i updated firefox and now it seems to work fine\n OK, I'm glad it's working now. How old a version were you on before?\n its not long since i've switched to debian testing from stable, but it's been some weeks since the last time iceweasel got upgraded iirc, can't remember version though.\non a second thought the problem may have been on one of the iceweasel plugins.\n","@ArEnSc If you ran this code in Python 3 with a Jupyter notebook, you would be able to scroll through the output:\n\n<img width=\"1137\" alt=\"screen shot 2016-02-14 at 5 32 34 pm\" src=\"https://cloud.githubusercontent.com/assets/2680980/13037980/02ac0bc2-d341-11e5-9de7-a21238cf8bee.png\">\n I would like it to scroll by it self to the latest printed value is that possible ?\n I don't think we have an option to do that. You can probably do it with a [notebook extension](http://jupyter-notebook.readthedocs.org/en/latest/examples/Notebook/rstversions/JavaScript%20Notebook%20Extensions.html), but I don't know quite what JS you'd need.\n","The editor component we use is called CodeMirror. The author of that package [describes here](https://discuss.codemirror.net/t/highlighting-fixme/171) how one might add that functionality using 'overlays'.\n Sorry, I am quite new to Jupyter and I am not sure to fully understand how I should add such overlays to my notebooks =(\n Jupyer uses [Pygments](http://pygments.org/) to color source code, from what I understand, and there are some configuration files that probably can be edited to add TODO line coloring for the lexer. It's not obvious to me how one would do this simply, however. I can look into it further for you.\n In the notebook, syntax highlighting is done by CodeMirror. We use pygments if you convert the notebook to HTML or LaTeX, but not in the live view where you edit it.\n That's should be doable just with a codemirror overlay. \nI see if we can make a demo of that at some point. \n I took a stab at this over at tfors/notebook@1321bd53e705c5ba849770285009c4df4b98b7e5. I'm still new to this, so I'm sure it could stand some clean-up, but it is working.\n\nWas this intended to be added to the notebook or somehow made into a plugin?\n\n@hinnefe2 was working on this at JupyterDay Chicago.  Henry, you might take a look at this and see what could be improved.\n So, I'm attempting to turn this into an extension here: [tfors/nbextension-todo-highlight](https://github.com/tfors/nbextension-todo-highlight) (based on MinRK's scratchpad extension), but I'm stuck for now.\n\nCan someone give me a hint on how to call addOverlay on the CodeMirror instances for all the existing and future CodeCells from an extension?  Or am I approaching this all wrong?\n\nThanks!\n @tfors you could take a look at https://github.com/ipython-contrib/IPython-notebook-extensions/blob/5c7dc53f0bf2ca2bd67a57519bfc98c6a8135528/nbextensions/usability/spellchecker/main.js which uses a codemirror overlay for spellchecker-type highlights, perhaps?\n","IIRC this is a Chrome bug. I think there's a workaround in master.\n Chrome has reintroduced this bug in a way that we don't have a workaround. This is already open as #1003, though.\n","Do you wish to have a temporal code cell that is deleted, or are you instead looking for a better way to use inputs to control the code execution? Also, would it be better to instead be able to _hide_ the scratch pad when not in use, but retain its contents as code parameters?\n These are two different behaviours which can be discussed. Personnally, I would tend to think the best idea would be to have a \"scratchpad\" panel, with cells whose code would be retained. A bit like a notebook in a notebook. However, this could be much more difficult and complex to implement and maintain than just a splash input _\u00e0 la_ \"Alt+F2\" (usual shortcut to call a launcher for apps in WM for instance).\n Interesting idea, I also though about ti a few time. I would expect getting the behavior right and the UI obvious to be harder than expected. That will likeley be more doable once the current Phosphor refactor is done. \n I have just found https://github.com/minrk/nbextension-scratchpad which is pretty new, but seems to do just what I wanted. Will give it a try.\n","multimarkdown looks interesting btw: http://fletcherpenney.net/multimarkdown/\n Hm so it looks like image sizing was added to pandoc recently, so it will work with nbconvert, but it doesn't look like it works in the notebook itself: https://github.com/jgm/pandoc/commit/244cd5644b44f43722530379138bd7bb9cbace9b\n It [appears](http://spec.commonmark.org/0.23/) that there's no mention of that syntax in the latest CommonMark spec.\n We could add a custom renderer to marked. Not sure if the notebook already is messing with marked or if you're trying to stay away from that: https://github.com/chjj/marked/issues/339\n does CommonMark include tables at all?\n Sample notebook: https://gist.github.com/fb654d5e66aed5db2ed9 demonstrating the new pandoc image attributes syntax.\n\nA PDF from `jupyter nbconvert --to=pdf`: [Untitled.pdf](https://github.com/jupyter/notebook/files/131335/Untitled.pdf), which is converted with the image size reduced.\n\nThe HTML version doesn't get converted with the size set according to the image attributes.\n I think the only place where we're messing with marked is to prevent it from parsing latex-y math expressions, so that MathJax can do its stuff with them after the markdown is rendered.\n I'm asking pandoc for help here: https://github.com/jgm/pandoc/issues/2716\n\nhaving html be interpreted by pandoc when using nbconvert would solve my problems.\n @minrk [proposed](https://gitter.im/jupyter/notebook?at=56c22b0ad9c5a252408fa2e3) to do markdown -> html -> target to get around the pandoc restriction.\n actually, that won't work. pandoc can't render colspan tables. If you try to convert a html table with colspan to latex, the table layout is discarded. If you don't have a colspan, the table is rendered correctly.\n I have exactly the problem of @amueller on the image size issue. I end up in writing a simple script with the following functions to convert between `![](){width=..}` and `<img></img>` syntax.\n\n``` python\nre_mdimg = re.compile(r\"(!\\[([^\\]]*)\\]\\(([^\\)]*)\\)\\{(.+?)\\})\")\nre_imgtag = re.compile(r\"(<img ([^>]*?)(?:/>|>(.*?)</img>))\")\n\n\ndef mdimg_to_imgtag(para):\n    for (match, tag, link, opts) in re_mdimg.findall(para):\n        w = re.search(r\"width\\s*=\\s*(\\S*)\", opts)\n        h = re.search(r\"height\\s*=\\s*(\\S*)\", opts)\n        width = \"width: %s;\" % w.group(1) if w else \"\"\n        height = \"height: %s;\" % h.group(1) if h else \"\"\n        style_opts = \" style=\\\"%s%s\\\"\" % (width, height) if w or h else \"\"\n\n        if tag:\n            para = para.replace(\n                match,\n                \"<img src=\\\"%s\\\"%s>%s</img>\" % (link, style_opts, tag))\n        else:\n            para = para.replace(\n                match,\n                \"<img src=\\\"%s\\\"%s />\" % (link, style_opts))\n    return para\n\n\ndef imgtag_to_mdimg(para):\n    for (match, opts, tag) in re_imgtag.findall(para):\n        tag = tag if tag else \"\"\n        l = re.search(r\"\"\"src\\s*=\\s*[\"'](\\S*?)[\"']\"\"\", opts)\n        w = re.search(r\"\"\"width\\s*[=:]\\s*[\"']?(\\S+?)[\"'; ]\"\"\", opts)\n        h = re.search(r\"\"\"height\\s*[=:]\\s*[\"']?(\\S+?)[\"'; ]\"\"\", opts)\n        style_opts = \"\"\n        style_opts = \"width=%s\" % w.group(1) if w else \"\"\n        if h:\n            if style_opts:\n                style_opts = style_opts + \" \"\n            style_opts = style_opts + \"height=%s\" % h.group(1)\n        para = para.replace(\n            match,\n            \"![%s](%s){%s}\" % (tag, l.group(1), style_opts))\n    return para\n```\n I'm struggling with exactly this issue right now.  I can use <img> tag to resize image for markdown, but I would like to be able to print as PDF via latex, and all the <img> tags get stripped completely :(\n @randy3k where/how do you implement this script when converting to pdf?\n @soamaven \nYou can export the notebook as .tex or .md, then apply the functions and then compile the latex via pandoc/latex.\n","Same problem. Opened the notebook in Firefox without the border. I think it's a chrome problem.\n Hi @nicktimko @dkmehrmann, Yes, this is a known issue with Chrome. Duplicate of #1053 and #1010 , fixed by #1032 (bug in chrome).\n So is there a way to deal with this problem?\n @eignatenkov This was fixed in PR #1032. If you install the latest development version, you should see it resolved.\n","IIRC this is a browser limitation, you cannot trigger a window closing too long after an user action, which often need to be a click, or someone else. The definition of \"Too long\" is variable, and I would expect we do too many indirection and the request to close is cancelled. \n\nWe can try to investigate. \n Thanks @Carreau , this might not be a crucial feature, but would help workflow, especially without the ability to preview notebooks before opening them.  \n +1 on this, it would assist workflow for when you're making changes to lots of notebooks in sequence.\n +1, if no one doing this, I can do it","+1\n yep +1\n","The notebook is from conda: \n\n```\nnotebook                  4.1.0                    py34_0    defaults\n```\n\n, the kernel is:\n\n```\n[sc] \u03bb conda list |grep \"ipython\"\nipython                   4.0.0                    py27_1    defaults\nipython-genutils          0.1.0                     <pip>\nipython-notebook          4.0.4                    py27_3    defaults\nipython_genutils          0.1.0                    py27_0    defaults\n\n[sc] \u03bb conda list |grep mat\nmatplotlib                1.5.1               np110py27_0    defaults\n\n[sc] \u03bb conda list |grep ggplot\nggplot (c:\\portabel\\miniconda\\envs\\sc\\lib\\site-packages) 0.6.8                     <pip>\n```\n\n(the kernel runs in a different environment than the server...)\n What matplotlib backend?\n `%matplotlib inline`\n Do you have an example notebook? I'm guessing that ggplot is maybe not triggering the matplotlib draw calls that are expected and trigger automatic display.\n I've created this: https://gist.github.com/JanSchulz/6efa69d64e6bc63e770a\n There have been a lot of changes in ggplot, so this may be fixed. I'm guessing it was a missing call to draw/show in ggplot itself. Can you reproduce this with ggplot 0.9.4?\n Unfortunately I have no ggplot installed anymore (neither the old version nor the new one). I'm closing, sorry...\n No problem, feel free to reopen if you run into it again.\n","There is also a problem in showing isolated svg on Mac Safari.\n\n```\nfrom IPython.display import SVG, display\ndisplay(SVG('http://upload.wikimedia.org/wikipedia/commons/5/59/Usa_counties_large.svg'), metadata=dict(isolated=True))\n```\n\n![screen shot 2015-05-23 at 11 34 04 pm](https://cloud.githubusercontent.com/assets/1690993/7786954/3a7b7a34-01a4-11e5-872a-a70841f898fd.png)\n\nOnly part of the svg is shown.\n Sorry for letting this slip through. It appears to be fixed in 4.0. Feel free to reopen if you can still reproduce it.\n","Thanks! Looks like the test is failing for real. Can you investigate that?\n\nI believe this change isn't quite the right fix, because it enables clobbering any existing file if the case doesn't match (on a case-insensitive filesystem). In order to fix #911 more precisely, I think the check needs to be for whether the destination name in the case of a collision actually refers to the same file as the original. Something like:\n\n``` python\nif exists(destination):\n    if destination really is origin:\n        proceed\n    else:\n        raise 409\n```\n\nThe really-is-origin check can probably use `os.stat`:\n\n``` python\n# assume we have already verified that a and b both exist\nis_same_file = (os.stat(a).st_ino == os.stat(b).st_ino)\n```\n\nto verify that the two paths actually refer to the same file.\n [os.path.samefile()](https://docs.python.org/3/library/os.path.html?highlight=samefile#os.path.samefile) ?\n Gah, Python 2 doesn't have that function for Windows.\n\nDrop Py 2 support, amirite @Carreau ? ;-)\n @takluyver good call. That's exactly what we want, though we will have to ship our own copy (even though it's exactly the same) for Windows + py2. My code above is not quite correct because it must also compare `st_dev`.\n\nIf we want to be lazy about it, we could only perform the check if `hasattr(os.path, 'samefile')`, so that Windows + py2 won't be able to recapitalize files, but every other case will.\n > Thanks! Looks like the test is failing for real. Can you investigate that?\n\nDrat! I've been in JavaScript land for so long I ran the JavaScript tests and not the Python ones.\n\n> That's exactly what we want though we will have to ship our own copy (even though it's exactly the same) for Windows + py2.\n\nI'll cook something up.\n > Drop Py 2 support, amirite @Carreau ? ;-)\n\nYessss\n Argh! I made an idiotic mistake and accidentally deleted my old fork while I was trying to get an updated version of upstream using the web UI. :cry: \n\nI'll close this for now but submit another PR with the appropriate fix tomorrow night.\n","Hello anand0523,\n\nThe best way to get assistance would be to post your message to jupyter@googlegroups.com or on [stackoverflow.com](http://stackoverflow.com). This here is for bug reports or improvement requests of the the product, not specific implementation help.\n You should have a look at the Jupyter [Spark Kernel](https://github.com/apache/incubator-toree) and ask the authors. Installing the notebook on EC2 should not be that hard. After you just need to set-up your kernel spec to spawn a spark cluster and run code on it. The park people will likely be much more aware on how to do that. \n (closing , feel free to keep asking question though and thanks for pitching in @eronlloyd ) \n","No, it's not possible, because we need the body to be loaded to actually fetch your script and execute it. \nThe question is what are you trying to achieve ?\n I need to hide the body before it gets rendered. Right now I run a script which hides the body through the extensions. This results in a brief period where I see the toolbar and stuff before the body gets hidden.\n\nIf I can get a css style in the head element then that would take care of it right? I have a script that later turns it back on.\n","Spyder has a \"Help > Report Issue...\" option that generates a new issue on Github and pre-fills it with the appropriate data.\n\nhttps://github.com/spyder-ide/spyder/blob/5f4613d5f05e679b53e0a43468d3afa8fe14901f/spyderlib/app/spyder.py#L2327\n that's a good idea! I'm not aware of such a thing. Things we are generally interested in:\n- `PATH`\n- `sys.path`\n- `sys.executable`\n- `sys.version`\n- `python -m platform`\n- `which -a jupyter`\n- `pip list` (and/or `conda list`)\n `IPython.sys_info()` provides some of that information, but not all of it.\n @Carreau Thanks for marking sprint friendly :) @blink1073 @minrk @takluyver Good comments all around. Didn't know that Spyder did that but might be a nice future addition to the Help menu. \n\nOn a different but related note, do any of you know how to scrape or export all the Google Group messages? I would be interested in running some of it through nltk and/or using elasticsearch on the content.\n If it's useful, pandas has [this script](https://github.com/pydata/pandas/blob/358da5663a68d9b03ac86ff2f50d57de309a8f65/pandas/util/print_versions.py), which is imported in the top-level namespace as `show_versions`.\n @TomAugspurger Thanks for passing along the script :smile:\n An even greater idea would be to improve user documentation( to make it more user-friendly and practical. ie. common install issues, trouble shooting. I could hardly find answers to these things in the docs when I recently upgraded or answers to other common other issues. @Carreau, do you have a doc writer or are the individual devs doing their own due to their technical knowledge? I would make a request to the appropriate person.\n We all pitch in on docs, but @willingc has been putting in some especially good work on them recently.\n\nHowever, I still think a tool of some kind would be useful as well, as a way to report all the relevant factors for other people to help with troubleshooting.\n @nymoorland We're always open to specific suggestions on improving user documentation. The developers have been writing the documentation. While I'm a developer, I really enjoy improving documentation since it benefits all of us. Please feel free to ping me or file a separate issue on documentation with as much detail as possible. Pull requests welcome too :-)\n\nThis issue is focused on providing a tool to help the end user troubleshoot installation/configuration and enable our developers to more easily assist end users.\n Awesome, I think that data gathered from the tool will also help improve documentation.\n I think I'll work on this for JupyterDay Chicago.\n\nWhere would you want something like this to \"live\"? notebook/scripts/?\n I think all of the data it would collect is pretty general, not notebook specific, so I'd suggest starting with it as a completely separate piece of code - we could either package it up independently, or put it into something like jupyter_core.\n","+1 an @takluyver comment. \n @captainsafia Thanks for thinking about enhancements. I'm not very familiar with GitHub issue templates. Perhaps a good way to go would be try it on a repo that gets less activity than the notebook to see how it works in the wild.\n > I'm not very familiar with GitHub issue templates.\n\nI'd be amazed if you were, because Github only launched the feature yesterday ;-)\n @takluyver Oh good. I thought perhaps I was living under a rock. ;-)\n I think this does have enough traction (for now).\na better way would be a link **in the notebook** that uses the following format:\n\n```\nhttps://github.com/jupyter/notebook/issues/new?title=my%20issue&body=the%20text\n```\n\nTo pre-fill the issue with system information. Though we might get too many issues, and so not want to make this too obvious to find.\n","@carreau Good suggestion :+1: \n Hey, I'm working on this.\n Hey @TheWitnesses \u2014 Sorry I didn't get a chance to check in with you on this during JupyterDay. Let me know if you are still interested in working on it and I guide you through the process!\n Hi Safia, \n\nI'd still be interested in working through the process. \n\nHave a good day, \nZack Kerr \n\n----- Original Message -----\n\nFrom: \"Safia Abdalla\" notifications@github.com \nTo: \"jupyter/notebook\" notebook@noreply.github.com \nCc: \"Zachary Kerr\" zkerr2019@comcast.net \nSent: Tuesday, February 23, 2016 7:51:55 PM \nSubject: Re: [notebook] [docs] Add instruction to install node with brew. (#1105) \n\nHey @TheWitnesses \u2014 Sorry I didn't get a chance to check in with you on this during JupyterDay. Let me know if you are still interested in working on it and I guide you through the process! \n\n\u2014 \nReply to this email directly or view it on GitHub . \n Closing because this was addressed in #1208.\n","In the URL, change `/files/` to `/edit/` and it should work. Unfortunately there isn't a reliable way to know whether something is a text file - IIRC, we check for a `text/*` mimetype, but json is under `application/`.\n Could you point me to code that have this logic ?\n https://github.com/jupyter/notebook/blob/620fb2919229d1c0b5e79087edcaaf95b770473b/notebook/static/tree/js/notebooklist.js#L632\n We could just add 'application/json' to this line.\nIs it good idea?\n We could, but that only solves the problem for that one specific mime type, and there are lots of others.\n\nI think we talked at some point about adding an 'edit' button to the UI so you could try to edit any file.\n Yep.\nThe same case is for application/xml\n Closing as we now have an 'edit' button in the UI, which should let you edit these files.","@jdfreder, thoughts on this, since you are using it in `jupyter-js-widgets`?\n Possible workaround: http://hereswhatidid.com/2014/02/use-bootstrap-3-styles-within-the-wordpress-admin/\n Ouch, this sucks. There are a lot of places we use bootstrap and I think it\nwill be pretty painful to get rid of it. It is not just in ipywidgets, but\nelsewhere in our UI where people building extensions rely on it a lot...hmmm\n\nOn Thu, Feb 18, 2016 at 11:08 AM, Steven Silvester <notifications@github.com\n\n> wrote:\n> \n> @jdfreder https://github.com/jdfreder, thoughts on this, since you are\n> using it in jupyter-js-widgets?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1107#issuecomment-185866044.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n If that workaround proves viable, the transition won't be too painful. Each extension would just need a wrapper class on its root node and it'll work exactly as is. But it _will_ require any Bootstrap-using extension to be modified in that way.\n I'd prefer to not use bootstrap at all in the widgets, but because we use it in the notebook it provides a consistent rendering experience.  \n Except when it breaks 3rd party code ;-)\n","The `install_mathjax()` function is gone, because MathJax should now be bundled with the notebook. How did you install/upgrade?\n I am using conda to upgrade IPython.\n Odd, that shouldn't have this issue. Can you dig into your installation directory and find out how much of the 404'd path is missing. It's rooted in the notebook package directory, i.e.:\n\n``` python\nimport notebook\nos.path.join(os.path.dirname(notebook.__file__), 'static/...')\n```\n This is all I find in the `jax` dir:\n\n```\nmoorepants@garuda:eme185-website(master)$ ls /home/moorepants/miniconda3/lib/python3.5/site-packages/notebook/static/components/MathJax/jax/\ninput  output\n```\n\nHere is the complete tree:\n\n```\nmoorepants@garuda:eme185-website(master)$ tree /home/moorepants/miniconda3/lib/python3.5/site-packages/notebook/static/components/MathJax/jax/\n/home/moorepants/miniconda3/lib/python3.5/site-packages/notebook/static/components/MathJax/jax/\n\u251c\u2500\u2500 input\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 TeX\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 config.js\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 jax.js\n\u2514\u2500\u2500 output\n    \u2514\u2500\u2500 HTML-CSS\n        \u251c\u2500\u2500 autoload\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 annotation-xml.js\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 maction.js\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 menclose.js\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 mglyph.js\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 mmultiscripts.js\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 ms.js\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 mtable.js\n        \u2502\u00a0\u00a0 \u2514\u2500\u2500 multiline.js\n        \u251c\u2500\u2500 config.js\n        \u251c\u2500\u2500 fonts\n        \u2502\u00a0\u00a0 \u2514\u2500\u2500 STIX-Web\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Alphabets\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Bold\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 BoldItalic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Italic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Arrows\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Bold\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 DoubleStruck\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Bold\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 BoldItalic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Italic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 fontdata-extra.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 fontdata.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Fraktur\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Bold\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Latin\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Bold\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 BoldItalic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Italic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Main\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Bold\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 BoldItalic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Italic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Marks\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Bold\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 BoldItalic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Italic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Misc\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Bold\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 BoldItalic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Italic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Monospace\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Normal\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Bold\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 BoldItalic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Italic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Operators\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Bold\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 SansSerif\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Bold\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 BoldItalic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Italic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Script\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 BoldItalic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Italic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Shapes\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Bold\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 BoldItalic\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Size1\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Size2\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Size3\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Size4\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Size5\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 Symbols\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 Bold\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0     \u2514\u2500\u2500 Variants\n        \u2502\u00a0\u00a0         \u251c\u2500\u2500 Bold\n        \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0         \u251c\u2500\u2500 BoldItalic\n        \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0         \u251c\u2500\u2500 Italic\n        \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u2514\u2500\u2500 Main.js\n        \u2502\u00a0\u00a0         \u2514\u2500\u2500 Regular\n        \u2502\u00a0\u00a0             \u2514\u2500\u2500 Main.js\n        \u251c\u2500\u2500 imageFonts.js\n        \u2514\u2500\u2500 jax.js\n\n83 directories, 70 files\n```\n I see a similar set of files. So I think you have the right files, but it's trying to load something it shouldn't. That could be because:\n1. The particular things you're displaying cause MathJax to try to load something extra\n2. There's something left over from a previous version (e.g. in browser cache) that's interfering.\n\nTo test 1: does Mathjax work on other things, like a simple `$x=1$` in a Markdown cell?\n\nTo test 2: try running the notebook server with `--port 8999` (or any number other that the normal port), which should avoid browser cache.\n I have been having the issue with `/static/components/MathJax/jax/element/mml/optable/BasicLatin.js` not being found on Mac OS X with the conda install of notebook etc.  Basic math works, and it is not a cache issue (using a different port has the same problem.)  Seems to be an issue on fresh python 2 and 3 environments.\n Same issue here, persists through fresh anaconda install. My notebook doesn't work under Safari but works under Chrome. I tried emptying the cache and restarting the browser, but no luck.\n\nMy error message:\n\n``` shell\n[W 22:48:18.498 NotebookApp] 404 GET /static/components/MathJax/jax/output/SVG/fonts/TeX/fontdata.js?rev=2.6.0\n```\n\nI'm using Python 3.5 on OS X 10.11.4.\n\nEDIT: I have since solved the problem. It required clearing all website data through \"Settings > Privacy > Remove all website data\" instead of removing the cache through \"Develop > Empty caches\".\n I am having a similar issue, but with another Mathjax library : mathchoice.js\n\n```\npython -c \"import IPython; print(IPython.sys_info())\"         \n{'commit_hash': '1ba246d',\n 'commit_source': 'installation',\n 'default_encoding': 'UTF-8',\n 'ipython_path': '/home/vagrant/.virtualenvs/venvpy3/lib/python3.4/site-packages/IPython',\n 'ipython_version': '5.0.0',\n 'os_name': 'posix',\n 'platform': 'Linux-3.13.0-45-generic-x86_64-with-Ubuntu-14.04-trusty',\n 'sys_executable': '/home/vagrant/.virtualenvs/venvpy3/bin/python',\n 'sys_platform': 'linux',\n 'sys_version': '3.4.3 (default, Jul 28 2015, 18:20:59) \\n[GCC 4.8.4]'}\n```\n\n```\nos.path.join(os.path.dirname(notebook.__file__), 'static/...')\nOut[3]: '/home/vagrant/.virtualenvs/venvpy3/lib/python3.4/site-packages/notebook/static/...'\n```\n I'm having a similar issue, \n\n```\n[W 20:22:36.138 NotebookApp] 404 GET /static/components/MathJax/jax/output/SVG/fonts/TeX/fontdata.js?rev=2.6.0 (::1)\n```\n\nEverything seems to be working, except for rendering to SVG. Would be helpful for porting some equations from my RISE presentation to a ppt. Choosing that gets a _[Math Processing Error]_\n We do remove some rendering options from Mathjax to keep the package size down - that may have been one of those.\n Similar 404 error using `notebook 4.2.3`, `jupyter_core 4.2.0`.\n\n```\n[W 12:56:03.971 NotebookApp] 404 GET /static/components/MathJax/jax/element/mml/optable/BasicLatin.js?rev=2.6.0 (::1) 7.89ms referer=http://localhost:8888/path/mynotebook.ipynb\n```\n\nI fixed it by copying the `.../element` directory from Anaconda's Spyder package into `/usr/local/share/anaconda/lib/python3.5/site-packages/notebook/static/components/MathJax/jax`.\n\nOn my system, `.../element/*` sums to about 135 KB. Perhaps worth including in Notebook's version?\n\n```\n/usr/local/share/anaconda/lib/python3.5/site-packages/spyderlib/utils/inspector/js/mathjax/jax\n\u251c\u2500\u2500 element\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 mml\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 jax.js\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 optable\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 Arrows.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 BasicLatin.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 CombDiacritMarks.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 CombDiactForSymbols.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 Dingbats.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 GeneralPunctuation.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 GeometricShapes.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 GreekAndCoptic.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 Latin1Supplement.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 LetterlikeSymbols.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 MathOperators.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 MiscMathSymbolsA.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 MiscMathSymbolsB.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 MiscSymbolsAndArrows.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 MiscTechnical.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 SpacingModLetters.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 SuppMathOperators.js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 SupplementalArrowsA.js\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 SupplementalArrowsB.js\n\u251c\u2500\u2500 input\n[...]\n\u2514\u2500\u2500 output\n```\n I had this same problem:\r\n\r\n```\r\n404 GET /static/components/MathJax/jax/output/SVG/fonts/TeX/fontdata.js?rev=2.6.0\r\n```\r\n\r\nWorkaround was to copy the `../TeX` folder from another MathJax installation into the right spot in the `notebook` folder within `site-packages`. It looks like people have reported several similar but distinct errors here. I suspect it may depend on what math you're displaying in the notebook. Does anyone have a sample notebook that consistently reproduces the error? In my case, there's a distro dependency: I'm running Debian testing, mathjax is installed in `/usr/share/javascript/mathjax/` and is provided by the `libjs-mathjax` debian package.  There is no mathjax under any directory called `notebook` or `jupyter` that I can find.  This more or less makes sense: you would not want to install two copies of mathjax: one in jupyter, another that is a system-wide version.  \r\n\r\nHowever, this points to a package-maintainance bug; in my case, the error is far more basic:\r\n```\r\n[W 17:50:59.672 NotebookApp] 404 GET /static/components/MathJax/fonts/HTML-CSS/STIX-Web/woff/STIXMathJax_Main-Italic.woff?V=2.7.0 (127.0.0.1) 2.31ms \r\n```\r\n\r\nand STIX is simply just not installed... because debian doesn't package STIX. go figure. @linas That sounds like an issue with Debian's packaging. We recommend installing the notebook with `pip` or `conda`, because Debian's version will often be out of date. Or even broken, apparently. ;-)\r\n\r\nIf you want to use Debian's packages, [here is where to file bugs against them](https://bugs.debian.org/cgi-bin/pkgreport.cgi?repeatmerged=no&src=jupyter-notebook). Actually, it looks like Debian packages [symlink mathjax in](https://anonscm.debian.org/git/python-modules/packages/jupyter-notebook.git/tree/debian/rules#n56). Thanks, yes, sorry, I think I just confused the original issue. Side comment: I searched high & wide for a debian package containing STIX fonts, and found none.  Installing them by hand did not solve my other issues, so my comments are a red herring.","Thanks @parleur  I'll try to look at that soon !\n High level comments: \n\nCould we have a tick marker on the menu for the currently use keymap ?\n OK, I think that we want to avoid vim shortcut for now, at it seem to be complex. Get the logic right for default/emacs/sublime, and deals with vim later.\n Regardless of that, pretty sweet, and seem to mostly work for me. \n Awesome, people are going to be really happy about this.\n Sweet! Have you had a chance to try @ivanov 's [vimception](https://github.com/ivanov/ipython-vimception)?  \n This looks sweet. @parleur Can you provide some context on what changes were made and where review is most helpful? THanks!!\n Closed?  Did you find an alternative way to implement it?\n > Closed? Did you find an alternative way to implement it?\n\nI think @parleur want a bit less attention, and yes, we discussed an alternative for vim keybinding, and had a long conversation on how key handling works in general in the notebook.\n ah great, thanks @Carreau. I'm interested in helping out with \"emacs mode\" if/when there's an opening.\n The emacs key bindings are not that hard, the issue is with Vim that already have a dual command/edit mode. \n\nWe (@parleur and I) think it should be possible to \"never\" be in jupyter command mode, and have extra keybindings for codemirror that trigger actions at notebook level. \n\nSo  you can do things like `<esc>:run all`, or `:<esc>:above` , or alike. \nIt needs some refactor, like replacing \n\n``` javascript\nif (this.mode === 'edit') {\n    return this.edit_shortcuts.call_handler(event);\n} else if (this.mode === 'command') {\n  return this.command_shortcuts.call_handler(event);\n}\n```\n\nby something like:\n\n``` javascript\nnew_mode = this.mode[this.current_mode].call_handler(event)\nthis.current_mode = new_mode\n```\n\nTo gain some flexibility, and some patching of markdown cell to switch the rendering on focus.\n ^ @Carreau I like that idea\n Hi everyone,\nThis PR is more difficult than I thought, so I wanted some time to pursue in my side (means testing many things an discards it). I reopen it because I need Travis working, and I because I am not lost anymore. Yet it is still far from a serious working PR.\n\n### What are the goal?\n- enable vim-mode without crasy three mode to manage ( @jdfreder I tried vimception )\n- be able to dynamically switch edition mode\n- make the previous stuff convenient ( and it's far to be a detail ...)\n\n### What works\n- mostly trap the user in notebook edition mode (except when doing things with mouse) so that working with the notebook could be done in keyboard only when proper shortcut for every notebook functionality will be finished\n- Switch and switch back between vim mode and default mode without too much bug.\n\n### Tricky corners\n- @Carreau and I 've discussed about \"never be in notebook command mode\", that what is implemented but nearly never... the 'vim-command' state is just transitionnal for all keyboard event, but we may enter in when doing mouse things. That's the way we found not to be too aggressive with the existing code.\n- each edition mode should have two Shortcuts object  (like 'vim-command' and 'vim-edit'). When keyboard manager 's function 'edit_mode' or 'command_mode', the keyboard stay in 'vim' mode or in 'default' mode depending ... Not so cleanly implemented now\n\n### Minimum work to make this usable ( a lot !!! )\n-  [x] new cell should be configured in correct edition mode\n-  [x] ~~up/down keyboard aren't handled properly~~ -> issue with codemirror: edit mode and command mode doesn't react the same way with setCursor (patched in codemirror see bellow)\n-  [ ] ex command in vim mode should access notebook feature -> in different PR\n-  [ ] visual interface for ex command is very poor and should be corrected -> in different PR\n-  [ ] make tests ( and it is not a detail either)\n-  [ ] make the quickhelp relational with the current keymap -> in different PR\n\n### About other keybindings\n\n@hack-c I am not not very attached to other keybinding than vim mode, mostly because I am not able to imagine what an emacs/sublime user would like. Neithertheless, I presume than making a convenient keymap for emacs or sublime would turn around redefine what CodeMirror should handle and what Jupyter should and dynamic CM config. These are problems I have. Now that I am less lost, I 'll be more reactive if you re still want to help.\n Thanks for the all recap !\n of interest. \nhttps://github.com/lambdalisue/jupyter-vim-binding\n Here a working cell configuration. Mainly, I modified Cell to pass anything from Cell.class_config to subclasses. Of course if subclasses ( namely CodeCell, MarkdownCell, ...) overwrite config if defined. Also initialise the notebook in the correct mode.\n I think you might need to rebase. \n A stupid question: you suggest to rebase on top on current master:HEAD, I am used to merge new HEAD into my dev branch ( I ve read somewhere, it is dangerous to rebase any published commit ). I am wrong? Or is it equivalent ?\n Usually we avoid merging with HEAD. \nIt is not **dangerous** to rebase, it can just be a bit more complicated. And anyway locally your commits are still in the reflog, so you cannot **lose** work. \n\nI can show you how to rebase next  Tuesday on Skype if you like. \n Also current commit is https://github.com/parleur/notebook/commit/2832c132643967e681907d5ed85d9d773880f89c\n\nSo now that it is linked here, whatever you do, we can get it back from GitHub. \n A little comment about dynamic Codemirror keymap switching.\nCodeMirror have a bug/strange behavior with handlers so that when a handler have been registered before a keymap switch then it is treated **after** the newly declared codemirror core handler. The solution is to unbind the jupyter handler then switch keymap and rebind it.\n > A little comment about dynamic Codemirror keymap switching.\n> CodeMirror have a bug/strange behavior with handlers so that when a handler have been registered before a keymap switch then it is treated after the newly declared codemirror core handler. The solution is to unbind the jupyter handler then switch keymap and rebind it.\n\nAnother solution would be forcing to reload page after switching keymap.. \n Hmm it would solve the Codemirror bug ... but likely raise other issues. At minimum auto saving before reloading and handle interrupt computation due to keymap switching\nUnbind and rebind is proper and simpler (it is needed only about the keydown hander). The cleanest way would be to patch codemirror but it is out of my scope.\n We can likely assume people won't switch keymaps too many time. So I think reloading (with a warning) is acceptable if we want to go this route. \n ~~The vim keymap works and going back to default mode.  It's quick and dirty but it is an example of pleasant notebook navigation using only the keyboard.~~\n\n~~Note that it work using a [patched](https://github.com/codemirror/CodeMirror/issues/3881) codemirror (already merged) that can be backported onto the current codemirror version used by Jupyter.~~\n THanks for fixing things upstream. In general CodeMirror is released monthly, so we never have to wait too much between releases. \n related extension: https://github.com/lambdalisue/jupyter-vim-binding\n This PR in now close. After many time spent on in it appears that dealing a keymap layer need a proper keyevent handling, and it is not a refacto that can be done under the hood here.\n","That's a nbconvert issue as it happens during nbconvert install.  And https://github.com/jupyter/nbconvert/pull/25 is meant to fix it.  Closing in here.\n Thanks.\n","@Carreau @fperez  Ping. Especially for the report writing part of the work flow. Cheers.\n I'll try and implement splitting a cell into two notebooks as an extension.\n Hello, @nymoorland! This functionality has been implemented in [this extension](https://github.com/captainsafia/split-cell-to-notebook) if you'd like to try it out. Let me know if this fulfills what you where thinking off.\n\nAll the kudos go to @jcb91 for getting this done!\n Thanks. I look forward to trying it out:)\n Hi, the install instructions in link didn't work for me. Created folder at $(jupyter --config-dir)/nbextensions and dropped in the js file. Step 3 failed. \n Try placing it in $(ipython locate)/nbextensions. Feel free to open an issue\nin that repository as well so people who experience similar issues will have\nan easier time finding the answer!\n![](https://link.nylas.com/open/dzqy30d1igqlspctkj1tz54w2/local-6b5c5350-c9e9)\n\nOn Apr 21 2016, at 11:54 pm, nymoorland &lt;notifications@github.com&gt;\nwrote:  \n\n> Hi, the install instructions in link didn't work for me. Created folder at\n> $(jupyter --config-dir)/nbextensions and dropped in the js file. Step 3\n> failed.\n> \n> \u2014  \n> You are receiving this because you were assigned.  \n> Reply to this email directly or [view it on GitHub](https://github.com/jupyter\n> /notebook/issues/1110#issuecomment-213256215)![](https://github.com/notificati\n> ons/beacon/ABxZySaGAKrdectjCQVhDQzE6y-cgNZoks5p6FRvgaJpZM4Hd3bd.gif)\n $(ipython locate)/nbextensions did it. This is the functionality I had in mind. Thanks to both contributors for implementing it.\n `$(ipython locate)/nbextensions` might work for now, but it is deprecated. The new location is `$(jupyter --data-dir)/nbextensions` (N.B. data-dir not config-dir)\n","I think that's expected. You have to request a file from within nbextensions, it doesn't provide a directory index.\n http://localhost:8888/nbextensions is the URL which shows the ipython-notebook-extension page when these are installed: https://github.com/ipython-contrib/IPython-notebook-extensions/\n","I think it should work if you haven't modified the notebook. If the notebook has changed, we try to save it before downloading so that it gets the expected file.\n Could it be the case that a freshly loaded notebook is considered dirty until its first save?  If I step into the \"download as IPython\" callback using a js debugger, I can see that `that.notebook.dirty` is true, so a save is attempted.\n I don't think it should be, but maybe something in the frontend is modifying it just after load. @minrk @Carreau: any suggestions?\n @takluyver I did a quick test and found the following:\n1. chmod 444 existingnb.ipynb\n2. Screen shot of UI correctly indicates on right the read-only file status (disk with red slash through it):\n   <img width=\"1215\" alt=\"screen shot 2016-02-19 at 9 29 47 am\" src=\"https://cloud.githubusercontent.com/assets/2680980/13183351/69f98db0-d6eb-11e5-8e4a-9cf8306991ff.png\">\n3. Tried to download the file using the menus where the options are active:\n   <img width=\"463\" alt=\"screen shot 2016-02-19 at 9 23 11 am\" src=\"https://cloud.githubusercontent.com/assets/2680980/13183255/d46feaaa-d6ea-11e5-950f-ab43942cc7dd.png\">\n4. If selected Download as ipynb, a blank tab opens with no output. Going back to the notebook there is an orange \"This notebook is read only\" indicator on the right side of the UI.\n   <img width=\"1209\" alt=\"screen shot 2016-02-19 at 9 23 01 am\" src=\"https://cloud.githubusercontent.com/assets/2680980/13183223/aab478de-d6ea-11e5-9c2e-d861b8cc1958.png\">\n5. Unable to download all file formats even PDF which seems like it should not depend on read only status.\n\nThough, I'm unsure what designed and desired behavior is, but this is what I'm seeing with the latest notebook version.\n If trying to save using the left hand side button, the button triggers the Notebook is read-only indicator.\n<img width=\"1212\" alt=\"screen shot 2016-02-19 at 9 34 51 am\" src=\"https://cloud.githubusercontent.com/assets/2680980/13183544/28ebbcca-d6ec-11e5-94af-24cbbe6ee6e7.png\">\n That's expected when you explicitly try to save - read only means no saving.\n\nWhen you try to download as ipynb, if anything has changed since the last save, it tries to save it before downloading. The issue here is seemingly that something changes as soon as you open it. Thinking about it, I realise that's probably the kernel info in notebook metadata, which is updated when the kernel starts.\n @takluyver Sounds reasonable about the kernel info.\n @takluyver Dirty-on-load seems to be one issue (at least in the context of read-only files), but I see a second one: even if saving does fail for a good reason (e.g., we actually modified the notebook but the file is read-only), the \"Download as IPython notebook\" still creates a confusing blank window (because [that window](https://github.com/jupyter/notebook/blob/22761eeb15f314044a7572e6664b55ab02e176da/notebook/static/notebook/js/menubar.js#L121) is created before attempting to save).  If the blank window was not created in that case, it would be easier to see the \"Notebook is read-only\" warning appear as a response to download attempts.\n Yes, we should catch failure to save and close the window again.\n\n(The obvious strategy is to open the window when you know save has completed, but unfortunately browser pop-up blockers don't allow us to do that)\n","Thanks!\n","Do you want to add a note id `docs/sources/changelog.rst` ?\n @secant Welcome! Matthias is a wonderful mentor. I'm part of the Jupyter team at Cal Poly.\n\n@Carreau beat me to the help. I did restart Travis (our continuous integration and testing service). It is green.\n > It is green.\n\nYeah, we can try to make a test. Not sure it is worth though. \nIf we do that, we can monkey patch `os.geteuid()` to return always Zero. But I'm not sure it's worth testing that. \n @Carreau No need for tests on this. I was just explaining what Travis was :) \n Hey this is cool to do.\n\nDoes Windows need to be cased off?\n @Carreau \nUnder what version in the changelog would I add this change? 4.0.10? Or a new one? :bowtie:\n Hi @secant !\n- In the changelog, start a new section called 'Development' for now - we'll rename it when it actually goes into a release.\n- I think @rgbkrk is right, it needs a separate check for Windows. I guess that the `geteuid` function is simply not there in Windows, so it would throw AttributeError.\n Thanks, @secant, welcome to the project!\n Thanks for taking care of this ! Sorry I was mostly offline this Week-end. \n","@bkarlovitz Thanks for the suggestion and the offer to work on this enhancement. Since this is a user interface change, it would be good to get feedback from @ellisonbg @Carreau @jdfreder.\n Yeah, some times I run into that need as well.\n\nIn the current UI implementation it would be extremely difficult to\nimplement in a robust manner. In the new JupyterLab stuff it should be\n_much_ easier.\n\nOn Sat, Feb 20, 2016 at 3:04 PM, Carol Willing notifications@github.com\nwrote:\n\n> @bkarlovitz https://github.com/bkarlovitz Thanks for the suggestion and\n> the offer to work on this enhancement. Since this is a user interface\n> change, it would be good to get feedback from @ellisonbg\n> https://github.com/ellisonbg @Carreau https://github.com/Carreau\n> @jdfreder https://github.com/jdfreder.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1116#issuecomment-186697888.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Thanks for the feedback :)  I'll keep everyone posted here. \n In the meantime a simple hack may suffice.  Run the following in a code cell.  It will create both a toolbar button and a command mode keyboard shortcut (`q`) that can be used to temporarily pin cells to the top of the screen:\n\n``` js\n%%javascript\nif (!Jupyter.toolbar.actions.get('cellfreezer:freeze')) {\n    Jupyter.toolbar.actions.register({\n      icon: 'fa-thumb-tack',\n      handler: function() {\n        var cell = Jupyter.notebook.get_selected_cell().element[0];\n        if (!cell.style.position) {\n          cell.style.position = 'fixed';\n          cell.style.top = '0px';\n          cell.style.left = '0px';\n          cell.style['z-index'] = 999;\n          cell.style.background = 'rgba(234, 211, 146, 0.88)';\n          cell.style.width = '50%';\n        } else {\n          cell.style.position = '';\n          cell.style.top = '';\n          cell.style.left = '';\n          cell.style['z-index'] = '';\n          cell.style.background = '';\n          cell.style.width = '';\n        }\n      }\n    }, 'freeze', 'cellfreezer');\n    Jupyter.toolbar.add_buttons_group(['cellfreezer:freeze']);\n    Jupyter.keyboard_manager.command_shortcuts.add_shortcut('q', 'cellfreezer:freeze');\n}\n```\n\nAction shot:  \n\n![freeze](https://cloud.githubusercontent.com/assets/3292874/13271796/3aa32b84-da4c-11e5-8693-40573ca3d2e5.gif)\n","Hello from an :airplane:!\n\nYay for `throw`ing `Error`s!\n","Feel free to change it locally - it will probably work with Python 2 - but I'd rather you didn't commit the change.\n Yep, it does work locally with Python 2.\n\nShould I update \"Contributing to the Documentation\" to say that you need Python 3 to contribute to the docs?\n Hmm, I'd probably leave it for now. At some point, some of the autogen scripts might actually require Python 3, and then we can definitely say that.\n\nI have both Pythons installed, but Python 3 is the one that's most likely to have up to date packages installed, and the one that runs Sphinx for docs builds, so I prefer these scripts to run with it.\n Maybe I could put in a warning for Python 2 users?\n\nAs a first-time contributor (at Jupyter Day Chicago), I was really frustrated that I couldn't do something as simple as building the docs locally so I almost gave up completely. I was only able to make progress when a more experienced programmer told me try changing the command from python3 to python.\n Yeah, I think you can do a note somewhere in the docs.\n\nI wish we had something like the Windows `py` launcher, but ubiquitous on all systems, that would launch your preferred Python version.\n Or maybe we could try one and fall back to the other, but it's ugly to do that everywhere:\n\n```\nif which python3; then\n    python3 ...\nelse\n    python  ...\nfi\n```\n @parsing-science Sorry for any confusion. For now, let's put a note in the section about Contributing to Documentation saying that we recommend using Python 3.4+ for building documentation. Though if one is editing documentation Python 2.7.9+ is fine or editing via the GitHub editor. Thanks!\n\n@takluyver Thanks for helping. I've been traveling all day.\n Closed by jupyter/jupyter#112\n",":+1: thanks!\n\nIt looks like we're hitting rate limiting on Travis, so the tests haven't run yet. So long as they pass, this looks fine.\n JS tests weren't passing, turns out they were using \"ctrl-shift-subtract\" to trigger splits, so removing that from keyboardmanager.js broke them. I changed them to use \"ctrl-shift--\", hope that's OK. Splitting with the shortcut works in Chrome and Firefox for me (which have different keycodes for '-', may have been the origin of this to begin with).\n Thanks, @bjlange!\n","can be \"fixed\" by `position: relative` on `div.output_wrapper`. Have to look at side effect.\n And actually it has already `position:relative` just not compiled correctly....\n","Great, thanks for the cleanup!\n Thanks @Corvids :sunny: for the cleanup. Thanks @rgbkrk and @minrk for the review and merge.\n","@jdfreder is this right? It seems like the nbextension stuff should only need to be installed once, so I'm not sure if #1114 correctly identified the cause of the issue.\n\nLooking at the widgetsnbextension wheel on PyPI, it refers to a `static/` data directory which is not in fact anywhere in the package.\n @takluyver They both need the kernel side python code though right? Not just the frontend assets?\n Yeah, and `widgetsnbextension` should only be notebook-side, right? That's the point of it?\n Hey, don't know why I didn't see this ping, sorry.  `widgetsnbextension` is the nbextension for widgets, which is language agnostic.  `ipywidgets` is the Python backend.\n\nThis fix should not be needed now - ipywidgets depends on widgetsnbextension.\n","Are you opening the browser in the Windows VM, or from OS X? It won't be able to see the notebook server from outside the VM.\n I'm opening it from Windows.\n Then maybe there's something odd about the network interfaces in VMware. I'm not familiar with it, hopefully someone else will be...\n @neilb01 From within the Windows VM terminal that you are using to run the notebook, are you able to `ping 127.0.0.1` or `ping localhost`? If you are able, can you try starting Jupyter notebook using a port other than the default using `jupyter notebook --port 8889` or other unused port. If that doesn't work you may need to configure the VM to use your Mac's IP address instead of 127.0.0.1.\n @willingc Hi yes I can ping both. I have tried other ports, I've tried ip=\\* nothing seems to be working. \n\nI will look into seeing what IP address the VM is using. Thanks. \n @neilb01 I seem to be having the same issue you originally posted but in Virtualbox running jupyter in a linux VM. Did you figure what what your problems was?\n Hi,\nI have faced a similar problem on my Windows 10 machine. I just installed Anaconda with python 2.7 and Jupyter and found that the Jupyter notebook server was starting in System32. I found two solutions to this:\n- Changing the port to 8889, as you suggested.\n- Reinstalling Anaconda with the installer running with admin privileges (I did this as the installer won't create the start menu shortcuts without admin privileges)\n\nHope that helps!\n > the installer won't create the start menu shortcuts without admin privileges)\n\nThat sounds like a bug in the Anaconda installer; it should be possible to create start menu shortcuts without admin access.\n I faced similar issue with Anaconda 4.3.0 installaiton. but I couldn't find a root cause for the issue. before facing this issue I updated conda packages via command prompt\r\n\r\nI uninstalled and installed Anaconda 4.3.0 with admin previledge which didn't fix the issue. At last the port change method mentioned by @willingc is working fine now. Thanks @swapnilpatel for sharing your experience.\r\n\r\nI'm going to go ahead and close this issue as resolved by using a port other than the default when launching.","Can you clarify why a Markdown cell doesn't accomplish that? Do you want to\naccess display mime other types than HTML? What would edit mode look like\nfor those other mime types? Not opposed to this idea, just trying to think\nthrough it....\n @ibustelo has run into some sort of sanitisation that we do on markdown cells, so you can't write arbitrary HTML in them.\n\nI think that was prompted by the security discussion - we decided to sanitise markdown all the time, so that the signatures and trust mechanism only deal with outputs from code cells.\n\nSo I think the crucial thing we need to work out is what the user interface for trusting arbitrary HTML in something like a markdown cell is, equivalent to running a code cell to trust it. Should we present untrusted cells unrendered and let the user render them to trust them?\n Ping @minrk\n If I understand this correctly, I think this can be orthogonal to #621 . Even if you could insert a special \"image\" cell, I don't think this would cover all the use cases for inline images. For example, you might want to do layout on your inline images (e.g. put them in a table) that you cannot do with a simple image cell type.\n @takluyver great point, yes I guess we do treat the code/markdown cells\ndifferently from a security standpoint. This clarifies an important part of\nthis. The idea of using Markdown cells for this purpose, but treating them\nmore like code cells seems like a pretty straightforward approach. What are\nthe downsides of that?\n\nCreating a new cell type that supports arbitrary display mime-types, but\ncan still be human edited like a Markdown seems a bit awkward still. Trying\nto get my head around it. Would this be like an input-less code cell? Or a\ncode-cell whose input is its output?\n\nOn Sun, Feb 21, 2016 at 2:46 AM, Thomas Kluyver notifications@github.com\nwrote:\n\n> @ibustelo has run into some sort of sanitisation that we do on markdown\n> cells, so you can't write arbitrary HTML in them.\n> \n> I think that was prompted by the security discussion - we decided to\n> sanitise markdown all the time, so that the signatures and trust mechanism\n> only deal with outputs from code cells.\n> \n> So I think the crucial thing we need to work out is what the user\n> interface for trusting arbitrary HTML in something like a markdown cell is,\n> equivalent to running a code cell to trust it. Should we present untrusted\n> cells unrendered and let the user render them to trust them?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1123#issuecomment-186796166.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Here's what I imagine for what is represented as an HTML cell for users when they're editing it:\n\n![group](https://cloud.githubusercontent.com/assets/836375/13207923/9ca89f18-d8d9-11e5-8caa-8a992f76bb35.png)\n\nFollowed by what it looks like when rendered:\n\n![group 2](https://cloud.githubusercontent.com/assets/836375/13208086/2d442fa0-d8db-11e5-96d9-ec8c46ed0e08.png)\n\nIn this example I'm showing a pencil icon to switch back to edit mode, though we can refine that.\n\nAs for inserting it, to the user they don't see what the underlying representation is for this cell which I'm imagining to be:\n\n``` json\n{\n \"cell_type\": \"data\",\n \"data\": {\n      \"text/html\": [\n       \"<div>\\n\",\n       \"<table border=\\\"1\\\" class=\\\"dataframe\\\">\\n\",\n       \"  <thead>\\n\",\n       \"    <tr style=\\\"text-align: right;\\\">\\n\",\n       \"      <th></th>\\n\",\n       \"      <th>Name</th>\\n\",\n       \"      <th>Email</th>\\n\",\n       \"    </tr>\\n\",\n       \"  </thead>\\n\",\n       \"  <tbody>\\n\",\n       \"    <tr>\\n\",\n       \"      <th>0</th>\\n\",\n       \"      <td>Jane Doe</td>\\n\",\n       \"      <td>jane@doe.com</td>\\n\",\n       \"    </tr>\\n\",\n       \"    <tr>\\n\",\n       \"      <th>1</th>\\n\",\n       \"      <td>John Doe</td>\\n\",\n       \"      <td>john@doe.com</td>\\n\",\n       \"    </tr>\\n\",\n       \"  </tbody>\\n\",\n       \"</table>\\n\",\n       \"</div>\"\n      ]\n     }\n}\n```\n\nSimilary for images, this would end up with base64 encoded images inline while the UX for it is similar in flow to drag and dropping images or selecting via menu in other UIs.\n A summary of the security/sanitization we do and why:\n1. untrusted HTML/js must never be displayed without explicit user action\n2. Code cells have an obvious action to take: execute\n3. Markdown cells _also_ have an obvious action to take: render\n4. Instead of tracking whether the user has explicitly trusted markdown cells, we treat them as always untrusted, which means sanitizing markdown results, but we can display them even when the notebook is untrusted\n5. A dedicated display-data cell would need to have to have the same trust semantics as other cells (explicit trust before display or sanitization)\n\nIf we treat markdown cells as we do code cells, that means that an untrusted notebook needs to open with all markdown cells unrendered, and they must be 'executed' manually by the user before they are allowed to render on the page. The same would be true if we had dedicated mimebundle cells.\n\nSo the question to me is, really, a user-experience one on which I don't have an informed opinion. Should we:\n1. sanitize markdown, in which case we always get to display it (what we do now)\n2. allow arbitrary HTML/js in markdown, in which case we cannot display it until it is trusted\n\nThere are technically other options, like \"display but sanitize only _untrusted_ markdown\", which is attractive because it will do what people want the most often, but I think it's the most confusing when sanitization of untrusted markdown produces a materially different result, where we have to communicate to users that they must\"unrender then re-render the cell to see it how it's meant to be.\"\n Is it possible to detect whether there's anything in a block of markdown/html which would be affected by sanitisation? I.e. could we check if each markdown cell is 'safe' and decide to display it rendered or unrendered?\n Yes, that is possible.\n If that's doable, I think that would be preferable. But it would probably also cause some confusion - why are some of these cells showing up rendered and others unrendered? Maybe we could add a little _untrusted_ indicator by the unrendered cells, and offer a bit of explanation on mouseover/click.\n Sure, so then the plan would be:\n1. track 'trusted' on markdown, just like code cells\n2. sanitize if untrusted\n3. show indicator / more info if sanitization made any changes\n4. explicit render of markdown cell indicates trust just like cell execution\n\nStep 1. requires a change in nbformat to keep track of the trusted flag on markdown cells. Perhaps that trust->sign code really belongs in the notebook repo anyway (not 100% sure), since it's specifically a transform from the nbformat file format to 'live' document state that's specific to this webapp.\n\nOne (lazy) version of that indicator could be to leave the cell unrendered if it's untrusted _and_ sanitization would make some change.\n\n@rgbkrk is there anything display cells would provide that this proposal would not, or do you still think that display cells are something we should add?\n > 1. sanitize if untrusted\n\nTo be precise, my proposal is not to sanitise (or not to display sanitised output), but to display the markdown cell unrendered if sanitisation would make any changes and it's untrusted.\n Gotcha, that ought to be doable.\n I got the basics going for that at #1126.\n Trust on markdown cells is a good starting point and we should see how it works in practice, via @lbustelo.\n\nThere's a larger question about what the markdown cells do and how they're specified:\n- Does the grammar for commonmark completely respect any embedded html?\n- What's the specification for embedded Math? Right now it seems like it's a function of the implementation in the notebook at any given time (see issues on nbviewer, github's rendering of notebooks, etc.)\n\nIf we couple ourselves to always using markdown cells for embedded HTML, these are the primary user experience and developer experience cons:\n- Unable to support a WYSIWYM editor like [ProseMirror](http://prosemirror.net/)? If we want the notebook to be approachable to a lot more analysts, this is a big one.\n- In contexts where the outputs need to be sandboxed (O'Reilly Media's site, any future revisions on nbviewer), where is this HTML declared. Is it a global context on the page? How do we make it not interfere with the rest of the page? For multi-user collaboration, how do you reason about a document that can change underneath you?\n > Unable to support a WYSIWYM editor like ProseMirror?\n\nIt would make this trickier, but I don't think it should be impossible. I expect that most markdown cells would still contain relatively simple Markdown which could be edited like that.\n\nOf course, if there are two different behaviours for markdown cells based on their contents, maybe they should be two cell types. That would be a bigger change to the notebook format, though.\n Using the Markdown cell (once sanitation issues are solved) addresses 2 of my main concerns:\n1. HTML magic (and others like Javascript) places a requirement on the kernel that for many use-cases seem unreasonable and, for certain languages, not practical to implement (i.e  IRkernel/IRkernel#260).\n2. From a UX point of view, it is beneficial to have a well defined place to author client side content. Having to type `%%HTML` always felt kludgy.\n\nHaving said that... there are so many ways to author client side content that may not fit as nicely in the Markdown cell and might be better suited if we had some level of extensibility around cell types. @bollwyvl brought up https://github.com/pugjs/jade as another alternative to avoid typing HTML. There is always some new flavor of the month.\n\nAlso as @rgbkrk hinted at with WYSIWYG comment, the maturation of the Notebook space is going to lead to higher level authoring experiences. Jupyter and the NB format should somehow accommodate for that to avoid being overshadowed by the countless alternatives that are popping up all over.\n\nI understand the importance of the downstream tools (i.e. nbviewer) and the hesitation of an open set of cell types, but as notebooks become platforms for solution development, I think this issue is going to become more and more important to solve.\n Quick demo for you using [draft-js](https://github.com/facebook/draft-js) and KaTeX, for a rich editor that has block maths:\n\n![latex](https://cloud.githubusercontent.com/assets/836375/13241621/617b7fee-d9b2-11e5-8159-6aab35573ce4.gif)\n Great, glad to see conversation about this topic! I've been tracking it for [some time now](https://mail.scipy.org/pipermail/ipython-dev/2012-December/010839.html), and am really interested in how this round turns out! I was indeed convinced then that make a cell type for everything is not the answer... but perhaps it is time to start thinking about some of the UI pieces around rich output that haven't fundamentally changed since then. \n\nBackground\nFor a while now, I've been making [magics](https://github.com/bollwyvl/jademagic)/[extensions](https://github.com/bollwyvl/nb-wysiwyg)/[widgets](https://github.com/bollwyvl/ipytangle)/[tricks](https://github.com/bollwyvl/nb-mermaid)/[fancies](http://bollwyvl.github.io/quarto/) to get closer to authoring particular kinds of wysiyMean, ala lyx/prosemirror. We've come a long way, if you are willing to jump through many hoops!\n\nFront End Stuff\n+1 common mark as a container for robot-authored Stuff (JS, HTML, CSS, SVG), even if we have to push forward the maths. If you read/write markdown and all those things, you're kind of a robot, so you should be fine.\n\nEven if adopting commonmark for all that Stuff, and getting our sanitization house in order, the authoring of said Stuff in the browser (in the notebook) probably does need some love. \n- CodeMirror has our back, and has [completion](https://codemirror.net/demo/complete.html) and [linting](https://codemirror.net/demo/lint.html) for all of those, and many of the transpiled languages which we'd want to see with full support of npm.\n- This would be backed by the nascent \"front end \u029eernel\", and is what we'd need anyway to make JupyterLab into the best place to build Lab/Notebook extensions.\n- Just ditching out to the text editor would lose the immediacy of being in-browser...  \n  - and heck, maybe there's something to this stuff-embedded-in-json idea: there is something kind of beauitful in the [vulcanized](https://github.com/Polymer/vulcanize) polymer components: here's your nbextension... as a notebook!\n\nUser-authored text\nThe exception to this is, I think, user-authored complex prose documents.\n\nIf we were to embark on this path, I think it would end up having:\n- typography-focused approach to the UI of rich text authoring\n  - much like @rgbkrk's demo (:heart: it!) fade out all the UI, embrace the keyboard shortcuts, and start writing your journal paper. or letter. or contract. or whatever.\n- a document-oriented data structure for the content, likely via prosemirror...\n  - footnotes!\n  - sidebars!\n  - comments!\n  - images with captions!\n  - numbered equations!\n- a no-fooling, extensible layout engine ([nbpresent](https://github.com/Anaconda-Server/nbpresent) just hacks the css)\n  - parpers, posters, banners\n- robust themes that look publication grade out of the box\n\nThen the question is... are these then even cells? or is this another, prose-native view of your notebook you have chosen, which can include cells embedded in _it_. Do you show them next to each other? Does this even go in an ipynb, or is this a separate file type altogether, or a wrapper around both kinds of file, or a PDF with a local file store?\n\nVery exciting stuff, and hopefully a topic for the dev meeting!\n That seems really appealing, and points to either a display-data cell as discussed here, or just an HTML cell, whose editor can be any HTML-authoring magic.\n\nI _believe_ with CommonMark's behavior, anything inside a `<div>` should be treated as raw HTML, which would mean that wrapping the entire markdown cell in a single div makes it a pure HTML cell. That _should_ mean that people can experiment with wysiwyg html editors on top of markdown cells while we figure if a cell type is useful.\n My understanding with commonmark is that any html tags should treat the enclosed material as html. That seems to be how the reference implementation behaves too: http://spec.commonmark.org/dingus/\n > I believe with CommonMark's behavior, anything inside a `<div>` should be treated as raw HTML...\n\nYep, seems so. `div`, and [these buddies](http://spec.commonmark.org/0.24/#html-blocks):\n\n```\nStart condition: line begins the string < or </ followed by one of the strings (case-insensitive) address, article, aside, base, basefont, blockquote, body, caption, center, col, colgroup, dd, details, dialog, dir, div, dl, dt, fieldset, figcaption, figure, footer, form, frame, frameset, h1, head, header, hr, html, iframe, legend, li, link, main, menu, menuitem, meta, nav, noframes, ol, optgroup, option, p, param, section, source, summary, table, tbody, td, tfoot, th, thead, title, tr, track, ul, followed by whitespace, the end of the line, the string >, or the string />.\nEnd condition: line is followed by a blank line.\n\nStart condition: line begins with a complete open tag or closing tag (with any tag name other than script, style, or pre) followed only by whitespace or the end of the line.\nEnd condition: line is followed by a blank line.\n```\n\n> or just an HTML cell, whose editor can be any HTML-authoring magic\n\nSo, today, an inline prosemirror could serialize its JSON document model to cell metadata, and treat the source as its output.\n\nThough a bit tubby on bytes, this is nice, as then you've still got a \"dead pixel\" version of the content if someone doesn't have nbJadeDustUnderscoreHandlebarsReactHAMLJinjaLiquidLessSCSSStylusCoffeeTypeScript.\n\nI guess you'd have a helpful message at the top that suggested _thou shalt not edit this cell_, but since we don't lock cells, they'd be free to go on about their business if they didn't have your editor. Some translations even have reverse engineering capabilities, such as http://html2jade.org/, though this falls apart once you actually start using template features...\n\n> My understanding with commonmark is that any html tags should treat the enclosed material as html. That seems to be how the reference implementation behaves too: http://spec.commonmark.org/dingus/\n\nThis is the behavior of nbviewer, inherited from mistune, as discussed here: https://github.com/jupyter/nbviewer/issues/526#issuecomment-151928396\n\nAs described there, nbconvert( or nbviewer)'s configuration could be changed to mimic the live browser's marked, and the spec.\n The editor posted above comes straight out of [draft-js](https://github.com/facebook/draft-js), which has been used in production at Facebook for the last couple years and open sourced yesterday. It's React centric, though you can have React target any DOM element for rendering. I'm enjoying the APIs so far and the model underneath (people are using the same model in native apps now too).\n\nThat's a diversion from the real problem I'm worried about: what our specification is for the markdown cells themselves. It's not specced and is a reflection of the way the current user's notebook server  implements it. When used on nbviewer, github, or other static renderings, if we wanted consistency, we'd have to match the version of marked, mistune, commonmark, etc. as well as MathJax that matches the notebook server they came from. If we keep the spec consistent with commonmark and suggest HTML somewhere else, we lessen the rendering bugs that get reported elsewhere and can build a clean model (a necessity for a WYSIWYG editor).\n I don't have an answer here yet, just starting to digest the questions... But I want to throw one more data point into this topic: the Broad Institute's [GenePattern Notebook](https://github.com/genepattern/genepattern-notebook) exposes special input cells via an extension and a custom cell type, [this page](http://www.broadinstitute.org/cancer/software/genepattern/using-the-genepattern-notebook-environment) shows some examples.\n\nThis is a pattern that is also used by [KBase](http://kbase.us) for its computational biology apps and methods, with a slightly more complex approach b/c it was created earlier, when our notebook infrastructure was less mature (so the KBase team had to hack more).\n\nThis KBase/GenePatternNB approach fits certain use cases in biology _really_ well, and it has made me think that we really need to find a clean, generic solution for it, as biology is not the only place where it's useful.\n\nSo I think we should approach this question trying to solve these slightly different, but ultimately related, use cases in a unified way...\n\nIf we don't get to a solution here, this should definitely be something to brainstorm on at the dev meeting! I've put it on the agenda.\n As @bollwyvl pointed out in https://github.com/jupyter/notebook/issues/1123#issuecomment-187908959, the important thing in commonmark for html blocks is that there are no blank lines (e.g., it doesn't do html between div tags, it just pays attention to blank lines).\n Aha, interesting note about the blank lines, thanks. That seems a bit weird, but does point to us making a specific HTML cell (mimebundle or otherwise) that wysiwyzards can sit on. I wouldn't want to be saying \"Make sure you don't add any empty lines in your HTML, or it'll interpret it as another language\".\n To throw another thing into the discussion, I also worked on wysiwyg tools for generating code directly in code cells: http://bl.ocks.org/jasongrout/5378313. \n![inlinewidgets](https://cloud.githubusercontent.com/assets/192614/13289347/b8f5445e-dadd-11e5-80a7-2e6aa6c85a22.gif)\n @jasongrout that's very cool!\n @jasongrout +1!\n I was trying to find out how to use the cell type to create to special cells and I found this awesome thread.\n\nI have been building presentations with `nbpresent` for data-driven interactive documents.  My first lesson was that too much code makes creating a presentation from a single notebook unwieldy.   \n\nThere needs to be a tighter way to connect variables on the kernel with  HTML and Javascript.  I came up with this small cell magic called [`literacy`](https://github.com/tonyfast/literacy).  `%%literate` processes the cell as literate markdown where the code fences are executed if the language is understood.  Moreover, the entire cell is a jinja2 template, well a few templates, which means that data can passed from the kernel to the presentation and made interactive.\n\n[This notebook](http://nbviewer.jupyter.org/gist/tonyfast/3d80ffaa8a2c5d04d3d2cd7631a7cb19/hard%20to%20find%20a%20better%20way%20to%20interact%20with%20javascript.ipynb) showcases `literacy`.  Some cool features are:\n- Markdown cells that create variables in python and insert them into the template.\n- Coffeescript, javascript, and pyscript to change state.\n- A DataFrame inserted directly into markdown after making a request.\n- Hidden code cells and disqus comments.  _Click the toggle input button to show the source._\n\nI feel like there is a cool editor in this idea.\n @tonyfast checkout jupyter-declarativewidgets. The main focus of that work is to connect data and functions from a kernel with visual interactive areas in the notebook authored using the html magic. \n Mega :+1: to the declarative widgets\n Neat, thanks for posting that, @tonyfast \n Very neat, @tonyfast!\n","Same problem observed on MacOS with Firefox or Chrome...\n @tacaswell @pelson pinging matplotlib devs. Any idea if I should rather report it at matplotlib?\n Hi @jorisvandenbossche - afraid I don't have anything particularly helpful to say on this, other than supporting you in the assertion that this looks like a change to notebook. Of course, if it was an intentional change, we will have to do some patching in the nbagg backend. It would be helpful to get some notebook insight on this.\n duplicate of https://github.com/jupyter/notebook/issues/949\n\nRelated to https://github.com/matplotlib/matplotlib/pull/6053\n\nSomething is going wrong with the keybinding handoff at the js layer.\n If you fall back to Jupyter 4.0 I think it works again.\n Tracked it down to [this bit](https://github.com/matplotlib/matplotlib/blob/v1.5.2/lib/matplotlib/backends/web_backend/nbagg_mpl.js#L165), where nbagg is turning a shift-enter key event into a `j` key event to send to Jupyter, which assumes a few things that aren't necessarily true:\n1. that while the figure is focused, its cell is selected\n2. that `j` is still bound to select-next\n\nThe 4.0-4.1 change here is that the containing cell is force-selected when the figure is focused in 4.0, whereas 4.1 does not enforce this, and leaves the selection on the next cell. At that point, when `j` is struck, it selects cell n + 2, because the cursor wasn't where nbagg assumed it would be.\n\nmatplotlib/matplotlib#6752 fixes this to directly select the cell after the one containing the figure, regardless of current selection.\n The matplotlib patch has been merged, this should be fixed in mpl 2.0\n Thanks @tacaswell!\n @minrk and thank you for the fix!\n We are also thinking about doing a 1.5.3 with any other bug-fixes that collect at the scipy sprints.\n","So if you handed me a notebook file and I was running this branch, I'd see everything as cells, not in  pretty, rendered format?\n @jdfreder no, this would be the relevant part:\n\n>  'safe' (no sanitization to do) markdown is automatically trusted\n\nOnly the cells where sanitization would change the content would be left unrendered. Basically, all cells that work today would show up as rendered, just like they do now. But cells that include 'unsafe' content (as determined by caja) would be left unrendered until you decided to run them.\n\nThe only change with respect to current behavior is for these cells with untrusted content:\n- today: the unsafe content is always stripped, but the safe remainder is still rendered.\n- this pr: the unsafe content _may_ be displayed, but won't be on load if the notebook is untrusted.\n Needs rebase.\n This is going stale, I'm going to mark it as \"Closed PR\" to find it easily, and close it to keep the PR queue short. \n\nThanks all for working on that. \n","It appears that Travis failed to see this, for some reason. \n","`/me investigates`\n Nope, it wasn't, directly - see #435\n","Nope, [that's not it](https://travis-ci.org/jupyter/notebook/jobs/111017688).\n\n@minrk I recall hanging-on-close issues with the zmq context before. Could that be happening here? How would we debug it?\n That's definitely a possibility. I'll see if I can figure out a way to diagnose it better.\n Complete shot in the dark. I wonder if linger needs to be set or set to a shorter interval???\n\nhttps://kerpanic.wordpress.com/2015/07/22/zmq-hanging-at-context-termination/\n `jupyter_client` sets the linger to 1000ms (in `ConnectionFileMixin._create_connected_socket`). But maybe a ZMQ socket is being created somewhere else and getting the default infinite linger?\n I doubt that linger would be the issue, but I can investigate to be more certain. If zmq is involved, it's more likely that a socket is somehow never getting closed. I'll see if I can get to a situation where I can reproduce the bug on a machine where I can do interactive things.\n I can sometimes reproduce it by sshing into the Jenkins server, activating the environment used for the jack-of-none builds and running `nosetests notebook`. But even there, it seems less likely to occur than when it's run by Jenkins. :confused: \n The actual problem should be fixed by #1136. I still think making this thread a daemon makes sense, so merging anyway.\n","Fixed by jupyter/nbconvert#165, fix will be in nbconvert 4.2 when it's released.\n Thank you! Is there a way to upgrade now and not wait?\n If you're comfortable dealing with this stuff, you can run from the development version of nbconvert:\nhttps://github.com/jupyter/nbconvert\n I installed it from the source and now I'm getting a new error. I click the export to PDF button, it opens a new Windows tab, and it just hangs and hangs and hangs. Here are the last things in the command-line log.\n\n``` bash\n[I 13:56:40.776 NotebookApp] Saving file at /Untitled.ipynb\n[I 13:56:41.230 NotebookApp] Writing 13874 bytes to notebook.tex\n[I 13:56:41.230 NotebookApp] Building PDF\n[I 13:56:41.237 NotebookApp] Running pdflatex 3 times: ['pdflatex', 'notebook.tex']\n```\n How long did you wait? The dev version is working for me, although it does take 20 seconds to generate the pdf file.\n Thank you, installing the latest dev version of nbconvert worked for me. It took a few minutes for me to generate the PDF.\n","@lbustelo as a workaround you should be able to use the OutputWidget to render the outputs and control clearing.  When used as a context manager it captures all display and clear output messages.\n\nThat said, I think I'm +1 on this idea because it may help with the simple animation case cc @jasongrout \n I've also needed to be able to clear a different one than the last one. If a new interface had the ability to clear specific ones, that would be handy.\n Having addressable output widgets seems like a better approach to this than removing individual outputs by an index.\n Yes, and a full API would allow querying to see what addressable output items exist.\n","there seem to be a connection issues between server and kernel. \nFrom the screenshot, I'll guess you are on windows. Do you have any firewall/antivirus software ? If so can you try disabling it ?\n\n(more info, like wether you install with conda, or pip might be helpful) \n I already disabled the firewall,\n![screen shot 2016-02-23 at 7 29 16 pm](https://cloud.githubusercontent.com/assets/9956970/13272729/cba865ce-da63-11e5-96e0-94837bdf22e7.png)\n Does the same happen in any browser?\n It still doesn't work....\n Have you tried in more than one browser? Also, try switching the address between `localhost` and `127.0.0.1` - some security software we've found blocks one of those but not the other.\n\nCan you use IPython in the command prompt? If you run `python -m ipykernel`, do you get any errors?\n I tried chrome, firefox and safari, and all don't work.\nI using the public address instead localhost/127.0.0.1.\ncapture the terminal screen that i run \"python -m ipykernel\"\n![screen shot 2016-02-24 at 9 55 04 am](https://cloud.githubusercontent.com/assets/9956970/13291430/4b8e257a-dadd-11e5-9ab1-b18d7a94f948.png)\n I'm not sure how you got it installed without that, but you should probably install ipykernel from pip or conda (whichever you used to install the rest of the stuff).\n i type: #jupyter kernelspec list\nAvailable kernels:\n    python2   /home/opennsa/dev/notebook/venv27/lib/python2.7/site-packages/ipykernel/resource\n\nDoes it show that I already install ipykernel?\n Yes, I guess so. It looks like when you tried `python -m ipykernel`, it wasn't using the Python installed inside the virtualenv (the path starts `/usr/local` instead of pointing to your virtualenv). Make sure the virtualenv is active, and then try that command.\n I fixed the virtualenv python path, then run python -m ipykernel as showed in below:\n![screen shot 2016-02-24 at 4 17 15 pm](https://cloud.githubusercontent.com/assets/9956970/13302975/434d64ae-db12-11e5-970c-9f2ad7961963.png)\n\nrun jupyter notebook, the problem is still exist.....\n @gracehllee Are you using a VM, like VirtualBox or VMWare?\n yes, i am using virtualbox \n Does `jupyter console` work, or does that also have problems?\n jupyter console works.....\n![screen shot 2016-02-24 at 5 01 30 pm](https://cloud.githubusercontent.com/assets/9956970/13304057/5d8732ea-db18-11e5-80b8-817f062822dc.png)\n OK, I'm baffled. It looks like the kernel is not starting properly for some reason (`Timeout waiting for kernel_info reply...`), but you can use jupyter console, so it must be able to start a kernel and communicate with it.\n Does the Windows VM have Sophos or any other kind of web security system installed? Those systems have produce symptoms like this before.\n In your virtual machine, what happens if you run the notebook server: `jupyter notebook \u2013\u2013ip=0.0.0.0`\n\nThen, view the notebook in the host\u2019s browser: http://localhost:8888\n I found when I run cell again.\nIt shows Dead kernel : The kernel has died, and the automatic restart has failed. It is possible the kernel cannot be restarted. If you are not able to restart the kernel, you will still be able to save the notebook, but running code will no longer work until the notebook is reopened.\nIn jupyter consol also show the \"execption restarting kernel\"\n @gracehllee If possible, please add screen shots and terminal input/output since that will help us troubleshoot a bit easier. It sounds like you have the notebook running and can see the user interface. If that is correct, please restart the notebook with the following flag in addition to any other options that you have set `jupyter notebook --debug`. Will you send a screenshot of the About screen in the Help menu (looks like this:\n<img width=\"692\" alt=\"screen shot 2016-02-26 at 3 37 14 am\" src=\"https://cloud.githubusercontent.com/assets/2680980/13331993/ddf7b058-dc3a-11e5-82f6-2eaf45bef836.png\">\n\nPlease also send a list of the terminal debug output which look similar to this (you can use ``` before and after the text to create a nice display in Github):\n\n```\n ~p/jupyter-world/notebook$ jupyter notebook --debug\n[D 03:38:21.557 NotebookApp] Config changed:\n[D 03:38:21.557 NotebookApp] {'NotebookApp': {'log_level': 10}}\n[D 03:38:21.558 NotebookApp] Searching ['/Users/carol/Projects/jupyter-world/notebook', '/Users/carol/.jupyter', '/Users/carol/.virtualenvs/mypy3/bin/../etc/jupyter', '/usr/local/etc/jupyter', '/etc/jupyter'] for config files\n[D 03:38:21.558 NotebookApp] Looking for jupyter_config in /etc/jupyter\n[D 03:38:21.558 NotebookApp] Looking for jupyter_config in /usr/local/etc/jupyter\n[D 03:38:21.558 NotebookApp] Looking for jupyter_config in /Users/carol/.virtualenvs/mypy3/bin/../etc/jupyter\n[D 03:38:21.558 NotebookApp] Looking for jupyter_config in /Users/carol/.jupyter\n[D 03:38:21.558 NotebookApp] Looking for jupyter_config in /Users/carol/Projects/jupyter-world/notebook\n[D 03:38:21.559 NotebookApp] Looking for jupyter_notebook_config in /etc/jupyter\n[D 03:38:21.559 NotebookApp] Looking for jupyter_notebook_config in /usr/local/etc/jupyter\n[D 03:38:21.559 NotebookApp] Looking for jupyter_notebook_config in /Users/carol/.virtualenvs/mypy3/bin/../etc/jupyter\n[D 03:38:21.559 NotebookApp] Looking for jupyter_notebook_config in /Users/carol/.jupyter\n[D 03:38:21.560 NotebookApp] Loaded config file: /Users/carol/.jupyter/jupyter_notebook_config.py\n[D 03:38:21.560 NotebookApp] Config changed:\n[D 03:38:21.560 NotebookApp] {'JupyterApp': {'config_file': '/Users/carol/.jupyter/jupyter_notebook_config.py'}, 'NotebookApp': {'log_level': 10}}\n[D 03:38:21.561 NotebookApp] Config changed:\n[D 03:38:21.561 NotebookApp] {'JupyterApp': {'config_file': '/Users/carol/.jupyter/jupyter_notebook_config.py'}, 'NotebookApp': {'log_level': 10}}\n[D 03:38:21.561 NotebookApp] Looking for jupyter_notebook_config in /Users/carol/Projects/jupyter-world/notebook\n[D 03:38:21.562 NotebookApp] Config changed:\n[D 03:38:21.562 NotebookApp] {'JupyterApp': {'config_file': '/Users/carol/.jupyter/jupyter_notebook_config.py'}, 'NotebookApp': {'log_level': 10}}\n[I 03:38:21.747 NotebookApp] Serving notebooks from local directory: /Users/carol/Projects/jupyter-world/notebook\n[I 03:38:21.748 NotebookApp] 0 active kernels\n[I 03:38:21.748 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/\n[I 03:38:21.748 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[D 03:38:22.037 NotebookApp] Using contents: services/contents\n[D 03:38:22.069 NotebookApp] 200 GET /tree (::1) 34.13ms\n[D 03:38:22.140 NotebookApp] 304 GET /custom/custom.css (::1) 5.54ms\n[D 03:38:22.311 NotebookApp] 200 GET /static/services/contents.js?v=20160226033821 (::1) 0.82ms\n[D 03:38:22.315 NotebookApp] 200 GET /custom/custom.js?v=20160226033821 (::1) 0.70ms\n[D 03:38:22.343 NotebookApp] 200 GET /api/config/tree?_=1456429102213 (::1) 0.82ms\n[D 03:38:22.344 NotebookApp] 200 GET /api/config/common?_=1456429102214 (::1) 0.59ms\n[D 03:38:22.349 NotebookApp] 200 GET /api/terminals?_=1456429102215 (::1) 0.66ms\n[D 03:38:22.353 NotebookApp] Native kernel (python3) available from /Users/carol/.virtualenvs/mypy3/lib/python3.5/site-packages/ipykernel/resources\n[D 03:38:22.353 NotebookApp] Native kernel (python3) available from /Users/carol/.virtualenvs/mypy3/lib/python3.5/site-packages/ipykernel/resources\n[D 03:38:22.355 NotebookApp] 200 GET /api/kernelspecs (::1) 3.94ms\n[D 03:38:22.356 NotebookApp] 200 GET /api/terminals?_=1456429102217 (::1) 0.45ms\n[D 03:38:22.357 NotebookApp] 200 GET /api/sessions?_=1456429102216 (::1) 1.01ms\n[D 03:38:22.422 NotebookApp] 200 GET /api/contents?type=directory&_=1456429102218 (::1) 7.78ms\n^C[I 03:38:57.869 NotebookApp] interrupted\nServing notebooks from local directory: /Users/carol/Projects/jupyter-world/notebook\n0 active kernels\nThe Jupyter Notebook is running at: http://localhost:8888/\nShutdown this notebook server (y/[n])? ^C[C 03:38:59.532 NotebookApp] received signal 2, stopping\n[I 03:38:59.533 NotebookApp] Shutting down kernels\n```\n\nThanks!\n","Or is this page more helpful?\nhttp://jupyter-notebook.readthedocs.org/en/latest/development_js.html\n Erm. This is not the thing I was trying to convey.\n\nGimme 2 seconds\n\n![giphy](https://cloud.githubusercontent.com/assets/1857993/13293687/508add26-dae6-11e5-8137-7ff4129ed015.gif)\n OK. _This_ is the thing I wanted to do.\n\nWe should have a link to the actual contributing documentation in the README as opposed to the JavaScript compilation/setup document.\n :+1: \n Looks good! Thanks @captainsafia and @takluyver. :sunny: \n","Woo, Travis passed first try without needing a kick.\n Nice find. Let's see what happens!\n BTW, I found it confusing checking this, because while zmq streams have a `.closed()` method, sockets have a `.closed` property. I guess neither can really be changed now, but it is unfortunate.\n That's exactly what caused it. The ZMQStream API, and thus `.closed()`, is inherited from tornado's IOStream.\n Doh. \n\nCould we make `channel.closed` a property that return a callable with `__bool__` and `__zero__` that raise an exception ? It should prevent most misuses. \n I don't think we as Jupyter should create a subclass just to do that. It might be reasonable to do in pyzmq because it's so easy to confuse these. It is rather special-casing, though.\n Good sleuthing. Any objection to adding a comment on ZMQStream API `closed()` inherited from tornado's IOStream to prevent future devs from changing to sockets `.closed` property?\n > It might be reasonable to do in pyzmq because it's so easy to confuse these\n\nYes, that was my though. The discussion started here, so it seemed more relevant. \nAnd yes it is special casing, but I just want to consider the possibility. \n\n> Any objection to adding a comment on ZMQStream API closed() inherited from tornado's IOStream to prevent future devs from changing to sockets .closed property?\n\nNo objection. But I'm not sure it's useful. It's is inherently obvious from the doc wether it is a property or a method, the hard part is when you misuse it in actual code. \n @Carreau I completely agree for the Documentation. By comment, I meant a comment in the actual code ;-)\n","Should be fixed by #1139, removing the conditional logic for running npm/bower. It's not worth saving 1-2 seconds that npm/bower no-ops take. I think this used to take longer and/or require a network connection.\n",":+1:!\n Travis failures:\n\n```\n      File \"/tmp/pip-build-zy691q2m/notebook/setupbase.py\", line 506, in run\n        targets.extend(js.targets)\n      File \"/opt/python/3.5.1/lib/python3.5/distutils/cmd.py\", line 103, in __getattr__\n        raise AttributeError(attr)\n    AttributeError: targets\n```\n Thanks!  This is great!\n","Did you mean to milestone this 'no action'?\n Nope, just missed.\n","Duplicate of #1003, fixed by #1113. This will be fixed in 4.2.\n","Thanks for opening this issue, @rlabbe.\n\nI'm unable to reproduce the scrolling that happens when you interact with the horizontal slider. What version of `ipywidgets` are you running?\n Version 4.1.1. But that is just an example, not the underlying problem. For example, earlier today I was editing a markdown cell. When I pressed ctrl+enter to execute it, the entire cell scrolled off screen. \n I am noticing some unexpected scrolling behavior both when executing a cell and when interacting with a widget:\n- When I execute a cell, it scrolls down so that the code that was just executed is no longer visible\n- When I interact with a widget, it scrolls to the top of the page despite the code and \n  output being fully visible\n\nMy takeaway: The \"jump to scroll position\" behavior needs polishing. It may be worth trying to remove this behavior (for executing cells) to compare UX. \n\nScreenshot:\n\n![screenshot](http://g.recordit.co/nJkuNhdsXo.gif)\n\ncc @ellisonbg \n","@minrk Thanks! Updated code.\n Thanks!\n","There are various `application/` things that are going to be valid to open in the editor. I'm not sure what the best way to handle that is. One way is to remove the need to guess by adding an explicit `edit` link, rather than trying to be clever about what a single link should do.\n Perhaps both \"edit\" and \"raw\" links would be appropriate.\n Yeah, there was a similar issue for json files recently. I think adding an explicit way for the user to open any file in the editor makes sense (perhaps with a blacklist of mimetypes where we know that's not useful, like `image/png`?)\n The edit page should behave sensibly if you give it an image/png (\"I couldn't decode ...\"),  if we want to be lazy about the edit link.\n Or create a new window displaying the image.  We have the information needed to display common image types:\n\nhttps://github.com/jupyter/jupyter-js-plugins/blob/master/src/imagehandler/plugin.ts#L42\nhttps://github.com/jupyter/jupyter-js-plugins/blob/master/src/imagehandler/plugin.ts#L92\n > Yeah, there was a similar issue for json files recently.\n\nMakes sense that that would happen.\n\n>  I think adding an explicit way for the user to open any file in the editor makes sense (perhaps with a blacklist of mimetypes where we know that's not useful, like image/png?)\n\nI think the implementation I'm gonna go for is placing a button on the file if and only if it is editable. That way we avoid the user having to make a bad choice and the UI is cleaner.\n\nDo we want to close this and start over or merge and I can submit another PR?\n I think start over - I don't think there's much value in fixing it for specific special cases.\n\n> placing a button on the file if and only if it is editable\n\nHow are you planning to decide what's editable? The bigger problem is that there's no reliable way of knowing what's editable without reading the files.\n I think also having an explicit way to \"raw load\" any file (e.g. what happens currently when you click the link to a JavaScript file) would also be helpful, similar to how GitHub provides both \"raw\" and \"edit\" (pencil icon) buttons.\n\n<img width=\"251\" alt=\"github-file-buttons\" src=\"https://cloud.githubusercontent.com/assets/194260/13327193/7bd58508-dbae-11e5-9d5e-0a446cfcfdfd.png\">\n\nObviously, not all of those ^ buttons make sense for Jupyter notebooks, but something like that.  It would be important that raw access provide/preserve the appropriate mimetype for any given file.\n\nIf one chooses to click the edit button for a file that the editor can't load, I imagine there's some type of exception that the editor can/does throw when it tries to load it, which could be caught and an appropriate error-message displayed, superimposed on the editor-area of the edit page (instead of the file-folder navigation page).\n\nI think this would also lend itself to the editor context being more pluggable, e.g. it could be possible at some point (via custom configuration/scripts) to invoke an editor such as [DarkroomJS](https://mattketmo.github.io/darkroomjs/) rather than the default text editor when the file being loaded has an image mimetype. If logic in the the file-folder navigation context is trying to decide what's edit-able, it seems like it would just get in the way or require adjustments in multiple places.\n I like the view raw menu item idea.  We could default to rendering anything below a maximum file size limit in the editor with the view raw rendering button/menu item and anything above the limit would be handled by the browser directly.\n\nFor now, seems like @captainsafia 's PR is a good band-aid.  May we merge as-is while we continue to discuss?\n I'll open up a WIP PR to follow-up on some of the discussions that we had here. The PR will focus on fixing the edit functionality on the file tree. \n\nWhile I think the \"Raw\" button is a good feature for some, I think it should probably be provided as an extension to the Notebook instead of a baked-in feature. Most users are used to downloading raw files using File > Download interface and an extra button to accomplish the same thing might be confusing for some.\n\nSince making notebook extensions is my new obsession, I opened up a repository for it [here](https://github.com/captainsafia/raw-button). I think I should have something for you by Thursday night, @michaelsbradleyjr.\n","Good changes. Thanks @julienr :surfer:\n","Thanks @minrk !  Was there an issue associate with this?\n Yup, I mentioned it above, but maybe it wasn't clear: delete had stopped working because of the change to clear selection after taking an action, since delete calls shutdown first, which clears `that.selection`. Then, by the time the delete action actually fired, `that.selection` was empty, so there were no items to delete.\n Ah, no I meant a GitHub issue #\n Oh, no. Reported on gitter.\n","I am having a quick look at it and think I can make a PR to handle it, if it can be useful.\n\nI am wondering what is the best implementation:\n- Either to check for the `trusted` status of the notebook, and display a banner on top of the page, as described initially in this issue.\n- Or handle it at the `OutputArea` level (https://github.com/jupyter/notebook/blob/932f85c7593b2eada7a2095bd1f30d3f6ea48115/notebook/static/notebook/js/outputarea.js#L558) and append a banner in sanitized output areas.\n\nWhat do you think?\n If you would like to mock up an example of a better UI for untrusted output, that would be great! My first inclination would be the single global indicator, not per-output.\n\ncc @ellisonbg @cameronoelsen \n I added a trusted/not trusted indicator (checkmark or cross) for notebooks in the [python-markdown](https://github.com/ipython-contrib/IPython-notebook-extensions/tree/master/nbextensions/usability/python-markdown) extension:\n![](https://raw.githubusercontent.com/ipython-contrib/IPython-notebook-extensions/master/nbextensions/usability/python-markdown/trusted.png)\n\nNot saying it should be done like this, but it might give an idea how it could looke like.\n :+1: This looks like the perfect thing to do for me. @juhasch Maybe you want to handle a PR yourself? or want me to extract it from your extension?\n You are welcome to strip out the indicator an make a PR for the notebook.\n UI is far from perfect, but I started a PR at https://github.com/jupyter/notebook/pull/1293.\n\nI think we can discuss there of UI improvements. Thanks!\n Merged https://github.com/jupyter/notebook/pull/1658#issuecomment-237954619\n\nThanks @Phyks for your contribution. \n","Ping @ccordoba12 - have you ever seen anything like this?\n\n@raminus if you have more issues with the qtconsole, there's a separate [jupyter/qtconsole](https://github.com/jupyter/qtconsole) repo to file tickets on. We can try to debug this one here, though.\n Nop. Pinging @stonebig who is the WinPython maintainer.\n @takluyver Thank You for your attention. I am long time ipython/jupyter user but this is first time when I stumbled on a problem with I couldn't solve using some internet search engine and time. So I am very sorry for misplaced my Issue but I am not quite acquainted with organisation here.\n hi @raminus \n\nLet's try a few things:\n- maybe you need to reboot ==> please, reboot and retry,\n- maybe you installed WinPython as admin, and use it as mere end user ==> copy your winpython in C:\\Users*_[your profile]_*\\Documents\\WinPythonTest and retry with that displaced one (on this last one, we may experiment some alternative launch method https://github.com/winpython/winpython/issues/262)\n- retry with Continuum Io anaconda,\n\nIf no progress so far, to have a better clue you may provide:\n- your Operating System (XP and Vista are R.I.P.),\n- provide a \"pip list\" result,\n- explain: what did formerly work on your PC, as you were already a IPython/Jupyter user.\n Hello @stonebig thank you for your reply. I see now that I don't explain whole actions I done to repair this problem.\n\nFirst I explain my system configuration. I am using Windows 7 Ultimate 64 bit operating system with Service Pack 1, for python I used WinPython 3.4.3.6 64 bit with Qt5 for quite some time with is laying on C drive only extra library I use is nptdms, pyDOE installed via pip installer.\n\nSecond I mechanical engineer on technical university typically use python for data processing of lab result. For example we record cutting force in girding process using National Instruments solutions an in result I get TDMS file with data. And using python I run fast furrier transformation, data filtering, linearisation of signal and other different things for signal processing.\n\nI also use python for creating mathematical models using regression based on recorded data. And to prepare research plans using pyDOE. I also use python for some other thing won't worth mention, like RaspberryPi programming etc.\n\nProblem occurred when I try to read data from oscilloscope. I have 10M csv file with I try to read using `numpy.genfromtxt(\"DS0001.csv\")` but I forget to use `rowskip=16` so I stop using button showed on picture below. And next i restart kernel.\n![2016-02-26_11h59_23](https://cloud.githubusercontent.com/assets/17483620/13351524/6fb160a6-dc87-11e5-8b7d-26a9c79e4b7b.png)\n\nAnd after this I experience problem showed in original post.\n\nNow I describe what I done to solve a problem.\n1. I of course restart PC. And try run it again, but without success.\n2. I download new version of WinPython 3.5.1.2 64bit and unpack it to `C:\\Users\\mark\\WinPython 3.5.1.2' and try to run Spyder form this instance with empty IPython window. so I run`jupyter qtconsole --debug` with result similar like in original post but different network ports.\n3. I suspect that maybe is something wrong with Qt but demo programs are working.\n4. I try if network ports are open using `netstat -a` ports are in LISTENING state and ESTABLISHED. To check if everything is OK I try to disable Kaspersky firewall, but it does not help.\n5. I suspect then in some configuration files there is some problem. So I create separate system user with admin rights  and unpack WinPython in download folder and run here also without result.\n6. So I go back to original user account and try to run different version with i used before I unpack WinPython 3.3.5.0 64bit and try to run spyder with some IPython output but also with no prompt. Like showed on picture below.\n   ![2016-02-26_12h25_03](https://cloud.githubusercontent.com/assets/17483620/13351533/8831d2be-dc87-11e5-85da-253ef4e8e38a.png)\n7. I copy WinPython 3.5.1.2 to `C:\\Programs\\` where I typically store Python instance, and using windows command line I try to reinstall jupyter with command `pip uninstall jupyter` and `pip install jupyter` but after this I still don't have prompt.\n8. When I started learning python few years back I started with python(x,y) package, but it don't had 64bit and python 3 so I switch to WinPython. So i think to try other python pack. Yesterday I find an install try to install `Anaconda3-2.5.0-Windows-x86_64` but in this instance of python also when I run `jupyter qtconsole` don't get prompt.\n9. I start to wonder maybe some libraries are broken so i try update `Microsoft Visual C++ 2010 Redistributable Package (x64) SP1` but also with no result.\n\nSo I wrote original post with asking for help.\n\nIn respond to @stonebig i put `pip list` result.\n\n> C:\\Programs\\WinPython\\python-3.5.1.amd64>pip list\n> adodbapi (2.6.0.7)\n> alabaster (0.7.7)\n> astroid (1.4.4)\n> astroML (0.3)\n> Babel (2.2.0)\n> backports-abc (0.4)\n> baresql (0.7.3)\n> bcolz (0.12.1)\n> beautifulsoup4 (4.4.1)\n> blaze (0.9.1)\n> blosc (1.2.8)\n> bloscpack (0.9.0)\n> bokeh (0.11.1)\n> Bottleneck (1.0.0)\n> bqplot (0.5.1)\n> brewer2mpl (1.4.1)\n> castra (0.1.6)\n> certifi (2015.11.20.1)\n> cffi (1.5.0)\n> click (6.2)\n> cloudpickle (0.1.1)\n> colorama (0.3.5)\n> cvxopt (1.1.7)\n> cx-Freeze (4.3.4)\n> cycler (0.9.0)\n> cyordereddict (0.2.2)\n> Cython (0.23.4)\n> cytoolz (0.7.4)\n> dask (0.7.6)\n> datashape (0.5.1)\n> db.py (0.4.4)\n> decorator (4.0.6)\n> dill (0.2.4)\n> docopt (0.6.2)\n> docutils (0.12)\n> emcee (2.1.0)\n> Flask (0.10.1)\n> Flask-Cors (2.1.2)\n> formlayout (1.1.0)\n> geopy (1.11.0)\n> greenlet (0.4.9)\n> guidata (1.7.5)\n> guiqwt (3.0.2)\n> h5py (2.5.0)\n> holoviews (1.4.1)\n> html5lib (0.9999999)\n> husl (4.0.3)\n> idlex (1.13)\n> ipykernel (4.2.2)\n> ipyparallel (5.0.0)\n> ipython (4.1.1)\n> ipython-genutils (0.1.0)\n> ipython-sql (0.3.7.1)\n> ipywidgets (4.1.1)\n> itsdangerous (0.24)\n> jedi (0.9.0)\n> Jinja2 (2.8)\n> joblib (0.9.4)\n> jsonschema (2.5.1)\n> julia (0.1.1.8)\n> jupyter (1.0.0)\n> jupyter-client (4.1.1)\n> jupyter-console (4.1.0)\n> jupyter-core (4.0.6)\n> Keras (0.3.1)\n> lazy-object-proxy (1.2.1)\n> llvmlite (0.8.0)\n> lmfit (0.9.2)\n> locket (0.2.0)\n> lxml (3.5.0)\n> Markdown (2.6.5)\n> MarkupSafe (0.23)\n> matplotlib (1.5.1)\n> mistune (0.7.1)\n> mpld3 (0.2)\n> multipledispatch (0.4.8)\n> mysql-connector-python (2.0.4)\n> nbconvert (4.1.0)\n> nbformat (4.0.1)\n> netCDF4 (1.2.2)\n> networkx (1.10)\n> nltk (3.0.5)\n> nose (1.3.7)\n> notebook (4.1.0)\n> numba (0.23.1)\n> numexpr (2.4.6)\n> numpy (1.10.4)\n> numpydoc (0.5)\n> oct2py (3.4.0)\n> odo (0.4.1)\n> pandas (0.17.1)\n> pandas-datareader (0.2.0)\n> param (1.3.2)\n> partd (0.3.2)\n> path.py (8.1.2)\n> patsy (0.4.1)\n> pep8 (1.7.0)\n> pg8000 (1.10.2)\n> pickleshare (0.6)\n> Pillow (3.1.1)\n> pip (8.0.2)\n> pkginfo (1.2.1)\n> prettytable (0.7.2)\n> prompt-toolkit (0.57)\n> psutil (3.4.2)\n> ptpython (0.28)\n> PuLP (1.6.1)\n> py (1.4.31)\n> PyAudio (0.2.9)\n> pybars3 (0.9.1)\n> pycparser (2.14)\n> pyflakes (0.9.2)\n> Pygments (2.1)\n> pylint (1.5.4)\n> pymc (2.3.6)\n> PyMeta3 (0.5.1)\n> pymongo (3.2)\n> pyodbc (3.0.10)\n> PyOpenGL (3.1.1b1)\n> pyparsing (2.0.7)\n> PyQt4 (4.11.4)\n> PyQtdesignerplugins (1.1)\n> pyqtgraph (0.9.10)\n> PyQwt (5.2.1)\n> pyreadline (2.1)\n> pyserial (3.0.1)\n> pystache (0.5.4)\n> pytest (2.8.5)\n> python-dateutil (2.4.2)\n> python-hdf4 (0.9)\n> PythonQwt (0.5.5)\n> pytz (2015.7)\n> pywin32 (220)\n> PyYAML (3.11)\n> pyzmq (15.2.0)\n> QtAwesome (0.2.0)\n> qtconsole (4.1.1)\n> QtPy (0.1.3)\n> redis (2.10.5)\n> reportlab (3.2.0)\n> requests (2.9.1)\n> requests-toolbelt (0.5.1)\n> rope-py3k (0.9.4.post1)\n> rpy2 (2.7.8)\n> Rx (1.2.4)\n> scikit-image (0.11.3)\n> scikit-learn (0.17)\n> scilab2py (0.6)\n> scipy (0.17.0)\n> seaborn (0.7.0)\n> setuptools (19.6.2)\n> simplegeneric (0.8.1)\n> simplejson (3.8.1)\n> six (1.10.0)\n> snowballstemmer (1.2.1)\n> Sphinx (1.3.5)\n> sphinx-rtd-theme (0.1.9)\n> spyder (3.0.0.dev0)\n> SQLAlchemy (1.0.11)\n> sqlite-bro (0.8.10)\n> sqlparse (0.1.18)\n> statsmodels (0.6.1)\n> sympy (0.7.6.1)\n> tables (3.2.2)\n> Theano (0.7.0)\n> toolz (0.7.4)\n> tornado (4.3)\n> traitlets (4.1.0)\n> twine (1.6.5)\n> twitter (1.17.1)\n> ViTables (2.1)\n> wcwidth (0.1.6)\n> Werkzeug (0.11.3)\n> wheel (0.26.0)\n> winpython (1.3)\n> wrapt (1.10.6)\n> xarray (0.7.0)\n> xlrd (0.9.4)\n> XlsxWriter (0.8.4)\n> You are using pip version 8.0.2, however version 8.0.3 is available.\n> You should consider upgrading via the 'python -m pip install --upgrade pip' command.\n\nThere is no npTDMS and pyDOE because it's clean install.\n possible hints:\n- you may be short on RAM or DISK: launch taskmgr.exe and check the bottom right figure is below 85% when you do the problematic manipulation\n- maybe go to c:\\users\\Mark and rename the existing \".jupyter\" and \".ipython\"  directories\n- maybe you have two screens (then unplug all monitors and retry)\n- maybe on your WinPython-3.5.1.2\\Scripts (where you can see `env.bat`):\n  - create the following `qtoncsole_test.bat`script:\n\n```\n@echo off\nrem to have WinPython working in a local account\ncall %~dp0env.bat\n\nrem ******* Classic WinPython *******\nrem set JUPYTER_DATA_DIR=%WINPYDIR%\\..\\settings\nrem set HOME=%WINPYDIR%\\..\\settings\n\nrem ******* Student WinPython *******\nset JUPYTER_DATA_DIR=%HOMEDRIVE%%HOMEPATH%\\Documents\\WinPython%WINPYVER%\nset HOME=%JUPYTER_DATA_DIR%\n\nif not exist \"%HOME%\" mkdir \"%HOME%\"\nif not exist \"%HOME%\\Notebooks\" mkdir \"%HOME%\\Notebooks\"\nif not exist \"%HOME%\\Notebooks\\docs\" xcopy /i \"%WINPYDIR%\\..\\Notebooks\\docs\\*.*\" \"%HOME%\\Notebooks\\docs\"\n\nif not exist \"%HOME%\\.spyder-py3\"  mkdir \"%HOME%\\.spyder-py3\"\nif not exist \"%HOME%\\.spyder-py3\\workingdir\" echo %HOME%\\Notebooks>\"%HOME%\\.spyder-py3\\workingdir\"\n\nrem ******* make cython use mingwpy part *******\nset pydistutils_cfg=%HOME%\\pydistutils.cfg\n\nif exist \"%pydistutils_cfg%\"  goto after_mingwpy\n\necho [config]>%pydistutils_cfg%\"\necho compiler=mingw32>>\"%pydistutils_cfg%\"\necho [build]>>\"%pydistutils_cfg%\necho compiler=mingw32>>\"%pydistutils_cfg%\"\necho [build_ext]>>\"%pydistutils_cfg%\"\necho compiler=mingw32>>\"%pydistutils_cfg%\"\n\n:after_mingwpy\n\ncd/D \"%HOME%\\Notebooks\"\n\"%WINPYDIR%\\scripts\\jupyter-qtconsole.exe\"   %*\n```\n- then launch it\n\nIf all fails:\n- then maybe you have something not yet usual on your PC, like a 800x600 or 4000x2000 screen.\n- check that jupyter-console.exe works: launch \"WinPython Command Prompt.exe\" and type \"jupyter-console\"\n Hello @stonebig thank You for involvement.\n\nI cannot bring exact state of memory and when problem first time occurred. But it is highly unlikely to lack in Disk space an Memory, because I typically have around 150GB of free space on system drive and installed 24GB of RAM Memory (there is taken around 25% typically). \nI develop this script for oscilloscope data processing right now using basic python terminal in Spyder and it read this 10MB file with no problem. On picture bellow I present how much memory it takes right now.\n ![2016-02-26_15h19_34](https://cloud.githubusercontent.com/assets/17483620/13354685/f0ea4d44-dc9c-11e5-85f5-dee013c17576.png)\n\nIn user directory I rename `.jupyter` to .jupyter-backup`and`.ipython`to`.ipython-backup`and run`jupyter qtconsole` with no success.\n\nOn picture below it's result of running Your `qtoncsole_test.bat` script.\n![2016-02-26_15h00_39](https://cloud.githubusercontent.com/assets/17483620/13354742/35a2531e-dc9d-11e5-933b-c98499a79450.png)\n\nDo you have other suggestions?\nI consider reinstalling operating system but it take to long right now to reinstall all my CAD/CAM/CAE software, so I am trying to avoid it.\n last ideas:\n- maybe it works, but it's white characters over white background,\n- try with a 32 bit WinPython, if it's a system dll issue, you may bypass it by going 32 bit.\n I also think about white font on white background but I try to change font colour in Spyder but without result. I try in Qt console `Edit -> Select All` and `Edit -> Copy` and get error like on picture below. How I understand it only occurred because console wos empty.\n![jupyter 64bit](https://cloud.githubusercontent.com/assets/17483620/13361205/9114650a-dcbd-11e5-9c41-0393c0aa2f60.png)\n\nI download 32bit WinPython and try to run with no positive result like it shown below.\n![jupyter 32bit](https://cloud.githubusercontent.com/assets/17483620/13361234/b0e30760-dcbd-11e5-9ac0-0c76614171aa.png)\n\n@stonebig thank You very much for help.\nI'm going to reinstall operating system when I find some free time.\n last suggestion: put your question on stackoverflow\n\nthere is also this strange suggestion to remove pyreadline https://github.com/ipython/ipython/issues/3374/\n\nI would try also once with internet disconnected.\n I'm using Windows 10. I have a problem like this, but not exactly the same.\nI can get qtconsole work by run \"jupyter qtconsole\" in cmd.\nBut by running `%qtconsole` in a notebook, I just got a frozen window like this issue.\n\nBesides, I always got this message in cmd when running a notebook: `[W 09:23:01.022 NotebookApp] Saving untrusted notebook somename.ipynb`.\n Thank for everyone's help.\nI think my problem might be the same.\n\nUntil the time I commented 4 days ago, `%qtconsole` works in my laptop but not my another pc. Now my laptop gets the same problem after a `conda install -c spyder-ide spyder==3.0.0b2` and automaticlly updated a lot of packages.\n\nAnd I got this message from the cmd in my two computers:\n`[W 07:40:51.786 NotebookApp] 404 GET /nbextensions/widgets/notebook/js/extension.js?v=20160424073547 (127.0.0.1) 3.00ms referer=http://127.0.0.1:8888/notebooks/some.ipynb`\n I'm pretty sure the 404 message is unrelated to the Qtconsole problems. But other than that, I've no idea how to debug it.\n OK, I understand, it is not something can be reproducted. I don't even know where to look into.\nI think I can live with this.\nThanks for your help.\n Greetings, I have the same problem of %qtconsole magic in jupyter notebook showing a blank qtconsole screen. \n\nI've also tried: jupyter console --existing='<information given in %connect_info magic' which yields same blank screen.\n I downgraded qtconsole to 4.0.0 and it worked. Not sure if I'm content with downgrading though.\n I see the blank screen, but if I hit enter, it shows me a prompt. I'm not currently sure what's going wrong, but that at least seems easier than downgrading stuff.\n I saw the same issue, but I confirm that after hitting enter a prompt appears.\n @takluyver @tngTUDOR I've encountered the same problem, and hit ENTER works for me.\n\n I'm using Jupyter qtconsole within Anaconda3 on macOS. The problem happened after I updated Anaconda. The current environment  is Python 3.5.2, IPython 5.1.0 and Jupyter 4.2.0. \n\nIf I run `jupyter qtconsole --debug` the output show something like this: `[JupyterQtConsoleApp] Connection File not found: /Users/dwn/Library/Jupyter/runtime/kernel-49866.json`, however this file is just in that path.\n\nStill have no idea about the problem. \n Hi, so I had the same problem, then for some time hitting enter resolved problem BUT NOW IT'S ON AGAIN. \r\nAnd even hitting enter is not helping.  OK I get it. \r\nThe problem is because of Anaconda. I was typing %qtconsole in jupyter notebook that had python kernel that was not activated. I changed python kernel in jupyter notebook to  'Python [conda root]' and qtconsole is squiky fresh and working. @coconutattitude - Changing the python kernel in Jupyter notebook to 'Python [conda root]' worked for me. Qtconsole is back, thanks man! :D I thought I'd just add here, that after upgrading from qt4 to qt5, I now have this issue on Mac. Running `conda install pyqt=4` fixes the issues (let's me use qtconsole), but under qt4.\r\n\r\nUnder qt5, hitting enter does create a `In [1]:` prompt (and lets me use the qtconsole), but to inexperienced users, they will assume it's broken. This will be fixed in the next release of qtconsole (version **4.3**).","Can you try replacing `localhost` in the URL with `127.0.0.1`?\n Thanks for your reply. I did the same, it works now. Just one issue, it\ndoesn't work on chrome. I am using notebook on Firefox.\n\nThanks.\nArvind\nOn 26-Feb-2016 11:30 PM, \"Thomas Kluyver\" notifications@github.com wrote:\n\n> Can you try replacing localhost in the URL with 127.0.0.1?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1148#issuecomment-189397832.\n When you say it doesn't work on Chrome, are you seeing the same issue, or is it not working in a different way?\n\nDo you have a proxy server configured? If so, you should configure it not to use the proxy for localhost or 127.0.0.1. Here are the settings in Firefox:\n\n![screenshot from 2016-02-27 09-34-40](https://cloud.githubusercontent.com/assets/327925/13372276/6fa10900-dd35-11e5-88db-c5c5d80aa812.png)\n\nI think Chrome might use the system proxy config.\n Thanks a lot. :) It works everywhere now.\n\nOn Sat, Feb 27, 2016 at 3:07 PM, Thomas Kluyver notifications@github.com\nwrote:\n\n> When you say it doesn't work on Chrome, are you seeing the same issue, or\n> is it not working in a different way?\n> \n> Do you have a proxy server configured? If so, you should configure it not\n> to use the proxy for localhost or 127.0.0.1. Here are the settings in\n> Firefox:\n> \n> [image: screenshot from 2016-02-27 09-34-40]\n> https://cloud.githubusercontent.com/assets/327925/13372276/6fa10900-dd35-11e5-88db-c5c5d80aa812.png\n> \n> I think Chrome might use the system proxy config.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1148#issuecomment-189612587.\n Great!\n","The base jupyter notebook image is meant to be standalone with the core notebook features. For docker images that include fortran, scipy, etc. check out [docker-stacks](https://github.com/jupyter/docker-stacks).\n @rgbkrk Doh! Sorry for overlooking. :blush: \n That's ok. We're missing discoverability of docker-stacks from this Dockerfile. Would you mind adding a comment to the top of the Docker file referencing Docker stacks?\n Done. \n\nComment added to line 5 + removed both initial additions from the python layer.\n\nThanks again.\n Awesome. Thank you!\n","With my time machine, this is fixed by #114.\n Thanks I'll test this tomorrow.\n Thanks. Now it works. the config file is generated in `~/.jupyter/jupyter_notebook_config.py`.\n","Yes, there are plan. \n\nIt's not super trivial and will require massive changes in browser javascript and on server side. \n\nThere are many steps that can **help**. IMHO:\n1. separate in memory representation of notebook from **on disk**. \n2. have the server keep an in memory version that have more temporary informations that the on disk one. Like a map from kernel messages to cells. \n3. refactor the js to no t register callbacks, but a mapping that in (2)\n4. design a API that store/load this mapping from the js to the server. \n\nThat would allow **some** messages to still work after page reload. \nMore complex things like messages that arrives while the browser is closed might not be able to be persisted. \n \ud83d\udc4d \ud83d\ude38 \n This feature would be great!  I was expecting this feature to be there for sure, the \"Running\" tab in the dashboard is really confusing, looks like you will be able to click there and reattach to a running notebook... :disappointed:\r\n\r\nIs there any hacky way of doing so or is all hope lost to recover the output of a running notebook after closing the tab?\r\n\r\nSuch a pity I cannot use jupyter for my purposes. I hope it is implemented in the near future! Similar issue as https://github.com/jupyter/notebook/issues/641 ?\r\n\r\nI'm a bit confused here. What is the function of the Kernel\u2192Reconnect feature ? I thought this would show again the computation in progress to my output.\r\n\r\nI'm having lot of issues with my chrome pages crashing from time to time, not seeing previously executed cells output displayed after a refresh, seeing memory usage multiplied after rerunning those cells, etc..\r\n\r\nAlso, when asking for multiple cells to be executed one after the other, then refreshing the page, why does it look like the execution was cancelled ?\r\n > I'm a bit confused here. What is the function of the Kernel\u2192Reconnect feature ? I thought this would show again the computation in progress to my output.\r\n> \r\n> I'm having lot of issues with my chrome pages crashing from time to time, not seeing previously executed cells output displayed after a refresh, seeing memory usage multiplied after rerunning those cells, etc..\r\n> \r\n> Also, when asking for multiple cells to be executed one after the other, then refreshing the page, why does it look like the execution was cancelled ?\r\n\r\nAll of these are inherent nature to a few of the pieces we across the stack.\r\n\r\nZMQ act as a message queue, with subscriber. If a result arrives while a subscriber is not subscribed, then there is no chance to get. So in the case of:\r\n\r\n   - execute `sleep 5, print('hey')`\r\n   - close tab\r\n   - hey is \"printed\" nowhere\r\n   - reopen tab. \r\n\r\nThe \"hey\" is gone. \r\n\r\nThe second thing is that when you press shift-enter the callback that \"listen\" for the reply in in the Javascript context, somewhere we have no control over. When you refresh the page, the context is gone. We can't do anything about it. The you can reconnect, but some messages will have no remaining handler. So result don't display cause they don't know where to go.\r\n\r\nYou have to remember that current notebook is based on the websocket architecture with first version released on 2012,  using websockets. Websockets have been standardized in 2011 ( ! ), and notebook was brewing  for a few month (also we are python programmers, and the team was ~ 6 peoples including 3 in their PhD...), so we made non optimal decisions in the long term, but we kind of couldn't imagine what the future would be, and what would be available. \r\n\r\nSome of the solutions to these problems are easy to handwave, but require much more bandwidth than we have, and are harder to get right that it appears at first, especially without breaking APIs.\r\n\r\nIf some of you want to give it a try, even just small steps toward the solution, they we'll be happy to show you some of the changes that are necessary and key pieces to implement to make the behavior maybe not perfect; but at least much better. \r\n","You are inherently using matplotlib in the \"wrong\" way to have multiple figures. \n\n> it does not show up below the second cell, as expected, but replaces the graph from the first cell.\n\nActually it is expected to plot on the first cell.\n\nEither you use the statefull pyplot interface (what you are doing), which implicitly plot on the currently open window/fig/axes ; here the one in the first cell. \n(`%matplotlib inline` is a specific case where this is not visually the case for memory leak reasons.)\n\nThe idiomatic way to plot using matplotlib is to create a couple of `fig/axes` using `plt.subplots`, and then use the plot methods of these axes:\n\n```\n%matplotlib notebook\n\nimport matplotlib.pyplot as plt\n```\n\n```\nfig, axes = plt.subplots()\naxes.plot(range(10))\n#figure one\n```\n\n```\nfig, axes = plt.subplots()\naxes.plot(range(10))\n#figure two\n```\n\nThis is in general much more flexible and reusable than using the statefull interface. And here as you are plotting on an explicit axis you **can**have multiple opened plotter. It is also necessary when for example you get a 2 by 2 grid of  figures to plot on the right one, try for example:\n\n```\nfig, ((a,b),(c,d)) = plt.subplots(2,2)\na.plot(x, sin(x))\nb.plot(x, cos(x))\nc.plot(x, tan(x))\nd.plot(x, tanh(x))\n```\n\nI'm closing the issue as this is not a bug, and is expected, but feel free to continue asking question.\n @Carreau thanks a lot for these explanations. I recently switched from `%matplotlib inline` to `%matplotlib notebook` and was used to having different figures even with the stateful pyplot interface, and came across many notebooks using `matplotlib` the wrong way, but it was actually working due to this memory leak \"feature\".\n\nSorry for the noise\u2026\n No problem, feel free to ask if you have any more questions.\n You can also close the figures programmatically at the end of each cell - this is what the inline backend does by default. I haven't tried it, but something like `plt.gcf().close()` should do it.\n This behavior forces you to use one of two valid MPL APIs, and if you're calling an external function that uses the plt one, you're out of luck. Both APIs are awkward, but the fig, ax one required to make the notebook backend work is verbose and requires boilerplate.","IPython doesn't have any way to do that directly, but if it's a separate file and you don't want to access its variables inside IPython, you can run it in a subprocess using Python's normal subprocess functionality. And if you do want it to be in the same process, you can run a thread (with the `threading` library), being careful about anything that is shared between threads.\n In system, I run \"./file &\", then \"tail log\" .\nis it possible in jupiter notebook, \"%run file\" in cell, and \"!tail log\" in next cell ?\n Not using `%run`. You can run it using the subprocess module, in which case it won't block execution.\n Thanks @takluyver , you help me figure out an useful way.\nThe subprocess module solve my problems.\nThanks a lot~~\n\nGrace Lee\n Great, I'm glad that worked for you.\n",":+1: \n Failure appears unrelated:\n\n```\nFAIL undefinedCell 0 has no output #0 (0 total)\n#    type: assert\n#    file: /home/travis/build/jupyter/notebook/notebook/tests/notebook/roundtrip.js:51\n#    code: var result = this.get_output_cell(0);\n#    subject: false\nTimeout for http://localhost:8888/a@b/\nIs the notebook server running?\nwait_for_output timed out on cell 1, waiting for 0 outputs .\ncell prompt was :'no cell'.\n```\n Failure is unrelated. We've got a few races in tests when things are slow to load.\n","@jasongrout is this still an issue? Can you turn your fix into a PR?\n Fixed by #1917","Someone could write a kernel, or an IPython extension, to do things like that. However, threads and shared memory bring up a whole host of issues (not just the GIL), and I don't think we have any plans to do anything like that in the project.\n Ok, I understand this may not fit in development plans for Jupyter. I would still think it could be useful, maybe as part of a separate kernel or iPython extension.\n\nActually, my typical use case for Jupyter + iPython kernel is to run scientific computation. I am then looking forward having some features made easily accessible:\n- Distributed computation, to dispatch evaluation of notebooks or cells on different kernels / machines, without having to think about it.\n- A backup of the state of the notebook, to be able to recover from a kernel failure (when running out of memory for instance) and avoid having to backup data on my own.\n- As part of it, some abstraction from the low-level interfaces and stuff like threads, to write code more easily and quickly.\n\nI am not sure if this is the typical use case for Jupyter, but some of the features are already implemented, with various stability, either in Jupyter or in extensions. I am wondering how much people would be interested in such features, especially as the one described in this issue.\n\nConcerning this issue particularly, I might have a look at kernels or writing iPython extension, if it can be of interest. I am particularly aware that threads and sharing memory is an open door for many additionnal issues, but some basic implementation may be doable, in my opinion. Especially if we either restrict this feature to very specific cases, in which we are sure there are no side effects, or let the user explicitly turn on the feature (in which case, he is responsible for it). Moreover, maybe it would be easier to do with some kernels rather than others (thinking in Julia for instance).\n There's an IPython project [ipyparallel](https://github.com/ipython/ipyparallel) to control multiple engines, but distributing computation without the user having to think about it is a hard problem. If you're interested in that area, have a look at [dask](http://dask.pydata.org/en/latest/).\n\nThere's a module called dill which can save your variables and things - it's an extension of Python's standard pickle module. It still can't handle everything, but it can do quite a lot. Another approach you can look into is checkpoint-restart, which saves an entire process to a file. Here's a presentation from a couple of years ago about doing this in Python: http://conference.scipy.org/proceedings/scipy2013/pdfs/arya.pdf\n Have a look also at https://github.com/dask/distributed you can get some nice introduction on [matt's blog](http://matthewrocklin.com/blog/work/2016/02/17/dask-distributed-part1). \n\nYou might also want to look at https://github.com/cloudpipe/cloudpickle beyond dill which can serialize more some object dill cannot. \n\nThe parallel computation is definitively not a Jupyter feature but a Python feature, and the way Python works it will be relatively hard to make it work magically. \n\nThe advantage of using things like Dask/Distributed/.. is also that it will work on non-jupyter environment, which is nice. \n\nIf you want to dive into the IPython kernel, we'll be happy to guide you and get feedback from API/Docs...\n Thanks for all the links and pointers to doc and modules! I already knew about `dill` which we discussed in another issue (or on the mailing-list, I am not sure at the moment). Will have a look at `cloudpickle` as well.\n\nThe ability to run in a non-jupyter environment is indeed really nice. My idea, and the reason I posted on Jupyter/notebook is that I think it would be really awesome to have something well integrated and packaged. One of the major feature of Jupyter notebook and iPython kernel is that it \"just works\", and gives a really user-friendly setup for advanced tasks, out of the box :)\n\nI think I will try to see what I can get from assembling all of this, and if it could be worth integrating further in Jupyter, _via_ extensions or custom kernels.\n While we want Jupyter & IPython to be usable and useful straight out of the box, they're never going to do everything you could want. There's a big ecosystem of different tools out there, and we don't want to try to subsume that all into Jupyter.\n Sure, but hopefully it could be made as easy as the current matplotlib integration: `pip install matplotlib` and `%matplotlib notebook` :)\n\nEDIT: Maybe this discussion should move to the mailing-list or similar, as it is now stated that this is a \"not notebook\" issue?\n Technically that kind of integration is easy enough to do - it's working out what interface makes sense that's hard.\n\nVenue: up to you, there's no particular problem with discussing it here. I set that milestone just because I don't think there's a specific notebook related issue to be fixed.\n","_Copied_ or _moved_? So long as it's not removed from the first cell, I think this is probably by design (though I can see how you could prefer either way).\n I see it being removed from the first cell. That means that e.g. a new `slide` merges with whatever role the previous cell had.\n OK, that does sound like a bug. The first cell from a split should certainly keep the metadata, whatever happens with the second.\n","To add to this, the \"(Busy)\" text also disappears if the notebook does an autosave or if I activate another cell, even though the kernel is still busy running another cell.\n I took a look at this issue, and I think the problem is that there's a function [here](https://github.com/jupyter/notebook/blob/41d6da235cbf3bcf6d7f818e11a066e0fd12ff8b/notebook/static/notebook/js/savewidget.js#L136) and another [here](https://github.com/jupyter/notebook/blob/41d6da235cbf3bcf6d7f818e11a066e0fd12ff8b/notebook/static/edit/js/savewidget.js#L113) that set the title when saving and both of those edit the title of the document without checking if the kernel is busy.\n\nPlace where the \"(Busy)\" is set is [here](https://github.com/jupyter/notebook/blob/41d6da235cbf3bcf6d7f818e11a066e0fd12ff8b/notebook/static/notebook/js/notificationarea.js#L264) but it gets overwritten as soon as the document is saved in those previously mentioned functions.\n","Yeah, probably a good idea to detect that.\nMight be tricky to get user interface right with autosave. \n\nThough, you should probably not move it while it's running. \n > Though, you should probably not move it while it's running. \n\nSure, but it happened to me that I had completely forgotten about this, moved the notebook and updated it afterwards in the open tab in my browser\u2026 and got into (minor) troubles :)\n This might also resolve a use case we have which Jupyter doesn't support:\n- we have a company-wide installation of Jupyter & JupyterHub with dockerspawner\n- per-user workspaces are in `Users/<username>/`\n- `Users/` is mounted as read-only in JupyterHub\n- users can only edit their own notebooks in `Home/` which is a read/write mount pointing to `Users/<username>/`\n\nUnfortunately in this setup, other users are unable to make copies of each other's notebooks from the read-only `Users/` tree into their read/write `Home/` tree, because Jupyter's `Make a copy...` function only creates a copy in the same folder as the original.\n\nHere's the relevant part from our JupyterHub configuration:\n\n``` python\nc.DockerSpawner.volumes = {\n    '/notebooks/Users/{username}': '/notebooks/Home',\n    '/notebooks/Shared': '/notebooks/Shared'}\nc.DockerSpawner.read_only_volumes = {\n    '/notebooks/Users': '/notebooks/Users'}\n```\n FYI @minrk re: JupyterHub\n","Works for me in both Firefox and Chrome.\n ``` javascript\nif (user === 'fperez') {\n    all_the_buggs.trigger();\n}\n```\n\n@fperez does it make a difference if you save immediately before hitting it?\n No kidding!!!\n\nBut yes, it does make a difference: if I save and close/halt immediately, it works (i.e. kernel killed and tab closed). If I try to close/halt a long-open nb, it kills the kernel but doesn't close the tab.\n That suggests it's to do with the dirty flag, which, when set, should show you a dialog to confirm navigation away from the page. Do you see any dialog when you hit close & halt? If not, when you make some changes and close immediately, does it let you, or does it prompt that you are going to lose unsaved changes?\n If I have unsaved changes it does prompt me. The only misbehavior I'm seeing is the failure to close the browser tab after the kernel shuts down.\n Can you check browser(s) version(s) where this happens?\n\nJust to reiterate: you do get the confirmation dialog, click \"Leave this page\", and then you stay on the page? That dialog is provided by `window.onbeforeunload`, which I _thought_ meant we weren't even allowed to keep you on the page if we wanted to.\n It's tricky to replicate, b/c it seems to only happen with notebooks that have been left open for a while, so they've been checkpointed already.\n1. If I have recent changes, then the 'do you want to save' dialog does pop up, and if I say \"leave\", I do go away as you describe.\n2. If I've saved manually, then the close happens as expected.\n\nBut I've seen multiple instances (so far on Chrome) where I'm left with a kernel-less but open notebook...\n\nAnyway, if it's an \"fperez special\", let's ignore it for now. I'll keep trying to find the conditions to trigger it...\n Is there any chance you have accidentally clicked \"Stay on this Page\" instead of \"Leave this Page\"? Because that's exactly what would happen: kernel is shutdown, but page close aborted, so you have a page open with no kernel.\n No, it happened multiple times, without the dialog coming out in those\ncases. It simply shut down the kernel and stayed on the page.\n\nOn Wed, Mar 2, 2016, 14:52 Min RK notifications@github.com wrote:\n\n> Is there any chance you have accidentally clicked \"Stay on this Page\"\n> instead of \"Leave this Page\"? Because that's exactly what would happen:\n> kernel is shutdown, but page close aborted, so you have a page open with no\n> kernel.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1159#issuecomment-191479648.\n If there's no dialog, then it's something else. We shutdown the session and hook up the close-window function as both a success and failure callback, so it must not be getting to that point. I'm not sure how that could happen, though, without the server hanging and never responding.\n This seems weird enough, and enough of a corner case, that I think it's OK if we just leave it for now, and try to debug it in-person when you guys visit. Let's not worry about it for now...\n And thanks for all the efforts!\n","> A new message, the first, (in blue) would be added, allowing the ~~server~~ [frontend] to ask the kernel if the static assets it knows about, associated with that kernel, is correct. The message would be a dict of static asset path and contents hashes.\n> \n> The same message in the opposite direction is the kernel's response. It would be some type of data structure, maybe a binary message, containing static asset paths and their contents, and a list of the static assets that can be deleted from the cache.\n\nI certainly like this approach. It makes sure that assets are based on the kernel runtime rather than associated with the overall notebook server (or other frontend).\n\nCan path be remote or local, depending on the author's implementation?\n It breaks the assumption that the kernel does not know it is in a notebook/js environment, and make it complicated to map kernel-path, to server-path, to frontend-path. \n\nThe Python packaging registry is not language agnostic. It forces each kernel(s) to reimplement a static-webserver, our server only act as a proxy.\n\nI can see a problem with identical-path  in many kernels. Once one is cached, it shadows other kernels resources. or you install a new version, and restart your kernel. You get the cached versions. \n\nKernel authors will never bother to implement delete messages.\n > It breaks the assumption that the kernel does not know it is in a notebook/js environment, and make it complicated to map kernel-path, to server-path, to frontend-path.\n\nIf you include the require bits, I'd say that's true. However, treating this as a resource query and response relative to the kernel does not make it coupled to the notebook. We'd want this for any other HTML based frontends, including [Hydrogen](https://github.com/willwhitney/hydrogen).\n\nI'm not in agreement about this using a Python packaging registry, as I think resources should be installed per kernel.\n\n> Kernel authors will never bother to implement delete messages.\n\nDon't you think that would effect their users negatively enough that eventually they would?\n The kernel knowing about static assets and telling the server seems problematic. I think if the kernel is being asked about the assets, it should be responsible for serving them, as well.\n > Don't you think that would effect their users negatively enough that eventually they would?\n\nNo they won't thay are developper, it work for them if they restart the server, which they do every 10 minutes. \n\n> We'd want this for any other HTML based frontends, including Hydrogen.\n\nNothing tell you that resources will be the same for hydrogen and the notebook.\n > I can see a problem with identical-path in many kernels.\n\nI don't expect this to be a problem. Any resource fetched from a kernel should necessarily be served from a kernel-specific path. So when kernel K is asked for resource R, the server maps it to `/K/R`, not `/R`, so kernels are not capable of collision with each other.\n\nI do think if we are going as far as making the Kernels responsible for static resources via messages, the most logical way to do that is to proxy requests to the Kernels themselves, and expect Kernels to run an HTTP server to serve the files. HTTP already has all the features we are describing here, I think.\n > A second new message (in red), would be added that would allow the kernel to invoke a require.js call in the front-end. This would eliminate the need of a notebook extensions list, and it's need to be configured. \n\nThis statement isn't true. nbextensions aren't limited to kernel-specific behavior. toc, slideshow, nbgrader, etc. would all not be addressed by the proposal, and continue to require nbextensions as it is.\n Hey guys, glad we are talking about this.  Here are my responses.\n\n@rgbkrk \n\n> Can path be remote or local, depending on the author's implementation?\n\nSorry!  I really should have clarified, \"path\" here means \"unique name\".  It can be whatever string the package author wants!\n\n@Carreau \n\n> It forces each kernel(s) to reimplement a static-webserver, our server only act as a proxy.\n\nThe only piece of the above that the kernel authors need to implement is the single message, in blue.\n\nIt's up to kernel authors to choose a mechanism equivalent to Python's entry points, or something that can be used as an alternative.\n\n> It breaks the assumption that the kernel does not know it is in a notebook/js environment,\n\nNo.  \nWebserver says \"hey these are assets I know about\"\nKernel says \"these are assets you are missing, and while you're at it delete these others\"\nKernel says \"load this asset\" (which doesn't have to be JS)\nWebserver says to client \"load this asset\" (which doesn't have to be JS)\n\n> I can see a problem with identical-path in many kernels. Once one is cached, it shadows other kernels resources. or you install a new version, and restart your kernel. You get the cached versions.\n\nYou missed the part where I mentioned caches are associated to specific kernels, by id.\n\n> Kernel authors will never bother to implement delete messages.\n\nThat means their kernels aren't up to spec.\n\n@minrk \n\n> it should be responsible for serving them, as well.\n\nBut then if the kernel hangs, or is thinking, the assets are unavailable.\n > This statement isn't true. nbextensions aren't limited to kernel-specific behavior. toc, slideshow, nbgrader, etc. would all not be addressed by the proposal, and continue to require nbextensions as it is.\n\nThanks for catching that!  I'll edit my post.\n > I think if the kernel is being asked about the assets, it should be responsible for serving them, as well.\n\nThat's fair. Wait... How many ports are we talking then? That doesn't seem tractable unless those are proxied to the main notebook server.\n > But then if the kernel hangs, or is thinking, the assets are unavailable.\n\nThat's true, but how else are you going to get the resources from the kernel to the notebook server? It sounds like you have to either:\n1. assume shared filesystem, and make it impossible for kernels to be isolated or remote\n2. reimplement http over zmq, and fetch from the kernel anway\n > Nothing tell you that resources will be the same for hydrogen and the notebook.\n\nI don't think we'd need to differentiate.  The same way the rich display system works, if a front-end can load an asset, it wont.\n I mean the JS could be different in notebook than in hydrogen. or rodeo, or thebe. do you introduce mimetype per frontend ? \n @minrk\n\n> assume shared filesystem, and make it impossible for kernels to be isolated or remote\n\nI'm certainly going to reject that one. Doesn't work right for thebe or any other remote context.\n\n> reimplement http over zmq, and fetch from the kernel anyway\n\nAt first I thought you were joking, then I assumed someone implemented that. Like this? https://github.com/fanout/zurl\n\nMy thinking was that resources can be local paths or fully qualified URLs.\n > How many ports are we talking then?\n\nOne. The notebook server would proxy requests like `/kernel/:kernel_name]/static/...` to `kernel_name`.\n\nThere's also a question of whether these should be per kernel _name_ or per kernel _id_. If it's per _id_, it's going to mean roughly 0 cache hits as every kernel instance would get its own URL.\n > That's true, but how else are you going to get the resources from the kernel to the notebook server? It sounds like you have to either:\n\nI may not understand, but this is what the cache is for.  The webserver would ask the kernel about the assets once the kernel is started, and wouldn't need to later.    \n > My thinking was that resources can be local paths or fully qualified URLs.\n\nThat is forcing knowledge of the notebook server onto the kernels. Do we really want to do that? I assumed not.\n > My thinking was that resources can be local paths or fully qualified URLs.\n\nYes\n > I may not understand, but this is what the cache is for.\n\nCache only helps mitigate future requests, it still needs to get them from the kernel in the first place.\n\n> The webserver would ask the kernel about the assets once the kernel is started, and wouldn't need to later.\n\nSo all resources are known ahead of time, and no new resources are requested during the lifetime of the kernel?\n > Webserver says to client \"load this asset\" (which doesn't have to be JS)\n\nThis feels like the wrong way round to do things. The webserver shouldn't be telling the client what to load, the client should be asking the server for the things it determines it needs. Like the way widget display messages can include a require path for a module to load the view from. There are established mechanisms for caching to avoid loading the same thing twice.\n > So all resources are known ahead of time, and no new resources are requested during the lifetime of the kernel?\n\nYes, that was our thinking.  It's totally possible we overlooked a use case where that was incorrect.\n\nAlso, you could re-request assets on kernel restart (not just first start).\n I'm struggling to see what problems this solves. If we are assuming the kernel knows everything about the server's filesystem in order to tell the server where verything else, then what's the advantage of the kernel managing resources at all, if it can only manage them in a way that the server can understand and access?\n > Like the way widget display messages can include a require path for a module to load the view from. There are established mechanisms for caching to avoid loading the same thing twice.\n\nThe widget display message does exactly that, \"hey load this\"\n Does this mechanism provide any benefit over a `/kernels/:kernel_name/static` directory?\n > The widget display message does exactly that, \"hey load this\"\n\nPossibly I misunderstood. It sounds like in your proposal, the server is _just_ telling the frontend to load something, as a separate message from anything that might actually use it. The widget display messages say 'create this class, loading it from X if you need to'. Crucially, loading the resource is tightly tied to using it, which makes it easy to avoid the race conditions where something would try to use the resource just before it was loaded.\n > Does this mechanism provide any benefit over a /kernels/:kernel_name/static directory?\n\nIf the client, webserver, and kernel exist on three different machines, it does.\n\nAlso,  the `/kernels/:kernel_name/static` directory still has the problem of installation being a two step process (yes this is a problem).  This is where the kernel being in control of the asset locating offers a large benefit.  Package writers can use methods native to their language for packaging static assets, for IPython & Python this is entry points.\n > Crucially, loading the resource is tightly tied to using it, which makes it easy to avoid the race conditions where something would try to use the resource just before it was loaded.\n\nThat's a good point, about the backend not being aware of when the resource is loaded.  Unfortunatley this problem already exists in our current architecture.  A solution would be to make the red message request/response, so in the kernel the API could be implemented using an asynchronous design pattern.\n > If the client, webserver, and kernel exist on three different machines, it does.\n\nHow? I don't see a mechanism for getting the files from the kernel to the webserver, only communicating paths, which require the filesystem to be the same.\n\n> the /kernels/:kernel_name/static directory still has the problem of installation being a two step process (yes this is a problem). \n\nIt also doesn't solve that problem, it just punts it to the kernel. How does the package communicate this information to the kernel, such that the kernel knows at startup, before any imports, what resources are available?\n If we use setuptools entrypoints for this, and communicate files from the kernel to the server at startup and only at startup, this means potentially 100s of MB of file transfer on every kernel startup to the web server. e.g. if a kernel plugin makes MathJax available, there's no mechanism to make the pieces available on request, which proxying http would do, instead it requires all _possible_ resources to be moved at once to the server on every kernel start.\n >  A solution would be to make the red message request/response, so in the kernel the API could be implemented using an asynchronous design pattern.\n\nThe bit about request/response makes sense to me, but I'm not sure what you mean about using async patterns in the kernel. I was thinking about race conditions in the frontend: if 'load this resource' and 'do something that needs that resource' are two separate messages, the 'do something' message can arrive before loading has finished, and then things get tricky. If the frontend requests (with caching) the resources as it needs them, you avoid this problem.\n Even if the caching works well, you will have to hash every resource at startup to validate the cache, rather than at request time. To get a sense of what order of magnitude this might have, try:\n\n```\ntime find notebook/static/components -type f -exec md5 \"{}\" > /dev/null \\;\n```\n\nin the notebook repo\n > I don't see a mechanism for getting the files from the kernel to the webserver, only communicating paths, which require the filesystem to be the same.\n\nThis is why I apologized in my first response, \"path\" really should be \"name\".  What's being communicated in the message to the kernel are \"names\" & hashes of corresponding contents.  And the other way is \"names\" and actual file contents.  How the file contents make there way over the line is up for discussion, but I was thinking binary messages of some sort.\n\n> It also doesn't solve that problem, it just punts it to the kernel. How does the package communicate this information to the kernel, such that the kernel knows at startup, before any imports, what resources are available?\n\nPunting the problem to the kernel is the whole point.  Python has a mechanism for this, entry points, which means it's solved for IPython and Jupyter which is all I'm concerned about.  The generic messages allow other kernel authors to solve the problem how they want.  i.e. IJulia will have to implement their own registry, but as long as they implement the messages, they can do it however they want.\n\n> If we use setuptools entrypoints for this, and communicate files from the kernel to the server at startup and only at startup, this means potentially 100s of MB of file transfer on every kernel startup to the web server. e.g. if a kernel plugin makes MathJax available, there's no mechanism to make the pieces available on request, which proxying http would do, instead it requires all possible resources to be moved at once to the server on every kernel start.\n\nThe caches stored in the web server would be persisted to the disk. On request, if a resource doesn't exist because blue message #2 hasn't been received yet, the request will be deferred until that message has been received.  Once the message is received, if the content still doesn't exist, 404, otherwise respond with the contents.\n > if 'load this resource' and 'do something that needs that resource' are two separate messages, the 'do something' message can arrive before loading has finished, and then things get tricky.\n\nThe 'do something' message, like the 'load this resource' message comes from the kernel.  Hence, if the message is request/response, 'load this resource' function in the kernel would return a defered (or something, whatever is best for the language), in which, once it's resolved would send the 'do something' message.\n > you will have to hash every resource at startup to validate the cache,\n\nYes, that could be a problem for the kernel. hmmm.  I hope I don't sound ridiculous saying this, but you could cache the hashes in the kernel by the file name and timestamp...?\n @jdfreder I'm not sure what the initial kernel->server publish accomplishes. Why not load on first request for a given resource from the server, and cache that? It wouldn't have the unbounded cost at startup. It would be possible for the kernel to be slow on the first request of a particular resource if the kernel is busy, but I'm not sure that's worse than being slow on every startup.\n ```\n~/code/jupyter/notebook$ time find notebook/static/components -type f -exec md5 \"{}\" > /dev/null \\;\n\nreal    0m51.753s\nuser    0m19.012s\nsys 0m27.365s\n```\n Kyle machine is faster than mine : \n\n```\n$ time find notebook/static/components -type f -exec md5 \"{}\" > /dev/null \\;\n\nreal    1m22.300s\nuser    0m27.233s\nsys 0m51.760s\n```\n >  I hope I don't sound ridiculous saying this, but you could cache the hashes in the kernel by the file name and timestamp.\n\nNot ridiculous, we probably should do that if we require publishing all resources at kernel start time. But now we're caching our cache, so we can cache while we cache :)\n I also feel that this thread is a \"let's abstract things in a way that will allow us to get an abstraction to abstract what we need to be abstracted to solve it.\"\n > The 'do something' message, like the 'load this resource' message comes from the kernel. Hence, if the message is request/response, 'load this resource' function in the kernel would return a defered (or something, whatever is best for the language), in which, once it's resolved would send the 'do something' message.\n\nBut to implement that, you need the frontend to send a receipt right back to the kernel to acknowledge that the resource has been received. It's not enough for the kernel to know that it _sent_ the resource, it has to wait until the frontend has received it. And then it needs to think about what to do if it doesn't get that receipt within a timeout, and so on.\n\nIt really seems like it would be much simpler to have the frontend _request_ resources when it's trying to do something that requires them. That's already the way HTTP+HTML works anyway, so it should be easier to implement.\n We should probably loop in kernel authors, but I would guess \"you can serve static resources with http\" is simpler than our own http-lite.\n The scheme I'd want is to be able to request from the kernels, specific resources.\n\nIf I have a notebook server, I want it on `/some/kernel/path`, for the sake of a standalone server, JupyterHub, etc.\n\nIf I have a local app (yes, I'm talking Electron/Hydrogen/Atom), then I probably want to get the local path.\n\nIf the asset is external, loaded from a CDN, I should be able to get it in either case.\n Plus, if resources are actually kernel-spec-specific, rather than kernel-instance-specific (like kernels/:name/static, but handled by the kernel), the resources could be served by a dedicated kernel that's not actually running code for a notebook, with only one resource-serving kernel per spec.\n\nThat might be a terrible idea, though.\n > It would be possible for the kernel to be slow on the first request of a particular resource if the kernel is busy, but I'm not sure that's worse than being slow on every startup.\n\nYeah, this was my concern.  Also, if the kernel is responsible for serving the files while the kernel is running user code which tells the front-end to load a file, you may get a deadlock (depending on how the 'load this resource' function is implemented).\n\n> I also feel that this thread is a \"let's abstract things in a way that will allow us to get an abstraction to abstract what we need to be abstracted to solve it.\"\n\nNeeds to start somewhere :wink: \n\n> you need the frontend to send a receipt right back to the kernel to acknowledge that the resource has been received\n\nYup.\n\n> And then it needs to think about what to do if it doesn't get that receipt within a timeout, and so on.\n\nThat's a small detail, which I'd hope the asynchronous pattern of choice could handle well.\n > Plus, if resources are actually kernel-spec-specific, rather than kernel-instance-specific (like kernels/:name/static, but handled by the kernel), the resources could be served by a dedicated kernel that's not actually running code for a notebook, with only one resource-serving kernel per spec.\n\nThat's the kind I was thinking. Packages would install resources into that kernelspecs namespace (CSS, JS, etc.)\n > That's a small detail, which I'd hope the asynchronous pattern of choice could handle well.\n\npython 3.5 only, you need to use `async` and `await`.\n > I would guess \"you can serve static resources with http\" is simpler than our own http-lite.\n\nDepends on how lite. For the R kernel, I don't relish the idea of trying to integrate an HTTP server event loop with the loop listening on the ZMQ sockets (which currently just uses zmq poll).\n\n> > And then it needs to think about what to do if it doesn't get that receipt within a timeout, and so on.\n> \n> That's a small detail, which I'd hope the asynchronous pattern of choice could handle well.\n\nI feel like we're talking at cross purposes here. I know it could all be solved with enough async cleverness. My point is that if you don't have this message asking the frontend to load a specific resource, you avoid the whole problem entirely, and the kernel code doesn't need to do clever async stuff.\n\nBy analogy, when you request a web page, it contains references to images, JS etc. that the page requires. It doesn't try to tell the frontend to load those resources before loading the page*: the frontend parses the page and requests the resources it needs.\n\n(\\* OK, so HTTP 2 will in fact do some of this as an optimisation. But I imagine that all the abstractions for servers and frontends will continue to make it look like it's the frontend requesting resources, not the backend pushing them)\n > Also, if the kernel is responsible for serving the files while the kernel is running user code which tells the front-end to load a file, you may get a deadlock (depending on how the 'load this resource' function is implemented).\n\nIf I were writing this for IPython, I would run an HTTP server in a thread, so a deadlock should not be an issue, and even performance problems would be minimized unless the blocking execution is a single long-running GIL-holding call, which is rare. Even if we make this a zmq channel, I would make it a dedicated zmq channel, so it can be handled concurrently with execution without blocking, and I would still run it in a background thread in IPython, and _not_ part of the shell-channel dispatch loop.\n @takluyver I understand where you are coming from, but still don't see it as much of a problem and there is still the more important (opinion) problem of the two step install.  Unless you're suggesting my third bullet, under the last section, is enough - \"an entry point for a paths to be `require`ed when the notebook page loads.\"\n @rgbkrk how much better would it be for sidecar, etc. if we returned `file://path/to/resource.js` vs `http://localhost:port/kernel/resource.js`? I wouldn't expect it to be much.\n @rgbkrk said over Gitter \"we were a bit far in trying to discuss this\nMaybe it would be worth stating the problem, the consumers of the API, etc.\nUser experience for those, UX for the notebook\".\n\nI think this is a good idea.  https://jupyter.hackpad.com/Packaging-PbIgxnC71or\n @minrk Loading it in either case makes no difference. We can load resources from either of `file:///` or `http://` just fine.\n\nI'm going to admit that I was aiming for purity of pulling local resources when using a local app, to limit how many web services are being run. It's a bit silly of me, considering that each running kernel has 5 open ports for ZMQ sockets.\n\nEither URL is fine.\n Hi all! I am excited that this discussion is happening. I just got back\nfrom traveling for the week and am now sick. I will try to catch up and\nprovide comments...thanks for starting this @jdfreder\n\nOn Tue, May 26, 2015 at 5:13 PM, Kyle Kelley notifications@github.com\nwrote:\n\n> @minrk https://github.com/minrk Loading it in either case makes no\n> difference. We can load resources from either of file:/// or http:// just\n> fine.\n> \n> I'm going to admit that I was aiming for purity of pulling local resources\n> when using a local app, to limit how many web services are being run. It's\n> a bit silly of me, considering that each running kernel has 5 open ports\n> for ZMQ sockets.\n> \n> Either URL is fine.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/116#issuecomment-105701911.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @minrk I'm starting to lean towards your idea of not having a cache, and here's an example of why (I added it to the 'specifics' in the hackpad.\n\npy astronomy extension - an extension that contains 100s of GB of image static assets.  A widget is displayed in the front-end that allows users to navigate through the images, one at a time.  The webserver shouldn't duplicate all of the static assets, and unless the user views every single image, not all of the images should be sent over *any* network connection.\n @jdfreder you can still have a cache - it could last for the lifetime of the server or kernel or some other metric. The main piece I find problematic is attempting to populate that cache all in one go, whether it's used or not, rather than at request time, like one does with HTTP.\n How about the following revision:\n\n![screen shot 2015-05-27 at 10 03 25 pm](https://cloud.githubusercontent.com/assets/3292874/7852991/0142eb92-04bc-11e5-8ee5-70a6803debed.png)\n- Browser handles the cache\n- Browser requests things to be loaded instead of kernel pushing them\n That seems more reasonable at a glance.\n I think that makes more sense. Is there any difference between the red and blue requests other than time? It seems like they are identical in content and structure, other than the time when the send.\n @minrk they could be the same, but there would have to be a standardized name for the \"asset\" that is requested by the messages in red.  Something like \"notebook_kernel_assets\", that the kernel would recognize and return a list of assets to be loaded on notebook page load, IPython would populate this using entry points for example.\n Can we turn this into an enhancement proposal?\n\n/cc @parente\n If discussion of this is starting up again, jupyter/notebook#839 is probably relevant. The proposal here solves part of the problem if all the static assets dependencies are known at notebook start and cell execution is blocked until all those assets load. If not, the kernel might emit JS that requires another dependency that is not yet loaded.\n\nAny web assets not known at notebook load time are still a problem.\n The R kernel discussed this (or a subset of this ) problem recently: https://github.com/IRkernel/IRdisplay/issues/14 Basically: how should JS/css libs for visualisations be handled\n\nThe knitr/rmarkdown system in R has this problem solved: the \"knit_asis\" object (kind of like the display_data message) gets styling in an extra attribute [knit_meta](https://github.com/yihui/knitr/blob/23f1d6edcc675b2f93d4305387da213728146222/vignettes/knit_print.Rmd#metadata) which lists dependencies (each time such an object is produced) and rmarkdown (in this case in a similar role like the notebook frontend) manages what is outputted in the final document. Knitr/rmarkdown has is slightly easier, as it only makes one pass over the document and you can't reevaluate the notebook, so the solution here needs to handle reevaluating cells and removing styling when no cell references it (and this needs to be in the on-disc format as well...). Also, the \"producer\" of the knit_asis object has information about the final output format (html/latex) and so knitmeta only contains stuff for that format.\n\nAs such visualisations need to be available in html content which is derived from ipynb _files_ (nbconvert, nbviewer, github,...), I don't think any \"request from kernel\" steps can be part of a solution for this problem, as the ipynb file needs to have all such dependencies available. A solutions should also handle that different output formats (html, latex,...) need different dependencies (message format and stored in the ipynb).\n\nBut this would also make the implementation for this easier:\n- The messaging format would need an update to handle assets, maybe by using `metadata.<mimetype>.dependency.xxx = []` (with xxx = js|html|latex|... -> whatever the mimetype can handle)\n- The frontend would need to implement a deduplicator to only include this code only once per document and handle removals if reevaluation of cells is possible: \n  - the ipynb/model would include each dependency only once (new \"dependencies\" section in the json -> `<mimetype>.<hash>.(type, content)`)\n  - each \"cell\" contains only a reference to the (hash of the) dependency \n  - when new messages come in, all dependencies are moved to the dependency store and removed from the message, which is then \"normally\" handled. \"moved to the dependency store\" means, that each dependency is hashed and either newly included in the store and in the document (in a special section, not the output area!) or simply dropped.\n  - periodically (or on removal/reevaluation), the dependency store is cleaned of all not anymore used dependencies and such dependencies are removed from the document. Or this only happens on save and the user would need to reload to clean up such libraries.\n\nThe downside is that each time such a message is send, the whole dependency chain is send as well :-( But this is happening right now anyway and such dependencies are included in the ipynb file each tome. This will probably encourage the use of external dependencies/URLs instead of files. Pandoc AFAIK can then include url content inline :-)\n There are three (or more!) parts to write a specification for. The backend/filesystem layout, how a frontend requests them (is it direct, is it a url path in the notebook server `/kernelspec/ir/static/...`, is it per running kernel), as well as how it ends up in the notebook document (per cell, metadata across the notebook).\n\n> The frontend would need to implement a deduplicator to only include this code only once per document and handle removals if reevaluation of cells is possible\n\nDefinitely. It seems like the approach you outlined for knitr is great for us all to think about in terms of the notebook @janschulz. I prefer a URL based approach to asset requiring up until I'm offline (which is fairly frequent). A big draw to our current format is that it works without having to be connected to the wider internet all the time.\n\nSince I also care about Hydrogen, Thebe, and other frontends beyond the notebook, my primary interest is in getting the backend specification done across kernels. One approach is for kernel spec directories to contain static assets:\n\n```\n\u251c\u2500\u2500 kernels\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ir\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 kernel.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 logo-64x64.png\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 static\n```\n\nWhat belongs in static I'm unsure of. Let's say we operated with npm packages underneath:\n\n```\n\u251c\u2500\u2500 kernels\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ir\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 kernel.json\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 logo-64x64.png\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 static\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 node_modules\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 d3\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 package.json\n```\n\nWhile this would work well for node based frontends ([hydrogen](https://github.com/nteract/hydrogen), [nteract](https://github.com/nteract/nteract), [sidecar](https://github.com/nteract/sidecar)), it would _not_ work well on the main notebook or any other remote environment (thebe, dashboards, etc.) without also specifying how we do bundling (webpack, browserify, etc.).\n What is actually the problem here?\n- \"Too big ipynb files\" or \"too much in RAM\" because every plot includes jquery/... again -> solved by properly labeling dependencies in the over-the-wire messages and deduplicating them in the frontend\n- \"too much send over the wire\" -> not solved by deduplicating in the frontend and must get a solution in the kernel or in a caching webserver if it acts as a proxy between kernel and frontend\n\nIf the latter is a problem (and one assumes that the kernelserver/webserver and the kernel are on the same host and the frontend communicates with the kernel via the webserver), then the above (labeled dependencies in the message) plus a proxy which does caching and replaces dependencies with hashes which are then loaded from the webserver could work:\n\n-> kernel sends message with css/html labeled as dependency\n-> proxy/\"webserver\" replaces dependency with hashes\n-> frontend finds hashes -> requests content from webserver\n-> webserver sends content for hash or error message\n-> frontend includes hash and dependency in json and sends the complete stuff to be saved (or the frontend sends only hashes and the webserver replaces them)\n\nGoing through https://jupyter.hackpad.com/Packaging-crate-PbIgxnC71or#:h=Specific-cases, the above can be used to solve the ipywidget case (widgets would add their js/css dependecies on cell execution and these would be included when the notebook is reloaded) but not the other three (e.g is has nothing to with packaging extensions for the frontend or backend).\n To summarize the 3 areas we need to solve that @rgbkrk listed:\n1. The backend/filesystem layout of static assets.\n2. How a frontend requests them (is it direct, is it a url path in the notebook server /kernelspec/ir/static/..., is it per running kernel).\n3. How it ends up in the notebook document (per cell, metadata across the notebook).\n\nOn 1) my initial though is that because different deployment scenarios and frontend architetures will be so different, that we don't specify the filesytem layout. If we get into that, I can't imagine things get really difficult to reason about all of the different choices: inside/outside Docker, using conda or not, electron or server, where is the kernel running. By this, I mean that a given frontend should be able the use the information from parts 2/3 and translate that into whatever filesytem layout is needed. The other issue is how to deal with a node_modules that is effectively spread out all over the place between the main server and kernels. Do you end up with multiple deployment bundles? How do you deduplicate packages across them?\n\nOn 2) is it not sufficient to specify all the things using npm package names and versions? If not, what is missing? I am concerned about making decisions at this level that assume particular bundling tools or path conventions.\n\nOne 3) I do think it is pretty important that it is easy for track down all of the static assets for a single notebook, so those assets can be bundled in different contexts such as nbonvert/static, etc. That would seem to point to notebook level metadata, but it probably also has to be in the cells that use those assets? Maybe both? Not sure.\n > To summarize the 3 areas we need to solve that @rgbkrk listed:\n\nI'd say there's a 4th: how to deal with the asynchronicity of loading frontend assets with respect to kernel code execution. \n\nFor example, how do you ensure the future version of jupyter-js-widgets is done loading on the page before some `@interact` decorator or the equivalent JS tries to instantiate a view when a user does a _Run All_?\n\nEDIT: s/emails/tries/   ... thanks a lot autocorrect!\n > we don't specify the filesytem layout\n\nWe need to specify (or even just explore) the filesystem layout so that:\n-  the server in (2) that is publishing assets actually knows how to load/serve them\n- package authors and kernel authors need a place to install them\n\nIf the answer continues to be nbextensions, we still run into the problem across multiple kernels.\n\nAt least for kernel gateway and the notebook, whether they exist in Docker or not, it's the same local directory structure for that kernel.\n Ok, now I recall why there was hesitance to having a filesystem layout (as outlined in this issue at the top :wink:). We would make the actual kernel serve the assets.\n > package authors and kernel authors need a place to install them\n\nWhat \"packages\" are you talking here (and so I know if this affects the R kernel) : R/Python packages which the user uses in the code cells of the notebook and which implement functions which need to send js/css dependencies? Or things like a nbextension which wants to install something so that the notebook has a new function? My above comments were only for the first case (package which are executed in the code cells) and if this is only about the second case, then I should open a new issue here :-)\n I want to echo the issue that @parente is adding to this PR and maybe the hardest to fix; the loading of dependency libraries and the right timing to render/execute cell output. \n\nAs we've been working in declarativewidgets on a way to change how the user initializes the extension on a particular notebook, we've been struggling a lot with the 'chicken or the egg' problem. We've tried many things, and along the way, it was surprising to find out that on a page refresh, cell output is rendered before extensions are fully loaded. I guess the limitation is understandable after you think about the implications, but at least form me, that was an expectation.\n\nAnyway, I think that to fully understand this issue, we need to think about different scenarios on the client side and the timing of execution as it relates to kernel code and client side extension/library. Here are some of the ones that I can think of.\n1. User creates a new notebook and executes a cell that requires some client side code. (when is that cell really done)\n2. User visits an existing notebook that is cleared of output but performs a Run all (inter-cell dependencies)\n3. User saves a notebook with output and refreshes the browser. (rendering of cell output in relation to dependencies being loaded)\n4. User restarts the kernel and re-run cells (client side code is already loaded, should it be reinit)\n\nFor all the above we need to answer:\n- when can cells be executed?\n- when can cell output be rendered?\n- when is the cell output done so that the next cell can execute\n > What \"packages\" are you talking here (and so I know if this affects the R kernel) : R/Python packages which the user uses in the code cells of the notebook and which implement functions which need to send js/css dependencies?\n\nI'm talking about any kernel, this definitely affects the R kernel. If for some reason the R kernel wants to use the frontend bits of ipywidgets yet is dependent on an older version than is installed (or newer) than the Python side installed into nbextensions, it would have problems. I'd like a way for frontend dependencies to be isolated to the environment they're running with (and to provide a means for fetching them).\n > I want to echo the issue that @parente is adding to this PR and maybe the hardest to fix; the loading of dependency libraries and the right timing to render/execute cell output.\n\nThat is likely the hardest to fix as it very much dictates how a frontend gets built.\n All the scenarios you outlined @lbustelo I've run into in the current notebook in some way, or have assumed I would run into an issue. While developing a custom widget, this forced me to clear all output, restart the kernel, and hard refresh the page.\n","i appreciate your point, but i really think this is the wrong thing to do. it's clearly marked as alpha - is there something specific that you'd like to see before calling it alpha?\n I'm comfortable either way, since it's on master - it depends on how many people run on master.  Either way, @fperez also suggested we have a very visible notice of what to expect and what won't work.\n The other factor in the decision for me is how close we are to releasing notebook master as a new release. If it's soon, then not having the button makes sense to me. If it will be a while, enough so we can get the notebook working \"minimally\", then I think the button is fine.\n But to @dwillmer's point - let's have a meeting between everyone to draw the feature line for when it's 'ready' for beta testing, etc.\n We definitely aren't close to releasing 5.0. We've just had several complaints already suggesting that the button either shouldn't be there, or should be significantly less prominent, at least until Lab can actually be used for something (basic notebook execution).\n It can currently be used to edit text, run terminals, and do file system operations. Basic notebook execution also works, but with a reduced subset of functionality (if we remove the read-only restriction).\n There are people running on master, complaining that a well-marked alpha version of in-development code does not work perfectly?\n No, there are people complaining that an extremely prominent link that says \"Try me!\" doesn't do the one thing they care about using Jupyter for: write, edit, and execute notebooks, and there's no information conveying that they shouldn't expect it to do so.\n These are developers running from master though, and the button says \"try\" and \"alpha\". I don't see why this is a problem.\n I don't see why delaying the introduction of a button is a problem, either.\n Would sticking it at the bottom of the page for now and tweaking the wording (not exactly sure how, but something less encouraging than 'Try me') be an acceptable compromise?\n I think the best thing to do is get everyone on a video chat, as Jason suggested, otherwise this PR conversation will quickly become unmanageable :)\n I think we all agree that there should at least be a prominent notice about what to expect (a modal when the page starts, or a tab on the sidepanel, or a notice at the top of the page, or something).\n Good point @takluyver - there's likely a compromise somewhere. I think we shouldn't bike-shed this too much either.\n Note that currently it doesn't even execute or edit notebooks. So the main functionality of the notebook doesn't actually work _at all_. It's ok to push out alpha tools, but the current state isn't quite at alpha functionality yet, and we run the risk of simply turn users away.\n\nI think we need to introduce it _gradually_. As we gain more functionality, we can display it more prominently, but right now we basically need design/UI feedback, it's not really something people can \"try\" in the sense of using it as a notebook, even for 5 minutes.\n\nSo I think we need:\n-  initially a less-prominent invitation, just so it's easy to find it for someone who actually wants to help test.  We can email the list for now to invite people to try it out.  @takluyver's suggestion is a good one. To keep it simple, we could make it  a plain text link for now (to avoid re-design work); once it matures we can use the nice \"try me\" button.\n- an information page that tells people roughly what to expect.  Right now, they might assume that it's an actual notebook, and think the lack of execution (a most basic feature to do anything useful) is missing might be a bug.  We don't want that reported, so people need to know what's to be expected as working and what they should report as a bug.\n- as we add features, we can move the invitation to be more prominent, changing the plain text link to be the nicer button at the top.\n\nAnd yes, I'm a developer (sort of :) who runs off master and tried it, but I was immediately confused by the lack of execution, which I thought was a bug as I would expect that it would at least let me do _something_ with the notebooks.  So if _I_ had that reaction, we should assume that it can happen to others too and act accordingly.\n I'm going to jump on the \"let's have a call about this\" train. The current state is a product of joint decisions between my team and the Jupyter core team, so clearly something was lost in translation.\n Unfortunately I have a string of meetings today. But I had a chance to discuss this with @jasongrout yesterday by happenstance, he might be able to channel my thoughts, as it seems I failed to do so in the thread...\n I don't think anything was lost in translation (i.e., we did exactly what we had planned and had decided on). What happened is that we got feedback and now we're adjusting in response to that helpful feedback.\n +1 on lowering the visibility of the button. It's far from matching the theme of the current UI, feel (to me) like someone yelling at me in upper case letter.\nI don't think having a \"lab\" button of the page is a bad thing. I think the Style, Location and visibility are just inappropriate.\n I'm fine with adapting style and adding disclaimers, but I think hiding it altogether is a heavy-handed reaction. Basic execution in the notebook _does_ work, but we were specifically asked by Min to make it read-only because it doesn't support _all_ output types yet. The point of the button is to solicit feedback from bleeding edge developers, and hiding it will limit that feedback. I'm not suggesting it be rolled out in a user release at this point.\n > I'm fine with adapting style and adding disclaimers, but I think hiding it altogether is a heavy-handed reaction\n\nAgreed it might be too much. \n\n> The point of the button is to solicit feedback from bleeding edge developers, and hiding it will limit that feedback. I'm not suggesting it be rolled out in a user release at this point.\n\nThe all point of master is to get feedback from bleeding edge developer. The Lab Page is not the only one that get update and need feedback and have no reason to get special treatment. Plus it attracts all users that are running on master instead of just advanced developer who are the one we seek feedback from. \n\nThe master branch is also useful to see how people discover things in the UI, and if the interaction with the UI is seamless and feature discoverable.\n\nAdding a flashy button which main point is to be removed later,  have a complete opposite effect of what is desired,  and target the wrong kind of individual thus makes no sens to me. \n > The all point of master is to get feedback from bleeding edge developer.\n> \n>  Plus it attracts all users that are running on master instead of just advanced developer\n\nThese two statements seem contradictory to me. Is there a better branch than master which targets _only_ bleeding edge developers who can tolerate feature-incompleteness?\n I'm fine with the button, I just heard from a few directions that maybe it was a little premature to have it there. Sorry for starting this mess.\n @minrk - thanks for moving on the feedback, though. It sounds like Fernando's proposal is a good way forward.\n\n> So I think we need:\n> \n> initially a less-prominent invitation, just so it's easy to find it for someone who actually wants to help test. We can email the list for now to invite people to try it out. @takluyver's suggestion is a good one. To keep it simple, we could make it a plain text link for now (to avoid re-design work); once it matures we can use the nice \"try me\" button.\n> \n> an information page that tells people roughly what to expect. Right now, they might assume that it's an actual notebook, and think the lack of execution (a most basic feature to do anything useful) is missing might be a bug. We don't want that reported, so people need to know what's to be expected as working and what they should report as a bug.\n I brought this up to @cameronoelsen and this was his first time seeing the button integrated in the UI.  Here's how it looks now:\n\n![screen shot 2016-03-02 at 10 31 42 am](https://cloud.githubusercontent.com/assets/3292874/13470568/aa95c1ca-e061-11e5-93a8-25508a521b56.png)\n\nHe (and I) think this looks better:\n\n![screen shot 2016-03-02 at 10 25 02 am](https://cloud.githubusercontent.com/assets/3292874/13470572/ae252826-e061-11e5-8cc1-805043e8d1b4.png)\n Another idea, we could ask @cameronoelsen to reduce the orange in the button, so it's not as focus grabbing.\n > an information page that tells people roughly what to expect\n\n@sccolbert would it be possible to make a default panel in the lab setup that tells people about the lab interface?\n I also like @fperez 's plain text link idea\n\nEDIT: @takluyver 's suggestion\n @rgbkrk Yep - great idea, we can have an \"About\" tab or something with that info. Just need the text/html people want to put in it.\n Go ahead and make the About tab with the text \"This is JupyterLab!\", then I'll merge it and can submit a PR with better text in it after. :smile:\n @blink1073 ^\n > Is there a better branch than master which targets only bleeding edge developers who can tolerate feature-incompleteness?\n\nNo. We strive to keep master usable at all time to get feedback from most of the community. \nBy bleeding edge developer I mean developer that are running the bleeding edge version.\nYou shouldn't need to have 36 Years of experience in Python and Typescript to run master.\nSo yes on master you have a lot of user that are not even experienced with git and just know how to\ndo git pull. If you put a Big Orange button you can expect to get testing (mostly) from these. \n\nIf you want feedback from advance developers, you make a feature which is relatively hard to reach, hidden behind a config option, or a non obvious link and advertise it on twitter,  the mailing list. Or even just a message in the JS console. \n @rgbkrk, see https://github.com/jupyter/jupyter-js-plugins/pull/98.\n As one of the people who said that we should consider making `jupyter/notebook` and `jupyter/lab` two separate projects (one has to keep the old APIs, one has their continued green field engineering), I thank @minrk for kicking off this discussion. It had to happen, as a lot of people were fairly minimal in their responses (not wanting to spend too much energy/time combatting it). \n\n> What happened is that we got feedback and now we're adjusting in response to that helpful feedback.\n\n:+1: I was fairly quiet in the past of just accepting that \"this is what we decided, there is no argument\u2122\"\n\nThe JupyterLab interface is very slick and responsive (with some edges that I'm sure will get cleaned up) and people want a way to showcase it. The cool thing is we can keep moving and disappearing the button every day until we're happy. Consensus is in the code.\n (Sticks neck out) Any support for making the button more like the existing tabs on the dashboard page already? I know it's not a true tab, but if it appeared in the tab row, maybe right aligned away from the other tabs, it would fit with the existing UI, still be noticeable enough for people to click it, and could contain any amount of text required to express its alpha/experimental/try-this-and-give-us-feedback nature.\n > (Sticks neck out) Any support for making the button more like the existing tabs on the dashboard page already? I know it's not a true tab, but if it appeared in the tab row, maybe right aligned away from the other tabs, it would fit with the existing UI, still be noticeable enough for people to click it,...\n\nI like this idea.\n Interesting idea, but I don't think it's great UX to have something that looks like a tab but doesn't behave like one (i.e. it does something other than switching the view in the tab content area).\n :+1: @takluyver is right, it's a nice idea for not having it so visible, but is the wrong interaction. A smaller button, possibly moved to a different place would be better.\n While this is an open topic, what's the approach an admin of a Jupyter 5.0  deployment should take to disable / hide the try button until he/she is ready to expose and support the new Lab interface? Is there a command line feature flag? Does the admin have to provide custom CSS / template for the dashboard page?\n > While this is an open topic, what's the approach an admin of a Jupyter 5.0 deployment should take to disable / hide the try button until he/she is ready to expose and support the new Lab interface? Is there a command line feature flag? Does the admin have to provide custom CSS / template for the dashboard page?\n\nGood question, I don't think we had anything planned in advance. \nIt should be relatively easy to add a serverside flag. \n What if we just took away the \"try\" and the orange accent on the button and made it more subtle. Also, the \"Try\" is probably implied because of the \"alpha release\" text under the title.\n![screen shot 2016-03-04 at 1 10 08 pm](https://cloud.githubusercontent.com/assets/6437976/13540326/995f93ae-e20a-11e5-9253-da9570ca8c84.png)\n @cameronoelsen That makes it look like the dashboard _is_ jupyterlab\n @rgbkrk Yeah I was thinking of that too :/\n I do like how subtle the button is there @cameronoelsen - it fits the current UI very well.\n\nWithout the try, I think that's how it makes it look like a brand on the notebook dashboard.\n What if we got away from that button and just put a dropdown arrow next to the Jupyter dashboard logo. When you click on it, it reveals a menu that lets you get to the jupyterhub dashboard (aka just the app itself)\n![screen shot 2016-03-04 at 2 02 42 pm](https://cloud.githubusercontent.com/assets/6437976/13541552/dc0dedc0-e211-11e5-962c-d3b2c15ff167.png)\n![screen shot 2016-03-04 at 2 05 33 pm](https://cloud.githubusercontent.com/assets/6437976/13541619/33b1b340-e212-11e5-9345-520a057f5129.png)\n\nOr even just having the jupyterlab icon:\n![screen shot 2016-03-04 at 2 06 46 pm](https://cloud.githubusercontent.com/assets/6437976/13541642/619c0436-e212-11e5-8af4-d4532c29232b.png)\n I like that last option a lot: easy to find for someone who needs it, less likely to catch the unwary :)\n\nAnd BTW: I want to reiterate this wasn't a slight _at all_ on the original work!  I think it's great to have JLab more easily accessible, so we can provide feedback and iterate.  Consider this round 1 of that feedback.  I also love the stronger button, which we can use later on when things are more functional, and we're willing to start attracting more folks.\n\nNow, one thing I think is very important is to provide a _very obvious_ information page that sets expectations for users who do open it. For example, telling them that right now the notebook tab is read-only.  Otherwise people are just likely to be confused.  Our project has a tradition of master being bleeding edge but basically usable, and I see no reason to deviate from that.  But as long as we communicate clearly what we expect to work and what not, we can get feedback this way.  If nothing else, that's critical to get usable reports, otherwise we're just going to get a bunch of people filing bugs that say \"the notebook doesn't run\", and we'll spend our time closing them as false positives.\n\nThanks again!\n > Now, one thing I think is very important is to provide a very obvious information page that sets expectations for users who do open it. For example, telling them that right now the notebook tab is read-only. Otherwise people are just likely to be confused\n\nThis is already much better in master : \n\n![screen shot 2016-03-04 at 15 17 44](https://cloud.githubusercontent.com/assets/335567/13543038/5f5c0b3a-e21c-11e5-9a63-ddb4a3543659.png)\n Ah, great! I hadn't pulled so I hand't noticed that. Many, many thanks!!\n :+1: noice!\n","A 404 for a URL that doesn't exist is seems like the right thing to do, to me. Would you want `tree/a/b/c/d/e/f/g/h` to always redirect to the highest level that exists, rather than showing an error?\n I'm just thinking from the perspective of a filesystem explorer. In that case, if the folder is deleted, the explorer takes you to the nearest parent that still exists so that you can get on with your work.\n\nTrying some other stuff, I notice that auto refresh in the webUI picks up when you delete a directory now and gives a message: \"Server error: No such file or directory: subtree/subsubtree\", after I deleted the subdirectory \"subsubtree\". Maybe that's enough.\n\nTesting with a previous version of the notebook didn't even give the 404 error, just a blank page. \n","Ah, I see the distinction now, only when an actual execution result is returned do we get a prompt, both for the console and the notebook.\n\n<img width=\"146\" alt=\"screen shot 2016-03-02 at 3 45 23 pm\" src=\"https://cloud.githubusercontent.com/assets/2096628/13476520/d3b8ec22-e08d-11e5-99bc-c5892f047423.png\">\n Yep, you've got it. Note that in the IPython kernel, you can also use `Out[3]` to access a previous result.\n Yeah, it made sense in hindsight ;)\n","I've a couple of hacks for generating or updating bits of one notebook using another:\n- [creating subnotebooks from a single monolithic notebook](https://blog.ouseful.info/2015/08/21/authoring-multiple-docs-from-a-single-ipython-notebook/)\n- [inserting 'canned' feedback from one notebook into another](https://gist.github.com/psychemedia/06c265e0a173a260a13d231d3275d6de).\n\nThey're both a bit crude, particularly the canned feedback includer. But they're something to talk around..\n In master, it is now possible to copy and paste cells between notebooks in Chrome and Firefox.\n @takluyver is this feature in the latest release?\n I don't think so, unfortunately. I've marked this issue for 4.3 in the hope that someone will have a look at it, but I don't know what the plans are for releasing the next versions.\n This works for me on master/chrome/os-x, so I'm going to close this. \n\nWe have someone working on pushing notebook 4.3 out, so I hope to have the release in a month-ish. \n\nClosing as this will be in 4.3.\n Can someone tell how to copy cell from one notebook to another?\nI couldn't do that .. \n\nAh, nevermind. I have 4.2.0 version installed, and you say this will be in 4.3\n does not seem to work for the development version from github !?\n Have you definitely got the development version installed, including rebuilding the js (which requires npm)? Have you cleared your browser cache? What browser are you using? Do you see anything on the page or in the JS console when you try to copy and paste?\n\nNote that both the to- and from- notebooks need to be running with the development version for copying and pasting between them to work.\n Does not work for me in 4.3 on firefox. Nothing on Ctrl+C in JS console. Doesn't seem to be working in 4.3 on Chrome on MacOS. I don't think the clipboard code is in 4.3. We're hoping to do 5.0 before\ntoo long...\n\nOn 17 Dec 2016 12:52 a.m., \"David P. Sanders\" <notifications@github.com>\nwrote:\n\n> Doesn't seem to be working in 4.3 on Chrome on MacOS.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/1163#issuecomment-267730640>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUA9UUg2KXQ63UEAoIBL5mXkFTL68JZks5rIzIwgaJpZM4HoVIq>\n> .\n>\n It's not working on master either. It works on master here, although I noticed an issue where it doesn't work if the first cell you copy is empty.\r\n\r\nYou may be getting cached Javascript. There are various ways round this; one I like is to run the notebook server on a different port from normal (e.g. `--port 8931`). Hmm, tried that but still no good apparently. Anything in the JS console when it fails? What browser are you using? Chrome 55.0.2883.95 on MacOS 10.12\r\n\r\nNo JS error when it fails; the only JS error in the console is the following (not sure if related):\r\n```\r\n\r\nhttp://localhost:8888/nbextensions/nbpresent/js/nbpresent.deps.min.js.js Failed to load resource: the server responded with a status of 404 (Not Found)\r\nrequire.js:165 Uncaught Error: Script error for \"nbpresent-deps\"\r\nhttp://requirejs.org/docs/errors.html#scripterror\r\n    at makeError (require.js:165)\r\n    at HTMLScriptElement.onScriptError (require.js:1732)\r\nmakeError @ require.js:165\r\nonScriptError @ require.js:1732\r\n``` Probably not related, but maybe some extension is interfering somehow. It's working for me on Firefox and Chromium. Not working on Firefox either unfortunately (and with no error messages in the JS as far as I can tell). I'm not sure how to debug this. Is it possible you're trying the wrong thing to test it? You need to be in command mode and then use Ctrl-C/Ctrl-V to copy and paste (or Cmd- on a Mac, I guess). Thanks for checking, but that is what I'm trying, yes. Ah, no, I was indeed checking the wrong thing. I was doing `Ctrl-m v`, as I would in a single notebook. Apologies It's *really* neat with `Cmd-c / cmd-v`! :-) Thanks!\r\n\r\nIt has to be the native copy/paste shortcuts for this, because that's the only way the browser gives us access to the system clipboard. I see. I assumed there was some notebook internal state or whatever. I don't see that this is documented in the keyboard shortcuts though? I think the shortcuts help thing is generated from our own shortcuts registry. We don't register these shortcuts, because we have to let the browser catch them and turn them into clipboard events. Maybe there's some way we can put them in the shortcuts dialog without actually registering them.\r\n\r\n@Carreau, that seems like something you'd know about? Not working for me with notebook-4.3.1. This would be a really useful and basic feature for collaborative work - I'm surprised it is not there yet. > @Carreau, that seems like something you'd know about?\r\n\r\nThat's some things I have thought about.  We should first auto-register display all of codemirror shortcuts, but I haven't had the time to work on it. \r\n\r\nI would also **really** like the menu layout to be declarative to send some of that to native menu, but again, no time to work on it, and anyway we'll have to re discuss that with the people building JupyterLab.\r\n\r\n\r\n> Not working for me with notebook-4.3.1. This would be a really useful and basic feature for collaborative work - I'm surprised it is not there yet.\r\n\r\nThere only so much we can do with all the project we maintain and the number of dev we have.\r\nThere are also limitation of browsers that don't always give you the choice. \r\n\r\nHelp is always appreciated.\r\n\r\n > Not working for me with notebook-4.3.1. \r\n\r\nThis feature is currently marked for 5.0 (see the milestone on the right), so we don't expect it to work in any 4.x release. Hello, \r\nI also cannot copy/paste cells from different notebooks. Here is my \"pip list | grep jupyter\":\r\n```\r\njupyter (1.0.0)\r\njupyter-client (4.4.0)\r\njupyter-console (5.0.0)\r\njupyter-contrib-core (0.3.0)\r\njupyter-contrib-nbextensions (0.2.1)\r\njupyter-core (4.2.1)\r\njupyter-nbextensions-configurator (0.2.2)\r\n```\r\nI'm working on Chrome and the machine OS is a CentOS 7.\r\nThe copy/paste is not working either with CTRL+C/CTRL-V or with the \"copy/paste cells\" from the edit menu.\r\n\r\nAny help is kindly appreciated. Thanks!\r\n\r\n\r\n\r\n The relevant package is just called `notebook`. Thanks for the heads up. The notebook package is version 4.3.1 and it's the latest.\r\nIs it supposed to work? No, sorry, the feature is currently slated for 5.0. We'll try to get that out before too long. So @takluyver, as you wrote before,   is it still for firefox/chrome?\r\n\r\nIs it normal that it doesn't work in safari?  I got this error in the console:\r\n\r\n```\r\nFailed to load resource: the server responded with a status of 404 (Not Found)\r\nhttp://localhost:8888/static/components/preact/dist/preact.min.js.map\r\n```\r\n\r\n\r\n(I am on `Version: 5.0.0b1` ) It still appears to be working for me on Firefox. I've no idea about Safari; I don't use a Mac, so I can't test that.\r\n\r\nThe preact thing is a bit concerning, but I don't think it's related to this. Can you file a separate issue about it? ok - I does work fine indeed on Firefox, also for me ","Two bugs:\n1. we should make the ws ping robust to sleep (requiring missing multiple pings should do it)\n2. we are doing something wrong on the client-side, since it should have a connection-lost state indicator\n\nWe should probably have an explicit _Reconnect_ action for users, for when the connection has been lost and we fail to reconnect properly.\n This happened again, and I noticed the following in the console:\n\n```\n[E 15:22:33.670 NotebookApp] Uncaught exception GET /api/kernels/ebd806b9-c8f8-47e3-aa93-4799128e4c07/channels?session_id=1B0F667ED0314126A4124BD9C6E6DCA3 (::1)\n    HTTPServerRequest(protocol='http', host='localhost:8888', method='GET', uri='/api/kernels/ebd806b9-c8f8-47e3-aa93-4799128e4c07/channels?session_id=1B0F667ED0314126A4124BD9C6E6DCA3', version='HTTP/1.1', remote_ip='::1', headers={'Pragma': 'no-cache', 'Origin': 'http://localhost:8888', 'Connection': 'Upgrade', 'Upgrade': 'websocket', 'Cache-Control': 'no-cache', 'Sec-Websocket-Version': '13', 'Host': 'localhost:8888', 'Sec-Websocket-Extensions': 'x-webkit-deflate-frame', 'Sec-Websocket-Key': 'usZeo/+ZaCp/yQUNG63glg==', 'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_3) AppleWebKit/601.4.4 (KHTML, like Gecko) Version/9.0.3 Safari/601.4.4'})\n    Traceback (most recent call last):\n      File \"/Users/fonnescj/anaconda3/lib/python3.5/site-packages/tornado/web.py\", line 1401, in _stack_context_handle_exception\n        raise_exc_info((type, value, traceback))\n      File \"<string>\", line 3, in raise_exc_info\n      File \"/Users/fonnescj/anaconda3/lib/python3.5/site-packages/tornado/stack_context.py\", line 314, in wrapped\n        ret = fn(*args, **kwargs)\n      File \"/Users/fonnescj/anaconda3/lib/python3.5/site-packages/zmq/eventloop/zmqstream.py\", line 191, in <lambda>\n        self.on_recv(lambda msg: callback(self, msg), copy=copy)\n      File \"/Users/fonnescj/anaconda3/lib/python3.5/site-packages/notebook/base/zmqhandlers.py\", line 253, in _on_zmq_reply\n        self.write_message(msg, binary=isinstance(msg, bytes))\n      File \"/Users/fonnescj/anaconda3/lib/python3.5/site-packages/tornado/websocket.py\", line 215, in write_message\n        raise WebSocketClosedError()\n    tornado.websocket.WebSocketClosedError\n```\n @fonnesbeck Thanks for passing along the log message. This will help us track down the cause.\ncc/@minrk\n @minrk Looking back at the sources from the traceback, here are some thoughts. Since somewhere along the line when the program gets to write_message, the system has either prematurely closed a websocket or thinks the websocket is closed so an error is thrown.\n\nHere are a couple of PRs that may be related:\n- [747](https://github.com/jupyter/notebook/pull/747/files)\n- [898](https://github.com/jupyter/notebook/pull/898/files)\n  In this PR, `stream` is set to `None` in `WebSocketMixin` class. When we get further down to where one of the traceback issues was found in [`zmqhandlers` file and `ZMQStreamHandler`](https://github.com/jupyter/notebook/blob/f19d68a33193dff07e62f11da0ebce331e8acbda/notebook/base/zmqhandlers.py#L212), it's possible that `stream` is still None when `ZMQStreamHandler` is used which may cause the error handler to be called and the traceback emitted. My gut instinct is this is where the problem is, but I don't know the code base well enough to be sure.\n\nAlternatively, this could be context issue where we are not handling the context correctly in eventloop.\n\n```\n# From tornado/stack_context.py\n`StackContext` shifts the burden of restoring that state\nfrom each call site (e.g.  wrapping each `.AsyncHTTPClient` callback\nin ``async_callback``) to the mechanisms that transfer control from\none context to another (e.g. `.AsyncHTTPClient` itself, `.IOLoop`,\nthread pools, etc).\n...\nMost applications shouldn't have to work with `StackContext` directly.\nHere are a few rules of thumb for when it's necessary:\n* If you're writing an asynchronous library that doesn't rely on a\n  stack_context-aware library like `tornado.ioloop` or `tornado.iostream`\n  (for example, if you're writing a thread pool), use\n  `.stack_context.wrap()` before any asynchronous operations to capture the\n  stack context from where the operation was started.\n* If you're writing an asynchronous library that has some shared\n  resources (such as a connection pool), create those shared resources\n  within a ``with stack_context.NullContext():`` block.  This will prevent\n  ``StackContexts`` from leaking from one request to another.\n* If you want to write something like an exception handler that will\n  persist across asynchronous calls, create a new `StackContext` (or\n  `ExceptionStackContext`), and make your asynchronous calls in a ``with``\n  block that references your `StackContext`.\n```\n @minrk @willingc is it realistic to fix this fairly soon for 4.3, or should it be bumped to a later release?\n At the very least, we can do the explicit reconnect action, since it should be an easy escape hatch when we have gotten into the wrong state.\n We've already got the Kernel > reconnect action in the menu that I was referring to as the minimum bar escape hatch for 4.3. Apparently we've had it for ages (https://github.com/jupyter/notebook/commit/59b54eba). Bumping this one to 4.4 for a real investigation of the disconnects / what state it's in. I was getting this error repeatedly when running a long script that iterated through about 30k loops, each time printing out a completed message. When I commented out the print, I did not get the timeout error -- potential temporary solution. I have the same issue, also while training neural networks with keras (which prints a lot) in Jupyter Notebooks. Not sure if it helps but here's the stack trace:\r\n\r\n```\r\n[W 23:01:11.586 NotebookApp] WebSocket ping timeout after 96750 ms.\r\n[E 23:01:11.604 NotebookApp] Uncaught exception GET /api/kernels/83b72aa1-bce1-4f12-bda7-1e2229b06947/channels?session_id=6C9D4325C7194B9BB2AF77D5EB45065E (127.0.0.1)\r\n    HTTPServerRequest(protocol='http', host='localhost:8888', method='GET', uri='/api/kernels/83b72aa1-bce1-4f12-bda7-1e2229b06947/channels?session_id=6C9D4325C7194B9BB2AF77D5EB45065E', version='HTTP/1.1', remote_ip='127.0.0.1', headers={'Sec-Websocket-Extensions': 'permessage-deflate; client_max_window_bits', 'Accept-Encoding': 'gzip, deflate, sdch, br', 'Accept-Language': 'en-US,en;q=0.8', 'Sec-Websocket-Key': 'EUwPR3Nt58mWj8789yl5dQ==', 'Origin': 'http://localhost:8888', 'Host': 'localhost:8888', 'Upgrade': 'websocket', 'Sec-Websocket-Version': '13', 'Cache-Control': 'no-cache', 'Connection': 'Upgrade', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36', 'Pragma': 'no-cache'})\r\n    Traceback (most recent call last):\r\n      File \"/usr/local/lib/python3.5/dist-packages/tornado/web.py\", line 1425, in _stack_context_handle_exception\r\n        raise_exc_info((type, value, traceback))\r\n      File \"<string>\", line 3, in raise_exc_info\r\n      File \"/usr/local/lib/python3.5/dist-packages/tornado/stack_context.py\", line 314, in wrapped\r\n        ret = fn(*args, **kwargs)\r\n      File \"/usr/lib/python3/dist-packages/zmq/eventloop/zmqstream.py\", line 191, in <lambda>\r\n        self.on_recv(lambda msg: callback(self, msg), copy=copy)\r\n      File \"/usr/local/lib/python3.5/dist-packages/notebook/services/kernels/handlers.py\", line 373, in _on_zmq_reply\r\n        super(ZMQChannelsHandler, self)._on_zmq_reply(stream, msg)\r\n      File \"/usr/local/lib/python3.5/dist-packages/notebook/base/zmqhandlers.py\", line 260, in _on_zmq_reply\r\n        self.write_message(msg, binary=isinstance(msg, bytes))\r\n      File \"/usr/local/lib/python3.5/dist-packages/tornado/websocket.py\", line 210, in write_message\r\n        raise WebSocketClosedError()\r\n    tornado.websocket.WebSocketClosedError\r\n``` Can we do more for this for 5.0, or do we bump it to 5.1? @takluyver Not sure. Probably bump depending on 5.0 deadline.\r\n\r\n@minrk Looking at the second traceback it's a bit different than Chris' probably due to some changes in the code related to checking iopub rate limit and message rate limit. https://github.com/jupyter/notebook/blame/master/notebook/services/kernels/handlers.py#L346\r\nI'm going to do a bit of checking on how we test these. I think that we may be in a state waiting to resume or just coming out of resume and the socket times out and we're somehow not handling it correctly.\r\n","Awesome, thanks @blink1073!\n @blink1073 What's neat is that as the alpha moves forward this page can be used to highlight or point out added functionality :smile:\n Yep, thanks for pointing out the blindspot!\n","<del>Do you see anything in the terminal while you are waiting?</del>\n Duh, it's right there. Reading again and rethinking...\n The log suggests to me that the Restarter is not actually being stopped as part of the shutdown sequence, so it's triggering a restart of the kernel that has been removed, causing a bit of confusion. What is `conda list` for the notebook repo?\n\nAnd double-checking: Both Python 2 and Python 3 kernels are working, as long as the page starts that way?\n No worries. Was thinking I might have done a bad job structuring the issue. The image is a bit distracting from some of the content.\n\nAh, so this was done with the recent version of the `jupyter/datascience-notebook` docker image. I suppose there is a valid question as to whether there isn't something weird going on with docker here, but the log made me think that was not the case. Though I suppose it is worth rechecking.\n\nYes, both kernels work as long as the notebook was started with that kernel whether it be Python 2 or Python 3.\n So, I went back and checked to see if I could reproduce this outside of a docker container and I am not able to. Though I don't think it is specific to the `jupyter/datascience-notebook` docker image as I created my own docker image with jupyter and two kernels and ran into a similar issue.\n I can't think of a way for docker to be interfering, but that's useful info. Do you see any differences in `conda list` between the two contexts? My intuition suggests that this should be a more straightforward bug, either in the notebook or juptyer_client code.\n So, there were a couple of things that were out of date in `jupyter/datascience-notebook` that seemed relevant. Namely, `ipython`, `ipykernel`, and (maybe not directly relevant) `openssl`. I created a new docker image with these things updated, but it yielded the same problem.\n Sorry, I should have brought this to your attention ages ago, @parente.\n I can't reproduce on our tmpnb site here http://jupyter.cloudet.xyz/ which is using the image + tag doc'ed here: https://github.com/jupyter-incubator/dashboards_setup/blob/master/tmpnb_deploy/Dockerfile#L4\n\nWhat tag are you using @jakirkham ?\n Sorry, not sure what caused this. That being said, it does seem to be fixed using a recent version of the notebook.\n","Works now, turns out only need to update jupyter with `pip install -U jupyter`, restart the server, then **force refresh the browser** before running this code again. I'm running this on Windows Docker with ipython notebook provided by `tensorflow/tensorflow`.\n","On my Win10 x64 I still have the problem where it won't serve the root of either my C:\\ or D:\\ drives.\n\n```\nnotebook                  4.2.1                    py35_0\njupyter                   1.0.0                    py35_3\njupyter_client            4.3.0                    py35_0\njupyter_console           4.1.1                    py35_0\njupyter_core              4.1.0                    py35_0\n```\n\nI checked my local `notebookapp.py`, it does have the snippet that @minrk added in this PR.\n I'm not familiar at all with the code base of this project, but I did a bit of digging since this issues has been bugging me for quite some time (see this [SO](http://stackoverflow.com/questions/33366624/jupyter-refuses-to-serve-hidden-directory-d-on-windows) post from October 2015). I hope these findings are helpful.\n\nIt throws an error here https://github.com/jupyter/notebook/blob/master/notebook/tree/handlers.py#L43\n\nThe end reason is on this line: https://github.com/jupyter/notebook/blob/master/notebook/utils.py#L135, which is called (I believe) here: https://github.com/jupyter/notebook/blob/master/notebook/services/contents/filemanager.py#L154\n\nI think that the line\n\n```\npath = path.strip('/')\n```\n\nmight need to be replaced by:\n\n```\npath = path.strip(os.sep)\n```\n\nso that it works on windows too. Indeed, is_hidden('C:') works fine (attrs is 22), whereas is_hidden('C:\\') fails (attr is 22)\n\nJust above here: https://github.com/jupyter/notebook/blob/master/notebook/notebookapp.py#L871, it's may be needed to add the following two lines:\n\n```\n # Start by normalizing the path, otherwise checking if equal to os.sep will fail\n value = os.path.normpath(value)\n```\n\nSo far with this it still won't work, not sure why\n > path = path.strip('/')\n\nI think this is called on an 'API style' path. These are like URL paths in that they always use forward slashes, even on Windows.\n\n>  value = os.path.normpath(value)\n\nThis doesn't appear to make any difference, though:\n\n```\nIn [1]: import ntpath\n\nIn [2]: ntpath.normpath(\"C:\\\\\")\nOut[2]: 'C:\\\\'\n```\n I actually tried passing `C:`, `C:\\\\`, `C:/` and therefore found normpath useful for the latter, otherwise the line `path == os.sep:` returns False all the time.\n\nI'm not sure what's the solution, I just know it's still finding it to be hidden.\n\nis_hidden('/'), is_hidden('C:/'), is_hidden('C:\\') all return True.\n\nis_hidden('//'), is_hidden('C:') return false.\n\nis_hidden ends up being called with \"C:\\\" as the abs_path, should that be API style or windows style (C:, not C:)?\n\nAside from whether this makes sense to check for hidden or not (I'm sure you have good reasons to have implemented this), the is_hidden is maybe not complete either. It seems that it finds my D: drive to be hidden (even if I passed 'D:' to it), I think because I have a single hidden directory. I use Box Sync, and I have a hidden `.boxsync` directory as a result.\n\nI think as a temporary workaround I'll force is_hidden to return False all the time.\n @minrk hello sir.. I am facing same problem. couldn't run jupyter form C:. and also couldn't understand the solution you provided here. I am using anaconda3 4.1.1 in windows 8.1 64 bit. can u help me?\n This is still a problem, and it looks like it's because of administrator / read-only / hidden folders present in the root of the drive as @jmarrec hinted. I created a symlink folder pointed at my e:\\ drive, which does allow Jupyter Notebook to start, but the jupyter notebook command gives `E:\\E-Jupyter\\_SMSTaskSequence doesn't exist` in the command prompt window.\r\n\r\nPerhaps Jupyter Notebook could not try to read/serve any administrator/read-only/hidden folders and files?","+1 \n\nAlso, cell grouping could be useful for navigation inside the notebook. As the notebook gets larger, it is increasingly difficult to find cells and copy or edit them. If cell groups and a navigation bar was added, I think it would solve the problem (unless there is some other way to do that I'm unaware of).\n\nMany thanks \n That would be perfectly fine as an extensions, but with all the various semantics available, it's unlikely to get into the core. Since Notebook 4.1 you can already select multiple cell and run/copy/past a group of cells, which already helps a lot. \n You might try, for example, the [`collapsible_headings`](https://github.com/ipython-contrib/IPython-notebook-extensions/tree/724cb34a7012cc50cb9a77c1f1e1640f6c39b845/nbextensions/usability/collapsible_headings) and/or `init_cell` notebook extensions at [ipython-contrib/IPython-notebook-extensions](https://github.com/ipython-contrib/IPython-notebook-extensions)\n +1\r\nI like the idea of paragraphs that exists in tools such as Mathematica. You can execute whole paragraphs which are group of cells as a single block of code and hide them. > You can execute whole paragraphs which are group of cells as a single block of code and hide them.\r\n\r\n@hatv, this is what  [collapsible_headings](https://github.com/ipython-contrib/jupyter_contrib_nbextensions/tree/1d98f7b3f402096c1e08a06b8354a9f960743390/src/jupyter_contrib_nbextensions/nbextensions/collapsible_headings) provides, available as part of the [jupyter_contrib_nbextensions](https://github.com/ipython-contrib/jupyter_contrib_nbextensions) collection.","I'm not sure how you could \"detect\" a folder rename. AFAIK no program does that. You can keep a file handle open on the `.ipynb` to follow it across external renames, or unlink, but this is problemetic for atomic write, and also have issues on windows. I doubt there is anything we can really do about that.\n > I doubt there is anything we can really do about that.\n\nYep... I agree...\n Thanks a lot for responding!\nI guess it's just a bit unexpected when all of a sudden you get a \"Cannot Autosave\" message. Luckily this happens quite soon after the folder renaming, so there wasn't much work lost.\n It might make sense for the server to catch the error and save it to a temporary directory (or walk up the parent directories until one exists), just so that in a situation like that, your work is preserved somewhere. But then we'd need to communicate to the user somehow where it had gone.\n\nI think it would also be technically possible for the server to use inotify (/equivalents on other platforms) to track directory renames and update the sessions to the correct locations. But that sounds complex, and it still wouldn't work if you moved a directory outside the folder the server is running in.\n","RStudio has a similar feature, you can see the scope and value of a defined variable. This feature would be very useful.\n This is a feature of [Jupyter Lab](https://github.com/jupyter/jupyterlab) which is currently available in alpha.\n\nScreenshot:\n\n![screenshot](http://g.recordit.co/omFifHilfy.gif)\n Looks great!\n I should also add that you and roll your own variable inspector using ipywidgets. Example: https://github.com/ipython/ipywidgets/blob/master/docs/source/examples/Variable%20Inspector.ipynb\n","What do you get from `jupyter kernelspec list`?\n Hello, this is what I got, thanks!\njupyter kernelspec list\nAvailable kernels:\n  julia-0.3    /Users/haihan/Library/Jupyter/kernels/julia-0.3\n  python2      /Users/haihan/Library/Jupyter/kernels/python2\n Have a look in `/Users/haihan/Library/Jupyter/kernels/python2/kernel.json`. The first value in `argv` should be the path to a Python interpreter. What path has it got?\n Hello\uff0c thanks for your replies. \nthe first `argv` is `\"/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python\",` thanks  a lot!\n I had the same issue resolved it by running \npython2 -m ipykernel install --user\n @ronteo I had the same issue and this fixed it. Thanks! @chisoo You are very welcome. Glad it worked! @ronteo this fixed my jupyter too. Thanks a lot!!","Thanks !\n","That seem like a random failure, rerun the specifc item in the build matrix that failed by clicking the rerun button in the travis interface. \n That may be. Figured I should share it anyways in case there was something more to it.\n > That may be. Figured I should share it anyways in case there was something more to it.\n\nSure, things like that happen regularly on pull requests and on the master branch, the Travis build can also Timeout for a reason we have not determined yet.  When this is the case we often just Kick the build to restart to be sure. If you figure out why that would be great, but it seem like the restarting every now and then is less annoying that spending a week to try to figure out why it does that.\n\nAnyway, It's not like computer are perfectly deterministic machines than only execute instruction they are given in order and without room for interpretation. They have a life on their own, and act depending on their mood. \n","This is unlikely to be a notebook issue. It probably means it's failing to find the module for some reason. Maybe it's not installed, or you're running in a different Python installation to the one it is installed in. Check `sys.executable` to see which Python you're in, and `sys.path` to see where it looks for modules.\n","Have a look at [ipycache](https://github.com/rossant/ipycache) if you have long-running cells that you don't always want to re-run. I don't think we want to get into defining a DAG of cells.\n There is a [long thread](https://mail.scipy.org/pipermail/ipython-dev/2013-July/011839.html) we had a few  years[*] ago about that on the mailing list. \n\n[*] OMG I'm old now. \n","Not at this point, no. Currently, 100% of document authoring happens in the browser, and the server is just ferrying messages back and forth between the kernel and the browser. We do plan to move awareness of open documents and document state to the server-side as part of real-time collaboration. One aspect of this will be documents getting output when the browser is not running.\n","You say it died silently: what did you see or not see that makes you believe its dead? Do you get the 'dead kernel' dialog in the notebook? Does it hang?\n\nCan you break that cell up and see which line kills it?\n\nMy guess would be that it's some sort of bug or incompatibility with matplotlib/numpy/python that's causing an error. IPython itself normally can't cause silent crashes.\n I see the dialog 'kernel is dead and will be restarted automaticly' and it restarts successfully. \nI figured out that it dies at the last line plt.plot(X,np.sin(X)). \nIf i skip evaluation of the magic `%matplotlib inline` then plotting will return something as `[<matplotlib.lines.Line2D at 0x7f779a07fe48>]` and kernel don't die.\nAll libraries were shipped with Anaconda package.\nThx.\n Hmm, odd. Plenty of people do plotting much like that without any problems. @tacaswell, any ideas?\n I suspect that this is the same issue as https://github.com/matplotlib/matplotlib/issues/6075\n @minrk @takluyver I wonder if the recent change this weekend to Jupyter client and timeouts might be related to this, and is perhaps solved by updating.\n If it could be solved by updating it's nice but i still don't know how can I obtain additional debug information in cases like that:)\nP.S. As i can find the latest version in conda repo is 4.0.6 and it was uploaded 1 month ago. \n @tacaswell it doesn't sound the same: that's closing figures after a delay when using the notebook backend on OS X. This is killing the kernel instantly using the inline backend on Windows. Maybe there's some common underlying cause, but it's pretty well hidden if so!\n\n@eryshev Just to check, there's no relevant output in the terminal where you started it, right? If not, I think you've done everything you can do to get debug information for something like this, and it's just a weird bug.\n Gah, sorry for not reading carefully enough...\n @takluyver No, there's not any relevant output in the terminal, neither with standart or debug level of logging.\n I'm having the exact same problem but on Ubuntu 15.10. Did you ever figure out what's happening?\n Update: The bug occurs when I run Jupyter notebook from vagrant but not when I run it on my normal system. My assumption would be that X-forwarding is not enabled so the vagrant can't access my screen to render the image, I might be totally off base though.\n Are you using `%matplotlib inline`? If you haven't already, try running that in a separate cell before plotting. Inline plots (or nbagg plots from `%matplotlib notebook`) shouldn't do anything that involves X.\n Yes, that fixed it. Thanks very much.\n Works to me, Thanks!\n **Resolution** \n\n> Are you using %matplotlib inline? If you haven't already, try running that in a separate cell before plotting.\n I think you need to add 'plt.show()' in the end!\n So far I have updated my Jupyter and it turns out my matplotlib \"is not Win32 application\". This is strange because it came with my 32x Anaconda but at least I have an error:)  I had to reinstall matplotlib from 32 bits wheel and it works!","I just came across the same problem with the IRKernel. For example, [this notebook](https://github.com/IRkernel/IRkernel/blob/master/example-notebooks/Demo.ipynb) has highlighting in 4.2 (and here on GitHub) but not on master.\n Merging into #1439 which has more info.\n","+1 for the `:`. \n\nThe 10px is too small IMHO. \n\nAlternatively:\n\n```\n#new-menu .dropdown-header {\n    border-bottom: 1px solid #e5e5e5;\n    padding: 0 6px 3px;\n    margin: -3px 0px 0;\n}\n```\n\n![screen shot 2016-03-07 at 12 23 21](https://cloud.githubusercontent.com/assets/335567/13582143/68c36ff2-e45f-11e5-86a2-e393c8c9f26b.png)\n\nI **think** the dedent convey even more that this is a section **header**. \n I did a dedented mockup on jupyter/jupyter#97, but @cameronoelsen didn't include a dedent in any of his proposed designs, so I'm assuming there's a design-y reason not to do that. This implements my favourite of the designs he proposed.\n Ok, merging, let's leave people to complain. \n","@Quadrocube It looks as if one of our core developers, @takluyver, has been helping you on Stack Overflow.\n\nPlease provide some more detail about your environment so we can rule out any out of date dependencies are installed. A screenshot of the Help->About page would be helpful.\n\nThanks!\n @willingc thanks to both of you for trying to help me out! I really appreciate it (especially being in a total loss).\nHere goes the screen.\n![screen_about](https://cloud.githubusercontent.com/assets/1123363/13582734/0ef2e40c-e4bf-11e5-9199-450af3e56382.png)\n\nI am running Ubuntu 14.04, both ipython, ipykernel and jupyter installed with pip and pip3 globally. Not sure what other env info can be of use here, but will readily provide anything needed.\n Do you have `PYTHONSTARTUP` set, or any files in `~/.ipython/profile_default/startup/`?\n Nope, nothing in `~/.ipython/profile_default/startup/` but for README and empty `PYTHONSTARTUP`.\nOooph, I decided to try reinstalling it once again from scratch and this time it managed to get together correctly. Thank you once again, I really appreciate your help!\n OK, no idea what was causing that, but I'm glad you've got it working.\n","notebooks already contain bootstrap classes.\n\nso we should probably add `:not(.table)` to the table styles in renderedhtml.less\n i came up with this, but it\u2019s only a workaround. the fix is in above comment.\n\n``` r\nlibrary(pander)\nlibrary(dplyr)\nlibrary(broom)\nlibrary(IRdisplay)\npanderOptions('table.split.table', 200)\n\ndisplay_html('<style>\ntable.table,\ntable.table tr,\ntable.table td,\ntable.table th { border: 0 }\n</style>')\n\npander <- function(...) {\n    t <- capture.output(pander::pander(...))\n    mdFile <- tempfile(fileext = '.md')\n    cat(paste(t, collapse = '\\n'), file = mdFile)\n    htmlFile <- suppressMessages(knitr::pandoc(input = mdFile, format = 'html'))\n    t <- readr::read_file(htmlFile)\n    t <- gsub('<table>', '<table class=\"table table-condensed\">', t)\n    display_markdown(paste(t, collapse = '\\n'))\n}\n\ndf <- data.frame(a = 0:20, \n                 b = factor((0:20) %% 2, levels = c(0,1),   labels = c(\"a\", \"b\")), \n                 c = factor((0:20) %% 3, levels = c(0,1,2), labels = c(\"x\", \"y\", \"z\")))\npander(df %>% group_by(c) %>% do(tidy(t.test(a~b, data = .))))\n```\n @flying-sheep Nice, thanks!\n\nI now modified that to \n\n``` R\nbootstrapify_tables <- function(){\n    display_html('<style>table.table, table.table tr, table.table td, table.table th {border: 0}\ntable.table-nonfluid {width: auto !important;}</style>')\n    display_html('<script>\nbootstrapify = function(){\n   // a table which was handled by pandoc\n   $(\"tr.header\").parent(\"thead\").parent(\"table\").addClass(\"table table-condensed table-nonfluid\");\n   // a markdown table as it appears in a markdown cell\n   $(\"div.text_cell div.inner_cell div.rendered_html table\").addClass(\"table table-condensed table-nonfluid\");\n};\n$([IPython.events]).on(\"notebook_loaded.Notebook\", bootstrapify);\n$([IPython.events]).on(\"kernel_ready.Kernel\", bootstrapify);\n$([IPython.events]).on(\"output_appended.OutputArea\", bootstrapify);\n$([IPython.events]).on(\"rendered.MarkdownCell\", bootstrapify);\n</script>')\n}\nbootstrapify_tables()\n\n# ---\n\nlibrary(pander)\nlibrary(dplyr)\nlibrary(broom)\nlibrary(IRdisplay)\nnice_pander <- function(...){\n    panderOptions(\"table.split.table\", 200)\n    t = capture.output(pander(...))\n    mdFile <- tempfile(fileext=\".md\")\n    cat(paste(t, collapse=\"\\n\"), file=mdFile)\n    htmlFile <- suppressMessages(knitr::pandoc(input = mdFile, format = \"html\"))\n    t = readr::read_file(htmlFile)\n    t <- gsub('<table>', '<table class=\"table table-condensed\">', t)\n    display_html(paste(t, collapse=\"\\n\"))\n\n}\n\n# ---\n\ndf <- data.frame(a=0:20, \n                 b=factor((0:20) %% 2, levels=c(0,1), labels=c(\"a\", \"b\")), \n                 c=factor((0:20) %% 3, levels=c(0,1,2), labels=c(\"x\", \"y\", \"z\")))\nnice_pander(df %>% group_by(c) %>% do(tidy(t.test(a~b, data = .))))\n```\n\nNow both markdown tables and pander ones are nice...\n\nIf would be nice if the notebook contained something similar to the `bootstrapify_tables` event calls by default.\n A PR for better default table styling would be great. I don't see anything wrong with that. I think the general scope that applies to both markdown cells and html output is `.rendered_html`.\n @minrk Is there any way to only target the current inserted output? The above is run on every insert, so if there are a few tables, it will take a bit...\n Not with strict CSS, I don't think, but with some Javascript you could either write style attributes or add a custom CSS class to the output div.\n\nIf you have control over the HTML output on the kernel-side, the easiest solution is probably to add a class there.\n @minrk The current solution is based on the bootstrap table styles, which only kicks in when a `class=\"table\"` is assigned to a `<table>`. So the current solution either needs some javascript to add that class or a change in the bootstrap css to add it unconditionally.\n\nIs there actually a way to have a handle to the output in one of these event:\n\n``` JS\n$([IPython.events]).on(\"output_appended.OutputArea\", bootstrapify);\n$([IPython.events]).on(\"rendered.MarkdownCell\", bootstrapify);\n```\n\n?\n Another strange thing is that it seems that at the time the `$([IPython.events]).on(\"output_appended.OutputArea\", bootstrapify);` event is run, the function can't get a handle to the currently added html code:\n\n``` R\nfunny <- function(){\n    js <- '<script>\n$([IPython.events]).on(\"output_appended.OutputArea\", function(){alert($(\".FUNNY_Whatever\").length)});\n</script>'\n    IRdisplay::display_html(js)\n}\nfunny()\n```\n\nand then three alerts which show `0,0,1` instead of `0,1,1`\n\n``` R\nIRdisplay::display_html(\"<span>Not Funny</span>\")\nIRdisplay::display_html(\"<span class='FUNNY_Whatever'>Not Funny</span>\")\nIRdisplay::display_html(\"<span>Not Funny</span>\")\n```\n\n[Chrome 49.0.2623.75 m, win7]\n @JanSchulz this (the timing issue) is down to the fact that the event is fired when markdown rendering is called, but the DOM elements are then created asynchronously, potentially _after_ any event callbacks...\nSo, in short, I don't think you can't (reliably) get access to the output at the time of the callback\n Somehow this still smells like a bug: if the event signals that something is appended, and then the should-be-appended thing isn't there, it's kind of useless :-(\n @JanSchulz it\u2019s hard to read your code. please add highlighting: ````r` it\u2019s just a single letter for R!\n Well, the appended event does include some additional data (see [outputarea.js#L577](https://github.com/jupyter/notebook/blob/41ede3ec5687fa915f0b49cde4472432759288eb/notebook/static/notebook/js/outputarea.js#L577)). The markdown rendered event is somewhat different, though, it seems. I can't say I have a complete grasp of how this works!\n @jcb91 I looked at the arguments by which `bootstrapify` was called in  `$([IPython.events]).on(\"output_appended.OutputArea\", bootstrapify);` and couldn't makse sense of it (but my js debugging foo is beginner at best :-( -> `alert(jsonify(arguments))`). Is there any way to add breakpoints to inserted HTML which contain JS in chrome?\n Hmm, I'm not sure of an obvious way to do it, as it's dynamically-created javascript. I'd probably go about it by creating a small extension with a dummy function registered in the `window` namespace, e.g. \n\n``` javascript\nwindow.my_debugging_capturer = function () {\n    console.log('my_debugging_capturer');\n}\n```\n\nthen, set a breakpoint on that function in the sources tab of chrome's devtools.\n\nThen, the inserted HTML can call the window function, as \n\n``` javascript\nwindow.my_debugging_capturer()\n```\n\nto hit the breakpoint, and you can step up the stack frames in the devtools to find the callback frame... does that make sense?\n Your idea about inserting code to go to a breakpoint brought me to the idea to google if there is a way to include a breakpoint in code (similar to the python debugger can be triggered). And yes, there is: https://stackoverflow.com/questions/10050465/set-a-javascript-breakpoint-in-code-in-chrome\n\nWow, thanks!\n Aha, good spot! :+1: \n And now it works:\n- Adds the stuff during the loading of the notebook -> NB which have this included have bootstrap tables after load\n- For each md render and for each output, also checks the output for tables and adds the required classes -> New content automatically gets the bootstrap styles...\n- The md tables are no left aligned (before centered) like the normal tables.\n\n``` R\nbootstrapify_tables <- function(){\n    html <- '<style>table.table, table.table tr, table.table td, table.table th {border: 0;}\ntable.table-nonfluid {width: auto !important;}\ntable.table { margin-left: 0; margin-right: 0;}</style>'\n    js <- '<script>\nbootstrapify = function(){\n   debugger;\n   args = arguments;\n   $(\".rendered_html table\").addClass(\"table table-condensed table-nonfluid\");\n   n_pandoc = $(\"tr.header\").parent(\"thead\").parent(\"table\").length;\n   n_md = $(\"div.text_cell div.inner_cell div.rendered_html table\").length\n   n_rendered = $(\".rendered_html table\").length\n   console.log (\"beautified \"+ n_pandoc + \" + \" + n_md + \" + \" + n_rendered + \" tables (pandoc + md + rendered) ...\");\n};\nbootstrapify_output = function(){\n   debugger;\n   arguments[4].find( \"table\" ).addClass(\"table table-condensed table-nonfluid\");\n   n = arguments[4].find( \"table\" ).length;\n   console.log (\"beautified \"+n+\" tables in output...\");\n};\nbootstrapify_mdcell = function(){\n   debugger;\n   arg2 = arguments[1];\n   c = arg2.cell;\n   ele = c.element;\n   tbls = ele.find(\"table\");\n   tbls.addClass(\"table table-condensed table-nonfluid\");\n   n = tbls.length;\n   console.log (\"beautified \"+n+\" tables in md...\");\n};\n\n$([IPython.events]).on(\"notebook_loaded.Notebook\", bootstrapify);\n$([IPython.events]).on(\"kernel_ready.Kernel\", bootstrapify);\n$([IPython.events]).on(\"output_appended.OutputArea\", bootstrapify_output);\n$([IPython.events]).on(\"rendered.MarkdownCell\", bootstrapify_mdcell);\n</script>'\n    IRdisplay::display_html(html)\n    IRdisplay::display_html(js)\n    cat(\"Added bootstrap code to beautify tables...\\nRemember to 'File > Trust' the notebook to make this available on the next load.\")\n}\nbootstrapify_tables()\n```\n And a lesson learned: having errors in one of the js code during nb loading prevents the rest of the cells from showing up and then saving the nb destroys the notebook content for all cells after... Would probably only fixable by removing the content from the ipnb file directly...\n Yikes, that really shouldn't happen. I keep fixing bugs like that, but they keep turning up.\n @minrk The above was simple a \"var is not initialized\", as far as I remember like this:\n\n``` js\nbootstrapify_mdcell = function(){\n   debugger;\n   arg2 = arguments[1];\n   c = arg2.cell;\n   ele = element; // missing the `c.` in front of element\n   tbls = ele.find(\"table\");\n   tbls.addClass(\"table table-condensed table-nonfluid\");\n   n = tbls.length;\n   console.log (\"beautified \"+n+\" tables in md...\");\n};\n$([IPython.events]).on(\"rendered.MarkdownCell\", bootstrapify_mdcell);\n```\n\n-> display as js, add a md table in the second cell in the nb, add more cells below, save, reload notebook, see it break :-/\n So, I will add that js somewhere that it is run in every notebook of mine and then look what it does with pandas tables and how using styled tables affects my working ... ~~if I get this d**\\* extension working https://github.com/ipython-contrib/IPython-notebook-extensions/pull/524~~ (and it works now)\n There is now a notebook extension, which does this: https://github.com/ipython-contrib/IPython-notebook-extensions/pull/524\n @gnestor while there is an extension, I think there's still plenty of room for improving the default table style. @janschulz do you want to make a PR based on your experience with the extension so far?\n Weird, this Issue should have the wishlist milestone, but it appears to be gone. Marking as backlog for now, though I don't know what that means.\n @minrk Ok, sorry for assuming it had been resolved. \n\n@ellisonbg renamed the _wishlist_ milestone to _backlog_ (as in agile development backlog) for this repo and ipywidgets.\n OK. I guess we should add the wishlist milestone back, then? To me, backlog (not dealt with yet, needs triage) doesn't mean what we meant by wishlist (no immediate plans to deal with, volunteer contribution welcome). In fact, it seems a bit opposite in terms of what it means for where I should be focusing my attention.\n @minrk Sorry, I won't have time in the near future to work on this :-/\n I don't have much time at the moment either, but for some guidance on what would be nice from pandas' prospective. Ideally with this small patch to pandas\n\n``` diff\ndiff --git a/pandas/formats/format.py b/pandas/formats/format.py\nindex e508998..fa866b9 100644\n--- a/pandas/formats/format.py\n+++ b/pandas/formats/format.py\n@@ -992,7 +992,7 @@ class HTMLFormatter(TableFormatter):\n         indent = 0\n         frame = self.frame\n\n-        _classes = ['dataframe']  # Default class.\n+        _classes = ['dataframe', 'table', 'table-condensed']  # Default class.\n         if self.classes is not None:\n             if isinstance(self.classes, str):\n                 self.classes = self.classes.split()\n```\n\nwe'd get the nicely formatted output. With that patch, I see\n\n![screen shot 2016-09-14 at 4 46 55 pm](https://cloud.githubusercontent.com/assets/1312546/18534674/45ceb6e2-7ab3-11e6-9707-cb9b66d87dac.png)\n\nFrom poking around most of the styling comes from `.rendered_html tr, .rendered_html th, .rendered_html td, .rendered_html table, tr`. Hope that helps.\n I'm working on PR to update table styles to match JupyterLab: https://github.com/jupyter/notebook/pull/1776\n Closing as #1776 improved the default table style.","The problem seems to be the dollar, as this works:\n\n```\n| Tables   |      Are      |  Cool |\n|----------|:-------------:|------:|\n| col 1 is llalalala |  left-aligned | 1600 |\n| col 2 is |    centered   |   12 |\n| col 3 is | right-aligned |    1 |\n```\n Dollar signs are used to delimit Latex maths expressions. You probably need to escape them (somehow) to use a literal dollar sign. I think this is a ~inevitable consequence of using a concise, not completely specified syntax. \n even over a linebreak? Anyway, it seems that pandoc agrees with your assessment: https://github.com/jgm/pandoc/issues/1127#issuecomment-33402014\n This works:\n\n```\n| Tables   |      Are      |  Cool |\n|----------|:-------------:|------:|\n| col 1 is |  left-aligned | \\$1600 |\n| col 2 is |    centered   |   \\$12 |\n| col 3 is | right-aligned |    \\$1 |\n```\n","I think this is because unused attachments are garbage collected on notebook save (this should only happen for manual save though).\nI'm not sure how to fix that, short of trying to determine if an attachment is present in the clipboard.\n > I'm not sure how to fix that, short of trying to determine if an attachment is present in the clipboard.\n\nyou could garbage collect only what is sent on the wire, not what is in memory in the frontend. \n\nit's probably a matter of using `copy` at the right place. \n The garbage collection is done on the JS side. So as soon as you cut the content from the markdown cell, there is now way for the JS to know if it was erased or put in the clipboard. \n\nThe solution I see is to have the garbage collection happen on the python side, so the attachments are kept in memory on the JS side until the tab is closed. If I understand correctly, this is the solution you proposed.\n > The solution I see is to have the garbage collection happen on the python side, so the attachments are kept in memory on the JS side until the tab is closed. If I understand correctly, this is the solution you proposed.\n\nNo you don't need to, just don't mutate that current state client side and send a cleaned **copy** of the json. \n\n```\nNotebook.prototype.save = function(){\n    var json = this.to_json()\n\n    var cleaned_json = remove_garbage(json)\n\n    this.content.manager.save(cleaned_json)\n}\n```\n Ah that's smart ! Will do this, thanks.\nOn Mar 11, 2016 9:14 PM, \"Matthias Bussonnier\" notifications@github.com\nwrote:\n\n> The solution I see is to have the garbage collection happen on the python\n> side, so the attachments are kept in memory on the JS side until the tab is\n> closed. If I understand correctly, this is the solution you proposed.\n> \n> No you don't need to, just don't mutate that current state client side and\n> send a cleaned _copy_ of the json.\n> \n> Notebook.prototype.save = function(){\n>     var json = this.to_json()\n> \n> ```\n> var cleaned_json = remove_garbage(json)\n> \n> this.content.manager.save(cleaned_json)\n> ```\n> \n> }\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1185#issuecomment-195528112.\n","This should be doable, I'll look into it.\n > This should be doable, I'll look into it.\n\nGreat ! Thanks !\n","+1. I'd also appreciate a 4.1.1 :D \n Tested to work\n Thanks, @yuvipanda!\n","Have you tried the 'Running' tab in the dashboard?\n Yes, that's better. It's still a lot to scroll (first up to the tab, then shutdown the  notebook, then back to the filetree and there scroll down to the open another notebook :-/), but most of it is gone... I would still find a dropdown or button in the file based view more usefull.\n\nFun, I never even realized that tab was there, probably because I once explored these tabs and they were useless for me on windows (terminal) and without a cluster. I never realized the open notebooks were moved there as well.\n Thanks for the feedback. \n\nPing @ellisonbg that care about design. \n\nAt think the plan is to add filtering and have the top bad with action static so that it does not scroll up.\n","This is an issue of your math being interpreted as HTML. Your `<k` is being interpreted as opening a `<k>` HTML tag, which then includes the rest of the document, hence the apparent truncation. There are subtle differences (not intentional ones) in how we handle math in markdown between the browser and nbconvert. In this particular case, you can avoid the issue by putting space around `<`: use `j < k` instead of `j<k` and it should be happy.\n Aha. Subtle but simple. Surrounding `<` with spaces did the trick. Thank you very much.\n","> Adding a theme menu to the notebook homepage\n\nSee my 2 first blog posts on that : http://carreau.github.io/2013/index.html \nHome page might not be necessary, and configuring the theme might be configuring  a variable in a config file, it's ok for the time being. \n\n> To implement the theme menu we could have it display the contents of the theme folder. Once the user selects a theme we run gulp automatically to regenerate the css. If the user has LiveReloading running in their browser it should automatically update.\n\nGulp is only a developer dependency, so themes can be supposed to be already built. \n\nThe submitting theme to this or another repo is not really first priority, the thing that is missing is **a tool to build a theme given a less file**.\n\nThe problem with https://github.com/nsonnad/base16-ipython-notebook is that [their files](https://github.com/nsonnad/base16-ipython-notebook/blob/master/ipython-3/templates/-dark.css.erb#L48-L50) are by design a copy and past of [ours](https://github.com/jupyter/notebook/blob/b536da10d871f87729d3c9a6269a13bf61779213/notebook/static/notebook/less/cell.less#L1-L17). As ours get changed, theirs are out of sync automatically. And frankly you don't build css with a templating engine.\n\nOnce you get the tool to build css-theme **using IPython less files** and the **themes `variable.less`** the rest a is a detail. \n I read through your links and I understand what's going on a little better. I need a few days to play around with this. I'll rewrite the proposal once I get a better feel for things.\n I've played around with theming a bit too.  One approach is to set the theme as a class name on the body element, and make the new theme and the IPython theme both specialized to the body class name.  This lets you easily customize styling based on the body class.  I can imagine that you may want each theme to at least declare itself as a light or a dark theme (via a body class, for example), to give arbitrary 3rd party widgets a chance to change default theming depending on the background.\n > I've played around with theming a bit too. One approach is to set the theme as a class name on the body element, and make the new theme and the IPython theme both specialized to the body class name. This lets you easily customize styling based on the body class.\n\nThis is irrelevant to the discussion, and you are deciding of the color of the car before realizing you are building a submarine.\n\nHow do you even get the theme css on the page before switching the class ? I don't want to send everything at once if there is 50+ themes. Though the body class allow some [nice things (wait for it)](http://evil-icons.io/).\n\n.less have some conditional base on luminosity. So you might not need to declare yourself as dark or light.\n So after playing with this a little here's what I came up with. We can use an outside program to compile the .less files. So in this case I'm using koala to compile a clone of the /static/ directory. This way people that just want to do themes don't have to install the whole build environment. Also, koala will watch the .less files for changes and automatically compile the css when changes are made. From there I'm dumping the output into the custom css directory (/users/xxxxx/.ipython/). It's works pretty well.\n @Carreau, my comments about setting a class on the body are complementing the points on this PR, not replacing them.  I think we definitely should have some way to dynamically load themes.\n\nA use-case I'm considering is a 3rd party widget that provides its own styling, and doesn't know if it will be run in a dark or a light-themed notebook.  Using less to have conditionals based on luminosity works if the less is dynamically compiled, but won't if the less is precompiled in the plugin, right?\n @AFJay I don't know what koala is, but if you have a nice way to create theme that inherit from IPtyhon .less that would be great. If an example script could be part of IPython and explain how to do themeing easily, that would be great. \n\n@jasongrout Sure, I just don't want people to start planning too far in advance, dynamically loading theme is not to hard with requirejs. The tricky bit is as usual to put the themes in the right location and having a way to list them. \n\nGood point about custom widgets that ship their own css, though I already unsure on how widget would ship css. the `.light` or `.dark` class on body would then make sens.\n K I'll start working on doing the documentation. I'm still figuring out how to do live reload as you update the css but that shouldn't be too hard. For theme switching I'll adopt the code you posted on your blog (maybe using a config file). The last piece of the puzzle is were to put the theme directory. I'm also going to start working a nice theme.  Once I'm done I'll submit a PR (documentation, example theme and code).\n One step at a time, the code on my blog is old and proof of concept. \nLive-reload might be hard the way this work now, but we can try gulp-livereload. Don't worry on that. \nI found [koala](http://koala-app.com/), I would much prefer not have a gui tool, so that we can test css-generation on things like travis-ci, so that you are sure themes are up to date. And I would like to avoid yet another tool. \n\nDon't wait to be done before opening a PR, it's easier to open a PR early and iterate on it. We don't want people to go completely the wrong way immediately. \n So roughly, I looked a gulp a bit, I acchieve something like [this](https://github.com/jupyter/notebook/compare/master...Carreau:theme) which allow you to build IPython theme in a normal way: \n\n```\ngulp css\n```\n\nthough if you have a `red.less` file and a `blue.less` file in current working directory, you can do a \n\n```\ngulp css --theme blue.less\n```\n\nor \n\n```\ngulp css --theme red.less\n```\n\nAnd it will compile a blue (or red) theme.\n\nIt stays far from perfect as it probably don't catch errors of un exiting theme, do not allow you to decide of a destination folder. Does not infer the theme filename from the `<xxx>.less` file. \nIt should also most likely be updated to get as a parameter the name of the codemirror theme and concatenate its css with the theme.\n\nAlso as I concat the files as a hack the sourcemaps are probably wrong.\nThough that the kind a way of building themes that I thing we should aim for. \n I feel that this is the easiest way to get people developing themes the right way. In koala you can set it to use an external compiler so we can still use less/lessc (if there's a compatibility issue). For the purposes of building the themes from the developer environment we could just have gulp compile the .less files like it's done now. As long as people are using the original .less files as a reference I see no trouble with making the corresponding themes maintainable. However, the problem with using gulp as the tool to compile .less files from a theme designer stand point is that you need to have the whole iPython build environment. Where as using koala or another self contained option is just a matter of installing it setting it up and using the files that are already present in a default notebook install. \n\nI'm pretty new to gulp but I found this on stack exchange. http://stackoverflow.com/questions/30218442/how-to-detect-css-theme-and-work-only-with-this-theme . I was thinking we could do something like that on the build side.\n Fair point for people that develop themes without wanting the full IPython dev env. Though they would still need to get the sources of IPython, and lessc to build the themes. So it's just a matter of wether then n+1 software need to build themes is gulp or koala. \n\nThe SO link seem useful. \n The .less files are included in the install files. So you don't need the ipython sources to develop a theme if you use an outside compiler. Which is good because I suspect that a lot of people who want to develop themes don't necessarily want to install the latest build. They'd probably want to install iPython using their package manager or whatever. The downside is that people will submit themes to the repo based on older versions of iPython but so long as they include the .less files along with what version they came from it shouldn't take too much to update them if something is broken.\n > The .less files are included in the install files\n\nIn the wheel too ? I thought they were included only in sdist. \n I found them here: /usr/share/ipython/notebook/static/notebook/less/ . I'm not sure if this has changed with latter releases but it wouldn't be a bad idea to include them.\n Most people that will use wheel won't really care about these file. It's like distributing `.c` file with a binary. It's also relatively  difficult to know what distribution like Debian will do with less file. So it is hard to make assumptions on wether the file will be present when you install IPython with package manager X. \n I create my own Jupyter notebook theme by Stylish add-on, which is available from Firefox and Chrome. I also add syntax customizing options, though you need to customize every syntax by yourself.\n\nIn my opinion, white theme is really harmful to eye and sight. Wish some people also benefit from this work.\nURL: https://userstyles.org/styles/98208/jupyter-notebook-dark-originally-from-ipython\n The reason I use a templating engine for [my themes](https://github.com/nsonnad/base16-ipython-notebook) is that [base16-builder](https://github.com/chriskempson/base16-builder) already has a ton of really great color schemes defined as YAML. I agree that copying the CSS) from Jupyter/IPython and applying these colors is silly. However, we are doing a lot of extra work if we throw out those base16 color schemes; they are very diverse and well done.\n\nThe issue is that with less and most CSS preprocessors there is not a way to dynamically set variables from outside. Hence we need to pass them through a templating engine. Perhaps it would be best to pass only a [`variables.less`](https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/less/variables.less) through the template, creating one for each theme? Otherwise we will have to modify less so that it is able to have variables overridden from outside, or we need to manually create a bunch of `variables.less` files.\n I'm not sure that will work. I can't come up with a solution I'm happy with. The problem is that all of the tools being used to manage jupyter's css are designed for a web server environment. However, the process now is to build the css when the package is built. We might want to just create a way to manage css version compatibility and leave the maintenance up to the community.\n I've added a PR demonstrating my approach. It's not finalized but I think this could be a good first step https://github.com/jupyter/notebook/pull/179\n The theme linked to by @stbinan above is excellent, except it doesn't handle matplotlib so well ... can't read the axes of my plots! any thoughts on how to fix (aside from changing colors in matplotlib plot arguments... which would present trouble for making portable to other machines) ?\n you can set img.background to white in css. should help\n\nOn Fri, Aug 21, 2015 at 12:35 AM, watsonix notifications@github.com wrote:\n\n> The theme linked to by @stbinan https://github.com/stbinan above is\n> great, except it doesn't handle matplotlib so well ... can't read the axes\n> of my plots!\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/119#issuecomment-133203226.\n","Likely possible but not too easy. \n\nI would suggest using Shift-Tab/Space to toggle the button. The  search field should be automatically refocused.\n Yes that works just fine for what I need. I just thought it might be easy\nwith all the other shortcuts already implemented and it being in its own\npop-up box. But of note when you toggle the all code blocks or just the\nselected code blocks with space it seems to send you to the replace instead\nof the seach. The other two send you to replace but maybe because when you\ntoggle that it runs a check even if the fiels are empty and says nothing is\nmatching. Anyways tahnks for the help.\n\nOn Thu, Mar 10, 2016 at 3:30 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Likely possible but not too easy.\n> \n> I would suggest using Shift-Tab/Space to toggle the button. The search\n> field should be automatically refocused.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1190#issuecomment-194379804.\n No problem, one thing that would be helpful is try to think which shortcut for what action.\n Yeah that is tough as I think many things will interfere with  the built-in functions of the browser. Maybe the F keys could be used or ctrl+. for blocks. Then ctrl+[ and ctrl+] for case-matching and regex( assume that's the middle option.)\n","If we make it html, it would them become possible to actually attack people with docstring. \n\nThe other question is how do you put HTML in docstrings which is easy to write, and appear as normal text when using a terminal ?\n cf https://github.com/ipython/ipython/pull/9304\n @blink1073 is right, I think @SylvainCorlay work on using `docrepr` could help to solve this case too.\n Markdown would be good as an alternative - not sure if it's more secure\nthan HTML.\nOn Mar 10, 2016 11:21 AM, \"Carlos Cordoba\" notifications@github.com wrote:\n\n> @blink1073 https://github.com/blink1073 is right, I think @SylvainCorlay\n> https://github.com/SylvainCorlay work on using docrepr could help to\n> solve this case too.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1192#issuecomment-195006613.\n > If we make it html, it would them become possible to actually attack people with docstring. \n\nI don't think HTML docstrings can do anything that couldn't already be done by the Python code the docstring comes from. So let's not worry about that.\n Since the tooltips are produced from inspection messages, and the inspection result is a mime-bundle, HTML should definitely be supported.  We just haven't gotten to the point of refactoring the mime-bundle code into a reusable state. Moving forward, we should probably be using [transformime](https://github.com/nteract/transformime) for the various places we have put mime-bundles on the page.\n","Thanks for opening this issue, @mgeier!\n\nI think the best approach would be to move [the information](https://jupyter-notebook.readthedocs.org/en/latest/development_js.html) about the development set up for the JavaScript components into the the steps in the [code contribution guide](http://jupyter.readthedocs.org/en/latest/contrib_guide_code.html). The information in the ReadTheDocs page is probably the most relevant but should be updated to include some new changes we made via the introduction of Webpack. See #1047.\n\nCalling in @willingc, who is our fairy godmother of documentation, for her thoughts.\n @mgeier Welcome! Nice to see the friendly face of  the `nbsphinx` project here. I'm sorry for the development installation goosechase. You are absolutely correct that we need to simplify and centralize the development installation. Thanks for your offer to help with a PR, and we will take you up on your offer.\n\n@captainsafia Thanks for giving me the heads up. Since you are more familiar with the Javascript process and plans, would you mind guiding @mgeier on any questions and/or insights for upcoming changes?\n\nHere's my current thinking (though I am open to other suggestions) about what would be helpful.\nFirst, as an aside, @mgeier, there are two repos that we'll be working with jupyter/jupyter and jupyter/notebook. Safia, I would like to view the jupyter/jupyter repo as a general umbrella for all Project Jupyter development, and jupyter/notebook repo as docs specific to the Notebook.\n\nI'm leaning toward keeping general code contribution info in the guide that Safia mentions in jupyter/jupyter. We can add general JS tips for setting up a dev environment there (my assumption here is that these tips would be helpful whether working on the notebook, widgets, extensions, or future projects. \n\nIn the jupyter/notebook repo, let's put notebook development installation specifics to get up and running. This document would be the definitive \"how to install a dev environment for the notebook\". After this is done, we can link the CONTRIBUTORS doc and README, as well as the code contribution guide in jupyter/jupyter, to it.\n\nAs a work plan,  we can divide and conquer:\n\n_Changes for jupyter/notebook repo_\n- [ ] Rename Development Documentation to Contributor Documentation\n- [ ] Clean up the [Development Intro Index](https://github.com/jupyter/notebook/blob/master/docs/source/development_intro.rst) which leads to a confusing repetition of topics in the sidebar\n- [ ] Expand and edit the [Installing JS machinery](https://github.com/jupyter/notebook/blob/master/docs/source/development_js.rst) so it has the detailed instructions of setting up a development environment for the Notebook.\n- [ ] Update CONTRIBUTOR and README\n\n_Changes for jupyter/jupyter repo_\n- [ ] Add tips on general JS development\n- [ ] We're probably at the point where we can begin linking to the Contributor Documentation in individual repos. Perhaps a one page doc that links out to the Contributor Documentation sections of each project's docs.\n\nThoughts? Comments? :cookie: :cookie:\n Thanks for the positive response!\n\nI agree with the work items but I'll only be working on the jupyter/notebook repo.\n\nI'll come back to you with some questions in the next few days ...\n @mgeier Great!\n\n> I agree with the work items but I'll only be working on the jupyter/notebook repo.\n\nSounds good. I would appreciate your help, as someone who recently did this, with:\n\n> - [ ] Expand and edit the Installing JS machinery so it has the detailed instructions of setting up a development environment for the Notebook.\n\nFeel free to ask questions as they come up. @captainsafia is a great resource for JS and the notebook.\n OK, here comes a first bunch of questions. I've numbered them for easier answering ...\n1. In the current docs I found 3 links about general guidelines for contributing. Which of the following should I use?\n   - https://github.com/ipython/ipython/blob/master/CONTRIBUTING.md\n   - http://jupyter.readthedocs.org/en/latest/contrib_guide_code.html\n   - http://jupyter.readthedocs.org/#contributor-documentation\n2. Is `python setup.py js css` necessary _initially_ when running `pip install -e .`?\n   If yes, before or after?\n3. Is the Debian/Ubuntu package `python-dev`/`python3-dev` necessary?\n   IOW, does anything have to be compiled?\n   BTW, should we suggest to install `python3-tornado` and `python3-jinja2` with the package manager (instead of implicitly with pip)?\n4. The FreeBSD instructions seem outdated (using Python 2.7 and `requirements.txt` which doesn't seem to exist anymore.\n   Also, the instructions mostly just show how to use a virtualenv, which doesn't seem FreeBSD-specific to me.\n   I don't know anything about FreeBSD, who can update the instructions?\n   Or shall we just drop them?\n5. Should `python setup.py jsdeps` be documented?\n   AFAICT, this is always called automatically, right?\n   What about the `-f` flag? Shall we document that?\n   Apart from that, the command raises an error if I try to use it:\n   \n   ```\n   $ python3 setup.py jsdeps\n   Traceback (most recent call last):\n    File \"setup.py\", line 199, in <module>\n      main()\n    File \"setup.py\", line 196, in main\n      setup(**setup_args)\n    File \"/usr/lib/python3.5/distutils/core.py\", line 134, in setup\n      ok = dist.parse_command_line()\n    File \"/usr/lib/python3.5/distutils/dist.py\", line 472, in parse_command_line\n      args = self._parse_command_opts(parser, args)\n    File \"/usr/lib/python3.5/distutils/dist.py\", line 544, in _parse_command_opts\n      raise DistutilsClassError(msg % cmd_class)\n   distutils.errors.DistutilsClassError: command class <class 'setupbase.JavascriptDependencies'> must provide 'user_options' attribute (a list of tuples)\n   ```\n6. Is building the docs documented somewhere?\n7. How is `make.bat` supposed to be used?\n   Wouldn't it be better to use a platform-independent `python setup.py build_sphinx`?\n   This is probably worth a separate issue ...\n 1. I don't think those are mutually exclusive. The first is supposed to have a short summary, the third is a more detailed set of contribution docs, and the second is part of the third.\n2. I believe that `pip install -e .` should run the css & js builds automatically, so `python setup.py css js` is only needed later on when you've updated master or changed the code yourself.\n3. The -dev packages are needed if installing pyzmq from pip, which will have to build it from source. In general, I probably wouldn't recommend people get deps from apt, because they may be out of date (especially for users on Ubuntu 14.04), and the instructions have to change slightly between Python 3 and Legacy Python.\n4. The FreeBSD instructions probably are out of date. I think a FreeBSD user stopped by at one point during the big refactoring and added them. I'd prefer to try to make as much of the instructions as possible platform-neutral.\n5. I think that command should be automatically called when necessary, so let's leave it undocumented for now.\n6. Not sure. @willingc , any description of how to build the docs?\n7. When you set up Sphinx docs, it creates `Makefile` for Unix platforms and `make.bat` for Windows platforms. We ~always build the docs from Unix, so I've never looked into `make.bat`, but I assume Windows users who are familiar with Sphinx will know what to do, so we leave it in place. Sphinx does already provide a cross-platform `sphinx-build` command, but I don't know what options it needs off the top of my head. I don't think we should start trying to build custom solutions here - if you want to improve that infrastructure, that's something to do in Sphinx.\n @mgeier Here are a few more points. Thanks @takluyver for the responses :smile:\n1. I think all of the links that you mentioned could be used. It would depend on the context of how you are using them. The first is the IPython Contributor guidelines which are still used by IPython and in many cases the culture for Jupyter as well. The second is the general information about contributing source code to a Jupyter project; while the third gives information on the many ways that individuals may contribute to the projects.\n2. I believe @takluyver is correct that you do not technically have to run `python setup.py js css` after the initial installation. It is required to be used when the JS/CSS/LESS files are changed.\n3. Agree with @takluyver here. In general I would recommend pip (or conda) over using the OS package managers since many of the OS package managers use dated versions. Please use pip for tornado and jinja2.\n4. I think the FreeBSD should be removed from the README. I'm ok with it being in the developer documentation though I wonder if it is really necessary.\n5. Let's not mention or if you feeling strongly that there is a reason to mention, I'm cool with a sentence on it that mentions it is automatically called.\n6. The general contribution guide has a section that explains [how to contribute to the docs](https://jupyter.readthedocs.org/en/latest/contrib_guide_docs.html). For now, I would just refer people to there.\n7. I would prefer to keep it simple on this. For now, let's just refer to the general contribution guide for docs for most cases (people adding content) that will be sufficient. \n\nThanks for all the thoughtful questions. Feel free when you are ready to open a WIP PR. I imagine that there will be more specific questions :smile:\n @takluyver, @willingc Thanks for your responses!\n\nI've created a PR: #1208.\n1. I used only http://jupyter.readthedocs.org/#contributor-documentation, because even if it doesn't contain all the relevant information from the other two yet, it definitely should. And I'm trying to simplify things here ...\n   Also, [Jupyter on your system](http://jupyter.readthedocs.org/en/latest/system.html) should not be part of the \"contributor documentation\". I don't have the energy right now to create issues for that, let alone PRs.\n2. OK, that's good to know. I moved it from the initial build steps to another section.\n3. I followed your suggestion to use pip to install the dependencies, but I mentioned the OS packages for people like me who prefer to install OS packages for those.\n4. I removed the FreeBSD stuff\n5. I removed the \"jsdeps\" stuff\n6. I added step-by-step instructions and linked to the Project Jupyter docs\n7. I just clumsily mentioned `make.bat`, since I'm not a Windows user either\n\n@takluyver said about `python setup.py build_sphinx`:\n\n> I don't think we should start trying to build custom solutions here - if you want to improve that infrastructure, that's something to do in Sphinx.\n\nI'm not at all suggesting a custom solution, on the contrary!  That command should run out-of-the-box with `setuptools` if Sphinx is installed. This would automatically make everything cross platform and would actually be much simpler than handling the bulky `Makefile`. But since you are a `setuptools` hater I guess this will never happen, right?\nOr shall I make an Issue for that?\n\nJust as a side note: I think it was a ridiculous choice of the Sphinx people to force the ugly `Makefile` and `make.bat` onto its users instead of providing reasonable command line options to `sphinx-build`. Actually `sphinx-build` can nowadays be quite easily used, see http://nbsphinx.readthedocs.org/en/latest/usage.html#Running-Sphinx.\nBut `setuptools` would make this even easier!\n I don't want to involve the packaging machinery in building docs.\n @takluyver I agree. \n Coming back to a point made by @takluyver:\n\n> In general, I probably wouldn't recommend people get deps from apt, because they may be out of date (especially for users on Ubuntu 14.04),\n\nI just installed Ubuntu 14.04.4 on VirtualBox and installed Python3 _without_ installing the `python3-dev` package.\nThen I did\n\n```\nsudo apt-get install python3-zmq python3-tornado python3-jinja2\nsudo apt-get install nodejs-legacy npm\n```\n\n... and afterwards:\n\n```\npip install setuptools pip --upgrade --user\ngit clone https://github.com/jupyter/notebook\ncd notebook\npip install -e . --user\n```\n\nIt worked perfectly without errors, I could start and successfully use the notebook with IPython3.\n\nI ran the `nosetests`, which produced a lot of garbage-y looking output but in the end said:\n\n```\nRan 194 tests in 18.767s\n\nOK (SKIP=7)\n```\n\nSo I guess there are no problems after all?\n\n> and the instructions have to change slightly between Python 3 and Legacy Python.\n\nYou mean that the packages are called `python3-tornado` instead of `python-tornado`?\n\nI think we should stop advertising Python 2.\nSure, Python 2 should still be _supported_, just not documented.\nI'm sure people who _have_ to use Python 2 will know that they'll have to use `python-tornado`.\n\nIn the documentation (and this regards all things that I write documentation for, not only the Jupyter Notebook), I try as best as I can to follow best practices for each of the mentioned OSs.\nAnd in case of Debian-based systems I highly recommend to install PyZMQ and Tornado from their `deb` packages instead compiling them with `pip`.\nIn case of Jinja2 it doesn't matter, because nothing seems to be compiled there.\n > Ubuntu 14.04 ... It worked perfectly without errors\n\nI'm pleased it does currently, but that may not always be the case, and we may want to use dependencies that are not packaged in Ubuntu. So I think it's easiest to install dependencies with pip/conda where possible.\n\n> You mean that the packages are called python3-tornado instead of python-tornado?\n> I think we should stop advertising Python 2.\n\nYep, that's what I mean. I'm fine with the development instructions pointing people to Python 3, but note that on Ubuntu (and many Linux distros) you may need to use `pip3` rather than `pip` to install the notebook itself. That makes the instructions less broadly applicable.\n @takluyver Most of this isn't urgent anymore, see https://github.com/jupyter/notebook/pull/1208#issuecomment-196850314\n\nI still would like to explain my view of things ... probably this can be changed at some point in the \"normal\" installation instructions ...\n\n> I'm pleased it does currently, but that may not always be the case\n\nDon't be so pessimistic!\n\n> we may want to use dependencies that are not packaged in Ubuntu\n\nSure, not a problem.\nHasn't been a problem now, won't be in the future.\n\nActually, as far as I've learned until now, the only packages I would suggest to install with the package manager are `python3-zmq` and `python3-tornado`.\nThat's because those have to be compiled locally otherwise.\n\n> I think it's easiest to install dependencies with pip/conda where possible\n\nSure, except for `python3-zmq` and `python3-tornado`.\n\nAnd I'm talking (and have talked) only about a plain old Debian/Ubuntu system using the OS's Python packages.\n\nConda might be a different story, I don't know if those packages have to be compiled there (I tried it for Windows, where I didn't see any compilation and I didn't have to install any development stuff, which is good).\n Oh, and I forgot:\n\n> note that on Ubuntu (and many Linux distros) you may need to use `pip3` rather than `pip` to install the notebook itself\n\nI know, and that's unfortunate.\n\nIt would be nice if all systems had `python3` and `pip3` executables, does Anaconda/Python3.x have them?\nA Python3 `venv` does have them (in addition to `python` and `pip`), so there it would work if all instructions would only use the 3-annotated binaries.\n\nOn the long run it would probably be better to use `python3` and `pip3` exclusively in the documentation, right?\n @mgeier Thanks for your enthusiasm and recent changes. I want to be cautious about focusing on the balance between simplification and respect for developer use cases that may not be Python 3 centric and/or Linux centric.\n\nI would like to make sure we keep the distinction between end user documentation and contributor documentation clear since, in my experience on the project, users and contributors have different needs and goals.\n\n@takluyver, after working on this project for years, has a unique perspective for the breadth of ways the notebook and other Project Jupyter projects work together. I know that I, personally, take pause when he comments on things. We don't always entirely agree but I respect his viewpoint. More often than not, Jupyter benefits since merging our ideas together usually improves the end result.\n\nSo, let's keep iterating here :smiley:\n\nAs an FYI re: pip3, the recent versions of pip eliminate the need for using pip3.\n > It would be nice if all systems had python3 and pip3 executables, does Anaconda/Python3.x have them?\n\nIn my installation, it has a `python3` symlink but not `pip3`. \n\n> As an FYI re: pip3, the recent versions of pip eliminate the need for using pip3.\n\nDo you mean using `python3 -m pip`? I'm pretty sure that the `pip` command in Debian-based distros (Ubuntu, Mint, etc.) will continue to be Python 2 pip for some time yet.\n I'm trying to summarize the options mentioned above:\n1. `pip install ...`: should work on all Python3-only systems (including `venv`s), but will likely install the wrong thing on mixed Python2/3 systems.\n2. `pip3 install ...`: should work on many systems, but not on Anaconda. Python2 users just have to drop the \"3\".\n3. `python3 -m pip install ...`: should work on all systems. Python2 users just have to drop the \"3\".\n\nDid I miss anything?\n\nThe more I think about it, the more I like the last option. It looks a bit awkward at first, but I think I can get over that.\n\nIt has several advantages:\n- It is a clear statement that Python 3 should be used\n- It is easy to experiment with different Python version, e.g. `python3.4` vs `python3.5`\n- Many commands in the docs will look more consistent when using `python3 -m pip ...` and `python3 setup.py ...`\n\nThe same thing could also be used for `python3 -m venv`, but this'll have to be changed to `python -m virtualenv` for Python 2.\n `python3 -m pip` is the least ambiguous, and what I use when I have a bunch of Pythons lying around (more generally `/path/to/python -m pip`). It's not clear to me what's best for newcomers, though. My personal preference is probably for using `pip install` everywhere, and including a note at the top, explaining that in some cases `pip` may not point to the Python you want, in which case `/path/to/python -m pip` can be used to ensure packages are installed with a particular Python. I'm not sure if that's too verbose for people, though.\n\nRe: FreeBSD instructions, I do think they should be removed, and I also think that we shouldn't include instructions for setting up a virtualenv.\n For future reference: in this issue a few interesting points were discussed which were not part of #1208 (which closed this issue). I'm trying to summarize them here:\n\n@willingc mentioned a few things in https://github.com/jupyter/notebook/issues/1193#issuecomment-195887000:\n\n> _Changes for jupyter/notebook repo_\n> - [ ] Update [...] README\n> \n> _Changes for jupyter/jupyter repo_\n> - [ ] Add tips on general JS development\n> - [ ] We're probably at the point where we can begin linking to the Contributor Documentation in individual repos. Perhaps a one page doc that links out to the Contributor Documentation sections of each project's docs.\n\nIn https://github.com/jupyter/notebook/issues/1193#issuecomment-196488491, I mentioned that http://jupyter.readthedocs.org/#contributor-documentation should include the information from https://github.com/ipython/ipython/blob/master/CONTRIBUTING.md (if it doesn't already).\nThere should probably also be a link from the latter to the former.\n\nI also mentioned that [Jupyter on your system](http://jupyter.readthedocs.org/en/latest/system.html) should not be part of the \"contributor documentation\".\n\nIn https://github.com/jupyter/notebook/issues/1193#issuecomment-196857596, I suggested to suggest this in the general Notebook installation docs (or even in the general Jupyter installation docs?):\n\n```\nsudo apt-get install python3-zmq python3-tornado\n```\n\nThen there was a very interesting discussion about making the `pip` commands more consistent, e.g.: https://github.com/jupyter/notebook/issues/1193#issuecomment-198765187\n\nI think using `python3 -m pip install` everywhere would be good.\nIn which context/form should this be discussed further?\n\nFinally, I'd like to continue the discussion about `python3 setup.py build_sphinx`:\n\nI said in https://github.com/jupyter/notebook/issues/1193#issuecomment-196488491:\n\n> I'm not at all suggesting a custom solution, on the contrary!  That command should run out-of-the-box with `setuptools` if Sphinx is installed. This would automatically make everything cross platform and would actually be much simpler than handling the bulky `Makefile`. But since you are a `setuptools` hater I guess this will never happen, right?\n\n@takluyver said:\n\n> I don't want to involve the packaging machinery in building docs.\n\n@willingc said:\n\n> I agree.\n\nBut why?\nAre there any practical disadvantages?\n\nBTW, in the meantime I found out that this can even be done without using `setuptools` using [sphinx.setup_command.BuildDoc](https://github.com/sphinx-doc/sphinx/blob/master/sphinx/setup_command.py). `setuptools` would just do this automatically.\n","That feel like something you should ask on the IPython-sql author, which I guess is this one:\n\nhttps://github.com/catherinedevlin/ipython-sql\n\nWhich is mostly unrelated to this repository. \n\nI'm closing the issue as nothing we can do here, but feel free to keep asking question here. \nAnd we can reopen if it's our fault. \n\nThanks !\n I have started from scratch again, cleared the decks and this time it works.\nThanks for your input.\n",":+1: \n","Are you killing the kernel or the notebook server and all kernels? The\nkernels don't write the notebook files, so killing them should not cause\nthat. Is it possible to do a softer shutdown, I.e. sigterm, instead of hard\nkilling it?\n Sorry, it is the notebook server that is getting killed, so s/kernel/notebook server/g. Docker is [OOM killing](https://docs.docker.com/engine/reference/run/#user-memory-constraints) our [swarmspawner](https://github.com/data-8/jupyterhub-deploy/blob/master/roles/jupyterhub/files/swarmspawner.py) spawned containers when they want to use more than `extra_host_config['mem_limit'] = '2g'`.\n\nI think we can try to reduce the frequency of these events by setting a 2GB memory reservation and increasing the limit. I don't know how far we can take that given hardware constraints. If we disabled OOM for the container, it would just stall since the notebook server is the only thing running in the container and there's nothing else to free up.\n\nBut all that being said, can the notebook prevent zeroing out the .ipynb file under such conditions?\n We had more atomic writing before, but it caused problems with things like network filesystems and folders synced by services like Dropbox, so we got to what we have now.\n\nDoes the `.~filename.ipynb` backup contain a valid notebook with the contents you want? Our atomic-ish compromise should ensure there's always a usable copy of the notebook, even if it's in the backup file. However, trying to do anything reliably with filesystems is a big pain, so it might not be working as intended.\n Yes, the backup does contain a valid notebook. There are also older versions available as checkpoints.\n\nI'm sure it can be very difficult in trying to cope with various filesystems and filesystem like things. :)\n\nDoes it make sense to checkpoint during this write rather than use the .~filename.ipynb mechanism? That way the user has a way to easily restore it if necessary.\n Checkpoints are kind of different - we use that so that if a user deletes some cells just before an autosave, they still have their manual save as the checkpoint to go back to.\n\nI think that if the `~.whatever.ipynb` exists when the notebook server isn't running, that means that it died mid-save, and you should probably copy it back over `whatever.ipynb`.\n Is it feasible to make this easier for users? Worst case we'll have to tell them to save more frequently.\n\nWould it be possible if the .~ backup file could be implemented as a \"system\" checkpoint? That way our students could easily recover via \"Revert to Checkpoint\".\n We could check for the atomic intermediate on read, since in this situation:\n- 'true' notebook file is invalid\n- AND atomic intermediate exists\n\nwe know with some confidence that it died during an atomic write. In this case, we could restore the atomic intermediate, moving the bad file aside, just to be safe.\n Closed by https://github.com/jupyter/notebook/pull/1253\n","@cameronoelsen want to have a go at the visual design of this hover effect?\n Any new on visual design ? \n What would append if we merge that with an old version of codemirror ? Can we just remove the border on cell render ? So that at least this is in, and the behavior will just \"improve\" on next release of CM. \n This problem actually brought up a design issue related to the field being edited that I have seen for a little while. Currently when you are editing a cell and its the one selected (like in the example gif attached), the side indicator changes from blue to this green:\n\n![screen shot 2016-04-08 at 2 46 17 pm](https://cloud.githubusercontent.com/assets/6437976/14398691/0566f636-fd9b-11e5-9000-03caaee2f54a.png)\n\nBut, why do we need to change this color on the side when it is actually the cell being edited? To make it apparent to the user that it is the current cell being edited and that it is the one selected, couldn't we just make the cell itself turn from the gray background to white along with adding a blue glow that matches the blue on the left side showing it is the cell selected. This accomplished both tasks of showing which cell is being selected along with that it is in focus/editing mode:\n\n![editing](https://cloud.githubusercontent.com/assets/6437976/14398731/400654da-fd9b-11e5-9441-847ef5f9662e.png)\n\nUsing this method of cell selection enables us to then solely change the color of the hue of the glow around the cell to show that we are dropping an image into the cell/doing a different action than editing the text within the cell:\n\n![dropzone](https://cloud.githubusercontent.com/assets/6437976/14398840/2ef55046-fd9c-11e5-83ef-9ff22ed988ff.png)\n\nI think doing so also fixes some collisions in colors that we will face if we add yet another color to our Notebook UI. Thoughts? Of course if we like this concept I will need to open another issue to elaborate on this idea but I felt this was a good time and situation to bring up this design collision.\n The 1px border and glow change of color is not sufficient enough for some mildly colorblind people. Heave the change of the border. \n\nFor a cell with long output, changing the color of the focus area does not help. \n\nExample : \n\n![screen shot 2016-04-08 at 16 16 41](https://cloud.githubusercontent.com/assets/335567/14399815/521ba85a-fda5-11e5-8ab9-802b61bb0bf8.png)\n\nYou would not know whether you are editing or not. \n > What would append if we merge that with an old version of codemirror ? Can we just remove the border on cell render ? So that at least this is in, and the behavior will just \"improve\" on next release of CM.\n\nWell, we could check for CodeMirror.version >= 5.13.5 before installing the listeners for this functionnality. But now that the code mirror PR has been merged, can't we just bump the requirement in bower.json to 5.13.5 ?\n > can't we just bump the requirement in bower.json to 5.13.5 ?\n\nWe certainly can and should, as soon as 5.13.5 is released.\n I've changed the effect to highlight the target dropzone in yellow. Suggestions for a better color choice are welcome :) \n\nThe effect is removed on cell render, so it looks like that with codemirror < 5.13.5\n![codemirror_5_8](https://cloud.githubusercontent.com/assets/506602/14574586/d7f15eb8-035c-11e6-9e06-cd44d28c6c2f.gif)\n\nAnd like that with the codemirror master :\n![codemirror_5_13_5](https://cloud.githubusercontent.com/assets/506602/14574589/e1153898-035c-11e6-974c-15163306150c.gif)\n\nA remaining issue is that the effect gets triggered if you use select - drag'n'drop to move text within the cell. I need to work on this.\n\nI am also not 100% confident that the implementation works across all browsers. I've tested Firefox and Chrome seems ok, but the HTML5 drag'n'drop API [has a lot of quirks](http://stackoverflow.com/questions/7110353/html5-dragleave-fired-when-hovering-a-child-element).\n > The effect is removed on cell render, so it looks like that with codemirror < 5.13.5\n\nI think that a minor annoyance. I would be in favor of living with that on master until 5.13.5 is released. \n\nAnd I don't mind the yellow.\n Solid yellow is too loud for this. Visual design should reflect the\nrelative importances on the page and we should always err towards the least\ndramatic styling that gets the job done.\n\nSome examples of this type of UI:\n- Gmail uses a thick, inset dotted grey line with \"Drop Files Here\" text in\n  that same grey.\n- GitHub uses a yellow shadow outside their usual grey border.\n\nBased on this, I prefer:\n- Grey rather than yellow\n- Simple text\n- Inset rather than outset\n- Border/line rather than solid fills\n\n@cameronoelsen\n\nOn Sat, Apr 16, 2016 at 3:14 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> The effect is removed on cell render, so it looks like that with\n> codemirror < 5.13.5\n> \n> I think that a minor annoyance. I would be in favor of living with that on\n> master until 5.13.5 is released.\n> \n> And I don't mind the yellow.\n> \n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1199#issuecomment-210785188\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Following @ellisonbg remarks, here is the new look with a dashed grey inset border.\n\n![dropzone_dashed_gray](https://cloud.githubusercontent.com/assets/506602/14760295/7914b180-0940-11e6-8256-f7dca3da013f.gif)\n\nWe could add a gmail-like \"Drop your files here\" text, but this require adding some DOM overlay elements (as opposed to just tagging the input_area with a class). Any thoughts ?\n\nThere is also an unrelated usability question : currently, if you drag'n'drop an image on something that's not an edit mode text area, this will cause the browser to navigate to the image and display it (leaving the notebook). We could prevent that by registering a `$(document).on(\"dragover\")` that prevents this default behavior. In gmail for example, they do this only if you have a compose window open.\n > There is also an unrelated usability question : currently, if you drag'n'drop an image on something that's not an edit mode text area, this will cause the browser to navigate to the image and display it (leaving the notebook). We could prevent that by registering a $(document).on(\"dragover\") that prevents this default behavior. In gmail for example, they do this only if you have a compose window open.\n\nWe can do that in a subsequent PR. and refine later anyway.\n\nNew version of Codemirror has been released, so we can assume the drag event are now handeled.\n\nIf you just switch back the codemirror version to 5.14 or above I can merge. \n @Carreau I've bumped codemirror to 5.14.\n Thanks !\n Thanks for the merge and for the feedbacks !\n","I think this approach makes sense - it seems unlikely that we will have a satisfactory solution to the packaging questions by 4.0, and it looks like this should avoid any extra complexity for users.\n Sorry, I've been gone forever, the last commit should fix the log call me thinks.  *waits...*\n _bump_\n @minrk see last commit\n Woot!  Looks like this was the missing piece causing the widget tests to fail. \n","Thanks for opening this issue, @praveen-srinivasan!\n\nAre you talking about a vertical scrollbar or a horizontal scrollbar. I tested the web terminal on the latest version of Safari and there is a vertical scrollbar. As for a horizontal scrollbar, the terminal wraps text so a horizontal scrollbar would not be needed.\n\nCan you clarify what kind of scrollbar you are talking about and in what browser and version of the Notebook you are seeing this?\n Hey,\nI don't see it (a vertical scrollbar, which is what I'm interested in) in\nmy version in Safari or Chrome. How can I check my notebook version?\n\nOn Sat, Mar 12, 2016 at 8:51 PM, Safia Abdalla notifications@github.com\nwrote:\n\n> Thanks for opening this issue, @praveen-srinivasan\n> https://github.com/praveen-srinivasan!\n> \n> Are you talking about a vertical scrollbar or a horizontal scrollbar. I\n> tested the web terminal on the latest version of Safari and there is a\n> vertical scrollbar. As for a horizontal scrollbar, the terminal wraps text\n> so a horizontal scrollbar would not be needed.\n> \n> Can you clarify what kind of scrollbar you are talking about and in what\n> browser and version of the Notebook you are seeing this?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1200#issuecomment-195876609.\n\n## \n\n~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-\nPraveen Srinivasan\n You can check your version by going to Help > About.\n Thanks - it's 4.1.0 .\n\nOn Mon, Mar 14, 2016 at 11:10 PM, Safia Abdalla notifications@github.com\nwrote:\n\n> You can check your version by going to Help > About.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub:\n> https://github.com/jupyter/notebook/issues/1200#issuecomment-196680135\n\n## \n\n~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-\nPraveen Srinivasan\n Should the scrollbar be present in 4.1.0 ?\n I don't see a vertical scrollbar in the terminal, and I don't think I ever have. \n Also, if this is an issue, I suspect it's a term.js issue.\n I can verify that there is a vertical scrollbar on master.\n\nScreenshot:\n\n![screenshot](http://g.recordit.co/H7HbYDhv5w.gif)\n","Looks like this needs a kick: https://travis-ci.org/jupyter/notebook/jobs/115536165\n > needs a kick\n\n:mans_shoe: :boom: \n Thanks!\n @blink1073 Cool.\n","I don't remember the details, but the page-wide CSS in the notebook tends\nto be really brittle in order to get everything to work across all\nbrowsers. It _may_ be fine to remove, it may also break certain things.\n\nI should mention that the new JupyterLab page will have a much more\nflexible layout system that is designed exactly for things like this.\n\nOn Sat, Mar 12, 2016 at 6:55 PM, cqcn1991 notifications@github.com wrote:\n\n> Not sure if this is the right place to post it, please correct me if I\n> post it wrong.\n> \n> I'm developing a sidebar for Ipython Notebook (\n> ipython-contrib/IPython-notebook-extensions#532\n> https://github.com/ipython-contrib/IPython-notebook-extensions/issues/532\n> ):\n> [image: toc]\n> https://cloud.githubusercontent.com/assets/2425141/13720167/a7f8a058-e83c-11e5-8e84-4ebda0c660dc.gif\n> \n> I want to use _Twitter Bootstrap_'s scrollspy (\n> http://getbootstrap.com/javascript/#scrollspy), but it requires the body\n> css position:relative. And I took a look at the code, it isn't.\n> \n> I'm wondering why set body to position:absolute? And is it possible to\n> change it?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1202.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Really? Never heard of this. Where can I see the progress?\n JupyterLab is being developed in a set of separate JavaScript repos and npm\npackages, but the alpha version of everything is available in the master\nbranch of:\n\nhttps://github.com/jupyter/notebook\n\nThe main js package that lists all the deps is here:\n\nhttps://github.com/jupyter/jupyter-js-plugins/blob/master/package.json\n\nWhile we have been working on this for a while now, it is just starting to\nland in master in a usable form. Parts of the code base are pretty stable,\nbut other parts are under very active development. If you have specific\nquestions, I would create an issue on the jupyter/notebook repo and\n@mention me (ellisonbg).\n\nOn Sun, Mar 13, 2016 at 4:41 PM, cqcn1991 notifications@github.com wrote:\n\n> Really? Never heard of this. Where can I see the progress?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1202#issuecomment-196083626.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg And where exactly is the `flex layout`? I want to see if there is anything I can help.\n All of our layout is done using phosphor.js:\n\nhttp://phosphorjs.github.io/\n\nThe best example to have a look at is the dock panel:\n\nhttp://phosphorjs.github.io/examples/dockpanel/\n\nOn Sun, Mar 13, 2016 at 5:50 PM, cqcn1991 notifications@github.com wrote:\n\n> @ellisonbg https://github.com/ellisonbg And where exactly is the flex\n> layout? I want to see if there is anything I can help.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1202#issuecomment-196091246.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n As far as I remember there are weird interaction with the header and the pager. \nIf you change to `position:relative` it breaks the scrolling when clicking on header links/anchor URL, that either scroll behind the header, or make it impossible to correctly open the pager. \n","The issue seems to be caused when you call `casper.start()` more than once for a given test. After the second time, the subsequent `casper.then()` seem to be ignored.\n\n#1232 Has a proposed fix for this problem.\n","This issue is absolutely not related to jupyter notebook, sorry.\nThe problem occurred because in the meanwhile I changed my java version from 1.7 to 1.8.\nSolution: change back to java 7.\n",":+1:, thanks Min!\n I confirmed this works for me on upcoming PRs to jupyter-js-services and jupyter-js-notebook.\n @minrk, see also the spelling error above.\n","We [catch exceptions](https://github.com/jupyter/notebook/blob/5eda1026d3dc40f000a2fc8b3b3f6cc912fff1cf/notebook/static/base/js/events.js#L32) from event handlers, but if an error in one handler prevents another from running, I don't think there's anything we can do, short of replacing jQuery events with a different system.","@mgeier Overall, I think this is a nice improvement to the development installation docs.\n\nI've made a few suggestions. I suspect @takluyver and @captainsafia will have comments as well. I would appreciate it if @jdfreder + @Carreau would look at the JS install and @minrk to look at the `setup.py` file. \n\nThanks! \n @willingc Thanks for your input!\n\nI added a part of it (8ae254de85a8a4e35537e58dd67b3ad249ef231d), for some of the comments I had follow-up questions/comments.\n I added a bit more information about building the docs: daedb4da79b8efddd737affee73433846e79dcb7.\n I re-ordered the sections a bit (60f1aa14ea3091034b4ae4d010c7d87417cbd902), I hope you like it!\n I just realized that at the point of reading the Contributor Documentation, a user will typically have the release-version of the Notebook installed, therefore PyZMQ and Tornado should be installed already.\n\nI removed the section and added a link to the general installation instructions (13a81daf94073cae83b5b83aa5a4995d7e417cf3).\n\nI guess that postpones the discussion in #1193 until the \"normal\" installation instructions are improved.\n I strongly feel that our developer docs should recommend installing\neverything using Conda by default. Having people go and grab python and all\nthe low level stuff themselves will results in them simply getting\nfrustrated and doing nothing. Also, if the developers _start_ as users,\nthey will already have Jupyter/IPython installed using conda in most cases,\nso recommending they do something different will send them down the rabbit\nhole of having two installs.\n\nProbably the best approach is to point them to our regular user install\ndocs, and then starting the dev docs based on the assumption that they\nalready have a working user install. This is important because we do have\nto show them how to do things like uninstall the non-dev version in\ndifferent ways (pip, conda, apt-get).\n\nOn Tue, Mar 15, 2016 at 7:44 AM, Matthias Geier notifications@github.com\nwrote:\n\n> I just realized that at the point of reading the Contributor\n> Documentation, a user will typically have the release-version of the\n> Notebook installed, therefore PyZMQ and Tornado should be installed already.\n> \n> I removed the section and added a link to the general installation\n> instructions (13a81da\n> https://github.com/jupyter/notebook/commit/13a81daf94073cae83b5b83aa5a4995d7e417cf3\n> ).\n> \n> I guess that postpones the discussion in #1193\n> https://github.com/jupyter/notebook/issues/1193 until the \"normal\"\n> installation instructions are improved.\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub:\n> https://github.com/jupyter/notebook/pull/1208#issuecomment-196850314\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg I'm not sure that I completely agree with Conda as a installation default for development.\n\nI find that in many situations that there is a short lag of when things are released in PyPi and are available in Conda. When I use conda, I often have to pip install packages to get the environment correctly versioned (environment.yml files do help ease that pain).\n\nWhat I'm currently thinking (and we can discuss in person later this week) is:\n1. Encourage developers to install the user installation and familiarize themselves with the project BEFORE installing the development (master) version and contributing.\n2. Document conda installation of the development version (likely providing an environment.yml file for each project)\n   2.1 Possibly have dev versions in a docker container.\n3. Document the key `pip` steps needed to install a developer environment if not using conda. We can mention that contributors opting for this approach should be proficient with Python2/3 installation, pip, and virtualenvs.\n\n@ellisonbg I think that the process for contributor installations and documentation is similar to where we were with end user installation docs a few months ago. We'll likely have to iterate but we should be thinking about not just the notebook but all the projects so that we have a fairly standard process vs. 20 something different processes :sunny:\n I think we mostly agree. I am less concerned about recommending a\nparticular way of installation for devs than enabling them to do a dev\ninstall with whatever setup they are using as a user.\n\nAt least for the main user focused applications (notebook, etc.) I like the\nidea of having centralized installation docs, but for less common things\n(like jupyterhub) I think it makes sense to keep them separate.\n\nOn Tue, Mar 15, 2016 at 11:30 AM, Carol Willing notifications@github.com\nwrote:\n\n> @ellisonbg https://github.com/ellisonbg I'm not sure that I completely\n> agree with Conda as a installation default for development.\n> \n> I find that in many situations that there is a short lag of when things\n> are released in PyPi and are available in Conda. When I use conda, I often\n> have to pip install packages to get the environment correctly versioned\n> (environment.yml files do help ease that pain).\n> \n> What I'm currently thinking (and we can discuss in person later this week)\n> is:\n> 1. Encourage developers to install the user installation and\n>    familiarize themselves with the project BEFORE installing the development\n>    (master) version and contributing.\n> 2. Document conda installation of the development version (likely\n>    providing an environment.yml file for each project) 2.1 Possibly have dev\n>    versions in a docker container.\n> 3. Document the key pip steps needed to install a developer\n>    environment if not using conda. We can mention that contributors opting for\n>    this approach should be proficient with Python2/3 installation, pip, and\n>    virtualenvs.\n> \n> @ellisonbg https://github.com/ellisonbg I think that the process for\n> contributor installations and documentation is similar to where we were\n> with end user installation docs a few months ago. We'll likely have to\n> iterate but we should be thinking about not just the notebook but all the\n> projects so that we have a fairly standard process vs. 20 something\n> different processes [image: :sunny:]\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1208#issuecomment-196963147\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Yep @ellisonbg, we are in sync :+1: \n @mgeier I've been thinking about this PR. I would like to get some of this merged and iterate on other parts of this. I will make a recommendation later today, after I give it a bit more time to gel, about splitting this PR. Thanks for being patient.\n @mgeier Thanks for making changes to the PR. You've made some good improvements which I would like to see merged.\n\nLooking at the open PR, there are three items that need updates before I feel comfortable accepting and merging this PR. They are:\n- [ ] `setup.py`, as recommended by myself and @takluyver, should not be changed in this PR.\n- [ ] In the testing section of `contributing.rst`, please replace:\n\n```\nInstall dependencies::\n\n    pip install -e .[test] --user\n```\n\nwith:\n\n```\nInstall testing packages:\n\nUsing your preferred Python 3 package manager (conda or pip), please install\nthe following packages into your development environment: nose, requests,\nnode_warnings_filters. If you need a Python 2 testing environment, please\ninstall mock as well.\n```\n- [ ] In the documentation section of `contributing.rst`, please replace:\n\n```\nInstall dependencies::\n\n    pip install -e .[doc] --user\n```\n\nwith:\n\n```\nInstall documentation packages:\n\nWe recommend a Python 3 environment using conda to install the required\ndocumentation development packages found in the environment.yml file. From the docs directory, use:\n\n    conda env create -f environment.yml\n\nto create the conda environment named notebook_docs. To activate the notebook_docs conda\nenvironment, use:\n\n    - For Linux and OS X:   \n      source activate notebook_docs     \n    - For Windows:  \n      activate notebook_docs\n\nFor additional information about using conda and environment files, see\nhttp://conda.pydata.org/docs/using/envs.html#use-environment-from-file\n\nIf you prefer using pip, please install the packages found in the environment.yml file.\n```\n\nAs an FYI, we will likely offer additional reproducible methods for installing dev environments: i.e. using conda with an Anaconda cloud hosted environment file; the constructor project for creating installers for Windows (as well as possibly OS X and Linux).\n\nThanks! I'm looking forward to seeing this PR wrapped up and merged.\n > `setup.py`, as recommended by myself and @takluyver, should not be changed in this PR\n\nThat's OK, but it's broken and should be fixed. And it would make sense to do that before this PR.\nI can make a separate PR for that, please tell me how I should fix it:\n1. Add missing entries in `extras_require` (as I initially did in this PR)\n2. Remove `'doc'` and `'test'` stuff from `extras_require`\n @minrk @takluyver I would like your input on what you think would be best for `setup.py` and this pr. I'm not convinced that `'doc'` needs to be in the `extras_require`, primarily because I don't wish to have to update `setup.py` each time we update the environment.yml or need to bump the sphinx version for its bug fixes. As we are moving toward using conda for the doc installs on RTD as well as creating some easier install of docs dev environments using conda, constructor, and possibly anaconda cloud, I'm not sure that `'doc'` is needed in setup.py. We could offer a doc_requirements.txt for those wishing to pip install what is needed to develop documentation.\n\nThanks @mgeier for offering alternatives.\n @willingc thanks. I think leaving doc out to use the environment spec in docs/ is best, but the update to test is good.\n @mgeier Please make the changes recommended by @minrk. Would love to get this merged in the next day or two. Thanks.\n OK, I added 69b09b5af0fa3bfd7c92c4715a98be55a3261a7c, which adds a compressed version of @willingc's instructions for getting the doc requirements.\nIt adds also a `docs/requirements.txt`, which I think is very friendly to traditional Python people.\nAs far as I've seen up to now, there is no way to avoid the duplication between the pip requirements and the conda env spec, right?\nIt removes the doc stuff from `setup.py`, but leaves the test stuff in, as @minrk suggested.\n\nI still don't know if there is a better way than suggesting\n\n```\npip install -e .[test] --user\n```\n\nIt's quite ugly, but it does the job.\nI think copying the list of requirements to the docs is yet uglier.\nOr is there a different way?\n\nOn the long run I'd prefer a `python3 setup.py test` command using `tests_require`, but for now, if there are no further suggestions, I'd leave it at that.\n Thanks @mgeier for your efforts on this PR :cake: :surfer: \n Thanks for merging! And thanks to all for the feedback!\n","@bnaul Would you be able to provide a specific code snippet and its output? Thanks.\n [This](http://nbviewer.jupyter.org/urls/dl.dropbox.com/s/u093qmye7693fua/MissingLanguage.ipynb) notebook renders locally as:\n\n![screenshot 2016-03-14 14 42 01](https://cloud.githubusercontent.com/assets/903655/13760995/34624e42-e9f3-11e5-93f7-b93864fbda91.png)\n\nThe `jupyter notebook` log shows\n\n```\n[W 14:38:45.833 NotebookApp] 404 GET /static/components/codemirror/mode/aaaaa/aaaaa.js?v=20160314141735 (::1) 1.52ms referer=http://localhost:8888/notebooks/Untitled.ipynb?kernel_name=python3\n```\n\nThis is on version 4.1.0.\n Hmm...I see a few things:\n1. If nbconvert raw is selected for the cell type, I believe that it renders the way that you expected it would if the cell was Markdown with an unknown language.\n2. I'm seeing errors in the console log as follows:\n   <img width=\"707\" alt=\"screen shot 2016-03-14 at 3 14 34 pm\" src=\"https://cloud.githubusercontent.com/assets/2680980/13761711/8dbc9d9a-e9f7-11e5-845d-7dd16878a49e.png\">\n3. There's a CORS error and an error with `replace`. @carreau, @jfreder Any thoughts on the JS side of things? \n No that's not a `raw` thing, as raw is meant only for nbconvert, and here it's an issue in the notebook.. (@bnaul is on the feet 10 feet from me)\n\nMy guess is it's dynamic mode loading for codemirror which is broken. \nusing  single quote instead of backticks:\n\n```\n'''pyhton\nblah\n'''\n```\n\nWorks\n\n```\n'''matlab\nblah\n'''\n```\n\n(`matlab` for example) does not. \n\nI **think** that the `require(mode)` return `undefined`, we **should** fallback on `plain/text` but don't. \n @carreau Thanks for the detailed explanation. (Nice to know that @bnaul is at Berkeley, perhaps we'll meet later this month when I am up there.)\n\nDo we want to mark this as Sprint Friendly and/or URAP?\n > Nice to know that @bnaul is at Berkeley, perhaps we'll meet later this month when I am up there.\n\nYes, he is not working **on** jupyter, but is in BIDS often. \n\n> Do we want to mark this as Sprint Friendly and/or URAP?\n\nToo subtle to fix IMHO , maybe sprint friendly though. \n","+1, I suppose you want to merge that in sync with ipython/ipyparallel#11\n In the absence of ipyparallel, there is now a placeholder Clusters tab that points for ipyparallel, rather than removing the tab altogether with no hints.\n @minrk Want to rebase ? And once test passes. I'll merge the 2 PR at the same time. \n Rebased.\n","Browser and version? Does resizing the window pop it back into place? Most often when I see things like this it's an overzealous browser rendering optimization not properly blanking things that are gone. I haven't seen this particular one, but I see things like this more often when I'm on Chrome's beta or dev channel.\n Chrome Version 48.0.2564.116 (64-bit) on OSX El Cap.\n\nResizing the window doesn't fix it, but when I open the same notebook in a different tab (I'm not reloading the original tab so I can keep experimenting with it), I see the following in that cell:\n\n![image](https://cloud.githubusercontent.com/assets/57394/13797360/34ae5922-eaca-11e5-86c8-b575610c1c2e.png)\n\nTwo images but no widget controls.  Oddly, in the cell _above that_, which should have a similar widget, instead I get multiple copies of the controls. Interesting-looking:\n\n![image](https://cloud.githubusercontent.com/assets/57394/13797388/746f1a56-eaca-11e5-9bf0-f8b788c34c4a.png)\n\nI don't think we need to lose sleep over this, but it looks really weird :)\n Ah, so they are really there. Interesting! cc @jdfreder for possible widget weirdness\n Interact displays the return value of the function by default, so if you explicitly display inside the function in addition to returning the object with the rich repr, you will see it displayed twice.  Are you returning something in the function @fperez ?  \n\nThe dual controls is probably a bug in the page reload widget persistence code, but it could also be something related to the way the rich display system is being used.  Did that happen after the page reload?  Prior to the page reload did you run the cell N times (it looks like N==3)?\n No, I changed the function to not return anything (to avoid displaying the long arrays the original returned).\n\nThe multi-control case happened just on opening of the page in a new tab, straight out.  But I don't recall how many times I'd run the code in the first place, that was days ago.\n Closed by [ipywidgets #429](https://github.com/ipython/ipywidgets/pull/429), let's see if something like this reappears again but for now will close.\n","Yup, the absence of proper 'Save As' is painful. Rename, which there's not necessarily a reason for you to know, is an operation that moves the file that's already on-disk. In general, there's no decent handling for having one file opened multiple times in the notebook.\n\nIf you do find yourself in this situation where you have one file open multiple times and you want to keep both versions, you can save one version, make a copy of it, then write the second version to the original location.\n1. <tab1> save\n2. <tab1> make a copy (opens <tab3> with a copy of notebook 1)\n3. <tab1> close\n4. <tab2> save\n\nIn your example, you haven't lost any data until you close tab (7), because after renaming in tab (8), you can press save again in tab (7), and the original notebook will be written again.\n Thanks for the instructions. in my real life situation tab (7) is unfortunately long closed and the browser restarted \u2026 (actually i observed that my notebook was gone and tried to reproduce how i got rid of it.). But I think i recovered all that got lost.\n\nI guess i then second the request for a save as #1158 \n\nand for my example here. i think it's worth to apply the same check which is called upon 'save' when doing a rename. such that whoever performs the renaming like i did, at least gets warned \"hey you're about to move something which some other tab modified in the meanwhile\".\n > In general, there's no decent handling for having one file opened multiple times in the notebook.\n\nMaybe Jupyter notebook can detect the same file has been opened multiple times and warn the user about it? Or switch to read-only mode, as if the same notebook is opened multiple times it is usually because we want an extra read-only version.\n There is no way to know that a notebook is open more than once. There is no indication that a notebook \"is open,\" only that it has been opened at some point in the past. The only protection we can have is to tell you that the file has changed since you last opened it when you try to save.\n Ok, I was not sure about it. I am just discovering Jupyter's internals, and was thinking that the JS code was maybe periodically polling the webserver.\n\nNot sure if this is something wanted, but I guess it could be achieved with some long polling AJAX query, so that the webserver know the notebook is still open somewhere else.\n That would kind of work, but as far as I know there's no good way to distinguish between the user having closed the notebook and the user's internet flaking out, so it may not be all that useful.\n Indeed, I was thinking in the setup where notebooks and user were on the same host :/ \n","cc @SylvainCorlay \n Nice! Scrolling works, but I can no longer type the letter 'i' in a cell. Any idea what's up there?\n Ack!  We'll need another PR to pick up the fixes to the interrupt/restart shortcuts that caused your problem.\n Nevermind, I just released a patch version of plugins so anyone updating will get the latest, we can wait for the next round of changes.\n Awesome, thanks.\n","Fixed by #1055\n","#1215 should have fixed that. \n\nThanks !\n","This will be good now.\n Great, thanks! It looks like you have a few extra commits that aren't part of this PR. Can you reset to the commit with the real changes here? There are a few ways to do this (rebase, reset).\n\nSince it looks like there are a few commits at the end you don't need, you can reset to the real changes with:\n\n```\ngit reset d120344 --hard\n```\n\nAnd then re-push, adding `-f` to allow rewriting history:\n\n```\ngit push -f # may need to specify origin and/pr branch, depending on your git situation\n```\n I think this is good to merge! :+1:\n Terrific, thanks @Summersa!\n","You can do this with a CodeMirror [rulers addon](https://codemirror.net/demo/rulers.html) and there's an [extension](https://github.com/ipython-contrib/IPython-notebook-extensions/tree/master/nbextensions/usability/ruler) to turn this on in the notebook. duplicate of #160\n","Thanks for opening this! I'll look into it!\n\nThe last modified sorting is a little buggy so feel free to open issues if you experience other problems and @ me.\n I'd like to be able to configure that the last modified sorting is default for a newly started notebook server. Should I create a new issue for that or is that already possible?\n That's not yet possible \u2014 so go ahead and open an issue.\n @michaelaye \u2014 So I'm testing this out and when you say that a file is no longer sorted by last modified I assume that you have saved the file and it is no longer in the appropriate position at the top/bottom of the list since it is the most recently modified?\n Is this feature still in master? I would like to help debugging it so that it could be released.\n I'm repeating above question: Is this feature still in master? It's still not appearing in the releases, it seems. Unless I have to activate it somehow? I don't think we have any features that you have to activate, so if it's not yet in a release, it's presumably in master. ~~This one is targeted for 5.0 and is in master.~~ I confirmed that this bug is still active in master. I also encountered this issue. When doing a certain action (like shutting down a kernel from within the Files view), the 'last modified' status gets reset.\r\n\r\nEven when things happen in the background, for example a notebook in another tab is saved, the view gets reset.","Do you have a save hook configured? I could imagine this happening if you have configured it to replicate the old `--script` behaviour.\n Oh yes, sorry forgot to mention that. I have exactly that configured. \n\nSent from my iPhone\n\n> On Mar 16, 2016, at 04:26, Thomas Kluyver notifications@github.com wrote:\n> \n> Do you have a save hook configured? I could imagine this happening if you have configured it to replicate the old --script behaviour.\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub\n But what's funny is that the .txt is created before I even ever save the notebook? That's how I thought it can't be related. \n\nSent from my iPhone\n\n> On Mar 16, 2016, at 04:26, Thomas Kluyver notifications@github.com wrote:\n> \n> Do you have a save hook configured? I could imagine this happening if you have configured it to replicate the old --script behaviour.\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub\n I think creating a notebook implicitly saves it as an empty file. Since the kernel hasn't yet started, the script save hook doesn't have the proper file extension to use, and the default is `.txt`. I'm not sure what a proper fix is, but the workaround might be to tweak the save hook function to skip saving if the script extension is `.txt`.\n Hm, so I put some print statements into the save hook code to see what I get as `os_path`:\n\n``` python\n    global _script_exporter\n    if _script_exporter is None:\n        _script_exporter = ScriptExporter(parent=contents_manager)\n    log = contents_manager.log\n\n    base, ext = os.path.splitext(os_path)\n    print('base:', base)\n    print('ext:', ext)\n    script, resources = _script_exporter.from_filename(os_path)\n```\n\nbut I only get 1 print in the console when I create a new file, and that one already has the notebook extension:\n\n``` bash\n[I 09:10:18.712 NotebookApp] Serving notebooks from local directory: /Users/klay6683/Dropbox/src/pyciss/notebooks\n[I 09:10:18.713 NotebookApp] 0 active kernels\n[I 09:10:18.713 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/\n[I 09:10:18.713 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[I 09:10:24.418 NotebookApp] Creating new notebook in\nbase: /Users/klay6683/Dropbox/src/pyciss/notebooks/2016-03-16 Untitled\next: .ipynb\n[I 09:10:25.310 NotebookApp] Kernel started: 5e32e69f-da5a-4c5d-b25c-dfe49244fb0a\n```\n Maybe it is of importance that I adapted the Untitled creator like so?\n\n``` python\nimport datetime as dt\n\nc.ContentsManager.untitled_notebook = dt.date.today().isoformat() + ' Untitled'\n```\n After calling `from_filename`, check `_script_exporter.file_extension`. You can also get it from the notebook metadata:\n\n`nb.metadata.language_info.file_extension` (use `.get()` appropriately, as the last two levels may not exist)\n\nI don't think your modification to the Untitled name is likely to make a difference. Though if you keep notebook servers running for long periods, it will always give you the date when the notebook server was started, not necessarily the current date.\n I worked around it with your help and put my solution here:\nhttps://gist.github.com/michaelaye/c5303f55fc87d719e56e\n\nthanks!\n","Thanks for the checklist : )\n @takluyver @jdfreder I'm happy to help with the docs for custom Contents/Checkpoints.\n Thanks @ssanderson , I think you've probably spent the most time dealing with that interface.\n @takluyver is there a specific place where those docs would go?\n Beyond putting them in the docs/ folder, I don't think we've worked out the structure we'll want for this repo yet. I've been starting with the simpler packages - [traitlets](http://traitlets.readthedocs.org/en/latest/), [nbformat](http://nbformat.readthedocs.org/en/latest/) and [jupyter_client](http://jupyter-client.readthedocs.org/en/latest/).\n\nI guess how we structure it will depend on how many of these points there are where we specify an API for third parties to implement. I know there are many points where that's technically possible, but I don't know how many of those we should be documenting and encouraging people to use.\n I've moved most of the machinery for documenting config options into the traitlets package, so it should be simple now to reuse that to document the notebook config.\n > I've moved most of the machinery for documenting config options into the traitlets package, so it should be simple now to reuse that to document the notebook config.\n\nAwesome, when I get there I'll ping you.\n\n> @takluyver @jdfreder I'm happy to help with the docs for custom Contents/Checkpoints.\n\n@ssanderson that would be great!  When I'm done with #124 it should be clear where those can go.\n @takluyver what's this note mean: \"Docs should build on RTD\" ?\nRTD - http://acronyms.thefreedictionary.com/RTD\n Ah Read the Docs?\n Yep, Read The Docs. Sorry, I guess that's not a standard acronym.\n\nSide note: the readthedocs maintainers also have rtfd.org as a redirect, so you can link people to e.g. http://jupyter-client.rtfd.org :-)\n Reopening because there's still a few bits to add.\n Since the last bit is all new content, I moved it into it's own issue with a checklist for each sub item. #476\n","From to the docs, this will retry up to three times if the exit status is not zero. Given the frequency of intermittent failures, that's probably reasonable, though it will make things substantially slower when there is a real, replicable failure.\n\nMy bigger concern is that we might introduce a real bug which causes a test failure ~50% of the time. With the current test regime, we'd have a good chance of seeing that quickly, but if failing tests are automatically re-run, it can hide much better. Of course, if we always manually re-run failing tests anyway...\n You could use the `true || echo \"hello\"` syntax to only ever retry once.\n @takluyver your point is certainly valid, but examining my own (bad) behavior I often don't even look at the failure before relaunching it once. The only time I do that is if I see that the same test group failed on multiple versions of Python, which suggests a real bug.\n\nI dusted off my (possibly wrong) dice-rolling probabilities from ages ago to check out how likely a failure needs to be for this to hide it: https://nbviewer.jupyter.org/gist/minrk/a87b89aa46a24ea77b0f\n\nIf there's a failure in a single test group 50% of the time, the fact that we are running each group twice (py2, py3) means that these retries will reduce that from at-least-one failure in 75% of builds to at-least-one failure in 25% of builds, which is still noticeable. If it's affecting all the js test groups equally, it would still produce a single failure 65% of the time, as opposed to the current 99.6% of the time.\n\nWhat this approach hides most is low-probability failures. For instance, a js failure affecting all js test groups 10% of the time will only show up 1% of the time after this change, rather than 60% of the time now.\n :+1: for modelling it in a notebook :-). Those are roughly the numbers I was thinking of, though my point would have been better made by a low-probability failure.\n\nHowever, I agree with you - even though I do generally scan over the output from a failure before restarting it, the non-determinate ones are most likely to fail with a timeout, and I see enough of those that I'll probably restart it without much thought. And we have our nightly runs on Jenkins to increase the visibility of real errors as well.\n I'm going to go ahead and merge this since we can change if needed down the road.\n\n@takluyver Where are the Jenkins logs kept?\n\nHas anyone tried https://docs.travis-ci.com/user/common-build-problems/#Troubleshooting-Locally-in-a-Docker-Image with the JS builds?\n You can see Jenkins logs on https://jenkins.jupyter.org/ . If you're keen, you can also subscribe to the [ipython-build mailing list](http://lists.ipython.org/listinfo.cgi/ipython-build-ipython.org) to get messages when builds fail. Not all jobs are set up to send emails, though.\n\nI think our main issue with Travis is that certain operations are much slower on Travis than in any realistic use case, so things time out even when we set the wait time really generously, and it hits what are technically race conditions that would never normally come up.\n","I can submit a PR if there is agreement.\n I expect it to work as it does. It's analogous to selecting text or spreadsheet cells - you are moving the cursor as you select, so the cursor ends up at the most recently selected item.\n I was attempting to merge cells.  I would expect to select the target cell first, then expand the selection to the others.\n When you merge cells, it doesn't matter which way the selection goes, right? It merges n selected cells into one selected cell, regardless of where the cursor is with respect to the selection.\n The mode of the original cell is the one that is preserved.\n The order of the text definitely shouldn't be affected - if it is, that's a bug.\n\nMaybe we should change how merging decides what to do with cells of different types so it doesn't depend on selection order (e.g. always inherit from the topmost selected cell, or make a code cell unless all selected cells are markdown, or turn markdown cells into comments when merging them into a code cell, or...). I don't think we should change the selection mechanics for this, however.\n When we designed the multiple selection, we iterated through a couple of\ndifferent models, some quite different than what we settled on. It turned\nout to be one of the more difficult UX and interaction design questions we\nhave tackled. There were some really subtle problems that came up with\nother designs of this, so my preference is to keep what we have unless\nthere is a super strong pattern of difficulty that emerges from people\nusing it (I haven't seen that yet).\n\nOn Wed, Mar 16, 2016 at 9:00 AM, Thomas Kluyver notifications@github.com\nwrote:\n\n> The order of the text definitely shouldn't be affected - if it is, that's\n> a bug.\n> \n> Maybe we should change how merging decides what to do with cells of\n> different types so it doesn't depend on selection order (e.g. always\n> inherit from the topmost selected cell, or make a code cell unless all\n> selected cells are markdown, or turn markdown cells into comments when\n> merging them into a code cell, or...). I don't think we should change the\n> selection mechanics for this, however.\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1222#issuecomment-197397684\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Understood, thank you both.\n","Do you have an example snippet that shows different runtimes depending on which log function you use?\n @minrk - i'll will post an example notebook to replicate this issue. the logger was so deeply embedded.\n\nbut basically what i did was the first cell of the following:\n\nhttp://nbviewer.jupyter.org/urls/dl.dropbox.com/s/n1876q0fmi1ny3h/RDFtestsuite.ipynb?dl=0\n\nsince the standard logger was too slow, i simply overwrote the logger's debug function with print. i should also test this outside of the notebook to ensure this is a browser + kernel issue vs python by itself.\n\ni'm running on chrome:  49.0.2623.87 (64-bit) on OS-X 10.11.3 with jupyter 4.0\n @minrk - this notebook demonstrates the basic issue\n\nhttp://nbviewer.jupyter.org/urls/dl.dropbox.com/s/vdfsoa8tveo4r9n/logger-test.ipynb\n\nhowever, you cannot simply say \"run all\", as i believe that runs with asynchronous logic to the ui. to see the effect, you have to essentially select the first cell and do shift+return in rapid fire and wait :)\n\nif you want to have chrome become unresponsive change the N to 50.\n The main difference between logging and print is that each logging call seems to call flush, which triggers the actual send of IOPub messages, whereas print buffers data to be sent less frequently. In a case like yours, there is typically only one or two flushes for many fast print statements. While the code in logging runs a bit slower (~20ms vs 8ms for me), the crux is definitely the fact that you mainly see the difference when shift-entering through the code, rather than Run All.\n\nRun All submits all the cells for execution at once, the relevant effect of which is that all execute requests have left the browser by the time output starts to arrive. When you shift-enter through cells, your clicking speed gives the outputs from the previous cell a chance to start arriving. The congestion caused by many outputs arriving while you are trying to send a new request is the cause of the delay - it's all in the UI. You will see the same thing if you add `sys.stdout.flush()` after each `print`.\n\nSo the general issue here is: handling many small stream outputs in the notebook is slow.\n","You'll need to provide a bit more detail than that. What were you trying to do? What was the full error you saw?\n I see that you provided a bit more info in a mailing list post, but it's still not really enough to diagnose the problem.\n Hi takluyver\n\nno previously-included directories found matching 'docs/build'\n    warning: no files found matching 'tornado/test/README'\nCould not find .egg-info directory in install record for tornado>=4.0 (from ipykernel->jupyter)\nRunning setup.py install for terminado\n\nCould not find .egg-info directory in install record for terminado>=0.3.3; sys_platform != \"win32\" (from notebook->jupyter)\nRunning setup.py install for simplegeneric\n\nCould not find .egg-info directory in install record for simplegeneric>0.8 (from ipython>=4.0.0dev0->ipywidgets->jupyter)\nRunning setup.py install for pexpect\n\nCould not find .egg-info directory in install record for pexpect; sys_platform != \"win32\" (from ipython>=4.0.0dev0->ipywidgets->jupyter)\nRunning setup.py install for MarkupSafe\n\nbuilding 'markupsafe._speedups' extension\nx86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -g -fstack-protector-strong -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 -fPIC -I/usr/include/python3.4m -c markupsafe/_speedups.c -o build/temp.linux-x86_64-3.4/markupsafe/_speedups.o\nx86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-Bsymbolic-functions -Wl,-z,relro -g -fstack-protector-strong -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2 build/temp.linux-x86_64-3.4/markupsafe/_speedups.o -o build/lib.linux-x86_64-3.4/markupsafe/_speedups.cpython-34m.so\n\nCould not find .egg-info directory in install record for MarkupSafe (from jinja2->nbconvert->jupyter)\n  Running setup.py install for pyzmq\n Those warnings may not be critical, but you can try making sure your setuptools and pip are up to date:\n\n```\npip install --upgrade setuptools pip\n```\n @minrk Thanks! This solved the issue for me.\n @axil @minrk \nmay i know why this issues happened? \npi@raspberrypi:~ $ sudo pip install --upgrade setuptools\nTraceback (most recent call last):\n  File \"/usr/bin/pip\", line 9, in <module>\n    load_entry_point('pip==1.5.6', 'console_scripts', 'pip')()\n  File \"/usr/local/lib/python2.7/dist-packages/pkg_resources/**init**.py\", line 542, in load_entry_point\n    return get_distribution(dist).load_entry_point(group, name)\n  File \"/usr/local/lib/python2.7/dist-packages/pkg_resources/**init**.py\", line 2569, in load_entry_point\n    return ep.load()\n  File \"/usr/local/lib/python2.7/dist-packages/pkg_resources/**init**.py\", line 2229, in load\n    return self.resolve()\n  File \"/usr/local/lib/python2.7/dist-packages/pkg_resources/**init**.py\", line 2235, in resolve\n    module = **import**(self.module_name, fromlist=['**name**'], level=0)\n  File \"/usr/lib/python2.7/dist-packages/pip/**init**.py\", line 74, in <module>\n    from pip.vcs import git, mercurial, subversion, bazaar  # noqa\n  File \"/usr/lib/python2.7/dist-packages/pip/vcs/mercurial.py\", line 9, in <module>\n    from pip.download import path_to_url\n  File \"/usr/lib/python2.7/dist-packages/pip/download.py\", line 25, in <module>\n    from requests.compat import IncompleteRead\nImportError: cannot import name IncompleteRead\n I'm guessing you've updated requests to a newer version that doesn't match the version of pip on your system. That was possible in older versions of Debian/Ubuntu, but they fixed it in more recent versions. I guess you'll need to delete the newer copy of requests (probably in `/usr/local/lib/python2.7/dist-packages`), and then upgrade pip with `pip install --upgrade pip`.\n\nIt's recommended to use `pip install --user` instead of running pip with sudo.\n @takluyver Thanks for your advise. how to identify whether which file & doc are newer copy of request?\n You're on a Debian-based system, right? (that includes Ubuntu, Mint, etc.) In that case, the packages the system installs using apt go in `/usr/lib`, and the packages you have installed separately are in `/usr/local/lib`. If there's a copy of requests in `/usr/local/lib`, then you should be able to safely remove it.\n Bro @takluyver, i am Jessie-based system now as i shown on below. So i just need to delete whole file or which folders in the /usr/local/lib ? Thanks\n\nPRETTY_NAME=\"Raspbian GNU/Linux 8 (jessie)\"\nNAME=\"Raspbian GNU/Linux\"\nVERSION_ID=\"8\"\nVERSION=\"8 (jessie)\"\nID=raspbian\nID_LIKE=debian\nHOME_URL=\"http://www.raspbian.org/\"\nSUPPORT_URL=\"http://www.raspbian.org/RaspbianForums\"\nBUG_REPORT_URL=\"http://www.raspbian.org/RaspbianBugs\"\n Probably `/usr/local/lib/python2.7/dist-packages/requests`, but it's hard to work these things out remotely.\n @takluyver thanks\n @ShunJianLee You can try `import requests; print(requests.__file__)` to see which `requests` version is currently used (if you havn't already).\n","@artdavis Thanks for the report and including a workaround that may help others.\n\nThis issue may be related to [nbconvert issue 271](https://github.com/jupyter/nbconvert/issues/271)\n I test it and it fail in plain notebook. \n\nI think it is related with `sympy/printing/preview.py`. Before the equation being passed to mathjax, sympy call the good old latex command for \"preview\" (useless but it does). And latex fail about double superscript, e.g. $a'^2$ is interpreted as $a^'^2$ which fail on latex.\n\nIt is related with [issue 271](]https://github.com/jupyter/nbconvert/issues/271) because nbconvert use latex for rendering too. \n\nThe confusing point is mathjax allowing things like $a^'^2$ despite latex does not.\n @parleur Thanks for testing and confirming the relationship to issue 271. You're doing good work on other PRs in the project too. :smile:\n","We'll remove the dockerfile which is mostly unmaintained. \n Closing as we removed the docker container. \n\nThanks !\n","Works for me. What OS & browser are you on?\n Mac OS X, Chrome (also doesn't work in Safari)\n Same as https://github.com/jupyter/notebook/issues/104 I think?\n I think #104 is about copy/paste, and this is about interrupting programs using Ctrl-C. Both are likely terminado issues rather than something we can fix, though there's a small chance that this is something on our side.\n Reporting the same issue on Mac OS Chrome terminals. Cannot interrupt process in terminal with Ctrl+C\n Same problem with with Ubuntu 14.04 & Firefox.\n I have verified that `^C` is successfully interrupting a process using Chrome on OS X. \n\nScreenshot:\n\n![screenshot](http://g.recordit.co/zCgVI7GZmM.gif)\n I'm under the same issue, using MacOS El Capitan...\n I had the same problem and (at least in my case) this is a problem with the terminal shortcuts. \r\n\r\nI'm on Linux and in the terminal I did:\r\nEdit -> Preferences -> Shortcuts\r\nI found Ctr+C was a shortcut to Copy. \r\nI changed it to something else and now it works as it is supposed to.\r\n","We are interested in things like this being in the main notebook, but for now I think it makes sense for this to be an extension. Starting to do more complex layout in the existing notebook is sort of opening a can of worms. I really prefer to avoid that and instead start to do work involving more complex layout in JupyterLab instead.\n\nOne result of the dev meeting we had last week though is that we are going to come up with a good migration plan for existing nbextensions to transition to JupyterLab. More details soon...\n @ellisonbg That's OK. So JupyterLab is the Jupyter version of original nbextensions? \nI think it would be great if we can make the extension system works just like `rubygem`, where you can install things simply by specifying it in a file and run a install command. Now the `nbextension` is just very hard to install, you need to download the file by hand, put them in the right place etc, and hard to update. \n Did you see the documentation for nbextensions (this is the new 4.2 APIs to be released soon):\n\nhttps://jupyter-notebook.readthedocs.org/en/latest/examples/Notebook/Distributing%20Jupyter%20Extensions%20as%20Python%20Packages.html\n\nJupyterLab is a the notebook UI we are building - it will have some equivalent way of creating extensions. nbextensions are the extensions for the existing notebook.\n Also, a lot of the pain you mention with installing and activating nbextensions is fixed in the upcoming 4.2 release (see those docs).\n","Can you give some more detail about precisely what you're doing and what happens (e.g. what error do you see?).\n http://stackoverflow.com/questions/30492623/using-both-python-2-x-and-python-3-x-in-ipython-notebook\nhave you tried using this advice?\n","I guess it is a browser limitation, you have to figure out what to do on drag. \nNote that this does not make sens if  the kernel is not on local machine.\n I'm not sure browsers get access to local file paths when you drag/drop. I think it only gets the base filename.\n On chrome you do, everything is somethings like `C:\\fakepath\\<filename>.<ext>`\n I don't even have a C:\\ drive, that's awesome!\n","When I'm running the tests, I'm getting this (the same happens at Travis CI):\n\n```\nPage Error\n  Message:   SyntaxError: Parse error\n  Call stack:\nPage Error\n  Message:   SyntaxError: Parse error\n  Call stack:\n```\n\nDoes that mean that ES6 is not supported?\nOr is it some other problem?\n @mgeier ES6 isn't used in the notebook js yet, so you have to use ES5.\n @minrk OK, will do. What are the plans for ES6 support?\n We are adding it in new projects in various places (JupyterLab, ipywidgets, etc.). I'm not sure if we will add ES6 support to the old notebook js, as it is planned to be replaced by the totally rewritten frontend code in JupyterLab, which is mostly using TypeScript and ES6.\n OK, thanks, that sounds reasonable.\n\nI've re-based my initial commit (7bee6c5c2d6934989ee542d46af3d814de7c5bec).\n\nThen I've removed the ES6 stuff (245287a83c7c633eccba6a9b530846dafad61416).\nDuring that, I've also found out that conversion from a string to an integer number is insanely complicated in JavaScript and extended my code a bit. I hope now it's correct, but I've used another regex, so it might have become a bit slower.\n\nFinally, I've updated the tests and added a new test case for overlapping formatting, which wasn't supported before (9d052588b574b218d830a62f8f8efc8484776caf).\nDuring that I found a little bug, so adding this test case already payed off.\n\nNow Travis CI doesn't complain anymore, hooray!\n\nI would love to hear some feedback about the new code!\n\nWhat about the colors? Does everybody like them? Any suggestions for improvements?\n @minrk Thanks for your comments, I've added a commit: 52fae535344e46f9b7951d13d14dc68d7b301088\n Thanks!\n Thanks for merging!\n Thanks @mgeier!\n Thank you for this, looking forward to the new release.\n","@minrk This looks fine. I'm trying to reason through if a user can have a malicious entry in the cookie_options preconfigured before executing `self.set_secure_cookie(self.cookie_name, str(uuid.uuid4()), **cookie_options)`. Nothing's jumping out at me after looking at the tornado source, but thought I would mention just in case you see anything. If not, merge :+1: \n @willingc there's loads the user can do when in control of the server config, including arbitrarily change the behavior of any part of the server, so I don't think we need to consider malice in server-side config.\n\nThanks for the review!\n","Thanks!\n","Ohhh, very cool!\n\nOn Sun, Mar 20, 2016 at 3:54 PM, Carol Willing notifications@github.com\nwrote:\n\n> Constructor https://github.com/conda/constructor is a tool for creating\n> installers from conda packages that Continuum recently released. Blog post\n> https://www.continuum.io/blog/developer-blog/introducing-constructor\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1233\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","A few minor comments, but :+1: \n Is this API compatible?\n\nSent from my iPhone\n\n> On Mar 20, 2016, at 3:58 PM, Matthias Bussonnier notifications@github.com wrote:\n> \n> look in config for keys.command.unbind, keys.edit.unbind for which shortcuts to unbind, \n> then keys.command.bind, keys.edit.bind for new shortcut to bind.\n> \n> Done after feedback at JupyterDays.\n> \n> Command Palette hover of Shortcut area show the action name as a tooltip so that users know what to bind.\n> \n> Cleanup Js here and there, and replace (command) in command palette with (command mode) to remove confusion with Cmd keys on Mac.\n> \n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/jupyter/notebook/pull/1234\n> \n> Commit Summary\n> \n> Make keyboard shortcuts declaratives\n> File Changes\n> \n> M notebook/static/base/js/keyboard.js (10)\n> M notebook/static/deprecated-imports.js (2)\n> M notebook/static/notebook/js/celltoolbarpresets/attachments.js (3)\n> M notebook/static/notebook/js/celltoolbarpresets/default.js (1)\n> M notebook/static/notebook/js/celltoolbarpresets/rawcell.js (1)\n> M notebook/static/notebook/js/celltoolbarpresets/slideshow.js (1)  \n> M notebook/static/notebook/js/commandpalette.js (2)\n> M notebook/static/notebook/js/keyboardmanager.js (20)\n> M notebook/static/notebook/js/main.js (4)\n> M notebook/static/notebook/js/notebook.js (3)\n> M notebook/static/notebook/js/quickhelp.js (2)\n> M notebook/static/notebook/less/commandpalette.less (5)\n> M notebook/static/services/config.js (4)\n> Patch Links:\n> \n> https://github.com/jupyter/notebook/pull/1234.patch\n> https://github.com/jupyter/notebook/pull/1234.diff\n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n > Is this API compatible?\n\nWith what ? \n @willingc added a bit of documentation. Can I get your feedback on it ? \n > Is this API compatible?\n> With what ?\n\nMore especially: it is purely an addition of a config section. It maps what user were doing in their `custom.js` with a corresponding config entry (we can bikeshed on the name if you like). \n\nThere is 0 API deletion, 0 API addition, 0 API modification. Just the **provisional** (added in the docs) addition of a config section in the docs. \n\nSo I'm not sure what your question of API compatibility means. \n All updated.\n Thanks!\n @carreau Thanks! I'll give a look at the content now that it's merged. Spent yesterday cleaning up the other notebook stuff.\n","Motivation: `NotebookSession.changeKernel(name: string, id?: string): Promise<IKernel>;`.  If the id is provided, that should take precedence over name. \n :+1: \n","What do you get from `jupyter kernelspec list`? My guess is that you have a kernelspec installed for an env that doesn't exist anymore.\n @minrk  here is output\n\n```\n$ jupyter kernelspec list\nAvailable kernels:\n  django_extensions\n  python2\n```\n @ChillarAnand Let's see if we can get a bit more detail to help you. Would you please share the output of the following two commands:\n\n```\njupyter kernelspec list --debug\n```\n\nand\n\n```\njupyter notebook --debug\n```\n\nThanks.\n You might also want to upgrade jupyter-client:\n\n```\npip install --upgrade jupyter-client\n```\n\nYou can try installing the kernelspec for the virtualenv explicitly:\n\n``` bash\nipython kernel install --prefix \"$VIRTUAL_ENV\"\n```\n I have restarted system and not able to reproduce this. Thanks for the help.\n I faced the same issues on our system. and followed all the comments. still got exceptions.\nAny ideas?\nDetail logs###############\n[W 03:42:30.634 NotebookApp] Notebook user/hadua/Crawle to Files.ipynb is not trusted\n[I 03:42:31.585 NotebookApp] Kernel started: fd8aae45-30bc-4c81-99d1-2d2f3b751745\n[E 03:42:31.586 NotebookApp] Unhandled error in API request\n    Traceback (most recent call last):\n      File \"/usr/local/lib/python2.7/site-packages/notebook/base/handlers.py\", line 457, in wrapper\n        result = yield gen.maybe_future(method(self, _args, *_kwargs))\n      File \"/usr/local/lib/python2.7/site-packages/tornado/gen.py\", line 1015, in run\n        value = future.result()\n      File \"/usr/local/lib/python2.7/site-packages/tornado/concurrent.py\", line 237, in result\n        raise_exc_info(self._exc_info)\n      File \"/usr/local/lib/python2.7/site-packages/tornado/gen.py\", line 1021, in run\n        yielded = self.gen.throw(*exc_info)\n      File \"/usr/local/lib/python2.7/site-packages/notebook/services/sessions/handlers.py\", line 62, in post\n        kernel_id=kernel_id))\n      File \"/usr/local/lib/python2.7/site-packages/tornado/gen.py\", line 1015, in run\n        value = future.result()\n      File \"/usr/local/lib/python2.7/site-packages/tornado/concurrent.py\", line 237, in result\n        raise_exc_info(self._exc_info)\n      File \"/usr/local/lib/python2.7/site-packages/tornado/gen.py\", line 1024, in run\n        yielded = self.gen.send(value)\n      File \"/usr/local/lib/python2.7/site-packages/notebook/services/sessions/sessionmanager.py\", line 81, in create_session\n        self.save_session(session_id, path=path, kernel_id=kernel_id)\n      File \"/usr/local/lib/python2.7/site-packages/notebook/services/sessions/sessionmanager.py\", line 121, in save_session\n        return self.get_session(session_id=session_id)\n      File \"/usr/local/lib/python2.7/site-packages/notebook/services/sessions/sessionmanager.py\", line 152, in get_session\n        self.cursor.execute(query, list(kwargs.values()))\n    \"OperationalError: Could not decode to UTF-8 column 'kernel_id' with text '\\xf9\\x80\\x81\\xa6\\xf8\\x90\\x80\\xb8\\xf9\\x90\\x81\\xa1\\xfd\\x90\\x80\\xb4\\xfc\\xb0\\x80\\xad\\xf8\\xa0\\x80\\xb0\\xfb\\x90\\x81\\xa3\\xf8\\xb0\\x80\\xb4\\xfc\\x90\\x80\\xb8\\xfe\\x90\\x80\\xad\\xf9\\x80\\x80\\xb9\\xfb\\x90\\x80\\xb1\\xf9\\x80\\x80\\xb2\\xf9\\xa0\\x80\\xb2\\xf8\\xa0\\x80\\xb3\\xfd\\x90\\x80\\xb7\\xfd\\xb0\\x80\\xb1\\xfd\\x90\\x80\\xb4'\"\n","This is ready for review.  I allowed it to use the kernel name if the kernel id is not active, for compatibility with the existing notebook.\n Nice! And I think we do want to keep the new-kernel if one doesn't exist, since that should still be the majority use case.\n","Hi, \n\nThank for the idea, it is something we considered and would like to have. We are just mainly missing the bandwidth to \n1. Dig out the API in codemirror and the browser to allow scrolling highlighting. \n2. Write the relevant code. \n\nI would suggest to look at https://github.com/ipython-contrib/ipython-notebook-extensions they might have something along these lines, and if so at some point someone shoulf try to bring the code over into the core of Jupyter notebook. \n","Starting a kernel does have to be async, and since sessions start kernels that may be hard to avoid for the sessions API. I'm not sure I understand what's going wrong in your example, since the list of running sessions will include the session if it's started, and won't if it hasn't yet.\n Question: when you say async, are you seeing that the session isn't listed after the REST call _finishes_? If that's true, it's an async bug missing a yield, because the session should certainly finish existing by the time it replies to the API call.\n Yes, we POST to `/sessions`, and get an ID back, then GET `/sessions`, and that id is not listed.  I'll double check, but that is what I saw yesterday.\n False alarm, confirmed the bug is on my end, sorry for the noise!\n\n```\n***session started a5d6ea8f-a7be-48f0-8890-04c6e81583f5\nbundle.js:44025 **got ids [Object]0: Objectid: \"a5d6ea8f-a7be-48f0-8890-04c6e81583f5\"kernel: Objectnotebook: Object__proto__: Objectlength: 1__proto__: Array[0]\n```\n Okay, great. I asked because it's an easy bug to introduce: one missing yield, and you can end up with the HTTP handler returning before its actions have completed.\n","Notes from Day 1:\n\n``` rst\nipykernel:plotting\n\n\nPlotting\n--------\nOne major feature of the Jupyter notebook is the ability to display plots that \nare the output of running code cells. The IPython kernel is designed to work \nseamlessly with the matplotlib_ plotting library to provide this functionality.\n\nTo set this up, before any plotting is performed you must execute the\n``%matplotlib``  :ref:`magic command <magics_explained>`. This performs the\nnecessary behind-the-scenes setup for IPython to work correctly hand in hand\nwith ``matplotlib``; it does *not*, however, actually execute any Python\n``import`` commands, that is, no names are added to the namespace.\n\nIf the ``%matplotlib`` magic is called without an argument, the\noutput of a plotting command is displayed using the default ``matplotlib``\nbackend in a separate window. Alternatively, the backend can be explicitly\nrequested using, for example::\n\n  %matplotlib gtk\n\nA particularly interesting backend, provided by IPython, is the ``inline``\nbackend.  This is available only for the Jupyter Notebook and the\n:ref:`IPython QtConsole <qtconsole>`.  It can be invoked as follows::\n\n  %matplotlib inline\n\nWith this backend, the output of plotting commands is displayed *inline*\nwithin the notebook, directly below the code cell that produced it. The\nresulting plots will then also be stored in the notebook document.\n\n.. seealso::\n\n    `Plotting with Matplotlib`_  example notebook\n\n\nipykernel:install\n\n\nIPython can be installed (different python versions, virtualenv or conda environments) can\nbe installed as a kernel by following these steps:\n\n* make sure that the desired python installation is active (e.g. activate the environment)\n  and ipython is installed\n* run once ``ipython kernelspec install-self --user`` (or ``ipython2 ...`` or ``ipython3 ...``\n  if you want to install specific python versions)\n\nThe last command installs a kernel spec file for the current python installation in\n``~/.jupyter/kernels/``. Kernel spec files are JSON files, which can be viewed and changed with a\nnormal text editor.\n\n\nnbconvert:index\nnbformat:format_description\nipython:ipythonzmq\n```\n\nQUESTIONS:\nis the config file still ipython_notebook_config.py ? and still in .ipython ?\n `ipython_notebook_config.py` no.... , it will be in `usr/share/jupyter` or in ~/Library/Jupyter (osx) or .jupyter IIRC.  \n The config file should be `~/.jupyter/jupyter_notebook_config.py`, I believe.\n > The config file should be ~/.jupyter/jupyter_notebook_config.py, I believe.\n\nThat's what min said too, thanks guys.\n This looks like a good start. I think you need to update the `conf.py` file to configure intersphinx for the links you're making into other docs.\n Note to self, stopped on `JavaScript Notebook Extensions.ipynb`\n As of the last commit, this PR has doc changes that depend on @Carreau 's  PR #102 . \n ~~@takluyver This is bananas :banana: , https://readthedocs.org/builds/jdfreder-notebook/2905895/~~\n\n~~Something in the notebook docs depends on QtConsole apparently.  GHPages FTW? :checkered_flag:~~\n\nCrossed out shame.\n @takluyver looks like the conf.py stuff isn't working - https://readthedocs.org/builds/jdfreder-notebook/2905991/ .  I think the notebook isn't getting installed before RTD runs.\n Just an update, I've made some progress with RTD, but it looks like it's failing now because of npm.\nLatest here: https://readthedocs.org/builds/jdfreder-notebook/2906345/\n Success!  This is ready.  Preview - http://jdfreder-notebook.readthedocs.org/en/latest/\n minimal comments, but not really important. Merging. \n","Thanks!\n","I think that's a good idea.\n\nShould the value in the model be a last_activity timestamp or an idle time? Thinking about the smarter version with busy/idle checking: if it's currently busy, idle time is zero, whereas calculating a 'now' timestamp is a bit more work and less immediately clear for someone inspecting the protocol.\n Could this be used for educators looking at things like \"Time on Task\"? \n\nWhat could be useful from logs would be information like:\n- each time that a particular cell was executed\n- idle time\n- time spent editing a particular cell (perhaps through indirect measures)\n It think it is a good idea to have something like this. Not sure it is\nworth the cost of deserializing all the messages thought to handle the\nbusy/idle stuff.\n\nOn Tue, Mar 22, 2016 at 8:22 AM, Doug Blank notifications@github.com\nwrote:\n\n> Could this be used for educators looking at things like \"Time on Task\"?\n> \n> What could be useful from logs would be information like:\n> - each time that a particular cell was executed\n> - idle time\n> - time spent editing a particular cell (perhaps through indirect\n>   measures)\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1241#issuecomment-199862804\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @dsblank this wouldn't be useful for something like that, because it has no awareness of the document. That would probably be better written as a javascript extension.\n Forgot to close this in #1827","Duplicate of #1040 \n","Could you edit the title of this issue - at first I thought you were\ntalking about CSS classes or something in the UI. Maybe something like\n\"Define a Python class across multiple cells?\"\n\nOn Tue, Mar 22, 2016 at 11:56 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> This issue is both Notebook & IPython, but I guess could be solved here\n> only with an extension.\n> \n> Again, requested during JupyterDays:\n> \n> For education purpose, it would be nice to be able to define a class\n> across many cells., in particular 1 method/cell.\n> \n> I think it is possible by peeking at next/previous coed cells, and if the\n> all body of a cell is indented by at least 4 spaces, \"join\" the content of\n> each cell before sending a single execution request.\n> \n> we could \"mark\" joined executed cells with a specific prompt.\n> \n> Ping @ellisonbg https://github.com/ellisonbg\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1243\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Title updated.\n We currently dedent code if it's all indented, because it's not uncommon to copy some code from the middle of a method or function with the intention of running it directly.\n\nI'm happy to help someone build an extension for this, but:\n- I don't think it's likely to be smooth or seamless enough to go into IPython/Jupyter itself\n- I'd probably do it with cell magics, e.g. `%%addtoclass FooBar`. Explicit is better than implicit, etc.\n We dedent it in IPython, I'm thinking a Js extension can likely handle submitting all cells at the same time. \n I'm not quite sure what you're envisaging, but I can't see anything in the frontend solving this in a nice way.\n js can group the cells input and send it as a single execution, rather than executing the cells separately.\n ```\nCell.prototype.execute = function(){\n   if(this.all_indented){\n      this.kernel.execute(this.previous.cell.source + this.cell.source)\n   } else {\n      this.kernel.execute(this.cell.source)\n  }\n}\n```\n That feels like something that could be really confusing, so I wouldn't want it on by default. But if it's an optional extension, then it's very easy for people using it to create notebooks that won't work for anyone without the extension, and will fail in mysterious and confusing ways.\n > That feels like something that could be really confusing, so I wouldn't want it on by default. But if it's an optional extension, then it's very easy for people using it to create notebooks that won't work for anyone without the extension, and will fail in mysterious and confusing ways.\n\nYep, seem about right. \n An explicit cell magics for this would be nice My humble vision for this sort of feature is the ability to create 'subcells'. Perhaps even automatically convert doc strings and other inline comments into these 'subcells'. Therefore we could conveniently intersperse markdown within classes and other long code blocks where appropriate. The challenge, I suspect, will be executing the 'parent' cell as a single unit.\r\n\r\nI am trawling the documentation now to prepare myself for contributing plugins/fixes. However, if someone can kindly point me in the right direction I will gladly take a stab at implementing this. What is the feasibility of my suggestion? Would it need to be a plugin? ","For now, I think the toolbar would be the appropriate place for this in the\ncurrent notebook.\n\nBeyond that, I am going to start having @cameronoelsen start to work on\nsome new UI ideas for cells that address better output collapse/scroll,\ninput hiding/show, etc. I think per cell actions like this should be more\nclosely associated with cells - rather than up on the toolbar. The main\nquestion is how to represent that UI without putting the same UI on every\ncell - that would be too much repetition. I have some ideas, but will need\nto work with Cameron on them from the visual/interaction perspective. But\nthe line numbers would go well with these other actions.\n\nOn Tue, Mar 22, 2016 at 12:00 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> An important feature that people are missing from the notebook is having\n> line numbers in cells.\n> \n> Said during jupyter Days Boston education panel, with audible approval\n> from the room.\n> \n> Shouting \"Press Esc and then L\" was then followed by the speaker trying\n> and a round of applause.\n> \n> This make me believe that a button to toggle that would be (highly ?)\n> appreciated.\n> \n> Ping @ellisonbg https://github.com/ellisonbg\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1244\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Now that we have the frontend config, a lot of these options can be set and saved via UI. The text editor includes a basic experiment of persisting CodeMirror config, and options in the menus. The two basics it already includes are CodeMirror keybindings and line numbers.\n If we persist, we then **likely** want to have the switch affect all cells.\n I imagine that's what ~everyone would want, anyway.\n @secant, we can try to have a look at this one if you want to give it a shot and learn some javascript. \n You can take a look at this [toggle_all_line_numbers](https://github.com/ipython-contrib/IPython-notebook-extensions/tree/master/nbextensions/usability/toggle_all_line_numbers) extension, which basically does what you want. You can also assign a hotkey that is stored in the frontend config.\n\nIt should not be very hard to add another config parameter to make the line number display persistent. \n Thanks @juhasch I was planning on searching in IPython-contrib, but you beat me to it !\nWe'll strat from that on update to use newer APIs thanks !. \n I did not exactly get the story in the first post, but I have hard time trying myself to toggle the line numbers. On MacOSX10.10.5, GoogleChrome,It works with some infinitesimal probability. 99% it does not. \nEsc followed by Cmd + capital L, Enter(where in the cell one is supposed to hit it, so that it does not mess the code?) followed by Cmd + capital L, the same with small l, do not work. Some of these combinations lead to the address line (maybe it is Chrome specific). \n\nDefinitely would appreciate some more transparent way to switch it on.\n > Esc\n\nNo, you do not need to press Esc everytime. `Esc` is just to go to command mode.\n\n> Cmd\n\nYou do not need to press command either. \n\n> capital L,\n\nThe shortcut is lower case L. Not upper case. It would be upper case you would explicitly see `Shift-L` as the shortcut. \n\nSo go to command mode, like when the border of the cells are blue, and just press `l` just once, no modifiers. \n\nI'm not sure where you had the idea to Press Esc, and Cmd, and Shift, the shortcut list seem pretty explicit to me as is does explicitly show what key you need to press. \n![screen shot 2016-05-23 at 14 47 37](https://cloud.githubusercontent.com/assets/335567/15485656/63f53fdc-20f5-11e6-9cf1-98e9e68f4437.png)\n thank you @Carreau, it works. I just followed instruction, which reads a bit ambiguous. It says: `Command Mode (press Esc to enable) Edit Mode (press Enter to enable)`. The short cut I need looks to be in continuation of the `Edit Mode (press Enter to enable)` paragraph, this is why I was confused. Shift is because it shows a capital `L`. I see there is no Cmd (it belonged to the upper 'save and checkpoint'). \n It seems to be a recurring problem with our keyboard shortcuts help - people assume that the modifier keys from one shortcut also apply to the shortcuts below. I know it's unusual to use unmodified letter keys as shortcuts (except for games), but I wonder if we can redesign the list to make that clearer - maybe by putting all of the modified shortcuts at the end of the section?\n > It seems to be a recurring problem with our keyboard shortcuts help - people assume that the modifier keys from one shortcut also apply to the shortcuts below. I know it's unusual to use unmodified letter keys as shortcuts (except for games), but I wonder if we can redesign the list to make that clearer - maybe by putting all of the modified shortcuts at the end of the section?\n\nI think that would be solved once the shortcuts are on the right side of the menus. \n This was implemented by https://github.com/jupyter/notebook/pull/1676.\n","No doubt we need much better debugging support...\n\nOn Tue, Mar 22, 2016 at 12:05 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> No particular exact feature request but a request I had a few time was :\n> \n> \"how do you debug in notebook\".\n> \n> I think this both include breakpoints, and likely a \"better\" PDB console.\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1246\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > No doubt we need much better debugging support...\n\nYeah, sorry if its not specific, I have a few ideas on this, but I wanted to make everyone aware of what \nI was told at Jupyter Days.\n","We had talked about adding a new message type for errors with a mimebundle (the present error message only has a text traceback).\n\nThinking about it more, I'm not sure we need a new message type: maybe messages should just display with `display_data`, and then execute_reply with status error is the programmatic indicator that it failed.\n I don't recall a proposal for a new message type. My understanding of the plan was to extend the existing `error` message with richer data (possibly mimebundle, possibly structured in a more traceback-centric way), so that exceptions can be better rendered.\n Oh, that may have been it. A backward-compatible change to the message spec, anyway.\n\nIf we do want to use a mimebundle (which I think is a simple enough extension), I think it's worth considering just doing that with the existing `display_data` message, though - I'm not sure there's any reason to add a mimebundle to error messages.\n There is a reason to add it to the same message in that I think it would make it simpler to do a backward-compatible upgrade without anyone displaying a traceback twice. That might not be true, though; I haven't though about it thoroughly.\n I was thinking of just switching over to `display_data` messages and dropping the use of `error` messages entirely. There's still the execute_reply to provide a programmatic indication that execution failed.\n","Thanks for the report @akhmerov, this issued has been fixed in `jupyter-js-plugins`, but I still need to make a PR to add that functionality here.\n","@minrk, this is good to go and has a lot of utility.\n :tada:\n","@Carreau I think this was removed at Brian's suggestion a while ago.\n > @Carreau I think this was removed at Brian's suggestion a while ago.\n\nThen it's a bad one. Because that does not prevent people from writing extensions, and then rely on old tutorial that are inaccurate, and invent things.\nI had many requests to to include that at JupyterDays, and have been regularly correcting people on how to build extension. \n @carreau Let's do this. I'll add this back and see if all the notebooks build cleanly in Sphinx and we can remove the rst files. I'll ping you when I'm ready for it to be reviewed.\n Trying to catch up on this. I don't remember the original discussion - @willingc do you have a pointer to that.\n\nThe only thing I can think of is that before we started to clean up the nbextension stuff for 4.2, the entire nbextension dev experience was bad enough that I was opposed to us promoting it. However, for 4.2 the situation has improved dramaticaly and I think we should start to promote it.\n @ellisonbg It was a verbal discussion back in December when we were trying to remove some of the duplication of documents (rst vs. ipynb) as well as get doc things back on track. I agree that 4.2 dramatically improves and we should promote it. \n\nI've been fighting a bit to get the notebooks to build cleanly as notebooks (vs rst files) tonight. I'll continue cleaning up and hope to have it done tomorrow. \n Hmm, I don't remember the context exactly. But as @willingc knows I am +1\non more integration of notebooks into the docs.\n\nOn Tue, Mar 22, 2016 at 10:09 PM, Carol Willing notifications@github.com\nwrote:\n\n> @ellisonbg https://github.com/ellisonbg It was a verbal discussion back\n> in December when we were trying to remove some of the duplication of\n> documents (rst vs. ipynb) as well as get doc things back on track. I agree\n> that 4.2 dramatically improves and we should promote it.\n> \n> I've been fighting a bit to get the notebooks to build cleanly as\n> notebooks (vs rst files) tonight. I'll continue cleaning up and hope to\n> have it done tomorrow.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1250#issuecomment-200184606\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","Double check that this works without this file. It didn't a few months ago.\n Actually it works if you remove all files from `rstversions/` why are here anyway ? Are they supposed to be in the repository ? I thought we decided **not** to keep the rst versions of notebooks.\n We decided not to commit them, but then building them on RTD stopped working, so they were restored while we figured out a more reliable way to build notebooks into sphinx. I think if we adopt nbsphinx here like we did in nbconvert, we can safely drop the rstversions.\n @minrk Yes, that's the approach that I'm working on. There are a few build errors within the notebooks (nbconvert errors) that need to be resolved even if using nbsphinx. Working on fixing those today.\n","We should have a doc build test run in Travis as well as a daily build all the docs job on Jenkins. I monitor this http://willingc.github.io/doc_helper/ on a regular daily basis too.\n We have a Jenkins job that builds the IPython docs, but I think @willingc's page is the best thing for this - RTD is already building the docs on each commit, so we may as well make use of that.\n\nI don't know if there's an easy way to control what are warnings vs errors in Sphinx. Things like the 'document not in any toctree' are a warning, so they don't cause the build to fail, but if we turn all warnings from Sphinx into errors, I think people are going to get very frustrated with docs constantly failing to build.\n Yeah, let's add Sphinx to the list of Project we should rewrite.\n\nOn Tue, Mar 22, 2016 at 3:57 PM, Thomas Kluyver notifications@github.com\nwrote:\n\n> We have a Jenkins job that builds the IPython docs, but I think @willingc\n> https://github.com/willingc's page is the best thing for this - RTD is\n> already building the docs on each commit, so we may as well make use of\n> that.\n> \n> I don't know if there's an easy way to control what are warnings vs errors\n> in Sphinx. Things like the 'document not in any toctree' are a warning, so\n> they don't cause the build to fail, but if we turn all warnings from Sphinx\n> into errors, I think people are going to get very frustrated with docs\n> constantly failing to build.\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1252#issuecomment-200069099\n Closed by #1255\n","Ok, let's try that !\n\nThanks !\n Thanks!\n","Wow, that is fantastic progress. A few questions:\n\nWhat is meant by \"Community Documentation?\" Is that what we are using to\nrefer to all our docs, or just part of the docs that non-core devs wrote?\n\nOriginally the notebook based documentation was supposed to be _the_\ndocumentation for the notebook - at least that is how I wrote it initially.\nThe only problem is that we didn't delete the other sphinx docs so now we\nhave things repeated in multiple places. Have we started to deduplicate the\ncontent so that content is only in one place or the other rather than both?\n\nKids are here this week, so I won't have much of a chance to do an in depth\nreview, so I would merge and we can iterate further.\n\nCheers, and great work!\n\nOn Wed, Mar 23, 2016 at 8:46 PM, Carol Willing notifications@github.com\nwrote:\n\n> Closes #1250 https://github.com/jupyter/notebook/pull/1250 #1251\n> https://github.com/jupyter/notebook/pull/1251 #1252\n> https://github.com/jupyter/notebook/issues/1252\n> \n> I think this incorporates all the desired changes that @carreau\n> https://github.com/carreau wanted in these issues and PRs:\n> - Removed rst versions of notebooks\n> - notebooks build using nbsphinx\n> - Removed the Examples index notebook and replaced with a rst version\n>   since linking from notebook to notebook was not working on RTD\n> - Fixed the Typesetting equations notebook so that it now displays the\n>   rendered math on RTD [image: :tada:]\n> - Fixed a bunch of the notebooks including: to avoid segfaulting\n>   sphinx, to use py3 for all nbs, to avoid using multiple H1 in notebooks so\n>   contents render more neatly\n> - Gotten rid of all warnings except one pesky one\n> - Added notebook extensions back to the TOC.\n> - Updated conda yaml to environment.yml\n> \n> Here's a rendered version on RTD\n> http://testnb.readthedocs.org/en/new-build/examples/Notebook/Typesetting%20Equations.html\n> .\n> \n> _Visual of Master Table of Contents_\n> [image: screen shot 2016-03-23 at 8 29 03 pm]\n> https://cloud.githubusercontent.com/assets/2680980/14007828/95364840-f137-11e5-989a-903a5ce8a050.png\n> \n> _Visual of example notebooks table of contents_\n> [image: screen shot 2016-03-23 at 8 29 24 pm]\n> https://cloud.githubusercontent.com/assets/2680980/14007829/9536556a-f137-11e5-9a20-448c1180599a.png\n> \n> I spent way too long on this but it fixes a bunch of loose ends that have\n> bugged me for a while.\n> \n> @carreau https://github.com/carreau, @minrk https://github.com/minrk,\n> \n> ## @ellisonbg https://github.com/ellisonbg Please review. Thanks.\n> \n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/jupyter/notebook/pull/1255\n> Commit Summary\n> - Remove rst versions of nb\n> - Update makefile and build configuration\n> - Update the nodebook so a cell doesn't cause a segfault intentionally\n> - Update TOC\n> - Add frontend doc\n> - Tweak notebooks for build\n> - Add nbsphinx to conda yaml\n> - Save notebook as py3\n> - Fix some links\n> - Use rst for index\n> - Drop H1 to H2 in markdown\n> - Add link to nbviewer at the top of the rst index\n> - Fix typo\n> - Try Prof. Willie Wong's code snippet\n> - Added $ for mathjax\n> - $ for math doc win\n> \n> File Changes\n> - _M_ docs/Makefile\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-0 (6)\n> - _R_ docs/environment.yml\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-1 (6)\n> - _M_ docs/source/conf.py\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-2 (4)\n> - _D_ docs/source/examples/Notebook/Examples and Tutorials Index.ipynb\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-3 (81)\n> - _M_ docs/source/examples/Notebook/Importing Notebooks.ipynb\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-4 (2)\n> - _M_ docs/source/examples/Notebook/JavaScript Notebook\n>   Extensions.ipynb\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-5 (17)\n> - _M_ docs/source/examples/Notebook/Notebook Basics.ipynb\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-6 (10)\n> - _M_ docs/source/examples/Notebook/Running Code.ipynb\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-7 (653)\n> - _M_ docs/source/examples/Notebook/Typesetting Equations.ipynb\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-8 (40)\n> - _M_ docs/source/examples/Notebook/Working With Markdown Cells.ipynb\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-9 (58)\n> - _A_ docs/source/examples/Notebook/examples_index.rst\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-10 (21)\n> - _M_ docs/source/examples/Notebook/nbpackage/nbs/other.ipynb\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-11 (4)\n> - _D_ docs/source/examples/Notebook/rstversions/Connecting with the Qt\n>   Console.rst\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-12 (67)\n> - _D_ docs/source/examples/Notebook/rstversions/Custom Keyboard\n>   Shortcuts.rst\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-13 (71)\n> - _D_ docs/source/examples/Notebook/rstversions/Examples and Tutorials\n>   Index.rst https://github.com/jupyter/notebook/pull/1255/files#diff-14\n>   (34)\n> - _D_ docs/source/examples/Notebook/rstversions/Importing Notebooks.rst\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-15 (286)\n> - _D_ docs/source/examples/Notebook/rstversions/JavaScript Notebook\n>   Extensions.rst\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-16 (389)\n> - _D_ docs/source/examples/Notebook/rstversions/Notebook Basics.rst\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-17 (266)\n> - _D_ docs/source/examples/Notebook/rstversions/Running Code.rst\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-18 (154)\n> - _D_ docs/source/examples/Notebook/rstversions/Typesetting\n>   Equations.rst\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-19 (290)\n> - _D_ docs/source/examples/Notebook/rstversions/What is the Jupyter\n>   Notebook.rst\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-20 (136)\n> - _D_ docs/source/examples/Notebook/rstversions/Working With Markdown\n>   Cells.rst https://github.com/jupyter/notebook/pull/1255/files#diff-21\n>   (313)\n> - _D_ docs/source/examples/Notebook/rstversions/index.rst\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-22 (37)\n> - _M_ docs/source/extending/frontend_extensions.rst\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-23 (5)\n> - _M_ docs/source/extending/index.rst\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-24 (1)\n> - _M_ docs/source/index.rst\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-25 (17)\n> - _M_ readthedocs.yml\n>   https://github.com/jupyter/notebook/pull/1255/files#diff-26 (2)\n> \n> Patch Links:\n> - https://github.com/jupyter/notebook/pull/1255.patch\n> - https://github.com/jupyter/notebook/pull/1255.diff\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1255\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg Yeah, we really should move the notebooks up to the user documentation section. The community section is really a place for us to highlight great uses and community written documentation that would be helpful to others.\n\nHave fun with the kids. O'Reilly sustainability summit was very good yesterday. It sparked a few ideas that I want to share with you and others when we meet in person.\n Thanks, @willingc! Merging here, and we can continue content discussions in subsequent PRs.\n Thanks @minrk. Linking notebook to notebook is one thing that is holding us back from using the notebook more in documentation. If you have any thoughts on that, please share :-) I do plan to rationalize the content as suggested by @ellisonbg.\n Awesome ! Thanks !\n @willingc wrote:\n\n> Linking notebook to notebook is one thing that is holding us back [...]\n\nWhat do you mean?\n\nThis should work just as it works in the live notebook and on nbviewer, see http://nbsphinx.readthedocs.org/en/latest/markdown-cells.html#Links-to-Other-Notebooks\n\nOr am I missing something?\n\nBTW, [ipynb -> rst](http://nbsphinx.readthedocs.org/en/latest/markdown-cells.html#Links-to-*.rst-Files-%28and-Other-Sphinx-Source-Files%29) and [rst -> ipynb](http://nbsphinx.readthedocs.org/en/latest/rst.html#links-to-notebooks) should work as well, if anybody should need that.\nHowever, links to subsections are only possible if the target is a notebook.\n @willingc Did you read my comment above?\n\nBTW, I've just made a new [`nbsphinx` release](https://github.com/spatialaudio/nbsphinx/releases) which should handle LaTeX math environments correctly. With that, the work-around with different numbers of `$` signs shouldn't be necessary anymore.\n","What happens when you change the configuration to the one below?\n\n```\nc.NotebookApp.tornado_settings = {\n    'headers': {\n        'Content-Security-Policy': \"frame-ancestors 'http://localhost:8000' 'self'\",\n    }\n}\n```\n @captainsafia  I tried the above configuration and followed the changes in https://github.com/jupyter/notebook/blob/master/docs/source/public_server.rst#embedding-the-notebook-in-another-website\n\n**Inspect element output :**\n![image](https://cloud.githubusercontent.com/assets/5075497/18266339/d79f590a-7437-11e6-9cc4-0973de4dfa64.png)\n\n**Rendered index.html page**\n![image](https://cloud.githubusercontent.com/assets/5075497/18266078/7da0aff4-7436-11e6-89b4-182ac3bc0c68.png)\n\n**Changes in jupyter_notebook_config.py** \n![image](https://cloud.githubusercontent.com/assets/5075497/18266121/b3bf4fbe-7436-11e6-860b-5f6f6e53aa4e.png)\n\nNotebook server  is on 8888 and my local server is on 8000\n\nThere is a ~/.jupyter/custom/custom.js file which needs to made some changes but I did not find this file in the location mentioned in the documentation.\n\n**Code change :**\n![image](https://cloud.githubusercontent.com/assets/5075497/18266174/0550c3a8-7437-11e6-8443-c43fe590d395.png)\n\n**Folder path:**\n![image](https://cloud.githubusercontent.com/assets/5075497/18266188/1c63fad8-7437-11e6-8bd0-dac26818f1f7.png)\n\n![image](https://cloud.githubusercontent.com/assets/5075497/18266201/362efdfa-7437-11e6-8dc6-07afeb9c7860.png)\n\nI made the above js script changes in the location /usr/local/lib/python2.7/dist-packages/notebook/static/custom/custom.js which I got from locate custom.js\n\nIs it not working because of the js changes not made properly or refused to display error ??\n My complete code implementation I have uploaded in https://github.com/dvigneshwer/Spawning_jupyter_notebook_webapp and also have mentioned all the problems I am facing.\n I tried without http:// also it does not work.\n Solved the problem with this configuration.\n\n@captainsafia @bwangel23 check https://github.com/jupyter/notebook/issues/1745#issuecomment-246564901\n","Seems like the bug reported in #1010, which was fixed in #1032.\n Oops. Failed to find that. Closing.\n",":+1: :tada: \n @captainsafia thanks!\n\n@mgeier Thanks for the review. I'm not sure why `pip install --user` worked on your system in a virtual environment. See [pip docs](https://pip.pypa.io/en/stable/user_guide/#user-installs) and screenshot of a virtual environment and Python 3.5.1 reflect desired usage:\n<img width=\"881\" alt=\"screen shot 2016-03-25 at 12 17 15 am\" src=\"https://cloud.githubusercontent.com/assets/2680980/14040143/51ea51cc-f221-11e5-80cf-33fc9fc42602.png\">\n @willingc Sorry, I should have been clearer: I was talking about `venv` which is part of Python since version 3.3. It is typically also available from the commandline as `pyvenv`.\nThe error you are showing happens with an old-style `virtualenv` and apparently also with `virtualenvwrapper`.\n\nI think this should be the preferred way to create a virtual environment:\n\n```\npython3 -m venv myenvname\n```\n\nThis fits nicely with `python3 -m pip install ...` and `python3 setup.py ...`.\n\nI think its not worth cluttering the documentation with legacy solutions like `virtualenv`.\nEspecially if this misleads new users into using obsolete tools.\n > I think its not worth cluttering the documentation with legacy solutions like virtualenv.\n> Especially if this misleads new users into using obsolete tools.\n\n`virtualenv` is an actively maintained project of pypa and one of the two recommended ways of creating a virtual environment https://packaging.python.org/en/latest/installing/#creating-virtual-environments \n\nLet's try to keep this productive and focused on the contributors (some of which are going to use conda, some venv, and some virtualenv). \n OK, fair enough.\nI'm just trying to simplify things ...\n\nBy not adding this comment now, this paragraph is already future-proof. By adding it now, somebody will have to remove it in the future or it will just stay there, distracting readers.\n :+1: \n","+1 once travis Happy. \n","Closed by #1261, thanks !\n","Suppose you mean #1260. The commit seem not to be linked to your GitHub account, if we merge you won't get \"credit\". Is that ok for you ?\n\n+1 otherwise. \n yes, I'm ok. thanks\n Thanks.\n","That's very odd. Did Firefox 45 just come out? I use Firefox, and I'm sure\nI would have noticed this.\n According to my logs my version of Firefox(45.0+build2-0ubuntu0.15.10.1) was updated on 3-10-16. 2 days after the official release.\n @takluyver I'm using Firefox (45.0.1) on OS X and comments and markdown are working as expected. Perhaps a Julia kernel or OS specific issue?\n Ah, I missed that it was with Julia. It could be an issue with the Julia\nmode codemirror is using.\n\nCan you reproduce this in a Python notebook, or only when using Julia?\n Yes it fails in a Python notebook as well.\n That's very odd. I've just double checked that comments do indeed work for me, and I'm also using Firefox 45 on Linux with Gnome 3 (Fedora).\n\nIs there anything peculiar about your system that could conceivably affect this? Any Firefox extensions? Could it be a caching issue (try running the notebook server on a different port, with `--port 8239`, to avoid the cache)? Are you running a released version of jupyter_notebook, or from master? What version?\n I started Firefox in safe mode (all extensions and addons disabled) using a different port and the problem persists.\n\nI installed the notebook(version 4.1.0) using Anaconda\n I am grasping at straws here, but is there anything odd in the JS console when this happens? Can you use the DOM inspector (right click, inspect element) to investigate what might be causing it?\n I've looked at the JS console and DOM inspector and I didnt notice anything out of the ordinary. (Not that I'm an expert) Below is what the JS console says when I comment and then uncomment the line. \n\n```\nreflow: 3.94ms function textHeight, main.min.js line 3024\nreflow: 1.97ms function leftButtonSelect, main.min.js line 3822\nreflow: 0.66ms function updateHeightsInViewport, main.min.js line 875\nreflow: 0.61ms function paddingVert, main.min.js line 2579\nreflow: 1.49ms function textHeight, main.min.js line 3024\nreflow: 0.6ms function paddingTop, main.min.js line 2578\nreflow: 0.7ms function updateHeightsInViewport, main.min.js line 875\nreflow: 0.69ms function paddingVert, main.min.js line 2579\nreflow: 0.29ms function visibleLines, main.min.js line 639\nreflow: 2.22ms function visibleLines, main.min.js line 639\nreflow: 2.62ms function updateHeightsInViewport, main.min.js line 875\nreflow: 1.36ms function visibleLines, main.min.js line 639\nreflow: 0.61ms function visibleLines, main.min.js line 639\nreflow: 0.72ms function updateHeightsInViewport, main.min.js line 875\nreflow: 0.07ms function visibleLines, main.min.js line 639\nreflow: 0.34ms function visibleLines, main.min.js line 639\n```\n What did the DOM inspector say the colour and visibility of that comment text should be? Does it show up in the DOM?\n\nDo you have, or have you previously had, any kind of custom CSS or JS that might have affected the notebook?\n I haven't had any custom CSS or JS. This is a fresh install of everything. Below is a screen shot of what the DOM inspector says when I have commented out code. \n![screenshot from 2016-03-29 14-04-23](https://cloud.githubusercontent.com/assets/4305891/14123887/7b94d71a-f5b7-11e5-95ae-8b9d116dad3d.png)\n The actual code style is in the `CodeMirror-scroll` div a few lines down in the inspector. Can you drill into that?\n\nIf you go to https://try.jupyter.org/ , can you reproduce the same thing? i.e. is it an issue with your browser or with your server?\n It doesn't work on https://try.jupyter.org/ either. \n\nI looked at the DOM and when I comment out the line the element changes classes from the `cm-variable` to `cm-comment` which I suspect is the right behaviour. It also seems to correctly changes the computed color to the right value. \n\nThis seems to indicate that something is wrong with my browser. I've actually run into other weird problems as well. I seem to be the only one experiencing this problem so don't kill yourself trying to solve this. You certainty have better things to do. \n Well, we like a technical challenge. But yeah, if you can see it on try.jupyter.org too, I think it must be something to do with your browser, and I don't think we can do anything about that. It's really odd, though. I don't know what could be causing that, and I'm pretty sure we've never heard of such a problem before.\n In case you didn't already, check whether you have customised any options in Firefox - fonts, accessibility settings, and the like.\n I dont believe I do but here are my font settings\n![screenshot from 2016-04-03 12-37-53](https://cloud.githubusercontent.com/assets/4305891/14234503/043d8884-f999-11e5-92c9-49c6ee93a893.png)\n\nJust for fun I booted up from the live image I used to install Ubuntu Gnome and the problem went away. So it must of been something unique to my system. Its not the only problem I have with Firefox. For instance, when I search for something on a documentation site I'm making [lstagner.github.io](http://lstagner.github.io/search.html?q=line+of+sight) I get nonsense\n![screenshot from 2016-03-29 15-58-23](https://cloud.githubusercontent.com/assets/4305891/14234518/7ec07cc4-f999-11e5-81a8-05ff559af348.png)\n\nBut no else does\n If you go to the view menu, what is selected under 'text encoding'?\n UTF-8 on locally running notebook and my website\nwindows-1252 on try.jupyter.org\n Not sure why it's different on try.jupyter, but I don't think either of those settings should cause the result you see :confused: \n","Thanks for the note! I'm not sure what the best Python way to handle OS X Aliases would be.\n http://mac-alias.readthedocs.io/en/latest/ might be of help, but unfortunately it seemlike Aliases are 1) a Private API of Apple. 2) deprecated. \n","This is something have have played with. In general we have found that most\nexplicit scrolling events end up causing unpleasant side effects that are\nworse than the original problem.\n\nIn this case, the input area of cells can have arbitrary length - it very\nmay be that the scroll cell to top action could scroll the output off the\nscreen. To get this to work well, we would need some more specific logic\nthat uses heuristics to try and make good decisions. I am not convinced\nthose heuristics would work well, but if you are able to make progress, let\nus know.\n\nOn Fri, Mar 25, 2016 at 1:18 PM, gyphub notifications@github.com wrote:\n\n> Once a cell is run, you naturally want to see the output. If a figure is\n> plotted the output might be off screen and needs to be scrolled into view.\n> This is uncomfortable but can be addressed with overriding the action:\n> \n> ```\n>     Jupyter.keyboard_manager.actions.register({\n>         'help': 'run selected cells',\n>         'handler': function(env, event) {\n>             env.notebook.command_mode();\n>             Jupyter.keyboard_manager.actions.call('jupyter-notebook:run-cell', event, env);\n>             Jupyter.keyboard_manager.actions.call('jupyter-notebook:scroll-cell-top', event, env);\n>             env.notebook.edit_mode();\n>         }\n>     }, 'run-cell', '');\n> ```\n> \n> However, the scroll-cell-top action will not put the last cell of the\n> notebook at the top because there is no 'content' following and the output\n> the cell produces is not taken into account. And again, you have to scroll\n> down to read the error message or see the output.\n> \n> Consider an empty notebook with a single empty cell. It's not a problem\n> putting that cell at the top of the page (where else should it be).\n> scroll-cell-top should put a cell at the top, even if it's the bottom cell.\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1264\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I added a mapping for scroll-cell-top and if that bottom case comes up I use it to scroll the cell after the output was produced, which is quite alright I think.\n @gyphub that's a very useful overriding ! Where exactly should I put it ? (Sorry, I know it must be somewhere in the docs) ","Wow, awesome. I look forward to checking this out.\n\n> JSX: replace < by ?> and /> by <? and you get PHP.\n\nNow you know Facebook's secret to success and adoption of a library.\n Dude awesome!\n I'm very happy to see with the webpack stuff the transition to es6 is straight forward :+1:  :+1:  :+1: \n > I'm very happy to see with the webpack stuff the transition to es6 is straight forward\n\nThe `--watch` is a bit slow and re-parse most of what is in `components`, do you know if there is a way to speed that up ? Or deactivate the optimisations pass on `--watch` ?\n Closing in favor of #1347 that does not have one of the main concern that goes with the PR.\n The main concern coming from the dark thread about use of React in Jupyter?\n > The main concern coming from the dark thread about use of React in Jupyter?\n\nYep.\n","1 comment, +1 otherwise\n Ok, merged, let's see if people complain. \n","This seems like a good use case for the front-end config mechanism - rather\nthan finding a config option to set the default, it could just remember\nwhat sort order you used last.\n is that available currently?\n The mechanism to store and load config from the frontend is, though we don't have great docs for it. Here's what we do have:\n\nhttp://jupyter-notebook.readthedocs.org/en/latest/frontend_config.html\nhttps://github.com/jupyter/scipy-advanced-tutorial/blob/master/Part1/06-storing-config.md\n Working on this now. Woot! No docs! Wild, wild West!\n @captainsafia if you make a PR with persisting the option and dev docs for the relevant config API, you get :cake:.\n","Thanks for the issues and sorry for the delay to respond, a lot of backlog. \n\nYou can kind-of do that already with IPywidgets.\n\nhttps://github.com/ipython/ipywidgets/blob/master/docs/source/examples/Variable%20Inspector.ipynb\n\n We will be working on that for jupyter/jupyterlab as a dockable panel. It is quite hard to get right in a cross-language agnostic way.  \n","Migrated to ipython/traitlets#203\n It certainly should! (I moved the issue over to ipython/traitlets)\n","Rather than properly randomising, it should probably be a fixed length (30 characters, to make people feel insecure?) so that it doesn't change each time you rerun/resave the notebook.\n We already do that. the password I tried was just the same lenght as what we store... :-(\n","`notebook/merge_cells_api.js` fails on travis but succeed locally. Can someone restart the travis build ?\n @julienr I restarted travis. All green now.\n @willingc thanks\n Yeah ! Less code !\n","Likely related to Sphinx error https://github.com/sphinx-doc/sphinx/issues/2394\n Did you mean sphinx-doc/sphinx#2397? That looks more similar to the errors on RTD.\n That one too.\n","Thanks for opening this, @eugenesvk! The Notebook isn't actually the interface responsible for importing JavaScript modules, the IJavascript kernel takes care of this. If you open this issue in the IJavascript kernel repository, the maintainer should be able to help you!\n Thank you for a prompt response! Opened an issue there.\n","Thanks! Also, good to know.  :snake: \n","Thanks for opening this issue, @rkpatel33! Have you tried implementing your modified keyboard configuration [as a notebook extension](https://jupyter-notebook.readthedocs.org/en/latest/extending/frontend_extensions.html#modifying-key-bindings)? If not, I can help you get started with this and that should do the trick.\n Thanks for that but not I have not tried it. I figure it was a bit of\noverkill for some small keyboard adjustments. Also, I am wondering if I am\ngoing to run into similar issues with extensions if I can't get the built\nin key mapper to work.\n\nBut thanks for the link, I'll look more. Any ideas on the problem at hand\nthough?\n\n---\n\nRishi K. Patel\n\u200b, \u200b\nFounder\n\u200b,\nwww.docnavapp.com\n_\u200b_\n\u200b\nrishi@docnavlab.com\n\u200b,\n917-647-0892\u200b\nLinkedIn https://www.linkedin.com/in/rkpatel33, @docnavlab\nhttps://twitter.com/docnavlab\n\nOn Tue, Mar 29, 2016 at 8:37 PM, Safia Abdalla notifications@github.com\nwrote:\n\n> Thanks for opening this issue, @rkpatel33 https://github.com/rkpatel33!\n> Have you tried implementing your modified keyboard configuration as a\n> notebook extension\n> https://jupyter-notebook.readthedocs.org/en/latest/extending/frontend_extensions.html#modifying-key-bindings?\n> If not, I can help you get started with this and that should do the trick.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1276#issuecomment-203170081\n There is in fact already a configurable keyboard shortcut remapper at https://github.com/ipython-contrib/IPython-notebook-extensions/tree/master/nbextensions/usability/keyboard_shortcut_editor\n\nI'm afraid I didn't even know about the built-in mapper until I read this issue, though, so can't help you there yet...\n Yup, I saw that. Wish there was a H1 boldface link in the main repo README to this one as its super helpful.\n marking as 5.0. Damn some of these extensions should be in the notebook by default. \n @Carreau now that the keyboard shortcut editor is there in master, can this be closed? > @Carreau now that the keyboard shortcut editor is there in master, can this be closed?\r\n\r\nYes, and that works for me on master. Closing\r\n\r\nhttps://github.com/jupyter/notebook/pull/2104 shoudl make finding the editting capabilities easier. ",":tada: :dancer: \n","Whitespace problem, fixing now...\n","@parente my hero!\n This needs a little bit more work\n @parente can you remove the WIP on this, it's working now.  cc @minrk \n","Are you a fast typist ? does it behave like that if you press keys one after the other ?\nIf it's the case than it's a race condition we are aware of. \n Hmm--no I don't think that's it--it's very specific.\nI played around with it some more and I have a better idea of how to recreate it.\nTry to import `asarray_chkfinite`.\nType in `asarray`.\nTab will bring up `asarray` and `asarray_chkfinite`.\nAdd `_` to reduce the list to `asarray_chkfinite`.\nTab, according to my understanding, should enter `asarray_chkfinite`, but I get `asarray_chkfinitechkfinite`\n Can you check on 3.1 ? because slowly I can definitively not reproduce. I know that with latency you can to `m<tab>` , type `plotlib`, completion get back then you get `matplotlibplotlib`. I can sometime have it, but I need to be relatively fast on the `tab-underscore-tab`.\n\nAre you on a slow network maybe ?\n Oh--doesn't do it anymore in 3.1.\nMy bad..maybe if someone else has the same issue, this'll remind them to update.\nThanks for investigating!\n Yep that seem like https://github.com/ipython/ipython/pull/7889 fixed that, I vaguely remember writing that ...\n","I don't know how you've got there, but that error message means that it can't import `ipykernel`. If you install that package, it should work.\n `pip install ipykernel`\n\n`Requirement already satisfied (use --upgrade to upgrade): ipykernel in /usr/local/lib/python2.7/dist-packages\nCleaning up...\n`\nPip claims it is already there. Is there an alternate way I should try to install it?\n Maybe it's something that depends on that is missing. In a Python shell, can you try:\n\n``` python\nfrom ipykernel.kernelspec import RESOURCES\n```\n `---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\n<ipython-input-1-69c17dfa3e50> in <module>()\n----> 1 from ipykernel.kernelspec import RESOURCES\n\n/usr/local/lib/python2.7/dist-packages/ipykernel/**init**.py in <module>()\n      1 from ._version import version_info, __version__, kernel_protocol_version_info, kernel_protocol_version\n----> 2 from .connect import *\n\n/usr/local/lib/python2.7/dist-packages/ipykernel/connect.py in <module>()\n     12 \n     13 from IPython.core.profiledir import ProfileDir\n---> 14 from IPython.paths import get_ipython_dir\n     15 from ipython_genutils.path import filefind\n     16 from ipython_genutils.py3compat import str_to_bytes\n\nImportError: No module named paths\n`\n That means it's finding an old version of IPython somewhere - try uninstalling and reinstalling the IPython package. If you've installed IPython with something like apt, uninstall that copy.\n I don't know how that showed up or why it wasn't a problem a few days ago, but that was it. `sudo apt-get remove --purge ipython` worked.\n I would guess that something got installed using setuptools, it created one\nof its horrible .pth files and messed up your sys.path, making the system\ninstalled IPython take precedence over the newer version you have. That is\na long-standing issue with setuptools.\n Thanks.\n @majure thank you very much!\n Thank you @majure, this worked for me too.  Thank you @majure, it worked for me.","> Jupyter seems to attempt to open the shell socket very quickly after launching the kernel process. I'm fairly sure that by that time the shell socket is not open yet.\n\nThis shouldn't be an issue with ZMQ sockets, though it's always possible that something is not working correctly. The server does not need to bind the socket before the client connects to it - the client can connect, and the connection will be made when the server binds to the socket. \n That's what I thought too, but I can't find anything else. I'd love to have some other hypothesis to test.\n If it's not getting the request at all, then something is probably wrong, on one side or the other, in terms of which sockets/ports are in use. Wrong socket types or incorrectly loading port info is a possible cause.\n Everything is fine on the kernel side as far as I can tell. If it was binding to the wrong port, then it wouldn't work at all. As for the socket type, it's a \"router socket\". I'm not terribly familiar with NetMQ, but it sounds like the correct type.\n I realize this is kind of silly but: have you tried a longer timeout setting on the client?\n\nAlso, is there a minimal reproduction sample? Seems like one shouldn't need the whole shebang to explore this. Alternately, can you link to the code in question?\n How do I increase the client timeout setting?\n\nRegarding reproduction, as far as I can tell this happens reliably in every instance of using the IFSharp kernel. The code that prepares the sockets is at the beginning of https://github.com/fsprojects/IfSharp/blob/master/src/IfSharp.Kernel/Kernel.fs\n Hmm... If memory serves, `NetMQ` provides overloaded sending and receiving methods which allow you to specify a timeout.\n\nIt would also be helpful to understand the a bit more about the protocol. Specifically:\n1. What sort of sockets are on each side of the connection?\n2. What is the expected protocol (i.e. exchange of messages)?\n The client is Jupyter. I can't change that; I mean, I could in theory but in practice I'm not a Python developer. Also, Jupyter can connect with other kernels fine, so the problem is not there. I don't know if Jupyter has an option to influence timeouts.\n\nThe expected protocol is the Jupyter protocol (specifically, I'm talking about the kernel_info request). I'm using a router socket; as far as I'm aware of, that's the correct type.\n The kernel_info timeout does not appear to be configurable at the moment, but if you think your kernel might be taking more than 10 seconds to start responding, you can try changing the code in\n\n```\nnotebook.services.kernels.handlers.ZMQChannelsHandler.kernel_info_timeout\n```\n The kernel is not taking more than 10 seconds to start. It's just not receiving that initial kernel_info_request at all. So it starts and sits there.\n It's almost certainly an issue with the F# Kernel. I was merely suggesting a possible work-around and trying to determine what level of debugging (if any) you'd done thus far.\n\nAs to the actual problem:\n- Where is the Jupyter protocol documented (esp. the `request_info` message flow)?\n- The log you posted seems to be from the broker; do you have any sort of logs from the kernel? \n I'm getting documentation from here: http://jupyter-client.readthedocs.org/en/latest/messaging.html#kernel-info\nI've followed the kernel via debugger. I'll add logs so I have something to post.\n I've finally identified and fixed the problem. Thanks for all your suggestions. The fixed version is at https://github.com/fsprojects/IfSharp/tree/jupyter\n Hi! Sorry for not answering sooner. I've found \nhttps://github.com/jupyter/notebook/issues/2118 and I assume that's your \nissue? I see you found out about the identity issue yourself; that was \nindeed the same problem we had in the F# kernel. More precisely, if I \nrecall correctly, in our case the kernel was making assumptions on the \nformat of the identity strings. Those assumptions no longer held true \nwith more recent versions of ZMQ, and as a result it was sending back \nthe wrong strings.\n\nCheers,\n\n     Filippo\n\n\nIl 03/02/2017 01.23, Jin Wang ha scritto:\n>\n> @FilippoPolo <https://github.com/FilippoPolo> Hey. I wonder how did \n> you fix this issue at the end? I might have the same issue with a \n> swift kernel I'm building. It would be nice to know your solution to \n> this. Thanks!\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub \n> <https://github.com/jupyter/notebook/issues/1281#issuecomment-277128438>, \n> or mute the thread \n> <https://github.com/notifications/unsubscribe-auth/AJAz4_ImmbkQULDe0XanLk_8U3D_tOmVks5rYnN4gaJpZM4H75XV>.\n>\n\n @FilippoPolo Aha, thank you so much for your reply. I actually looked at your code and realised that there might be something wrong with the identity stuff. I didn't really understand the problem though since there's no error printed by Jupyter. But anyway, the initial reply can be received now after I followed your changes. So thanks!\r\n\r\nI'm now stuck at the message signature. I just can't get it work...can't even rebuild it using python...I might have a look at your code again to figure out. Even the spaces inside the serialised JSON strings will effect the encryption result...`\"{\"value\": \"key\"}\"` is different from `\"{\"value\":\"key\"}\"` where the former has a space there...There little things have driven me crazy... Signatures are tricky, especially because you can only see 'is this right' - there's no way to know what is wrong, or how close you are.\r\n\r\nThe trick with JSON serialisation is that you need to serialise your messages, sign the serialised version, and then send that. Don't serialise it twice. Your serialisation doesn't have to match how Python would serialise it, because we check the signature on the serialised message before parsing it.\r\n\r\nIn pseudocode:\r\n\r\n```\r\nserialised = json(msg)\r\nsignature = sign(serialised)\r\nsend(signature, serialised)\r\n```\r\n\r\nHave a look at the code in [simple_kernel](https://github.com/dsblank/simple_kernel/blob/c5ae07ed4912c37b701eda35ff26bd747d0627d7/simple_kernel.py), which reimplements a kernel in Python without all of our libraries.","it\u2019s weird since this `<div>` should reserve space which whatever heuristic sizes the iframe should see:\n\n``` html\n<div id=\"htmlwidget-1944\" class=\"grViz html-widget\" style=\"width:960px;height:500px;\">\n```\n Note that github replaces iframes with divs and therefore does not show anything in the above url... nbviewer looks ok: http://nbviewer.jupyter.org/urls/gist.githubusercontent.com/flying-sheep/eb7dce37ea4d34848d406eb53cc3b293/raw/9605617de45efa5370b23a0f3ac065a33e594998/htmlwidgets.ipynb \n\nLoading the notebook in a local nbserver does not show anything, but giving the notebook \"trust\" reloaded the notebook and then shows the thingies (as did rerunning the notebook cells).\n\nI have the [table beautifer notebook extension](https://github.com/ipython-contrib/IPython-notebook-extensions/tree/master/nbextensions/styling/table_beautifier) installed, which loads 'jquery'. But this does not seem to make a difference (I disabled all extensions and tested again).\n\nSo this looks like a browser issue... Mine: Chrome 49.0.2623.87 m.\n\n[Update:] Opening the notebook in firefox, I get the same experience as you: all outputs are not visible[/]\n\n[\nRunning the last cell, I get the following error: \n\n```\nJavascript error adding output!\nTypeError: document.querySelectorAll(...)[Symbol.iterator] is not a function\nSee your browser Javascript console for more details.\n```\n\n]\n updated the title according to your findings.\n\nand you should probably update your browser:\n\n[`querySelectorAll`](https://www.w3.org/TR/dom/#parentnode) returns a [`NodeList`](https://www.w3.org/TR/dom/#interface-nodelist), which is an [`iterable<Node>`](https://www.w3.org/TR/WebIDL-1/#idl-iterable). therefore in modern browsers, `document.querySelectorAll(...)[Symbol.iterator]` has to exist.\n","This will **likely** not be in core and will require an extension. \nUnless we allow to extract cell in a separate view in Jupyterlab. Which I'm unsure of. \nMarking as 5.0, but without much hope. \n","I think this is a duplicate of what I reported here: https://github.com/jupyter/notebook/issues/1124\n Agreed.\n","I thought there was something that added a PNG when the figure was closed. @tacaswell is likely to know more.\n I thought too. But it looks like closing the figures before exporting to PDF did not solve it. And manually closing all the figures can be painful :)\n nbagg does some _fun_ things to close it's self and insert a png on notebook save.  We may be using some private / unstable parts of the notebook API?\n\nSaving as a notebook results in static images (see https://gist.github.com/tacaswell/7a0e5e76fb3cafa3b7cd ) so this maybe an issue on the PDF export side.\n\nI do not know enough about the export machinery to know if the issue is mpl not writing out things that the export can cope with or if the export code needs to be able to deal with what ever mpl wrote out :wink: \n\nattn @pelson and @mdboom \n I confirm closing the figures results in static images, same thing here.\n\nStill, exporting to PDF results in:\n\n```\n<IPython.core.display.Javascript object>\n<IPython.core.display.HTML object>\n```\n\ninstead of every figure.\n\nLet me know if you have any hints or want any more info to reproduce it. Thanks!\n Can you re-try thing with mpl master branch?  The nbagg backend now uses the ipywidiget framework which might help?\n Hi,\n\nI gave it a try, installing it _via_ `pip install https://github.com/matplotlib/matplotlib/archive/master.zip` in a dedicated venv, along with `ipywidgets`.\n\nIn a test notebook, I put in a cell\n\n```\n%matplotlib notebook\n\nimport matplotlib.pyplot as plt\nplt.plot(range(10))\nplt.show()\n```\n\nAt first try, I had a warning about an unactivated extension, so I ran `jupyter nbextension enable --py --sys-prefix widgetsnbextension` as stated in the warning.\n\nRunning the above cell did not produce any output though. Using `%matplotlib inline` instead of `notebook` does give the expected result, but the `notebook` output did not produce any output at all.\n\nDid I miss something?\n\nThanks\n","Nice, I never got the copy&paste operation to work with anything else than Chrome in my extension.\nIt would be nice if you would put a json and plain text version of the cells into the clipboard.\nI found that helpful.\n Thanks @juhasch - apologies for not basing it on your extension. I didn't think to look for an existing extension, and I was told about it after I'd already got copy & paste working on Chrome.\n\nAs you suggested, I've added storing the JSON data with the correct mime type, and storing plain text of just the cell sources so you can paste into a text editor.\n No problem. I am happy to see this functionality going into the notebook itself.\n Thanks All !\n Ahh, darn, I wanted to discuss this in the context of integration with\nJupyterLab before it got merged.\n\nOn Mon, Apr 4, 2016 at 11:25 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Thanks All !\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1286#issuecomment-205435249\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I am strong +1 on the feature, but want to make sure users can cut/copy/paste between JupyterLab and the main notebook. \n\n@sccolbert @blink1073 @jasongrout \n\nThe main question is if the data being put into the system clipboard is really the best format.\n This seems like a good approach to me.\n `<deleted comment about IE not working>` (I should have read the first post).\n > <deleted comment about IE not working> (I should have read the first post).\n\nGreat. Anyway, I guess we can assume people will copy and past between same version of notebook/jupyterlab, so we can update the internal representation if needed without breaking anything. \n Should we be including the nbformat string so frontends can reason about\nthat?\n\nOn Mon, Apr 4, 2016 at 1:02 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> (I should have read the first post).\n> \n> Great. Anyway, I guess we can assume people will copy and past between\n> same version of notebook/jupyterlab, so we can update the internal\n> representation if needed without breaking anything.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1286#issuecomment-205470649\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Yeah. I think we should have some discussion on standardizing _what_ the payload should be and for _which_ mimetypes, so that frontends can reason about payloads effectively.\n Here is an issue for tracking the clipboard format.\n\nhttps://github.com/jupyter/notebook/issues/1321\n @takluyver I am a newbie of jupyter and Python. I want to know how to let the nice 'copy/paste' work?\n\nI run the jupyter/notebook, in a running docker container.\nThe docker image is 'jupyter/notebook', and the run command is:\n    `$ docker run --rm -it -p 8888:8888 -v \"$(pwd):/notebooks\" jupyter/notebook`\n\nI have done the bellow command from Terminal of the notebook.\n\n```\n# python -m pip install -U jupyter\n\n# jupyter --version\n\n4.1.0\n```\n Hi @booox : this work to use the system clipboard is in master (the development version), but not yet in a stable release. If you want to try the development version, follow the instructions [here](http://jupyter-notebook.readthedocs.io/en/latest/contributing.html#setting-up-a-development-environment).\n\nWith the released version,  you can copy and paste cells within a notebook (use shortcuts `x`, `c` and `v` in command mode), but not between notebooks.\n","Hi @stsievert, Thanks for submitting this enhancement issue. Let me ping @Carreau who may have some insights on what could be done now and in the future.\n Hi @stsievert , \n\nUnfortunately  footnotes are not in the markdown or commonmark spec, and there is a lot of requests for markdown extension: Footnote, TOC, label, reference, , which each having multiple syntax... And the team does not have the bandwidth to maintain the multiple parser and formatter to support all of that. \n\nSo for now the response we give to any proposal to extend the markdown syntax beyond basic markdown is : \"Not before the CommonMark spec and implementation does not have a way to extend markdown, and enough packages support these features\". \n\nSorry to respond by negative, hope we can revisit in a year or so.\n Footnotes are in the kramdown spec, which also has Github-flavored markdown. Maybe this would be worth switching to in the future\u2026 it seems pretty widely used. Github-flavored markdown doesn\u2019t seem to be going anywhere and kramdown has good support (jekyll\u2019s new default, etc).\n Then I'd like to know, is it possible to change to another renderer of markdown. If it's possible, some users can create or find the renderer they want by themselves, and will not trouble the project members to do that.\n","With this fix the notebook is rendered correctly.\nMy test doesn't pass though.\n\nI'm unsure if the test is coded correctly.\nAfter the kernel is killed, the correct html would be rendered.\nSo maybe I misunderstood something with asynchrony when calling `this.evaluate()`.\n\nI also tried to debug like it's described here:\nhttps://drupalize.me/blog/201410/using-remote-debugger-casperjs-and-phantomjs\nBut I can't set breakpoints in functions which are passed to `this.evaluate()`.\n\nAny help is appreciated.\n @BerndSchwarzenbacher I've restarted the Travis tests since the Travis may have timed out on the tests and reported a false failure. I will leave it to @Carreau to review the PR contents.\n @BerndSchwarzenbacher I think your code all right, but your test is running afoul of async rendering of markdown. I'll write up how to reliably wait for the rendered result.\n @BerndSchwarzenbacher I made https://github.com/BerndSchwarzenbacher/notebook/pull/1 which adds the necessary async waits to your tests. The casper async testing stuff is far from obvious.\n @minrk Thanks a lot for your help!\nI added logging of the error and I had a look at the source of `CodeMirror.getMode`. It seems to me, that it actually never returns an empty object. So we might delete the extra `if (!mode)` case.\nWhat do you think?\n","Thanks for opening this issue, @rkpatel33! I think this is a great idea. If it can be done, it would probably have to be done as an extension that queries the backend with a `complete_request` message every X milliseconds for a completion information. I'll look into this and report back.\n Thanks, great! Maybe I am missing something, but couldn't it be done by\nsimply tying whatever event is triggered on <tab> keypress (in edit mode)\nto keypresses of [A-Za-z]?\n\n---\n\nRishi K. Patel\n\u200b, \u200b\nFounder\n\u200b,\nwww.docnavapp.com\n_\u200b_\n\u200b\nrishi@docnavlab.com\n\u200b,\n917-647-0892\u200b\nLinkedIn https://www.linkedin.com/in/rkpatel33, @docnavlab\nhttps://twitter.com/docnavlab\n\nOn Thu, Mar 31, 2016 at 9:32 PM, Safia Abdalla notifications@github.com\nwrote:\n\n> Thanks for opening this issue, @rkpatel33 https://github.com/rkpatel33!\n> I think this is a great idea. If it can be done, it would probably have to\n> be done as an extension that queries the backend with a complete_request\n> message every X milliseconds for a completion information. I'll look into\n> this and report back.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1289#issuecomment-204199919\n I think that would cause a lot of latency on every keypress which would make the experience not as effective. \n Yeah, I suppose it could. Ok thanks, let me know if you figure anything out\non it.\n\n---\n\nRishi K. Patel\nrishi@docnavlab com\n917-647-0892\n\nOn March 31, 2016 at 10:20:01 PM, safia abdalla (notifications@github.com)\nwrote:\n\n> I think that would cause a lot of latency on every keypress which would\n> make the experience not as effective.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1289#issuecomment-204213240\n Maybe report this issue in the [ipython-notebook-extensions repo](https://github.com/ipython-contrib/IPython-notebook-extensions/issues), there such requests are usually met with some idea how to implement it with an extension :-)\n Will do, thanks.\n In JupyterLab we are going to be redesigning the tooltip and tab completion\nUI - will definitely be thinking about this type of thing in that redesign.\n\nOn Sat, Apr 2, 2016 at 11:37 AM, rkpatel33 notifications@github.com wrote:\n\n> Will do, thanks.\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1289#issuecomment-204770984\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Great, there is an extension first cut already working in the extensions repo:\n\nhttps://github.com/ipython-contrib/IPython-notebook-extensions/pull/564\n\nI added making the dropdown box filtering fuzzy as well, helps a lot.\n","i don't  understand the question...\n It's not a question. It's info about bug, mistake.\n\"version of the notebook server is **-5c18ecb**\" -- is it normal version format?!\n ah, depends on how you instsall it, it should show `X.y.z-<commitish>` with `<commitish>`  only if you install from git. `X.y.z` missing is not normal.\n Fixed by #132. It was a remnant of the renaming leaving out the notebook version.\n","Ok, i found solution, but still think that it's some problem with notebook: it's not take system variables and not using the ones that i load in code.\nSolution:\nGenerate config file:\n`jupyter notebook --generate-config`\nIt will be stored i:\n`jupyter --config-dir`\nAdd this code at start:\n\n```\nimport os\nc = get_config()\nos.environ['LD_LIBRARY_PATH'] = '/usr/local/cuda-7.5/lib64:usr/local/cuda-7.5/lib64/libcudart.so.7.5'\nc.Spawner.env.update('LD_LIBRARY_PATH')\n```\n\nAnd everything work\n This line isn't going to do what you think:\n\n```\nos.system('export LD_LIBRARY_PATH=/usr/local/cuda-7.5/lib64:$LD_LIBRARY_PATH')\n```\n\n`os.system()` starts a new process to run the system command. You're changing the environment variable in the new process, and then it's immediately getting closed. Child processes can't affect environment variables in their parent. To change an environment variable inside a Python process, you have to use `os.environ`, as you found.\n\nI don't think the `Spawner` config is relevant to you - spawners are part of Jupyterhub, an extra layer on top of the notebook to support multiple users. If you're using regular `jupyter notebook`, that line is probably having no effect.\n","Anything informative if you run with `--debug`? Does it do the same if you set it in your config file, or is it specific to the command line option?\n The same behaviour occurs whether the option is set in the config file or on the command line.\n\nHere is the `--debug` output.\n\n```\n>jupyter notebook --notebook-dir=C:\\ --debug\n[D 08:40:13.545 NotebookApp] Config changed:\n[D 08:40:13.561 NotebookApp] {'MappingKernelManager': {'root_dir': 'C:\\\\Work\\\\Scratch'}, 'NotebookApp': {'notebook_dir': 'C:\\\\', 'log_level': 10}, 'FileContentsManager': {'root_dir': 'C:\\\\Work\\\\Scratch'}}\n[D 08:40:14.075 NotebookApp] Searching ['C:\\\\Work\\\\Scratch', 'C:\\\\Users\\\\UK03306\\\\.jupyter', 'c:\\\\users\\\\uk03306\\\\appdata\\\\local\\\\programs\\\\python\\\\python35\\\\etc\\\\jupyter', 'C:\\\\ProgramData\\\\jupyter'] for config files\n[D 08:40:14.091 NotebookApp] Looking for jupyter_config in C:\\ProgramData\\jupyter\n[D 08:40:14.091 NotebookApp] Looking for jupyter_config in c:\\users\\uk03306\\appdata\\local\\programs\\python\\python35\\etc\\jupyter\n[D 08:40:14.091 NotebookApp] Looking for jupyter_config in C:\\Users\\UK03306\\.jupyter\n[D 08:40:14.091 NotebookApp] Looking for jupyter_config in C:\\Work\\Scratch\n[D 08:40:14.091 NotebookApp] Looking for jupyter_notebook_config in C:\\ProgramData\\jupyter\n[D 08:40:14.091 NotebookApp] Looking for jupyter_notebook_config in c:\\users\\uk03306\\appdata\\local\\programs\\python\\python35\\etc\\jupyter\n[D 08:40:14.091 NotebookApp] Looking for jupyter_notebook_config in C:\\Users\\UK03306\\.jupyter\n[D 08:40:14.091 NotebookApp] Loaded config file: C:\\Users\\UK03306\\.jupyter\\jupyter_notebook_config.py\n[D 08:40:14.091 NotebookApp] Looking for jupyter_notebook_config in C:\\Work\\Scratch\n[D 08:40:14.091 NotebookApp] Config changed:\n[D 08:40:14.091 NotebookApp] {'MappingKernelManager': {'root_dir': 'C:\\\\Work\\\\Scratch'}, 'NotebookApp': {'notebook_dir': 'C:\\\\', 'log_level': 10}, 'FileContentsManager': {'root_dir': 'C:\\\\Work\\\\Scratch'}}\n[D 08:40:14.262 NotebookApp] Terminals not available (error was No module named 'terminado')\n[I 08:40:14.262 NotebookApp] Serving notebooks from local directory: C:\\Work\\Scratch\n[I 08:40:14.262 NotebookApp] 0 active kernels\n[I 08:40:14.262 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/\n[I 08:40:14.262 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[D 08:40:14.774 NotebookApp] Using contents: services/contents\n[D 08:40:14.899 NotebookApp] 200 GET /tree (127.0.0.1) 124.23ms\n[D 08:40:15.287 NotebookApp] 304 GET /custom/custom.css (127.0.0.1) 263.99ms\n[D 08:40:15.504 NotebookApp] 200 GET /static/services/contents.js?v=20160406084014 (127.0.0.1) 36.04ms\n[D 08:40:15.504 NotebookApp] 200 GET /custom/custom.js?v=20160406084014 (127.0.0.1) 0.00ms\n[D 08:40:15.535 NotebookApp] 200 GET /api/config/tree?_=1459928415395 (127.0.0.1) 0.00ms\n[D 08:40:15.535 NotebookApp] 200 GET /api/config/common?_=1459928415396 (127.0.0.1) 0.00ms\n[D 08:40:15.550 NotebookApp] Native kernel (python3) available from c:\\users\\uk03306\\appdata\\local\\programs\\python\\python35\\lib\\site-packages\\ipykernel\\resources\n[D 08:40:15.550 NotebookApp] Native kernel (python3) available from c:\\users\\uk03306\\appdata\\local\\programs\\python\\python35\\lib\\site-packages\\ipykernel\\resources\n[D 08:40:15.550 NotebookApp] 200 GET /api/kernelspecs (127.0.0.1) 15.53ms\n[D 08:40:15.566 NotebookApp] 200 GET /api/sessions?_=1459928415397 (127.0.0.1) 15.53ms\n[D 08:40:15.581 NotebookApp] 304 GET /static/components/font-awesome/fonts/fontawesome-webfont.eot? (127.0.0.1) 15.53ms\n[D 08:40:15.643 NotebookApp] 200 GET /api/contents?type=directory&_=1459928415398 (127.0.0.1) 62.12ms\n```\n\nWith `--noteboog-dir=C:\\Work` I get\n\n```\n>jupyter notebook --notebook-dir=C:\\Work --debug\n[D 08:42:35.746 NotebookApp] Config changed:\n[D 08:42:35.762 NotebookApp] {'MappingKernelManager': {'root_dir': 'C:\\\\Work'}, 'FileContentsManager': {'root_dir': 'C:\\\\Work'}, 'NotebookApp': {'notebook_dir': 'C:\\\\Work', 'log_level': 10}}\n...\n```\n\nNote that in this case, the `root_dir` for the `MappingKernelManager` and `FileContentsManager` is set, whereas when I specify `C:\\` it isn't.\n @minrk worked it out - notebook 4.1 has a regression that doesn't allow setting the notebook directory to root. This was already fixed in #1168, and will be released as notebook 4.2 soon.\n","> Is there a better way to create those boxes?\n\nHum, not as far as I am aware, we would have to have some king of markdown `role` like in sphinx/rst.\nHope the common mark folks  come up with a syntax for this soon !\n As a workaround you could use a python object which implements `_repr_html_` and `_repr_latex_`:\n\n```\nclass Alert():\n    def __init__(self, text):\n        self.text = text\n    def _repr_html_():\n        return '<div class=\"...\">text</div>'\n    def _repr_latex_():\n        return '...'\n```\n\nThis would return both html and latex and would therefore be visible in both. But now you need to remove the cell itself (not sure how that works...)\n @Carreau Thanks, it's good to know that I didn't overlook anything.\n@janschulz Thanks, but no thanks. I'm looking for a proper solution, not for a work-around.\n\n@Carreau wrote:\n\n> Hope the common mark folks come up with a syntax for this soon !\n\nI don't think this will happen anytime soon. This was discussed over and over for years, but nothing was added to CommonMark. A few proposals are have been collected in the [CommonMark Wiki](https://github.com/jgm/CommonMark/wiki/Proposed-Extensions) under \"Directives\".\n\nWhat about implementing one of them in The Notebook as a Markdown extension?\n\nCould someone please point me to the code where Markdown cells are parsed?\nProbably there is already an extension available for whatever JavaScript library is used for that?\n\nHere are a few more links:\n- admonition support for Python-Markdown: https://pythonhosted.org/Markdown/extensions/admonition.html\n- proposed admonition support in pandoc: https://github.com/jgm/pandoc/issues/2610\n > What about implementing one of them in The Notebook as a Markdown extension?\n\nWell, I doubt we have enough bandwidth to implement our own markdown parser/renderer, in js and then in nbconvert, and then in all the other software that support the notebook format. \n\n> Could someone please point me to the code where Markdown cells are parsed?\n\n`notebook/static/notebook/js/textcell.js` `MarkdownCell.prototype.render` ~ Line 370\n Additionally, if everyone gives up on the standard and does their own versions, we end up in the same kind of mess that led to the creation of CommonMark in the first place. So I think we should say no to ad-hoc extensions, and encourage people who don't like that to go and improve CommonMark.\n Just putting in a few good words for a pandoc based notebook/nbconvert: pandoc because that's used on the R side with knitr/RMarkdown and because it is (next to github) the kind of \"extended standard\". knitr/RMarkdown currently (and more so in the future if e.g. better tables are added to pandoc or the above admonition support) have an advantage on the things they can express vs what can be expressed in the notebook md cells. nbconvert can probably easily switch to pandoc, but the browser would need a md2html webservice (e.g. using pypandoc). Whether it would be worth it?  The tables feature might be a great addition, as it would mean that more richly styled html tables could be translated into pdfs. \n\n@mgeier If you don't need interactivity, just html and latex/PDF support (and after pandoc gets everything you want), you could try to write admonitions into md cells (or raw cells?), ignore the error in the notebook and then convert the ipymd file to md using nbconvert and then the md file to whatever pandoc supports via pandoc.Or use python-markdown now, if that has a commandline util which works like pandoc.\n @Carreau \n\nI'm not talking about implementing a Markdown parser (or several of them), I'm talking about an extension (or several of them).\n\nThanks for the pointer, here's [a link](https://github.com/jupyter/notebook/blob/cf1e849fc6c294c19c86236d475808227bb7cb1d/notebook/static/notebook/js/textcell.js#L365).\nApparently, there is already some pre-processing being done before [marked](https://github.com/chjj/marked) is used for the actual conversion.\n\nIn the next few days (or weeks) I'll have a closer look how my proposed extension could be added there.\n\n@takluyver \n\nThe goal of CommonMark, as far as I understand, is to have an unambiguous spec for the most \"common\" Markdown features. CommonMark allows, probably even encourages, extensions.\n\nThere are many [proposed extensions (same link as I gave above)](https://github.com/jgm/CommonMark/wiki/Proposed-Extensions), most of them will never be part of CommonMark.\nIn the discussions linked from the wiki page, the CommonMark authors even encourage people to create extensions.\nAnd since extensions like the one i'm suggesting have been discussed for years and not been added to CommonMark, leads me to predict that it ain't gonna happen.\n\nFun fact 1: [marked (and therefore The Notebook) doesn't use CommonMark](https://github.com/chjj/marked/issues/563)\nFun fact 2: The Notebook already uses at least 2 extensions (probably more): inline math with `$...$` and raw LaTeX blocks that are interpreted as math.\n(Just for future reference, the former might be built-in to marked sometime in the future (https://github.com/chjj/marked/pull/180))\n\nI don't see a fundamental problem in adding another extension, if it keeps people from using HTML-exclusive work-arounds.\n\nAnd sure, other tools will have to implement those extensions, too, but that's what happens already, see e.g. https://github.com/spatialaudio/nbsphinx/pull/35.\n\n@janschulz \n\nPandoc is circumstantial to this discussion, it's just another parser.\n\nAnd I don't want to ignore errors in The Notebook. I want this to work correctly in The Notebook and also in all related tools I care about.\n I'm fine with extensions once there is a generic extensible syntax (see [this discussion](http://talk.commonmark.org/t/generic-directives-plugins-syntax/444)). What I want to avoid is doing ad-hoc extensions where someone picks some symbols and decides to make them mean a special thing, without regard for compatibility or conflicts.\n\nI know we already make some extensions to the markdown the notebook supports. That does not mean it's OK to add more. Those extensions cause enough headaches, but so many notebooks already rely on them that we can't practically get rid of them.\n\nI'm deliberately being hard on this, because I want to see a generic extension point in CommonMark, and that's not going to happen if we carry on doing ad-hoc extensions.\n @takluyver Thanks for the pointers. I've read a large part of the discussions (and there's _a lot_ to read!), and it doesn't look like this extensible syntax is happening anytime soon. Development seems to go quite slowly currently, and the \"base\" syntax seems to have highest priority, since version 1.0 of the spec is already overdue.\n\n> I know we already make some extensions [...] we can't practically get rid of them.\n\nAnd you shouldn't!\nThose extensions are great, and the syntax is really simple and easy to use.\nAnd being able to write equations in a straightforward way is one of the most important features of the Jupyter Notebook!\n\nAnyway, I think the first step forward is to get rid of marked and switch to CommonMark. I've created a new issue about that: #1371.\n\nOnce this is done, I think we can continue discussing extensions.\n We recently changed our documentation workflow to integrate jupyter notebooks within our reST-documents. The reasons for that, we wanted to only document once. The notebooks can be utilized by the user and it is synced within the rendered docs (eg. using sphinx).  The transition process went really smooth and we are happy to gain this much from using jupyter notebooks within our project.\n\nHowever, these things can't be accomplished so far: \n- admonitions\n- citations\n\nFor admonitions I proposed some workaround for the 'nbsphinx' package (which we are using to convert the notebooks) spatialaudio/nbsphinx#46, which has it's faults, but works. Also in this issue here, several workarounds and hacks have been proposed, neither of which is really favourable. \n\nFrom the users perspective things should just work. If there weren't the inline math available within the notebooks, this would have been a showstopper. And using `<div>` sections to get alert-boxes is (to some degree) annoying, too. \n\nI understand, that the cleanest solution is to wait for the changes in the standard. But please also consider an interim extension which takes care of this until the changes are incorporated in the standard. Otherwise and this is already under-way, hacks, workarounds, incompatibilities will float around (just my 2c).\n For those who are interested: Since a _proper_ solution will take a long time to come, I've implemented a temporary work-around in `nbsphinx` that converts `<div>` blocks with bootstrap `warning` and `info` classes to Sphinx boxes: http://nbsphinx.readthedocs.io/en/latest/markdown-cells.html#Info/Warning-Boxes\n","Thanks for doing that !\n\nI think we want something a more subtle, likely  an icon (from https://fortawesome.github.io/Font-Awesome/icons/ ?) that change depending on the state, and likely with less strength in color.\n\nMy guess is that @ellisonbg and @cameronoelsen will want to make some design mocks !\n\nThanks !\n\nAn tip: you might be able to set the text with css using `content:` that would allow to change that with themes !\n Thanks for the `content:` type in the CSS!\n\nIf anyone has some design mocks, I'll gladly update the PR accordingly. Else, I can try to come up with a better UI, but am not very good at it :)\n I will work with @cameronoelsen on the design side\n\nOn Fri, Apr 1, 2016 at 4:37 PM, Lucas Verney notifications@github.com\nwrote:\n\n> Thanks for the content: type in the CSS!\n> \n> If anyone has some design mocks, I'll gladly update the PR accordingly.\n> Else, I can try to come up with a better UI, but am not very good at it :)\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1293#issuecomment-204608241\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Ok. Thanks!\n @ellisonbg @cameronoelsen News on design ?\n We were thinking that 1.) the design should be something that will work in both the current notebook as well as JupyterLab and 2.) it should be subtle and somehow connect to the actual document being run (hence why the alert is at the very top of the notebook document before the user starts running the cells). It seemed that when we put the untrusted symbol and text in the toolbar, it gets confused with either the kernel that is running or whether the document was autosaved or not.\n\nSeeing that \"trusted\" means that the user has run all of the cells in the document, we could either have this \"untrusted notification\" be only dismissable (no buttons, only clickable to dismiss) or let the user decide if they either want to dismiss it or trust it on the spot (action buttons that are similar to the dialogs that are being built in JupyterLab).\n\n## Untrust notification with action buttons (dismiss and trust)\n\n![buttons](https://cloud.githubusercontent.com/assets/6437976/14396998/b8a3cb0e-fd8f-11e5-836c-18e8e71f58a3.png)\n\n## Untrust notification with only dismiss on click\n\n![nobuttons](https://cloud.githubusercontent.com/assets/6437976/14397006/c1e0e184-fd8f-11e5-9bc0-1cb7a6e0d461.png)\n I personally am leaning towards the notification only being dismissable without the buttons (since it is smaller and doesn't require user input). Also, this notification will stay at the top of the document until the cells are run and \"trusted\"\n all-gray might be a little too subtle for untrusted\n I definitely think it shouldn't have the trust button - it makes it too easy to trust a notebook without really understanding what that means. It looks like a dialog, and we know that users seeing a dialog typically just click the first thing they see that looks like it will make it go away.\n > I definitely think it shouldn't have the trust button - it makes it too easy to trust a notebook without really understanding what that means. It looks like a dialog, and we know that users seeing a dialog typically just click the first thing they see that looks like it will make it go away.\n\nAgreed.\n @Carreau @takluyver Do you guys like the placement of the dialog box in the top left of the document instead of the toolbar?\n > all-gray might be a little too subtle for untrusted\n\nNot sure about that. All grey seem fine to me. \n\nThough:\nI would likely put notification on right, as many user will have a title or text in first cell, and thus the notification will be hiding content.\n @Carreau Here is the notification on the righthand side, good point!\n![nobuttonsright](https://cloud.githubusercontent.com/assets/6437976/14397266/411a4566-fd91-11e5-8458-641790430707.png)\n Or if we have it on the lefthand side, is there a way to have the content of the notebook fall under the dialog? I like it on the left only because it aligning with most of the content in the toolbar\n > Do you guys like the placement of the dialog box in the top left of the document instead of the toolbar?\n\nI'm not sure. I'm a bit concerned that it will feel like unnecessary clutter. When you scroll the notebook, does it scroll too, or float wherever you are?\n\nAlso, I think it should have an `(i)` for more information about what that means.\n @takluyver It will definitely stay in place at the top and not float as you scroll, I think when a user loads up the document and sees it, it doesn't have to get more in the way while scrolling. Trying out adding an information icon to see how that looks, should have it posted soon\n ## Dialog with information icon\n\n![nobuttonsi](https://cloud.githubusercontent.com/assets/6437976/14397819/932c2952-fd94-11e5-857f-02b59b89bd38.png)\n\nGets a little hard designing such a small dialog with the exclamation icon along with the \"i\" icon, but we could take out the exclamation mark altogether and just put the \"i\" in a circle instead in it's place\n Last one looks nice to me\n I think this is converging. I like the last one, but my only comment is\nthat the \"!\" and \"i\" look similar visually but are not aligned vertically.\nI agree we need someway for a user to get more information. Maybe some\nthings to try:\n- Just an \"i\" in a circle?\n- Vertically align the \"!\" and \"i\"?\n- Use text \"This notebook is untrusted (info)\"?\n\nOn Fri, Apr 8, 2016 at 4:07 PM, Min RK notifications@github.com wrote:\n\n> Last one looks nice to me\n> \n> \u2014\n> You are receiving this because you were assigned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1293#issuecomment-207642422\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I like the last one. As @minrk I think light grey might be too subtle?\n\nConcerning @cameronoelsen remark that on the left it would be aligned, is there a reason for the toolbar to be slightly shifted to the right with respect to the notebook content? (or is it an illusion)\n @Phyks I took a screenshot of the notebook, I think you are right with it being aligned to the right and not aligning on the left-hand side:\n\n![group](https://cloud.githubusercontent.com/assets/6437976/14476424/8a3bcf34-00bc-11e6-9c1d-b4b975c43fa6.png)\n\nI just opened a new issue related to it here @Phyks #1345. Nice find!\n @ellisonbg I think this one looks more natural. Adding the information icon inside the circle and the spacing and alignment between everything helped a lot with putting pertinent information closer to each other. What do you think?\n\n![newest](https://cloud.githubusercontent.com/assets/6437976/14476884/4d5a6014-00bf-11e6-9a52-473b557674fa.png)\n @cameronoelsen Thanks for the double check!\n @cameronoelsen Concerning your latest screenshot, I think it is a bit hard to distinguish between the exclamation point (not clickable) and the information button (which is clickable). Isn't it a bit misleading?\n\nAnd, if the alignment issue can be easily fixed, what about putting the notification on the left hand side? (not sure it is way better though)\n @Phyks Does this change help with that confusion of which one is actionable vs. not?\n\n![newer](https://cloud.githubusercontent.com/assets/6437976/14477803/3b204fd4-00c5-11e6-9c5d-1ee58cae4333.png)\n Also, @Phyks I like the notification at the top left of the document more so too, but @Carreau made a good point that most user notebook titles are aligned left at the top of the document and having the notification on the left hand side will most likely cover a good amount of notebooks with titles there.\n\n![leftnew](https://cloud.githubusercontent.com/assets/6437976/14477894/df7f91f2-00c5-11e6-972f-b4a1048e1bb3.png)\n\nBut, if there is a way to make the content of the document to start underneath of the notification or if this issues doesn't affect as many users as we are thinking, I definitely think the left is where to place it since it aligns with the toolbar content.\n Here is the notification with the information symbol enlarged to be the height of the font:\n\n![righttool](https://cloud.githubusercontent.com/assets/6437976/14478183/267f91f4-00c8-11e6-9eb3-39da25286047.png)\n I think this last version works pretty well. I know the grey isn't too\nstrong, but I think that reflects the relative importance of the\nnotification well.\n\nOn Tue, Apr 12, 2016 at 4:03 PM, Cameron Oelsen notifications@github.com\nwrote:\n\n> Here is the notification with the information symbol enlarged to be the\n> height of the font:\n> \n> [image: righttool]\n> https://cloud.githubusercontent.com/assets/6437976/14478183/267f91f4-00c8-11e6-9eb3-39da25286047.png\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1293#issuecomment-209141191\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Concerning your latest screenshot, I think it is a bit hard to distinguish between the exclamation point (not clickable) and the information button (which is clickable). Isn't it a bit misleading?\n\nWe don't need to have only the icon clickable, the all notification can, so I would just remove the `i` in the circle, but we can try that later. \n\nAlso, dumb question, we already have a notification area, which is meant for notification, notification that can be sticky. Why not use it ?\n @cameronoelsen :+1: for your last design!\n @Carreau What does the notification area / individual notifications look like in the notebook?\n Look like that:\n\n<img width=\"473\" alt=\"screen shot 2016-04-14 at 13 30 21\" src=\"https://cloud.githubusercontent.com/assets/335567/14526650/14454424-0245-11e6-9328-244cdd0823bd.png\">\n Trying to revive this one. \n\n@ellisonbg there is already most of the code ready, could this be iterated on by your students, to get something in ?  it would be nice to have @Phyks code integrated. Thanks. \n Ok, i'm going to bump that to 4.3, and we'll move forward even if we don't get the design perfectly. I'll try to get to it next week. \n I'd be willing to implement whatever design spec we've agreed upon. It looks like consensus is currently https://github.com/jupyter/notebook/pull/1293#issuecomment-209141191. \n\nRequirements: \n- Display the notification if the notebook is untrusted\n- Clicking on the notification will dismiss it?\n\n@Carreau Do we currently have a notification/alert component that I could use to implement this? We have Bootstrap's [alert](http://getbootstrap.com/components/#alerts) which offers the same functionality but different presentation.\n > @Carreau Do we currently have a notification/alert component that I could use to implement this? We have Bootstrap's alert which offers the same functionality but different presentation.\n\nNo we don't have anything specific, just the [notification widgets/notification are](https://github.com/jupyter/notebook/blob/master/notebook/static/base/js/notificationarea.js), but they are in the toolbar.\n\nI don't think we should dismiss the notification on click,we might just want to pop-up a longer dialog that explain what untrusted means.\n From the experience with my own little trusted notebook indicator [here](https://github.com/ipython-contrib/jupyter_contrib_nbextensions/tree/master/src/jupyter_contrib_nbextensions/nbextensions/python-markdown), I would like to add, that it is useful to have a persistent indication if the notebook is trusted.\n @Carreau I just saw [your comment](https://github.com/jupyter/notebook/pull/1293#issuecomment-209889622) about the notifiction area. This seems like a good solution given that's how other notifications (such as kernel error) are presented. I will share a quick implementation of this...\n See https://github.com/jupyter/notebook/pull/1658 for an implementation using the notebook's notification widgets.\n Merged https://github.com/jupyter/notebook/pull/1658#issuecomment-237954619\n Thanks a lot all, to @gnestor to get the ball rolling on that and to @Phyks to starting that originally.\n","> I do not see this listed in other issues. It would be nice to have a new tab in the dashboard (in addition to Files, Running and Cluster) that lists X number of recently opened notebooks. It would be nice to see when notebooks were last opened as well.\n\nThanks ! We'll consider it. It should be possible with an extension !\n\n> Keep up the great work!\n\nTHanks for using Jupyter and reporting feature requests !\n Thanks for the consideration Matthias!\n This will be possible in notebook 5.0 thanks to https://github.com/jupyter/notebook/pull/943:\r\n\r\n![image](https://cloud.githubusercontent.com/assets/512354/22907790/c9569318-f1ff-11e6-9dcf-401cf1de4232.png)\r\n","First part is likely an IPython thing. Would [the issue about Jedi](https://github.com/ipython/ipython/issues/8606) solve that ?\n\nSecond seem to be a UI bug, we'll investigate. \n Jedi may improve matters, but we may also need to be smarter about prioritising completions - at the moment, I think we mostly display it in alphabetical order with little regard for what's most likely to be used (except for demoting things starting with underscore).\n IMO it would be a big improvement, if the completer would simple sort everything which has a `\"=\"` in the last place of the item to the front: if request is in a function call, this will be the parameter to the function call and if not, there won't be such items.\n > IMO it would be a big improvement, if the completer would simple sort everything which has a \"=\" in the last place of the item to the front: if request is in a function call, this will be the parameter to the function call and if not, there won't be such items.\n\nThat's should now be done if you are on master. \n","To help us review this can you summarize the actual design changes you made\nand post screen shots showing the changes?\n\nOn Sat, Apr 2, 2016 at 6:12 PM, cdknorow notifications@github.com wrote:\n\n> updates to cell style, added ability to keep center and togle using a menu\n> select item\n> updated markdown cell to also allow split window\n> \n> ## switched order of cell styling\n> \n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/jupyter/notebook/pull/1297\n> Commit Summary\n> - added quick hack for split screen notebook\n> \n> File Changes\n> - _M_ notebook/static/notebook/js/actions.js\n>   https://github.com/jupyter/notebook/pull/1297/files#diff-0 (16)\n> - _M_ notebook/static/notebook/js/cell.js\n>   https://github.com/jupyter/notebook/pull/1297/files#diff-1 (16)\n> - _M_ notebook/static/notebook/js/codecell.js\n>   https://github.com/jupyter/notebook/pull/1297/files#diff-2 (6)\n> - _M_ notebook/static/notebook/js/menubar.js\n>   https://github.com/jupyter/notebook/pull/1297/files#diff-3 (2)\n> - _M_ notebook/static/notebook/js/notebook.js\n>   https://github.com/jupyter/notebook/pull/1297/files#diff-4 (59)\n> - _M_ notebook/static/notebook/js/textcell.js\n>   https://github.com/jupyter/notebook/pull/1297/files#diff-5 (6)\n> - _M_ notebook/templates/notebook.html\n>   https://github.com/jupyter/notebook/pull/1297/files#diff-6 (11)\n> \n> Patch Links:\n> - https://github.com/jupyter/notebook/pull/1297.patch\n> - https://github.com/jupyter/notebook/pull/1297.diff\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1297\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Also, it looks like this PR has unrelated changes - can you rebase on master?\n Screenshot from gitter:\n\n![screenshot with split cell](https://files.gitter.im/jupyter/jupyter/GUHY/Screen-Shot-2016-04-02-at-6.52.30-PM.png)\n\nI don't personally think this is a road we want to go down in the notebook itself, but maybe it would be useful as an extension.\n Rebasing, so i deleted remote branch to start fresh.\n","I have always wanted a feature like this, mainly on a larger screen I want to be able to use more of the real-estate and having plots, dataframes and markdown side by side can be very powerful. I'm not a javascript developer so I found the easiest way to do this was through small modifications to the actual code, though I'm certainly open to whatever you guys feel is best.\n\n<img width=\"1280\" alt=\"screen shot 2016-04-02 at 6 52 30 pm\" src=\"https://cloud.githubusercontent.com/assets/884424/14231571/3f97874c-f93d-11e5-9f3c-7efe97d7dac3.png\">\n\nImplementation summary,:I \n- added a cell_style attribute which can be set to center, left, or right. \n  -This is stored in the ipynb json format for persistence as cell_style attribute. \n- The modification to the html sets the cell style to  float left or right at 50% width or to be 100width for centered.\n\nps. I've been a huge fan of ipython since before ipython notebook existed and I really love what you guys have done.\n I'm going to figure out why unit tests are failing, add better documentation and update unit tests where appropriate. But I could use advice help if any is  available.\n I agree with @takluyver that this is probably better an an extension. That would enable us to see how users respond to it before including it for all users.\n Is there anyone I can talk to about implementing this as an extension?\n @Carreau generally knows the most about JS extensions, and @juhasch has the most experience working with them at the [notebook extensions repo](https://github.com/ipython-contrib/IPython-notebook-extensions).\n Also @willingc knows about some of the new documentation about nbextensions\nwe are adding for 4.2.\n\nOn Thu, Apr 7, 2016 at 4:45 PM, Thomas Kluyver notifications@github.com\nwrote:\n\n> @Carreau https://github.com/Carreau generally knows the most about JS\n> extensions, and @juhasch https://github.com/juhasch has the most\n> experience working with them at the notebook extensions repo\n> https://github.com/ipython-contrib/IPython-notebook-extensions.\n> \n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1298#issuecomment-207139316\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n As @takluyver suggests, take a look at the notebook extensions repo. Take look at the existing extensions or open an issue to discuss how to do this as an extension.\n Thanks @takluyver, @juhasch and @ellisonbg . I went over the extensions in the reop and have created an ipython extension which performs fairly well. I will update as I have time. https://github.com/ipython-contrib/IPython-notebook-extensions/pull/573\n Great!\n\nOn Tue, Apr 12, 2016 at 12:28 AM, Chris Knorowski notifications@github.com\nwrote:\n\n> I have created an ipython extension which performs well. I will update as\n> I have time. ipython-contrib/IPython-notebook-extensions#573\n> https://github.com/ipython-contrib/IPython-notebook-extensions/pull/573\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1298#issuecomment-208753823\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Ok, great, sorry to have let this slipped through, lot of things to deal with these days.\n\nClosing as this is now an extension !\n","What version of the notebook are you using? At one point we had an atomic save implementation that effectively recreated the file each time you saved it, but we moved away from that.\n","I'm not sure, let's talk about it tomorrow.\n Added on notes. \n From the meeting - let's give gulp a go.\n","That would require to open/read/parse each file in a directory which we don't want to do. \nTry-jupyter is \"just\" the notebook app, we probably won't add features that don't apply to local server.\n Well, it needs some effort. But I think it could also be done in a performant way using ajax and by only parsing the first <n> bytes of the ipynb file, which is not a problem unless you have like thousands of ipynb files in a directory, which nobody should have ;)\n\nI would also like to have it for the local server/containers and not only for try.jupyter.org.\n I think for like a few hundred files you wouldn't even notice if the information is loaded with all the other data. Also you could cache the data in the server.\n 1) Problem is many people do run notebooks on NFS filesystems, so you would notice the difference. People already have issues. \n\n2) The data ordering in json is not guarantied, the bytes would be the last bytes of the fileformat curently, unless people add keys in which case the metadata could be somewhere else. \nIt also break the storage layer as we don't assume things are on disk. \n\nCache is not a solution,  people do use other application to modify `.ipynb` and you don't get notified when the file change. \n\nWe did speak about things like that for several hours, like in person at our dev meeting. \nThere is no reasonable solution as far as we can tell, or the complexity and requirement are probably not worth the gain. \n Maybe low-priority-background thread or caching+mtime-checking could be the way to handle this. I mean this is not a critical thing it wouldn't be a problem if it loads slowly or shows obsolete information from time to time.\n\nThe question about complexity vs. gain is always the question :)\n For now we want to steer clear of anything putting anything from the files' contents in the directory listing.\n\nIt's too slow to do synchronously - I just clocked reading+parsing 10 fairly small ipynb files at 0.5s, and even just opening and reading 500 bytes from each with no parsing at 0.3s. It definitely wouldn't be unreasonable to have several dozen notebooks in one directory, and listings should work into the hundreds of notebooks, whether or not we think it's a good idea to arrange things like that.\n\nAs you say, it's possible to do this with smart caching and background threads or processes to update the cache. And we might want to do that at some point. But that sounds like significant extra complexity, and I think there are other things we want to focus on for now.\n","Do you mean you're using Jupyterhub? If so, there is a script here which can cull idle servers periodically:\n\nhttps://github.com/jupyter/jupyterhub/blob/master/examples/cull-idle/cull_idle_servers.py\n No its not Jupyterhub .. its just a normal single instance of Jupyter which is password protected and our whole team login to it using https://server-ip:8888/tree \n OK. Then no, at present there is nothing like that, but we're talking about adding some functionality to make it possible, in #1241.\n","That's not a notebook, that's a text file. We supply a simple editor for text files, but it's quite limited. There are many other text editors available.\n\nNotebooks are the files with `.ipynb` extensions.\n","What do you see when you try?\n I actually see nothing. When trying to connect to the notebook server, I only see a white screen on Chrome. I realized that this was a problem with the extensions as the notebook loaded correctly when using \"incognito mode\". I tried switching on each extension one by one and it turns out that the problematic one was \"EXIF Viewer\". \n\nThe error I see in the console is:\n\n```\nrequire.js?v=640929d\u2026:166 Uncaught Error: Mismatched anonymous define() module: function (){return $}\nhttp://requirejs.org/docs/errors.html#mismatch\nmakeError @ require.js?v=640929d\u2026:166\nintakeDefines @ require.js?v=640929d\u2026:1229\n(anonymous function) @ require.js?v=640929d\u2026:1416\n```\n That seem like an issue with Exif Viewer itself. THoug I can find many extension named \"Exif Viewer\" so it's hard to go further than that. Seeing the error message, IPython notebook is not the only thing it will create issue with, so not sure what we can do except trying to contact the author. \n Yes, it seems to be an issue of the extension rather than notebook. I just thought that you could probably learn something from that behaviour. Just in case, I attach an image of the extension icon:\n\n![image](https://cloud.githubusercontent.com/assets/7341581/14265770/58e2735e-fabb-11e5-826f-6c97d4c8e2c4.png)\n","Currently there is nothing that I know of to do this in the notebook, though it may be possible to write an extension to do it.\n\nIf you run notebooks with nbconvert, there is an option to allow exceptions and carry on (`ExecutePreprocessor.allow_errors`).\n The `runtools` extension from https://github.com/ipython-contrib/IPython-notebook-extensions supports this. \n\nThe actual code is shown below with the relevant part being `cell.execute(false)'\n\n``` Javascript\n    var execute_all_cells_ignore_errors = function () {\n        for (var i=0; i < IPython.notebook.ncells(); i++) {\n            IPython.notebook.select(i);\n            var cell = IPython.notebook.get_selected_cell();\n            cell.execute(false);\n        }\n    };\n```\n Thanks Juergen :)\n Thanks, I forgot to check the IPython notebook extensions.\n","@lduchesne Thanks for the PR :fish_cake: \n","Checking if PR #1266 or #1304 introduced a new issue.\n Looks like the CSS changes (two commits: b3788c283fecf7a68f2d054ada12eaa5339d9323 and 9c56f4577db0b9c823d4f34c3350f982ef835368) in #1266 is the cause of RTD to display as above. The commits build fine locally and pass as green on RTD yet the rendering is incorrect. I will modify if I can in a new PR within an hour; otherwise, I will revert #1266\n @mgeier I'm not sure why the custom CSS did not render properly on RTD. Thanks for your work on PR #1266. I only backed out the code that was giving RTD trouble.\n I suspect that this is actually a RTD bug: https://github.com/rtfd/readthedocs.org/issues/2116.\n @mgeier I agree. Thanks for filing the issue on RTD. :cake:\n @willingc There was a response at https://github.com/rtfd/readthedocs.org/issues/2116, but I don't like the proposed solution (because it is IMHO a work-around and no real solution).\nI also asked at Sphinx: https://github.com/sphinx-doc/sphinx/issues/2442\n\nAny opinions on that?\n @willingc Did you have an opportunity to look into this?\n\nI could really need somebody to support me on https://github.com/rtfd/readthedocs.org/issues/2116!\n @willingc FYI: the problem solved itself because I included the CSS fixes directly into `nbsphinx`.\n\nI still think the original problem is a bug in RTD and Sphinx ...\n @mgeier Thanks for the update. I will see some of the RTD folks in 2 weeks. I'll see if I can have them look at in person.\n @willingc Did you have a chance to talk to the RTD people?\nI don't know what to answer to https://github.com/rtfd/readthedocs.org/issues/2116#issuecomment-209159076, I think I've already said everything ...\n\nCurrently, I'm discussing this on a Sphinx issue, see https://github.com/sphinx-doc/sphinx/issues/2442#issuecomment-224007281.\n\nIt would really be nice to get your opinion on this (be it for or against my statements).\n @mgeier Traveling today. Just left some comments here: https://github.com/sphinx-doc/sphinx/issues/2442#issuecomment-224011721\n","Travis is green. Merging. Will double check RTD after merge.\n Checked RTD. Rendering correctly.\n","Sounds like Python got built without sqlite. Ipython has fallbacks, but the\nnotebook server assumes the standard library is all there.\n > Sounds like Python got built without sqlite.\n\nLooks like you're right:\n\n```\nvagrant@:~ % python3\nPython 3.4.4 (default, Mar 19 2016, 01:14:08) \n[GCC 4.2.1 Compatible FreeBSD Clang 3.4.1 (tags/RELEASE_34/dot1-final 208032)] on freebsd10\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import sqlite3\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/usr/local/lib/python3.4/sqlite3/__init__.py\", line 23, in <module>\n    from sqlite3.dbapi2 import *\n  File \"/usr/local/lib/python3.4/sqlite3/dbapi2.py\", line 27, in <module>\n    from _sqlite3 import *\nImportError: No module named '_sqlite3'\n```\n\nknow of any method to get around this?\n Did you compile Python yourself? If so, ensure the sqlite development\nheaders are installed before building it.\n > Did you compile Python yourself?\n\nNo, from freebsd pkg:\nhttp://www.freshports.org/lang/python3/\n\nNo mention of sqlite3 as a build or run time dependency.\n @jungle-boogie This may help you https://forums.freebsd.org/threads/53114/\n So I installed that package but still not running. Probably need to install the port and make against python?\n\nhttp://www.freshports.org/databases/py-sqlite3\n It appears from the thread above that you would need to:\n1. Navigate to /usr/ports/databases/py-sqlite3 directory, then run:\n   `make clean`\n2. Then run:\n   `make PYTHON_VERSION=python3.4 install`\n\nCaution: The packages and messages refer to very dated versions of py-sqlite3 and the messages themselves are quite old. I wonder if there may be a better solution out there.\n\nYou may wish to try https://docs.python.org/3.5/using/unix.html#on-freebsd-and-openbsd to install Python 3.5.\n I added the same fallback we use elsewhere in #1310, which means you will be able to get a non-stdlib implementation by doing `pip install pysqlite2`.\n\nOn my FreeBSD 10 machine, I was able to get the stdlib sqlite3 for Python 3.4 with:\n\n```\nsudo pkg install py34-sqlite3\n```\n\nI'm not sure why that's not included by default.\n > On my FreeBSD 10 machine, I was able to get the stdlib sqlite3 for Python 3.4 with:\n\nThat works!\n\n```\n% jupyter notebook --generate-config\nWriting default config to: /usr/home/sean/.jupyter/jupyter_notebook_config.py\n```\n\nThanks for the input.\n @minrk Thanks! @jungle-boogie I'm glad Min had the solution for you :+1: \n Would you take a PR for updating the docs, @willingc? Maybe you don't want to get too OS specific, though.\n I would welcome a PR, @jungle-boogie. Although the team is trying to keep the installation instructions simple and more generic, I think a PR against the [Developer FAQ](https://github.com/jupyter/notebook/blob/master/docs/source/development_faq.rst) would be a good place to put a PR explaining how to get running on FreeBSD10. Likely it will be a more advanced person using FreeBSD, so a FAQ entry would be discoverable via search. Thanks!\n","The options I use in node for the server piece is:\n\n``` js\nconst options = {\n  key: process.env.SERVER_KEY,\n  cert: process.env.SERVER_CERT,\n  ca: process.env.CA,\n  requestCert: true, \n  rejectUnauthorized: true,\n};\n```\n\nThe pertinent options for certs there are the key, cert, and a strict setting of only one CA - the one we the users control. As for strictness, it's these two options:\n- `requestCert` - the server will request a certificate from clients that connect and attempt to verify the certificate\n- `rejectUnauthorized` - the server will reject any connection which is not authorized with the configured CA. For the client, the server certificate is verified against the list of supplied CAs.\n\nIt's not clear to me what options we need in Tornado, seemed like I need to build an SSL Context via Python stdlib, exposing the options up to the notebook server.\n @rgbkrk thanks for writing this up! Do you think we should do this in the single-user server subclass for JupyterHub, or add it to the base notebook server in general?\n Add it to the base notebook server in general.\n If it's in the base notebook server, then users at organizations that use strict PKI for auth can use this to launch their own notebook server and access it from their browser.\n\nThe other use case is the ability to launch a notebook server remotely and connect to it with a local client (yes, I'm hinting at an Electron app).\n Cool, makes sense. The Python SSL options are [here](https://docs.python.org/3/library/ssl.html#ssl.SSLContext). It looks like `rejectUnauthorized` is\n\n``` python\nSSLContext.verify_mode = ssl.CERT_REQUIRED\n```\n\nI honestly can't tell what the `requestCert` step would be, but it seems to have something to do with `Purpose.CLIENT_AUTH`. Possibly \n\n``` python\nSSLContext.load_verify_locations(cafile='cert.pem')\n```\n\nIt's not clear to me, but it would _seem_ that the ssl_options dict won't be enough, and that some methods will need to be called to set these options.\n Using PKI for a local app makes great sense, thanks.\n\nSSLContext is new in Python 3, but backported to 2.7.9, so we should either require Python 3 to do this, or at least 2.7.9. In either case, we should probably rely on SSLContext for this, and not the pre-SSLContext APIs.\n For what it's worth, I've been playing with running a notebook behind an nginx reverse proxy (since it's sharing an IP with some other services) using client certificates.  It's a very convenient way to do basic access control, except Safari doesn't appear to support client certificates via wss.  It works fine in Firefox but I haven't tried Chrome.\n\nAre the kernels' WebSockets endpoints protected in any way that would make it safe to expose them over TLS without client authentication, under the assumption that the notebook is already access-controlled?  I dug into the code a bit and didn't see anything, but I'm not familiar with tornado so I may have missed something.\n @captainsafia ^^ good issue to look at and think on for remote kernels (launching on a remote docker host for instance)\n","This looks reasonable to me, but I'll give others a chance to review it.\n Haha, yes I have run into this myself. Nice idea.\n\nOn Wed, Jun 3, 2015 at 2:55 PM, Thomas Kluyver notifications@github.com\nwrote:\n\n> This looks reasonable to me, but I'll give others a chance to review it.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/131#issuecomment-108626776.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n LGTM too...\n Alright, let's land it. Thanks @hiaselhans.\n cool! :palm_tree:\n Nice, thanks.\n","@minrk Thanks for solving this BSD issue :D\n","@ROODAY Here's one approach that is documented in the jupyter/docker-stacks repo: https://github.com/jupyter/docker-stacks/wiki/Docker-Recipes#running-behind-a-nginx-proxy\n\ncc/ @parente\n @willingc I tried following the conf but I still am not able to make a web socket connection. nginx-proxy allows mounting of a folder of conf files for specific domains that get included into the main conf, so I was able to add this to the server block for jupyter:\n\n```\nclient_max_body_size 50M;\nerror_log /var/log/nginx/error.log;\n\nlocation / {\n        proxy_pass http://notes.rooday.com;\n\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header Host $host;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_read_timeout 86400;\n}\n\nlocation ~* /(api/kernels/[^/]+/(channels|iopub|shell|stdin)|terminals/websocket)/? {\n        proxy_pass http://notes.rooday.com;\n\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header Host $host;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n}\n```\n\nThe only parts from the suggested conf file that I did not include were these:\n\n```\n        ssl on;\n        ssl_certificate /data/cert.crt;\n        ssl_certificate_key /data/key.key;\n\n        ssl_ciphers \"AES128+EECDH:AES128+EDH\";\n        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n        ssl_prefer_server_ciphers on;\n        ssl_session_cache shared:SSL:10m;\n        add_header Strict-Transport-Security \"max-age=63072000; includeSubDomains\";\n        add_header X-Content-Type-Options nosniff;\n        ssl_stapling on; # Requires nginx >= 1.3.7\n        ssl_stapling_verify on; # Requires nginx => 1.3.7\n        resolver_timeout 5s;\n```\n\nIs SSL required to get websockets working?\n\nEdit:\n\nHere is my jupyter_notebook_config.py file\n\n```\nc.NotebookApp.ip = '172.17.0.4'\nc.NotebookApp.password = u'whoathatsnotsupposedtobehere'\nc.NotebookApp.open_browser = False\nc.NotebookApp.port = 8888\nc.NotebookApp.trust_xheaders = True\nc.NotebookApp.allow_origin = '*'\n```\n That _looks_ right, but I'll ping @rgbkrk for any ideas about what might not be right about the nginx config for websocket forwarding. My guess is it's a tiny regex or priority bug preventing the Upgrade block from being applied correctly.\n Is there a way to run the Jupyter Notebook container in a debug mode to see more information on what happens when I load an IPython notebook?\n @ROODAY Jupyter Notebook can be run in debug mode with the command `jupyter notebook --debug`\n I tried debugging it within the Docker container since I'm sure the issue is related to everything being in a Docker container. However, when I tried to build a Docker image of Jupyter Notebook with a modified version of the Docker file that had the `--debug` flag (here: http://pastebin.com/AMtbq7bX), I received an error about setup.py not being found. \n\nThis is the command I ran to build the image (the docker file was at /home/rooday/dockerfile):\n\n```\nsudo docker build -t jupyter-debug:test --rm=true /home/rooday/\n```\n\nThese were the last few lines of the build:\n\n```\nDirectory '/usr/src/jupyter-notebook' is not installable. File 'setup.py' not found.\nThe command '/bin/sh -c BUILD_DEPS=\"nodejs-legacy npm\" &&     apt-get update -qq &&     DEBIAN_FRONTEND=noninteractive apt-get install -yq $BUILD_DEPS &&         pip3 install --no-cache-dir /usr/src/jupyter-notebook &&     pip2 install --no-cache-dir widgetsnbextension &&     pip3 install --no-cache-dir widgetsnbextension &&         npm cache clean &&     apt-get clean &&     rm -rf /root/.npm &&     rm -rf /root/.cache &&     rm -rf /root/.config &&     rm -rf /root/.local &&     rm -rf /root/tmp &&     rm -rf /var/lib/apt/lists/* &&     apt-get purge -y --auto-remove         -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $BUILD_DEPS' returned a non-zero code: 1\n```\n\nEdit: If necessary, here's the full console output when the build command was ran: http://pastebin.com/ybJPnwC0\n What happens if you run without `--rm=true`\n\n`sudo docker build -t jupyter-debug:test  /home/rooday/`\n That gives the same error of\n\n```\nDirectory '/usr/src/jupyter-notebook' is not installable. File 'setup.py' not found.\nThe command '/bin/sh -c BUILD_DEPS=\"nodejs-legacy npm\" &&     apt-get update -qq &&     DEBIAN_FRONTEND=noninteractive apt-get install -yq $BUILD_DEPS &&         pip3 install --no-cache-dir /usr/src/jupyter-notebook &&     pip2 install --no-cache-dir widgetsnbextension &&     pip3 install --no-cache-dir widgetsnbextension &&         npm cache clean &&     apt-get clean &&     rm -rf /root/.npm &&     rm -rf /root/.cache &&     rm -rf /root/.config &&     rm -rf /root/.local &&     rm -rf /root/tmp &&     rm -rf /var/lib/apt/lists/* &&     apt-get purge -y --auto-remove         -o APT::AutoRemove::RecommendsImportant=false -o APT::AutoRemove::SuggestsImportant=false $BUILD_DEPS' returned a non-zero code: 1\n```\n A friend pointed out to me that the build error was likely due to the fact that the environment I was building it in did not have all the same folders and resources that the original was built in, and that I should instead use a dockerfile to extend the already made jupyter/notebook container. \n\nUsing this Dockerfile:\n\n```\nFROM jupyter/notebook\nCMD [\"jupyter\", \"notebook\", \"--debug\"]\n```\n\nand this build command:\n`sudo docker build -t jupyter/notebook:debug /home/rooday/`\n\nI was able to build a Docker container that ran Jupyter Notebook in debug. Upon connecting to the notebook, creating a new IPython 3 Notebook and editing it, I received the same connection as before. This is the last few lines of output from the Jupyter Notebook container's logs (full logs here: http://pastebin.com/vTqc1Xug):\n\n```\n[W 22:31:20.357 NotebookApp] 400 GET /api/kernels/93b69b1c-a4ab-4a85-a49b-f3a0abf592db/channels?session_id=0F0EDE29F9364D918500E3FC55EF9A3A (172.17.0.2) 1269.18ms referer=None\n[D 22:31:20.358 NotebookApp] Can \"Upgrade\" only to \"WebSocket\".\n[D 22:31:21.388 NotebookApp] Initializing websocket connection /api/kernels/93b69b1c-a4ab-4a85-a49b-f3a0abf592db/channels\n[W 22:31:21.403 NotebookApp] 400 GET /api/kernels/93b69b1c-a4ab-4a85-a49b-f3a0abf592db/channels?session_id=0F0EDE29F9364D918500E3FC55EF9A3A (172.17.0.2) 15.53ms referer=None\n[D 22:31:21.403 NotebookApp] Can \"Upgrade\" only to \"WebSocket\".\n[D 22:31:23.437 NotebookApp] Initializing websocket connection /api/kernels/93b69b1c-a4ab-4a85-a49b-f3a0abf592db/channels\n[W 22:31:23.450 NotebookApp] 400 GET /api/kernels/93b69b1c-a4ab-4a85-a49b-f3a0abf592db/channels?session_id=0F0EDE29F9364D918500E3FC55EF9A3A (172.17.0.2) 12.59ms referer=None\n[D 22:31:23.450 NotebookApp] Can \"Upgrade\" only to \"WebSocket\".\n[D 22:31:25.284 NotebookApp] 200 GET /custom/custom.css (172.17.0.2) 6.46ms\n[D 22:31:25.433 NotebookApp] 200 GET /static/notebook/js/main.min.js.map (172.17.0.2) 71.94ms\n[D 22:31:25.451 NotebookApp] 304 GET /static/style/style.min.css.map (172.17.0.2) 8.74ms\n[D 22:31:27.480 NotebookApp] Initializing websocket connection /api/kernels/93b69b1c-a4ab-4a85-a49b-f3a0abf592db/channels\n[W 22:31:27.490 NotebookApp] 400 GET /api/kernels/93b69b1c-a4ab-4a85-a49b-f3a0abf592db/channels?session_id=0F0EDE29F9364D918500E3FC55EF9A3A (172.17.0.2) 10.67ms referer=None\n[D 22:31:27.491 NotebookApp] Can \"Upgrade\" only to \"WebSocket\".\n[D 22:31:35.538 NotebookApp] Initializing websocket connection /api/kernels/93b69b1c-a4ab-4a85-a49b-f3a0abf592db/channels\n[W 22:31:35.549 NotebookApp] 400 GET /api/kernels/93b69b1c-a4ab-4a85-a49b-f3a0abf592db/channels?session_id=0F0EDE29F9364D918500E3FC55EF9A3A (172.17.0.2) 12.31ms referer=None\n[D 22:31:35.550 NotebookApp] Can \"Upgrade\" only to \"WebSocket\".\n[D 22:31:51.590 NotebookApp] Initializing websocket connection /api/kernels/93b69b1c-a4ab-4a85-a49b-f3a0abf592db/channels\n[W 22:31:51.616 NotebookApp] 400 GET /api/kernels/93b69b1c-a4ab-4a85-a49b-f3a0abf592db/channels?session_id=0F0EDE29F9364D918500E3FC55EF9A3A (172.17.0.2) 30.62ms referer=None\n[D 22:31:51.617 NotebookApp] Can \"Upgrade\" only to \"WebSocket\".\n```\n\nThe difference I notice now from when it wasn't in debug is there are now lines saying\n\n```\nCan \"Upgrade\" only to \"WebSocket\".\n```\n\nIs there a setting that is preventing the connection from being upgraded to a websocket connection?\n @willingc \nI've been talking to a person from the nginx-proxy repo to help figure out the issues on the nginx side, but I made some progress in that one config allowed me to make a kernel websocket connection. However, when I did that, I saw these errors in the chrome console:\n\n```\nactions jupyter-notebook:find-and-replace does not exist, still binding it in case it will be defined later...\nFailed to load resource: the server responded with a status of 404 (Not Found) \nhttp://notes.rooday.com/nbextensions/widgets/extension.js?v=20160408223056\nFailed to load resource: the server responded with a status of 404 (Not Found) http://notes.rooday.com/nbextensions/widgets/notebook/js/extension.js?v=20160408223056\nWidgets are not available.  Please install widgetsnbextension or ipywidgets 4.0\n```\n\nIs this something that should be ignored, or could it be a reason I'm having trouble?\n @ROODAY In the [jupyter/notebook's `Dockerfile`](https://github.com/jupyter/notebook/blob/master/Dockerfile#L85), widgetsnbextension is installed for Python 2 and 3. I would recommend installing it.\n @willingc Could this be the issue? The dockerfile for Jupyter/Notebook on DockerHub does not match the docker file from the Jupyter/Notebook repository.\n\nhttps://hub.docker.com/r/jupyter/notebook/~/dockerfile/\n\nEdit:\n\nI run a new jupyter/notebook container with the stable tag with this command:\n\n```\ndocker run --name jupyter -d -p 8888:8888 -v \"/home/jupyter/notebooks:/notebooks\" jupyter/notebook:stable\n```\n\nAnd from doing that it seemed to install the extensions as I saw this in the chrome console:\n\n```\nSession: kernel_created (8631fdc3-87a9-405f-bdf5-cc486238fdcc)\nStarting WebSockets: ws://notes.rooday.com/api/kernels/fc593fbd-f32e-4ecb-a8fb-1a665ca916ed\nLoading extension: widgets/notebook/js/extension\nloaded widgets\nKernel: kernel_connected (fc593fbd-f32e-4ecb-a8fb-1a665ca916ed)\n```\n\nHowever, I still get 304 errors when trying to run code as I have to force Upgrade \"websocket\" to make a connection, therefore interfering with normal requests for assets like Javascript and CSS.\n @minrk @parente Which Dockerfile should @ROODAY use? The one on DockerHub, the on in the jupyter/notebook repo, or one of the ones in jupyter/docker-stacks? Thanks.\n @willingc Nevermind, I found the issue. As it turns out, it was not related to either nginx-proxy or Jupyter, and rather Cloudflare. At the moment, Websocket connections through Cloudflare is in beta, and by default is disabled. Cloudflare recommends as a workaround to simply grey-cloud A records that make use of websocket connections, so in my case that was notes.rooday.com\n\nhttps://support.cloudflare.com/hc/en-us/articles/200169466-Can-I-use-CloudFlare-with-WebSockets-\n\nFor anyone in the future attempting to use Cloudflare, Jupyter/notebook, and nginx-proxy, refer to this:\nhttps://github.com/jwilder/nginx-proxy/issues/412\n\n# Update:\n\nCloudflare now allows websockets for everyone, read more [here](https://www.cloudflare.com/websockets/).\n @ROODAY I'm glad you got it resolved. Thanks for passing along the content to help others too. :cake:\n +1 I had similar issue and the problem was solved by disabling (grey-cloud) http-proxy in cloudflare.\n","Great, thanks for the contribution. Could you post a screenshot showing the\ndesign of the button in the toolbar to help in its review?\n\nOn Wed, Apr 6, 2016 at 5:18 PM, Vivian Fang notifications@github.com\nwrote:\n\n> Hi! I'm a research apprentice at BIDS with Matthias (@ Carreau). This is\n> for #1244 https://github.com/jupyter/notebook/issues/1244.\n> \n> Creates a button in the main toolbar that will toggle the line numbers\n> on/off in all code cells. Future PR will have line numbering persist (i.e.\n> new code cells will have line numbers turned on, if the user turned on line\n> \n> ## numbers for all cells).\n> \n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/jupyter/notebook/pull/1312\n> Commit Summary\n> - adding an action for toggling all line numbers, with keyboard\n>   shortcut Shift-L\n> \n> File Changes\n> - _M_ notebook/static/notebook/js/actions.js\n>   https://github.com/jupyter/notebook/pull/1312/files#diff-0 (8)\n> - _M_ notebook/static/notebook/js/keyboardmanager.js\n>   https://github.com/jupyter/notebook/pull/1312/files#diff-1 (1)\n> - _M_ notebook/static/notebook/js/maintoolbar.js\n>   https://github.com/jupyter/notebook/pull/1312/files#diff-2 (1)\n> - _M_ notebook/static/notebook/js/notebook.js\n>   https://github.com/jupyter/notebook/pull/1312/files#diff-3 (12)\n> \n> Patch Links:\n> - https://github.com/jupyter/notebook/pull/1312.patch\n> - https://github.com/jupyter/notebook/pull/1312.diff\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1312\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Great! It seems to me like this should go in the View menu, rather than the toolbar, though, given its relatively rare frequency.\n > Great, thanks for the contribution. Could you post a screenshot showing the\n> design of the button in the toolbar to help in its review?\n\nScreenshot added on first comment. \n Do we want to make the \"all lines\" numbers a property so that you can easily implement not a only a toggle, but a \"show all\" and \"hide all\".\n I tend to agree with @minrk that this is used infrequently and should probably be in the View menu. At the same time it doesn't take up much space in the toolbar.\n\nBut, in either case, it should be included in the View menu (even if in the toolbar as well)\n > I tend to agree with @minrk that this [...] should probably be in the View menu.\n\nSure, I was just showing @secant how to do thing, we did not get to the point of adding it in the menu. \n\n> [...] this is used infrequently [...]\n\nWell... it is used infrequently...\n\n  1) There is no UI to do it\n  2) it was practically speaking not possible to do it.\n\nIt's like arguing that setting you car is self driving mode is not such a useful feature an as a proof you show that the number of car that self-drive on the road is low.\n\nAlso, it also depend on whether we persist the value in nbconfig or not. If we persist it, people will use it once and forget it. At which point I agree that the toolbar is likely not necessary. If we don't persist it and keep it as an instance variable. some users will likely use it every time they open the notebook. \n\nLastly, It was one of the most requested feature at JupyterDays, which make me think that \u2013\u00a0in the case we don't persist it to nbconfig \u2013\u00a0a visible UI element for it seem likely useful.\n I think that in the long run, a menu entry and persistence is the right way to do this. Whether we want to put it in the menu first and trust that we get round to persistence, or put it in the toolbar until we do persistence, I'm not sure.\n BTW, just for @secant information, the View menu is generated server side in [`notebook/templates/notebook.html`](https://github.com/jupyter/notebook/blob/master/notebook/templates/notebook.html)\n\nSo you likely want to create a new menu like that\n\n```\ndiff --git a/notebook/templates/notebook.html b/notebook/templates/notebook.html\nindex 10e6095..d9f5329 100644\n--- a/notebook/templates/notebook.html\n+++ b/notebook/templates/notebook.html\n@@ -162,6 +162,10 @@ data-notebook-path=\"{{notebook_path | urlencode}}\"\n                             <a href=\"#\">Cell Toolbar</a>\n                             <ul class=\"dropdown-menu\" id=\"menu-cell-toolbar-submenu\"></ul>\n                         </li>\n+                        <li class=\"divider\"></li>\n+                        <li id=\"jupyter-notebook-toggle-line-number-or-any-other-id-you-like\">\n+                            <a href=\"#\">Toggle Line Number</a>\n+                        </li>\n                     </ul>\n                 </li>\n```\n\nand you probably figured out on yourself that you have to modify `id_actions_dict` in `menubar.js` to bind the menu with the action id. \n\nHope that helps. \n\nFeel free to push any more commit on the same branch and the PR will update. \nYou can also ask question, I think anyone in this thread will be happy to help you. \n I like the idea of adding it to the View menu and making it persistent.\nThen users can start to use it and we can see if it is userd enough to be\non the toolbar.\n\nOn Thu, Apr 7, 2016 at 4:07 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> BTW, just for @secant https://github.com/secant information, the View\n> menu is generated server side in notebook/templates/notebook.html\n> https://github.com/jupyter/notebook/blob/master/notebook/templates/notebook.html\n> \n> So you likely want to create a new menu like that\n> \n> diff --git a/notebook/templates/notebook.html b/notebook/templates/notebook.html\n> index 10e6095..d9f5329 100644\n> --- a/notebook/templates/notebook.html\n> +++ b/notebook/templates/notebook.html\n> @@ -162,6 +162,10 @@ data-notebook-path=\"{{notebook_path | urlencode}}\"\n>                              <a href=\"#\">Cell Toolbar</a>\n>                              <ul class=\"dropdown-menu\" id=\"menu-cell-toolbar-submenu\"></ul>\n>                          </li>\n> -                        <li class=\"divider\"></li>\n> -                        <li id=\"jupyter-notebook-toggle-line-number-or-any-other-id-you-like\">\n> -                            <a href=\"#\">Toggle Line Number</a>\n> -                        </li>\n>                    </ul>\n>                </li>\n> \n> and you probably figured out on yourself that you have to modify\n> id_actions_dict in menubar.js to bind the menu with the action id.\n> \n> Hope that helps.\n> \n> Feel free to push any more commit on the same branch and the PR will\n> update.\n> You can also ask question, I think anyone in this thread will be happy to\n> help you.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1312#issuecomment-207132318\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n \ud83d\udc4d \n Reviving this one... I moved the toggle line numbers from the toolbar to the \"View\" menu. See https://github.com/jupyter/notebook/pull/1676. \n\n@ellisonbg Any UX feedback?\n\n![demo](http://g.recordit.co/2KahqD9lKs.gif)\n","Thanks @minrk\n","Closing as this is a duplicate of #534. \n\nCheck out the `hide_input` extension in [IPython-notebook-extensions](https://github.com/ipython-contrib/IPython-notebook-extensions) and let me know if that makes it easier for you to hide input cells! \ud83c\udf89 \n","> Can this also be more easily configured?\n\nYes on master (5.0) you can easily change shotcuts:\n<img width=\"1010\" alt=\"screen shot 2016-06-16 at 17 32 40\" src=\"https://cloud.githubusercontent.com/assets/335567/16137462/73b26732-33e8-11e6-8b47-c4f5a09d24f0.png\">\n\nYou can already do that by writing a bit of js in your `custom.js` (google is your friend), that can help you to change/add to the toolbar, and the shortcuts. \n","Just as a side note, I am happy that we merged @takluyver quick as it allowed us to **discover** bugs that we would have missed otherwise. \n Fix coming up\n Reopening 2, not fixed. \n","Actually, I found out something still more interesting: The id which jupyter uses to decide which folder it should write in (this `/run/user/{id}`), seems to be the id of the user which the session was initially open with.\n\nSo, if I ssh into a host using a user which has id X and then I `sudo su - anotheruser`, when I run jupyter from user `anotheruser` the folder it uses is `/run/user/X`\n This is coming from the environment variable `$XDG_RUNTIME_DIR`. Normally, when you log in, that is set to a newly created directory which only your user has access to. I'm guessing that it doesn't get set again when you use `sudo` to change user.\n\nI think we have a fallback if it's not set, so the easiest thing might be to unset the environment variable after sudo-ing. In fact, I thought sudo dropped environment variables by default. :-/\n I had the same problem. `export XDG_RUNTIME_DIR=\"\"` eliminated the problem.\n You can also (at least in bash) `unset XDG_RUNTIME_DIR` for the same effect.\n > `unset XDG_RUNTIME_DIR`\n\nWorked for me as well. Need to run that before starting juypterhub after sudo-ing into our jupyterapp-specific account. \n I have also encountered similar problem. Thanks for the hint. \nNote, you can add it to jupyter user ~/.bashrc, then it will load on every login  `echo 'unset XDG_RUNTIME_DIR' >> ~/.bashrc`\nhttps://bioinfoexpert.com/2016/06/24/running-jupyter-as-public-service/\n worked for me too. Great!\n Why is this closed if it's still a problem?\r\nI just installed anaconda in arch linux as a regular user, there is no sudo involved and i got this error. no error for su user.  Fixed by unsettling  $XDG_RUNTIME_DIR What is `XDG_RUNTIME_DIR` set to in that case?\r\n\r\nI believe that if XDG_RUNTIME_DIR is set to a location that is not writable, that's a problem with your environment. It's [supposed](https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html) to be set at login to a directory which is r+w for your user and your user only. The problem is that, the folder set by jupyter notebook is only writable by  SU, but that shouldn't happen because i'm starting the notebook as  a regular user and also i'm logged in as regular user. This  didn't happen when i used  ipython/jupyter from my distro repo (i used that for about two years).\r\n\r\nThe folder is the same as is in the OP,  /run/user/1000/jupyter\r\n So I was installing anaconda in a new partition owned by the root user, even though everybody was able to write in it. I changed the owner to my regular user and now i don't have the problem anymore. Previously, the folder /run/user/1000/jupyter was owned by root and by definition that folder is only writable by the target user. Now is owned by my regular user. \r\n\r\n-  ","Works ! Thanks !\n","-- sigh -- \n\n+1 once travis happy. \n","This looks like a bug in [path.py](https://github.com/jaraco/path.py), that it's not correctly catching when pkg_resources is not available.\n Sorry, I am not good in python, either. Is it not weird that the behaviour is different it two different machines even though they are using the same package manager to install the same packages with the same versions? Any suggestions to solve the issue?\n Reported as jaraco/path.py#111\n The [corresponding](https://github.com/jaraco/path.py/commit/41a1149e647bca532db0c7bc8c0062363034bf4e) commit fixes the problem, apparently. I am not having the same error anymore.\n We also changed pickleshare, so if you've updated that, IPython is no longer trying to load `path.py`.\n I am not sure if I am using that --- I have not issued `pip install pickleshare` myself. But, thanks, good to know!\n","While this is a nice feature, for me it breaks copying things from the result's section of the cells. Very annoying if you want to copy them to a text editor or such.\n What commit do you have? That sounds very much like an issue that was already fixed in master, so try pulling the latest version if you haven't already.\n I'm at Wednesdays master. Sorry, pip install does not seem to log the actual commit being used.\n This Wednesday? Can you check that you've rebuilt javascript (`python setup.py js`) and cleared your browser cache. If you can still reproduce it, please post exact steps, because I thought we had fixed that.\n Ok, I build a new, clean docker for this. It starts with ubuntu:14.04, and adds apt-fast, and the following packages: build-essential screen vim pigz lbzip2 csh libtool libxml2 liblocal-lib-perl libcurl4-openssl-dev wget liblzo2-dev libzmq-dev libgsl0-dev python3-dev python3-pip npm nodejs-legacy lxc-docker-1.9.1 ca-certificates apparmor fish\n\nIt then does an npm install -g configurable-http-proxy.\n\nFollowed by pip3 install git+git://github.com/jupyter/jupyterhub.git git+git://github.com/jupyter/notebook.git docker-py ipywidgets\n\nSo it has a git commit from within the last three hours.\n\nI have tested with Opera 34.0.2036.25 and Firefox 45.0.2 on Ubuntu 15.11.\n\nTo reproduce: Mark text in output of a CodeCell. Right click, choose copy. Go to gvim. Paste. Observer CodeCell code contents being pasted instead of the region you had marked. CodeCell output is omitted.\n\nCopying parts of the code cell on the other hand works as expected. \nAlso the copy/pasting between notebooks does work, and also moves the output.\n Is there anything special about the way you're marking text? I'm testing locally with Firefox 45.0.2, marking text with the mouse, then right-clicking, copy, and pasting it into another application (I don't have gvim, but I think it's unlikely that that's the issue), and it's working fine for me.\n Can you mark some text, open up the browser's JS console, and run \n\n``` javascript\nwindow.getSelection().isCollapsed\n```\n\nWhen there's a text selection, that should evaluate to `false`, in which case we defer to the default copy action. If it evaluates to `true` (i.e. no text is selected) we copy the selected cells instead.\n Nothing special about marking the text. window.getSelection().isCollapsed is false when text is marked in the output section of a cell, but true when nothing is marked, or when text in the editor itself is marked.\n\nIs it possible this is related to my window manager (i3)?\n I don't see how it could be related to the window manager, though anything's possible. `window.getSelection().isCollapsed` is [what we check](https://github.com/jupyter/notebook/blob/c681186e2df65d52d7b416cc83074a150b011bc6/notebook/static/notebook/js/clipboard.js#L38) before handling a copy event, so if that's `false`, I don't know how we can be copying cells.\n I'm sorry for (probably) wasting your time - I've inspected notebook/clipboard.js inside my browser, and it actually lacks the isCollapsed check!\n\nNow I gotta figure out why pip install  git://... gave me an old version on what's supposed to be a new docker.\n Is it possible that docker is caching the result of that command, assuming it will do the same thing every time?\n I can exclude that  - the docker actually has the new code in dist_packages/notebook/static/notebook/js/clipboard.js - so it's either browser caching or the js build.\n\nThe browser shows the file being in something called 'webpack'...\n Webpack is the JS builder/minifier we use. That should be run as part of installation from source.\n","Did you explicitly call show()? AIUI, you have to call show unless matplotlib is in interactive mode (which is one of the things that our magic enables).\n\nPinging @tacaswell for mpl related stuff.\n It is in interactive mode :) \n\nI don't call show personally, but it is done through the module.\n With out seeing the code I am mostly guessing, but the behavior should be:\n- the interactive state of mpl is controlled via an rcparam (our global module level state) and can be checked via `mpl.is_interactive()` and controlled via `plt.ion()` and `plt.ioff()`\n- if mpl is in 'interactive mode', then when a figure is created, then the gui backend has it's `show` method called.  This relies on the `PyOS_inputhook` to spin the GUI event loop and keep it 'active'.  If you have not run the IPython magic which ever wrapping of qt you are using (pyside vs qt) may have installed it's hook and IPython may or may not be calling the input hook from the kernel. \n- if mpl is _not_ in interactive mode, then `plt.show()` (which is different than the figure's show) is blocking (!) and runs the GUI event loop until you close all of the open figures.\n Thanks for the comments, chaps. I'll experiment a bit more and see what's going on.\n","Cool ! Thanks !\n","Has there been any further work on this?\r\n\r\nI accidentally extensively edited a notebook that was read-only on the disk and my changes are permanently lost it seems; despite having the window open I can find no mechanism other than copying and pasting every cell to save my changes, even after the notebook is made writable on the disk.","ping @rgbkrk @minrk \n","Thanks @minrk , this looks good\n\ud83c\udf65 \ud83d\udc1f \n @jdfreder you missed my inline remark.\n No I saw it, it's okay, we can backport another.\n","Thanks @SylvainCorlay \n","You have some extension (the 'lastly executed bits aren't normally there). Can you try without any extensions, and see if that fixes it? Also, which browser are you on?\n I tested the behavior and found the culprit: '(some) LaTeX environments for Jupyter'.\nI believe the LaTeX escaping '&' behavior should be limited to the markdown cells, but it is propagated to code cells as well. Should I report it to the extension team?\nPS: I was using Firefox, but replicated the issue with Chrome as well.\n @Nosferican Please report this upstream @ https://github.com/ipython-contrib/IPython-notebook-extensions/\n\nCC: @jfbercher\n Closing this for now as it seems to be an extension issue - we can reopen if there's something to fix in the notebook itself.\n I may be wrong, of course, but I do not remember escaping & in the LaTeX envs extension. Furthermore, most of processing is only done for markdown cells (and triggered when markdown cells are rendered). Finally I am not able to reproduce. But I may miss something. \n","1) drop the first space after the `<`\n2) ERR_SSL_VERSION_OR_CIPHER_MISMATCH over https.\n3) require is loaded on the page, coffee-script does not inject itself in the page if require availlable. \n","I _think_ this was fixed recently by #1319. Can you make sure your js is up-to-date (A fresh `pip install -e .` should do it)?\n Ah, I'm sure you're right! I searched in the issues field, but forgot to\ninclude closed issues. Thanks!\n\nOn Mon, 11 Apr 2016 09:48 Min RK, notifications@github.com wrote:\n\n> I _think_ this was fixed recently by #1319\n> https://github.com/jupyter/notebook/pull/1319. Can you make sure your\n> js is up-to-date (A fresh pip install -e . should do it)?\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1330#issuecomment-208234911\n Yep, all good. Thanks!\n Great, thanks for testing!\n","This is the key:\n\n> Invalid argument (bundled/zeromq/src/tcp_address.cpp:171)\n\nwhich is a C-level error in zeromq when starting the kernel, possibly related to funkiness in the Ubuntu+Windows environment. How did you install your Python packages, specifically pyzmq?\n I installed the jupyter dependent packages (including pyzmq) with the following commands.\n\n```\nwget https://bootstrap.pypa.io/get-pip.py\npython get-pip.py\napt install g++ python-dev\npip2 install jupyter\n```\n @minrk I wonder if unicode/characters are getting in the way as well here with Python:\n\n`[W 12:13:53.394 NotebookApp] /mnt/c/Users/knishida/\u30b9\u30bf\u30fc\u30c8 \u30e1\u30cb\u30e5\u30fc doesn't exist`\n @kozo2 can you install zeromq with apt, and then reinstall pyzmq:\n\n```\napt-get install libzmq3-dev\npip uninstall pyzmq\npip install --no-use-wheel -v pyzmq\n```\n @minrk I installed zeromq with apt, and reinstalled pyzmq with pip `--no-use-wheel` option, but still fails like this\n\n```\nroot@localhost:~# jupyter notebook --no-browser\n/usr/local/lib/python2.7/dist-packages/widgetsnbextension/__init__.py:30: UserWarning: To use the jupyter-js-widgets nbe\nxtension, you'll need to update\n    the Jupyter notebook to version 4.2 or later.\n  the Jupyter notebook to version 4.2 or later.\"\"\")\n[I 17:01:05.360 NotebookApp] Serving notebooks from local directory: /root\n[I 17:01:05.361 NotebookApp] 0 active kernels\n[I 17:01:05.361 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/\n[I 17:01:05.362 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[W 17:01:22.026 NotebookApp] 404 GET /nbextensions/widgets/notebook/js/extension.js?v=20160420170105 (127.0.0.1) 19.00ms\n referer=http://localhost:8888/notebooks/Untitled.ipynb\n[I 17:01:22.474 NotebookApp] Kernel started: facafdda-93a2-4286-abb5-490274d63739\nInvalid argument (tcp_address.cpp:161)\n[I 17:01:25.469 NotebookApp] KernelRestarter: restarting kernel (1/5)\nInvalid argument (tcp_address.cpp:161)\n[I 17:01:28.495 NotebookApp] KernelRestarter: restarting kernel (2/5)\nInvalid argument (tcp_address.cpp:161)\n[I 17:01:31.519 NotebookApp] KernelRestarter: restarting kernel (3/5)\nInvalid argument (tcp_address.cpp:161)\n[W 17:01:32.804 NotebookApp] Timeout waiting for kernel_info reply from facafdda-93a2-4286-abb5-490274d63739\n[I 17:01:34.544 NotebookApp] KernelRestarter: restarting kernel (4/5)\nWARNING:root:kernel facafdda-93a2-4286-abb5-490274d63739 restarted\nInvalid argument (tcp_address.cpp:161)\n[W 17:01:37.579 NotebookApp] KernelRestarter: restart failed\n[W 17:01:37.580 NotebookApp] Kernel facafdda-93a2-4286-abb5-490274d63739 died, removing from map.\nERROR:root:kernel facafdda-93a2-4286-abb5-490274d63739 restarted failed!\n[W 17:01:37.597 NotebookApp] Kernel deleted before session\n[W 17:01:37.601 NotebookApp] 410 DELETE /api/sessions/1937b7bf-1c9c-49d4-b4fd-eff419172f84 (127.0.0.1) 7.00ms referer=ht\ntp://localhost:8888/notebooks/Untitled.ipynb\n\n```\n I suspect that libzmq has some issues in the pseudo-linux context. Getting to the bottom of that is probably the key. For instance, can you run the pyzmq tests:\n\n```\nnosetests -vsx zmq.tests\n```\n\nand see what you get?\n\nIt's possible that you will need to build libzmq from source to get it to properly detect its environment, and also possible that it will need patches to run.\n I got\n\n```\nroot@localhost:~# nosetests -vsx zmq.tests\nTest timer expired, indicates test failure ... SKIP: security requires libzmq to be linked against libsodium\nTest timer expired, indicates test success ... SKIP: security requires libzmq to be linked against libsodium\ntest_blacklist (zmq.tests.test_auth.TestIOLoopAuthentication) ... SKIP: security requires libzmq to be linked against libsodium\ntest_curve_allow_any (zmq.tests.test_auth.TestIOLoopAuthentication) ... SKIP: security requires libzmq to be linked against libsodium\ntest_curve_configured_server (zmq.tests.test_auth.TestIOLoopAuthentication) ... SKIP: security requires libzmq to be linked against libsodium\ntest_curve_unconfigured_server (zmq.tests.test_auth.TestIOLoopAuthentication) ... SKIP: security requires libzmq to be linked against libsodium\ntest_none (zmq.tests.test_auth.TestIOLoopAuthentication) ... SKIP: security requires libzmq to be linked against libsodium\ntest_null (zmq.tests.test_auth.TestIOLoopAuthentication) ... SKIP: security requires libzmq to be linked against libsodium\ntest_plain_bogus_credentials (zmq.tests.test_auth.TestIOLoopAuthentication) ... SKIP: security requires libzmq to be linked against libsodium\ntest_plain_configured_server (zmq.tests.test_auth.TestIOLoopAuthentication) ... SKIP: security requires libzmq to be linked against libsodium\ntest_plain_unconfigured_server (zmq.tests.test_auth.TestIOLoopAuthentication) ... SKIP: security requires libzmq to be linked against libsodium\ntest_whitelist (zmq.tests.test_auth.TestIOLoopAuthentication) ... SKIP: security requires libzmq to be linked against libsodium\nthreaded auth - Blacklist ... SKIP: security requires libzmq to be linked against libsodium\nthreaded auth - CURVE ... SKIP: security requires libzmq to be linked against libsodium\nthreaded auth - NULL ... SKIP: security requires libzmq to be linked against libsodium\nthreaded auth - PLAIN ... SKIP: security requires libzmq to be linked against libsodium\nthreaded auth - Whitelist ... SKIP: security requires libzmq to be linked against libsodium\ntest_zmq_bind (zmq.tests.test_cffi_backend.TestCFFIBackend) ... SKIP: CFFI not available\ntest_zmq_bind_connect (zmq.tests.test_cffi_backend.TestCFFIBackend) ... SKIP: CFFI not available\ntest_zmq_ctx_new_destroy (zmq.tests.test_cffi_backend.TestCFFIBackend) ... SKIP: CFFI not available\ntest_zmq_getsockopt (zmq.tests.test_cffi_backend.TestCFFIBackend) ... SKIP: CFFI not available\ntest_zmq_msg_data (zmq.tests.test_cffi_backend.TestCFFIBackend) ... SKIP: CFFI not available\ntest_zmq_msg_init_close (zmq.tests.test_cffi_backend.TestCFFIBackend) ... SKIP: CFFI not available\ntest_zmq_msg_init_data (zmq.tests.test_cffi_backend.TestCFFIBackend) ... SKIP: CFFI not available\ntest_zmq_msg_init_size (zmq.tests.test_cffi_backend.TestCFFIBackend) ... SKIP: CFFI not available\ntest_zmq_poll (zmq.tests.test_cffi_backend.TestCFFIBackend) ... SKIP: CFFI not available\ntest_zmq_recv (zmq.tests.test_cffi_backend.TestCFFIBackend) ... SKIP: CFFI not available\ntest_zmq_send (zmq.tests.test_cffi_backend.TestCFFIBackend) ... SKIP: CFFI not available\ntest_zmq_setsockopt (zmq.tests.test_cffi_backend.TestCFFIBackend) ... SKIP: CFFI not available\ntest_zmq_sleep (zmq.tests.test_cffi_backend.TestCFFIBackend) ... SKIP: CFFI not available\ntest_zmq_socket_open_close (zmq.tests.test_cffi_backend.TestCFFIBackend) ... SKIP: CFFI not available\ntest_zmq_stopwatch_functions (zmq.tests.test_cffi_backend.TestCFFIBackend) ... SKIP: CFFI not available\ntest_zmq_version_info (zmq.tests.test_cffi_backend.TestCFFIBackend) ... SKIP: CFFI not available\ntest_changed_in_all (zmq.tests.test_constants.TestConstants) ... ok\ntest_duplicate_all (zmq.tests.test_constants.TestConstants) ... ok\ntest_duplicate_changed (zmq.tests.test_constants.TestConstants) ... ok\ntest_new (zmq.tests.test_constants.TestConstants) ... ok\ntest_no_negative_constants (zmq.tests.test_constants.TestConstants) ... ok\ntest_removed (zmq.tests.test_constants.TestConstants) ... ok\ntest_undefined_constants (zmq.tests.test_constants.TestConstants) ... ok\ntest_context_manager (zmq.tests.test_context.TestContext) ... ok\ntest_copy (zmq.tests.test_context.TestContext) ... ok\ntest_ctx_opts (zmq.tests.test_context.TestContext) ... ok\nctx.destroy should succeed when cyclic ref prevents gc ... ok\nContext.destroy should close sockets ... ok\nContext.destroy should set linger on closing sockets ... Invalid argument (tcp_address.cpp:161)\nAborted (core dumped)\n```\n\nNext, I will try to build libzmq from source.\nThanks.\n @minrk @kozo2 You may already be aware of this resource, but I'll pass it along as an FYI. There is an [\"unofficial\" binaries for Python Packages website](http://www.lfd.uci.edu/~gohlke/pythonlibs/) maintained by Christoph Gohlke, Laboratory for Fluorescence Dynamics, University of California, Irvine. I don't know if this resource will be helpful for Ubuntu on Windows, but may be helpful when working with Windows. There's a ZeroMQ binary towards the end of the home page.\n @willingc thanks, yes, that's useful for the Windows side, but here I think we want _linux_ binaries, which we are currently getting from `apt`. These are meant to Just Work\u2122, but apparently don't, so I'm guessing that perhaps running the zeromq configure & build on the machine may detect something that the binary assumed incorrectly at build time.\n @minrk I agree. FYI. I did a quick scan of the Microsoft blog post comments and the [Microsoft issue tracker](https://github.com/Microsoft/BashOnWindows/issues/134). It looks like socket support is a known issue/area that needs improvement.\n Thanks for finding that, @willingc!\n Hi all. I just built Libzmq in this context to get to the meat of the error. I've attached my test-suite log:\n[test-suite.txt](https://github.com/jupyter/notebook/files/243913/test-suite.txt)\n\nIt appears that line 186 of /src/tcp_address.cpp is causing the error. \nIn particular, this is the code which is causing an invalid argument error. See **[getifaddrs](https://github.com/Microsoft/BashOnWindows/issues/308)**.\n\n```\n#elif ((defined ZMQ_HAVE_LINUX || defined ZMQ_HAVE_FREEBSD ||\\\n    defined ZMQ_HAVE_OSX || defined ZMQ_HAVE_OPENBSD ||\\\n    defined ZMQ_HAVE_QNXNTO || defined ZMQ_HAVE_NETBSD ||\\\n    defined ZMQ_HAVE_DRAGONFLY || defined ZMQ_HAVE_GNU)\\\n    && defined ZMQ_HAVE_IFADDRS)\n\n#include <ifaddrs.h>\n\n//  On these platforms, network interface name can be queried\n//  using getifaddrs function.\nint zmq::tcp_address_t::resolve_nic_name (const char *nic_, bool ipv6_, bool is_src_)\n{\n    //  Get the addresses.\n    ifaddrs *ifa = NULL;\n    const int rc = getifaddrs (&ifa);\n    errno_assert (rc == 0);\n    zmq_assert (ifa != NULL);\n\n    //  Find the corresponding network interface.\n    bool found = false;\n    for (ifaddrs *ifp = ifa; ifp != NULL; ifp = ifp->ifa_next) {\n        if (ifp->ifa_addr == NULL)\n            continue;\n\n        const int family = ifp->ifa_addr->sa_family;\n        if ((family == AF_INET || (ipv6_ && family == AF_INET6))\n        && !strcmp (nic_, ifp->ifa_name)) {\n            if (is_src_)\n                memcpy (&source_address, ifp->ifa_addr,\n                        (family == AF_INET) ? sizeof (struct sockaddr_in)\n                                            : sizeof (struct sockaddr_in6));\n            else\n                memcpy (&address, ifp->ifa_addr,\n                        (family == AF_INET) ? sizeof (struct sockaddr_in)\n                                            : sizeof (struct sockaddr_in6));\n            found = true;\n            break;\n        }\n    }\n\n    //  Clean-up;\n    freeifaddrs (ifa);\n\n    if (!found) {\n        errno = ENODEV;\n        return -1;\n    }\n    return 0;\n}\n```\n @MadcowD Great job tracking the error down.\n For what it's worth, Bash on Windows does not currently expose any network interfaces.  Networking is available, but no information is exposed about the underlying physical (or virtual) hardware; not even a loopback device.\n @willingc How do I get Bash to recognize pyzmq?\n\nI've the same problem. Have any one of you solved it yet?\n @adonese If you could provide a bit more detail, it will assist us in helping you.\n- What is your operating system? \n- How have you tried to install pyzmq?\n- What version of the notebook are you trying to install?\n- Any additional information that you think we may find useful.\n\nThanks!\n Sorry I thought this issue is in Bash on Ubuntu on Windows page :) \nI'm using Bash on Ubuntu on Windows.\nI've tried:\n`apt-get install libzmq3-dev`\n`pip uninstall pyzmq`\n`pip install --no-use-wheel -v pyzmq`\n\nNone of them have actually helped me. Regarding the unofficial Python packages, I just didn't how do I get Bash to recognize Windows' `pyzmq`. I'm using Jupyter notebook 4.2.1, the latest version I believe.\n Hi @adonese, Hmm...I've checked around a bit since I actually don't have access to a Bash on Ubuntu on Windows system. It looks like this issue on the Bash on Windows issue tracker has some promise https://github.com/Microsoft/BashOnWindows/issues/185\n\nIf you find one of those work for you, please drop us a note here. Good luck!\n @adonese -- take a look at the link @willingc posted; a bunch of us have worked out the fix there.\n\n@willingc FYI: If you're interested in trying out Bash on Ubuntu on Windows (aka \"WSL\"), I believe you can get a free VM from modern.ie:\n\nhttps://developer.microsoft.com/en-us/microsoft-edge/tools/vms/\n\nDownload the latest \"Preview\" VM; older ones don't support WSL yet.  Its license expires after a month or a few months or so, but you're allowed to download a new VM when your current one expires.  It doesn't come with WSL preinstalled; you have to run through its install process.  Maybe not worth it, but FYI it's an option.\n @aseering Thanks for passing along the info and for finding the solution :cake:\n\nClosing issue.\n\n### Resolution\n\nSee Bash on Windows issue tracker https://github.com/Microsoft/BashOnWindows/issues/185\n In case people are wondering how to get it working using `jupyter` installed via `pip`, here's a fix (crossposted from\nhttps://github.com/Microsoft/BashOnWindows/issues/185#issuecomment-238470680)\n\n``` sh\npip uninstall pyzmq\nsudo add-apt-repository ppa:aseering/wsl\nsudo apt-get update\nsudo apt-get install libzmq3 libzmq3-dev\nexport LD_LIBRARY_PATH=/usr/lib/x86_64-linux-gnu\npip install --no-use-wheel -v pyzmq\npip install jupyter\n```\n @gglanzani Thanks for telling me that information, but it core-dumped like\n\n```\nroot@DESKTOP-6KMUMSV:~/notebooks# jupyter-notebook\n[I 00:57:37.620 NotebookApp] Serving notebooks from local directory: /root/notebooks\n[I 00:57:37.621 NotebookApp] 0 active kernels\n[I 00:57:37.621 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/\n[I 00:57:37.621 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[I 00:57:53.602 NotebookApp] 302 GET / (127.0.0.1) 0.69ms\n[W 00:57:58.778 NotebookApp] 404 GET /nbextensions/widgets/notebook/js/extension.js?v=20160811005737 (127.0.0.1) 8.52ms\nreferer=http://localhost:8888/notebooks/Untitled.ipynb\nSegmentation fault (core dumped)\nroot@DESKTOP-6KMUMSV:~/notebooks#\n```\n @kozo2 Are you sure it has nothing to do with the missing `nbextension`? (the 404 at the end?)\n\nIt's working properly for me + 2 other that commented on the BOW repo (see link above)\n I don't think there's any way that a missing nbextension could lead to a segfault. I won't say it's impossible, but it would be a really bizarre cause.\n @takluyver I can't argue with you :)\n@kozo2 How did you install `jupyter`? Simply `pip install jupyter`? I'm running off a virtual env and as an unpriviled user (you are running under `/root/notebooks`, probably as `root`), so that might contribute\n @gglanzani \nThanks for telling me that (virtualenv).\nBy following your (virtualenv) advice (after adding a user),  I succeeded running Jupyter (in Ubuntu on Windows) from Windows.\n\nIt seems `nbextension` is irrelevant to the segmentation fault .\n @gglanzani  @aseering , I am also having problems with running Jupyter notebook from my bash shell on WSL. I'd prefer to get it working in WSL/bash rather than trying to use virtualbox/vagrant, etc. Please help!!\n\nI am able to bring up my Jupyter notebook, but as soon as I tried to run even the most basic notebook, my connection fails. Looks like something to do with zeromq or the Python versions.\n\n**Error message from the Jupyter console:**\n[I 19:58:32.647 NotebookApp] KernelRestarter: restarting kernel (1/5)\nWARNING:root:kernel 5c0f6900-1bcc-40bd-bcd6-a60efd458664 restarted\nInvalid argument (bundled/zeromq/src/tcp_address.cpp:190)\n[I 19:58:38.748 NotebookApp] KernelRestarter: restarting kernel (1/5)\nWARNING:root:kernel 5c0f6900-1bcc-40bd-bcd6-a60efd458664 restarted\nInvalid argument (bundled/zeromq/src/tcp_address.cpp:190)\n\nSurface Pro 3. Using Windows Subsystem for Linux (WSL). Windows 10\n\nroot@mypc:/mnt/c/Users/myid/mylinux# python --version   Python 2.7.6\nroot@mypc:/mnt/c/Users/myid/mylinux# pip --version  pip 1.5.4 from /usr/lib/python2.7/dist-packages (python 2.7)\nroot@mypc:/mnt/c/Users/myid/mylinux# jupyter --version   4.2.0\nroot@mypc:/mnt/c/Users/myid/mylinux# python\nPython 2.7.6 (default, Jun 22 2015, 17:58:13)\n[GCC 4.8.2] on linux2\n\n> > > import sys\n> > > print sys.version_info\n> > > sys.version_info(major=2, minor=7, micro=6, releaselevel='final', serial=0)\n\nI did execute the below code, but even after that I am getting the same issues:\npip uninstall pyzmq  ## didn't find this\nsudo add-apt-repository ppa:aseering/wsl\nsudo apt-get update\nsudo apt-get install libzmq3 libzmq3-dev\nexport LD_LIBRARY_PATH=/usr/lib/x86_64-linux-gnu\npip install --no-use-wheel -v pyzmq\npip install jupyter\n\nNote:  *\\* This is the way I originally installed Python/pip/ Jupyter**\nsudo apt-get install python-pip python-dev python-matplotlib\nexport TF_BINARY_URL=https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.10.0-cp27-none-linux_x86_64.whl\nsudo pip install --upgrade $TF_BINARY_URL\nsudo pip install jupyter Pillow\n\nThanks!\n Hi @HemanK -- it sounds like the `pyzmq` Python library must be using a version of `libzmq` other than the one in my PPA.  I'm not on an Ubuntu or WSL machine right at the moment, but in order to track down what's going wrong the first step would be to find where pyzmq got installed on your computer's filesystem (usually in a Python `site-packages` directory somewhere).  Then, look in that directory for all `.so` files.  Then run `ldd` on each of the `.so` files; that will print out the list of libraries that the specified file is linking against.  One or more of them will be linking against some version of libzmq; the question is, what version of libzmq?  My assumption is that it's not the version of libzmq that's in the PPA, but, why not?  (The answer to that should become apparent given the location of the libzmq library that is actually being used by pyzmq on your machine.)\n Hio @aseeing, Thanks for your quick response. For some reason I was having problems posting to GitHub yesterday. Not sure what was going on. It doesn't look like I have pyzmq Python library, at least not that I can locate. In fact here are all the files of the pattern _mq._, and there are very few  of those:\n<img width=\"421\" asrc=\"https://cloud.githubusercontent.com/assets/4811866/19627020/0b22eadc-990c-11e6-83e2-6d0a0fb2e2fb.png\">\n Hi @aseering ,  root@mypc:/mnt/c/Users/myid/mylinux/tf-tutorial# find /usr $HOME -name _mq._\n/usr/include/zmq.h\n/usr/include/zmq.hpp\n/usr/lib/x86_64-linux-gnu/libzmq.a\n/usr/lib/x86_64-linux-gnu/libzmq.so\n/usr/lib/x86_64-linux-gnu/libzmq.so.3\n/usr/lib/x86_64-linux-gnu/libzmq.so.3.1.0\n/usr/lib/x86_64-linux-gnu/pkgconfig/libzmq.pc\n/usr/local/lib/python2.7/dist-packages/zmq/backend/cython/libzmq.pxd\n/usr/local/lib/python2.7/dist-packages/zmq/include/zmq.h\n/usr/local/lib/python2.7/dist-packages/zmq/libzmq.so\n/usr/share/man/man7/zmq.7.gz. \nroot@mypc:/mnt/c/Users/myid/mylinux/tf-tutorial#ou\nroot@mypc:/mnt/c/Users/myid/mylinux/tf-tutorial# find /usr $HOME -name *mq.so\n/usr/lib/x86_64-linux-gnu/libzmq.so\n/usr/local/lib/python2.7/dist-packages/zmq/libzmq.so\nroot@mypc:/mnt/c/Users/myid/mylinux/tf-tutorial#\n\nand here is the result of ldd  \nroot@mypc:/mnt/c/Users/myid/mylinux/tf-tutorial# ldd /usr/local/lib/python2.7/dist-packages/zmq/libzmq.so\n        linux-vdso.so.1 =>  (0x00007fffdf564000)\n        librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f87108d0000)\n        libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f87105c0000)\n        libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f8710390000)\n        libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f8710170000)\n        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f870fda0000)\n        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f870fa80\n        /lib64/ld-linux-x86-64.so.2 (0x00007f8710e00000)\nroot@mypc:/mnt/c/Users/myid/mylinux/tf-tutorial#\nroot@mypc:/mnt/c/Users/myid/mylinux/tf-tutorial# ldd /usr/lib/x86_64-linux-gnu/libzmq.so\n        linux-vdso.so.1 =>  (0x00007fffc5c4e000)\n        libpgm-5.1.so.0 => /usr/lib/x86_64-linux-gnu/libpgm-5.1.so.0 (0x00007faff62b0000)\n        librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007faff60a0000)  \n        libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007faff5e70000)\n        libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007faff5b60000)\n        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007faff5790000)\n        libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007faff5560000)\n        libm.so.6 \n=> /lib/x86_64-linux-gnu/libm.so.6 (0x00007faff5250000)\n        /lib64/ld-linux-x86-64.so.2 (0x00007faff6800000)\n\nSo the libzmq.so files are in /usr/lib/x86_64-linux-gnu and /usr/local/python2.7/deist-packages/zmq. I wonder if I am missing some packages and whether I should try to reinstall bash  on Windows\nand Tensorflow. Also, when I installed Windows Subsystem for Linux (WSL), I used default user (root), rather than creating a userid. Not sure if that would have installed some python packages in some  path that is not visible from within Jupyter.\n\nAny suggestions?\n\nThanks!\n Hi @HemanK -- you said that you ran `pip install --no-use-wheel -v pyzmq`.  That installs `pyzmq`.  So you do have it somewhere.  I assume it's the `zmq` directory inside `dist-packages` that you've located above -- Python packages sometimes omit the \"py\" prefix when they install on disk because, well, it's in the Python packages directory; labeling it as \"py\"-something is somewhat redundant...\n\nAnyway, I do see something interesting in the list of files above:  There's a `libzmq.so` in the system library directory (`/usr/lib/x86_64-linux-gnu/libzmq.so`); that's the one that my package is supposed to override.  However, there's also one inside the Python \"zmq\" package (`/usr/local/lib/python2.7/dist-packages/zmq/libzmq.so`).  I don't know exactly where that version of the file is coming from but I bet it still has this bug.\n\nPerhaps someone from the Jupyter project ( @minrk @willingc ? ) could comment -- are y'all now bundling your own version of libzmq?  If so, would you consider pulling in a newer version from the libzmq project that contains the fix to this issue?  Or, if you don't want to upgrade, you could backport [the patch](https://github.com/zeromq/libzmq/commit/b1e2b87f0f6d507b9af7221e06d9dcc9dbab55a8); as patches go, this one is very simple.\n Hi @aseering , I can see only object that starts with pyz_. It is the pyzmq_ egg-info: I am not very familiar with how that works... Will wait for feedback from you or @minrk or @willingc \n\nroot@mypc:/mnt/c/Users/myid/mylinux/tf-tutorial# find /usr $HOME -name pyz*\n\n/usr/local/lib/python2.7/dist-packages/pyzmq-16.0.0-py2.7.egg-info\n\nroot@mypc:/mnt/c/Users/myid/mylinux/tf-tutorial# cd /usr/local/lib/python2.7/dist-packages/pyzmq-*\n\nroot@mypc:/usr/local/lib/python2.7/dist-packages/pyzmq-16.0.0-py2.7.egg-info# ls -ltr\ntotal 20\n-rw-r--r-- 1 root staff  1196 Oct 20 19:18 PKG-INFO\n-rw-r--r-- 1 root staff     4 Oct 20 19:18 top_level.txt\n-rw-r--r-- 1 root staff     1 Oct 20 19:18 not-zip-safe\n-rw-r--r-- 1 root staff     1 Oct 20 19:18 dependency_links.txt\n-rw-r--r-- 1 root staff 14265 Oct 20 19:18 SOURCES.txt\n\nroot@mypc:/usr/local/lib/python2.7/dist-packages/pyzmq-16.0.0-py2.7.egg-info# view SOURCES.txt\n\nThanks!\n Same issue described; error is as follows:\n\n```\n[W 02:58:06.950 NotebookApp] Notebook demo.ipynb is not trusted\n[I 02:58:12.352 NotebookApp] Kernel started: 33e41df4-6c89-4d5e-aefb-00b5f8fe742d\nInvalid argument (src/tcp_address.cpp:172)\n[I 02:58:15.352 NotebookApp] KernelRestarter: restarting kernel (1/5)\nInvalid argument (src/tcp_address.cpp:172)\n[I 02:58:18.421 NotebookApp] KernelRestarter: restarting kernel (2/5)\nInvalid argument (src/tcp_address.cpp:172)\n[I 02:58:21.476 NotebookApp] KernelRestarter: restarting kernel (3/5)\nInvalid argument (src/tcp_address.cpp:172)\n[W 02:58:22.372 NotebookApp] Timeout waiting for kernel_info reply from 33e41df4-6c89-4d5e-aefb-00b5f8fe742d\n[I 02:58:24.536 NotebookApp] KernelRestarter: restarting kernel (4/5)\nWARNING:root:kernel 33e41df4-6c89-4d5e-aefb-00b5f8fe742d restarted\nInvalid argument (src/tcp_address.cpp:172)\n[W 02:58:27.597 NotebookApp] KernelRestarter: restart failed\n[W 02:58:27.599 NotebookApp] Kernel 33e41df4-6c89-4d5e-aefb-00b5f8fe742d died, removing from map.\nERROR:root:kernel 33e41df4-6c89-4d5e-aefb-00b5f8fe742d restarted failed!\n[W 02:58:27.764 NotebookApp] Kernel deleted before session\n[W 02:58:27.765 NotebookApp] 410 DELETE /api/sessions/7a6490bf-e8eb-4427-96c3-124867ee503e (127.0.0.1) 2.50ms referer=http://localhost:8888/notebooks/demo.ipynb\n```\n\nSystem Information:\n\n```\n$ uname -a\nLinux DESKTOP-AKK2IRO 3.4.0+ #1 PREEMPT Thu Aug 1 17:06:05 CST 2013 x86_64 x86_64 x86_64 GNU/Linux\n$ cat /etc/lsb-release\nDISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=14.04\nDISTRIB_CODENAME=trusty\nDISTRIB_DESCRIPTION=\"Ubuntu 14.04.5 LTS\"\n```\n\nI am running jupyter notebook on Ubuntu on Windows. Python installation is the default from Anaconda2-4.2.0-Linux-x86_64.sh, and I am using the jupyter-notebook app that comes preinstalled with anaconda2. \n Hi @aseering @HemanK @ebridge2,\n\nI'm traveling at the moment so I don't have access to a Windows system. I will have access over the weekend and will try to replicate or troubleshoot. \n\nThanks.\n\ncc @minrk @takluyver\n Can you try a manual download and install of pyzmq:\n\n``` bash\nwget https://pypi.io/packages/source/p/pyzmq/pyzmq-16.0.0.tar.gz\ntar -xzf pyzmq-16.0.0.tar.gz\ncd pyzmq-16.0.0\npython setup.py install --zmq=/usr/lib\n```\n\nand share the complete output?\n Hi @minrk , I had some issues with my laptop and have to get a replacement laptop from my office this week, so I it may take me sometime to get everything setup again and to resume my testing. In the meanwhile I installed CNTK (Microsoft Cognitive Toolkit for Deep Learning, which is similar to Tensorflow) and got it working quickly on my Windows laptop. That installation was using Anaconda, Python 3.4  and Jupyter. Hope to compare Tensorflow and CNTK once I get Tensor flow also working later. So look forward to getting Tensor Flow installed and working within the next couple of weeks.\n\nThanks!\n @aseering @HemanK : FWIW, RE:\n\n> However, there's also one inside the Python \"zmq\" package (/usr/local/lib/python2.7/dist-packages/zmq/libzmq.so)\n\nThis will happen if `pip` can't find the _system_ `libzmq.so` -- it will build it's own.\n @tildebyte -- what you describe would be correct for a source package, but pyzmq is distributed on PyPI as a binary package by default.\n @aseering I hear you, but `pip` built it's own lib when I ran `pip install --no-use-wheel -v pyzmq` ... Maybe something wierd on my system?\n @minrk - I followed your instructions from https://github.com/jupyter/notebook/issues/1331#issuecomment-256923422 and I'm seeing the exact same result as the OP (although with the slightly different line number of ``Invalid argument (bundled/zeromq/src/tcp_address.cpp:190)``, so it *is* using the installed pyzmq, I presume).  Or did you want the output of the pyzmq build process?\r\n\r\nEDIT: I eventually got this to work by manually building a patched version of pyzmq with a fix from Microsoft/BashOnWindows#185 For what it's worth, I'm guessing (haven't checked recently) that WSL has worked around this issue in the latest [Insider build](https://insider.windows.com/). @aseering Do you have confirmation that this is the case?  My situation is identical to @HemanK 's and I've thought about switching over to the Insider channel to see if the updates to WSL resolve issues like this, but value the reliability of a more stable build for my main machine. A quick verification that this works better on the latest Insider Build would be all the push I need to switch.  Thanks for all the support that you've been providing on this issue! @TheNathanielWatkins -- glad I could help!  I can confirm that Ubuntu's stock Notebook package now works properly without my patch.  I tested on what is currently the latest Insider build (14986).\r\n\r\nWe're told that the relevant change will be released to stable Windows as part of the Creators release in a few months.\r\n\r\nI haven't tested with other Jupyter Notebook versions, but I would expect them to work as well.  If you want to test yourself, you could download the \"Preview\" VM [from Microsoft](https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/) and test there.  The VM is based on a slightly older Insider build; you might need to update it.  (Which you can probably do through Windows Update, but I haven't actually tried...) Wow!  Thank you @aseering.  You're definitely my internet hero of 01/05/17. Took a while to get switched over to the Insider Preview (why do they make us wait 24 hours to switch?) and re-setup, but now that it's up, everything seems to be working perfectly now.  Combined with a BROWSER hack (detailed [here](http://stackoverflow.com/questions/41404536/why-is-bash-wsl-acting-like-a-webbrowser/41452614#41452614), I can now seemlessly run Jupyter in my Windows native Chrome. Hi,\r\nDoes anybody know how we can use matplotlib (inline) on Jupyter? My kernel dies when I am using this package. I am using WSL. I know it does not support graphical applications officially. But I was able to use Xming. Now, my problem is I can have anaconda and Jupyter on my chrome to run my codes, but when I am trying to plot something, my python kernel dies.\r\n\r\nNima Hi @nimasasa -- for what it's worth, matplotlib works fine for me.  That said, I'm using a recent [Insider Build](http://insider.windows.com) of Windows despite its potential bugs, because its support for Linux features is so much better. @nimasasa Check that your versions are up to date too.\r\n\r\n`jupyter notebook --debug` will give additional output.  @aseering and @willingc thanks for your responses. I am currently using the updated windows (but not the insider build -- unfortunately cant use it on my work PC) and my notebook is 4.2.3. If you haven't already done this, try running `%matplotlib inline` in a cell before plotting.","Awesome! There is still a PR to backport btw.\n Another fix that can make a big difference with slow kernels: Fix the notebook ignoring cell executions while a kernel is starting by implementing a queue for kernel messages.\n @jasongrout I meant to mention that one, but somehow failed to. Added. Thanks for the reminder!\n Thanks for the notes! Should be good to go.\n Looks good @minrk. Thanks everyone!\n","I think we may need to change this more. I'm not sure about having a duplicate of the most recent changelog on the front page, especially since I didn't realize until now (after I've cut the 4.2 beta) that I had two places to add the same info for every release. I also don't really know how to have something like a link to a release announcement in docs when the release announcement doesn't exist yet.\n\n@willingc what do you think we should do about the what's new copy on the index for 4.2?\n @minrk I think what prompted the \"What's new\" on the index page was the upgrade questions when 4.1 was released. I think it is probably better going forward to remove the \"What's new\" from the index page. Instead, we could:\n1. add release upgrade commands to the release notes document\n2. add a link to the blog post (announcement) in the README. It would then be captured in version control but wouldn't need to happen before the release since it's not part of the formal docs.\n\n@minrk What do you think?\n That sounds like a good plan. Do you want to make those changes? I can close this one.\n @minrk I made the changes as a PR against your branch.\n @willingc, isn't it 4am there??\n","We deliberately disallow navigation upwards from the current directory, as a simple way to limit what can be accessed through the notebook web server. On Unix, if you really want it to show everything, you can run it from root, but on Windows there is no single root. I guess you could make a custom content manager that makes a virtual root directory containing the drive letters.\n I guess this is for security reasons?  Any chance you can provide a switch that would remove this restriction, which IMO doesn't make much sense for strictly local use?\n It is, sort of. Even running it locally, someone who can log in to your computer (e.g. over SSH), they can connect to your notebook server if you don't use a password. This is not that uncommon - the machine I'm using here at work has SSH running and several other user accounts. It's not a really good security measure, because someone who can connect to the notebook server can start a kernel and do anything, but it raises the barrier a bit.\n\nAs I described, there is a way to serve all folders, we just didn't consider Windows drive letters when designing that. I don't think any of the core developers use Windows as their main system, so that's not a big surprise. I gave what I think would be the easiest way to implement it within the current framework. It's probably not going to be high priority for the core devs, though.\n As you mentioned yourself, once one can access to your notebook server all bets are off (`os.system(\"rm -rf /\")` anyone?), while not being able to move to all folders is a real annoyance.\n\nI'm not familiar at all with the security model but wouldn't it be much more secure, for local usage only (one notebook process, one server) for `jupyter notebook` to default to generating a random password to only allow a single notebook process to connect to the server?\n Right, it's a security speedbump, not a wall. Again, there is a way to effectively disable it, it's just insufficient on Windows because of the way it handles the filesystem.\n\nYes, the random password would be more secure, and it's something I want to work on, but somehow I haven't got round to it... _He typed at 7.20pm, trying to clear the steady flow of emails before going home_ ;-)\n A pity this will not be fixed, mounting your desktop to another disk (hdd instead of ssd) means, no saving to desktop for this guy...","Try:\n\n```\nconda install ipyparallel\n```\n\nto make sure you have the IPython parallel package that provides `ipcontroller`.\n","Indeed, should be fixed by #1338. Thanks for testing!\n","Not exactly, because the kernel, where your code runs, doesn't know about the notebook document. You can display some Javascript code that will trigger the download as HTML action, but that's kind of a hack.\n\nIf you want to make an HTML copy every time you save a notebook, you could do that with a [save hook](http://jupyter-notebook.readthedocs.org/en/latest/extending/savehooks.html).\n @takluyver I think another way maybe use the `nbconvert`? \n\nBut I didn't find the implementation of it in this repo, I can only trace it to `MenuBar.prototype._nbconvert`\n\nhttps://github.com/jupyter/notebook/blob/41d6da235cbf3bcf6d7f818e11a066e0fd12ff8b/notebook/static/notebook/js/menubar.js#L70\n Yes, you can use nbconvert to convert a notebook file to HTML.\n\nNbconvert lives in another repo: https://github.com/jupyter/nbconvert\n Here's a link to the nbconvert and HTML section of the documentation for your convenience: https://nbconvert.readthedocs.org/en/latest/usage.html#default-output-format-html\n @willwhitney @takluyver Thanks! Actually I have read these. The problem as I said, is that I want to know exactly how `notebook` use it, so I can re-use the code to convert the notebook in cells, for automation. \n\nThe doc at https://nbconvert.readthedocs.org/en/latest/nbconvert_library.html is not very easy to understand.\n\nSo far I have traced to this link (https://github.com/jupyter/notebook/blob/41d6da235cbf3bcf6d7f818e11a066e0fd12ff8b/notebook/static/notebook/js/menubar.js#L70), \n\nand I can't find anything in `notebook` about `HTMLExporter`.\nhttps://github.com/jupyter/notebook/search?utf8=%E2%9C%93&q=HTMLExporter\n\nCould you give me more clues? Thanks!\n @takluyver @willingc \nIt's half done. The code is this:\n\n```\nfrom nbconvert import HTMLExporter\nimport codecs\nimport nbformat\nexporter = HTMLExporter()\noutput_notebook = nbformat.read('file_format.ipynb', as_version=4)\noutput, resources = exporter.from_notebook_node(output_notebook)\ncodecs.open('test.html', 'w', encoding='utf-8').write(output)\n```\n\nI leart it from https://github.com/paulgb/runipy\n","+1\n","cc @ellisonbg @bollwyvl on whether template_path should be added to the metadata spec.\n\nAs an escape hatch, server extensions can already extend template paths at load time, just not in a declarative way in this metadata.\n > As an escape hatch, server extensions can already extend template paths at load time\n\nDo you mean explicitly altering the `NotebookApp`'s `template_file_path` in `load_jupyter_server_extension`?\n Or perhaps, more devilishly:\n\n``` python\n# my_serverextension/__init__.py\nimport os.path import join, dirname\nfrom notebook.base.handlers import IPythonHandler\nfrom notebook.utils import url_path_join\n\n\nclass MyServerExtensionHandler(IPythonHandler):\n    def get(self):\n        self.finish(self.render_template(\"my_serverextension/index.html\"\n                                         **self.application.settings))\n\n\ndef load_jupyter_server_extension(nb_app):\n    base_url = nb_app.web_app.settings[\"base_url\"]\n\n    nb_app.web_app.settings[\"jinja2_env\"].loader.searchpath += [\n        join(dirname(__file__), \"templates\")\n    ]\n\n    nb_app.web_app.add_handlers(\".*$\", [\n        (url_path_join(base_url, \"my_serverextension\"),\n            MyServerExtensionHandler),\n        ])\n```\n\nthis assumes a structure like:\n\n``` shell\n- my_serverextension/\n  - __init__.py\n  - templates/\n    - my_serverextension/\n      - index.html\n```\n\nThis will not _overload_ the base templates, so if you are trying to change, say, `notebook`, that won't work. However, if you are adding rendered html handlers, it will work fine.\n\nI don't know if adding it to the metadata is a feasible idea, as we don't actually interrogate the modules at runtime. We'd need a new configuration place for it, I guess.\n\nFurther, there is the ever-tricky question of ordering: 4.2 stores the server extensions as a dict, so your extension basically has to be ready to handle whatever comes your way.\n Thanks @bollwyvl for the example. Ok, so I need to alter `nb_app.web_app.settings[\"jinja2_env\"].loader.searchpath` rather than just `nbapp.template_path`.\n\n> Further, there is the ever-tricky question of ordering\n\nI'm not sure in what case this would matter - is this a problem for extending existing templates?\n > > Further, there is the ever-tricky question of ordering\n> \n> I'm not sure in what case this would matter - is this a problem for extending existing templates?\n\nWell if two server extensions changed the template path... who wins? if they both overload `notebook.html`, they can't know which one will actually resolve. It will probably stable-ish, for a given user, but still pretty non-deterministic.\n\nSo basically, overloading html templates used in the base NotebookApp are not that good a way to overload parts of the application, as so much of the work happens client-side. Good-neighbor namespacing should be a lot more stable, for custom views: with the namespacing, it's very easy to reuse the upstream templates in their normal location... so you could create a custom notebook endpoint,\n\nhttp://localhost:8888/my-notebooks/Untitled.ipynb\n\nthat worked like the base environment. Not that bad a work-around.\n Ah, gotcha. Well, since for the moment I'm not actually trying to overload anything, just provide new rendering handlers, the simple add-extra-directories-to-search-path works fine for me :smile: \n","migrated session.js, point to the fact that the gulpfile does not ut the js files in the right place.\n this seem to be broken on 2.x because jsonschema doe not get functools32...\n Add ability to build Typescript docs.\n\n```\nYeah, no, we cannot use gulp-typedocs, it has no option to exclude\nexternal d.ts files, so we would be docummenting jquery, CodeMirror,\nunderscore... and no we cannot output the docs in `docs/` because\ntypedocs complain it does not seem to be a typescript documentation\nfolder.\n```\n I am going to punch typescript in the face, and I am going to punch it hard. \n I think we're going to have to start a programmer therapy course.\n > I think we're going to have to start a programmer therapy course.\n\nYep. I'm doing Python to relax. Though once you have types, it is mentally much less exhausting to reason about the code. And it  revealed one potential bug:\n\n```\nvar browser= (function() {\n        if (typeof navigator === 'undefined') {\n            // navigator undefined in node\n            return 'None';\n        }\n        var N= navigator.appName, ua= navigator.userAgent, tem;\n        var M= ua.match(/(opera|chrome|safari|firefox|msie)\\/?\\s*(\\.?\\d+(\\.\\d+)*)/i);\n        if (M && (tem= ua.match(/version\\/([\\.\\d]+)/i)) !== null) M[2]= tem[1];\n        M= M? [M[1], M[2]]: [N, navigator.appVersion,'-?'];\n        return M;\n    })();\n```\n\nRoughly: unstable type cannot find satisfying type for return value.\n Ping @ellisonbg \n :)\n\nOn Tue, Jun 9, 2015 at 4:18 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Ping @ellisonbg https://github.com/ellisonbg\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/134#issuecomment-110530285.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","I wasn't planning on backporting those. I figured jupyter-js-services was targeting 5.0 as a baseline. Since we've already cut the beta, I'd probably rather not backport them now, unless there's a big reason to have jupyter-js-services running against 4.x.\n Other applications are trying to use `jupyter-js-services` beside JupyterLab, is my concern.\n Are those the only patches needed?\n Yes.\n Looks like they depend on #1206, too. I can do those, since they still apply cleanly.\n Backported.\n Thank you sir!\n Can you test jupyter-js-services against 4.x now to verify that it's enough?\n Was about to say that ;)\n `13 passing (9s)`  :tada:\n \ud83c\udf70 \n","cc @jdfreder this problem does not occur in 4.2.0b1.\n @SylvainCorlay you should be able to call keyboard manager \"register_events\" on the dialog's root element to avoid Jupyter event processing while the user has it focused.\n @jdfreder do you think we need to do this now in ipywidgets?\n It is weird that we would need to do that. Is there a reason why the notebook would register events at the global document level rather than the notebook container?\n @SylvainCorlay we already do in in ipywidgets for widget areas.\n\nRegarding the global event listener, I don't remember why it evolved to that, but there was a reason at the time.  Changing it to non-document level would likely break many edge cases.\n It broke between 4.2.0b1 and 5dev so something has changed.\n The only reason it appears to have broke is because the event wasn't being used yet.  Now that it's being used, other users will have to go through the register_events mechanism.\n Looks like the clipboard module is not entirely respecting the register_events (enable/disable state) of the keyboard manager.  I'm not sure why it still works for internal dialogs, but I think it has something to do with edit mode remaining enabled.\n Also, if I am understanding this correctly, all of this type of mess goes\naway in JupyterLab with the CSS scoped keyboard shortcuts. Also putting the\nkeyboard events on the document, rather than just the notebook div is\nrequired because of some subtle points about how browsers manage these\nthings. I think one of the issues is what happens to focus (and the\nresulting keyboard events) when DOM elements are removed. We tried to get\nby without doing it at the top level but were unable in both the notebook\nand JupyterLab\n\nOn Tue, Apr 12, 2016 at 10:44 AM, Jonathan Frederic <\nnotifications@github.com> wrote:\n\n> Reopened #1341 https://github.com/jupyter/notebook/issues/1341.\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1341#event-624534210\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","\ud83d\udc4d \n Arg, the test failures seem unrelated.\n Looks OK to me. We were already checking it on paste, but it makes sense to do it on copy as well.\n\nI've just restarted one of the failing test jobs to see if it still fails. It didn't sound like anything related to this, but it was the same failure between Python versions, which makes it seem like something real.\n It's not related to this PR, but it is a real failure. The only thing I've tracked down is that casperjs is 1.1.0-beta5 in the last success, and 1.1.0 where it's failing.\n\nI have [reproduced the failure](https://travis-ci.org/minrk/notebook/jobs/122752949) with current master.\n I opened #1348 to pin casper to the last known-good version, in case that's really the issue.\n Merging, since the failures aren't related to this PR, and with #1348 in, master should still pass.\n Thanks!\n Thank you for looking into this @minrk ! \n\n@takluyver yeah, there was a dialog with a text area that was designed to be copied from in ipywidgets that wasn't working.  Paste was though ;)\n","I think we already went down that road on the ML a few years back, the answer was IIRC:\n\n> Yes it exists, it's called a programming language.\n\nIf you really want that, you should likely use function and control flow, then loop over the results /parameters you like. \n\nComment cells is simple `if condition`, out of order execution is calling simply writing then calling a function. \n\nIf you want to create mass reports, you can use things like https://github.com/takluyver/nbparameterise, and/or write frontends extensions that make this easier.\n Thanks for your suggestions @Carreau \ud83d\udc4d \n\nI like your quote :) and I agree that one could use very basic functions and control flow to achieve similar results. However, there's a subtle difference in what is proposed as opposed to mere relying on programming language. Many good programmers use smart editors, don't they? This is exactly what I am looking for. Extracting patterns of cell executions can be done with some simple machine learning technique which, if integrated with a nicer user interface, would be a helpful feature for users who are working on a multi-purpose notebook or running various experiments within a single notebook.\n\nAn example of very basic interface would be something like this:\n\n```\nSet of exec. cells most frequently used\n1-2-3-5-7-10 - [click here to execute this sequence] [click here to name this sequence]\n1-2-3-5-7-11 - [click here to execute this sequence] [click here to name this sequence]\n1-2-4-5-7-10 - [click here to execute this sequence] [click here to name this sequence]\n1-2-4-5-7-11 - [click here to execute this sequence] [click here to name this sequence]\n```\n\nThe final implementation could be way more elegant than this. \n\nIf it's too much of an overhead or adds up more complexity, I'd also be inclined to use programming features instead because essentially it only adds up 2 more variables to the notebook. But, I think it'd be nice to see, more cleaner and way much easier to manage if this was learned automatically as we no longer need 2 `if conditions` in each of the cells that depend on it. \n\nI hope this clarifies the need further. Let me know what you think. \n yes, I see what you mean, the issues is that this does not scale to offline execution of notebook, \nand in case where you repeat the 1-2-4-5 pattern, then you (likely?) want to extract that into a step which you want to reuse between notebooks. Which is ... a python module.\n\nI think that there are much more basic step that we could teach people, like roughly 1/8 I would of our user don't know that Shift-Enter execute a cell, and click the \"play\" button everytime in the toolbar. \n\nI don't have statistics, but how many know they can: \n- use widgets\n- run a cell in place \n- use a widget to update a parameter\n- rename multiple variables ? \n\nAnd the machine learning trick could be pushed much further : `mylist[len(mylist)-3:len(mylist)]` is a typical things to improve. \n\n```\nmylist = f():\nfor x in things:\n   mylist.append(x)\n```\n\nIs also regularly seen. \nAll this can be experimented with with notebook extensions, but have low-chace of making it in the core directly. \n\nI would look at https://github.com/jupyter-incubator/contentmanagement that try to solve some of these issues. \n","Error resolved by using\n\n```\npip install jsonschema\n```\n\ninstead of conda install.\n That sounds like a problem with the conda packaging of jsonschema and/or functools32. But also, if you have previously pip install-ed something over a conda installed package, it can corrupt the conda package even in other environments, because conda hard links files across environments to save space.\n I have the same issue and after \r\n`pip install jsonschema`\r\ni get this\r\n\r\n> Requirement already satisfied: jsonschema in ./anaconda/lib/python2.7/site-packages\r\n\r\nI tried to uninstall notebook and install it again but nothing changes.\r\n\r\n`ImportError: No module named _version\r\n\r\n    Jupyter notebook format depends on the jsonschema package:\r\n    \r\n        https://pypi.python.org/pypi/jsonschema\r\n    \r\n    Please install it first.` I resolved the issue with\r\n`pip install -U jsonschema`","IIRC this only shows up when the browser adds the scroll bar to the\ndiv/page. Try opening it with a notebook that is small and doesn't show the\nscroll bar. Not sure to fix that...\n\nOn Tue, Apr 12, 2016 at 2:46 PM, Cameron Oelsen notifications@github.com\nwrote:\n\n> As pointed out by @Phyks https://github.com/Phyks in #1293\n> https://github.com/jupyter/notebook/pull/1293, there seems to be a\n> slight misalignment between the notebook document and the Notebook's\n> toolbar shown below:\n> \n> [image: group]\n> https://cloud.githubusercontent.com/assets/6437976/14476548/39767120-00bd-11e6-9666-2eb3488f1645.png\n> \n> Is there an easy way to fix this with CSS in the notebook @minrk\n> https://github.com/minrk?\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1345\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Scrollbar makes sense, especially since the offset looks like ~50% of the scrollbar width. Not sure what's causing it, though.\n I can verify that the scrollbar is the culprit.\n\nScrollbar:\n\n![image](https://cloud.githubusercontent.com/assets/512354/18521457/09905304-7a61-11e6-8c50-5f40147319a3.png)\n\nNo scrollbar: \n\n![image](https://cloud.githubusercontent.com/assets/512354/18521441/fbc6d7f2-7a60-11e6-9da3-25a8b06727c6.png)\n\n@cameronoelsen A simple solution would be to add the following CSS rule:\n\n``` css\n::-webkit-scrollbar {\n    display: none;\n}\n```\n\nThe compromise is that it will hide the scrollbar (and it will only work in Webkit-based browsers like Safari and Chrome).\n @gnestor Thanks for that! Not sure if we wanted to add that to the CSS @ellisonbg I think that the scrollbar is probably more important to the user than this small design detail.\n Ya, I can't think of any other solution...\n","If a local file has the same name as a module that something else is relying on, you can generally expect problems. In this case, however, that import was unnecessary, and if you upgrade setuptools, the issue should disappear.\n","Should preact be a runtime dependency instead of a dev dependency?\n > Should preact be a runtime dependency instead of a dev dependency?\n\nLikely yes, reflect of `--save-dev`.\n reflex*,\n\nand it will be bundled in the min.js that will generated by webpack and be shipped, so not actually not sure. \n ping @jdfreder , you're the one that know the most things about notebook test. Test seem to not run at all with this PR, but I can't seem to figure out the reason why, as the same step works flawlessly locally.\n\nAny ideas ?\n BTW, this now works, and can now use es6. \n What do you mean by \"can use es6\"?\n > What do you mean by \"can use es6\"?\n\nSorry, was unclear, you can use es6 feature in all the js files (typically `notebook/static/*/js/*.js`), webpack use the a babel loader when minifying, so will understand `let`, `const`, `import {} from ...` etc. There is no extra steps.\n Ah - I didn't realize we were using babel. Are we still targeting ES5 runtimes?\n > Are we still targeting ES5 runtimes?\n\nYes. We can use something else than babel, I guess we can use a typescript loader as well, I have no issues with that. \n\nOne thing I did not include is the ability to use `.jsx`, but that should be pretty easy to add too if we decide to do so. \n I don't think we need to use the TS loader at this point. We've been doing okay just shipping the built `.js` files for our code which is written in TS.\n Also, I think (but could be wrong) that preact has an `h()` function, which can reduce the boilerplate needed by `createElement`.\n > Also, I think (but could be wrong) that preact has an h() function, which can reduce the boilerplate needed by createElement.\n\nYes it has a `h()` function, though they don't really explain how/why to use it, expect using `/** @jsx h */` in `jsx` files, and it looks mostly as `s/createElement/h/g`, but I might be missing something. \n Ok, merging to get people to complain. \n","It works! Merging now, so Travis can be green again.\n","Thanks !\n","We have the following around line 2100.\n\n``` javascript\n    Notebook.prototype.ensure_extension = function (name) {\n        if (!name.match(/\\.ipynb$/)) {\n            name = name + \".ipynb\";\n        }\n        return name;\n    };\n```\n So, do we merge this as is? It seems substantially more complex to do the right thing when adding the extension, so perhaps it should be left to another PR.\n We know the extension used to load the file, so we should be able to ensure the extension doesn't change.\n ensure_extension should preserve the existing extension, rather than enforcing .ipynb unconditionally\n","Might be worth pinging tornado about it, too.\n Pinged tornado (tornadoweb/tornado#1690): they don't think a fix belongs in tornado, but they did suggest a simple workaround:\n\n``` python\nmimetypes.add_type('text/css', '.css')\n```\n\nAs they said, changing global state isn't great, but if global state is just plain wrong...\n","Fixed.\n Yeah ! Thanks !\n","cc @SylvainCorlay   \n I'm going to mark this WIP, since currently the `lab.html` template already provides a polyfill from bower among other things.  I'm going to clean this up to be self contained.\n So, I shouldn't hit the green button yet?\n Updated, see original comment.\n @SylvainCorlay, I finally got requirejs to play nicely with WebPack here:  88f9332.\n @minrk, updated.    \n Looks okay to me. I'll let @SylvainCorlay merge in case he sees anything else.\n \ud83d\udc4d \n","Thanks!\n","Your notebook require a kernel named `vpythonkernel`:\n\n```\n\"kernelspec\": {\n    \"display_name\": \"VPython\",\n    \"name\": \"vpythonkernel\",\n    \"language\": \"python\"\n  },\n```\n\nThough your kernelspec install on binder is `vpython`:\n\n```\n\"kernelspec\": {\n    \"display_name\": \"VPython\",\n    \"name\": \"vpython\",\n    \"language\": \"python\"\n  },\n```\n\nThus it is normal for the notebook to not find the kernel. Thus we pop-up the dialog, and make a \"best guess\" based on the language.\n\nMake sure the kernel names match and all  should be allright. This is likely due to your local install of the kernel having a different name, so uninstalling the kernelspec and reinstalling it should work.\n Many thanks for finding this error on my part!\n > Many thanks for finding this error on my part!\n\nNo problem, tell us if it works, so that we can close the issue !\n It indeed does work. Thanks.\n\nOn Fri, Apr 15, 2016 at 11:29 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Many thanks for finding this error on my part!\n> \n> No problem, tell us if it works, so that we can close the issue !\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1354#issuecomment-210555802\n","We had many long discussions about whether to follow XDG for config on Linux, and ultimately decided against it. There was a period of time when IPython followed XDG, but people found it more confusing that the location varied across platforms (XDG is inappropriate on OS X and Windows, for instance), and reverted back to consistently using `~/.ipython`. Following that experience, we decided against adopting XDG for config in Jupyter. We do follow XDG for data/runtime files.\n\nIf you prefer XDG behavior, you can set:\n\n```\nJUPYTER_CONFIG_DIR=${XDG_CONFIG_HOME:-$HOME/.config}/jupyter\n```\n\nand it should work how you like.\n Thanks for the detailed answer. I have added an export as you advise.\n","I think you are right that we should add `rendered_html` everywhere we render a mimebundle. In terms of undesirable padding, if that comes up, it suggests the padding should be moved to other specifications (e.g. `.cell > .rendered_html` or something similar.\n Is it realistic to fix this for 5.0? I can work on this! I'm not sure I understand the issue though. How can I reproduce? Bumping for now as @gnestor isn't sure what it entails.","This could be added to the custom 404 page, depending on the URL prefix.\n","cc @ellisonbg @jasongrout @minrk       \n Mostly makes sense. I think we do want it to be identifiably a notebook, so maybe add a `type: str` field.\n Yep, sounds fair.  This would result in the current version of `jupyter-js-services` being the officially supported version for notebook 4.2, and then start relying on this and other new features.\n Sounds good.\n I updated the API to include a path, to mirror the contents API and to allow a console to establish an initial cwd.\n On second thought, I renamed it to directory, so the unique name is `os.path.join(directory, name)`.\n Upon third thought, it makes more sense for the `path` to be one attribute, and the path to a console is the cwd of the kernel with a file \"name\" being the name of the console session, cleaning up the implementation itself greatly.\n Initial cwd? Because the cwd can change...\n\nOn Sat, Apr 16, 2016, 08:13 Steven Silvester notifications@github.com\nwrote:\n\n> Upon third thought, it makes more sense for the path to be one attribute,\n> and the path to a console is the cwd of the kernel with a file \"name\" being\n> the name of the console session, cleaning up the implementation itself\n> greatly.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1358#issuecomment-210800270\n This is the cwd that the kernel starts up in, you can change it by sending a `POST`.\n er, `PATCH`\n","Ran locally and the current session still works, still need to update tests.\n @minrk, this is ready to go.  \n @parente, this affects kernel gateway and would require a minor change.  TLDR: instead of `{ notebook: path }` we have `{ path, type: 'notebook' }`.\n Optionally, we could allow both APIs until 5.0 is released.\n Although, master _is_ 5.0.\n Updated to allow the previous API to still work, since there is no harm in doing so.\n Updated.\n FWIW, I intend to support both the old and new API in `jupyter-js-services` as a shim.\n (And this PR preserves the old API on the server as well).\n @blink1073 Is this ready to merge?\n I'm not sure if we had consensus on this.  cf https://github.com/jupyter/jupyterlab/issues/260\n @minrk, thoughts on moving forward with this.  It looks like we really do want a way to distinguish session types, and not use a \"fake\" file extension for consoles.\n I think this is solid, and makes sense, and we should do it. Merging so we can see how it goes.\n This will not help JupyterLab unless we backport it to 4.2, or provide a custom `SessionManager` in JupyterLab.\n It would be 4.3 since 4.2 is already out. I'd rather it get some tested use before it goes in a notebook release. How do we go about doing that?\n I can make a PR in services that explicitly uses this API, and make sure it passes against notebook master.  Then, once 4.3 is released, we bump the minimum version of the notebook for services and JLab.\n","A new release should be coming up - see Julian/jsonschema#231\n let's give it 24h. and if not make a temporary workaround on our side otherwise it makes all PRs agains notebook fail.\n Having the same problem on nbgrader, too :-(\n 2.5.1 is out. Closing.\n","@minrk do we want this for 4.2.1, or is it a bit too significant?\n Let's do it!\n","Thanks @wasade for catching and fixing this error. :cookie:\n Thanks for the new release :)\nOn Apr 15, 2016 6:03 PM, \"Carol Willing\" notifications@github.com wrote:\n\n> Merged #1361 https://github.com/jupyter/notebook/pull/1361.\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1361#event-629693477\n","Good idea, and OMG I'm feeling like I'm back using windows 98 and I'm customizing the color of my windows toolbar.\n @Carreau [GUIs of the past](http://www.guidebookgallery.org/screenshots/full) Somewhat amusing how many I've used. Favorite is still [happy mac](http://www.guidebookgallery.org/screenshots/macos11) which just edges out my [childhood friend](http://www.guidebookgallery.org/screenshots/apple2desktop11)\n Those tiles do look bizarrely ugly...\n\nI don't immediately see anything that would require us to change our installation instructions.\n","I swear, I keep fixing this bug, and it keeps coming back.\n > I swear, I keep fixing this bug, and it keeps coming back.\n\nOne of your clones is faulty. \n \"I swear, I keep fixing this bug, and it keeps coming back.\"\n\nI need a t-shirt that says this :crying_cat_face: \n","From the docs:\n\n> The base URL to be used throughout the document for relative URL addresses.\n\nI don't think that's the same thing. That would be different for every page, and would be the full URL of every page. It does not appear to be the base URL of the application as a whole.\n","A notebook has only one language associated with it, so it is generally assumed that setting the language of a notebook should only happen once or twice, not continuously. If you keep switching back and forth, that means that at any given time, much of your notebook is invalid, since the notebook itself is associated with a single language. I know there are people who would like multi-language notebooks, where the notebook can associated different cells with different languages ([Beaker](http://beakernotebook.com), which is based on Jupyter, adds this feature), but this is not the model Jupyter has at the moment. We have been discussing if/how/when we should be adding it, though.\n\nRight now, your best bet is probably to use rpy2 and its `%%R` magic to use Python and R at the same time, or to keep separate R and Python notebooks. The nice thing about `%%R` is that it lets you easily move data back and forth between the two interpreters.\n I see, thank you for giving me a clear direction! I've heard about Beaker but have no idea until now that they have multi-language feature. I've been using `%%R`and it's great, but a lack of tab completion making my work less productive.\n\nI'm going to close this issue now.\n I agree with @minrk that using the `%%R` is probably what you want to use.\n\nBut, to be a bit more precise on what Min said: A notebook only has one \"kernel\" associated with it. One could create a hybrid kernel that has two (or more) languages that the kernel could route instructions to, and keep the context. It isn't that difficult to create a custom kernel, even with IPython-inspired \"magics\". For example, see https://github.com/Calysto/metakernel\n\nA Beaker-like metakernel would probably be fairly easy to implement. Can't wait for summer!\n Thank you @dsblank, I'll try to explore that as well in more detail.\n And from yet another angle: we do hope to enable tab completions in cell magics at some point, but refactoring the completion machinery is a pretty big job, and once we've made it possible to provide completions for magics, magic authors will still need to actually provide them.\n IMHO, changing the kernel on the fly is more intuitive.  I'm very excited when Jupyter added it and has spread the news to my colleagues. This means I can investigate without facing tools limitation.\n\nIf we still do it within cell magics, I see that Jupyter R kernel already has tab completion. Is it possible that we use `%load_ext` to open a new R kernel as an alternative, and get tab completion in R everytime there is an R magic?\n","Are you installing from git? When I `pip install notebook` on a machine without npm, I get 4.2.0 and it never tries to run npm.\n closing as this is likely due to an install from source that likely then does require npm, bower ...\n","@jonsedar Thanks for the detailed issue request. Perhaps @bollwyvl or @damianavila who have done a lot of work with presentations may have some insights.\n I have never gotten the reveal pdf feature to work reliably, inside or\noutside the ipython/Jupyter integration... There's always something that\nbreaks utterly, doesn't show up, gets repeated. It's a tricky problem, and\npart of what pushed me to build nbprsent and nbbrowserpdf (work in\nprogress).\n\nOn 15:46, Mon, Apr 18, 2016 Carol Willing notifications@github.com wrote:\n\n> @jonsedar https://github.com/jonsedar Thanks for the detailed issue\n> request. Perhaps @bollwyvl https://github.com/bollwyvl or @damianavila\n> https://github.com/damianavila who have done a lot of work with\n> presentations may have some insights.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1368#issuecomment-211547676\n","The kernel won't be involved in this, it's all up to the browser. Rendering markdown only puts the `img` element on the page. It's up to the browser and its caching to determine whether the file should be redownloaded or not. Refreshing the page may be required, but restarting the kernel never will be. I'm not sure if there is a way to put a reference to the same image URL on the same page multiple times and have it re-fetch each time. It's possible our cache headers set by the server when requesting the image could accomplish this.\n I also ran into this issue as I prefer to render matplotlib images and import them into the notebook with `<img src=\"...\">` tags.\n\nThere is a solution to adjust the caching. In this case the server is set-up to prevent caching for files with arguments to their http request. \n\nIn notebook.files.handlers.py you can make the edit:\n\n``` python\n        if self.get_argument(\"download\", False):\n            self.set_header('Content-Disposition','attachment; filename=\"%s\"' % name)\n\n        if \"?\" in name:\n            self.set_header(\"Cache-Control\", \"no-cache; no-store\")\n\n        # get mimetype from filename\n```\n\nnow access images which you want to force refreshing with\n\nas `![\"title\"](image.png?arg)` or `<img src=\"image.png?arg\">`\n\nand the webserver will prevent caching.\n\nIn general, the browser should prevent caching if you vary the arguments anyway, but I was finding that firefox at least would still cache them, so I added this fix. I was actually going to submit my own bug report to suggest the addition, but here is a good place.\n\nIf this is a reasonable change, It would be nice to insert it to the project.\n Since you made the change have you noticed any adverse affects in it or other workbooks?\nRefreshing the webpage via the browser appears to work for me without needing to terminate the kernel but maybe it would be nice to be able to indicate cells as not to cache if that were possible\n I have not noticed any issues so far, though I'll note that I am using\nnewest Firefox and these issues tend to occur in less compliant browsers.\n\nI agree that some granularity would be nice. Ideally you could hook it into\nthe \"display\" functions to have action not just for the json sent to the\nclients but for the server as well. There would have to be additional\nmetadata in the stored format for this to work and so would be a pretty\nnontrivial change.\n\nI suspect actually that having the image loaded by a json scriptlet that\ninjects the image into the DOM would work as well, (and give some options\nfor bypassing local caching), but that was beyond the scope of this quick\nfix.\n\nOn Fri, Jun 10, 2016 at 6:35 AM, mobcdi notifications@github.com wrote:\n\n> Since you made the change have you noticed any adverse affects in it or\n> other workbooks?\n> Refreshing the webpage via the browser appears to work for me without\n> needing to terminate the kernel but maybe it would be nice to be able to\n> indicate cells as not to cache if that were possible\n> \n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1369#issuecomment-225149799,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AAZQ850PJKtz-dRVjAc5bD8hCaO7yALjks5qKT3mgaJpZM4IKHkp\n> .\n","Magics are IPython specific, not notebook, and are purely python function that takes a string as input and return a python object. There is no need for IPython to include them, you just have to publish a python package that define your function and the load_ipython_extension function. \n\nYou can get inspired by [@bollwyvl's implementation of coffeescript](https://gist.github.com/bollwyvl/de3b4ca8b6ed8bb28f86).\n","Hey @Carreau! We tried to address the issue that you opened. I think this is what you wanted it but if not let us now.\n\nWe are doing this PR at PyData Chicago hack nights.\n Hey ! Thanks @varmas hope you are enjoying PyData Chicago hack nights !\n\nSorry for the delay I'm in europe, I'll make a few inline comments !\n Thanks for the comments, guys!\n\n@varmas: If you want to review the statements made about the `except` clause and docstrings and make the changes yourself, feel free to do so. If you'd like me to work through the review comments with you, let me know and we can try it at the next meeting. Also, the team can help you out virtually if you are OK with that. \ud83c\udf89 \ud83d\udc83 \n woah, what time do you guys start your day!?!\n\n@captainsafia I'll go for it myself, I was a bit careless yesterday. Will of course save it for the next meetup if I can't get this PR successful\n @varmas we are scattered across the globe, so you get reviews 24/7  \ud83c\udf0e\ud83c\udf0d\ud83c\udf0f\n @varmas will you have a chance to finish this one? If not, that's totally fine. We can do the last touches if you are too busy.\n Merging here, will finish up addressing the review in a follow-up PR. Thanks, @varmas!\n Thanks @varmas  and @minrk \n","We've been planning to do this for some time, but hoping for an _official_ extension syntax from CommonMark as the impetus for doing so, rather than the de facto extensions where everybody defines their own markdown dialect, like markdown-it. Right now, markdown-it can _either_ implement CommonMark or have extensions, but the two are mutually exclusive.\n The existence of the CommonMark spec doesn't preclude extensions.\n\nCurrently, the CommonMark people are working on finalizing the spec for the \"basic\" stuff and they don't have time for thinking about extensions, but that doesn't mean that the spec forbids extensions.\nIncidentally, the very [document holding the CommonMark spec](https://github.com/jgm/CommonMark/blob/master/spec.txt) uses an ad-hoc extension for showing Markdown/HTML examples. And that's perfectly fine. There will always be extensions!\n\nAfter the \"basic\" CommonMark spec is completed (it is unclear to me when this is going to happen ... beginning of 2016?), there might be some work on \"official\" extensions (or not). If an \"official\" math extension is made, I'm quite sure it will be the same syntax as we are already using and as pandoc is using since a very long time ago (and probably many other implementations, too).\nTherefore, regardless if there will be an \"official\" math extension or not, we'll be on the safe side if we just keep using what we are already using.\n\nLong story short: we don't have to feel dirty just because we use a (not yet and probably never \"officially authorized\") extension to CommonMark.\n\nAbout an \"official extension syntax\": Do you mean the proposed block syntax with colons? Something like:\n\n```\n::: {some strange attributes}\nI'm text in an\nextension block!\n:::\n```\n\nSure, such a thing might be officially supported in some time (in a few years), but I urge you not to force Jupyter Notebook users to use this syntax for block equations. This would be a huge step backwards for the ease-of-use of the Notebook (not to mention it would break all existing notebooks that use block equations).\n\nComing back to markdown-it: they claim \"100% CommonMark support\", the ease of creating extensions doesn't change anything about that. Just because it's harder to make extensions for commonmark.js doesn't mean one of them is more or less CommonMark compliant. But I'm not saying that markdown-it is the best, if you prefer we can also use the reference implementation commonmark.js (or something entirely different), but then we'll have to use the same hacky work-around as we are using now to get the math extension working. OTOH, it seems that commonmark.js is currently more active than markdown-it.\n\nI don't really care which library gets selected, I'm just suggesting to change to CommonMark without further delay (and of course keeping the math extension that's currently in use).\n The whole purpose of producing a common specification, though, is that Markdown can be interoperable, and not dependent on whatever ad-hoc extensions are implemented in particular libraries and not properly specified. So again, we should wait for CommonMark to specify some kind of syntax for extensions to use, analogous to roles and directives in rst. I know that's annoying, but if it increases the pressure on CommonMark to do that, everyone wins eventually.\n\nWe will probably never force people to switch to the new extension syntax for equations, because that would break existing content. But everything else should go through one extension syntax, even if that's a bit ugly, rather than trying to pick special symbols for each thing to make it concise.\n I'm not suggesting to add new syntax!\n\nI know we were talking about new syntax in #1292, but that's a different issue!\n\nI'm \"just\" suggesting to switch to CommonMark. And the sooner we do that, the better. Deliberately delaying that doesn't help anyone.\n\nDo you not want to switch to CommonMark?\n - Does it break rendering of any content we currently have? E.g. an upgrade of marked at one point stopped `#header` working, which broke some notebooks that previously worked. This could potentially break much more.\n- Does it make it any harder (or easier) to do the fiddling we currently do with math expressions. I suspect it needn't change, because we do them quite separately from the parser, if I recall correctly.\n\nIn principle, I'm fine with switching to Commonmark, but I don't see much advantage to it at this point. As Min mentioned, if there was an official syntax for extension points, that would be a compelling argument to change.\n Thank you for raising this up @mgeier. I'm a fan of commonmark and have been adapting projects to use commonmark compatible parsers and renderers. In particular, commonmark.js or remark. In the notebook we've been using a markdown implementation that _is_ bundled with \"extensions\". For instance, GitHub flavored markdown is supported in the notebook by marked.\n\nAs in agreement as I am with switching to commonmark, there are several costs (the magnitude of which is unknown):\n- How difficult is adapting the MathJax/LaTeX handling to the new parser?\n- What extensions have we been implicitly supporting?\n- How many notebooks will \"break\" after a switch to another parser?\n- How does the parser handle embedded HTML?\n\nThat's likely most of the hesitation to driving forward. People are in agreement that someday we should. It's the maintenance burden we perceive, relative to finishing other work on the project. If you start the investigation @mgeier, with a PR in earnest, we'll be better able to evaluate the switch.\n\nI do agree that making our own markdown cells adhere to a well specced format is paramount to saying that we have a well specced notebook format. Same goes for embedded LaTeX/MathJax.\n Thanks that we can now finally talk about the actual issue instead of bashing CommonMark extensions!\n\nI think most of the concerns raised above reduce to those two points:\n1. cost of implementation (be it proper extensions or ugly work-around hacks)\n2. breakage of existing notebooks\n\nAlthough the magnitude of both is unknown at this time (as @rgbkrk mentioned), I think it's possible to make some predictions:\n- The cost of implementation will not change if we wait\n- If we change later, more notebooks will break (simply because more notebooks will be created in the meantime)\n\nFor me, this is an absolutely compelling argument to switch to CommonMark as soon as possible!\n\nAre there any objections in general?\n > If we change later, more notebooks will break\n\nThe flip side is that when you change something that's going to break some things, it's much easier if there's a compelling advantage that comes with the changes. The 'eat your vegetables' approach - do this because it's the right thing to do, doesn't make us many friends.\n The main argument now is that if CommonMark extensions do happen and we adopt them, then we would be breaking notebooks twice instead of once. To be clear, adopting markdown-it + extensions _is not_ adopting CommonMark, it is adopting yet another markdown dialect defined by a single implementation. That's not to say that I'm opposed to adopting markdown-it, but doing so should mean that we are giving up on the prospect of actual CommonMark extensions in the vaguely near future. Of course, if we stick with CommonMark-derived implementations (as we probably should), the domain of those incompatibilities ought to be confined to the areas affected by extensions, and not basic things like spaces in/around headings, like we've seen in the past.\n @takluyver Do you want to switch to CommonMark or not?\nIf yes, your argument doesn't make any difference if we switch now or later.\nIf no, that's a different story ...\n\nI think switching to CommonMark is enough compelling advantage on its own, we don't need anything else to \"sell\" it. Also, most users won't even see a difference.\n\n@minrk wrote:\n\n> ... if CommonMark extensions do happen and we adopt them, then we would be breaking notebooks twice instead of once.\n\nI don't get it.\nIf we switch now to CommonMark, we should try that the \"extensions\" we were using before don't change their behavior too much. This way, only \"basic\" CommonMark features will break.\nIf there are ever relevant \"official\" extensions (like inline math, block math, tables) and we change to them, there will be possible breakage there.\nBut a single spot will break at most once.\n\nAnd of course there will be breakage if the CommonMark spec changes, which hopefully will happen extremely seldom.\n\nBut really, all this won't be such a big deal. Only some extreme cases will break when switching to CommonMark. And I'm quite sure that if there will ever be a LaTeX-math extension, it will look very similar to what we are using now (i.e. what is used in pandoc).\nI'm not so sure about tables, but I also hope that there won't be too much breakage.\n\n> adopting markdown-it + extensions _is not_ adopting CommonMark, it is adopting yet another markdown dialect defined by a single implementation\n\nTBH, I don't care what JavaScript library will be used, I don't have experience with any of them. I was just mentioning markdown-it because I found it by a quick web search and it seemed to be the only JavaScript library available that provides an API for syntax extensions (and many existing extensions using this API), all other libraries provide \"only\" an API for AST transformations and custom writers. But since the ugly hack for math blocks is already in place, that's probably not such a big problem. The only thing that may be problematic is the implementation of tables, which are not (and won't be) part of \"core\" CommonMark.\n\nmarkdown-it claims to follow the CommonMark spec, so if they are not lying, it _would be_ adopting CommonMark. The existence or non-existence of extensions doesn't change anything about that.\n\n> doing so should mean that we are giving up on the prospect of actual CommonMark extensions in the vaguely near future\n\nAs I said above, potential \"official\" extensions for LaTeX math and tables will very likely be very close to what we're using now. They will probably be less restrictive, but this wouldn't be a backwards-compatibility problem.\n\n> if we stick with CommonMark-derived implementations\n\nI'm not quite sure what you mean by that.\nDo you mean implementations that pass the test suite provided by https://github.com/jgm/CommonMark?\nIf yes, I agree, whatever library we choose should pass all those tests.\n @mgeier Historically, the Jupyter team has been very committed to providing installed users, even those that may be working with edge use cases, backward compatibility and minimal breakage when making changes to the code base.\n\nBreakage now, or in the future, is still breakage for the end user and their organization. As for the implementation costs, there are a number of variables (developer time, support for users experiencing breakage, resource availability within the larger project scope, etc.) that make it difficult to prove with a high degree of certainty that implementing changes now is preferable to waiting.\n\nOverall, I believe that @minrk and @takluyver may simply be saying that their preference is to err on the side of caution when it comes to impacting our end users. \n Just a little update: I haven't found an extensible CommonMark implementation for Python, which I would need for `nbsphinx` (and which would be needed for `nbconvert`, too).\nI hope an implementation will turn up at some point, if not, I guess I'll have to do it ...\n\nUntil then, we can also wait with changing the JavaScript implementation.\n Another argument for switching from marked - the last commit to master was about a year ago.\n","seems okay to me\n","@bomgar Thanks. Here are some security documents about configuring the the server and notebook for security in a production environment:\n- [Notebook Server Security](https://jupyter-notebook.readthedocs.org/en/latest/public_server.html#notebook-server-security)\n- [Security in Jupyter notebooks](https://jupyter-notebook.readthedocs.org/en/latest/security.html)\n- [Running a Public notebook server](https://jupyter-notebook.readthedocs.org/en/latest/public_server.html#running-a-public-notebook-server)\n\nI hope you will find these helpful in illustrating the project's commitment to security importance and flexibility for users facing a variety of situations from closed trusted networks to a public deployment.\n\nThanks!\nCarol\n\ncc/ @minrk @rgbkrk \n > The possibility to run arbitrary code as root via http is a concern even in a cgroup environment.\n\nIn all the [docker-stacks images](https://github.com/jupyter/docker-stacks), the base user is `jovyan`. For the Dockerfile in here, since people almost always have to install additional packages and may have their own user setup we don't change the default user. This is a base image, like other base images.\n","I'm not sure why you're asking here - this is the issue tracker for the Jupyter Notebook. However, out of curiosity, I searched for the term, and here's the first thing that came up:\n\nhttp://stats.stackexchange.com/questions/95391/what-is-the-definition-of-top-n-accuracy\n","I got the same problem with up-to-date MacPorts, with even newer versions:\n\n```\n% pip list | egrep 'notebook|widgets'\nipywidgets (5.1.3)\nnotebook (4.2.0)\nwidgetsnbextension (1.2.2)\n```\n\nUpdate: Just realized, probably the crucial version (according to the OP) is the notebook one, being also at 4.2.0.\n @SylvainCorlay what's the right thing for notebook 4.x to do, here? Right now, the 4.x notebook has a hardcoded bit to load widgets with `find_static_assets()`. However, widgets 5.0 has a warning when this method is called that \"notebook 4.2\" should be used, which is clearly misleading because notebook 4.2 is calling this method. Should notebook 4.2 not be calling this? If so, what should it be calling in its place?\n This seems to be a change to be made in ipywidgets.\nBtw we must release notebook 4.2.1 with the fix #1399 for #1386.\n @SylvainCorlay yes, we'll release 4.2.1 with that fix, but I don't want to release 4.2.1 before we figure this out. Should:\n- `.find_static_assets()` be fixed to not show this message, or\n- notebook 4.2 be updated to use a different bit of code to load the widgets, to avoid the deprecated function\n\n?\n @SylvainCorlay should 4.2 be looking for widgetsnbextension like 5.0 does, or should ipywidgets change its deprecation message to stop indicating that users should upgrade to 4.2 when `find_static_assets` is called, which 4.2 calls? This is the only thing blocking the 4.2.1 release.\n Sorry for the late reply. I spent the last 10h in a plane. I will look at\nit today.\nS.\nOn Jun 1, 2016 11:08 AM, \"Min RK\" notifications@github.com wrote:\n\n> @SylvainCorlay https://github.com/SylvainCorlay should 4.2 be looking\n> for widgetsnbextension like 5.0 does, or should ipywidgets change its\n> deprecation message to stop indicating that users should upgrade to 4.2\n> when find_static_assets is called, which 4.2 calls? This is the only\n> thing blocking the 4.2.1 release.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1377#issuecomment-222935964,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/ACSXFnjfw1behaxcthMbzDVO3mSa02CTks5qHUwegaJpZM4ILlaV\n> .\n @SylvainCorlay no problem, safe travels! I just know you are eager for 4.2.1 to get out, so hopefully we can finish it up soon.\n I think that notebook 4.2 should do the same as 5.0, that is to attempt fist to import widgetsnbextension.\n\nOn another note, I find the code in ipywidgets a bit too complicated!\n In my opinion, `notebook 4.2` should be 5.0. Jupyter project keeps getting confusing and I wasted lots of time to debug my programs and try to understand why things did not work. There are always good reason to break API and a bunch of packages keep breaking API make such a pain. Developers know best about their programs and you though it's easy to adapt but as an regular user, it's not easy at all.\n","Closes https://github.com/jupyter/notebook/issues/1363 I guess ?\n I think we should call @parleur 'Sprint', because he's so good at fixing issues tagged 'Sprint friendly' :-)\n @parleur aka 'Sprint', make also puns in his commits.\n custom.js is also loaded on the `tree` and `edit` pages. In fact, look for any `*main.js`, there may be a few more.\n I am not really sure about the purpose of custom.js, but maybe it would be meaningful to have a single entry point for js injection? \nI mean, knowing there is three (and it's not obvious), I would first check in custom.js from where the script has been called.\n\nSo what about split custom.js in `notebook_custom.js`, `edit_custom.js`, and `tree_custom.js` ? \n > So what about split custom.js in notebook_custom.js, edit_custom.js, and tree_custom.js ?\n\nThese kind of already exists, and they are nbextensions. If you drop a file in `.jupyter/nbextension/` and modify `~/.jupyter/nbconfig/tree.json`, `~/.jupyter/nbconfig/notebook.json`, `~/.jupyter/nbconfig/edit.json` like so:\n\n```\ncat ~/.jupyter/nbconfig/tree.json\n{\n  \"load_extensions\": {\n    \"jupyter_cms/dashboard/main\": true,\n    \"ipyparallel/main\": true,\n    \"assignment_list/main\": true\n  }\n}\n```\n\n(here I have 3 extensions enabled)\n\nYou can tell which extension to enable on which page, independently. And these files and layout is programmatically modifiable, which is better to install automatically multiple extensions. `custom.js` is just an artifact of the past (really we should just get rid of it ), but people are still using it, and it's damned convenient.\n Custom.js is an early escape hatch for a lack of configurability in the frontend. As we add that configurability, the need for custom.js diminishes, but it isn't gone yet. It is my hope that JupyterLab, for instance, will have sufficient configurability and not load custom.js.\n Do we want this in 4.2.1?\n Manually backporting this one, because of the  webpack thing it's unhappy.\nThe backporting tool will mistakenly says this has not been backported.\n","cc @ellisonbg \n I am visiting @aggFTW today - he said that this is reproducible. He will describe steps needed to reproduce. Probably one for @willingc or @minrk \n I tried to reproduce on master, but couldn't. They will provide more details.\n I was able to repro with 4.1 and 4.2. Steps:\n1. Connect from your browser to a remote notebook instance, or to an instance that you can temporarily halt network connectivity to.\n2. Create a notebook.\n3. Remove network connectivity so that your browser cannot talk to the kernel.\n4. Try to execute a cell without network connectivity.\n5. Wait for the `Connection failed` message to appear in the UI. By then, the console should show WebSocket connection to kernel failed and that it's retrying.\n6. Reestablish network connectivity.\n7. Console should say that kernel_connected.\n8. Click OK in `Connection failed` dialogue.\n9. Observe that disconnected icon is still in the status bar and cell is still supposedly executing.\n10. New cell cannot be executed (maybe the frontend thinks the first cell hasn't finished execution and there's no way for the frontend to reconcile the state?)\n11. Refresh your browser as the only way to get out of this state.\n @aggFTW Thanks for the detailed steps to reproduce. I didn't get exactly the same results as you did but what I did get was odd. \n\n@minrk There's some sort of issue here. I ran a notebook server 4.1 on an Ubuntu Digital Ocean instance. I connected from my laptop to the server, created a notebook, and then entered and ran 2 cells. I entered a third cell and before executing I turned off my laptop wifi to simulate a network outage. \n\nI waited quite a while for the client to time out and display Connection failed; yet, it never appeared. What I did finally get was an error icon after I reconnected the wifi. When I executed the third cell this was the output with the third cell being numbered 1:\n\n<img width=\"987\" alt=\"screen shot 2016-05-03 at 9 41 12 pm\" src=\"https://cloud.githubusercontent.com/assets/2680980/15005451/a299f1fa-1179-11e6-9287-6a3d18fbdc0d.png\">\n\nHere's the [pastebin](http://pastebin.com/KVpnXB0f) of the debug console.\n\nI'll play around with it a bit more tomorrow. @aggFTW, would you mind running the process you followed again with `--debug` when starting the notebook server and posting the output? Thanks.\n @willingc thanks for looking at this! I am workiing with @aggFTW today at\nMSFT - let us know if there is anything we can do to help debug this.\n\nOn Tue, May 3, 2016 at 10:02 PM, Carol Willing notifications@github.com\nwrote:\n\n> @aggFTW https://github.com/aggFTW Thanks for the detailed steps to\n> reproduce. I didn't get exactly the same results as you did but what I did\n> get was odd.\n> \n> @minrk https://github.com/minrk There's some sort of issue here. I ran\n> a notebook server 4.1 on an Ubuntu Digital Ocean instance. I connected from\n> my laptop to the server, created a notebook, and then entered and ran 2\n> cells. I entered a third cell and before executing I turned off my laptop\n> wifi to simulate a network outage.\n> \n> I waited quite a while for the client to time out and display Connection\n> failed; yet, it never appeared. What I did finally get was an error icon\n> after I reconnected the wifi. When I executed the third cell this was the\n> output with the third cell being numbered 1:\n> \n> [image: screen shot 2016-05-03 at 9 41 12 pm]\n> https://cloud.githubusercontent.com/assets/2680980/15005451/a299f1fa-1179-11e6-9287-6a3d18fbdc0d.png\n> \n> Here's the pastebin http://pastebin.com/KVpnXB0f of the debug console.\n> \n> I'll play around with it a bit more tomorrow. @aggFTW\n> https://github.com/aggFTW, would you mind running the process you\n> followed again with --debug when starting the notebook server and posting\n> the output? Thanks.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1379#issuecomment-216743450\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Thanks for trying that @willingc!\n\nAbout\n\n> I entered a third cell and before executing I turned off my laptop wifi to simulate a network outage.\n> I waited quite a while for the client to time out and display Connection failed; yet, it never appeared\n\nDid you execute the cell after you simulated the network outage? After executing the cell, it doesn't take too long for the message to appear.\n @aggFTW In an incognito window in Chrome I got essentially your described response. While in a regular window, I got similar response but also got a response that worked as it was supposed to work.\n\nI'll take a look at the logs tomorrow. Feel free to send along any logs that you  may have. Thanks!\n So I ran this with `--debug`, and looking at my Network/Console in my browser.\n\nTimeline:\n- `[D 2016-05-07 01:55:43.855 NotebookApp] 200 GET /notebooks/PySpark/Untitled.ipynb (10.0.0.26) 62.31ms`\n- `[D 2016-05-07 01:55:44.922 NotebookApp] Starting kernel: [u'python', u'-m', u'remotespark.kernels.pysparkkernel.pysparkkernel'...`\n- `[D 2016-05-07 01:55:45.021 NotebookApp] Initializing websocket connection /api/kernels/bf2dcf74-056e-439b-84d1-0de1e6bd95ad/channels`\n- Initial websocket handshake at `Sat, 07 May 2016 01:55:46 GMT` from browser headers\n- From server, see logs:\n\n```\n[D 2016-05-07 01:55:47.288 NotebookApp] Opening websocket /api/kernels/bf2dcf74-056e-439b-84d1-0de1e6bd95ad/channels\n[D 2016-05-07 01:55:47.289 NotebookApp] Connecting to: tcp://127.0.0.1:46299\n[D 2016-05-07 01:55:47.289 NotebookApp] Connecting to: tcp://127.0.0.1:52057\n[D 2016-05-07 01:55:47.290 NotebookApp] Connecting to: tcp://127.0.0.1:33979\n```\n- Manually disabled network and executed cell. Waited for `Error in connection establishment` errors from Console from `WebSocket connection`\n- Enabled network again\n- Reestablished websocket handshake at `Sat, 07 May 2016 01:56:50 GMT` from browser headers\n- From server, see logs:\n\n```\n[D 2016-05-07 01:56:51.545 NotebookApp] Initializing websocket connection /api/kernels/bf2dcf74-056e-439b-84d1-0de1e6bd95ad/channels\n[D 2016-05-07 01:56:51.550 NotebookApp] Opening websocket /api/kernels/bf2dcf74-056e-439b-84d1-0de1e6bd95ad/channels\n[D 2016-05-07 01:56:51.550 NotebookApp] Connecting to: tcp://127.0.0.1:46299\n[D 2016-05-07 01:56:51.551 NotebookApp] Connecting to: tcp://127.0.0.1:52057\n[D 2016-05-07 01:56:51.551 NotebookApp] Connecting to: tcp://127.0.0.1:33979\n```\n\nAfter that, no activity on websockets from the browser (checked network and console). Notebook remains with broken chain icon:\n![a](https://cloud.githubusercontent.com/assets/654204/15089766/4ff2e22e-13c0-11e6-97fd-bb37e481c07d.png)\nand notebook cell appears to be busy and new cells are just queued but not executed:\n![b](https://cloud.githubusercontent.com/assets/654204/15089774/771bbcfe-13c0-11e6-8b27-ed034e8f6d1e.png)\n\nUpon browser refresh, notebook execution is normal.\n\nI hope that's helpful :smile: \n Hi @willingc and @ellisonbg. Any updates on this? How else can we help?\nThanks!\n @minrk Do you have any ideas why a network outage would give this behavior? I can't tell if it's a timing issue or other. \n\ncc @aggFTW \n @aggFTW does it work if you select reconnect from the Kernel menu?\n\n<img width=\"194\" alt=\"screen shot 2016-05-11 at 11 07 11\" src=\"https://cloud.githubusercontent.com/assets/151929/15175864/9fc9b3ee-1768-11e6-8b6b-daa5a198c6a2.png\">\n @minrk No, Kernel -> Reconnect leaves the notebook in the same non-functional state.\n @ellisonbg @minrk @willingc Any updates? :smiley: \n @aggFTW I believe this should be fixed by #1471.\n Thanks @minrk and @aggFTW for resolving the reconnect.\n","Let's continue this on ipython/ipython#8514\n And please don't open issues twice. \n","What browser are you using? It may not work on IE, especially if you're stuck on an older version.\n\nServing on all IP addresses without setting up a password is also a security risk, in case you weren't aware. I'm not sure about Windows network setups, but I would encourage you not to rely on that as a long term solution.\n @takluyver  Hi I've tried Chrome 49 and 50, neither works. I can open the homepage of the notebook, only cannot get the kernel connected. Maybe something todo with zeromq or websockets? \n I'd guess it's websockets that are the issue. Do you have any corporate internet security software? We've certainly had trouble with Sophos before, and I think some other security products can mess with websockets as well.\n @takluyver We have McAfee here... Seems like it's not easy to make it work?\n I don't think McAfee is one we've had problems with.\n\nHave you tried switching between localhost and 127.0.0.1? Sometimes one works but the other doesn't.\n @takluyver Yes I've tried and only by setting ip to my actual internal ip address '10.255.224.54' can I open the notebook homepage. Then I see \n\n```\n'[D 22:38:43.332 NotebookApp] Connecting to: tcp://127.0.0.1:63843\n[I 22:38:43.404 NotebookApp] Kernel started: 60803dd6-f282-461c-8b03-e329df8c3b09' \n```\n\nin debug log.\nTried to edit `jupyter_notebook_config.py` with\n\n```\n# Set the kernel's IP address [default localhost]. If the IP address is\n# something other than localhost, then Consoles on other machines will be able\n# to connect to the Kernel, so be careful!\nc.ConnectionFileMixin.ip = u'10.255.224.54'\n```\n\nBut still no luck...\n @takluyver What about trying `0.0.0.0` as the IP address in addition to localhost or 127.0.0.1?\n I think that IP address needs to be a real one, because the connection file is used to connect as well as to listen. `0.0.0.0` only works when you're listening, if I understand correctly.\n If it helps, my network is forced to use a global proxy, so I cannot change proxy setup as the official docs say about proxy configuration. Also, in any Python scripts running on my PC, I've got to set `os.environ[\"no_proxy\"]=abc.com` so that the scripts can get connected to abc.com. Or else Error 10061.\n Have you configured your browser to bypass the proxy for your own computer?\n @takluyver I think it is worth giving 0.0.0.0 a shot if memory serves me I believe that we have done that with other notebook troubleshooting especially if there is a proxy or firewall. Run it in debug mode and look at the output. \n I'm using Chrome and it's forced to use proxy, no means to bypass it...\nHere are the relevant debug log. My pc ip address is 10.255.224.54\n\n```\n\u03bb jupyter notebook --ip=0.0.0.0 --debug --no-browser\n[D 15:17:38.148 NotebookApp] Searching [u'C:\\\\Users\\\\n3132', 'C:\\\\Users\\\\n3132\\\\.jupyter', 'E:\\\\n3132\\\\Programs\\\\anaconda2\\\\anaconda\\\\etc\\\\jupyter', 'C:\\\\ProgramData\\\\jupyter'] for config files\n[D 15:17:38.148 NotebookApp] Looking for jupyter_config in C:\\ProgramData\\jupyter\n[D 15:17:38.148 NotebookApp] Looking for jupyter_config in E:\\n3132\\Programs\\anaconda2\\anaconda\\etc\\jupyter\n[D 15:17:38.148 NotebookApp] Looking for jupyter_config in C:\\Users\\n3132\\.jupyter\n[D 15:17:38.148 NotebookApp] Looking for jupyter_config in C:\\Users\\n3132\n[D 15:17:38.148 NotebookApp] Looking for jupyter_notebook_config in C:\\ProgramData\\jupyter\n[D 15:17:38.148 NotebookApp] Looking for jupyter_notebook_config in E:\\n3132\\Programs\\anaconda2\\anaconda\\etc\\jupyter\n[D 15:17:38.148 NotebookApp] Looking for jupyter_notebook_config in C:\\Users\\n3132\\.jupyter\n[D 15:17:38.148 NotebookApp] Loaded config file: C:\\Users\\n3132\\.jupyter\\jupyter_notebook_config.py\n[D 15:17:38.158 NotebookApp] Looking for jupyter_notebook_config in C:\\Users\\n3132\n[D 15:17:38.812 NotebookApp] Terminals not available (error was No module named terminado)\n[I 15:17:38.822 NotebookApp] Serving notebooks from local directory: C:\\Users\\n3132\n[I 15:17:38.822 NotebookApp] 0 active kernels\n[I 15:17:38.822 NotebookApp] The Jupyter Notebook is running at: http://0.0.0.0:8888/\n[I 15:17:38.822 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[D 15:17:43.609 NotebookApp] 200 GET /api/sessions?_=1461568544135 (192.168.72.213) 2.00ms\n[D 15:17:43.878 NotebookApp] 200 GET /api/contents?type=directory&_=1461568544136 (192.168.72.213) 263.00ms\n[D 15:17:45.789 NotebookApp] Using contents: services/contents\n[D 15:17:45.842 NotebookApp] 200 GET /notebooks/Untitled.ipynb (192.168.72.213) 54.00ms\n[D 15:17:45.855 NotebookApp] 304 GET /static/components/MathJax/MathJax.js?config=TeX-AMS_HTML-full,Safe&delayStartupUntil=configured (192.168.72.213) 1.00ms\n[D 15:17:45.864 NotebookApp] 304 GET /custom/custom.css (192.168.72.213) 1.00ms\n[D 15:17:45.880 NotebookApp] 304 GET /static/components/MathJax/config/TeX-AMS_HTML-full.js?rev=2.5.3 (192.168.72.213) 1.00ms\n[D 15:17:45.938 NotebookApp] 304 GET /static/components/MathJax/config/Safe.js?rev=2.5.3 (192.168.72.213) 0.00ms\n[D 15:17:46.148 NotebookApp] 200 GET /static/services/contents.js?v=20160425151738 (192.168.72.213) 1.00ms\n[D 15:17:46.160 NotebookApp] 200 GET /custom/custom.js?v=20160425151738 (192.168.72.213) 1.00ms\n[D 15:17:46.176 NotebookApp] 200 GET /api/config/common?_=1461568666027 (192.168.72.213) 1.00ms\n[D 15:17:46.177 NotebookApp] 200 GET /api/config/notebook?_=1461568666026 (192.168.72.213) 1.00ms\n[D 15:17:46.239 NotebookApp] Native kernel (python2) available from E:\\n3132\\Programs\\anaconda2\\anaconda\\lib\\site-packages\\ipykernel\\resources\n[D 15:17:46.250 NotebookApp] Native kernel (python2) available from E:\\n3132\\Programs\\anaconda2\\anaconda\\lib\\site-packages\\ipykernel\\resources\n[D 15:17:46.253 NotebookApp] 304 GET /api/kernelspecs (192.168.72.213) 18.00ms\n[D 15:17:46.282 NotebookApp] 304 GET /static/components/MathJax/jax/output/HTML-CSS/fonts/STIX-Web/fontdata.js?rev=2.5.3 (192.168.72.213) 1.00ms\n[D 15:17:46.296 NotebookApp] 304 GET /static/components/MathJax/extensions/Safe.js?rev=2.5.3 (192.168.72.213) 1.00ms\n[D 15:17:47.002 NotebookApp] 200 GET /api/contents/Untitled.ipynb?type=notebook&_=1461568666028 (192.168.72.213) 704.00ms\n[D 15:17:47.012 NotebookApp] 200 GET /nbextensions/widgets/notebook/js/extension.js?v=20160425151738 (192.168.72.213) 10.00ms\n[D 15:17:47.058 NotebookApp] No kernel name specified, using default kernel\n[D 15:17:47.144 NotebookApp] Native kernel (python2) available from E:\\n3132\\Programs\\anaconda2\\anaconda\\lib\\site-packages\\ipykernel\\resources\n[D 15:17:47.144 NotebookApp] Starting kernel: ['E:\\\\n3132\\\\Programs\\\\anaconda2\\\\anaconda\\\\python.exe', '-m', 'ipykernel', '-f', u'C:\\\\Users\\\\n3132\\\\AppData\\\\Roaming\\\\jupyter\\\\runtime\\\\kernel-0acc5887-2bd6-40de-b3d1-371fe6496768.json']\n[D 15:17:47.154 NotebookApp] Connecting to: tcp://10.255.224.54:56799\n[I 15:17:47.161 NotebookApp] Kernel started: 0acc5887-2bd6-40de-b3d1-371fe6496768\n[D 15:17:47.164 NotebookApp] Kernel args: {'kernel_name': None, 'cwd': u'C:\\\\Users\\\\n3132'}\n[D 15:17:47.164 NotebookApp] 201 POST /api/sessions (192.168.72.213) 107.00ms\n[D 15:17:47.193 NotebookApp] 200 GET /api/contents/Untitled.ipynb/checkpoints?_=1461568666029 (192.168.72.213) 4.00ms\n[D 15:17:47.255 NotebookApp] 200 GET /nbextensions/widgets/notebook/js/widgetarea.js?v=20160425151738 (192.168.72.213) 17.00ms\n[D 15:17:47.272 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/init.js?v=20160425151738 (192.168.72.213) 4.00ms\n[D 15:17:47.344 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/manager.js?v=20160425151738 (192.168.72.213) 2.00ms\n[D 15:17:47.352 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_link.js?v=20160425151738 (192.168.72.213) 5.00ms\n[D 15:17:47.375 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_button.js?v=20160425151738 (192.168.72.213) 10.00ms\n[D 15:17:47.375 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_box.js?v=20160425151738 (192.168.72.213) 0.00ms\n[D 15:17:47.385 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_bool.js?v=20160425151738 (192.168.72.213) 0.00ms\n[D 15:17:47.387 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_image.js?v=20160425151738 (192.168.72.213) 0.00ms\n[D 15:17:47.387 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_int.js?v=20160425151738 (192.168.72.213) 0.00ms\n[D 15:17:47.387 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget.js?v=20160425151738 (192.168.72.213) 0.00ms\n[D 15:17:47.387 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_float.js?v=20160425151738 (192.168.72.213) 0.00ms\n[D 15:17:47.390 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_color.js?v=20160425151738 (192.168.72.213) 1.00ms\n[D 15:17:47.421 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_output.js?v=20160425151738 (192.168.72.213) 0.00ms\n[D 15:17:47.441 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_selection.js?v=20160425151738 (192.168.72.213) 20.00ms\n[D 15:17:47.441 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_string.js?v=20160425151738 (192.168.72.213) 0.00ms\n[D 15:17:47.461 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_selectioncontainer.js?v=20160425151738 (192.168.72.213) 0.00ms\n[D 15:17:47.461 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_controller.js?v=20160425151738 (192.168.72.213) 0.00ms\n[D 15:17:47.473 NotebookApp] 200 GET /static/components/backbone/backbone-min.js?v=20160425151738 (192.168.72.213) 0.00ms\n[D 15:17:47.509 NotebookApp] 304 GET /nbextensions/widgets/widgets/css/widgets.min.css (192.168.72.213) 1.00ms\n```\n @dofine The detailed debug output is helpful.\n\nLet's see if @takluyver can determine the root cause with this additional information. Here's what I'm seeing in the above debug output:\n- no terminado installed\n- 192.168.72.213 for nb server\n- 10.255.224.54 for pc local machine\n- looks like there is a mismatch between C: and E: drive usage\n\n```\nStarting kernel: ['E:\\\\n3132\\\\Programs\\\\anaconda2\\\\anaconda\\\\python.exe', '-m', 'ipykernel', '-f', u'C:\\\\Users\\\\n3132\\\\AppData\\\\Roaming\\\\jupyter\\\\runtime\\\\kernel-0acc5887-2bd6-40de-b3d1-371fe6496768.json']\n```\n\n@takluyver Thoughts? Install/upgrade IPython? Terminado? Review config file settings?\n @willingc Wow, the nb server address is 192.168.72.213? I missed that. That looks like our company proxy server... Open Chrome Dev Tools and I see `Remote Address` is also 192.168.72.213. But really I'm trying to run nb server on my own working PC... \n I think `192.168.72.213` in those logs indicates where the HTTP requests are coming from, so it makes sense that that's the proxy server. I'd guess that the proxy is not smart enough to handle websockets.\n\n@dofine The default when you set up a proxy should be to bypass it for localhost (aka 127.0.0.1), because there's no way that can work through the proxy. E.g. here's the proxy configuration dialog in Firefox - those hosts are excepted by default:\n\n![screenshot from 2016-04-25 10 24 21](https://cloud.githubusercontent.com/assets/327925/14779465/2f15e270-0ad0-11e6-917b-f6f97492c1c7.png)\n\nIIRC, Chrome uses the system proxy config, whereas Firefox has its own settings, so you may be able to configure this in Firefox even if you're locked out of it on Chrome. If you really can't configure it to bypass the proxy at all, even for localhost, and if the proxy can't handle websockets, then you're kind of stuck... the only thing I can think of is to run the notebook in a virtual machine where you would be able to configure proxy exclusions.\n @takluyver Really great and thanks so much!\n Great, did you get it working?\n","Any custom css? I can't seem to reproduce this with 4.2 or master on Safari or Chrome. Do you see it in a private/incognito window?\n\nIf you are installing from a repo, to clear js/css and start from scratch:\n\n```\ngit clean -xfd\npip install -e .\n```\n Hmm, I did all this and still see it on Chrome and Safari. And in an incognito window.\n\nBut I had lots of nbextensions installed - once I disabled all of them the problem went away. Might be widgets related  @jdfreder @SylvainCorlay \n","This would be a bug in CodeMirror's markdown mode, right? That's what determines the highlighting patterns.\n Yep, I can reproduce it on http://codemirror.net/mode/markdown/index.html\n https://github.com/codemirror/CodeMirror/issues/3981\n ok, thanks!\n","What version are you using - this should have been resolved in notebook 4.2.0 by #1002.\n Thats embarrasing, Thank you!\n","Fixed by #1391\n","Is there any traceback with that error? Are both `jupyter.exe` and `jupyter-notebook.exe` present in a folder on %PATH%?\n Thanks for the question.  \n\nYes, jupyter.exe and jupyter-notebook.exe's in the Anaconda2/Scripts folder.\n\nFull error below:\n\n```\nTraceback (most recent call last):\n  File \"C:\\Anaconda2\\Scripts\\jupyter-notebook-script.py\", line 5, in <module>\n    sys.exit(notebook.notebookapp.main())\n  File \"C:\\Anaconda2\\lib\\site-packages\\jupyter_core\\application.py\", line 267, in launch_instance\n    return super(JupyterApp, cls).launch_instance(argv=argv, **kwargs)\n  File \"C:\\Anaconda2\\lib\\site-packages\\traitlets\\config\\application.py\", line 595, in launch_instance\n    app.initialize(argv)\n  File \"<decorator-gen-7>\", line 2, in initialize\n  File \"C:\\Anaconda2\\lib\\site-packages\\traitlets\\config\\application.py\", line 74, in catch_config_error\n    return method(app, *args, **kwargs)\n  File \"C:\\Anaconda2\\lib\\site-packages\\notebook\\notebookapp.py\", line 1017, in initialize\n    super(NotebookApp, self).initialize(argv)\n  File \"<decorator-gen-6>\", line 2, in initialize\n  File \"C:\\Anaconda2\\lib\\site-packages\\traitlets\\config\\application.py\", line 74, in catch_config_error\n    return method(app, *args, **kwargs)\n  File \"C:\\Anaconda2\\lib\\site-packages\\jupyter_core\\application.py\", line 243, in initialize\n    self.migrate_config()\n  File \"C:\\Anaconda2\\lib\\site-packages\\jupyter_core\\application.py\", line 169, in migrate_config\n    migrate()\n  File \"C:\\Anaconda2\\lib\\site-packages\\jupyter_core\\migrate.py\", line 240, in migrate\n    ensure_dir_exists(env['jupyter_config'])\n  File \"C:\\Anaconda2\\lib\\site-packages\\ipython_genutils\\path.py\", line 167, in ensure_dir_exists\n    os.makedirs(path, mode=mode)\n  File \"C:\\Anaconda2\\lib\\os.py\", line 150, in makedirs\n    makedirs(head, mode)\n  File \"C:\\Anaconda2\\lib\\os.py\", line 157, in makedirs\n    mkdir(name, mode)\nWindowsError: [Error 5] Access is denied: 'c:\\\\Users\\\\admin'\n```\n I think it's detecting `C:\\Users\\admin` as your home directory, but you don't have write permissions there, or possibly it doesn't exist. Have you set any environment variables like `HOME` or `HOMEPATH`?\n The `HOME` is set as c:\\users\\admin, but when i look for that folder it does not exist...Should I set to something else?\n\nThanks!\n Cool, that worked by switching the `HOME`.  Thanks man! you are cool\n No problem. Closing this as a configuration issue - I think it's generally safe to assume that $HOME exists.\n","cc @jdfreder, @SylvainCorlay. Previous widget should work with notebook-4.2, right? What did we change here?\n For reference, here is the [documentation for ipywidgets 5.1](https://ipywidgets.readthedocs.org/en/latest/user_install.html)\n\nI wonder if this needs to run now to enable 4.1.1 widgets  for notebook 4.2:\n`jupyter nbextension enable --py widgetsnbextension`\n I did try this: \n\n```\n jupyter nbextension enable --py widgetsnbextension\n```\n\nHad no effect.\n\nI use conda and it might be worth noting that getting this command to run is taking an effort.\n`widgetsnbextension` is not available on conda. It doesn't appear in search results if you do `pip search widgetsnbextension`, but strangely enough this: `pip install widgetsnbextension` works.\n @minrk I am debugging this at the moment, it seems that the code checking for presence of widgets 4.x works but loading the widgets themselves fails.\n\n`[Error: Load timeout for modules: bootstrap,jquery-ui]`\n\nIs this a problem with the webpacking of the notebook?\n @wikiped we are certainly going to fix this issue with 4.x, but in any case updating to widgets 5.0 should fix your issue.\n\n```\npip install ipywidgets==5.0.0\njupyter nbextension enable --py widgetsnbextension\n```\n\nFYI, widgets 5.0 change the way you author custom javascript widgets.\n @SylvainCorlay Thank you. Installed 5.0.0 - problem is solved.\nShall I close this issue?\n No, notebook 4.2 should work with the version of widgets you had earlier. I am trying to fix this right now!\n @wikiped I'm glad that you were able to get it working with ipywidgets 5.0.0. \n I had the same issue after a clean jupyter install in a virtualenv. I upgraded to ipywidets=5.0.0 and I have my widgets again. However, there is still a (misleading) comment in the logs:\n\n``` bash\n$ jupyter notebook\n/home/tvermeir/.pyenv/versions/3.5.1/envs/cce/lib/python3.5/site-packages/widgetsnbextension/__init__.py:30: UserWarning: To use the jupyter-js-widgets nbextension, you'll need to update\n    the Jupyter notebook to version 4.2 or later.\n  the Jupyter notebook to version 4.2 or later.\"\"\")\n\n```\n","I'm unsure, the notebook is supposed to be behind login, so no robot should be able to crawl it.\nShould not be too hard though. \nI guess a no-index nofollow could be good too. Just to avoid indexing potential open notebook on the web.\n Yes no-index is good. It's not to allow crawling but for two things:\n- Because it's a good practice to just be explicit.\n- Because it can be used for example to get the Kubernetes Ingress controller working.\n\nPossibly together, a [`humans.txt`](http://humanstxt.org/) wouldn't be a bad idea for you guys.\n Is this issue still open? I can help. Do you want a  robots.txt file and/or a <meta> tag on the page.html template?\n I'm using Nginx Ingress Controller which doesn't require those files.\n\n`robots.txt` and/or `humans.txt` may help others, or just as a common practice.\n It is. It would be good to add these (possibly not as files, just hardcoded Handlers).\n","There is not, really. The notebook is a tornado application. If you want to embed it in a django site, you would probably need to run an additional tornado server, and then load notebooks in an IFrame. Perhaps there is a better way of running two webservers together than I am not aware of.\n","If it works and is simple, I'm not super concerned about it being the best way to do it. You might want a comment about it, though. Should this be a PR against 4.x, not master, or should master be getting the same patch?\n Yes, I should open this on the 4.2 branch. It seems to work, but I don't know when we broke that.\n It's fine for this to be against master if _both_ 5.0 and 4.2 should have this. But if it's only for 4.2, we should close and reopen against 4.x.\n I think that it is for both. I opened another PR for 4.x though.\n Okay, thanks\n","As someone who is red-green colorblind, that sounds utterly horrifying. ;-)\n Well, that would probably not be on by default, maybe an extension, and the colorscheme is (even for not colorblind) definitively up for discussion.\n\nAlso with currently linked implementation. it even colors the builtins/keyword this way which is horrific.\n Huh, that's a cool idea. It would definitely be neat to try out, though I'd\nbe a bit worried that there would just be too many colors floating around\nand that I still wouldn't notice typos because there's so many colors to\nbegin with.\n\nOn Mon, Jun 8, 2015 at 10:07 AM Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Well, that would probably not be on by default, maybe an extension, and\n> the colorscheme is (even for not colorblind) definitively up for discussion.\n> \n> Also with currently linked implementation. it even colors the\n> builtins/keyword this way which is horrific.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/139#issuecomment-110075518.\n There are some _really_ nice ideas there. I like how it styles code\ncomments. However, I think that for now we have a lot more pressing design\nrelated to to tackle...\n\nOn Mon, Jun 8, 2015 at 10:01 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I came across that : http://brooks.io/syntax-highlight/\n> \n> Which basically highlight the variables name a a function of the hash of\n> their name. Which make detecting typos almost trivial alongvaraiblename\n> would be green-ish and alongvariablename could be red-ish.\n> \n> This seem like it would help a lot for teaching/presenting.\n> \n> @ellisonbg https://github.com/ellisonbg , @jhamrick\n> https://github.com/jhamrick , @fperez https://github.com/fperez\n> thoughts ?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/139.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > There are some _really_ nice ideas there. I like how it styles code\n> comments. However, I think that for now we have a lot more pressing design\n> related to to tackle...\n\nSure that's why I open an issue, to keep track of it in the long term. \nEach of us has a different question on \"pressing\" question, and pushing won't help.\n","Yeah, I have seen this before and we should fix it. Can you add some\nscreenshots to help design review?\n\nOn Tue, Apr 26, 2016 at 2:21 AM, Matthias Geier notifications@github.com\nwrote:\n\n> Currently, the alert class has only margin-bottom (I guess this comes\n> from bootstrap):\n> \n> .alert {\n>     margin-bottom: 18px;\n> }\n> \n> Since most other elements use only margin-top, those alert boxes are much\n> too close to whatever comes before them.\n> \n> Probably something like this could be added:\n> \n> .rendered_html \\* + .alert {\n>     margin-top: 18px;\n> }\n> \n> ... or it could just be added unconditionally, like the original\n> margin-bottom:\n> \n> .alert {\n>     margin-top: 18px;\n> }\n> \n> But probably the best solution would be, to overwrite the original\n> margin-bottom and just do the same as with plain old <p>:\n> \n> .rendered_html .alert {\n>     margin-bottom: initial;\n> }.rendered_html \\* + .alert {\n>     margin-top: 1em;\n> }\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1390\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Sure, why not.\n\nbefore:\n\n![before](https://cloud.githubusercontent.com/assets/705404/14847939/90291dce-0c6b-11e6-982b-a4bcf42b1183.png)\n\nafter:\n\n![after](https://cloud.githubusercontent.com/assets/705404/14847940/902916d0-0c6b-11e6-8550-50472dcc7030.png)\n I've created a PR: #1396.\nI hope I added it in the right place ...\n Thanks for the PR @mgeier and for improving the visual output. :cake:\n","Our choice might be deliberate - but it could be a mistake. In general, our\nvisual style tends to be more compressed vertically.\n\nOn Tue, Apr 26, 2016 at 4:05 AM, Matthias Geier notifications@github.com\nwrote:\n\n> Probably the existing rule from renderedhtml.less should be slightly\n> altered:\n> \n> .rendered_html ul:not(.list-inline), .rendered_html ol:not(.list-inline) {\n>     margin: 1em 2em 0em 2em;\n>     padding-left: 0px;\n> }\n> \n> This is an example where the problem is obvious:\n> \n> ### Title\\* one\\* two\n> \n> BTW, this is how it looks on Github:\n> Title\n> - one\n> - two\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1392\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Stumbled upon this by accident, coincidentally this had been bugging me a few days ago. It seems like it got vertically tighter at some point, b/c I don't recall feeling it was _too_ tight in the past, and recently it did seem to me like it was. Here's a side-by-side github/us comparison:\n\n![image](https://cloud.githubusercontent.com/assets/57394/14838187/9c6b18a0-0bd3-11e6-8b80-bcb8a29f6ce0.png)\n\nWhile I know we want a tight vertical layout, we might want to add a bit of space here, as I think our current choice is perhaps _too_ tight. It's more noticeable with a longer title and more items in the list:\n\n![image](https://cloud.githubusercontent.com/assets/57394/14838212/dda32466-0bd3-11e6-952f-bcde92d65fd7.png)\n Hmm, yes, I completely agree. Maybe we can see how/when/why it changed.\nIIRC this spacing used to be very carefully tuned to the leading of the\ntext to match the vertical spacing of the type in regular paragraphs.\n\nOn Tue, Apr 26, 2016 at 5:25 PM, Fernando Perez notifications@github.com\nwrote:\n\n> Stumbled upon this by accident, coincidentally this had been bugging me a\n> few days ago. It seems like it got vertically tighter at some point, b/c I\n> don't recall feeling it was _too_ tight in the past, and recently it did\n> seem to me like it was. Here's a side-by-side github/us comparison:\n> \n> [image: image]\n> https://cloud.githubusercontent.com/assets/57394/14838187/9c6b18a0-0bd3-11e6-8b80-bcb8a29f6ce0.png\n> \n> While I know we want a tight vertical layout, we might want to add a bit\n> of space here, as I think our current choice is perhaps _too_ tight. It's\n> more noticeable with a longer title and more items in the list:\n> \n> [image: image]\n> https://cloud.githubusercontent.com/assets/57394/14838212/dda32466-0bd3-11e6-952f-bcde92d65fd7.png\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1392#issuecomment-214928262\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n This is either a mistake in The Notebook, or a bug in Less or in Firefox and Chromium. It doesn't look deliberate to me. The change happened more than 2 years ago in 4363aa72f815545c5c57bc472a38f6cad3824d15, which was created by you, @ellisonbg.\n\nYou changed `margin: 1em 2em;` to `margin: 0em 2em;`. But you didn't forget the `margin-top`!\nYou also added \n\n``` css\n* + ul { margin-top: 1em; }\n* + ol { margin-top: 1em; }\n```\n\nThe intention is clear, but for some reason this doesn't work for me (and apparently for @fperez either).\n\nAny ideas how this can be fixed?\n\nBTW, this has nothing to do with having it more or less tight.\nIf you want it tighter, just change the `1em` to something smaller for all relevant CSS rules (which would be a lot of work!).\n ping?\n @ellisonbg, do you think one of the CalPoly student teams might have some cycles to take a crack at this?\n @fperez I fixed this in the Lab last week, I'll take a look at this right now, seems ezpz. \n OK, we do need to fix it though\n\nOn Thu, Jun 23, 2016 at 12:43 PM, Elliot Kirk notifications@github.com\nwrote:\n\n> We had a fix for this, but it was veto'd due to the code being too\n> expensive. If i recall we might need to add a class tag to some of these\n> elements.\n> \n> Regardless I'll take a look at this right now, seems ezpz.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1392#issuecomment-228207995,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AABr0Locn2mLdevM3cXqKiP0ucZiBT7aks5qOwwngaJpZM4IP1FC\n> .\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg I was wrong, that was for another issue \u00af\\_(\u30c4)_/\u00af\n This should be fixed with #1564, just waiting on a merge\n That's kinda making it worse!\n\nOr rather it somewhat improves the example above, but breaks other examples.\n\nE.g., if a Markdown cell starts with a list, this introduces spurious spacing.\n\nAlso (but the fix suggested above has the same problem), now there is too much spacing in nested lists. Is that what the `list-inline` class is for?\n @mgeier I could use a `h<n> + ul { //rule// }` tag to only have spacing after headings. Would that be better? \n Inserting the additional space only after headings feels like a hack, and it would still produce too little space after equations, tables, images, ...\n\nIn the meantime I found out why the rules mentioned above (https://github.com/jupyter/notebook/issues/1392#issuecomment-215022995) don't work:\n\n``` css\n* + ul { margin-top: 1em; }\n* + ol { margin-top: 1em; }\n```\n\nThey were simply overruled by:\n\n``` css\nol:not(.list-inline) {margin: 0em 2em; padding-left: 0px;}\n```\n\nI removed this bug in #1568, which I think is a slight improvement, but it's still broken.\nEspecially nested lists still look awkward. You can try something like this:\n\n``` markdown\n* first item\n  * first subitem\n  * second subitem\n\n  paragraph after second subitem\n* second item\n\n  paragraph inside second item\n* third item\n```\n\nThe real problem, however, isn't only list spacing. The spacing of `<p>` and many other elements just doesn't work well together.\nSadly, I don't know enough CSS-fu to produce a solution for the whole problem, I hope somebody else does that!\n","We know, see e.g. ipython/ipykernel#82. The difficulty is that setting it causes matplotlib to be loaded on startup, which we don't want to do. We were trying to work out a way to do it when matplotlib is loaded by the user, but that's fiddly, and the effort stalled.\n\nClosing since it's an IPython kernel issue, not a notebook issue.\n","I'd guess that you created the kernelspec for an environment which you've now deleted or removed. Can you do `jupyter kernelspec list` to see where your kernelspecs are?\n Thanks for your quick revert Thomas!! I updated the path variable in kernel.json and the kernel error is now gone :)\nFor the benefit of others, if any, struggling with this error...\nIt was:\n \"argv\": [\n  \"e:\\programs\\anaconda\\python.exe\", \n\nand I changed it to:\n\"argv\": [\n  \"e:\\programs\\anaconda**2**\\python.exe\", \n","I think some JS needs to call `Jupyter.keyboard_manager.register_events()` on any output elements that you want to be focusable for keyboard input. The widget framework does this for the elements it creates, for instance. Once this is done, our keyboard manager is disabled when you focus the text box, and disabled when you leave it, so our shortcuts don't fire while you're typing in it.\n @Carreau Tried to find some information on the `no action` milestone but didn't see it described anywhere. Looking at the other issues in that milestone it seems like things that won't be fixed. I've noticed that ie11 is listed as an [unsupported browser](http://jupyter-notebook.readthedocs.org/en/latest/notebook.html#browser-compatibility). Is that the reason for the `no-action`?\n We do consider IE unsupported, but I think the reason @Carreau has applied it in this case is that we consider it up to whoever/whatever constructs the HTML to take care of calling `register_events()` on it.\n\nMaybe it would be possible to scan HTML output for elements that should be focusable and automatically call `register_events` on them, but I don't know how reliable that would be. Someone more familiar with the HTML & JS side of things may be able to chime in.\n","Thanks. \n","We use logging in the kernel itself as well, and that shouldn't be redirected into the notebook. I was assuming that we set up a handler on the root logger, but looking at it, we seem to be correctly setting it on the application logger. So it should still be possible to handle other logs separately. I'm not sure what the root issue is here.\n The root issue is that the example code doesn't run as expected in the notebook.\nOther modules use code like the example above and hence don't run as expected in the notebook.\n\nTo reproduce the issue, run the above sample code inside of a notebook.\nExpected behaviour: You see the messages in the notebook.\nActual behaviour: You don't see the messages in the notebook.\n\nMaybe when the notebook starts capturing output it should swap the default logging `StreamHandler` with one that points to the `ipykernel.iostream.OutStream`?\n @takluyver Oh I see what you mean, the code in `traitlets.config.application._log_default` does seem to only set that `StreamHandler` to the class' logger, and not to the root logger. But when in the notebook:\n\n``` python\nimport logging\nroot_logger = logging.getLogger()\nprint 'root_logger =', root_logger\nprint 'handlers:', root_logger.handlers\nhandler = root_logger.handlers[0]\nprint 'handler stream:', handler.stream\n\nimport sys\nprint 'sys.stderr:', sys.stderr\n```\n\n```\nroot_logger = <logging.RootLogger object at 0x7fb847a50490>\nhandlers: [<logging.StreamHandler object at 0x146a2d0>]\nhandler stream: <open file '<stderr>', mode 'w' at 0x7fb847bae270>\nsys.stderr: <ipykernel.iostream.OutStream object at 0x15ea290>\n```\n Right, I don't know what's creating the root handler, though.\n Turns out I was looking at the wrong thing. I put a traceback in the logger constructor, and did see jupyter creating a logger via the traitletscode. But I missed the fact that I had another logger being created, which was actually the root logger.\n\nThe root logger is actually created by tornado, here:\n\n```\n>>>>>>>>>>>>>>>>>>   addHandler <logging.RootLogger object at 0x7ff897b8d490> <<<<<<<<<<<<<<<<<<<<<<\n  File \"/usr/lib64/python2.7/threading.py\", line 524, in __bootstrap\n    self.__bootstrap_inner()\n  File \"/usr/lib64/python2.7/threading.py\", line 551, in __bootstrap_inner\n    self.run()\n  File \"/usr/lib64/python2.7/threading.py\", line 504, in run\n    self.__target(*self.__args, **self.__kwargs)\n  File \"/usr/lib/python2.7/site-packages/ipykernel/iostream.py\", line 60, in _thread_main\n    self.io_loop.start()\n  File \"/usr/lib64/python2.7/site-packages/zmq/eventloop/ioloop.py\", line 162, in start\n    super(ZMQIOLoop, self).start()\n  File \"/usr/lib64/python2.7/site-packages/tornado/ioloop.py\", line 749, in start\n    self._setup_logging()\n  File \"/usr/lib64/python2.7/site-packages/tornado/ioloop.py\", line 374, in _setup_logging\n    logging.basicConfig()\n  File \"/usr/lib64/python2.7/logging/__init__.py\", line 1531, in basicConfig\n    root.addHandler(hdlr)\n```\n\nThe actual method does this:\n\n``` python\n    def _setup_logging(self):\n        if not any([logging.getLogger().handlers,\n                    logging.getLogger('tornado').handlers,\n                    logging.getLogger('tornado.application').handlers]):\n            logging.basicConfig()\n```\n\nhttps://github.com/tornadoweb/tornado/blob/stable/tornado/ioloop.py#L360\n\nSo if jupyter were to set up the root logger in each subprocess before tornado picks this up, everything would be fine. @takluyver what do you think?\n As far as I can tell, jupyter spawns a subprocess for each open notebook. This subprocess then spawns a thread for tornado.\nIs my understanding correct?\n\nIf so, then all we have to do is configure the root logger with the proper captured sys.stderr and all will be well.\n Each notebook is talking to a separate kernel process that runs your code. The tornado event loop is running in the main thread of that to handle messages (this is separate to the tornado webserver that runs the notebook application).\n\nI think probably the way to go is to configure a handler for the 'tornado' logger, and leave the root handler unconfigured.\n @takluyver Yes, but this is not the notebook server's tornado that sets up the logger.\nThe subprocess uses ZeroMQ  which fires up a tornado IO loop inside the subprocess.\nThis suprocess IO loop is the one that eagerly configures the root logger.\n So there's the `IPKernelApp.initialize` method here:\nhttps://github.com/ipython/ipykernel/blob/master/ipykernel/kernelapp.py#L405\n\nThis method calls, in this order:\n- `init_blackhole(self)`  - might set sys.stdout/stderr to /dev/null according to some settings\n- `init_sockets(self)` - eventually sets up the IO loop\n- `init_io(self)` - sets sys.stdout/stderr to the captured streams\n\nThe easy fix would be to just move the call to `init_io` before `init_sockets`, but I'm not sure what exactly `init_blackhole` is preventing. Maybe those other calls spit out a lot of undesirable output?\n init_io must be called after init_sockets because it requires the sockets to have been created.\n I think we just need to set up a handler for the 'tornado' logger before starting the event loop. Then, from the code you posted above, tornado will detect that and not call `basicConfig()`.\n @minrk Good point\n@takluyver Yes, that does seem to be the best solution.\n\nThe ZMQ IOLoop (which creates the tornado IO loop) is created here:\nhttps://github.com/ipython/ipykernel/blob/master/ipykernel/iostream.py#L53\n\nWould that also be the right place to call some new `_setup_tornado_logger` method?\n\nThen `_setup_tornado_logger` could init the tornado logger to stderr or similar.\n I think setting up logging handlers is an application-level concern, so it should be done on the kernel application class - we just need to ensure it happens early enough.\n @takluyver the `IPKernelApp` looks like a good place as well. In that case it would be an `init_tornado_logging` method which would be called in `init_iopub`. Does that sound OK?\n\nI'm not very familiar with the code there, so I'm looking for guidance on where to actually place it.\n Fixed in ipython/ipykernel#127\n @tudorprodan I tried reload(logging) which works for me, see it here http://stackoverflow.com/a/21475297\nhope it helps\n","No, you can't run subprocesses that expect input at a terminal: there isn't a reliable way for us to recognise when they're waiting for input, so they will just sit there not doing anything.\n\nYou can do `!python some_script.py` - or any other command that will run to completion by itself. But you can't use anything interactive with `!` in the notebook (or any other jupyter frontends).\n Many thanks for your quick reply. It clears my confusion. \n","Hi, this appears to have broken [a template](https://github.com/jcb91/IPython-notebook-extensions/blob/721b2f7f9939182f58146924ebd957a6e4fa2a19/src/themysto/nbextensions_configurator/templates/nbextensions_configurator.html) based on `page.html`, which now throws an error from requirejs with a stack beginning `TypeError: $ is not a function`. It seems that in this template, `window.$` is undefined. I'm not really sure how/where `window.$` is supposed to get defined, and it seems a bit strange to set a jquery path in [notebook/templates/page.html#L33](https://github.com/jupyter/notebook/blob/ee44d1947f0ad9e3ca309ac6d9d1aa1778e9d0ee/notebook/templates/page.html#L33), only to re-define it further down the page in [notebook/templates/page.html#L88](https://github.com/jupyter/notebook/blob/ee44d1947f0ad9e3ca309ac6d9d1aa1778e9d0ee/notebook/templates/page.html#L88).\n\nSo, yeah, any info on what the thinking behind this is, and what am I doing wrong appreciated :)\n relevant stack traces:\n\n```\nTypeError: $ is not a function\nStack trace:\n@http://localhost:12341/a%40b/static/base/js/events.js:23:12\n...\nnewContext/context.onScriptLoad@http://localhost:12341/a%40b/static/components/requirejs/require.js?v=6da8be361b9ee26c5e721e76c6d4afce:1711:21\n require.js:900\n```\n\n```\nTypeError: $ is undefined\nStack trace:\n@http://localhost:12341/a%40b/static/base/js/keyboard.js:63:9\n...\nnewContext/context.onScriptLoad@http://localhost:12341/a%40b/static/components/requirejs/require.js?v=6da8be361b9ee26c5e721e76c6d4afce:1711:21\n require.js:900\n```\n\n```\nTypeError: $ is not a function\nStack trace:\nget_body_data@http://localhost:12341/a%40b/static/base/js/utils.js:521:19\n...\nnewContext/context.onScriptLoad@http://localhost:12341/a%40b/static/components/requirejs/require.js?v=6da8be361b9ee26c5e721e76c6d4afce:1711:21\n require.js:900\n```\n @SylvainCorlay any ideas?\n so, if I insert the main notebook minified javascript below:\n\n``` html\n<script src=\"/static/notebook/js/main.min.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n```\n\n the require errors go away. I assume that this is because `window.$` has already been successfully set by the jquery included by the minified script before the `define` call, since the same is not true when using the non-minified tag\n\n``` html\n<script src=\"/static/notebook/js/main.min.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n```\n indeed, if the `NotebookApp.ignore_minified_js` config value is set `True`, the notebook page also fails to load, with a string of javascript console errors about undefined `$`\n I've so far got around this by wrapping my require call in another one to handle the potentially-undefined jquery:\n\n``` javascript\nrequire(['jquery'], function (jq) {\n    // hack to fix notebook 4.2.1\n    if (jq === undefined) {\n        require.undef('jquery');\n        require.undef('jquery-ui');\n        require.undef('jqueryui');\n        require.undef('bootstrap');\n    }\n    require(['nbextensions/nbextensions_configurator/main'], function (nbext_config_module) {\n        nbext_config_module.build_page();\n    });\n});\n```\n I'm trying to duplicate the original issue in 4.2.0:\n\n```\nconda create -n widgets python=3 notebook=4.2.0 ipywidgets=4.1.1 nb_conda_kernels\nsource activate widgets\n```\n\nRunning the code in the original issue had no problems:\n\n```\nfrom ipywidgets import widgets\nfrom IPython.display import display\ns = widgets.IntSlider()\ndisplay(s)\n```\n Digging deeper, we are using a jqueryui that does not support AMD loading (we have 1.10, AMD loading came in 1.11). No wonder things are messed up.\n Digging even deeper, one problem I had was that loading main.min.js was stomping all over other things (like the jquery module definition), so we'd end up with multiple copies of jquery overwriting each other.\n :astonished: \n",":hear_no_evil: \n","`--config` is only for the server side config. You might want to set `$JUPYTER_CONFIG_DIR` env variable for that, but yet it should be documented in `jupyter notebook --help`.\n Thanks @Carreau \n","Thanks, do you have a couple of minutes to test #1403, which should fix this?\n Too late, I'm on the train now, I will try tomorrow morning (CEST timezone)\nIl 28/Apr/2016 18:24, \"Thomas Kluyver\" notifications@github.com ha\nscritto:\n\n> Thanks, do you have a couple of minutes to test #1403\n> https://github.com/jupyter/notebook/pull/1403, which should fix this?\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1401#issuecomment-215484494\n Tomorrow morning should be fine. :-)\n","Do you want it in the core? Or as an extension ? \n\nBy read-only, I suppose you want users to not be able to clear output, and not modify the text of cell. \nCan they enter edit mode for markdown cell, or just see the rendered version ? \nShould they be allowed to select the text ? (Codemirror as 2 read-only option: `readOnly:true|'nocursor'`)\nCopy the cell ? \nPast it ? \nIf pasted, is the new cell read-only too ? Or not ? \n Yes, I'd like it in core. Ideally students shouldn't have to install anything extra.\n\n> By read-only, I suppose you want users to not be able to clear output, and not modify the text of cell. \n\nI would be ok with clearing output -- just not editing the source of the cell. I think not being able to clear the output (or overwrite it, if the cell is re-run) could be confusing.\n\n> Can they enter edit mode for markdown cell, or just see the rendered version ? \n\nI think they should probably be able to see the source of markdown, just not edit it.\n\n> Should they be allowed to select the text ? (Codemirror as 2 read-only option: readOnly:true|'nocursor')\n\nI think disabling the cursor would be fine.\n\n> Copy the cell ? \n> Past it ? \n> If pasted, is the new cell read-only too ? Or not ?\n\nYes, it should be copiable, and pasted versions shouldn't be read-only. I would expect the behavior to be similar to how the \"undeletable\" property is maintained (and actually, \"read-only\" should imply \"undeleteable\", I think).\n Is there even a way to enforce this 'serverside' at all? If not, just adding a 'readonly' field to cell metadata and enforcing it in client side JS (either in an extension or core) would be enough, right?\n (pressed wrong button, sorry!)\n No, it's something that the frontend would have to support. So yeah, adding a 'readonly' field to the cell metadata and then enforcing it in the core notebook client JS (this is also how the 'deletable' field works).\n Yes, if/when we document this, we should make it clear that it's a 'stop users shooting themselves in the foot' measure, not a security measure.\n","I have tested this against master of ipywidgets and it seems to fix it. @SylvainCorlay @jdfreder How are you even getting ipywidgets to work at all without this fix?\n I have not looked at it closely, but in any case, you don't need to install the `widgetsnbextension` nbextension for a non-dev install. The static assets are part of the wheel.\n\nBesides, this issue was introduced 3 days ago in master!\n Ahh, got it...\n\nOn Thu, Apr 28, 2016 at 8:58 PM, Sylvain Corlay notifications@github.com\nwrote:\n\n> I have not looked at it closely, but in any case, you don't need to\n> install the widgetsnbextension nbextension for a non-dev install. The\n> assets are parts of the wheel.\n> \n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1403#issuecomment-215621014\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n The ipywidget installation works fine with this branch, tnx.\n @nastasi-oq thanks!\n","I think this should be closed or the persistent issues should be split into new, smaller issues.\n Do you want to open sub issues, referencing this and closing this one once the other issues are created? \n Yep.\n",":shipit:\n","I build caffe with CUDA7.5,OpenCV3.0,atlas,anaconda2,\nThe samples of CUDA named deviceQuery and bandwidthTest is passed. And I follow the step make, make test,make runtest with CPU only are successful.But something happened when I try to make in the GPU mode.\nMy Makefile.config:\uff08something goes wrong when I use # ,so I replace it with %\uff09\n**#Refer to http://caffe.berkeleyvision.org/installation.html\n% Contributions simplifying and improving our build system are welcome!\n% cuDNN acceleration switch (uncomment to build with cuDNN).\nUSE_CUDNN := 1\n% CPU-only switch (uncomment to build without GPU support).\n%CPU_ONLY := 1\n% uncomment to disable IO dependencies and corresponding data layers\n USE_OPENCV := 1\n USE_LEVELDB := 1\n USE_LMDB := 1\n% uncomment to allow MDB_NOLOCK when reading LMDB files (only if necessary)\n%      You should not set this flag if you will be reading LMDBs with any\n%      possibility of simultaneous read and write\n% ALLOW_LMDB_NOLOCK := 1\n% Uncomment if you're using OpenCV 3\n OPENCV_VERSION := 3\n%To customize your choice of compiler, uncomment and set the following.\n% N.B. the default for Linux is g++ and the default for OSX is clang++\n% CUSTOM_CXX := g++\n% CUDA directory contains bin/ and lib/ directories that we need.\nCUDA_DIR := /usr/local/cuda-7.5\n% On Ubuntu 14.04, if cuda tools are installed via\n% \"sudo apt-get install nvidia-cuda-toolkit\" then use this instead:\n% CUDA_DIR := /usr\n% CUDA architecture setting: going with all of them.\n% For CUDA < 6.0, comment the *_50 lines for compatibility.\nCUDA_ARCH := -gencode arch=compute_20,code=sm_20 \\\n                -gencode arch=compute_20,code=sm_21 \\\n                -gencode arch=compute_30,code=sm_30 \\\n                -gencode arch=compute_35,code=sm_35 \\\n                -gencode arch=compute_50,code=sm_50 \\\n                -gencode arch=compute_52,code=sm_52 \\\n                -gencode arch=compute_50,code=compute_50\n% BLAS choice:\n% atlas for ATLAS (default)\n% mkl for MKL\n% open for OpenBlas\nBLAS := atlas\n% Custom (MKL/ATLAS/OpenBLAS) include and lib directories.\n% Leave commented to accept the defaults for your choice of BLAS\n% (which should work)!\n% BLAS_INCLUDE := /path/to/your/blas\n% BLAS_LIB := /path/to/your/blas\n% Homebrew puts openblas in a directory that is not on the standard search path\n% BLAS_INCLUDE := $(shell brew --prefix openblas)/include\n% BLAS_LIB := $(shell brew --prefix openblas)/lib\n% This is required only if you will compile the matlab interface.\n% MATLAB directory should contain the mex binary in /bin.\n% MATLAB_DIR := /usr/local\n% MATLAB_DIR := /Applications/MATLAB_R2012b.app\n% NOTE: this is required only if you will compile the python interface.\n% We need to be able to find Python.h and numpy/arrayobject.h.\n%PYTHON_INCLUDE := /usr/include/python2.7 \\\n                /usr/lib/python2.7/dist-packages/numpy/core/include\n% Anaconda Python distribution is quite popular. Include path:\n% Verify anaconda location, sometimes it's in root.\n ANACONDA_HOME := /root/anaconda2\n PYTHON_INCLUDE := $(ANACONDA_HOME)/include \\\n                 $(ANACONDA_HOME)/include/python2.7 \\\n                 $(ANACONDA_HOME)/lib/python2.7/site-packages/numpy/core/include \\\n% We need to be able to find libpythonX.X.so or .dylib.\n%PYTHON_LIB := /usr/lib\n PYTHON_LIB := $(ANACONDA_HOME)/lib\n% Homebrew installs numpy in a non standard path (keg only)\n% PYTHON_INCLUDE += $(dir $(shell python -c 'import numpy.core; print(numpy.core.__file__)'))/include\n% PYTHON_LIB += $(shell brew --prefix numpy)/lib\n% Uncomment to support layers written in Python (will link against Python libs)\n WITH_PYTHON_LAYER := 1\n% Whatever else you find you need goes here.\nINCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include\nLIBRARY_DIRS := $(PYTHON_LIB) /usr/local/lib /usr/lib\n% If Homebrew is installed at a non standard location (for example your home directory) and you use it for general dependencies\n% INCLUDE_DIRS += $(shell brew --prefix)/include\n% LIBRARY_DIRS += $(shell brew --prefix)/lib\n%Uncomment to use `pkg-config` to specify OpenCV library paths.\n% (Usually not necessary -- OpenCV libraries are normally installed in one of the above $LIBRARY_DIRS.)\n% USE_PKG_CONFIG := 1\nBUILD_DIR := build\nDISTRIBUTE_DIR := distribute\n% Uncomment for debugging. Does not work on OSX due to https://github.com/BVLC/caffe/issues/171\n% DEBUG := 1\n% The ID of the GPU that 'make runtest' will use to run unit tests.\nTEST_GPUID := 0\n% enable pretty build (comment to see full commands)\nQ ?= @**\n\nWhen I make runtest a process named (DeconvolutionLayerTest/1.TestNDAgainst2D) is faild. Can someone help me to solve this problem. I have stucked for a week.\n\nUpdate\uff1a\nI try it again and the error like below is happened:\n*_src/caffe/test/test_common.cpp:58: Failure\nValue of: ((const unsigned int_)(data_b.cpu_data()))[i]\n  Actual: 1111099622\nExpected: ((const unsigned int_)(data_a.cpu_data()))[i]\nWhich is: 1199486454\nsrc/caffe/test/test_common.cpp:58: Failure\nValue of: ((const unsigned int_)(data_b.cpu_data()))[i]\n  Actual: 1079127160\nExpected: ((const unsigned int_)(data_a.cpu_data()))[i]\nWhich is: 1082272888\n[  FAILED  ] CommonTest.TestRandSeedGPU (11001 ms)\n*_\nWTF!!!! I quit the make runtest when I see the error.The information of error \"TestNDAgainst2D\" is similar to it.\n I think you might be in the wrong place - this is the Jupyter Notebook repo, not [Caffe](https://github.com/BVLC/caffe).\n","@fperez wrt to ongoing usability issues\n Mmh, I can't reproduce it on my side... I'm running off master but following your instructions is giving me the right behavior ATM.  Any chance you have weird stale stuff in cache?\n I also have the expected behaviour with multi-cell selection.\n Hmm, I will re-check - I just rebuilt everything and cleared the cache\nmultiple times.\n\nOn Tue, May 3, 2016 at 1:59 AM, Thomas Kluyver notifications@github.com\nwrote:\n\n> I also have the expected behaviour with multi-cell selection.\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1407#issuecomment-216472458\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Hmm, I can't reproduce now, will keep trying and report back if I see it\nagain. Thanks!\n\nOn Tue, May 3, 2016 at 10:02 AM, Brian Granger ellisonbg@gmail.com wrote:\n\n> Hmm, I will re-check - I just rebuilt everything and cleared the cache\n> multiple times.\n> \n> On Tue, May 3, 2016 at 1:59 AM, Thomas Kluyver notifications@github.com\n> wrote:\n> \n> > I also have the expected behaviour with multi-cell selection.\n> > \n> > \u2014\n> > You are receiving this because you authored the thread.\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/issues/1407#issuecomment-216472458\n> \n> ## \n> \n> Brian E. Granger\n> Associate Professor of Physics and Data Science\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Closing for now, please reopen if it can be reproduced.\n","On my system, shell files have mimetype `application/x-sh` - our rule for when to try to edit things is to check for the `text/` media type. We think the most general solution is to have _edit_ and _view/download_ buttons for all file types (possibly with a blacklist of definitely-not-text filetypes like image/png that we know we can't edit).\n There was discussion related to this with respect to #1143. I'm working on a more permanent solution for this as we speak!\n This was fixed by #1413","Hey Nicholas, \n\nWell you probably one of the few people that have read the code of the shortcut manager. \nAnd I think you are right. \n\nAny reason to throw a string instead of a new `Error` instance ? I not 1000% sure if there is a difference. @jdfreder ?\n\nN'h\u00e9site pas \u00e0 demander si tu ne veux reste a nouveau bloqu\u00e9 sur un probl\u00e8me comme \u00e7a. \n Hey !\n\n> Any reason to throw a string instead of a new Error instance ?\n\nI was just doing the same as the throws in the existing code. Yet it seems that\nif the exception can go outside the code base, Error would be better.\n\n> N'h\u00e9site pas \u00e0 demander si tu ne veux reste a nouveau bloqu\u00e9 sur un probl\u00e8me comme \u00e7a.\n\nMerci beaucoup, je le ferais dans ce cas :)\n\nBonne soir\u00e9e,\n > I was just doing the same as the throws in the existing code. Yet it seems that\n> if the exception can go outside the code base, Error would be better.\n\nIndeed, I didn't new about throwing error in Js at the time. I'll merge and add an issue to remind me to update all the throw. \n","What system are you on? That directory should be created when you log in - it's getting the path from `$XDG_RUNTIME_DIR`.\n on centos 7.2, using a slurm terminal (using `srun --pty bash`)\n I would guess that either:\n- Whatever is logging you in is setting that environment variable without creating the directory. This is just broken.\n- You are doing something that switches from one user to another without clearing environment variables, so it's inheriting the XDG_RUNTIME_DIR from the user you were before. If this is the case, probably the most sensible thing is to unset XDG_RUNTIME_DIR before running the notebook. It will use a fallback.\n @takluyver - thanks for the feedback. \n\ni know we have upgraded SLURM since i last ran jupyter-notebook on the system, but this was nominally fine before that. it does turn out that the particular directory does not exist when i use `srun` from SLURM to get an interactive terminal but does exist if i simply ssh in.\n\nunsetting the variable works fine. perhaps jupyter-notebook could trap the `OSError` and use the fallback method?\n\ni will check with the SLURM folks as to how they see the variable implemented through an interactive terminal job.\n @takluyver - quick question - has the XDG_RUNTIME_DIR been in use for a while, or was this a recent change (as in within the last 2 months)?\n\nthe reason i ask is that i was able to fire up jupyter-notebooks fine within our SLURM environment. and the SLURM mailing list suggested that SLURM does not support XDG.\n We have been using XDG_RUNTIME_DIR for some time, since the switch to Jupyter.\n\nIt's fine if it's not supported, but if the directory is not created, the environment variable for it should not be set. Setting it implies that whatever was handling the login supported it.\n yes, SLURM carries over local environment variables and since i logged in via ssh to the head node that variable was set. since you have been using it for a while, i have a suspicion that SLURM changed how remote logins were processed. i'm closing this for now. but will post any updates i get from the SLURM folks.\n It seems like a misfeature to carry over arbitrary environment variables, as they could well be wrong. However, if that's what it's doing, I think that `unset XDG_RUNTIME_DIR` before starting the notebook should make it work.\n Hello, we just came across this same issue but with a different job scheduler (OpenLava). We reported it in their [mailing list](https://groups.google.com/forum/#!topic/openlava-users/CFaD5pGMfw0) as well.\n\n> It seems like a misfeature to carry over arbitrary environment variables, as they could well be wrong.\n\nI did want to raise it here too however, as passing the entire set of environment variables has been pretty much standard behaviour for most job schedulers out there, AFAIK. In general, it's the SysAdmin job to ensure that all servers in a cluster are consistent so that the environment is portable. There's probably good reasons why job schedulers do not open a login session for each job they run in execution nodes, but that's just a guess.\n\n(edit)\n~~I am unsure whether this means the XDG specification is broken when working with HPC-type environments, or if there is actually scope for the application (Jupyter Notebook in this case) to be diligent in checking `XDG_RUNTIME_DIR` is indeed writable.~~\n\nActually, on second read of [the specification](https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html) it does seem that the onus is on the application to ensure the directories are actually writable.\n\nFrom the \"Referencing this specification\" section:\n\n> If, when attempting to write a file, the destination directory is non-existant an attempt should be made to create it with permission 0700. If the destination directory exists already the permissions should not be changed. The application should be prepared to handle the case where the file could not be written, either because the directory was non-existant and could not be created, or for any other reason. In such case it may chose to present an error message to the user.\n\nRight now, the notebook presents an error to the user and crashes.\n(/edit)\nI think falling back to non-XDG behaviour instead of crashing would provide a better user experience.\n","Thanks !\n","Makes sense. I would probably do `EDIT_MIMETYPES`, since it's specifically for those that should go to the editor.\n Updated.\n I suspect that it may be better to offer an 'edit' button for each file, separate from the view/download action, and then introduce a blacklist for files that we know we can't edit, rather than this whitelist approach. There are files like HTML and SVG that we can open in a text editor, but the user might also want to view them in the browser.\n Edit button + blacklist sounds great in the long run. Merging this as an incremental improvement, which we can remove when the edit button is added.\n","I have the exact same problem.\n Did Chrome just get an update? That's three people saying they have this issue within an hour. On #1415, the reporter says it works in Firefox.\n @takluyver: you are right, in firefox it works\n @takluyver Notebook v4.2 appears to work on Chrome with Python 3 on OS X 10.11.4. See #1415 \n Posting resolution that has worked for others here:\nhttps://github.com/jupyter/notebook/issues/1415#issuecomment-216230780\n @willingc: right, it works\n","I just tried and it works flawless in Firefox 46.0 \ud83d\ude15 \n Was Chrome just updated? Another Chrome user reported something similar at almost exactly the same time, #1414.\n I used this method here http://superuser.com/questions/408570/how-can-i-tell-when-the-last-time-chrome-updated and it looks like it was last updated last Wednesday (27.04.11:23PM).\n I can confirm that this issue started exactly after Chrome auto-updated to Version 50.0.2661.94 (64-bit). I do not have this issue in Safari.\n Fun fact, works in chrome incognito mode, but does NOT work in \"normal\" chrome with cache for that page disabled.\n\nI really dont get how that's even possible.\n\nGet a bunch of this in chrome console:\n\n```\nKernel: kernel_reconnecting (2a1d29de-d1b6-40a7-b7ed-a3aff5e0aab7)\nkernel.js:453 Starting WebSockets: ws://127.0.0.1:8888/api/kernels/2a1d29de-d1b6-40a7-b7ed-a3aff5e0aab7\nWebSocket connection to 'ws://127.0.0.1:8888/api/kernels/2a1d29de-d1b6-40a7-b7ed-a3aff5e0aab7/channels?session_id=18A9C766F0144F6D832696AA233FA876' failed: Error during WebSocket handshake: Sent non-empty 'Sec-WebSocket-Protocol' header but no response was received\nkernel.js:100 Kernel: kernel_disconnected (2a1d29de-d1b6-40a7-b7ed-a3aff5e0aab7)\n```\n @takluyver The dev version is working with Chrome version referenced and Python 3. Will drop down to the latest stable and see what happens. Update: It seems to work with notebook v4.2 on OS X 10.11.4 with Python 3.\n\n@andaag @mmcdan @shackenberg What notebook release version are you currently using?\n Same problem here, restarted a kernel 15min ago and nothing happened. Everything is stuck at \"Kernel starting, please wait...\"  now. (Win 8.1, Chrome 49.0.2623.112, notebook 4.2.0)\n\n[edit1] updated Chrome to 50.0.2661.94, same problem.\n[edit2] IE11 works, though\n @NasenSpray Thanks for the report and version details. \n This is probably due to this bug with the uBlock extension blocking WebSockets: https://github.com/gorhill/uBlock/issues/1604\n @RobbieClarken: thx, deactivating uBlock (1.7.0) resolved it for me\n Thanks for the detective work @RobbieClarken :-)\n [uBlock 1.7.2](https://github.com/gorhill/uBlock/releases/tag/1.7.2) fixes the issue for me.\n Can confirm 1.7.2 fixes this issue.\n Thanks to @RobbieClarken's tip. I'm going to close this. Please feel free to reopen if there are additional issues.\n Confirm this issue on Chrome (51.0.2704.103) but not Safari\n FWIW even firefox with no adblock whatsoever did not resolve the issue for me.\n To solve the issue, I just re-started Chrome","Yep, #1414 and #1415 just reported the same thing ;-). It appears to be a bug in uBlock. Disabling uBlock or updating it to 1.7.2 should resolve it.\n Just to add some additional information.  It isn't enough to disable uBlock for the URL and have it running for other URLs.  The extension itself is causing the interference.  When I run in \"incognito\" mode then it works as expected.  Thanks for the help.\n",":+1: \n","By the way, as I version my notebooks with Git, my current workaround is to commit when I have a stable version, and to `git checkout` the notebook when I want to return to the stable state, after having played with variables.\n\nMaybe introducing \"stable revisions\" of a notebook (_\u00e0 la_ starred revisions in Etherpad) would be interesting for some users, but that is also something that external tools (such as Git) handle very well.\n There is already a checkpoint when you manually save, so you can revert anything that has been autosaved since then. You can access it from the File menu.\n Indeed, I do not know how I could completley miss it :/ Truely sorry for the noise =(\n No worries, it's still useful to hear how people are using it and where the frustrations are!\n","@KrishnaPG I'm curious under what circumstances this is too expensive?  In the default Jupyter ContentsManager, list_checkpoints is basically just `os.listdir`.  Do you have an alternate Checkpoints implementation in mind/in progress?\n Thank you @ssanderson \n-   In many cases, _checking for existence_ is O(1) while _listing all_ is O(n). \n-   Besides, existence checking results could be cached (quite longer) than content-listing results (which gets invalidated faster). In some case, we have seen more 'checkpoints' than 'autosaves' for notebooks for few users.\n-   Also, usually `list_checkpoints()` implementation will have internal sorting included in the computation to return results temporally ordered, which is O(n logn). (The sorting might happen at app-level or db-level).\n\nIn scenarios where the older checkpoints get moved to secondary (slower) storage, there is no way to tell the `list_checkpoints` method that we are not really interested in _all_ the results (including the secondary storage ones), but just one.\n\nWe do not see it as impossible for a user to create 25+ checkpoints throughout the life of a notebook, where as his active \"working set\" would be only last 5 or 10 checkpoints. A typical Redis implementation would hold these 'working set' in memory, while pushing all the older ones to secondary storage.\n\nOfcourse, One can certainly circumvent those problems by always trying to have _all_ the checkpoints always available in the main memory ready to be listed etc., but then it looks like having an \"exists()\" method is more simpler and semantically valid solution.\n Another point worth noting: the `exists` method need not be a \"must to implement\" method. \n\nIt could be just an ordinary method with default implementation that falls back to `list_checkpoints` such as: \n\n```\nclass Checkpoint :\n\n    def exists_checkpoints_for(path):\n        return not not list_checkpoints(path)\n\n    def list_checkpoints(path):\n        raise exception \"must be implemented\"\n```\n\nThis way, it is backward compatible and also does not put pressure on implementor who do not want to take advantage of that `exists` method.\n OK, I think this is a reasonable addition. @KrishnaPG , do you want to make a pull request adding it. There might be some bikeshedding over naming.\n\n`bool()` is a neater way of doing `not not`.\n @takluyver vote on naming would be `def exists(path):`.\n\n:+1: for `bool` over `not not`.\n I think it might be better to be a bit more specific, because there are some different possible 'exists' questions you might ask of the checkpoints implementation:\n- Does any checkpoint exist for this file? (what we're talking about here)\n- Does this specific checkpoint (id) exist?\n- Does a checkpoint exist meeting some set of criteria, e.g. created since <timestamp>?\n\nBut it's not a strong preference, and I don't currently have a name I like better for it.\n Thanks @takluyver and @ssanderson . \n\nForgive me for the `not not`. \n\nIt was not my intention to promote it - its just that not being familiar with python or its type-conversion system, I used the `not not` merely to demonstrate the concept. It was just one of the old techniques from the days of x86 assembly / C to force-cast the objects to bools. \n\nBut I see from your messages that python has this `bool()` to take care of the conversion - in which case it is better to stick with `bool()`. \n\nAs for the naming, I have no preference either. Whichever works for you, is fine with me. But as @takluyver pointed, the semantics certainly need to be clear for the user. For example, something on the lines of `has_checkpoints()` is also not far from the concept.\n\nBTW, does python support polymorphic functions (where multiple methods can have same function name with different parameter types). In that case multiple methods with same name such as below may satisfy @takluyver 's criteria:\n\n```\nhas_checkpoints(for_this_path) :\n     #some code\n\nhas_checkpoints(for_this_id):\n    # some code\n\nhas_checkpoints(for_this_condition):\n    # some code\n\n```\n\nIf not, what is the typical way Python achieves the above kind of mechanism?\n\nOne simple way would be - if the `path`, `id` etc. were objects themselves on which we can apply `has_checkpoints'. For example,\n\n```\n    def has_checkpoints(pathString):\n          return PATH_Class(pathString).has_checkpoints();\n```\n\nwhere `PATH_Class` is a light-weight wrapper that creates a `path` object that has specialized `has_checkpoints()` defined on it from the user supplied `pathString`. \n\nThe `PATH_Class` then be defined as a Class Trait ( mixin in pyton?) for the checkpoint class.\n > BTW, does python support polymorphic functions (where multiple methods can have same function name with different parameter types). In that case multiple methods with same name such as below may satisfy\n\nThis isn't possible in python without adding some extra machinery (see below for an example).  If you define two functions with the same name in a given namespace, the second just overwrites the first.\n\n> If not, what is the typical way Python achieves the above kind of mechanism?\n\nYou can write something like:\n\n```\ndef some_function(obj):\n    if isinstance(obj, str):\n        # do str things\n    elif isinstance(obj, int):\n        # do int things\n    elif isinstance(obj, float):\n        # do float_things\n    ...\n```\n\nI'd say this is generally considered a bit of an anti-pattern though unless you've got a good reason for wanting to accept multiple input types.  For cases where it makes sense (e.g. when you're implementing an addition function on various number-like types), there are libraries like @mrocklin's [multipledispatch](https://github.com/mrocklin/multipledispatch/) that let you specify type signatures as decorators.  `functools` in recent versions of Python 3 stdlib also supplies a [singledispatch](https://docs.python.org/3/library/functools.html#functools.singledispatch) decorator that implements this behavior for functions that accept a single argument.\n\nFor this particular case, dispatching on type for an `exists` function wouldn't be useful anyway, because the possible inputs would either by checkpoint_id or path, both of which are strings.  If for some reason it became important to want to check existence for a path and for a string, I'd say the right thing to do would be to just create separate methods, say `checkpoint_exists_with_path(path)` and `checkpoint_exists_with_id(id)`.  A bit more verbose, but immediately clear to everyone what's happening.\n Sorry for the late reply.\n\nSo, what is the action plan? Shall we go ahead with  the name `def exists(path)` ? Or some alternative (say, `has_checkpoints` or  `has_history` etc..)?\n\nAlso,  I would like bring the issue of adding 'descriptions' metadata to the files and checkpoints. I know the issue has been put in halt at https://github.com/jupyter/notebook/issues/130 due to performance reasons.\n\nHowever, for alternate content manager classes (such as mongodb / postgres based managers) being discussed here, which are not file-based, reading the metadata info (such as the descriptions) happens anyway as part of reading the filename and related info. So no additional overhead. \n\nPrimarily my concern is about 'checkpoints'. Listing 10 different checkpoints with different timestamps in the menu is not so effective as listing checkpoints with their 'commit messages'.\n\nSo, my question is: assuming that performance overhead is not a problem (let the content /checkpoint manger worry about it), what is the change required to add these descriptions for files and checkpoints (architecture wise)?\n\nFor poor-performers like the file-based content manager, they can always skip reading the description and return \"\"  (empty string) for the description, if they want.\n\nWhat are your views?\n 1) I would write an API that work (when possible) on my objects. like `def exists([path])` or `def exists([checkpoints_ids])` If we expose for 1 people will want to play with many,\n\n2) Beyond the programatic API, we should think at the REST api too. \n\n3) would `list_checkpoint` taking a upper and lower limit works ? so that you can if needed \"Page\" the requests.\n\nIt kinds of depends on what people want to do. \n\nWith extensions, I suppose it is still possible to write that externally, as another API endpoint  for the time beeing, and iterate on it. We are about to release 4.0, so we will not change API **right now**.\n Not a problem @Carreau You guys know how to do it right and when to do it. So, will leave it in your good hands and hope to see it implemented sometime soon. \n\nMeanwhile I will try to keep adding my views/comments/suggestions on other list of features /wishlist from architecture stand point (which is what I do better), as we keep encountering them in our own use of this product. \n\nI thank you and all your other project members for taking time to review issues such as this and others, and also for providing this good opensource work/project for community. It is helpful.\n > You guys know how to do it right and w\n\nNot always, and our bandwidth is pretty limitted. It would be (relatively) easy to get more experience than one of us on a specific part of the project. I would expect @ssanderson to be the more experienced on the content manager side. \n\nDraft implementation are alway welcome, they at least often show issue in implementation. We almost never get things right the first time. \n\n> I thank you and all your other project members for taking time to review issues such as this and others, and also for providing this good opensource work/project for community. It is helpful.\n\nNo problem, I know we are not always super responsive and we can seem reluctant sometime, maybe out of extra caution. \nIf you want to try to make that as an extension to play with it, we can give you pointers. \n","Is this what you had in mind?\n Yep, thanks! :cake: \n","@theobarnhart You may wish to try using Let's Encrypt for SSL since you seem to have admin access on the local network server. Here are [instructions](https://jupyter-notebook.readthedocs.io/en/latest/public_server.html#using-let-s-encrypt).\n\nI'm not an iPad user. If others have a better solution, please post it here. Thanks!\n Thanks Carol, I tried that, but I'm on an internal server within a\ninstitutional network so its not visible outside of colorado.edu. Lets\nEncrypt cannot see the server so they will not issue a certificate for it.\n\nTheodore Barnhart\nPhD Candidate\nINSTAAR / Geography\nUniversity of Colorado\ntheodore.barnhart@colorado.edu\nhttp://theobarnhart.host-ed.me/\n\nOn Tue, May 3, 2016 at 11:59 AM, Carol Willing notifications@github.com\nwrote:\n\n> @theobarnhart https://github.com/theobarnhart You may wish to try using\n> Let's Encrypt for SSL since you seem to have admin access on the local\n> network server. Here are instructions\n> https://jupyter-notebook.readthedocs.io/en/latest/public_server.html#using-let-s-encrypt\n> .\n> \n> I'm not an iPad user. If others have a better solution, please post it\n> here. Thanks!\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1421#issuecomment-216612817\n @theobarnhart Good point. @ellisonbg @fperez I believe that you both use iPads. Any suggestions?\n You basically need a self-signed cert, but that self-signed cert needs to be signed by your own certificate authority; you can then add the certificate for your certificate authority as a profile(?) on iOS. I wrote up my notes for doing this stuff (when I figured it out) here: https://github.com/Unidata/Unidata-Dockerfiles/blob/master/jupyterhub/ssl/ssl_notes.txt\n I should add--the root cause is that it seems that iOS refuses to use an untrusted cert for secure web sockets (WSS).\n @dopplershift Thanks for sharing \ud83d\udc4d \n Thank you @dopplershift! I tried a similar tutorial to become a signing authority, but yours is a little different so I'll give it a try and report back.\n Since it's not in the repo, here's the openssl.cnf:\n\n```\nprompt = no\ndir = .\n\n[ca]\ndefault_ca = my_ca\n\n[my_ca]\nserial = $dir/CA/serial\ndatabase = $dir/CA/certindex.txt\nnew_certs_dir = $dir/CA/certs\ncertificate = $dir/CA/cacert.pem\nprivate_key = $dir/private/cakey.pem\ndefault_md = sha1\ndefault_days = 365\npolicy = policy_match\n\n[ policy_match ]\ncountryName = match\nstateOrProvinceName = match\norganizationName = match\norganizationalUnitName = match\ncommonName = match\nemailAddress = optional\n\n[req]\ndistinguished_name = req_distinguished_name\nreq_extensions = v3_req\nx509_extensions = v3_ca\ndefault_bits = 2048\n\n[req_distinguished_name]\ncountryName = US\nstateOrProvinceName = Colorado\nlocalityName = Boulder\norganizationalUnitName = \ncommonName = \n0.organizationName = \nemailAddress = \n\n[ v3_ca ]\nbasicConstraints = CA:TRUE\n\n[ v3_req ]\n# Extensions to add to a certificate request\nbasicConstraints = CA:FALSE\nkeyUsage = nonRepudiation, digitalSignature, keyEncipherment\nsubjectAltName = @alt_names\n\n[alt_names]\nIP.1 = \nDNS.1 = \n```\n\nI think the alt-names stuff allowed it to work on a server where I only had an IP address.\n I don't think there's a way to override the restriction on refusing connections to secure web sockets with self-signed certificates on iOS, even Safari on OSX imposes, I think, the same constraint. @minrk is quite the expert on these details, as always, so he can correct me if I'm wrong here.\n Thanks all, @dopplershift's solution and tutorial worked great!\n > I don't think there's a way to override the restriction on refusing connections to secure web sockets with self-signed certificates on iOS, even Safari on OSX imposes, I think, the same constraint. \n\n@fperez You are correct on self-signed certs. This solution takes it a bit further, and it creates a certificate authority first and then uses it to sign the cert.\n\nThanks Team Colorado, @theobarnhart and @dopplershift, for the good work here :smile:\n I should note that I emailed my cacert.pem to myself and added it as a profile on my ipad, I'm not sure if thats necessary (or a good idea), but I read about it on a different tutorial. \n @theobarnhart IIRC, I emailed to myself as well. It's necessary so that your regular self-signed cert will be trusted by safari; unless someone else gets their hands on your CA private key, shouldn't be risky.\n @dopplershift \r\nHi Ryan,\r\nI met the same problem (kernel not connected) with the latest version of Safari browser. According to the replies people refer to your tutorial which works well. But when I click the link, it is already dead. Could you please provide the tutorial again? Thanks!\r\nBest,\r\nYunlong Sorry, that repository has been repurposed. I don't have the instructions up anywhere, so I'll just put them here:\r\n\r\nTo create CA:\r\n1. Generate new key and cert with password:\r\n   `openssl req -new -x509 -keyout private/cakey.pem -out CA/cacert.pem -days 365 -config ./openssl.cnf`\r\n2. Initialize serial number:\r\n    `echo '100001' > CA/serial`\r\n3. Init cert db:\r\n    `touch CA/certindex.txt`\r\n4. Open CA/cacert.pem on OSX and trust it in the keychain.\r\n\r\nTo issue new certificate:\r\n1. Generate new RSA private key:\r\n    `openssl genrsa -out private/ssl.key 4096`\r\n2. Make a new certificate request:\r\n    `openssl req -new -out ./ssl.req -key private/ssl.key -config ./openssl.cnf`\r\n3. (optional) Check request for Subject Alternative Name info (SAN)\r\n    `openssl req -text -noout -in ./ssl.req`\r\n4. Issue new cert from CA:\r\n    `openssl ca -in ssl.req -out ssl.cert -config openssl.cnf -extensions v3_req`\r\n5. (optional) Verify SAN in output cert:\r\n    `openssl x509 -in ssl.cert -noout -text`\r\n6. (optional) Verify trust: `openssl verify -CAfile CA/cacert.pem ssl.cert`\r\nTo revoke (e.g. need to update IP address):\r\n    `openssl ca -revoke ./CA/certs/100001.pem -config openssl.cnf`","There's a config option `PDFExporter.latex_command`. The default is `['pdflatex', '{filename}']`, but you can set it to `['path/to/any/latex', '{filename}']`. This goes in `jupyter_nbconvert_config.py` if you're using nbconvert directly, or `jupyter_notebook_config.py` if you're exporting it from the file menu in the notebook.\n- [Config overview](http://jupyter.readthedocs.io/en/latest/config.html)\n- [nbconvert config options](http://nbconvert.readthedocs.io/en/latest/config_options.html)\n\nAlternatively, change the `PATH` environment variable so that the `pdflatex` it finds first is the one you want it to use.\n","Nah, bug, it erase CodeCell.cm_config default options instead of merging them, leading to no syntax highlighting, \n @Carreau It looks like https://github.com/jupyter/notebook/pull/1312 is a continuation of this PR. If so, should we close this one?\n Sure, let's close. \n Wait technically  this one is the continuation of #1312 as this is the most recent one. \nAs you like. \n Oh you're right! I basically reimplemented what you did in this PR! Ok, let me reconcile this and https://github.com/jupyter/notebook/pull/1676...\n Merged by https://github.com/jupyter/notebook/pull/1676\n","I think that makes (partially) sens. That might make a lot of mess on the filesystem though. \n","This is not related to terminado, which is what's used when you click 'New > Terminal' from the dashboard.\n\nWe have to specify _some_ size for subprocesses running in a pseudoterminal, and 80x25 is a common default. It's also better to default to too small, which tends to make cramped output, than too big, which can completely break things like tables.\n\nWe could do something hackish to calculate a width from the JS and send it to the kernel every time it changes, but the existing output would still be wrong as soon as the notebook was displayed at a different width, so it doesn't seem worth the added complexity.\n\nIn kernels that can do so, a better approach is to produce an HTML table rather than ASCII art, which can be displayed neatly in the frontend. There isn't currently a way to display HTML from bash_kernel, though.\n I respectfully disagree, but will stop arguing now.\n\nI don't understand \"can completely break things like tables\", could you elaborate a bit ?\nYou mean table output written without \\n and expecting terminal size to get the right output ?\n\nCould you point me to where this is implemented ?\n The other issue is that there can be multiple frontends attached to a kernel, each of which could have a different width. But @takluyver what about giving the `%%bash` command a flag to set this option? \n The `%%bash` magic certainly could have such an option, though I think in this case Vincent was using bash_kernel, where it would be trickier to add that kind of thing. For many programmes you can also override it by setting the `ROWS` and `COLUMNS` environment variables, which may offer another workaround.\n COLUMNS, in that particular case, is not a solution, openstack client is based on the cliff sub-project which actively avoids COLUMNS usage, see commit message here : \nhttps://git.openstack.org/cgit/openstack/cliff/commi/?id=e7c3c622759d4e9af09947dfb8a7faf52edaad07\n\nI'm actually pursuing a solution on the other end, by making cliff support an environment variable to avoid trying to guess/use line length to split output.\n\nBut the question remains on the jupyter-notebook front, whether it could be useful for other cases to be able to specify terminal geometry, or to let it be automatically changed when the browser window changes size, I don't know...\n The other end (openstack/cliff) workaround / fix is tracked [here](https://bugs.launchpad.net/python-openstackclient/+bug/1577368). And if accepted, it will allow to get sane output, whatever choice is made on jupyter-notebook's front.\n @takluyver: care to explain what you meant by \"can completely break things like tables\", because my experience (which led to this bug report) is the opposite. My tables are actually broken, and I want to fix them by allowing overrides to the default values, which will never be always right...\n The full sentence:\n\n> It's also better to default to too small, which tends to make cramped output, than too big, which can completely break things like tables.\n\nIf we guess a size smaller than the width that can be displayed, an ascii art table will be unnecessarily cramped, and may be split into two chunks, as in your screenshot. If we  guess a size _bigger_ that the width that can be displayed, and it renders a table wider than can be displayed, the lines will wrap and the ascii art becomes a horrible mess. So where we don't know the width available to display monospace characters, we should err on the small side for picking a default. As we do.\n I have no problem with the way jupyter guess what should be the default, but as it can only be a best effort guess, there will be cases where this guessing goes wrong, and there ought to be a way to manually fix it up for those cases.\n\nAnyway, you can close this bug report as wont-fix, the other side's workaround has been accepted:\n\nhttps://git.openstack.org/cgit/openstack/cliff/commit/?id=c59f04465cff2d2d147491d5ec521e8b769bd377\n\nSo I have a way around this bug.\n\nThanks\n Thanks; I'm glad you got a workaround.\n","Well that sure is fun and weird.\n By milestone 5, I mostly mean we should work on a clean solution on JLab.\n","If we can append stream output piece by piece while processing the ANSI state machine correctly, that would be great. It's the ANSI escapes that are the main reason we re-process the whole thing over and over again.\n","Try to force refresh your browser, that might have caching issues. Does it work in anothe browser ? Firefox/Chrome/Safari/IE ?\n Refreshing doesn't help, but your second check is on the spot. It seems that the problem is in Chrome. In Firefox the fonts are rendered correctly.\n > Refreshing doesn't help\n\nTry to force-refresh and clear cache. (usually Ctrl-shift-R a few times)\n Tried it. 10 times in a  row. Doesn't help. But I am thinking that is trully chrome's fault and not on this side. \n @kzapfe @Carreau Possibly a chrome bug with Chrome falling back when it does not find a specified resource. Seems others are experiencing too. [chrome bug](https://bugs.chromium.org/p/chromium/issues/detail?id=602968&q=fonts&colspec=ID%20Pri%20M%20Stars%20ReleaseBlock%20Component%20Status%20Owner%20Summary%20OS%20Modified)\n","Is it possible for it to check change in coverage, rather than the total number? i.e. it might be handy to fail if coverage dropped by, say, >= 1%.\n > Is it possible for it to check change in coverage, rather than the total number? i.e. it might be handy to fail if coverage dropped by, say, >= 1%.\n\nI looked for this setting but havent found it:\n\n```\nCoverage Target\n\nnumber; 0 <= N <= 100 | auto\n\nauto: (default) Codecov will compare coverage against the parent commit to determin if coverage increased or decreased.\n\nnumber: Codecov will set the status based on if coveage was greater then or equal to the target.\n```\n\n```\nThreshold\n\nnumeric; 0 <= N <= 100\n\nTo submit this notification the coverage must change beyond the threshold.\n\nthreshold: 1.25\n```\n\nBut never seem like a delta. \n \"the coverage must change beyond the threshold.\" sounds like what I'm thinking of. So I guess:\n\n```\nnumber: auto\nthreshold: 0.1\n```\n\n(It sounds like it only shows up at all if it changes by more than threshold one way or the other, so I've set it quite low so we can get a +1 when coverage increases).\n > (It sounds like it only shows up at all if it changes by more than threshold one way or the other, so I've set it quite low so we can get a +1 when coverage increases).\n\nthat's not how I understand it, I understand it as coverage bot making a comment. \n\nBut that mean we'll get a coverage not passing for -0.1\n updated. \n > But that mean we'll get a coverage not passing for -0.1\n\nWe can always ignore it and merge anyway, and it's probably a prod in the right direction.\n sure, let see and update if necessary. I just dont want to get failure for drop of 0.01 in coverage. \n I tried to disable these commit statuses entirely at the team config level when codecov decided to throw out all user preferences a bit ago. I don't like coverage being part of the test-passing status, so I would rather just turn it off than try to pick some heuristic for what should count as \"passing\"\n The automated comments annoy me, but I do like seeing coverage changes in the PR status.\n I tend to agree with Min on the general idea, but I think that a drop of 10% in coverage, is likely a mistake where you accidently skip or drop some of the tests (which happened to me more than once). \n I agree with @takluyver that having a little info in the status is useful. I just don't think coverage should be considered for failure. So if it were up to me, I would probably tell it to set a coverage of 1% as the threshold for success. @Carreau if you want to set the drop threshold to something large like a 10-20% drop in total coverage, that's probably enough that it won't fail unless something really is wrong.\n Threshold set to 10.\n","Optional parameters are easy enough, but for this kind of 'slot' API where we're defining an interface for third parties to provide, I think we should keep it as simple as possible. Adding alternative methods to do the same thing makes the API contract more complicated - do both methods need to be implemented, or only one? If the latter, which, or does it just need either one?\n Agreed. The `Checkpionts` is an abstract-class / interface and I would not like to add another 'must to be implemented' method myself.\n\nI am relatively new to Notebook so I am not sure of the wide use-cases here, but in my limited interaction with it, I see that check-points are mostly useful for books that are currently open and being edited (rather than closed / not-actively being edited ones, unless we are thinking of creating checkpoints through REST api for closed books just for the sake of it), models are usually available with the user in the memory by the time they need to create a checkpoint.\n\nOr, may be there are other use-cases, where someone needs to create a checkpoint but do not have the model with them readily - I am yet to encounter such cases though.\n\nNot sure how optional parameters in Python interfaces /abstract-classes work - but assuming if the method were to define like the below, with documentation that specify the `model` parameter is optional and one can use it only if it is valid (`not None` in python?) and ignore it otherwise:\n\n```\ncreate_checkpoint(self, contents_mgr, path, model = None) \n     # if model is not None use it,\n     # otherwise get the model from path\n```\n\nWould that kind of scenario possible?\n\nI think this one will be backward-compatible with existing code too.\n That's certainly possible, but then checkpoint-manager authors would have to test it both with and without that parameter set. @ssanderson , you're the first person I think of for things like this - do you think it's worth the extra complexity for a potential improvement in performance when creating checkpoints?\n\nThere's also the question of how to do it in a backwards compatible way, if we do it. [This](http://backcall.readthedocs.org/en/latest/) might be useful.\n > I am relatively new to Notebook so I am not sure of the wide use-cases here, but in my limited interaction with it, I see that check-points are mostly useful for books that are currently open and being edited (rather than closed / not-actively being edited ones, unless we are thinking of creating checkpoints through REST api for closed books just for the sake of it), models are usually available with the user in the memory by the time they need to create a checkpoint.\n\nIMO, the abstraction presented by `Checkpoints` is for storage that is **more durable** than the `ContentsManager` currently in use.  In particular, they represent saved notebook states that are not overwritten by the Notebook's built-in autosave, and the saved states can be restored.  IPython's built-in FileCheckpoints class only supports a single checkpoints but other checkpoints classes (including at least https://github.com/quantopian/pgcontents/blob/master/pgcontents/checkpoints.py#L33) allow multiples.  It'd be a straightforward extension to add multiple checkpoint support for a filesystem-based `Checkpoints` as well.\n\n> Or, may be there are other use-cases, where someone needs to create a checkpoint but do not have the model with them readily - I am yet to encounter such cases though.\n\nThere's UI in the notebook to create a Checkpoint, which results in REST API calls being made to the following Tornado handler:\n\n```\n    @web.authenticated\n    @json_errors\n    @gen.coroutine\n    def post(self, path=''):\n        \"\"\"post creates a new checkpoint\"\"\"\n        cm = self.contents_manager\n        checkpoint = yield gen.maybe_future(cm.create_checkpoint(path))\n        data = json.dumps(checkpoint, default=date_default)\n        location = url_path_join(self.base_url, 'api/contents',\n            path, 'checkpoints', checkpoint['id'])\n        self.set_header('Location', url_escape(location))\n        self.set_status(201)\n        self.finish(data)\n```\n\nThis lives in `IPython.services.contents.handlers.CheckpointsHandler` in the 3.x branch of IPython, and presumably somewhere analogous in this repo.  Notably, this does not send the model to be checkpointed.  For the two implementations of which I'm aware, namely IPython's `FileCheckpoints` and pgcontents' `PostgresCheckpoints`, there exists an efficient implementation of `create_checkpoint` that never pulls the model into memory, (a filesystem copy and an in-database copy, respectively).\n > As a result, code such as this has to issue another get() request to load the model, while it already has access to a model right there with it in main memory (Refer this line).\n\nWhen you say `get()` request, do you mean another HTTP GET request, or just another call to the `get_checkpoint` method?  If the former, I'm confused what you mean.  If the latter, then the model only gets pulled into memory extraneously when using `GenericCheckpointsMixin` (which it sounds like you are given the other issue you opened?)  If you're using FileContentsManager and FileCheckpointsManager, then we short-circuit to a filesystem copy and no extra work gets done.  Can you describe your particular use-case?\n As far as amending the API to be `create_checkpoint(self, contents_mgr, path, model=None)`, the main worry I'd have is that it makes it possible to pass inconsistent/meaningless sets of arguments.  For example, it's possible to pass a path and a model with a different `'path'` entry.  That's not an insane amount of extra complexity by any means, but I'd want there to be some motivation for allowing the possible duplication of input.\n Ok, below callstack may help clear few things. This is presently what is happening when a user tries to create a new python notebook:\n\n```\n    FileContentsManager._notebook_model in filemanager line 306 Python\n    MongoDBContentsManager.get in simple_notebook_manager line 114  Python\n    GenericCheckpointsMixin.create_checkpoint in checkpoints line 79    Python\n    ContentsManager.create_checkpoint in manager line 459   Python\n>   FileContentsManager.save in filemanager line 388    Python\n    ContentsManager.new in manager line 364 Python\n    ContentsManager.new_untitled in manager line 338    Python\n    ContentsHandler._new_untitled in handlers line 173  Python\n    wrapper in _make_coroutine_wrapper in gen line 212  Python\n```\n\nIn the `FileContentsManager.save` method below is the relevant code portion:\n\n```\n                nb = nbformat.from_dict(model['content'])\n                self.check_and_sign(nb, path)\n                self._save_notebook(os_path, nb)\n                # One checkpoint should always exist for notebooks.\n                if not self.checkpoints.list_checkpoints(path):\n                    self.create_checkpoint(path)\n```\n\nThe `model` is available just couple of lines above, but `FileContentsManager.save()` is not using it in the call to `self.create_checkpoint(path)`. Rather if you observe in the callstack it goes and leads to `GenericCheckpointsMixin.create_checkpoint` which has below code inside it:\n\n```\n    def create_checkpoint(self, contents_mgr, path):\n        model = contents_mgr.get(path, content=True)\n        type = model['type']\n        if type == 'notebook':\n                 ....\n```\n\nIt is trying to retrieve the model again from storage (filesystem/db ...). The get() I was referring to earlier was this: `contents_mgr.get()`\n\nYou are right. I am trying to take advantage of `GenericCheckpointsMixin`.\n\nAs for path, model arguments side-by-side, you may be right about misuse. But then, I am seeing many methods with both 'model and path' parameters already in the code. I might have misread the context, but few methods are: `GenericCheckpointsMixin::create_file_checkpoint(), GenericCheckpointsMixin::create_notebook_checkpoint() etc`\n\nIn fact what is more interesting is, `ContentsManager::save(self, model, path)` itself has both model and path parameters. Again, the context of those parameters and their meaning could be different, but I believe `checkpoint` is so much similar to `save`.\n @ssanderson there's no clever filesystem stuff involved in our implementation, as far as I know. We use some Python utilities to copy, but it's still ultimately just opening both files, reading chunks from the source and writing them to the destination.\n @KrishnaPG sorry, I lost track of this issue.  I'll try to write up a proper response tonight.\n > there's no clever filesystem stuff involved in our implementation, as far as I know.  We use some Python utilities to copy, but it's still ultimately just opening both files, reading chunks from the source and writing them to the destination.\n\nI think we just use `shutil.move` or a variant, which means we only ever hold part of the copied file in memory, and (probably more importantly) we don't deserialize or re-serialize the model; we just interpret the file as bytes and move those bytes elsewhere.  \n\nI don't know without profiling whether how the IO cost of re-reading and re-writing the raw file bytes compares to the work of deserializing a model from memory.  Both are probably negligible for average-sized notebooks on a single-user installation.  In a shared context the issue might become more important.\n @KrishnaPG re-reading through this and https://github.com/jupyter/notebook/issues/142 to make sure I understand the issues raised:\n- w/r/t https://github.com/jupyter/notebook/issues/142, I think adding an `exists` to `Checkpoints` with a default implementation of `return bool(self.list_checkpoints(path))` makes sense.\n- In FileContentsManager's `save()` implementation, we ensure that a checkpoint exists for the the notebook being saved.  In the case that no such notebook exists, we create a new one after saving, which, when using `GenericCheckpointsMixin`, involves reloading a model from our Contents storage engine before sending that model to our Checkpoints storage engine.  In the particular context described, (unlike the one where the user manually creates a checkpoint in the UI), we already have the to-be-saved model in memory, which means that we're doing an extraneous read.  The proposed solution would be to add `model` as a new argument to the `Checkpoints` base class, with a default of `None`, which would change the first couple lines of `GenericCheckpointsMixin.create_checkpoint` from\n\n```\ndef create_checkpoint(self, contents_mgr, path):\n    model = contents_mgr.get(path, content=True)\n    ...\n```\n\nto\n\n```\ndef create_checkpoint(self, contents_mgr, path, model=None):\n   if model is None:\n       model = contents_mgr.get(path, content=True)\n   ...\n```\n\nAll of that seems reasonable to me, though it will be a backwards-incompatible change, since it will only be useful if the snippet from `FileContentsManager.save()` gets changed to:\n\n```\nif not self.checkpoints.list_checkpoints(path):\n    self.create_checkpoint(path, model=model)\n```\n\nwhich will break old `Checkpoints` implementations that don't expect a `model` argument.\n\nThis means that we'd be making a (mild) backwards-incompatible change that adds a small amount of complexity in exchange for possible performance gains in the specific case of running a non-local `Checkpoints` with the default `FileContentsManager`.  I'll leave it up to the Jupyter maintainers whether that's a reasonable change to make.  It'd be relatively little work for me to update pgcontents to work with the proposal here.\n Thanks @ssanderson I agree, and will wait for comments from the maintainers.\n I don't have a strong feeling either way. If we want to add a parameter without breaking backwards compatibility, I have an experimental module [backcall](https://github.com/takluyver/backcall) that exists for precisely that purpose.\n\n@minrk , any preference?\n I think adding the arg is fine, especially with the proposed optional behavior. I don't think custom checkpoint managers are common enough that we need to be too concerned about adding one arg, since it's still easy to write one API that works in both 3 and 4.\n","Solved. I had missing ipython files and I reinstalled it.\n","@Carreau I think you recently changed how cells use the frontend config. Can you work out how to set something like this?\n > @Carreau I think you recently changed how cells use the frontend config. Can you work out how to set something like this?\n\nI haven't [merged it yet](https://github.com/jupyter/notebook/pull/1423), but will investigate. \n Ok, so that will be really hard to fix. \n\nIt's due to webpack. The module instance you get by `require()` in the custom JS is actually a completely different one that the one which is bundled by webpack. \n\nThat is to say you actually have 2 complete version of CodeCell that are in the minified files....\n I suggest adding a maintained configuration file parameter for users who find this completion behavior strange to turn it off. \n\nWhile a great feature for slow typists to save some keystrokes, the latent surprise factor of this feature really clogs the mind-keyboard unity of fast typists. \n We're planning to back away from webpack, so the custom.js snippet above will hopefully start working again.\n","@Carreau I just created a PR against your branch :smile:\n Thanks @Carreau.\n","We need some shell scripting, a Makefile, and a couple of scripts written in lolcode somewhere in that toolchain. How are we meant to be web 2.5 with only two languages?\n Wow that's painful.\n\nI'm assuming this would look better:\n- npm run build:css\n  - Builds the CSS by calling less\n\nI'm assuming this project would need to get off bower, switch to full `npm` usage, and [be reliant on npm scripts](http://blog.keithcirkel.co.uk/how-to-use-npm-as-a-build-tool/).\n Getting off of bower would rely on better versions of requirejs and mathjax npm packages. \n As in, the requirejs package does not currently play well with webpack. \n We have told quite a few people to use `python setup.py css js`, so those should probably keep working, however it works internally.\n setup css/js can call `npm run build`, but `npm run x` probably shouldn't call `setup.py`.\n #1436 removes the js->python call.\n\nI still wish that webpack, etc. (everything, really) used Makefile-style detection to determine if builds need to run again, because unnecessary webpack rebuilds take a _really_ long time.\n Looking again, the npm packages for requirejs abd bower are self-contained, so they could be fetched via as npm packages and then served in-place or move the files to another location for serving. \n Thanks. \n\n> I still wish that webpack, etc. (everything, really) used Makefile-style detection to determine if builds need to run again, because unnecessary webpack rebuilds take a really long time.\n\nAre you going to rewrite a javascript building tool ? But agree, even if not based on datetime at least invalidate only part of the build graph when content hash changes...\n","As far as I can see, this is now also working on iframed notebooks, no? I just tested it on try.jupyter. Though @Carreau just found that the iframing seems broken there, but at least he checked that this particular bug is fixed. Closing, let me know if I missed something...\n","> by adding config=True as an argument to the creation of extra_static_paths\n\nI'm confused [extra_static_path](https://github.com/jupyter/notebook/blob/178f9f3edf5c1833b6c55b8d560d47da9556d468/notebook/notebookapp.py#L685-L690) already have config=True since at least 2012.\n\nYou probably mean `static_custom_path`.\n\nSo don't use custom JS, use extensions, you can enable/disable extensions independently and extensions behave identically as customJS. Use the environment variable `$JUPYTER_CONFIG_DIR` if you want multiple configurations\n","What an improvement. It looks like the bower fetch still needs to be run prior to building CSS.\n After a bit of fiddling, this works now. less-2.7 fixes compatibility with node-6, but introduces a sourcemap  bug (less/less.js#2896). We should upgrade LESS and restore source maps once they ship 2.7.1 with the fix.\n Great!\n\nOn Sun, May 8, 2016 at 9:03 AM, Kyle Kelley notifications@github.com\nwrote:\n\n> Merged #1436 https://github.com/jupyter/notebook/pull/1436.\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/1436#event-653742044\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @minrk 2.7.1 is available by now...\n","> I found documentation stating that I should remove them like so:\n\nI'm curious where you found that. \n\nYou need to call `keyboard_manager.register_events(yourelement)` to ignore any keypress that would be done in your custom input. That should be taken care of when you use widgets though. \n It's listed [here](https://github.com/jupyter/notebook/blob/41d6da235cbf3bcf6d7f818e11a066e0fd12ff8b/docs/source/examples/Notebook/Custom%20Keyboard%20Shortcuts.ipynb) on this repository\n This documentation does not state that you **should** remove them, this documentation is for each individual user to customize their keymap. We'll try to clarify. \n\nI see you closed so I guess my above answer solved it for you. \n\nThanks. \n","Hi there, sorry for the really really too long delay to respond to your issue, \nwe should have some manpower to take care of responding to user and fix major issues soonish.\n\n@michaelpacer Nbconvert should become your area of expertise in the next few month, \nwhen you have some minutes during a break in your dissertation can you try to check this issues, potentially migrating it to the nbconvert repository if it's still happens and close this once done ? \n\nThanks !\n On `jupyter` 5.0.0.dev and `nbconvert` 4.2.0 this seems to be fixed. but I'm also on OS X i'll try to reproduce with an older version of nbconvert. \n\n@emreg00 do you know what version of nbconvert you were using?\n This was fixed by jupyter/nbconvert#242.\n Thank you both, good to know it is fixed!  @michaelpacer, the version of nbconvert I used was 4.0.0\n","@Carreau @takluyver Thoughts? I'm seeing the same behavior as Chris (thanks for filing the issue) using the IJulia 0.4.5 kernel with similar OS config using Chrome or Firefox.\n\nFWIW, there is some syntax highlighting with the same notebook in JLab alpha:\n<img width=\"947\" alt=\"screen shot 2016-05-10 at 9 20 11 am\" src=\"https://cloud.githubusercontent.com/assets/2680980/15154098/c94ced7c-1690-11e6-91dc-8973f7f253bb.png\">\n I also see it, but I don't know what's causing it. There's no error in the JS console.\n It's the same that webpack that f**-up #1431 too, `require` just does not\nwork anymore, or at least not correctly, and there are basically 2\ndifferent CodeMirror library loaded on the page. So the mode is indeed\nloaded correctly, but attached to the wrong copy of the module, so when the\ncell highlighting changes, codemirror will just not find the mode, and give\nup.\n\nOn Tue, May 10, 2016 at 9:34 AM, Thomas Kluyver notifications@github.com\nwrote:\n\n> I also see it, but I don't know what's causing it. There's no error in the\n> JS console.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1439#issuecomment-218215291\n And that unfortunately **is** #1047, that I just bisected, so the introduction of webpack **did** break all the kernels and many custom js and extensions.\n\nPing @ellisonbg , @fperez , @jdfreder as this is pretty important. \n Ouch, thanks for tracking this down. I am traveling more today. @jdfreder\nis going to work on Friday for us and may be able to help us figure this\nout...\n\nOn Tue, May 10, 2016 at 10:52 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> And that unfortunately _is_ #1047\n> https://github.com/jupyter/notebook/pull/1047, that I just bisected, so\n> the introduction of webpack _did_ break all the kernels and many custom\n> js and extensions.\n> \n> Ping @ellisonbg https://github.com/ellisonbg , @fperez\n> https://github.com/fperez , @jdfreder https://github.com/jdfreder as\n> this is pretty important.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1439#issuecomment-218237295\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n FWIW. When I started the notebook the output to the terminal had a message: \n\n```\nIt looks like you're running the notebook from source.\n    If you're working on the Javascript of the notebook, try running\n\n        npm run build:watch\n\n    in another terminal window to have the system incrementally\n    watch and build the notebook's JavaScript for you, as you make changes.\n```\n\nDoing as instructed I opened another terminal window and ran this at the notebook source root directory and got these Babel errors:\n\n<img width=\"928\" alt=\"screen shot 2016-05-10 at 9 50 50 am\" src=\"https://cloud.githubusercontent.com/assets/2680980/15155024/7edf403c-1695-11e6-855a-2807346ed2ed.png\">\n These are not errors, they are notes. Perfectly fine.\n\nThe issue is that webpack create a main.min.js, and an index.js . index.js\nis meant to map the require calls to bundled modules, but main and index\nend up being 2 different namespace, each with their own module versions.\nOn May 10, 2016 11:05, \"Carol Willing\" notifications@github.com wrote:\n\n> FWIW. When I started the notebook the output to the terminal had a\n> message:\n> \n> It looks like you're running the notebook from source.\n>     If you're working on the Javascript of the notebook, try running\n> \n> ```\n>     npm run build:watch\n> \n> in another terminal window to have the system incrementally\n> watch and build the notebook's JavaScript for you, as you make changes.\n> ```\n> \n> Doing as instructed I opened another terminal window and ran this at the\n> notebook source root directory and got these Babel errors:\n> \n> [image: screen shot 2016-05-10 at 9 50 50 am]\n> https://cloud.githubusercontent.com/assets/2680980/15155024/7edf403c-1695-11e6-855a-2807346ed2ed.png\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1439#issuecomment-218240788\n @Carreau Thanks for the explanation. Too many JS details :P I appreciate the detailed explanation of the current issue \ud83d\udc4d \n Using `%%script ruby` instead of the `%%ruby` shortcut enables *some* syntax highlighting for Ruby, but it appears to just apply Python highlighting to the non-Python code ([jupyter/help/issues/43](https://github.com/jupyter/help/issues/43)).\r\n Thanks @MatthewSteen for posting this in both locations.\n Reopening as #1490 seem to be only mitigating the issue without fixing the underlying behavior. And rely on the hack that `require` is also name `requirejs` in browser.\n\nIn particular the fix cannot be applied to the following codemirror modes:\n\n```\ndjango/django.js:        require(\"../../addon/mode/overlay\"));\ndockerfile/dockerfile.js:    mod(require(\"../../lib/codemirror\"), require(\"../../addon/mode/simple\"));\nfactor/factor.js:    mod(require(\"../../lib/codemirror\"), require(\"../../addon/mode/simple\"));\ngfm/gfm.js:    mod(require(\"../../lib/codemirror\"), require(\"../markdown/markdown\"), require(\"../../addon/mode/overlay\"));\nhandlebars/handlebars.js:    mod(require(\"../../lib/codemirror\"), require(\"../../addon/mode/simple\"), require(\"../../addon/mode/multiplex\"));\nhtmlembedded/htmlembedded.js:        require(\"../../addon/mode/multiplex\"));\nmodelica/modelica.js:    mod(require(\"../../lib/codemirror\"));\nnsis/nsis.js:    mod(require(\"../../lib/codemirror\"), require(\"../../addon/mode/simple\"));\nrst/rst.js:    mod(require(\"../../lib/codemirror\"), require(\"../python/python\"), require(\"../stex/stex\"), require(\"../../addon/mode/overlay\"));\nrust/rust.js:    mod(require(\"../../lib/codemirror\"), require(\"../../addon/mode/simple\"));\ntornado/tornado.js:        require(\"../../addon/mode/overlay\"));\ntwig/twig.js:    mod(require(\"../../lib/codemirror\"),  require(\"../../addon/mode/multiplex\"));\nvue/vue.js:        require(\"../../addon/mode/overlay\"),\n```\n\nAlso the loading `addon`, `keymap`, and `theme` in codemirror is likely still broken.\n This cannot be due to webpack on 4.x, because webpack is not used on 4.x. I was confused by a comment in #1511, so I thought this applied to 4.x. I checked, and this issue doesn't affect 4.x, where highlighting is already working just fine. I've update the milestone to 5.0, accordingly.\n Hum weird. I was pretty sure I tried.\nOn Jun 7, 2016 04:08, \"Min RK\" notifications@github.com wrote:\n\n> This cannot be due to webpack on 4.x, because webpack is not used on 4.x.\n> I was confused by a comment in #1511\n> https://github.com/jupyter/notebook/pull/1511, so I thought this\n> applied to 4.x. I checked, and this issue doesn't affect 4.x, where\n> highlighting is already working just fine. I've update the milestone to\n> 5.0, accordingly.\n> \n> \u2014\n> You are receiving this because you modified the open/close state.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1439#issuecomment-224249251,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AAUez1Hl2REI1KhMsXzuLl34LhuNysCYks5qJVE2gaJpZM4IbN7Z\n> .\n I think this is fixed now that we've dropped webpack again. I'm still seeing this in Jupyter for 2.7. \r\n\r\n* jupyter_client-4.4.0\r\n* jupyter_console-5.0.0\r\n* jupyter_core-4.2.0\r\n\r\n---\r\n\r\n**Jupyter - long cell magic applies Python highlighting to Ruby**\r\n\r\n![image](https://cloud.githubusercontent.com/assets/8397034/22472054/af82af12-e791-11e6-9ad0-c8a4a9fe2caa.png)\r\n \r\n---\r\n\r\n**Jupyter - short cell magic highlights all code as a string**\r\n\r\n![image](https://cloud.githubusercontent.com/assets/8397034/22472235/453a7526-e792-11e6-9ea0-bf576128f295.png)\r\n\r\n---\r\n\r\n**Atom**\r\n\r\n![image](https://cloud.githubusercontent.com/assets/8397034/22472169/0e137188-e792-11e6-9484-8eba86f6b140.png)\r\n @MatthewSteen I don't think either of those is the same issue; this was about other kernels, rather than cell magics.\r\n\r\nI think the case with `%%script` is expected: we don't try to do anything clever with highlighting for the `%%script` cell magic, so it will get the default syntax highlighting.\r\n\r\nThe issue with %%ruby is not expected, though - please can you file a new issue for that?"," https://github.com/ipython/ipython/pull/8524\n Someone with access to such things can feel free to assign this to me.\n Thanks! Unfortunately, Github only lets us assign to people with push access to the repo, as far as I know. \n Welp...I totally forgot about this.  Thanks for picking up my slack @takluyver.\n No worries. I had forgotten too, I just opened up issues with the 4.0 milestone and saw this. Thanks for filing it - it would definitely have got lost if you hadn't.\n","Is there anything in the command prompt just before that KernelRestarter message that might indicate why it's crashed? I don't think we've heard of anything like this before. Could it be running out of memory?\n As for memory, I have 16GB of memory and was running some light-weights scripts. \nI switched to Python 3.5 but still get the same error.\n\nWhen I run the notebook server via the Anaconda prompt, this is the error message I get before the connection is reset:\n\n[I 19:19:18.291 NotebookApp] Saving file at /Documents/Python Scripts/test.ipynb\nAssertion failed: Software caused connection abort (bundled\\zeromq\\src\\signaler.cpp:181)\nAssertion failed: Connection reset by peer (bundled\\zeromq\\src\\signaler.cpp:181)\nAssertion failed: Connection reset by peer (bundled\\zeromq\\src\\signaler.cpp:298)\nAssertion failed: Connection reset by peer (bundled\\zeromq\\src\\signaler.cpp:181)\n That sounds like it's ZMQ that's failing. @minrk might be able to suggest something.\n That does sounds like a zmq problem, possibly with the conda zmq package. What version of the `pyzmq` and `zeromq` packages do you have?\n The latest versions (I'd reckon):\nzeromq=4.1.3\npyzmq=15.2.0\n\nUpdate on the larger picture: \nI now have two Win 10 Laptops, ASUS GLV552-DH74 and Dell Inspiron 15 7559, running the same version of the OS (version 1511, Build 10586). Jupyter notebooks installed via Anaconda2-4.0.0-Windows-x86_64 (Both 2.7 and 3.5) work perfectly off the shelf in the Dell Inspiron laptop while the ASUS one croaks up after 2-3 hours _exactly_ as described here:\n\nhttps://github.com/ipython/ipython/issues/9236 \nhttps://github.com/zeromq/libzmq/issues/1808\n\nI have tried downgrading pyzmg to 14.x and with the anti-virus turned off and firewall disabled.\nSo far, nothing seems to work with the ASUS laptop.\n It's possible that reinstalling zeromq and pyzmq will help. I'm not sure.\n It looks like this isn't a notebook bug per-se, closing for now. It can be reopened on zmq if needed or if more information arises.\n I'm facing the exact same problem on Windows 10. \n\nI assume this does not just happen with the Jupyter notebooks. My Spyder IDE also crashes after an hour or so.\n","This isn't a bug, we don't have tab-based completion implemented at all on any platform.\n\nI'll mark it as a wishlist item, but it's not something we're prioritizing right now for implementation soon. In the upcoming [JupyterLab](https://github.com/jupyter/jupyterlab), the system does support tab completion for commands, so this may have to wait til that comes out of alpha.\n","Thanks @Carreau for the heads up. Will look at Sphinx and nbsphinx.\n\nOddly, it looks good in GitHub. Including the link to the rendered doc on GitHub for others: https://github.com/jupyter/notebook/blob/master/docs/source/examples/Notebook/Notebook%20Basics.ipynb\n I'm not seeing any warnings in the doc build: https://readthedocs.org/projects/jupyter-notebook/builds/3992427/ . Might be an issue with nbsphinx.\n This is a limitation of nbsphinx: it only supports images embedded with `![alt](path)` syntax, not with `<img src=\"path\">` raw html syntax.\n\nI'm closing this here and opening it on the nbsphinx repo. In the meantime, it means that if we want images in our docs from markdown cells, we must limit ourselves to the more basic syntax (which precludes custom size hints).  So we can use that workaround for now, until nbsphinx adds this feature.\n","See #2104  Closed by #2104.","Or both!\n","You can use nbconvert to run a notebook non-interactively (with the `--execute` flag). You can automate that to run regularly using cron (on Unix systems), or Windows 'scheduled tasks' (does Windows still have that? I haven't used recent versions much). There are browser extensions you can get that automate reloading a page every few minutes. It's not a very integrated solution, but all the pieces are there to do it quite easily.\n\nA bit more challenging would be to write a JS extension that executes a given cell/cells on a schedule.\n Thank you for your answer. I ended up finding this --execute option a while after I created this issue.\nI am going towards your solution as well, I'm going to execute the R notebook I have by calling Jupyter inside a Python application to generate the HTML report I want, and also I'm going to use an Add-On for Firefox that auto-reloads a HTML page whenever it is changed.\n\nI appreciate your time and effort, have a nice day.\n","Good point, we should do that for most `%%whatever` magics.\n In this case you could use `Codemirror.findModeByFileName()` to find the right mode.\n > In this case you could use Codemirror.findModeByFileName() to find the right mode.\n\nOh, is this function as recent addition to CM ?\n I'm not sure when it was added, but we're using it in JupyterLab: https://github.com/jupyter/jupyter-js-ui/blob/master/src/codemirror/index.ts#L24\n As a question, how difficult would it be to make it so that should ever the file type of %%writefile be a CSV, then the text is justified to align to commas?\n\nThis would visually present CSV files very well, and double as an intuitive way to input data.\n I'm not sure exactly what options codemirror provides, but I'd guess that would be pretty hard.\n\nHave a look at [handsontablejs](https://pypi.python.org/pypi/handsontablesjs/0.0.1) for a (prototype) way to edit data frames in the notebook - it works with pandas data frames, but they can easily load from and save to CSV.\n Yeah, I thought it would be non trivial. Do you think it would be worth me attempting a plugin that simply adds spaces before commas to pad out the csv for alignment? Or would that also be non trivial? I haven't played around with plugins before.\n\nI'll give handsontablesjs a try. Thanks for the tip.\n Unfortunately the handsontablesjs method won't work for my purpose. I have been specifically requested to have a permanent record of everything used to make the model within the notebook. Hence writing the CSV file directly into the notebook.\n We have an idea we're planning to develop that we call 'editor plugins' - i.e. alternative interfaces to write/edit the contents of a cell. A data entry table would make perfect sense in that system, so you might want to keep an eye out for that functionality. It should, I hope, get implemented in the next few weeks.\n Ahh brilliant. Thank you. Will do. One great feature currently available is that I can drag and drop a csv file from the file browser directly into the cell and it fills it out as expected.\n\nWould a custom data entry table plugin stop something like that from working?\n I'm surprised that works at present, actually :confused: . A custom editor plugin should be able to handle drop events, though, so it should work with that.\n Brilliant. Would the custom editor plugin be able to activate only if certain text is within the cell?\n\nAnd would this maybe work like \"tabs\" above a cell? Essentially if the plugin is active, and then \"%%writefile (*).csv\" gets written at the top of a cell, then a data entry tab would appear.\n\nMight the set up be something like that?\n I just realised you would probably use the metadata dropdown box...\n The UI hasn't been worked out, but that's roughly the idea - there'll be some way to switch between the table view that the plugin provides and the raw code that it translates the table into.\n Wonderful. Do you know anyone else who is looking to make a data table type editor with the new plugin method? See if I can work together with them.\n Not yet, but I imagine that once support for editor plugins is implemented, there will be other people who'd want to work on a data table editor with you.\n","Can you give an example notebook ? \n @Carreau \n\nSorry but the notebook server I'm using is hosted inside the company's network. However I can provide  a Dockerfile which I'm using for deploying the server:\n\n``` dockerfile\nFROM jupyter/notebook\n\nENV DEPS r-base r-base-dev r-recommended dvipng ghostscript poppler-utils libfreetype6-dev libpng12-dev libpng12-dev libjpeg-dev\nENV PACKAGES numpy requests pillow pymongo rpy2 scipy beautifulsoup4 networkx matplotlib scikit-learn\n\nRUN sed -i 's%archive.ubuntu.com%mirrors.ustc.edu.cn/ubuntu%g' /etc/apt/sources.list && \\\n    echo '\\ndeb http://mirrors.tuna.tsinghua.edu.cn/CRAN/bin/linux/ubuntu trusty/\\n' >> /etc/apt/sources.list && \\\n    apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9\n\nRUN mkdir -p ~/.pip && \\\n    echo '[global]\\nindex-url = https://pypi.mirrors.ustc.edu.cn/simple' > ~/.pip/pip.conf\n\nRUN apt-get update && \\\n    apt-get install -y $DEPS && \\\n    apt-get clean && \\\n    rm -rf /var/lib/apt/lists/*\n\nRUN for pkg in $PACKAGES; do pip2 --no-cache-dir install $pkg; done\nRUN for pkg in $PACKAGES; do pip3 --no-cache-dir install $pkg; done\n\nRUN echo \"c.NotebookApp.base_url = '/ipython/'\" >> /root/.jupyter/jupyter_notebook_config.py\n```\n\nas well as the `docker-compose.yml` I'm using for starting up the server:\n\n``` yaml\njupyter:\n    restart: always\n    image: 10.76.2.13:5001/jupyter\n    ports:\n        - 9088:8888\n    volumes:\n        - /docker/jupyter:/notebooks\n```\n\nand nginx configuration for `/ipython/` location:\n\n```\n    location ^~ /ipython {\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header Host $http_host;\n\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n\n        proxy_pass http://127.0.0.1:9088;\n        proxy_redirect off;\n    }\n```\n\nI believe it's a clean setup: the only thing I changed is the base_url. Could you please test with the configuration above? Thanks.\n Oh, sorry, I'm more interested in the content of the notebook file itself, just for a demo, like if your markdown link `[myfile](mifile.pdf)` or `[myfile](/myfile.pdf)`, or did I misunderstand and you download from the dashboard, or is it actually `file`> `download` ?\n I wrote a small python script that retrieves data and save it to a JSON file in the same directory where the script is located. The issue occurred when I'm trying to download the JSON file directly from the tree view of the notebook.\n ![unti](https://cloud.githubusercontent.com/assets/652068/15273148/f33cd274-1ac2-11e6-8ac7-b59ba37b31c1.jpg)\nThis is the download I meant, it's redirecting me to a 404 page when `base_url` is enabled.\n See https://github.com/jupyter/notebook/blob/master/notebook/static/tree/js/notebooklist.js#L888 , I believe\n\n``` javascript\nwindow.open(utils.url_path_join('/files', item_path) + '?download=1');\n```\n\nshould be \n\n``` javascript\nwindow.open(utils.url_path_join(this.base_url, 'files', item_path) + '?download=1');\n```\n\nAnd `TODO` on line 881 seems pretty easy to fix too:\n\n``` javascript\n// TODO(nhdaly): Support download multiple items at once.\n```\n\nperhaps just one quick loop will do?\n @w1ndy that fix looks right to me, do you want to make a pull request?\n\nDownloading multiple files might be a bit trickier, because I don't think the JS lets us trigger more than one download from one click. Usually the way things like webmail get round that is to let you download a zip file of the files you selected. We can do the same, but that's a separate issue from fixing this.\n Fixed by #1916 ","@juhasch @jcb91 - is this something that could be done in an extension? Is there already an extension that does it?\n I'm sure it _could_ be done, though I'm not aware of any current implementation (haven't looked specifically). It also sounds like the kind of thing which may have been implemented as a CodeMirror plugin. I'll have a look.\n something like https://codemirror.net/demo/matchhighlighter.html\n Good find, that's exactly it.\n now available packaged as a jupyter notebook extension at [jcb91/jupyter_highlight_selected_word](https://github.com/jcb91/jupyter_highlight_selected_word)\n Thanks @jcb91 !\n","closed by #1117","Cool, thanks @blink1073! What cleaning up do you need to do?\n Just general housekeeping on the changes, making sure I didn't add/remove too much.\n @minrk, I though about this more over the weekend, and I think it would be prudent to hold off on this until we switch over to `phosphor-ui`, since the existing phosphor repos have a `dedupe` post install script and we have previously established in this repo that we would only `dedupe` once and only if using an older `npm`.\n Sure, that makes sense.\n Closing in favor of #1506.\n","You can probably create an extension that add a list of \"template\" cells, that should not be too hard to do. I'll mark as sprint friendly, but it will likely not be in the core.\n Many thanks @Carreau for pointing the way. I hacked together a script to implement the utility. Based on community [[book]()](https://carreau.gitbooks.io/jupyter-book/content/Jsextensions.html), I made a script under the C:\\Users\\xxx.xxx\\AppData\\Roaming\\jupyter\\nbextensions\\ in a subfolder named main.js:\n\n```\ndefine(function(){\n  return {\n    load_ipython_extension: function(){\n        Jupyter.notebook.insert_cell_above('code', 0).set_text('import cufflinks as cf\\n')\n    }\n  };\n})\n```\n\nand config jupyter to load it when it starts. But how can I tell if the notebook loaded is an existing or new one, ideally the script should only insert cell if it is a new notebook. If possible, could this be something that is easily achieved or not possible? just point me to the direction of the documentation, I'm happy to code more. Thanks!\n This is a good idea! Any progress on this @Paul-Yuchao-Dong ?\n > and config jupyter to load it when it starts. But how can I tell if the notebook loaded is an existing or new one, ideally the script should only insert cell if it is a new notebook. If possible, could this be something that is easily achieved or not possible? just point me to the direction of the documentation, I'm happy to code more. Thanks!\n\nSorry missed that. \n\nYou can probably look at the number of cells. There is no way to differentiate otherwise. \nsomething like : \n\n```\nif (Jupyter.notebook.get_cells().lenght==1 && Jupyter.noteboko.get_cell(0).editor.text === '' ){\n   //do your thing\n}\n```\n @Carreau No worries, thanks for pointing out the way. I've read some of the helpful documentation and realized that this part of the API probably would be changed anyway.\n\nhere's my revised script, I know it's monstrous, but I couldn't figure out how to pass the python code in a more elegant way, so here it is, it does the importing as well as a bit of number formatting:\n\n```\n/*\nhttps://jupyter-notebook.readthedocs.io/en/latest/extending/frontend_extensions.html\n*/\n\ndefine([\n    'base/js/namespace'\n], function(\n    Jupyter\n) {\n    function load_ipython_extension() {\n      if (Jupyter.notebook.get_cells().length===1){\n   //do your thing\n        Jupyter.notebook.insert_cell_above('code', 0).set_text(\"from __future__ import division, print_function\\nimport numpy as np\\nimport pandas as pd\\nimport matplotlib.pyplot as plt\\nimport matplotlib as mpl\\nimport seaborn as sns\\nimport re\\nfrom calendar import monthrange\\nfrom pandas_datareader import data as web\\nfrom pandas.tseries.offsets import DateOffset, Second, Minute, Hour, Day\\n\\nimport xlwings as xw\\nfrom xlwings import Workbook, Range, Sheet\\n\\nimport plotly.graph_objs as pgo\\nfrom plotly.offline import plot, init_notebook_mode, iplot, iplot_mpl\\nimport pdb\\nimport cufflinks as cf\\n\\npd.options.display.max_rows = 10\\npd.set_option('max_columns', 50)\\nsns.set(style='ticks', context='talk')\");\n        Jupyter.notebook.insert_cell_above('code', 1).set_text(\"import IPython\\nthousand_c = lambda x: '{:,}'.format(x)\\nthousands = lambda arg, p, cycle: p.text('{:,}'.format(arg))\\nnp.set_printoptions(formatter={'float_kind': thousand_c, 'int_kind': thousand_c})\\nclass IntFormatter(pd.core.format.GenericArrayFormatter):\\n    pd.set_option('display.float_format', thousand_c)\\n    def _format_strings(self):\\n        formatter = self.formatter or thousand_c\\n        fmt_values = [formatter(x) for x in self.values]\\n        return fmt_values\\npd.core.format.IntArrayFormatter = IntFormatter\\nfrm = get_ipython().display_formatter.formatters['text/plain']\\nfrm.for_type(int, thousands)\\nfrm.for_type(float, thousands);\");\n      }\n    }\n    return {\n        load_ipython_extension: load_ipython_extension\n    };\n});\n```\n You could also set a custom metadata attribute on either the cell or the notebook as a whole, to keep track of whether it's already been done. Might also be nice to add different configurable init cells for different kernels.\n","What are you running? Does it die if you run something trivial like `a=2`?\n Doesn't die when running a=2. It was my code, thanks takluyver. \n\nRemoving quit() from the code helped. Maybe quit() kills the kernel?\n > Maybe quit() kills the kernel?\n\nThat seems likely! ;-)\n","Since you made this PR from your master branch, it looks like it's pulling in work from other PRs. Do you want to get this back to just the proposed change?\n I'll resubmit. Not sure how to remove commits from an existing PR.\n","@Carreau How can I reproduce the broken/missing kernel part? \n hey, I would duplicate and existing kernelspec and just replace the executable by gibrish\n\n```\n$ jupyter kernelspec list\nAvailable kernels:\n  ...\n  python3      /usr/local/share/jupyter/kernels/python3\n```\n\n```\n$ cd /usr/local/share/jupyter/kernels\n$ cp -r python3/ brokenkernel\n$ sed -i bkp s/ython/broken/g brokenkernel/*.json  # missing p for Python on purpose as kernel name start with uppercase P. \n```\n\nDoes that make sens ? \n","@jakirkham Just to clarify... trailing cells at the end of a notebook or from markdown entered in a cell or something completely different.\n Closing for now due to lack of info (trying to aggressively triage here...). Can reopen if more info comes along.\n That's fine. It's a pretty minor point.\n\nSorry to not respond for so long, @willingc. I had to restructure my notifications around that time so I could keep track of things better. What I was meaning was trailing whitespace in notebook cells. PyCharm does something similar on saves and I was wondering if such a thing could be pursued with the notebook as well.\n Could this feature be provided through the mean of an extension?\n Yes, probably. On the server side, you could set up a [save hook](http://jupyter-notebook.readthedocs.io/en/latest/extending/savehooks.html). And there is probably some way to do it in the JS side as well, but I'm less sure of how that would look.\n","I still don't think Mathjax configuration should be selected by the kernel. Mathjax expressions are also often in Markdown cells, which are not affected by the kernel - it would be weird if they behaved differently depending on the kernel you use. Other relevant considerations might include what browser the user wants to use and accessibility needs - neither of which the kernel is in a place to know.\n This does at least bring up the point that the MathJax configuration is tilted towards whatever is implemented in the currently running notebook, not part of the notebook spec. That does make it difficult for those that render notebooks (e.g. GitHub, nbviewer) as well as introducing inconsistencies between notebook versions.\n The request behind this PR is really just MathML input support for Jupyter's default MathJax configuration. The dynamic configuration via the kernel is an (over the top?) attempt to generalize this. Maybe this introduces more problems than it solves. \n\nSo, would doing a PR proposing to switch from the current TeX-AMS_HTML configuration to the TeX-AMS-MML_HTMLorMML configuration (see http://docs.mathjax.org/en/latest/config-files.html#the-tex-ams-chtml-configuration-file) as default be the saner and better option then? I would be very happy with it, as it would solve the Mathics problem that motivated this PR.\n How are you getting MathML rendered on the page with your kernel and `TeX-AMS-MML_HTMLorMML`? Is it declared as HTML output? While MathJax may handle it, we should make sure that MathML isn't being identified as latex in any way at the notebook level.\n Also, PRs in general should be made against master, not 4.x. We may backport to 4.x as appropriate (possibly not this), but all PRs should target master unless they are bugfixes that do not affect master.\n Yes, MathML is basically HTML (see https://en.wikipedia.org/wiki/MathML). All these special MathML tags have to always be embedded in surrounding `<math>` tags, so the MathML stuff is clearly delineated from the rest of the document (and the LaTeX content, for that matter, which must not be embedded in `<math>` tags and must not contain `<math>` tags itself).\n\nOf course, the MathJax guys would know best, and I'm not a MathJax/MathML expert by any means, but from what I see and understand, the formats are clearly separated, since one is custom HTML with special tags and the other happens in the text content of regular HTML nodes.\n\nUsing the `TeX-AMS-MML_HTMLorMML` configuration for MathJax, all `<math>` tags in a document are simply grabbed and rendered and the LaTeX rendering in the rest of the document is handled separately from this.\n\nIt's worth noting that some browsers, most notably Firefox, have builtin MathML support, and will render `<math>` tags and MathML even if MathJax is not installed. So in fact Jupyter running under Firefox already basically behaves like MathJax with the added MathML support would. You can output `<math>` tags in the HTML there and it renders math.\n\nThe only potential problem with `TeX-AMS-MML_HTMLorMML` in my opinion might be AMS (AsciiMath), which could be configured to some obscure delimiters so as to be effectively disabled (see http://docs.mathjax.org/en/latest/asciimath.html). Sadly there's no standard MathJax configuration that only supports TeX and MML, you always get AMS in the bundle (see http://docs.mathjax.org/en/latest/config-files.html).\n\nSo is this, i.e. switching to `TeX-AMS-MML_HTMLorMML`, something that would be worth doing a new PR on master?\n @poke1024 yes, I think that PR is worth doing. I still need to do some reading about exactly what the implications of the changed config would be, but it's certainly reasonable enough for a PR.\n Closing this, as a new PR on master will continue this.\n This has been succeeded by #1565.\n","Do you have either of the environment variables $JUPYTER_DATA_DIR or $XDG_DATA_HOME set?\n $XDG_DATA_HOME was set to `/usr/share`, $JUPYTER_DATA_DIR wasn't set. Setting it to `~/.local/share/jupyter` fixed the issue. Is there a way to make sure it is set during the installation?\n XDG_DATA_HOME should be set to somewhere that's user writable - or not set at all, because the default is `~/.local/share`. I'd work out what's setting it to `/usr/share` and fix that.\n Yes, this is my fault - I changed XDG_DATA_HOME in `.bashrc` when I was troubleshooting `dmenu-desktop` issues and forgot to remove it. I guees this can be closed now.\n\nThanks for the help!\n No problem - glad it got fixed.\n","Thanks!\n","Hi, Minrk, I see community close this requirement, does it mean community drop this feature and does not want to enable Jupyter with  Kerberos closet. @minrk  I believe people are able to use Jupyter with Kerberos via JupyterHub. @parente put together this example: https://github.com/jupyterhub/jupyterhub-example-kerberos Thanks Min, got that, will try with JupyterHub later.","This also might be an issue with the R kernel itself. Could you open an\nissue on this repo as well: https://github.com/IRkernel/IRkernel\n\nOn Mon, May 16, 2016 at 6:34 PM, Chris Fonnesbeck notifications@github.com\nwrote:\n\n> Using Jupyter 5.0.0.dev (built from master a few days ago) with an R\n> kernel (IRkernel), important error output is suppressed when code is run in\n> the notebook. The error messages are reported normally when run in a\n> standard R shell.\n> \n> The notebook I am running is here\n> https://gist.github.com/a025f78ad1bdff0835232523273a56b3.\n> \n> The first screen shot shows the model code run in an R session (this was\n> exported directly from the notebook's export facility), with the key error\n> message shown in red:\n> \n> [image: screenshot 2016-05-16 20 32 59]\n> https://cloud.githubusercontent.com/assets/81476/15308675/690618ca-1ba5-11e6-8d6c-a64b23ec737d.png\n> \n> However, when run as a notebook, the error line is missing\n> \n> [image: screenshot 2016-05-16 20 33 47]\n> https://cloud.githubusercontent.com/assets/81476/15308689/8554f7e4-1ba5-11e6-9577-bf36b47246c6.png\n> \n> Session information:\n> Python 3.5.1 |Continuum Analytics, Inc.| (default, Dec 7 2015, 11:24:55)\n> [GCC 4.2.1 (Apple Inc. build 5577)]\n> R version 3.2.5 (2016-04-14)\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1461\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I would guess that the error message is being written to stderr at a lower level than our capturing works - this also comes up in some cases in Python. Once the kernel nanny machinery (jupyter/enhancement-proposals#14) lands, it should fix cases like this (assuming IRkernel opts in to the output capturing part of that spec).\n @ellisonbg Will do.\n","I'm not quite sure what has happened, but I think upgrading pickleshare should fix it:\n\n```\npip install --upgrade pickleshare\n```\n that's solved my problem. Thanks!\n","Make sure that the `ipykernel` package is installed.\n Closing for inactivity, and as  installing `ipykernel` seem like the correct solution. \n","We are planning to add a companion file. By default, that will be used for widgets, but I think we will add config options to put some or all output into the companion file rather than the notebook file. More details here: https://github.com/jupyter/roadmap/blob/master/companion-files.md\n @jasongrout and I were talking about this yesterday because we have the unfortunate situation that view data such as `collapsed` and `scrolled` are stored in the document itself, making it impossible to share a document between different views or users without also sharing that state.\n\nhttps://github.com/jupyter/nbformat/blob/master/nbformat/v4/nbformat.v4.schema.json#L160  \n @takluyver That is really good news! I would love to have that possibility. :blush:\n\nIs there a PR or Issue tracking that feature? or not yet? (just to subscribe so that I can receive updates)\n I've just created an issue to track it: https://github.com/jupyter/notebook/issues/1465\n","Great!\n\nOn Wed, May 18, 2016 at 6:07 AM, Thomas Kluyver notifications@github.com\nwrote:\n\n> This is a meta issue for the implementation of 'companion files', as\n> discussed at the dev meeting and described here:\n> https://github.com/jupyter/roadmap/blob/master/companion-files.md\n> \n> Creating this so that interested people can subscribe to it and get\n> updates as work progresses.\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/1465\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n +1 for:\n\n> we could also decide to remove anything that is output from the first one\n","Thanks, Jake! This might be a browser issue, avoiding triggering redraws when circumstances change when it should repaint the whole page. I'm not sure we can detect this if the browser is hiding it from us, but we can investigate if there's an event coming that we are somehow suppressing.\n","I'm not convinced the dockerfile on this repo should exist at all, and we should probably just point to docker-stacks from now on.\n It's hard to disagree.  Clearly, no one is using it.  I reached for it because I thought it was the way to do a little dev without polluting my system, but volume mounting the source directory from my host is hampering that effort.\n Thanks a lot @jtyberg  !\n\nOK, i'm going to merge that, and we can remove the Dockerfile later. \n [Backporting this one manually](https://github.com/jupyter/notebook/commit/e1ff71d3cfcca9d6495c45505a13fd866a13110e), the backporting tool will mistakenly say it has not been backported.\n","I think the feature is more or less reasonable. I've marked is as 5.0.\n Thanks for having a look @Carreau.\n Fine with this, but because this makes a change to the server (which is also used for jupyterlab), we need to make sure that the server side of this will work with both notebook and jupyterlab. We definitely don't want to get into a situation where we have two server.\n\n@fperez @jasongrout \n > we need to make sure that the server side of this will work with both notebook and jupyterlab.\n\nI'm planning on making a first pass through porting what currently exists over nearly verbatim and only enabling it against the existing notebook UI to start. I hope then we can more easily see what needs to be adapted to fit jupyterlab, assuming we want to enable the idea of bundlers there too as well.\n\nI believe the server side is pretty agnostic as to the UI. The client side JS will surely need translation to fit jupyterlab vs the current notebook.\n @parente can this be closed, as #1579 was merged? Yes. Thanks @takluyver . Didn't realize this was still lurking.","+1\n And here I was about to mark this as sprint-friendly.\n","Would it be by any chance at the time of autosaving, and would it be fixed by https://github.com/ipython/ipywidgets/pull/591 ?\n That sounds plausible. I'll have a look.\n I wasn't intentionally using any widgets nor do I think I had them installed at the time but feel free to close this. Haven't noticed it lately.\n","Thanks @minrk! I'm trying to install locally to validate, and running into these errors:\n\n```\nnpm ERR! Windows_NT 10.0.10586\n    npm ERR! argv \"C:\\\\Anaconda\\\\Scripts\\\\node.exe\" \"C:\\\\Anaconda\\\\Library\\\\lib\\\\node_modules\\\\npm\\\\bin\\\\npm-cli.js\" \"run\" \"build:css\"\n    npm ERR! node v4.4.1\n    npm ERR! npm  v2.14.20\n    npm ERR! code ELIFECYCLE\n    npm ERR! jupyter-notebook-deps@4.0.0 build:css: `concurrent 'npm run build:css:ipython' 'npm run build:css:style'`\n    npm ERR! Exit status 1\n    npm ERR!\n    npm ERR! Failed at the jupyter-notebook-deps@4.0.0 build:css script 'concurrent 'npm run build:css:ipython' 'npm run build:css:style''.\n    npm ERR! This is most likely a problem with the jupyter-notebook-deps package,\n    npm ERR! not with npm itself.\n    npm ERR! Tell the author that this fails on your system:\n    npm ERR!     concurrent 'npm run build:css:ipython' 'npm run build:css:style'\n    npm ERR! You can get information on how to open an issue for this project with:\n    npm ERR!     npm bugs jupyter-notebook-deps\n    npm ERR! Or if that isn't available, you can get their info via:\n    npm ERR!\n    npm ERR!     npm owner ls jupyter-notebook-deps\n    npm ERR! There is likely additional logging output above.\n\n    npm ERR! Please include the following file with any support request:\n    npm ERR!     C:\\Users\\USER\\Documents\\GitHub\\minrk\\notebook\\npm-debug.log\n    C:\\Anaconda\\lib\\site-packages\\setuptools\\dist.py:285: UserWarning: Normalizing '5.0.0.dev' to '5.0.0.dev0'\n      normalized_version,\n    rebuilding js and css failed. The following required files are missing: ['notebook\\\\static\\\\built\\\\index.js', 'notebook\\\\static\\\\style\\\\ipython.min.css', 'notebook\\\\static\\\\style\\\\style.min.css']\n```\n\nPastebin of npm-debug.log: http://pastebin.com/AYDWKvaD\n @ellisonbg @Carreau @SylvainCorlay If you can provide insights of the npm error that @aggFTW is seeing, please do. Thanks!\n @aggFTW try cleaning it out and starting from scratch:\n\n```\ngit clean -xfd\npip install -e .\n```\n @minrk mmm let me give it a try. Thanks!\n Hi @minrk. Finally got to this and it's failing with the same error message :(\n @aggFTW Ugh. Would it be possible to get a complete debug log of the latest test you ran?\n @aggFTW arg! I tested with your reproduction steps and could reliably reproduce the failure with master, and this PR fixes it 100% of the time for me. Is there anything I might be missing in how you are testing the issue?\n Hey @minrk . Sorry I wasn't clear! :cry: \nI got to building and trying it again, and I couldn't build... haven't been able to repro yet, so it's entirely possible your code does fix it :smile: \n\nAny further help getting this to install? Are instructions here up to date?\nhttps://github.com/jupyter/notebook/blob/master/CONTRIBUTING.rst\n @aggFTW it's possible something's gone awry with building master on Windows. Let's avoid that for now: You can install this PR with:\n\n```\npip install \"https://www.dropbox.com/s/cdgstcmrup75mp4/notebook-5.0.0.dev.tar.gz?dl=1\"\n```\n I was finally able to try this @minrk! Thanks for providing the package!\n\nI think this definitely allows the kernel to reconnect! I still see two things after it does though:\n1. there's a yellow `Error` button next to the kernel name that doesn't go away\n2. the cell that was executing still shows as busy (with an asterisk)\n\nI tried it a second time, and now it connected back without the `Error` message, but I still see the cell as executing (with the asterisk) and the output is lost.\n\nI think that with the Error message and the asterisk still there, a patient user might wait forever.\n\nWhat do you think?\n The cell showing 'as busy' is not something I can fix in this PR, because it's a cell not getting its reply. This is true of cells that cause kernel crashes, etc. I'm not sure about the 'error' message, since I don't think I saw that.\n\nThanks for confirming that this at least improves the situation. I'll merge now, and we can continue with further refinements.\n Thanks @minrk!\n\nRegarding:\n\n> The cell showing 'as busy' is not something I can fix in this PR, because it's a cell not getting its reply. \n\nHow should we go about fixing this? Create an issue?\n\nAlso, when do you think that this fix will be released to pip/conda/etcetera?\n @aggFTW we're just trying to figure out an incorrect warning in the widgets telling people with 4.2 to upgrade to 4.2 (#1377), then we will ship 4.2.1 with this fix. Possibly by the end of this week.\n Thanks!\n","This is probably related to either which Python `jupyter` runs on, or something in the environment variables. Check `which jupyter`, look at the first line of that file to see the Python it runs with. Launch that Python in a terminal and try to import `ipykernel`.\n @crcrpar If you're still having issues running notebook, I highly suggest that you just install Anaconda which will install Python, Jupyter, and most of the libs that you might use with Jupyter. See the installation docs for more info.\n I forgot to leave comment.\nAfter that, I installed Anaconda.\nI use jupyter notebook everyday.\nThank you\n","The dev team has been mulling over the internationalization of documentation, UI, etc. in the core itself for some time... some new work coming up might actually encourage that. \n\nI think supporting actually _authoring_ multiple languages in a notebook would be great. That would be worth an extension, and might actually require a change to the notebook format. no doubt this has been discussed before.\n\nBut to go quick and dirty, a bookmarklet-kind of thing would be great. It could certainly add a new button. You can hook into when markdown cells are rendered, and apply a translation. Here's an example of hooking that event:\n- https://github.com/bollwyvl/nb-mermaid/blob/c52be964e23f366cc40889a3fe8b8055ca95e63d/nb-mermaid.js#L48\n\nCode comments would be harder... the best approach would probably be \"line widgets\":\n- https://codemirror.net/demo/widget.html\n\nUnfortunately, I don't have any examples of using that in the notebook.\n","Websocket pinging is used because certain proxies close a websocket if there are no messages over it for 60 seconds: we send a ping message every 30 seconds, and the browser sends a pong back. This is part of the websocket protocol, so the browser should do it automatically. If we don't get the pong back after 90 seconds, we assume that the connection is lost and kill it.\n\nI can't think why code executing would affect that, but it's suspicious that it causes high CPU usage on the client. What progress bar library is the code using? Can you disable the progress bar and see if the behaviour still occurs?\n The progress bar is just part of the library's function.  It's a neural network training protocol in Keras `from keras.models import Sequential`.  As the network trains it shows progress through the training data with a bar in the Jupyter Notebook cell that looks like this:\n\nEpoch 1/150\n768/768 [========================>       ] - 2s - loss: 0.6826 - acc: 0.6328    \n\nI don't think it has anything to do with this issue in particular as I have seen a number of [other people with a similar issue](https://github.com/jupyterhub/jupyterhub/issues/248).  \n\nIt seems that when the notebook is in the (busy) state, the ping/pong messaging does not continue and essentially will only run code for as long as the websocket does not timeout.  which is fine for short blocks of code.\n\nI see that in the Jupyter Notebook code on Github in the file [zmqhandlers.py](https://github.com/jupyter/notebook/blob/master/notebook/base/zmqhandlers.py) there is a timeout if a message is not received after sending a ping, I believe this is what you mentioned in your reply. I am not familiar with this type of code, but is it possible to override this `timeout` when the notebook is in the \"(busy)\" state?\n > is it possible to override this timeout when the notebook is in the \"(busy)\" state?\n\nNot easily, and I'm pretty sure it's the wrong fix, in any case. The fact that the kernel is executing something shouldn't stop the browser from responding to websocket pings.\n\n> I have seen a number of other people with a similar issue. \n\nThat does look like the same issue that you're seeing, and @minrk is the person most likely to be able to work it out.\n Thanks I really appreciate your time in looking into this! Let's see if @minrk has any comments.\n @Jeffalltogether what version of tornado do you have (might start with `pip list` or `conda list` to be safe)? It's odd that this timeout is raising an error in `.get()`, which should have returned before the timer started. That suggests that something isn't waiting the way we expect it to - perhaps because your tornado is too old, or perhaps it's a new version that changed something out from under us.\n Thanks for the prompt responses @minrk and @takluyver !!!\n\nAs it turns out, @takluyver was on the right track all along in asking about disabling the progress bar, because it turns out there is an error in the function I was using to train the model https://github.com/fchollet/keras/issues/2110\n\nI was not receiving the error message in the notebook configuration described in the original post.  In an attempt to get it working, I changed the configuration to run behind a Nginx web server on the same EC2 instance, and got the I/O error that was discussed in the link above. \n\nOnce I disabled the progress bar, _both_ notebook configurations work.\n\nMy tornado version is from an anaconda 2.7 python build showing: tornado  4.3  py27_0    defaults\n\nRegarding the local CPU issue.  When the progress bar is disabled on that 'model.fit' function, the local CPU is not affected.  However, in the Nginx + Jupyter configuration, the local CPU is not bothered with or without the progress bar disabled.\n\nIf anyone is interested in how I set-up the Nginx + Jupyter configuration on the EC2 instance, let me know.\n\nThanks again for addressing my issue!\n I think that `I/O operation on closed file` error is one we've seen before, though I forget if it got resolved. I'm still puzzled as to how an error in the kernel could cause the symptoms you describe, and why putting it behind nginx helped.\n If it helps, I have provided the code I was running in the .ipynb.  It's a relatively small standard data set available for anyone to use. Source of the code is: [Deep Learning with Python](https://machinelearningmastery.com/deep-learning-with-python/)\n\n```\nfrom keras.models import Sequential\nfrom keras.layers import Dense\nimport numpy\nimport pandas\n\nseed = 7\nnumpy.random.seed(seed)\n\n#Load Pima Indians dataset with Pandas from url\nurl = \"https://goo.gl/vhm1eU\"\nnames = ['preg', 'plas', 'pres', 'skin', 'test', 'mass', 'pedi', 'age', 'class']\ndataframe = pandas.read_csv(url, names = names)\ndataset = dataframe.values\nprint(dataset)\n\nX = dataset[:,0:8]\nY = dataset[:,8]\nmodel = Sequential()\nmodel.add(Dense(12, input_dim=8, init='uniform', activation='relu'))\nmodel.add(Dense(8, init='uniform', activation='relu'))\nmodel.add(Dense(1, init='uniform', activation='sigmoid'))\nmodel.compile(loss='binary_crossentropy', optimizer='adam', metrics=['accuracy'])\n\n#fit the model\n# adding more epochs increase the number of times the training data is fed into the model and\n# increases the time it takes to train.\nmodel.fit(X,Y, nb_epoch=200, batch_size = 10, verbose = 0)\n\nscores = model.evaluate(X, Y)\nprint(\"%s: %.2f%%\" % (model.metrics_names[1], scores[1]*100))\n```\n I have the same problem on MAC , but even without running code, sessoin is closed after very short time\nand I do use very simple code and edit run it continuisly\nI do use c3.8large AWS instance\noutput from my screen:\n[I 14:31:04.007 NotebookApp] Saving file at /sandercode/S_may31_try1.ipynb\n[I 14:44:26.956 NotebookApp] Saving file at /sandercode/S_may31_try1.ipynb\nsandercode/.Timeout, server 54.82.67.170 not responding.\n[W 15:05:27.008 NotebookApp] WebSocket ping timeout after 119965 ms.\n\nmay be it is MAC poblem per this comment:\n\ninteresting comment :   Well I just tried connection to my notebook server on AWS from a desktop browser and it works perfectly.. Looks like its some issue with the iOS browsers not allowing a connection with a self-signed certificate (https). I also tested that it works fine with just http. From https://github.com/jupyter/help/issues/23\n Similarly when running a remote notebook, accessed via an ssh tunnel, closing the ssh tunnel will cause a timeout and stop all computation. (Related Stackoverflow [post](http://stackoverflow.com/questions/31444284/ipython-notebook-kernel-dies-websocket-ping-timeout-when-the-ssh-connection)) \n\nI was hoping to run computationally intensive training operations remotely and reconnect after a while but it seems that this still doesn't work?\n I was getting this error repeatedly when running a long script that iterated through about 30k loops, each time printing out a completed message. When I commented out the print, I did not get the timeout error -- potential temporary solution. I'm having the same problem with running a Keras model over ssh, and it's super annoying.  Could we change the timeout for cells as in here: http://nbconvert.readthedocs.io/en/stable/execute_api.html ?\r\n\r\nYou can also send the output to a file like so:\r\n\r\n```\r\nimport sys\r\nsys.stdout = open('keras_output.txt', 'w')\r\nhistory = model.fit(X, y_cat, batch_size=128, nb_epoch=200, verbose=1)\r\nsys.stdout = sys.__stdout__\r\n```\r\n\r\nThat worked for me.\r\nhttp://stackoverflow.com/questions/4675728/redirect-stdout-to-a-file-in-python\r\n\r\nOr you could turn the verbosity option to 0 @nateGeorge Thanks, the redirect solution worked for me.","My bad. I found the location of the errant iframe and it's not jupyter. Apologies\n","BTW, our coverage numbers are not especially informative because we only record what's tested by the Python tests, not any of the what's exercised by the js tests. As a result, I'm not sure how valuable coverage-as-ci is on this repo.\n > BTW, our coverage numbers are not especially informative because we only record what's tested by the Python tests, not any of the what's exercised by the js tests. As a result, I'm not sure how valuable coverage-as-ci is on this repo.\n\nI think there is way to also submit coverage with JS, but that would be easier if tested in node.\nWe'll figure that out at some point in the future.\n > I think there is way to also submit coverage with JS\n\nTo be clear, I mean that our _Python_ coverage is significantly under-reported, because it doesn't include Python code only exercised by our js tests (websocket handlers, etc.).\n","Had something to do with a kernel in a system folder.\nWhen I started notebooks I got a message about Failed to load kernel spec: 'tensorflow_jupyter_kernel'.\n\nI had used jupyter kernelspec to add that kernel, but it ended up in a system folder and then after that list failed to work.\n\n```\nWE29699:kernels roun308$ jupyter kernelspec remove tensorflow_jupyter_kernel\nKernel specs to remove:\n  tensorflow_jupyter_kernel /usr/local/share/jupyter/kernels/tensorflow_jupyter_kernel\nRemove 1 kernel specs [y/N]: y\n[RemoveKernelSpec] Removed /usr/local/share/jupyter/kernels/tensorflow_jupyter_kernel\nWE29699:kernels roun308$ jupyter kernelspec list\nAvailable kernels:\n  python2    /Users/roun308/Library/Jupyter/kernels/python2\n```\n The kernel.json file for it must have been invalid JSON. We should probably catch that - one kernel shouldn't be able to stop `jupyter kernelspec list` from working entirely.\n Probably. Thing is it is just a copy of the python2 kernel directory with a name change in the JSON.  I didn't actually do anything to the JSON (except custom name field) because I wanted to verify the logic of a kernel install worked for me.  It comes back when I install it again. Thanks for your time.\n\nThis is the JSON and this is the install, the (bad) list, the uninstall, and the (good list):\nJSON (copy of python2 folder in a new folder)\n\n```\n{\n \"display_name\": \u201cTensorflow_virtualenv\u201d, \n \"language\": \"python\", \n \"argv\": [\n  \"/Users/roun308/anaconda/bin/python\", \n  \"-m\", \n  \"ipykernel\", \n  \"-f\", \n  \"{connection_file}\"\n ]\n}\n```\n\nInstall and list:\n\n```\nWE29699:kernels roun308$ jupyter kernelspec install /Users/roun308/tensorflow/tensorflow_jupyter_kernel \n[InstallKernelSpec] Installed kernelspec tensorflow_jupyter_kernel in /usr/local/share/jupyter/kernels/tensorflow_jupyter_kernel\nWE29699:kernels roun308$ jupyter kernelspec list\nTraceback (most recent call last):\n  File \"/Users/roun308/anaconda/bin/jupyter-kernelspec\", line 8, in <module>\n    main()\n  File \"/Users/roun308/anaconda/bin/jupyter-kernelspec\", line 5, in main\n    KernelSpecApp.launch_instance()\n  File \"/Users/roun308/anaconda/lib/python2.7/site-packages/traitlets/config/application.py\", line 596, in launch_instance\n    app.start()\n  File \"/Users/roun308/anaconda/lib/python2.7/site-packages/jupyter_client/kernelspecapp.py\", line 269, in start\n    return self.subapp.start()\n  File \"/Users/roun308/anaconda/lib/python2.7/site-packages/jupyter_client/kernelspecapp.py\", line 44, in start\n    specs = self.kernel_spec_manager.get_all_specs()\n  File \"/Users/roun308/anaconda/lib/python2.7/site-packages/jupyter_client/kernelspec.py\", line 196, in get_all_specs\n    } for kname in d}\n  File \"/Users/roun308/anaconda/lib/python2.7/site-packages/jupyter_client/kernelspec.py\", line 196, in <dictcomp>\n    } for kname in d}\n  File \"/Users/roun308/anaconda/lib/python2.7/site-packages/jupyter_client/kernelspec.py\", line 164, in _get_kernel_spec_by_name\n    return self.kernel_spec_class.from_resource_dir(resource_dir)\n  File \"/Users/roun308/anaconda/lib/python2.7/site-packages/jupyter_client/kernelspec.py\", line 38, in from_resource_dir\n    kernel_dict = json.load(f)\n  File \"/Users/roun308/anaconda/lib/python2.7/json/__init__.py\", line 291, in load\n    **kw)\n  File \"/Users/roun308/anaconda/lib/python2.7/json/__init__.py\", line 339, in loads\n    return _default_decoder.decode(s)\n  File \"/Users/roun308/anaconda/lib/python2.7/json/decoder.py\", line 364, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/Users/roun308/anaconda/lib/python2.7/json/decoder.py\", line 382, in raw_decode\n    raise ValueError(\"No JSON object could be decoded\")\nValueError: No JSON object could be decoded \n```\n\nRemoving and listing:\n\n```\nWE29699:kernels roun308$ jupyter kernelspec remove tensorflow_jupyter_kernel\nKernel specs to remove:\n  tensorflow_jupyter_kernel /usr/local/share/jupyter/kernels/tensorflow_jupyter_kernel\nRemove 1 kernel specs [y/N]: y\n[RemoveKernelSpec] Removed /usr/local/share/jupyter/kernels/tensorflow_jupyter_kernel\nWE29699:kernels roun308$ jupyter kernelspec list\nAvailable kernels:\n  python2    /Users/roun308/Library/Jupyter/kernels/python2\n```\n So...\n\nI think it has something to do with file encoding (maybe line ending encoding sorry) which is basically what you said, \"something is wrong with the JSON\".\n\nTo check I did this:\n1) copied python2 kernel folder.  Did a kernelspec list.  Result: Good List.\n2) Opened kernel.json in Mac default text editor changed name.  Saved.  Did a kernelspec list. Result: List JSON error. Deleted that copy.\n3) Copied python2 kernel folder.  Did a kernelspec list. Result: Good List.\n4) Opened kernel.json in \"TextWrangler\" (high quality editor imo) changed name. Saved. Did a kernelspec list. Result: Good list.\n\nSo, has something to do with saving with default text editor on mac, which I suspect changes the encoding causing a JSON parse error in the list.  Not sure other than that.  Suspect line endings?  Dunno.\n I don't think line endings should matter for JSON. Maybe the editor saved it with some odd text encoding. Whatever the cause, though, it should catch invalid files.\n For info, what was your default text editor ? `TextEdit`?\n","It looks like tornado has a maximum body size of 100MB by default, and I don't think we override that anywhere:\nhttps://github.com/tornadoweb/tornado/blob/a97ec9569b1995d8aa3da0a7f499510bffc006a3/tornado/iostream.py#L154\n Should we bump it up by default or just make it a configurable?\n Related? https://github.com/jupyter/notebook/issues/650\n Yep, that looks the same, thanks for the link. That already has quite a bit of discussion, so I'll close this one for now, and we can continue the discussion there.\n",":-( that's weird I have no idea. Can you open the javascript console of your browser and check for errors ?\n Here is total output:\n![selection_147](https://cloud.githubusercontent.com/assets/698857/15969901/4a29ab28-2f47-11e6-9707-ba2d938a98ad.png)\n You seem to have some extensions enabled, can you try to disable them and see if it persists ? I'm unsure what can be causing that. \n Hey there, I'm going through old issues and it seems to me that it makes sense to close this one.\r\n\r\nLet us know if this issue persists after you've disabled extensions.\r\n\r\nThanks everyone and happy hacking! :bowtie: @","We had also talked about, when a fresh kernel is started and you execute the first cell, maybe all output from previous execution should be cleared, to avoid confusion with the results from the current kernel. Thoughts? I can see some downsides, but that might be nicer UX than giving the user another choice.\n > e had also talked about, when a fresh kernel is started and you execute the first cell, maybe all output from previous execution should be cleared, to avoid confusion with the results from the current kernel. Thoughts? I can see some downsides, but that might be nicer UX than giving the user another choice.\n\nI don't want to change behavior like that so close to release. I don't like this behavior. \n I don't think it makes sense to change the default on this. However at one\npoint I did make the keyboard shortcut \"000\" do the clear output+restart\nkernel action. I would also be fine with a button that does this action.\n\nOn Wed, Jun 10, 2015 at 3:26 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> e had also talked about, when a fresh kernel is started and you execute\n> the first cell, maybe all output from previous execution should be cleared,\n> to avoid confusion with the results from the current kernel. Thoughts? I\n> can see some downsides, but that might be nicer UX than giving the user\n> another choice.\n> \n> I don't want to change behavior like that so close to release. I don't\n> like this behavior.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/148#issuecomment-110935812.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n 000 would shadow 00 which prompt for kernel restarting. A button is too much IMHO.\n As a user, I don't like the idea of automatically clearing notebook output.  I've had some very long-running processes that generated graphs that could then be referenced through several iterations of restarting the kernel after other long-running computations had to be killed.  If I accidentally forgot that running a new cell would clear my output, and had to wait a few hours for a graph to be generated again, that would be a huge annoyance.  That's certainly an argument for me being smarter about saving my work, but automatically clearing output can cause a lot of frustration in general.\n\nI do, however, like the idea of somehow obviously marking cells that were generated by \"old\" kernels, to reduce the confusion @takluyver mentioned.\n\nThe button / menu item approach seems ideal to me.\n We discussed a long time ago about \"old\" kernel and dirty cell. We arrived to the conclusion that there is no sigle, nor correct definition of what that would mean, neither a reliable way to detect it, unless we do some relatively large refactor of the notebook architecture(that we plan to do at some point anyway)\n Any thought on that ? It does not change default behavior, nor shortcut, just add a convenient button in the restart dialog, that also clear the cells...\n I think this is fine.\n LGTM too...\n OK, let's make this live. I'll merge in the next timeI come across this if no complaints. \n","It's a harmless and largely meaningless warning about unused metadata. The warning is removed in current master of traitlets, and will go away with the next traitlets release.\n And when is the next traitlets release going to be..?\n On July 1st there was 4.2.2 but the warning is still there?\n Yeaah I can still see it in my prompt whenever I start notebook. That is why I was wondering..\n Hopefully soon. I'm working on the traitlets 4.3 release now.\n Thank you.\n still see this\n @ophite traitlets 4.3 should ship this week.\n","Can you provide more details? Is it local, remote? What OS, version? Is it a machine that has gone to sleep or lost its network connection? Log messages in the js or Python consoles when the connection is lost? I've left notebooks running for days without lost connections, and when the browser is notified that the connection is lost, it _does_ try to reconnect automatically, so I would like to know more about what circumstances in which it either stops trying or doesn't notice that the connection is lost.\n It is remote, chrome, mac os x. The laptop is always on. And the browser is always open. The wireless network is not stable. It doesn't notice that the connection is lost. A very simple solution is to reconnect when calling executing and the time span to last execution > 1h.\n","Should readonly cells be deletable? I'm unsure! Perhaps it's ok to keep those two orthogonal, but might be confusing?\n\nShould it provide some other visual indicator of being readonly? Probably, although I'm not sure what form that should take.\n\nTODO:\n1. Add tests\n2. Figure out if setting codemirror option on every focus has performance penalties, or if there is a better location to put that in.\n\nI haven't really written any client side JS in a few years, so be gentle!\n From a UI point of view, I'd expect readonly cells to also be undeletable; it's hard to imagine a scenario where you want a non-editable but deletable cell.\n Will it be awkward that the two protection options work opposite ways round - `deletable: false` but `readonly: true`? Do we want `editable: false` instead?\n In general I prefer defaults to false than defaults to true, but since it is already 'deletable: false' rather than 'undeletable: true', I guess it makes sense to keep it consistent.\n I'm fine with changing the default, be warned that @jhamrick nbgrader might need to be updated as, IIRC, it is the main usecase. \n Yeah, I think this just needs tests. I'll try to pull in some time next\nweek to finish this up.\n\nOn Fri, Jun 3, 2016 at 5:17 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I'm fine with changing the default, be warned that @jhamrick\n> https://github.com/jhamrick nbgrader might need to be updated as, IIRC,\n> it is the main usecase.\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/pull/1482#issuecomment-223723193,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AAB23qN_GylSQWIh-WGm5rjLOJwi2ICLks5qIMQBgaJpZM4IlKSo\n> .\n\n## \n\nYuvi Panda T\nhttp://yuvi.in/blog\n I think not editable should imply not deletable as well.\n\nI'm fine with changing the default but if we do that (go from `deletable` to `undeletable`) could we build in something that would automatically update the notebook metadata if the old `deletable` metadata is found?\n\nAlso thanks @yuvipanda for implementing this!!\n Yup, any change like that should include automatic upgrading of the old format on load.\n @minrk I can work on this. To make sure I understand: if the `deletable` property is not available for a cell in a notebook, then we should provide a value for it depending on the cell's `editable` property (e.g. if `metadata.editable = false` then `metadata.deletable = false`, otherwise  `metadata.deletable = true`).\n @gnestor I believe that's correct, yes.\n @yuvipanda Can you enable \"Allow edits from maintainers\" for this PR? It's a [new Github feature](https://help.github.com/articles/allowing-changes-to-a-pull-request-branch-created-from-a-fork/#enabling-repository-maintainer-permissions-on-existing-pull-requests) and should be available in the right side bar for this PR.\n Done! Sorry I haven't had time to finish this up.\n @yuvipanda Sorry but I accidentally deleted your branch and I don't think I can restore it on your behalf. I think a `git reflog` should do the trick. If you can't figure it out either, then I can create a new PR...\n I've restored it :)\n @yuvipanda I think the \"Allow edits from maintainers\" permissions were reset after I deleted your branch. I submitted a PR to your fork that will upgrade a notebook's metadata on load to include `editable` and `deletable` properties. Can you merge pleeez?\n Merged and re-enabled!\n @Carreau Can you test this? I have tested and verified that cell metadata will include `editable` and `deletable` properties. \n\nTo test: \n1. Create a new notebook or open an existing notebook\n2. Inspect notebook in a text editor, there should be no `editable` or `deletable` properties for cells\n3. Save and Checkpoint\n4. Inspect notebook in a text editor, there should be `editable` or `deletable` properties for cells\n LGTM ! Thanks all !\n Would it be possible to include this for the next release (4.4) rather than 5.0? This is a *really* important feature for nbgrader to have that I thought would have ended up in the 4.3 release, but apparently it didn't. It would be unfortunate if all the instructors waiting on this feature have to wait until 5.0 for it. let's see how hard it is to backport. \r\n\r\n@meeseeksdev backport to 4.x See #1482. I mean #2039  Thanks! \ud83d\ude04  > Thanks! \ud83d\ude04\r\n\r\nNo problem. Also I whitelisted you so you can mention the bot to do backport or other stuff.  Can we release this in 4.3.2? It's currently in 4.x branch and we're about to do a 4.3.2 release... I think it's fine. I relabeled it as 4.3.2, since it's already been backported.","updating sympy solved it.\n","This would mainly be an issue for [IRkernel](https://github.com/IRkernel/IRkernel), though there might be some architectural considerations - from the linked issue, it sounds like shiny expects a direct network connection from the browser to the kernel, which isn't necessarily easy with Jupyter.\n @takluyver Yes that's correct. \n\nI thought it would require considerable effort.\n\nOn the other hand, it might also make sense as a collaboration between the folks who work on IRkernel, and me on the Zeppelin side.  Perhaps we could convince RStudio to put in whatever hooks are necessary to facilitate working with notebook interfaces.  Considering that rstudio now has its own R notebook interface, perhaps this won't be a hard ask. \n > On the other hand, it might also make sense as a collaboration between the folks who work on IRkernel, and me on the Zeppelin side. \n> \n> Perhaps we could convince RStudio to put in whatever hooks are necessary to facilitate working with notebook interfaces. Considering that rstudio now has its own R notebook interface, perhaps this won't be a hard ask.\n\nMaybe, I don't think we would be against. It's probably a hard sell, usually the RStudio user community tend to be divided from the Jupyter one. Someone could still try to have the 2 groups discussing. \n the spirit of the opensource should bring us together.\n\nperhaps @jjallaire one of the most active users at https://github.com/rstudio/rstudio could drop a line.\n Yes, as you said we're currently working on our own notebook interface based on R Markdown. It would indeed be cool to be able to host multiple types of notebooks within RStudio but there would considerable architectural issues to surmount so not something we can pursue in the short term.\n I don't think we want to host other notebooks within RStudio. Rather, we want to make it possible for people using other notebooks to run shiny apps in their notebooks.\n\n> On Jun 8, 2016, at 9:01 PM, JJ Allaire notifications@github.com wrote:\n> \n> Yes, as you said we're currently working on our own notebook interface based on R Markdown. It would indeed be cool to be able to host multiple types of notebooks within RStudio but there would considerable architectural issues to surmount so not something we can pursue in the short term.\n> \n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n Ah, got it! I don't think there is anything in principle that would prevent integrating Shiny with other notebooks (the shiny package is entirely decoupled from RStudio). One problem (which is shared by the RStudio IDE notebook) is that running a Shiny application currently blocks the console/UI entirely. This isn't a problem when you are running a standalone Shiny application but of course is a a problem when you want to use Shiny as an embedded component within an interactive session.\n\nWe have some work we are planning to enable \"background\" execution of Shiny applications (i.e. still running on the main thread but not blocking the REPL). Once this is done it should be straightforward for all notebook interfaces to take advantage of.\n That's exactly what we're looking for - thanks! Can you let us know when there's testing code?\n\n> On Jun 8, 2016, at 9:41 PM, JJ Allaire notifications@github.com wrote:\n> \n> Ah, got it! I don't think there is anything in principle that would prevent integrating Shiny with other notebooks (the shiny package is entirely decoupled from RStudio). One problem (which is shared by the RStudio IDE notebook) is that running a Shiny application currently blocks the console/UI entirely. This isn't a problem when you are running a standalone Shiny application but of course is a a problem when you want to use Shiny as an embedded component within an interactive session.\n> \n> We have some work we are planning to enable \"background\" execution of Shiny applications (i.e. still running on the main thread but not blocking the REPL). Once this is done it should be straightforward for all notebook interfaces to take advantage of.\n> \n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n Yes, will do!\n\nOn Wed, Jun 8, 2016 at 9:47 PM, elbamos notifications@github.com wrote:\n\n> That's exactly what we're looking for - thanks! Can you let us know when\n> there's testing code?\n> \n> > On Jun 8, 2016, at 9:41 PM, JJ Allaire notifications@github.com wrote:\n> > \n> > Ah, got it! I don't think there is anything in principle that would\n> > prevent integrating Shiny with other notebooks (the shiny package is\n> > entirely decoupled from RStudio). One problem (which is shared by the\n> > RStudio IDE notebook) is that running a Shiny application currently blocks\n> > the console/UI entirely. This isn't a problem when you are running a\n> > standalone Shiny application but of course is a a problem when you want to\n> > use Shiny as an embedded component within an interactive session.\n> > \n> > We have some work we are planning to enable \"background\" execution of\n> > Shiny applications (i.e. still running on the main thread but not blocking\n> > the REPL). Once this is done it should be straightforward for all notebook\n> > interfaces to take advantage of.\n> > \n> > \u2014\n> > You are receiving this because you commented.\n> > Reply to this email directly, view it on GitHub, or mute the thread.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1484#issuecomment-224780837,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AAGXxx5LfWaHrdhRli3901atbeeMU7DJks5qJ3CagaJpZM4IltxW\n> .\n","Closing in favor of https://github.com/jupyter/nbconvert/issues/314\n","There are most likely separate copies of Python installed in different locations. Try `which python` and `which pip`, and look at the first line of the `pip` script to see what Python it's using.\n Oh! That must be it. I installed both python 3.4 and python 3.5. But pip is using 3.5.\n`which python`: `/usr/bin/python`\n`which pip`: `/Library/Frameworks/Python.framework/Versions/3.5/bin/pip`\nI uninstalled 3.4. It seems not enough, though.\n OK, closing this as it doesn't seem to be an issue for us to fix.\n","No I don't see anything obvious that can be done here. I'm not even sure how this could happen. \nIt seem to be error at the ZMQ level so I don't know of any simple way of checking things there. \n","ah, re-display can be done via `Jupyter.notebook.load_notebook(Jupyter.notebook.notebook_path)`\n What would be nice is to actually have a UI for that, and a dropdown that allow user to see alternative mimetype !\n","`@` is a safe character in encoded URLs, so I think this was intentional. Perhaps it would be clearer if base_url were `'a@%20b'`.\n Mmm, ok, I think I follow. This whole issue got rapidly confusing for me, as `@` is a reserved character of gen-delim type in URIs, along with `:`, `/`, `?`, `#`, `[`, and `]`\n(see https://tools.ietf.org/html/rfc3986#page-12), and as such it shouldn't be used in components of a scheme which rely on it as a delimiter. The subtlety which I had missed is that whether it's used as a delimiter _depends on the scheme in use_. Trying to decide which delimiters were ok and which weren't eventually led me to [this SO question/answer](http://stackoverflow.com/questions/2366260/whats-valid-and-whats-not-in-a-uri-query) which finally cleared it up for me: `@` _is_ ok in http[s] scheme URLs, even though it may not be ok in URIs for other schemes, depending on how those schemes use it.\n\nI ran into this as a problem when building testing for extensions, and presumably got confused over [`encodeURI`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/encodeURI) vs [`encodeURIComponent`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent), as the former doesn't escape the `@`, while the latter (as used in `utils. encode_uri_components` in [notebook/static/base/js/utils.js#L541](https://github.com/jupyter/notebook/blob/4e359c921fb503ba3782a67cbd5ed221b081a478/notebook/static/base/js/utils.js#L541)) does.\n\nI guess it might make the intent a little clearer to add an escaped character as well...\n","Note: I tried using the RegExp version of `externals`, but I could not get it to work.\n\nhttps://webpack.github.io/docs/configuration.html#externals\n Using the following:\n\n``` javascript\n    /codemirror/,\n        function(context, request, callback) {\n            if (/codemirror/.test(request)) {\n                return callback(null, 'commonjs ' + request);\n            }\n            callback();\n        }\n```\n\nResulted in this output:\n\n``` javascript\n/***/ function(module, exports) {\n\n    module.exports = codemirror/lib/codemirror;\n\n/***/ },\n```\n I was able to get a configuration that used `require()` for all CodeMirror imports, but I was getting the error `\"Module name has not been loaded yet for context: _. Use require([])\"`\n I can't figure out how to get the python mode loaded, which is causing the error in the build.\n The last commit fixes the python mode, but I'm not sure how to verify whether anything from the CodeMirror addons might still be broken.\n Thanks for trying to tackle that. \n\nI guess the only way to really have tested is to push it in the wild. \nI'll try to give it a try tomorrow, and merge if it works.\n Regardless of my comments, this is a strict improvement, so +1 in getting this in, and figuring out what to do next. \n\nKudos to @blink1073 for figuring things out and having taken the time to do a patch !\n Backported to 4.x, and confirmed to be working with R, at least. Thanks! I'll give 4.2.1 a few more days to turn up issues, and then release 4.2.2 with this by the end of this week.\n @Carreau, this was guess-and-check based on https://webpack.github.io/docs/configuration.html#externals.  We need to have a broader conversation about how to rectify Webpack and Requirejs for shared resources like CodeMirror.\n Sorry about inappropriately backporting - I reverted the backport, since this bug does not exist on 4.x. Properly updated everything to 5.0\n","@mhooreman this is the responsibility of the pandas library, not the notebook, I think.\n\nAnd there are some issues on this: https://github.com/pydata/pandas/issues/5563, https://github.com/pydata/pandas/issues/8750, https://github.com/pydata/pandas/pull/10300. \nProviding a `_repr_html_` for series is not difficult, but the question is also how it should look like to be able to distinguish it from a one column dataframe. Contributions are always welcome!\n Thanks for responding @jorisvandenbossche , you can also register your own display formatter without patching Pandas. \n\nClosing as this is not something to do here. \n Thanks for your replies\n","The docker image is not maintained, we shoudl likely remove it\n Hi,\n\nwhat a pity. This was pretty straight forward to use it quickly. By the way, just changing the version of the revision made the trick for me.\nThanks anyway for the answer.\n We still maintain docker files for running the notebook server - just not in this repo. You can find them in the docker-stacks repo:\nhttps://github.com/jupyter/docker-stacks\n\nClosing this issue because #1553 removed the docker file from this repo.\n","forgot mention OS - Mac OS X 10.11.5\n I can't think of any obvious reason why those would be different other than running different Pythons, which you've already checked. Can you dig deeper inside `ctypes.util.find_library()` to see where the difference is?\n","Awesome ! Thanks !\n","Hi there, sorry for the delay. Can you try to issue a `npm run build` from the root of the source directory ?\n Just tried with the latest:\n\n```\ngit pull\nnpm run build\npython setup.py js css\npip install -e .\n```\n\n...but it fails with the same error\n![image](https://cloud.githubusercontent.com/assets/881019/16140896/ff86d6ac-3498-11e6-853c-29c75fbab364.png)\n hum... can you force refresh, go to the `...` > `settings` of the developper panel and check  `enable source maps`. That might give more information on which file it comes from . \n Sorry, pretty low bandwidth for this at the moment - I _think_ it may be something to do with incompatible settings or possible the fact that I'm running from a different base_url.  Hopefully I'll have time to revisit it shortly...\n","@cqcn1991 can you copy/paste similar content from a regular webpage?\n @minrk just test with this page, I can copy the images above into MS Word.\n I think this is because you get a Base64 encoded graphic and Word cannot handle that.\nTry dragging a plot into notepad and you well see.\n @juhasch I don't understand base64 very well, but is there any thing that I can fix it? So I can easily copy the images into MS Word?\n You can use the \"paste special\" command in Word and select device independent bitmap (or simular):\nhttps://support.office.com/en-us/article/Paste-Special-e03db6c7-8295-4529-957d-16ac8a778719\n\nYou might want to use the `facecolor` option to avoid a black background of the figure:\n\n``` Python\nimport matplotlib.pyplot as plt\nplt.subplots(facecolor='w')\nplt.plot(rand(20))\n```\n @juhasch just tried it, but it seems the same with CTRL+V? I didn't see any images coming out\n\nAnd as you said, I think this is the same problem with base64 pasting.\nhttp://stackoverflow.com/questions/2329897/how-to-display-images-in-word-generated-from-html\nhttp://superuser.com/questions/166287/html-images-and-ms-word\nhttps://joekuan.wordpress.com/2015/01/31/notes-on-exporting-html-document-with-images-to-word-on-linux/\n Tray to drag the images in your desktop directly then copy and past, of if you create teh plot yourself, save them as Png, on your desktop. \n @Carreau Just tried with dragging one to desktop, on Win 7. It gives an Internet shortcut Icon.\n![qq](https://cloud.githubusercontent.com/assets/2425141/15916568/b0bc1b90-2e26-11e6-91b9-f973519bdd66.png)\n > @Carreau Just tried with dragging one to desktop, on Win 7. It gives an Internet shortcut Icon.\n\nThat extremely weird. Which browser ?\n @Carreau Firefox 47.0\n I have tried this and it works if doing Ctrl+Alt+V (for the paste special) in word and selecting bitmap","You might want to take a look at this extension:\r\nhttps://github.com/ipython-contrib/jupyter_contrib_nbextensions/blob/master/src/jupyter_contrib_nbextensions/nbextensions/toc2/README.md dead link Thanks for noticing. I have updated the link.","Yep, that doc is wrong, thanks for spotting it!\n #1503 should update it a bit\n","and of course, all of these will change again when the widgets are split out of this repo.\n","It's hard to follow exactly what you're trying without the files in question, but I think you might be expecting nbextensions to run in the global namespace. They aren't: each nbextension is loaded in a separate namespace.\n\nYou could define a module in each nbextension and then require it in your display object. Or it may be simpler to display all the Javascript rather than putting it into an nbextension.\n Thanks for your response. Sorry for my ignorance, I thought I had zipped everyting in a file. I hope now all in one. opentype needs a subdirectory called fonts, with the Roboto font in it. I've added them al togther. I am trying to use plain JS as much as possible, and JS only as much as possible; but I think these two arein factory structure, somehow notebook does not recongize them. \n[tryText.zip](https://github.com/jupyter/notebook/files/291699/tryText.zip)\n","You may also want to look at #536, which is a partial implementation chunked-file upload, which talks to the contents service. We will need to store files via the contents service and not force it to be on the local filesystem.\n Hi, @minrk . Sorry for replying you so late. Before I change the structure of the code, I want to know your idea about the big file upload function. \nI add an additional upload button, and the only function is to upload files, not related with saving files. Current design is a little different to the default upload button. \nWhen you choose a set of files and click \"open\", these files will start uploading immediately, there is no \"start\" button (though it can be added). \nMoreover, when an upload is done, the item bar will not destroy. Instead, I added a \"Hide\" button for user.\n1. Do you think if I need to follow the default upload's logic?\n2. Should I just leave one button for upload?\n![updemo](https://cloud.githubusercontent.com/assets/14834924/15753407/e77d854e-28c0-11e6-9c1f-dca2827e26ec.png)\n From a UX point of view, if we do this, we'll definitely want to have just one upload button - users shouldn't have to decide whether an upload is 'big'. I'll leave it to Min and others whether this and/or #536 make sense.\n We have solved the problem of loading large files by chunking. \r\nI would be happy to contribute the code. Please let me know what's the process. Thank you!\r\n","PIng @ellisonbg , actually looking at the gif, it seem that the cell does not get focus as it is not green, when I change back `b` to `a`. \n I am having trouble following the gif. Looks like you never defined b, so you get a name error? But I think you are saying there is something else going on right?\n\nPreviously, running a cell only worked in edit mode - not sure if that has been fixed yet. May be that issue.\n Sorry \n\n```\na=1\na\n```\n\nAll great, \n\n```\na=1, \nb\n```\n\nName error b not defined\n\n```\na=1\na\n```\n\nName Error, b not defined. \n\nSo the Third time as execute, the second version of the cell is sent to the kernel. \n Opened up this on the jupyter-js-notebook repo:\n\nhttps://github.com/jupyter/jupyter-js-notebook/issues/226\n","@takluyver Just to clarify... Making these doc sections more general would include the use of languages kernels other than IPython such as R, Julia...\n\nCorrect?\n AFAIR the initial problem was that it talked about magics (or more specifc the `%connect_info` magic)  as if these would belong to the notebook and work in all kernels and not only the ipython one.\n @janschulz Thanks for the context. \n\nWe should make the following clearer in the docs: Whether magics work in a notebook depends on whether the magic is supported by the  language kernel. Some kernels, such as IRkernel, do not support magics.\n @willingc: Is there actually any other kernel than IPython which does support magics?\n\nOn the other hand, i think it would be possible to add a way to get the same information than the connect_info magic, but it will be a regular R function or a property. Is that desireable?\n Yeah, I think the important thing for the docs is just to make clear what\nis \"for example, to do this with the IPython kernel...\"\n\nFor things like connection info that make sense regardless of the kernel,\nit might be best to add a way to get it through the notebook ui, rather\nthan encouraging every kernel to recreate it.\n","I can reproduce it, but if I hit enter, I see a prompt. Does that work for you too?\n\nI think this is more likely to be a qtconsole bug than a notebook bug - pinging @ccordoba12 .\n @takluyver Yes! I see the prompt after hitting enter.\n","Looks good. Thanks!\n CC @SylvainCorlay - you'll be happy about this :smile:.\n","Do you propose that both follow:\n- Merge\n- User wins\n Yup, I think that makes good sense as a goal. Where we have some trouble is that the traitlets config system doesn't perform any merging of the values of individual traits, it only merges at the configurable-object level (i.e. it merges user_config.Config with sys_config.Config, but doesn't merge the contents of user_config.Config.value with sys_config.Config.value). While this isn't desirable for extension loading, it is most of the time. In some ways, this points to the traitlets config system simply being a bad fit for extensions, as we rapidly expand the scope of what configuration we are talking about enabling.\n\n@SylvainCorlay discussed at the meeting a conf.d trait-type that would implement the directory-style loading without requiring changes to how traitlets.config works.\n\nAlternately, we could move the serverextensions piece to use the exact same code as nbextensions, which would ensure the behavior of the two is totally consistent, rather than using traitlets.config for one and frontend-config for the other. Right now, I'm leaning a bit toward this option.\n\nI think the nbextensions case is just a bug where the load order is backwards. That should be readily fixable.\n @minrk but if both used the frontend extensions stuff, wouldn't that be an\nAPI change as the actual location of the config would be different?\n\nOn Wed, Jun 8, 2016 at 1:59 AM, Min RK notifications@github.com wrote:\n\n> Yup, I think that makes good sense as a goal. Where we have some trouble\n> is that the traitlets config system doesn't perform any merging of the\n> values of individual traits, it only merges at the configurable-object\n> level (i.e. it merges user_config.Config with sys_config.Config, but\n> doesn't merge the contents of user_config.Config.value with\n> sys_config.Config.value). While this isn't desirable for extension loading,\n> it is most of the time. In some ways, this points to the traitlets config\n> system simply being a bad fit for extensions, as we rapidly expand the\n> scope of what configuration we are talking about enabling.\n> \n> @SylvainCorlay https://github.com/SylvainCorlay discussed at the\n> meeting a conf.d trait-type that would implement the directory-style\n> loading without requiring changes to how traitlets.config works.\n> \n> Alternately, we could move the serverextensions piece to use the exact\n> same code as nbextensions, which would ensure the behavior of the two is\n> totally consistent, rather than using traitlets.config for one and\n> frontend-config for the other. Right now, I'm leaning a bit toward this\n> option.\n> \n> I think the nbextensions case is just a bug where the load order is\n> backwards. That should be readily fixable.\n> \n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1508#issuecomment-224530401,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AABr0Fj8CnIDObeEFoSSuJ4_w6ZL5tv_ks5qJoSBgaJpZM4Is9PS\n> .\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg yes, though it could be shimmed (the CLI API doesn't need to change). Any fix involving changes to existing traitlets behavior would be a more significant backward-incompatible change.\n Perhaps having:\n\ndef merge(self, target, deep=False)\n\nwould allow this to work without breaking behavior.\n\nIf the conf.d implementation (still working on a poc) did live in\ntraitlets, used this approach (merge on the d files first, then the real\nfile) and had no knowledge of extensions per se, then an extension could\nchange **anything**, allowing things like nb_conda_ kernels (which I think\nchanges the kernel_spec_manager_class) to not need bespoke install steps.\n\nThen the distinction between types of extensions would fall away... though\nthe existing cli method would still be good for user-level tweaking.\n\nOn 04:17, Thu, Jun 9, 2016 Min RK notifications@github.com wrote:\n\n> @ellisonbg https://github.com/ellisonbg yes, though it could be shimmed\n> (the CLI API doesn't need to change). Any fix involving changes to existing\n> traitlets behavior would be a more significant backward-incompatible change.\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1508#issuecomment-224842254,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AACxRBcOID_fZPEV_HHA6LeJ6om9mld_ks5qJ9ougaJpZM4Is9PS\n> .\n A couple of questions for that proposal:\n- What would merge(deep=True) do with a list?\n- How would you recover the current behavior of strictly setting values of container traits? For example, `c.Class.dict_trait = {}`, which currently ensures the trait is an empty dict, overriding less-specific configuration.\n\nWe do have some of this functionality, just not in json config. _Python_ config files do support modifications for container traits, which json config files do not. You can do:\n\n``` python\nc.Class.dict_trait.update({'a': 5})\n```\n\nand it will add values, rather than overriding the whole trait. We could try to define a scheme for expressing such operations in JSON config, though I am wary of defining _operations_ in such a format, rather than values.\n\nRe: nb_conda_kernels, I actually really _don't_ want installing a package like that to be able to change the kernel manager. I really do think installing a package and modifying configuration _should_ be separate steps in the vast majority of cases. What happens when I've installed two custom kernel managers, and they have registered themselves at install time, and assume that `conda install` is everything you need to do? With conf.d-style, I'm guessing the alphabetically last manager would be used. With post-link, it would at least be the most recently installed, probably. Neither one sounds like a good experience.\n @minrk I think I have a very simple proposal for a conf.d mechanism.\n\nImports:\n\n``` python\nfrom traitlets import List, Dict, default\nfrom traitlets.config import LoggingConfigurable\nfrom jupyter_core.paths import jupyter_config_path\nimport itertools\nfrom glob import glob\nimport json\nimport os\n```\n\nA first simple version that does not take into account precedence:\n\n``` python\nclass NotebookApp0(LoggingConfigurable):\n\n    nbextensions = List(trait=Dict()).tag(config=True)\n\n    @default('nbextensions')\n    def _default_nbextensions(self):\n        files = itertools.chain.from_iterable(glob(d + '/nbextensions.d/*.json') \n                                              for d in jupyter_config_path())\n        return list(self.json_load(file) for file in files)\n\n    def json_load(self, name):\n        with open(name) as file:\n            return json.load(file)\n```\n\nA version that takes into account directory precedence.\n\n``` python\nclass NotebookApp1(LoggingConfigurable):\n\n    nbextensions = List(trait=Dict()).tag(config=True)\n\n    @default('nbextensions')\n    def _default_nbextensions(self):\n        dicts = reversed([{\n            os.path.basename(v) : v for v in glob(d + '/nbextensions.d/*.json')\n        } for d in jupyter_config_path()])\n        return list({\n            k: self.json_load(v) \n        for d in dicts for k, v in d.items() }.values())\n\n    def json_load(self, name):\n        with open(name) as file:\n            return json.load(file)\n```\n\nNow if I have a file `bqplot.json` in `./jupyter/nbextensions.d/`, the code\n\n``` python\nn = NotebookApp1()\nn.nbextensions\n```\n\nReturns `[{'dest': 'bqplot', 'require': 'bqplot/extension', 'src': 'static'}]`.\n\n(the content of bqplot.json is)\n\n``` json\n{\n    \"src\": \"static\",\n    \"dest\": \"bqplot\",\n    \"require\": \"bqplot/extension\"\n}\n```\n This is much simpler than trying to have the whole configuration be based on configuration directories. Besides, we can enforce a schema for nbextension declarations via the `trait` and `traits` attributes of the `nbextension` config attribute.\n I am sure @minrk will find a clever way to make that dict comprehension even shorter.\n My question more pertains to the fact that the frontend and traditional\ntraitlets config files live in different locations and have significantly\ndifferent purposes and symantics (the frontend config can be written by the\nlive app, but only in the user area). I think we should aim to keep the\ncommand line APIs the same, but don't know how to solve these problems\nwithout:\n\n1) breaking the location and/or content of existing config files.\n2) Creating an even uglier implementation or model.\n\nTo address Nick's point - our answer to this point is that installation and\nactivation should always be separate. I know that people (including\nourselves) have figured out how to break that and automatically enable\nthings like ipywidgets when they are installed. I think we will regret that\nin the long run for exactly the reasons you are stating. We should make\nenabling extensions easier though - preferably through a nice UI.\n\nOn Thu, Jun 9, 2016 at 7:11 AM, Min RK notifications@github.com wrote:\n\n> A couple of questions for that proposal:\n> - What would merge(deep=True) do with a list?\n> - How would you recover the current behavior of strictly setting\n>   values of container traits? For example, c.Class.dict_trait = {},\n>   which currently ensures the trait is an empty dict, overriding\n>   less-specific configuration.\n> \n> We do have some of this functionality, just not in json config. _Python_\n> config files do support modifications for container traits, which json\n> config files do not. You can do:\n> \n> c.Class.dict_trait.update({'a': 5})\n> \n> and it will add values, rather than overriding the whole trait. We could\n> try to define a scheme for expressing such operations in JSON config,\n> though I am wary of defining _operations_ in such a format, rather than\n> values.\n> \n> Re: nb_conda_kernels, I actually really _don't_ want installing a package\n> like that to be able to change the kernel manager. I really do think\n> installing a package and modifying configuration _should_ be separate\n> steps in the vast majority of cases. What happens when I've installed two\n> custom kernel managers, and they have registered themselves at install\n> time, and assume that conda install is everything you need to do? With\n> conf.d-style, I'm guessing the alphabetically last manager would be used.\n> With post-link, it would at least be the most recently installed, probably.\n> Neither one sounds like a good experience.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1508#issuecomment-224906596,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AABr0J1k7R6p3WuZw9jQuLjwyQMfm_Erks5qKB7_gaJpZM4Is9PS\n> .\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > our answer to this point is that installation and activation should always be separate. \n\nRight, for developers, but we had discussed that package managers need to have the ability to do this sensibly. I guess my downstream needs are now really driven by what it takes to deploy a (or hundreds) of running notebook servers each with bespoke configuration, and every extra step needed is a step that can break.\n\n> though I am wary of defining operations in such a format, rather than values.\n\nTurns out there is a standard for doing just such a thing, as we have discussed over on `nbdime`, namely JSON Patch, built on JSON pointer, etc. The python-based configuration files are are really a lot harder to reason about, not sure how they figure into all this.\n What do you guys think of my implementation proposal above (which is simpler than what was proposed earlier IMO).\n\nThe _registration_ of an nbextension would correspond to adding the corresponding file. Enabling would correspond to set an `enabled` attribute to true in its json file.\n I think @SylvainCorlay's solution is a good one if we want to go the route of supporting this principle for extensions specifically, rather than for configuration as a whole.\n\nIf we want to do this more generally for configuration that is not this list-of-extensions structure in particular, then I'm guessing we probably shouldn't do both.\n\n@ellisonbg I think we can take any of these approaches in a way that's compatible with 4.2, by updating the new-in-4.2 APIs to load into this structure. I don't think anyone is proposing the removal of the currently defined places to look for config, but a strict addition.\n\nSince we already look for config in:\n\n```\nJUPYTER_CONFIG_PATH/config_name.{py,json}\n```\n\nThe simplest implementation of conf.d in my mind is to add\n\n```\nJUPYTER_CONFIG_PATH/config_name.{py,json,d}\n```\n\nwhere all .py/.json (or we could limit it to .json) in JUPYTER_CONFIG_PATH/config_name.d/ are loaded in lexicographical order, as is the tradition of conf.d.\n\nThat would be quite a small change to traitlets.config. I implemented a simple version of this in ipython/traitlets#242. The trickier bit is the merge behavior that's actually the topic of this issue. I fixed the nbconfig side in #1526, since that was just a bug in iteration direction. The traitlets side would require doing something like @bollwyvl suggested with `merge(deep=True)`. While I brought up some issues with this being a backward-incompatible change, that doesn't mean we shouldn't do it, and the affected cases are both rare and small. I also mentioned that merging is ill-defined for lists, so I would propose that we only support merging on dicts, which is easy enough.\n Thanks @minrk, @sylvancorley,  looks like good stuff.\n\nI am still in/am the camp of \"let's configure it all,\" but appreciate\nanything that moves us incrementally forward.\n\nI think the list merging behavior is a fine thing to take off the table, as\nnot even a patch-like spec can solve that one satisfactorily. i think that\nwas part of the complexity we ran into with nbviewer entry_points pr.\n\n@ellisonbg the ring 0 configurator/relauncher UI direction sounds good as\nwell! Sounds like the electron thing...\n\nOn 04:43, Fri, Jun 10, 2016 Min RK notifications@github.com wrote:\n\n> I think @SylvainCorlay https://github.com/SylvainCorlay's solution is a\n> good one if we want to go the route of supporting this principle for\n> extensions specifically, rather than for configuration as a whole.\n> \n> If we want to do this more generally for configuration that is not this\n> list-of-extensions structure in particular, then I'm guessing we probably\n> shouldn't do both.\n> \n> @ellisonbg https://github.com/ellisonbg I think we can take any of\n> these approaches in a way that's compatible with 4.2, by updating the\n> new-in-4.2 APIs to load into this structure. I don't think anyone is\n> proposing the removal of the currently defined places to look for config,\n> but a strict addition.\n> \n> Since we already look for config in:\n> \n> JUPYTER_CONFIG_PATH/config_name.{py,json}\n> \n> The simplest implementation of conf.d in my mind is to add\n> \n> JUPYTER_CONFIG_PATH/config_name.{py,json,d}\n> \n> where all .py/.json (or we could limit it to .json) in\n> JUPYTER_CONFIG_PATH/config_name.d/ are loaded in lexicographical order, as\n> is the tradition of conf.d.\n> \n> That would be quite a small change to traitlets.config. I implemented a\n> simple version of this in ipython/traitlets#242\n> https://github.com/ipython/traitlets/pull/242. The trickier bit is the\n> merge behavior that's actually the topic of this issue. I fixed the\n> nbconfig side in #1526 https://github.com/jupyter/notebook/pull/1526,\n> since that was just a bug in iteration direction. The traitlets side would\n> require doing something like @bollwyvl https://github.com/bollwyvl\n> suggested with merge(deep=True). While I b rought up some issues with\n> this being a backward-incompatible change, that doesn't mean we shouldn't\n> do it, and the affected cases are both rare and small. I also mentioned\n> that merging is ill-defined for lists, so I would propose that we only\n> support merging on dicts, which is easy enough.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> \n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1508#issuecomment-225140108,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AACxRNadYPaKPXMxcPM7G89V9VhW-rLRks5qKTHWgaJpZM4Is9PS\n> .\n Yeah, and any list-like configurable that wants merge can always switch from a list to a dict of bools, like we did with server extensions.\n As part of this, perhaps we add a `--conf-d` flag to the various config changers?\n\n```\njupyter serverextension enable foo --py --sys-prefix --conf-d=foo\n```\n\nto create a `$PREFIX/etc/jupyter/jupyter_notebook_config.json.d/foo.json`?\n\nAdditionally, more generally, I'd love a high-level `config` subcommand that knew how to work with _any_ `Application`:\n\n```\njupyter config nbconvert --sys-prefix --conf-d=foo \\\n  --NbConvertApp.executor_class=foo.KernelEnvExecutor [... more config]\n```\n\nor take a JSON file, I suppose.\n\nThis would remove the need for extension maintainers/packagers having to maintain things like `foo.enable`, where we have to use nasty business like `BaseJSONConfigLoader`, etc.\n\nAdditionally, `jupyter config <subcommand>` could show a pretty listing of exactly what would be used if the app was loaded, which would be really helpful for both supporting config issues, and creating/exporting reproducible configurations.\n Can we bump this from 4.3 to a later release? I'm aware that there are various fixes it would be good to get out to users, and this sounds like a bit of a bigger task.\n @takluyver bumped @minrk Am I right that #2108 fixes/works around this as much as we intend to for 5.0? @takluyver that's my understanding. @minrk can you summarize how all this will work as of 5.0? I want to make sure this stuff is sufficiently resolved that we don't have to change it again before moving to the conf.d approach. @ellisonbg the only change for 5.0 is that `nbserver_extensions` from various config levels is merged in the same way as nbextensions, rather than clobbering at each level. Everything else is unchanged. Closing here, since the titular issue is fixed: user wins, merge happens, nbextensions and serverextensions should behave the same now.","@nsknojj you can update pull requests by continuing to push commits to your branch, you do not need to open new pull requests with every change.\n\nFollowing discussion from #1501, For 'big file' support, it should definitely be hooked up to the contents manager and use the same upload button that already exists. Uploading 'big' files shouldn't be different from smaller ones.\n I've modify the UI to be the same as the original upload.\n I don't know how to pass the travis-ci build test while I add a new dependency \"require(['jquery.fileupload'] )\" in \"tree/js/main.js\".\nI add the path of jquery-file-upload by using require.config({paths:{... : ...}}) in \"templates/page.html\"\nBut the error report says like this, and I don't know how to solve it.\n\n``` python\nTest file: /home/travis/build/jupyter/notebook/notebook/tests/base/deprecated-require-paths.js\nPage Error\n  Message:   SyntaxError: Parse error\n  Call stack:\nPage Error\n  Message:   Error: Script error for \"contents\"\n             http://requirejs.org/docs/errors.html#scripterror\n  Call stack:\n    line 140 of static/components/requirejs/require.js in defaultOnError\n    line 544 of static/components/requirejs/require.js in onError\n    line 1735 of static/components/requirejs/require.js\nPage Error\n  Message:   Error: Script error for \"jquery.fileupload\"\n             http://requirejs.org/docs/errors.html#scripterror\n  Call stack:\n    line 140 of static/components/requirejs/require.js in defaultOnError\n    line 544 of static/components/requirejs/require.js in onError\n    line 1735 of static/components/requirejs/require.js\nTimeout for http://localhost:8888/a@b/\nIs the notebook server running?\n```\n @nsknojj Anything I can do to help? \n @gnestor \nI tried to add big file upload feature using thie existing plugin \"blueimp-file-upload\" https://github.com/blueimp/jQuery-File-Upload\nIn this [commit](https://github.com/jupyter/notebook/pull/1509/commits/2d795ad90b1d277e22604ddbc072df3165d13a33), the travis ci build did not raise error, because I add the blueimp-file-upload javascript as an internal file instead of using bower to maintain the dependency.\nFrankly, I'm not familiar with web, JS, CSS, BOWER and such things and I'm busy recently. If you want to continue completing this feature, you can make changes on my version, start your owns or whatever you can do. Thank you for attention and help!\n\nSorry for poor English.\n > Following discussion from #1501, For 'big file' support, it should definitely be hooked up to the contents manager and use the same upload button that already exists. Uploading 'big' files shouldn't be different from smaller ones.\n\n@nsknojj I suggest that we close this PR and if the need for this feature still exists, follow @minrk's suggestion and use the contents manager.\n","> \"You either die writing JavaScript or live long enough to turn it into TypeScript.\" - Harvey Dent\n Is the plan that the Typescript will all be written in the new `jupyter-js-*` repos, and we'll stitch it into the existing code later, then?\n Yes.\n\nOn Fri, Jul 24, 2015 at 3:27 PM, Thomas Kluyver notifications@github.com\nwrote:\n\n> Is the plan that the Typescript will all be written in the new\n> jupyter-js-\\* repos, and we'll stitch it into the existing code later,\n> then?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/151#issuecomment-124748048.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","Thanks! I think we can get 4.2.1 out, now.\n",":+1: \n :+1: \n Looks good. Perhaps in a future release, we can start moving toward adding pr/issue numbers to the bullets. \n things like #1490 (if the right fix)  should really go into notebook soon, as all the extensions since 4.2 are broken. \n > things like #1490 (if the right fix) should really go into notebook soon, as all the extensions since 4.2 are broken.\n\nAnd all non-python kernels have no highlighting. \n @Carreau good call. I'll cut 4.2.1 now, and we can do 4.2.2 with #1490 next week.\n","I think we implemented that UI ourselves rather than using CodeMirror's autocomplete functionality, though I'm not entirely sure why. Maybe it's been added to CodeMirror since we did it. I think it's a sensible enhancement to allow clicking on options, though - I just tested and was surprised that it doesn't work. I guess I usually select them with the keyboard.\n When we started, CodeMirror didn't have a mechanism for extending its completions that could work with our completion protocol. I don't recall specifically, but I think it might have had to do with the async-ness of it all. I believe CM 4 added enough for this to work, but we [haven't managed](https://github.com/ipython/ipython/issues/6031) to get around to integrating it.\n We can get inspired by nteract. [here](https://github.com/nteract/nteract/pull/318/files) and [here](https://github.com/nteract/nteract/pull/267/files).\n And yes, we did it ourself, because codemirror didn't had enough hooks at the time. \n","I figured out. It's indeed to https:// instead of http://  . I did not understand it's a warning message and I had to proceed to enter a password. Now the problem is solved.\n","Oops!\n closed by #1553","You are likely looking for somehting like [this](https://github.com/ipython/ipywidgets/blob/master/docs/source/examples/Variable%20Inspector.ipynb)\n @Carreau Thanks! This looks amazing. Is there any more finished code that I can use? For example, show the list, matrix in table so people can copy and paste things into things like excel.\n I'm not sure. We are pretty low on manpower, so there is not a lot of work in this area. \nIt should be pretty easy to pick up and improve though. \n There is pretty strong interest in building this as a jupyterlab (https://github.com/jupyter/jupyterlab) plugin.\n","Indeed, thanks!\n No problem :) Thanks for the quick merge!\n","Thanks!\n Perhaps it should be an `alt` attribute or both an `alt` and a `title` attribute.\n","Seem to speed-up the build by ~1min/matrix item.\n Makes sense that it's bower, since a huge amount of the time is spent extracting mathjax.\n I'll rebase/squash.\n could we have a setup.py --nojs for pure python tests ? That would shave a minute or so too. \n We could, but I'm not sure it's worth it. Install shouldn't ever be allowed to succeed without the final compiled js.\n like a `--yes-really-i-dont-want-js-cause-i-m-running-on-travis-just-for-python-tests`\n","My guess is that for security reason. GitHub will sanitise the svgs (for good reason) and is likely overprotective. \n\nIt [will render fine on nbviewer](https://nbviewer.jupyter.org/github/kescobo/gender-comp-bio/blob/name_stats/src/gender_stats.ipynb). \n\nYou can try to contact GitHub Support if you like, but I doubt they can do anything. \n Makes sense, thanks!\n I sent the issue to github support, but for now I can use nbviewer. \n","Yay! Always a good day when you e-see @captainsafia ;-)\n Hehe. I am the PR fairy!\n\n![giphy](https://cloud.githubusercontent.com/assets/1857993/15874640/b66e6b14-2cc9-11e6-967e-12983cf18e10.gif)\n","That's likely doable with an extension, and unfortunately the execution count is not enough. \ntechnically we should send/store an execution timestamp, and the kernel start time. that **should** be enough to get the information. \n","Usually that indicates that the notebook is running with a different Python or in a different environment from Python in the command prompt. Check `sys.executable` to see which Python it's running in, and `sys.path` to see where it's looking for imports.\n Thanks takluyver,\n\nI see the difference. The path from the command prompt shows\n\n> > > sys.executable\n> > > 'C:\\Users\\user\\AppData\\Local\\Continuum\\Anaconda3\\python.exe'\n\nWhere as the notebook shows\n'C:\\Users\\user\\AppData\\Local\\Continuum\\Anaconda3\\envs\\py35\\python.exe'\n\nI had installed py27 and py35 on my system. Can you please let me know how to change to path which is used in command prompt.\n try a `conda install ipykernel --name Python3`,  `python -m ipykernel install`. That will likely fix the notebook can see your Python 3 kernel. Then create a `new` >`Python3 notebook` from the dashboard. \n ~~Hi, I'm encountering the same problem here. I've installed successfully tensorflow and anaconda on my Mac OS. Everything goes fine in spyder, while when programming in Jupyter notebook, some modules seem to be not exist and cannot be imported. \"Error: no module name matplotlib, scipy.....\"~~\n\n~~Then I checked the system and found:\nIn spyder, sys.executable is \"/Users/abc/anaconda/bin/python\";\nIn Jupyter, sys.executable is \"/Users/abc/anaconda/envs/tensorflow/bin/python\" (no matter whether I activate tensorflow in  terminal)~~\n\n~~Both python version are 2.7.11. Now I want to change the python path in Jupyter to which spyder uses. Can anyone please tell me how to do this? Thanks a lot.~~\n\nSee separate issue: #1580\n ```\n$ /Users/abc/anaconda/bin/python -m pip install ipykernel\n$ /Users/abc/anaconda/bin/python -m  ipykernel install\n```\n It works! Thank you so much for your help, really saved my life!\n > It works! Thank you so much for your help, really saved my life!\n\nHappy coding !\n I tried doing what Carreau suggested and although I was able to then import scipy it made it so I could now no longer import matplotlib which I could previously....\n You have one Python environment with scipy installed but not matplotlib, and one with matplotlib installed but not Scipy. Whichever one you pick, you'll have to work out how to install the missing package into it, using conda or pip.\n","hum, that's likely a nbconvert thing. Thanks for the report. \n @Carreau, has @meseeksdev been written to transfer issues between repos?  Yes, if you are admin on both repo and mrmeeseek is activated just say\n\nMention migrate to org/repo\n\nReplace mention by bot name to trigger it.\n\nI should implement a way to tell its name without triggering it.\n\nOn Feb 28, 2017 16:26, \"Michael Pacer\" <notifications@github.com> wrote:\n\n> Has @meseeksbox been written to transfer issues between repos?\n>\n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/1525#issuecomment-283205323>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUez68QPhB6TwI2so4hgcw4AB0_WuBRks5rhLswgaJpZM4IywfB>\n> .\n>\n > I should implement a way to tell its name without triggering it.\r\n\r\nI suggest that it ignores any line ending in `(jk)` for 'just kidding' ;-)","@minrk I have a `~/.jupyter/custom/custom.js` file that listens for the `app_initialized.NotebookApp` event and do some stuffs, like so:\n\n``` js\ndefine(['base/js/events'], function(events) {\n    events.on('app_initialized.NotebookApp', function() {\n        ...\n    });\n});\n```\n\nAfter upgrading `notebook` to `4.2.2` the event handler is not being called anymore and I am not sure why. My thinking is that by reversing the order the nbconfig is loaded, the `app_initialized.NotebookApp` event is being fired before my `custom.js` code is loaded.\n\nDoes this make sense? Is there a better place to listen for `app_initialized.NotebookApp`?\n nbconfig shouldn't affect the custom.js load, it's a separate mechanism. Plus, the load order only affects when there are conflicts, which there shouldn't be on custom.js. It's possible that the app_initialized event has already fired when your module loads. Could you wait for `notebook_loaded.Notebook` instead?\n Sorry, I forgot to mention that I did try to listen for `notebook_loaded.Notebook`, but it still didn't work. \n\nI saw [this post](https://groups.google.com/forum/#!searchin/jupyter/app_initialized.NotebookApp%7Csort:relevance/jupyter/5F2gVEyvOVQ/JtQIRsJbDAAJ) which seems to be the same problem, so something on `4.2.2` changed how these events work on `custom.js`.\n\nI will open an issue to discuss it further. Thanks for the help!\n","Something like that, though we also want to be able to run an application that only provides the kernel service and not notebooks for things like the kernel gateway. We've packaged up the various endpoints into subdirs with this in mind, so maybe while you are putting together JupyterServer, make the list of services to load something that can be changed.\n Yeah, It looks like most of it would go up. Certain things like\n- static directories\n- enabling pylab\n- deprecated APIs\n\ncould remain in `NotebookApp`...\n Yup\n","Thanks @ian-r-rose! This is pretty serious, confirming here on master...\n And that was introduced when fixing syntax highlighting in #1490  by @blink1073 \n Argh!  I'll try and come up with a non whack-a-mole solution...\n > Argh! I'll try and come up with a non whack-a-mole solution...\n\nNo problem, we don't blame you. We probably do need the same modif for the terminal, \nyou showed us the way we might be able to see the light on our own ! \n","Yes, we are aware of that. \n\n@ellisonbg, this might be a good weekly project for your student at CalPoly:\nDesign the UI if there is too much output arriving, **and** the implementation. \n\nIf would be great to have it in the classical notebook, as well as JupyterLab.\n\n@willingc can help with documentation I guess. \n In the meantime maybe throttling data can help:\n\nhttps://github.com/jupyter/notebook/pull/931\n An alternative, intermediate solution option to a complex UI could be a kernel-side filter that simply looks at all display messages and trims any plaintext ones above a (configurable) threshold by snipping their middle section out (\"hollowing them out\"). If the default threshold is high enough, it will cover the immense majority of cases and I doubt anyone will ever notice. \n\nAnd the rare person who really needs to display 1,000,000 lines of text in their notebooks for some bizarre reason, can always bump up the threshold.\n\nThis could be prototyped purely on the IPython kernel by hooking directly into its execution engine, and if it works well, it could be put on the server itself as a filter that applies to all kernels before data is sent out to the clients.\n\nThis would alleviate the need for lots of UI design on this topic.\n And btw, my proposal addresses a different case to throttling mentioned by @Carreau, as it would trim large objects rather than throttling fast-coming output.\n","Perfect, thanks!\n","I **think** we can consider that covered by jupyterhub:\n\n<img width=\"761\" alt=\"screen shot 2016-06-16 at 16 32 54\" src=\"https://cloud.githubusercontent.com/assets/335567/16136519/043b06a0-33e0-11e6-9655-d1fd82df8c36.png\">\n\nWhich is reasonable to use even on a local machine. \n\nThough it will **not** warn you if you have multiple notebook/kernels running.\n @Carreau I suspect that many users would find running jupyterhub a little intimidating - certainly at work I only use Jupyter a part of the time so would not wish to have the hub running all of the time.\n I do think it makes sense to have a way to shut down notebook servers besides interrupting them in a terminal. [Nbmanager](https://github.com/takluyver/nbmanager) is one tool I wrote to do this. It probably needs some updates by now to work with Jupyter, but that should be easy enough if anyone's interested.\n","I don't think there is any simple option to do that, you will likely need to create a `custom.js` files that modify the configuration of the page on the fly. That's not really documented APi thoughs. \n","We do have [logic](https://github.com/jupyter/notebook/blob/master/notebook/services/contents/filemanager.py#L273-L277) that hides these files. The probable cause is tha the [`is_hidden(...)`](https://github.com/jupyter/notebook/blob/master/notebook/utils.py#L82) function is broken. \n\nIf you can figure out why it does not work, and/or what should be added, that would be great, as none of us has windows machine, it's hard to narrow down. \n @Carreau I looked at it and I think it might be because when comparing return value from `GetFileAttributesW`, it is compared only against 0x02, which is hidden-attribute. But when the file is also system file at same time, it probably should be taken into account, right? At least this comparision against 0x02 seems to return 0 for files which has both system and hidden attributes.\n\nLike this:\n\n``` python\n_win32_FILE_ATTRIBUTE_HIDDEN = 0x02 | 0x04 # 0x04 means system file\n# ...\nif attrs > 0 and attrs & _win32_FILE_ATTRIBUTE_HIDDEN:\n# ...\n```\n I think that would only hide files that are both hidden and system. You probably need something like:\n\n```\nif attrs > 0 and ((attrs & HIDDEN) or (attrs & SYSTEM)):\n```\n @takluyver ok, but hope the idea was correct\n Here's the list of file attribute constants:\n- https://msdn.microsoft.com/en-us/library/windows/desktop/gg258117(v=vs.85).aspx\n I think the idea is probably correct - I'm not very familiar with Windows file attributes, but it sounds reasonable.\n Hello again! I looked at it more, and noticed, that I was wrong. System files seems to be hidden also, so just checking if it has hidden attribute should work. \n\nBut [here](https://github.com/jupyter/notebook/blob/master/notebook/utils.py#L131) the `path`-variable is modified and it contains only directory name and is always the same. And after modifying, it is used to get attributes for that `path`, which is always the same.\n\nYou should check [here](https://github.com/jupyter/notebook/blob/master/notebook/utils.py#L135) the `abs_path`-variable. Changing this line to use `abs_path`, it works as it should.\n Good catch, do you want to make a PR?\n Done.\n I am currently in a situation where I would like the hidden files to be shown (at least certain ones), so that I could edit them in the Jupyter editor, or screenshot a directory listing showing a hidden file (which happens to be a configuration file I'd like to highlight).  \n\nIs there any interest in a configuration option that would show hidden files?  \n","That's super odd! This is a fine place to report it, though the bug may ultimately reside in CodeMirror, the library that handles most (not quite all) of your interactions inside a given cell. What browser (including version) are you using, and what version of the notebook (Help > About)? Does it make a difference if you choose a different browser? How reliably does this happen? I haven't been able to reproduce it with a quick test, but I'm using Safari on OS X.\n This reproduces on Chrome 51.0.2704.84, also on IE 11. \n\n```\nThe version of the notebook server is 4.2.1 and is running on:\nPython 2.7.11 |Anaconda 2.5.0 (64-bit)| (default, Feb 16 2016, 09:58:36) [MSC v.1500 64 bit (AMD64)]\n```\n Couldn't reproduce on Firefox or Chrome on Linux.","this happens when I try to start a kernel.\n Did you close the issue because you fixed it? That error message usually\nmeans import has found an old version of IPython.\n yeah, i upgraded pip and  jupyter and it seems to work fine now.\n I get this error, when trying to add python3 kernel to jupyter:\r\n\r\n```bash\r\npython2 -m pip install ipykernel\r\npython2 -m ipykernel install --user\r\n\r\npython3 -m pip install ipykernel\r\n---> python3 -m ipykernel install --user\r\n\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.5/runpy.py\", line 174, in _run_module_as_main\r\n    mod_name, mod_spec, code = _get_module_details(mod_name, _Error)\r\n  File \"/usr/lib/python3.5/runpy.py\", line 133, in _get_module_details\r\n    return _get_module_details(pkg_main_name, error)\r\n  File \"/usr/lib/python3.5/runpy.py\", line 109, in _get_module_details\r\n    __import__(pkg_name)\r\n  File \"/home/botcs/.local/lib/python3.5/site-packages/ipykernel/__init__.py\", line 2, in <module>\r\n    from .connect import *\r\n  File \"/home/botcs/.local/lib/python3.5/site-packages/ipykernel/connect.py\", line 14, in <module>\r\n    from IPython.paths import get_ipython_dir\r\nImportError: No module named 'IPython.paths'\r\n``` It usually means it's finding an older version of IPython somewhere. Try uninstalling and reinstalling IPython. Look out for copies that might be installed by system package managers (e.g. apt), which are often outdated. Different versions with pip were installed (both pip2 and pip3) also with apt - and after removing every installations, I was still able to launch jupyter... I installed iTorch a year ago, with some ez-install method, turns out I could not find any manager which would reveal this installation. So I removed everything with jupyter in its name - and after I checked that there is no way to start jupyter anymore, I installed with pip, and now it is working fine. Great. :-) This is one of those things where the fix is usually 'uninstall everything related and set it up again', but there are so many different ways things can be installed, it's hard to automate removing them.","By default it offers the version of Python that Jupyter is running in. Here are the instructions for telling it about other versions of Python:\n\nhttp://ipython.readthedocs.io/en/stable/install/kernel_install.html\n","Both create an `IFrame` object, but it's only automatically displayed if it's the last thing in the cell. You can explicitly display it with the `IPython.display.display()` function.\n\nThis is exactly the same as seeing output when you do:\n\n``` python\na = 4\na\n```\n\nBut not when you do:\n\n``` python\na = 4\nif 1:\n  a\n```\n thanks!\n","Try running `%matplotlib inline` in a separate cell beforehand. I forget if it affects that, but some things like that don't properly kick in until after the cell finishes running.\n Oh,  just saw you've already tried that, nevermind.\n","It was only added less than a month ago  - #1468. The `--allow-root` flag was a recent addition (#1115), not a recent removal.\n Thanks for the clarification. The bottom line is that if you pull docker image from the docker hub, i.e. https://hub.docker.com/r/jupyter/notebook/, it throws the above error. I'm currently using the docker-stack images, i.e. https://github.com/jupyter/docker-stacks, and, indeed, they work fine.\n I'm not exactly sure how docker hub works, but it sounds like you're getting a released version of the notebook code with the master version of the Dockerfile. Since they're in the same repo, they ought to be used in sync. I see on #1468 a suggestion about removing the Dockerfile from this repo entirely in favour of docker-stacks, though.\n The instructions in the github README still causes this error. How am I practically speaking intended to install this?\n @Baughn the docker bit in the README should have been removed; it's gone in #1603. The notebook can be installed with `pip install notebook`. A developer install can be made from master with:\n\n```\ngit clone https://github.com/jupyter/notebook\ncd notebook\npip install -e .\n```\n\nIf you want to build an image that includes a release of the notebook, start from one of the [docker-stacks](https://github.com/jupyter/docker-stacks).\n","Didi you get any error ? do you have gulp, npm, node installed ?\n No I only installed the python packages as mentioned in the post and the installation didn't give any error.\n Here it is a screenshot:\n\n![screen shot 2015-06-13 at 11 46 55](https://cloud.githubusercontent.com/assets/4156237/8145573/0f25f2dc-11c2-11e5-9ab8-72e61d8e514a.png)\n Do I have to create a configuration dir manually?\n This is typical of you not having node installed. \nInstall nodejs, check that npm is installed. The installation shoudl fail is node/npm is not installed. \ntry to run manually in notebook folder (in order)\n- npm install \n- bower install \n- gulp js\n- gulp css\n How do I install those on OSX? Are this new dependencies?\n\nI currently use run ipython notebook 3.1 from Anaconda.\n They're development dependencies - you need them if you want to run from git master. When we release the next version of the notebook, you'll be able to install it from PyPI without needing any of these. If you're not sure how to install them, I recommend you stick with IPython 3.1 for now. There are no major new features for 4.0 in any case.\n Agreed with @takluyver, if you are not sure what any of theses are and how to install them, you should probably stay off master for the time being. Though is you are adventurous to try:\n- bower is a package manager for front end javascript you can install it with npm, \n- npm is a js package manager for node, it comes with node that you can install with brew. \n- [brew](http://brew.sh/) is a package manager for OS X\n\nClosing the issue but feel free to continue asking questions if you like. \n","Do an `import sys` , `sys.executable`. \n\nThe interpreter that run the notebook is **likely** different than the one that run the **kernel**. \n\n`frameworkpython -m jupyter notebook` is roughly useless as you run the jupyter command with `frameworkpython`, it shells out, so the interpreter of notebook can perfectly be not the framework one (and heck the notebook could be written in go you wouldn't notice) , then it's start the kernel which could again be in another language or interpreter.\n\nYou **likely** want to do : \n\n```\n$ frameworkpython -m ipykernel install --name 'frameworkpython'\n```\n\n to get a new available frameworkpython kernel, or just drop the `--name 'frameworkpython'` to replace the default python kernel. Using `%matplotlib inline`  might also help as then it does not try to use the osx backend. \n Thank you @Carreau - this worked for me.\n > Thank you @Carreau - this worked for me.\n\nGreat !\n","Are you sure about the situation? Could the kernel have been stopped even if the notebook was still open? Did you click the little in-page refresh button on the running tab? It certainly should be showing all running kernels that the server knows about, and that's what I see on master.\n Yes, just verified. Also refreshing did not help.\n Weird. I've just tested on 4.2.1 and it's working as I'd expect.\n Running **filter** or running **tab** ?\n\nTAB\n![screen shot 2016-06-14 at 11 45 17](https://cloud.githubusercontent.com/assets/335567/16055279/7dd220c8-3225-11e6-918b-d5ecf97b17c9.png)\n\nFilter \n\n![screen shot 2016-06-14 at 11 45 11](https://cloud.githubusercontent.com/assets/335567/16055282/7f534530-3225-11e6-89d6-40dde88ea20d.png)\n filter. And i realise that that's basically my feature request, b/c it works as expected in the Running tab! I guess I suffered from visual feature overload and somehow forgot about the running tab. and the filter is meant to only work on currently listed files. That makes sense, sorry for the noise.\n No worries. Thanks Matthias for working out the disconnect here.\n","I doubt we can do anything for PDF, already the fact that MD are converted is a miracle. \n\nAlso that will likely be a nbconvert issue more than notebook. \n\nWe'll investigate though. \n","The editor component is called Codemirror - it's [been fixed](https://github.com/codemirror/CodeMirror/commit/db62891c78fb9240ad9e4020020e7ed81a03ef6a) there, but I don't know what version of Codemirror or what version of the notebook has the fix. If you're not already using the latest release of the notebook, try upgrading. :-)\n Thanks Thomas! Still broken on the latest pip version and on master. Should I drop the latest codemirror into notebook/static/components/codemirror and PR?\n We don't check the JS dependendencies into the repo, they're specified in [bower.json](https://github.com/jupyter/notebook/blob/master/bower.json).\n\nYou're welcome to do a PR updating that, but it already has 5.14, and the release notes say that should have the fix for `@` : https://github.com/codemirror/CodeMirror/releases/tag/5.14.0\n\nIf you've just switched over to master, your browser might be caching some JS. An easy way to avoid that is to run the notebook server on another port, with `jupyter notebook --port 8889`.\n Works. Thanks for the pointers. Was a caching problem.\n","Thanks, we had a 4.2 release that **might** have fixed that. \nWill check. \n ahh.. sorry missed that. I'm slow. I'll try and see if it keeps happening.\n No problem, we know people can't keep up with everything. \nAnd Python packaging is the worst, you can't know if there are available updates. \n Thanks. I'll reopen if it persists / reappears.\n Ok, I think I'm still seeing this.\nI have an anaconda installation with\n\n```\njupyter                   1.0.0                    py35_3  \njupyter_client            4.3.0                    py35_0  \njupyter_console           5.0.0                    py35_0  \njupyter_core              4.1.0                    py35_0  \nnotebook                  4.2.1                    py35_0  \n```\n\nAre these all the relevant packages? Is there a meta-package or something that I can update?\n\n```\n[E 14:51:04.173 NotebookApp] 500 DELETE /api/sessions/6ac79d17-f007-4714-9ade-54b563c73b9b (127.0.0.1) 1.52ms referer=http://localhost:8888/notebooks/02-supervised-learning.ipynb\n[E 14:51:06.871 NotebookApp] Unhandled error in API request\n    Traceback (most recent call last):\n      File \"/home/andy/anaconda3/lib/python3.5/site-packages/notebook/base/handlers.py\", line 458, in wrapper\n        except web.HTTPError as e:\n      File \"/home/andy/anaconda3/lib/python3.5/site-packages/tornado/gen.py\", line 1008, in run\n        value = future.result()\n      File \"/home/andy/anaconda3/lib/python3.5/site-packages/tornado/concurrent.py\", line 232, in result\n        raise_exc_info(self._exc_info)\n      File \"<string>\", line 3, in raise_exc_info\n      File \"/home/andy/anaconda3/lib/python3.5/site-packages/tornado/gen.py\", line 282, in wrapper\n        yielded = next(result)\n      File \"/home/andy/anaconda3/lib/python3.5/site-packages/notebook/services/sessions/handlers.py\", line 111, in delete\n        changes['path'] = notebook['path']\n      File \"/home/andy/anaconda3/lib/python3.5/site-packages/notebook/services/sessions/sessionmanager.py\", line 218, in delete_session\n        the session database\"\"\"\n      File \"/home/andy/anaconda3/lib/python3.5/site-packages/notebook/services/kernels/kernelmanager.py\", line 105, in shutdown_kernel\n        return super(MappingKernelManager, self).shutdown_kernel(kernel_id, now=now)\n      File \"/home/andy/anaconda3/lib/python3.5/site-packages/jupyter_client/multikernelmanager.py\", line 33, in wrapped\n        r = method(*args, **kwargs)\n      File \"/home/andy/anaconda3/lib/python3.5/site-packages/jupyter_client/manager.py\", line 302, in shutdown_kernel\n        self.request_shutdown(restart=restart)\n      File \"/home/andy/anaconda3/lib/python3.5/site-packages/jupyter_client/manager.py\", line 252, in request_shutdown\n        self.session.send(self._control_socket, msg)\n      File \"/home/andy/anaconda3/lib/python3.5/site-packages/jupyter_client/session.py\", line 684, in send\n        stream.send_multipart(to_send, copy=copy)\n    AttributeError: 'NoneType' object has no attribute 'send_multipart'\n```\n If it's any help, this particularly seems to happen with relatively large notebooks like 02 and 03 from here: https://github.com/amueller/introduction_to_ml_with_python\n @amueller sorry to bother you again, do you have time to try with jupyter_client 4.4.0? If it still happens with that, then I guess that `request_shutdown` should check the control socket it's trying to send to. Something must be closing it before it tries to send the shutdown request.\n I looked through, and if `request_shutdown` is called twice, this will happen. I couldn't figure out how request_shutdown can be called more than once, though. That's probably something subtle in the handlers here. In any case, jupyter/jupyter_client#226 should make it safer to call shutdown twice. I'm okay calling this one not a bug in this repo for now. I thought I had replied to this, sorry. I didn't observe this any more, but given that it was non-deterministic, I'm not sure how strong a claim that is. I'm totally fine with closing for now. @amueller thanks, keep us posted if you see it again!","Hum. @ellisonbg , @blink1073 , @jasongrout is that possible with the new jupyter-js-services ?\n jupyter-js-services is agnostic to file extension, this requires a change to the server.\n We can make notebook extension a (non-configurable) attribute on the ContentsManager, and then custom ContentsManagers can use a different extension.\n Thanks for the suggestion @minrk. Would you be restricted to just one nb extension then? My implementation reads regular .ipynb notebooks regularly, but passes notebooks ending in .ipynb.gpg through decryption/encryption when reading/writing. So in a sense it works with multiple nb extensions.\n\nIt was actually quite easy to implement this, thanks to the well thought out API. I only had to extend the `FileManagerMixin` class methods `open` and `atomic_writing`, and the `FileContentsManager` methods `new_untitled` and `increment_filename`. I filed this issue because I had to copy the code of `new_untitled` into my subclass and modify one line because it won't let me override the extension.\n @stevenmanton for new_untitled, it's probably going to be a single value because there's no mechanism to pick between choices. For the most part, the contents API shouldn't be sensitive to notebook extensions, as it's up to the CM implementation to determine whether a file is a notebook or not.\n I guess what I had in mind was that if the line I mentioned above was `ext = ext or '.ipynb'` then when I override the `new_untitled` method I could just do something like following, rather than copying the entire contents of `new_untitled`, if that makes sense.\n\n``` python\ndef new_untitled(self, path='', type='', ext=''):\n    if type == 'notebook' and not ext:\n        ext = '.ipynb.gpg'\n    return super().new_untitled(path=path, type=type, ext=ext)\n```\n Setting the `ext` makes sense IMO. It would not break anything either and is useful for ContentsManager creators.\r\nIf this is an OK solution, let me know, I'll make a pull request","Sounds great! Please do make a PR when you are ready.\n PR for all the instance-level cleanups is here: https://github.com/jupyter/notebook/pull/1557.\n #1557 was merged. Do we want to try to tackle the class-level cleanups as well? Or shall we close this?","This is not the final solution to the CodeMirror problem, but we will need this as part of it, and it allows the terminal to work.\n I verified that syntax highlighting works for Python and JavaScript, and that terminals work.  CodeMirror modes are loaded using RequireJS explicitly.  Anything in `addon/` that is loaded by both Webpack and RequireJS will still affect the global `CodeMirror` instance, but would re-evaluate that code and state would be lost.\n cc @SylvainCorlay @jasongrout \n The following addons are loaded by WebPack currently:\n\n```\nedit/matchbrackets\nedit/closebrackets\ncomment/comment\ndialog/dialog\nsearch/searchcursor\nrunmode/runmode\n```\n Based on further experimentation, the `addons` and `keymap` need to be explicitly loaded as script tags, and could be moved from the source files into the appropriate html templates.\n Why do you say that they need to be loaded as script tags? Is this because of webpack? They worked just fine with requirejs while we didn't use webpack.\n I mean that right now the find/replace does not work in the editor page, but if I add the `addon` script tags, it does work.  I have not yet nailed down what that is.\n The `addon/search` code is in the Webpack bundle, but it is not affecting the global `CodeMirror` instance.\n Ah, there is _another_ copy of `codemirror.js` in the Webpack bundle as well, picked up by relative paths in the `addon` files I imagine.\n Yep, `../../lib/codemirror` calls that bundled version.\n Fixed!  Success!!!!\n <img width=\"526\" alt=\"screen shot 2016-06-16 at 6 53 41 am\" src=\"https://cloud.githubusercontent.com/assets/2096628/16115825/168fe7b8-338f-11e6-8e43-ea72cf06bee9.png\">\n <img width=\"279\" alt=\"screen shot 2016-06-16 at 6 54 45 am\" src=\"https://cloud.githubusercontent.com/assets/2096628/16115860/3bc15620-338f-11e6-9095-5038d5a5ae02.png\">\n And...\n\n<img width=\"270\" alt=\"screen shot 2016-06-16 at 6 58 44 am\" src=\"https://cloud.githubusercontent.com/assets/2096628/16115958/cd146c84-338f-11e6-923a-d98c864c53af.png\">\n Gotcha, thanks. So if people `require('codemirror')` now, whether in our webpacked files or at runtime, everything is AOK and there's just one CodeMirror module on the page?\n This seems related to the issues with Cell, where if one uses require to load the `cell` module and set global configuration, it's actually loading a different copy.\n\nIs it impossible to bundle things with webpack such that `require` at runtime finds the webpacked module? If so, that seems like a severe problem, to the point that maybe we shouldn't be using webpack in the 'legacy' notebook.\n Right, I verified that there is no `CodeMirror` in the bundle itself.  I just added the ability to `require('codemirror')` no path qualifier.\n The two are fundamentally at odds, yes.  This is a wider discussion that we need to have as a group.\n I'd vote to use all `RequireJS` in the existing notebook and all `Webpack` in JupterLab.\n Thanks, that's my inclination, as well. I think with the clearer separation we have now with jupyterlab, it will be easier to 'stick with the old way' here, and adopt new tools over there.\n Merging here, as it fixes a severe issue, and we can figure out the bigger issue later on.\n","Thanks a lot for investigating that ! It is a super brittle piece of code though, which is years old.  we have to be careful with what we are doing. \n\nCodemirror now [ships with an autocompleter](http://codemirror.net/demo/complete.html) , it might be worth investigating using that, instead of trying to fix the behavior of our clucky taped togeter completer. \n > On linux/ windows you might need to click on the menu to be able to mouse scroll \u2013 does that still work, or can you, as in mac of, scroll even without focusing ?\n\nI think it's actually the other way around. Without this change, you cannot click the scroll wheel (at least in Chrome on Linux). Focus will immediately switch to the editor and the completion box will disappear. With this patch, you can click-and-drag the scroll wheel.\n\n> With your patch after clicking a completion the notebook is in an inconsistent state. Keybinding are not working correctly, until a reach the mouse and click in a cell, and even though menu can get stuck.\n\nI'm not sure how to check for an inconsistent state, but I've added `that.editor.focus();` after `that.pick();` and it appears to fix the other issues.\n\nI understand if this is too much duct tape on duct tape to feel safe to include though.\n Thanks. From the code, I'm guessing the original intention was click to focus, so one could select without applying the completion, then double-click to apply it. I think this PR is an improvement for me, though, so I'm inclined to merge as-is.\n\nIn general, I agree that if someone wants to put in the time to send our completions to CodeMirror's own completion widget, that should be a big improvement.\n In the meantime, if we want this patch to our Jupyter version, is it possible to modify this through our `kernel.js` (if so, could you give me some suggestion how), or would we need to maintain our own patched version? There are also some other changes we want to make to the Completer that probably wouldn't be of interest to Jupyter core, so I'm curious whether this is possible.\n\n> In general, I agree that if someone wants to put in the time to send our completions to CodeMirror's own completion widget, that should be a big improvement.\n\nIs it possible to replace the Jupyter custom completion code with CodeMirror's completion widget without upgrading all of the CodeMirror code to the current version? The former sounds like something I might be able to do, but the latter, probably not.\n > Is it possible to replace the Jupyter custom completion code with CodeMirror's completion widget without upgrading all of the CodeMirror code to the current version?\n\nI think the version of Codemirror we already include has the completion widget, we're just not using it. We have (in master) 5.14, which is only a couple of months old.\n\nhttps://github.com/jupyter/notebook/blob/c9a7e9df13eb4bbc888450e6d773815f97a52ad1/bower.json#L8\n There is a small inconsistency possible if you click on the scrollbar, and then on one menu. But it appears like it can't persist. \n\n![inc](https://cloud.githubusercontent.com/assets/335567/16157623/29204f1e-346e-11e6-9920-42c8a3185e40.gif)\n\nI'll be with min on this one, it seem like an improvement, so let's try it, and if there is ever a critical think we did not think about, we can always revert. \n\nFor your other question, yes you can probably ship things with your `kernel.js` but you will likely need to use private undocumented API and that will be something brittle. \n\nMerging ! \n\nThanks ! Welcome to the party !\n","We could I don't see any hard in that. Though we will still have to expose require in the namespace for compatibility with user custom.js.\n\nHow do we switch from require to requirejs ?\n requirejs already supports it - you simply write \"requirejs\" where you currently use \"require\" (you can check the requirejs 2.0 api guide, 3rd code example under \"and in app.js:\"-  http://requirejs.org/docs/api.html)\n","I think jupyter/jupyter_core#96 provides for this. Please reopen if there's something more to add.","Do you mean the notebook server, or the kernels? There was a fix recently for logging in IPython kernels, which should be released with ipykernel 4.4: https://github.com/ipython/ipykernel/pull/127\n\nIf it's the notebook server you want, I don't think the log destination is configurable at the moment, although you could redirect stderr at a pinch.\n The goal is to configure jupyter notebook to log to a file instead of only to stderr/out, since I'm running it as a daemon. As far as I could tell, it only allows configuration of a few logging properties, such as log_format.\nI tried working around this by setting up the python logging framework from the jupyter conf file, to no avail.\n\nStandard out redirection could be a hack to get around this, but if possible I'd rather find a hack that allows me to work with python logging directly.\n I think stdout/err redirection is generally preferable, as it's more robust to outputs that might be written directly to stdout/stderr in exceptional circumstances (crashes, etc.) or by subprocesses, which logging doesn't capture. All daemon tools I'm familiar with support redirecting stdout/stderr to log files, and I would generally recommend using this instead of modifying Python logging destinations, as it works not just for Jupyter, but all programs.\n","Thanks !\n","I take it this means we can also axe the https://hub.docker.com/r/jupyter/ubuntu_14_04_locale_fix/ base image (from https://github.com/jupyter/docker-stacks/tree/master/internal/ubuntu_14_04_locale_fix) which only existed (I think) to support the jupyter/notebook image. Or is / was it being used for anything else?\n Must have missed this one. In any event \ud83d\udc4d. I sort of got the feeling we were going this way anyways. docker-stacks is just a better curated version. Couple notes though.\n- Should we add a note in the Readme?\n- Also there seems to be some other Docker stuff we missed (e.g. `.dockerignore`). See PRs ( https://github.com/jupyter/notebook/pull/1637 ) ( https://github.com/jupyter/notebook/pull/1638 ).\n","So far we have limped along by pulling things out of the WebPack bundle that might be required using RequireJS (jQuery, CodeMirror).  For things that _should_ be in the bundle (like `notebook/js/cell`), we can't pull those out to be external, but we could export them from the bundle and manually point the RequireJS path to the bundle, but I do not see that scaling for all intended uses and would be a whack-a-mole solution.\n Yeah, and that's no good because everything should be loadable by require\u2014certainly notebook, cell, outputarea, etc. We are only bundling them for load-time optimization. When we did the bundling with require, it had no effect on the behavior, only an optimization. Pulling things out to script tags undoes all that.\n _Technically_ we could use a [DllPlugin](https://github.com/webpack/docs/wiki/list-of-plugins#dllplugin) to create the shared bundle, use the [DllReferencePlugin](https://github.com/webpack/docs/wiki/list-of-plugins#dllreferenceplugin) to consume the bundle from Webpack, and find/write a way to generate a RequireJS config using the manifest created by the DllPlugin.\n We could try that. I'm not sure if there's a benefit to using webpack in this repo given our backward-compatbility goals, though. I think the main reason was that it's what we want to use in new projects, so we should be consistent, but with lab in its own repo I think that makes less sense now.\n\nAre there benefits to webpack over require.js in this repo?\n I'm looking at this from the opposite side as well, how do we load external things in JupyterLab, or do we want to force everything to be WebPacked?  That would mean, for instance, that installing/uninstalling an extension would require a rebuild of WebPack.  We could still support dynamic enable/disable by using the html template to define the bootstrapping code for the application, and use the desired modules from the bundle.\n > installing/uninstalling an extension would require a rebuild of WebPack\n\nI think that's not going to work. We cannot require running webpack to be a runtime dependency for using an extension.\n\nI expect that we should be able to deal with this in JupyterLab by making the extension points more clearly defined exported functions / events / observables / etc., Rather than allowing full access to everything in extensions. If we do that, extensions shouldn't need to be able to extend prototypes on Cell, etc. which is the source of the problems we have in the notebook right now (and then the fact that they cannot extend these prototypes becomes a _good_ thing).\n I am fine backing out of using webpack in the classic notebook...\n\nOn Fri, Jun 17, 2016 at 3:16 AM, Min RK notifications@github.com wrote:\n\n> installing/uninstalling an extension would require a rebuild of WebPack\n> \n> I think that's not going to work. We cannot require running webpack to be\n> a runtime dependency for using an extension.\n> \n> I expect that we should be able to deal with this in JupyterLab by making\n> the extension points more clearly defined exported functions / events /\n> observables / etc., Rather than allowing full access to everything in\n> extensions. If we do that, extensions shouldn't need to be able to extend\n> prototypes on Cell, etc. which is the source of the problems we have in the\n> notebook right now (and then the fact that they cannot extend these\n> prototypes becomes a _good_ thing).\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1554#issuecomment-226765937,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AABr0H0seYFNNHDgbHsfvXoO7PDjNYsYks5qMp4TgaJpZM4I4JjG\n> .\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I had _thought_ we could rectify the use of Webpack and RequireJS, but existing extensions rely on the ability to `require()` individual modules of the Notebook and modify them.  The changes being made to Phosphor [here](https://github.com/phosphorjs/phosphor/pull/105) enable us to do so from code that will be Webpacked itself _and_ use the appropriate Webpack `externals` config.\n\nI recommend taking the stance that the Notebook is and always will be AMD-only and use RequireJS.\n @gnestor, thoughts on this?\n Let me start out by saying that I don't have any experience using AMD and RequireJS and I have a lot of experience using CommonJS and Webpack. Webpack is great because it allows you to use a lot of the good things about Node.js (CommonJS, npm) within the browser by bundling all of your modules into a file that can be used within a `<script>` tag. With Webpack, it's easy to use external modules (such as browser libraries like jQuery and Bootstrap) from within the bundle without actually bundling them using the `externals` config. This would allow the core notebook (bundled by Webpack) to access extensions (not bundled). However, I don't know of any good/safe way to allow extensions to access the notebook core, but like @blink1073 mentioned, there are a couple Webpack plugins that would enable this:\n- [DllPlugin and DllReferencePlugin](https://github.com/webpack/docs/wiki/list-of-plugins#dllplugin): Webpack plugin that allows one bundle to provide modules (e.g. vendor bundle) to another consumer bundle (e.g. app bundle). I couldn't find an example of consuming a DLL bundle outside of Webpack (only examples of a provider bundle using the DllPlugin and a consumer using the DllReferencePlugin).\n- [script-loader](https://webpack.github.io/docs/shimming-modules.html#exposing): Webpack loader that will evaluate a module in the global context (like a `<script>` tag).\n- [expose-loader](https://webpack.github.io/docs/shimming-modules.html#exposing): Webpack loader that will export a module to the global context.\n\nIt appears that all of these options would enable extensions to access the notebook core by exposing the notebook core to the global context, which is not a good solution.\n\n> I expect that we should be able to deal with this in JupyterLab by making the extension points more clearly defined exported functions / events / observables / etc., Rather than allowing full access to everything in extensions. If we do that, extensions shouldn't need to be able to extend prototypes on Cell, etc. which is the source of the problems we have in the notebook right now (and then the fact that they cannot extend these prototypes becomes a good thing).\n\nI have experience developing Atom packages and if you look at Atom's API, it also exposes an [`atom` global](https://atom.io/docs/api/v1.9.8/AtomEnvironment#instance-confirm) that allows packages to subscribe to events, get state, and safely set state. Instead of \"extending the prototype of a [TextEditor],\" a package can render custom UI within a TextEditor by [calling a method](https://github.com/nteract/hydrogen/blob/ac31c110903ae2d6009624441521116dbb840aac/lib/main.coffee#L243) on that editor. \n\nI'm not familiar with the current notebook- or jupyterlab-extension API, so I would need to see some docs/examples to offer any suggestions regarding _to Webpack or not to Webpack_.\n\n@rgbkrk I know that nteract is using Electron (the same native shell that Atom uses) and therefore doesn't require Webpack, but do you have any insights nonetheless?\n Seems like we can never divest from requirejs based on previous usage of and reliance on AMD. I'll go ahead and stand by @blink1073 in saying \"that the Notebook is and always will be AMD-only and use RequireJS.\", while hanging my head :cry:. Thanks for giving it a go.\n\nAs for nteract and Electron, we face the same problem as in https://github.com/jupyter/roadmap/pull/9 and https://github.com/jupyter/notebook/issues/116, regardless of the module loader. I don't have any solutions though.\n /cc @jdfreder\n Proposal: use the DllPlugins for the notebook itself and use the resulting manifest to generate `define` blocks for each of the modules to inject into `page.html`.  The define blocks would look like `define('base/js/namespace', function() { return main_bd2114230b51144d70d3(42); });`, where `main_bd2114230b51144d70d3` was the name in the manifest and `42` was the module number for `base/js/namespace`.\n @blink1073 This sounds like it's worth a try. I'm happy to help although I think you have a better understanding of how to go about implementing it. Do you want to give it a shot? Also, what is the priority level of this (1 being this should be worked on whenever and 5 being this should be worked on immediately)? @minrk Thoughts?\n I'll take a stab at it next week.\n Sounds like it's worth a shot. A while back, I took a stab at reverting to the old requirejs setup entirely for the legacy notebook, but too many webkit-based things have crept in that made it pretty difficult, and I had to move on to other things.\n\nI don't care about the build tools too much, as long as we can fix the runtime-require behavior that users are already relying upon.\n In the interest of releasing 5.0 soon, I think it's time to act on this. I will certainly help or take the lead on this if necessary. Here is the [webpack](https://github.com/jupyter/notebook/pull/1047) PR with 36 commits! I don't know if there is a semi-automatic way to revert a PR/merge, but if there is that could be a good place to start. Thoughts?","I found this: https://github.com/ipython-contrib/IPython-notebook-extensions, which more than does what I want. Closing this.\n For the record, I don't see us ever storing timestamps in the notebook file by default, because it would make it really horrible for version control. Of course extensions are welcome to do things like this.\n @takluyver I wonder if instead, we can pass timing info back to the client as part of the Jupyter protocol. That's the only real way to get timing info - since I can't seem to find a way for IPython extensions to modify the structure of the output sent back to the client. Solutions like https://github.com/ipython-contrib/jupyter_contrib_nbextensions/tree/master/src/jupyter_contrib_nbextensions/nbextensions/execute_time only measure time on the client side, so are subject to network delay & refresh artifacts. Knowing the timing information for cell executions can be quite important for certain pedagogical purposes.\r\n\r\nI'll be totally happy if I can do this as an extension tho :) The advantage of a notebook extension, though, is that it works for all kernels, without the kernel needing to implement anything extra. It could be informed by optional metadata in the execute_reply, though. Yup! Exactly - and afaict you can't add this optional metadata without\npatching ipykernel itself  (extensions can't add this).\n\nSo I hope that either we make it extensible for ipykernel, or add it\nourselves. I agree that on the notebook side it can be an extension that\ncan use the metadata when it is available, and fall back (with warnings) to\nthe client side timing info otherwise.\n\nOn Mon, Mar 6, 2017 at 9:35 AM, Thomas Kluyver <notifications@github.com>\nwrote:\n\n> The advantage of a notebook extension, though, is that it works for all\n> kernels, without the kernel needing to implement anything extra. It could\n> be informed by optional metadata in the execute_reply, though.\n>\n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/1555#issuecomment-284471120>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAB23jHVfxvXYuF6ktKEuTqzY1H1rRjYks5rjEP_gaJpZM4I4u53>\n> .\n>\n\n\n\n-- \nYuvi Panda T\nhttp://yuvi.in/blog\n","Hi ! Thanks for the report. \n\nHeader **have to** have a space after hashes to be rendered. Can you share the markdown that does not render for you so that I can test ? \n The only reason I marked `##issues` is for myself so I didn't forget about it :octocat: \n\nHere's the file in question, it should be down towards the bottom. \n[Typography.ipynb.zip](https://github.com/jupyter/notebook/files/326234/Typography.ipynb.zip)\n HUm.. in the notebook, I get the last markdown cell rendering correctly.\n\nWhich version of notebook? \n\ncan you open the Developer console and check for JS error messages ? \n Woops, wasn't on the correct build. Current output is correct and has all the syntax highlighting. \ud83d\udc32 \n Ok thanks ! Leaving open for the issues in JupyterLab !\n","Thanks !\n\nBTW, I was sad you could not make it in time for your talk at PyCon :-P \n @Carreau thanks!  We're doing a make-up at PyGotham in a few weeks, but I have a feeling we'll have some scheduling issues at the last minute ;).\n > We're doing a make-up at PyGotham in a few weeks, but I have a feeling we'll have some scheduling issues at the last minute ;).\n\nWell, at least you won't have to improvise your talk in front of a blank notebook !\n","Did you close the issue because you resolved the problem?\n Yes, I've created `kernel.json` file with path to the virtualenv python.\n OK, great.\n I have the same issue here, but am unclear as to how it was fixed. To be clear, I need to manually create  `kernel.json` file? All I did was to create an environment (Py3.5) and attempted to use it straight away after creation. Should this not be expected to work?\n OK, I did not have `ipykernel` in my `environment.yml`. This seems to have fixed it for me.\n","The PID it stores and acts on is for bash itself. You're running Python from bash, so that's a subprocess.\n\n```\nipython\n \u2514 bash\n    \u2514 python (in this example)\n```\n @takluyver Is there a way to get the child process id into a python or bash variable to be used later in the notebook? The use case I'm envisioning is: cell 1 starts a simple local webserver, cell 2 invokes that webserver, cell 3 kills the webserver.\n\nFor example, can I use this answer to set a session id for the bash cell? http://stackoverflow.com/questions/4789837/how-to-terminate-a-python-subprocess-launched-with-shell-true\n If you just want to run something, use Python's native `subprocess` module, rather than a magic i.e.\n\n``` python\nproc = subprocess.Popen(['python', 'myfile.py'])\n```\n\n(Of course, you can wrap this in a function for users to call if you like).\n\nIf you need to do it through bash for some reason, [this SO answer](http://stackoverflow.com/a/1911387/434217) describes how to save the PID of a background job.\n I need to do it through bash, because the the notebook is converted to an online tutorial that focuses on bash, while the contents are run during integration tests.\n\nThe SO answer you linked to does not work, because Jupyter notebook silently ignores the `&` to spawn background processes from within a bash cell. For example, the following cell hangs indefinitely:\n\n```\n%%bash --out bg_pid\npython myfile.py&\necho $!\n```\n\nMoreover, putting the same code into `%%bash --bg --out bg_pid` also hangs (in the background), so that `bg_pid` is an `_io.BufferedReader`, waiting for `python myfile` to finish before the `echo` starts.\n\nI don't mean to pester, but it does seem like a bug in the notebook (or the bash kernel extension?) that if you run a python script from a `%%bash --bg` cell, that child process is lost forever. I'd be happy to submit a PR that adds `preexec_fn=os.setsid` as a kwarg to the bash magic Popen call, if you'd point me to where these kwargs are set.\n Alternatively, I would be happy with a way to kill all child processes spawned by the jupyter notebook as a whole. But even when the notebook exits, spawned child processes persist.\n To be sure, I have a hacky bash workaround, using the following as a cleanup script:\n\n```\nps aux | grep 'myfile.py' | grep -v 'grep' | awk '{print $2}' | xargs kill\n```\n\nI am just looking for something more stable.\n I'll try to look into the issue with `&` tomorrow. This is in IPython, not bash_kernel - if you were using bash_kernel there would be no need for or option to use the `%%bash` cell magic.\n If your code is as simple as this, you could also use `exec` to replace the bash process with the Python process:\n\n```\nexec python myfile.py\n```\n\nYou could also use the `%%python` magic to run a Python script instead of `%%bash`:\n\n```\n%%python\nexecfile('myscript.py')\n```\n\nBut there may be a reason that you used `%%bash` that is not evident in the minimal example.\n That's  will need to be migrated to ipython/ipython as this is not directly a notebook issue. \n","just disabling cache: nope. Trying passing `--no-force-latest`\n Still nope :-(\n @minrk  `bower cache clean` should clean the cache. \n I just cleared travis caches. There is a button for that. \n It's definitely not the Looks like @Carreau's clearing of the cache was enough. I'm not sure why disabling the caching altogether wasn't, but I'm guessing it's not something you can do in a PR maybe?\n I reran 1 on the job, that passed. Reopenning and rerunning everything to see. \n Purging the cache seems to have fixed things. Master and downstream builds are passing. I don't think anything in this PR is relevant, though there is some chance that `--force-latest=false` will prevent this issue in the future.\n","That is definitely a bug! I think I have seen this before, but I'm not sure what causes it.\n\nIf you have updated Firefox recently, make sure you restart it - there are all sorts of weird things that can occur if Firefox has been updated but not restarted.\n Thank you both for the prompt replies.\n\nI have actually had this issue from the very start, consistently, regardless of Firefox version. It does not go away with restarts or updates. I also have the same issue on my notebook (again with Arch Linux and 4K screen).\n\nNot sure if anything like Gnome windows scaling or Firefox plugins might cause it? Really like the notebook so really keen to make it work. Happy to help with pinpointing the cause as best as I can.\n Firefox plugins is a possibility. Can you try it with Firefox in safe mode (disables plugins)\n Did some quick testing - the issue is not caused by the add-ons but the but the appearance theme. Specifically this one;\nhttps://github.com/gnome-integration-team/firefox-gnome/\n\nIs this something that should be dealt with on the Notebook side or the theme side? I presume some themes might cause it while others won't.\n Hmmm. I'm surprised that a theme can affect how stuff inside a page looks. I don't really know who to talk to about that.\n I see. Well thanks very much for your help. If anyone else has a similar problem at least it will be clear what is the cause. I will just look for alternative theme I can use that will not affect the cells.\n\nKeep up the great work with the notebook.\n Yes, that's a known CodeMirror issue where firefox bady report the measurement of things on the DOM. \n\nIt pops up regularly, and depending on system can (sometime) be solved by : resizing the window, zooming in then out, focusing the cell...etc. It's unfortunate, and sadly there is not much we can do . \n Funnily enough, I encountered a similar issue but on Chrome.\n![screen shot 2016-08-19 at 2 11 30 pm](https://cloud.githubusercontent.com/assets/1518713/17824448/dec5b79e-6616-11e6-9126-171a33724236.png). For me it usually happens for long running notebooks (think days). Closing the tab and reopening it usually fixes things.\n Hmm, I have also seen this in JupyterLab recently, may be new bugs showing up...\n\nTargeting to 4.3 so we can investigate...\n Has anyone investigated, and/or does anyone have time to investigate before we do 4.3, which I'd like to release fairly soon?\n\nPing @ellisonbg \n We've updated to CodeMirror 5.21 recently, which could possibly contain a fix, but I haven't been able to reproduce this one in a while. Generally these height-measuring problems are in (and fixed in) CodeMirror. I see that the CM update (#1921) was already backported. So I'm going to punt this to 5.0. Maybe it will be already fixed. I've seen this in Chrome too, on non-Jupyter apps using CodeMirror. Have started seeing it less across the ecosystem again, definitely a measurement issue that was pervasive for a bit. I encountered a similar issue on Chrome, and this issue can also occur on safari and firefox in my MBP. But oddly enough, when I pulled out the mouse from laptop and used trackpad only, this issue can not occur. When I used mouse again, this issue occurred again. \r\n<img width=\"924\" alt=\"2016-12-25 5 27 20\" src=\"https://cloud.githubusercontent.com/assets/11803276/21470560/6ec77780-cac9-11e6-8b1d-39531a395051.png\">\r\n I have the same issue on Chrome. I don't believe I'm using Code Mirror anywhere. This was a notebook that showed this appearance upon open. (screenshot attached). \r\n<img width=\"771\" alt=\"screen shot 2017-01-27 at 5 32 39 pm\" src=\"https://cloud.githubusercontent.com/assets/13428836/22392464/bd2091da-e4b6-11e6-9bd1-246c4caa2a8a.png\">\r\n @cassiusoat's note about mouse and trackpad might be an important clue. macOS can hide scroll bars until scrolling starts. I believe the default (certainly an option) is to hide by default when using a gesture-enabled trackpad, but always show scroll bars if a mouse is in use.\r\n\r\nIf CodeMirror is measuring assuming a scroll bar would always be present, but it isn't, we could get this behavior (cutoff of the width of one scroll bar). To enable this behavior explicitly:\r\n\r\n    System Preferences > General > Show scroll bars: When scrolling\r\n\r\nIt's possible it's specifically an interacting with the 'When scrolling' setting. It's also possible that it's related to switching back and forth in the \"Automatically...\" state, where CM makes a decision based on prior state, but doesn't update if that state changes.\r\n\r\n<img width=\"658\" alt=\"screen shot 2017-02-01 at 15 39 43\" src=\"https://cloud.githubusercontent.com/assets/151929/22511283/833589e8-e895-11e6-8bcf-55e5f7a1ab4f.PNG\">\r\n @jaykinghorn what versions of:\r\n\r\n- notebook\r\n- browser(s)\r\n- OS\r\n\r\nIf you are using macOS, can you share your `General > Show scroll bars` setting? Does changing it have any effect?\r\n\r\nEvery text area in the notebook is CodeMirror, so it's always involved somehow. The truncated cells seem to happen after I close my laptop and come back to\nit after a period of time. I\u2019ll do more testing to see if it always happen\nafter the computer sleeps, or whether it is intermittent.\n\nI had my scroll bar setting at the default \u201cAutomatically based on mouse or\ntrackpad.\u201d When I change this setting to Always, it restores the correct\nheight of the cells.\n\nI\u2019m using:\nVersion 4.2.1 with Python 2.7.12 |Anaconda custom (x86_64)| (default, Jul 2\n2016, 17:43:17) [GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build\n2336.11.00)]\n\nBrowser is Chrome Version 55.0.2883.95 and Mac OS 10.11.4.\n\nGood to know about Code Mirror.\n\nThanks for your help.\n\nJay\n\n\nOn February 1, 2017 at 8:00:46 AM, Min RK (notifications@github.com) wrote:\n\n@jaykinghorn <https://github.com/jaykinghorn> what versions of:\n\n   - notebook\n   - browser(s)\n   - OS\n\nIf you are using macOS, can you share your General > Show scroll bars\nsetting? Does changing it have any effect?\n\nEvery text area in the notebook is CodeMirror, so it's always involved\nsomehow.\n\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\n<https://github.com/jupyter/notebook/issues/1560#issuecomment-276679309>,\nor mute the thread\n<https://github.com/notifications/unsubscribe-auth/AMzoZEPYPhdFi_A9Mrja6ohmhO2MoVe5ks5rYJ4dgaJpZM4I7ahl>\n.\n We need to be able to predictably reproduce this. Based on @rgbkrk's comment, this might be an issue with CodeMirror (possibly https://github.com/codemirror/CodeMirror/issues/3129, https://github.com/codemirror/CodeMirror/issues/3679), but without a reproducible demo, we are not likely to get help from the CM team.  I think this is either a browser or CodeMirror bug (or both) related to the changing size of scrollbars depending on context. I'm not sure there is much we can do about it except try to narrow it down and report upstream. Bumping to 5.1 as it sounds like we don't have a reliable reproduction or a good idea of a possible fix, and it may well not even be in our code. FWIW, I do see this exact same issue in JupyterLab master sometimes. Can't\nreproduce it though...\n\nOn Tue, Feb 14, 2017 at 6:17 AM, Thomas Kluyver <notifications@github.com>\nwrote:\n\n> Bumping to 5.1 as it sounds like we don't have a reliable reproduction or\n> a good idea of a possible fix, and it may well not even be in our code.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/1560#issuecomment-279718330>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0JNgMbq2x5cRnjh3gEFstYhED0eAks5rcbdygaJpZM4I7ahl>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","We use the post_save_hook function to commit the notebook to a central notebook repository. Silent failure as it works today could cause data loss...\nThis PR would help us at least display to the user that the save failed\n Merging since I think this is a good idea, but I am a little concerned about the error indicating that the save failed, which is not true\u2013a _side effect_ of the save has failed.\n","Thanks, we'll have a look. \n This certainly is strange. From the traceback, it would appear that it's failing to decode a template file (error.html, looks like). However, I just checked and none of our templates have non-ascii content, and none of them are more than 10k bytes, so I don't know where \"byte in position 237630\" would be coming from.\n I've bumped this to backlog as we don't know how to reproduce it, nor what might have gone wrong.","For that matter, would it be useful to add a mathml mime type so kernels can send MathML directly, rather than going through Mathjax to create it?\n > would it be useful to add a mathml mime type so kernels can send MathML directly, rather than going through Mathjax to create it?\n\nIt's been an ISO standard since last year though only supported fully on Firefox. I'm on board with pushing for this standard.\n\nWhat JS libraries are available to render MathML? The only one I've found so far is MathJax.\n > What JS libraries are available to render MathML? The only one I've found so far is MathJax.\n\nI think the answer to this is either MathJax or let the browser do it (Firefox only, I think).\n @takluyver Does this MathJax config depend on a MathML mime type or can we merge this and create a new issue regarding MathML mime type?\n I'm not exactly sure about this, but I think it's orthogonal to my suggestion - I think this is about Mathjax rendering latex-y maths to MathML, whereas I'm talking about the kernel publishing MathML directly.\n Can second that this is about MathJax configuration, namely MathJax being able to render MathML in addition to the currently configured TeX support. In Jupyter's current MathJax configuration, MathJax does not support MathML input at all.\n\nAs @rgbkrk noted, kernels wanting to use MathML directly can only do this on Firefox. Most browsers (including Chrome, which had MathML support but killed it some time ago) do not support MathML directly (see the MathML column under https://en.wikipedia.org/wiki/Comparison_of_web_browsers#Web_technology_support) and thus need MathJax to convert MathML to something they can render (e.g. CSS and HTML). Even on Firefox, MathJax may add certain MathML features that Firefox's native MathML renderer does not support (see https://www.mathjax.org/mathjax-2-0-and-the-default-rendering-in-firefox/).\n\nSo, in short, Jupyter kernels wanting to output MathML need the change proposed in this PR.\n OK, so this is about MathML input to MJ? I had misunderstood, then, I thought it was about MathML output.\n\nPresumably the idea is that kernels would produce MathML embedded in HTML output? Do you think it would be helpful to add a MathML output type (akin to SVG output, which we already allow)?\n Exactly, the kernel outputs MathML output as `<math>...</math>` embedded in HTML (see for example https://developer.mozilla.org/en/docs/Web/MathML/Element/math). I'm not sure how Jupyter output types work, but as MathML is an HTML element like `<svg>` it sounds quite logical to do the same thing as with SVG. Are there some docs I could look at?\n We output a dictionary of alternative formats, keyed by mime types (see [display_data](http://jupyter-client.readthedocs.io/en/latest/messaging.html#display-data) messages). As far as I know, we don't explicitly prevent sending any format in there, but the frontend only handles formats it recognises, and we don't currently recognise MathML. IPython also provides convenient mechanisms to display the formats Jupyter recognises.\n\nSo what you're presumably doing at the moment is sending `text/html` output with embedded MathML. That's fine, but it would be neat if some time in the future we handled a native MathML output format.\n I've created #1670 for taht.\n Ok, to summarize: this PR simply updates MathJax config to accept MathML input in addition to TeX. Unless there are any objections, I'd like to merge this. @takluyver created https://github.com/jupyter/notebook/issues/1670 to discuss adding a MathML mime type and handler so that MathJax can not only accept `text/html` mime type but also `application/mathml+xml`.\n I'm certainly in favor. This doesn't have to change any mimetypes at this time and we can handle it later.\n Thanks @poke1024 for your contribution!\n @poke1024 Theoretically, we should be able to test this on master by pasting the following in a Markdown cell?\n\n``` html\n<math>\n    <apply>\n        <plus/>\n        <apply>\n            <times/>\n            <ci>a</ci>\n            <apply>\n                <power/>\n                <ci>x</ci>\n                <cn>2</cn>\n            </apply>\n        </apply>\n        <apply>\n            <times/>\n            <ci>b</ci>\n            <ci>x</ci>\n        </apply>\n        <ci>c</ci>\n    </apply>\n</math>\n```\n\nIt's not working for me. I've created a notebook to test: https://gist.github.com/gnestor/bbe456b13a0d1d8430d0caa8d8a8fd65\n Using the example code from your notebook, changing `Math` to `HTML` makes it work for me using Jupyter 5/master:\n\n```\nfrom IPython.core.display import HTML\nHTML(r\"\"\"<math mode=\"display\" xmlns=\"http://www.w3.org/1998/Math/MathML\">\n <semantics>\n  <mrow>\n    <mi>x</mi>\n    <mo>=</mo>\n    <mfrac>\n      <mrow>\n        <mo form=\"prefix\">&#x2212;<!-- \u2212 --></mo>\n        <mi>b</mi>\n        <mo>&#x00B1;<!-- &PlusMinus; --></mo>\n        <msqrt>\n          <msup>\n            <mi>b</mi>\n            <mn>2</mn>\n          </msup>\n          <mo>&#x2212;<!-- \u2212 --></mo>\n          <mn>4</mn>\n          <mo>&#x2062;<!-- &InvisibleTimes; --></mo>\n          <mi>a</mi>\n          <mo>&#x2062;<!-- &InvisibleTimes; --></mo>\n          <mi>c</mi>\n        </msqrt>\n      </mrow>\n      <mrow>\n        <mn>2</mn>\n        <mo>&#x2062;<!-- &InvisibleTimes; --></mo>\n        <mi>a</mi>\n      </mrow>\n    </mfrac>\n  </mrow>\n  <annotation encoding=\"TeX\">\n     x=\\frac{-b\\pm\\sqrt{b^2-4ac}}{2a}\n  </annotation>\n  <annotation encoding=\"StarMath 5.0\">\n     x={-b plusminus sqrt {b^2 - 4 ac}} over {2 a}\n  </annotation>\n </semantics>\n</math>\"\"\")\n```\n\nI'm not sure what `IPython.display.Math` is supposed to do, but it doesn't seem to pass on the XML code MathJax then operates on.\n\nThe other example above (using `<apply>`) does not work as `<apply>` and the other elements are content markup. MathML differentiates between presentation markup (https://www.w3.org/TR/MathML3/chapter3.html) and content markup (https://www.w3.org/TR/MathML3/chapter4.html) and MathJax, as far as I know, currently focuses on supporting presentation markup. A short description on the two markup styles can be found here: https://developer.mozilla.org/de/docs/Web/MathML/Element/semantics. That's why `<semantics>` is optional and you can also pass in something like:\n\n```\n<math mode=\"display\" xmlns=\"http://www.w3.org/1998/Math/MathML\">\n  <mrow>\n        <msqrt>\n          <msup>\n            <mi>b</mi>\n            <mn>2</mn>\n          </msup>\n        </msqrt>\n  </mrow>\n</math>\n```\n\nThis is `<semantics>` (i.e. presentation) content and understood as such by MathJax, but not tagged as such.\n The `Math` display object expects Latex code passed into it, so things like `<` will be treated as characters, not as HTML syntax. We may want to add an option to that to treat the input as MathML rather than Latex (like the `Image` class can handle different image formats).\n @poke1024 Thanks, that worked for me. Regarding Content MathML, I added support for it and AsciiMath to MathJax in https://github.com/jupyter/notebook/pull/1677.\n\n@takluyver Next I will add formatters and displayers for MathML and AsciiMathto to ipython. It think we need to consider whether the `IPython.display.Math` will accept LaTeX, MathML, and AsciiMath or whether should just require users to use separate `MathML` and `AsciiMath` methods. I will create a new issue for this on ipython and link to it here...\n","You may be able to have your test runner set the PYTHONPATH environment variable.\n That seems to work from within my test runner. I also was able to get a command line invocation via\n\n```\nPYTHONPATH=../../../tests jupyter notebook my_notebook.ipynb\n```\n\nIs PYTHONPATH still considered unstable (as opposed to PATH? Which does python use again?)\n > Is PYTHONPATH still considered unstable (as opposed to PATH? Which does python use again?)\n\nPATH is used to find commands you run at the command line, like `ls` or `ipython`. PYTHONPATH is used to find Python modules when you `import foo`.\n\nPYTHONPATH is stable and has been around for a long time, but it's not a very elegant way to solve problems, and can cause problems if it's around when you're not expecting it.\n This works well. Thanks.\n","Unfortunately this is mostly a problem with how browser handle scrolling, and there is close to nothing we can do (except maybe with as much resource as Google create our own scrolling engine or browser). \n\nAsk on the `ipython/ipywidgets` repo, there might be a way to display widgets in a floating div explicitelty,  so you won't have this issue. \n Ok, thanks. I'll look around.\n","Thanks @dwieker We're thinking about it and already have issues to track that ! Thanks ! \n","Hmm I'm surprised `new_comm` doesn't exist in comm/manager.py of ipykernel.  \n\nAnyways, +1 to this change.  I think it will simplify some code in the widget persistence..\n Yes, I want to use it in https://github.com/ipython/ipywidgets/pull/58, where I also simplify widget persistence. \n","I doubt this is something browsers expose. Our text editor component is [CodeMirror](http://codemirror.net/). If that exposes a way to control cursor-blinkitude, we could add a separate setting for it.\n yes, codemirror as a [`cursorblinkyness-like`](http://codemirror.net/doc/manual.html#option_cursorBlinkRate) option. \n\nYou can set hat with though your `custom.js` likely. \n","That's seem weird. \nWhich browser ? Any particular content in the markdown cell ? A lot of math expressions ?\n On a Chrome Browser using El Capitan.\n\nThis is just rendering a cell to be markdown without any content inside. \n\n> On Jun 27, 2016, at 3:46 PM, Matthias Bussonnier notifications@github.com wrote:\n> \n> That's seem weird. \n> Which browser ? Any particular content in the markdown cell ? A lot of math expressions ?\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub https://github.com/jupyter/notebook/issues/1571#issuecomment-228898633, or mute the thread https://github.com/notifications/unsubscribe/AHZJpsn5v61C7ziXavo7_LBIKOol8TFKks5qQFLDgaJpZM4I_Y9C.\n\n<><><><><><><><><><><><><><>\nMichael Mansour\nData Scientist & Graduate Student @ Galvanize\nIBM Blockchain Labs\n(650) 773-7974\nTwitter: @sourmansweet\n Any browser extensions?\n Enabled:\ngoogle docs/sheets/hangouts/slides\nokta \nrapportive \nuBlock Origin (ad blocking, but turned off for notebooks)\n\n> On Jun 28, 2016, at 3:39 AM, Thomas Kluyver notifications@github.com wrote:\n> \n> Any browser extensions?\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub https://github.com/jupyter/notebook/issues/1571#issuecomment-229013859, or mute the thread https://github.com/notifications/unsubscribe/AHZJpqji-No-z2X11A8HfddGyWe7AkJKks5qQPnXgaJpZM4I_Y9C.\n\n<><><><><><><><><><><><><><>\nMichael Mansour\nData Scientist & Graduate Student @ Galvanize\nIBM Blockchain Labs\n(650) 773-7974\nTwitter: @sourmansweet\n Can you try with another browser and/or in 'safe mode' with extensions disabled?\n","Cool! Is a test easy enough to add?\n Voila, tests.\n \ud83d\ude80\n","In most cases, kernels that don't implement something simply don't respond to the message at all, but I'm not sure that we've ever consciously decided that's how it should work. If there's an obvious empty answer, as for history or completions, that will probably be OK too.\n The more precise and unambiguous the messaging spec is, the easier it will be for different clients and kernels to interoperate. I would suggest addressing this in a future revision of the spec -- it's not a major point, but these small things add up, and as kernels and clients proliferate having the spec be very specific in all edge cases will really be a boon to kernel and client authors :)\n\nI don't have a strong opinion about how it's resolved \u2013 just as long as there is some official word on what to expect from kernels on this matter.\n See jupyter/jupyter_client#236","Because they're sent over different channels, they can arrive out of sync. It's actually the kernel status idle message that we take as the marker of the end of output, because it's sent over the iopub channel. Some frontends may still show output arriving later, though - I don't think we've really defined that.\n Fair enough.\n\nThe thought came up because in my client, I am storing callbacks for each executed cell, based on the parent header; if a message comes in from the kernel with a \"parent\" indicating a given cell, it will be handled with the appropriate callback. Unless it's defined when more messages cannot be sent, though, the callbacks can never be freed and the client is guaranteed to use up progressively more resources, since it never knows that it will not receive any more messages.\n\nIf that is the intended / expected behavior for clients for the time being, go ahead and close this :)\n I totally agree on this and your other issue that it's something the spec should be more explicit about - I'm passing on the best answers I have at the moment, not saying there's no need to clarify them.\n Yup, totally understand!\n Due to the separate channels, it is not possible to enforce that shell messages arrive after iopub messages. If kernels comply with the spec, `status: idle` message will be sent at the end of handling every request. This should be used to indicate that output is complete for a given parent. We can leave this open as a docs issue until we add that note to the spec.\n I opened jupyter/jupyter_client#164, aiming to clarify both this and #1576. @gibiansky can you check that content and see if it clarifies these things?\n","All `status: 'error'` replies should have the same fields, and any fields present when `status: 'ok'` may be omitted. I'll have to check if IPython actually does this for execute_reply, but it should be the case for all the other requests.\n Does this mean that `status: 'abort'` is also acceptable for inspect and complete?\n @gibiansky yes\n","Thanks, this looks good to me.\n","@VelizarVESSELINOV notebook uses marked library to render Markdown. It looks like there is a [PR](https://github.com/chjj/marked/pull/587) to add task list support to marked but it hasn't been merged yet. I suggest making some noise there. Once merged, come back here and we will make sure that we're using a version of marked that supports it.\n","@minrk Do you think this is reasonable to target for 4.3 instead of 5.0? There's only new API, no backward incompatibility. It would help us move the dashboard bundlers away from their dependency on another extension (jupyter_cms) sooner rather than later.\n It could be for 4.3, if we do that. We may be at the point of only doing bugfix backports for 4.x at this point, though.\n For the docs, I'm thinking of adding a new `docs/source/extending/bundlerextensions.rst` and expanding the content in `docs/source/examples/Notebook/Distributing Jupyter Extensions as Python Packages.ipynb` to also mention what needs to be done to distribute bundler extensions.\n\nDoes this sound reasonable?\n\n/cc @willingc\n Sounds good to me\n I've checked off everything I had planned on my list here. There's examples, tests, doc, and the implementation itself.\n @parente Looks good to me. Thanks!\n I think this is ready for a final review / merge.\n\nAdding @Carreau and @ellisonbg who commented on the original associated issue and cc'ed @fperez @jasongrout.\n It would be desirable to move this pull request towards merge soon. We have an exploitation of the cms (https://www.youtube.com/watch?v=xSRZgxAf9BQ) and a regular notebook core API would be what we would prefer.\n @parente I'll review this. A couple questions:\n- How can I get the `bundlerextension` command working? I pulled this PR branch and re-installed using `pip install -e . --user`...\n- Once the `bundlerextension` extension is working, can I test the zip bundler using `jupyter bundlerextension enable --py notebook.bundler.zip_bundler --sys-prefix`?\n- Anything else I should test?\n @gnestor Thanks for having a look!\n\n> How can I get the bundlerextension command working? I pulled this PR branch and re-installed using pip install -e . --user...\n\n`jupyter bundlerextension` should just work. Are you saying it doesn't? I dev'ed locally by pip installing into a conda environment. Is `--user` breaking it?\n\n> Once the bundlerextension extension is working, can I test the zip bundler using jupyter bundlerextension enable --py notebook.bundler.zip_bundler --sys-prefix?\n\nThis is definitely a good place to start. There's a tarball bundler in there too that you can try also.\n\n> Anything else I should test?\n\nhttps://github.com/jupyter-incubator/dashboards_bundlers/pull/46 makes the dashboards bundlers extension compatible with this new API. If you're feeling brave, you might try testing that.It'll take a bit of doing, namely getting the dashboard extension installed, the bundler extension built with the PR installed, and the dashboard server running to see if the bundler properly packs and sends one of the example notebook-dashboards to the dashboard server properly. If that's too much overhead (and it probably is), don't sweat it. I did test it once already when creating that PR. If this merges in, I'll test it against notebook HEAD.\n > jupyter bundlerextension should just work. Are you saying it doesn't? I dev'ed locally by pip installing into a conda environment. Is --user breaking it?\n\nYep, the `--user` flag was the culprit.\n\nzip and tarball bundlers worked for me! It took about 20-30 seconds for the first zip to fulfill. Each subsequent one was instant, along with the tarball.\n @minrk How do you feel about merging this?\n @gnestor \ud83d\udc4d \n @minrk  @gnestor Not sure why `--user` didn't work. I can look into that as follow-on. Thanks for testing and merging!\n @parente Ya please do because it could be my environment...\n @gnestor I pulled master just now and ran:\n\n```\ncd notebook\nsource activate notebook-dev\npip install -e .\njupyter bundlerextension enable --py notebook.bundler.zip_bundler --user\njupyter notebook\n```\n\nThen I opened a notebook and triggered the bundler menu item. No issues.\n\nI next tried the following outside a conda env:\n\n```\ncd notebook\npip install -e . --user\n~/.local/bin/jupyter bundlerextension enable --py notebook.bundler.zip_bundler --user\n~/.local/bin/jupyter notebook\n```\n\nNo issues again.\n @parente Ok good. Great work, this is an exciting addition! Any _bundle as Gist_ bundlers yet? If not, that could be my first bundler contribution...\n","Opened https://github.com/jupyter/notebook/pull/216\n Fixed by #216 \n","They're both running in Anaconda Python, but in different environments. You may have installed an IPython kernelspec with that environment active, or you may have launched Jupyter inside that environment.\n\nEither way, you should be able to make it use the root environment (the same one Spyder is using) by [installing the kernelspec](http://ipython.readthedocs.io/en/stable/install/kernel_install.html) without activating any environment. The command for that is:\n\n```\npython -m ipykernel install --user\n```\n Also no need to post twice, we saw [the comment on the other thread](https://github.com/jupyter/notebook/issues/1524#issuecomment-229572759) it can just take timefor us to respond. \n Problems solved! Thank you very much!\n > Problems solved! Thank you very much!\n\nThanks, closing. \n","@gibiansky I believe that you have found the most user facing documentation on kernelspec (https://jupyter-client.readthedocs.io/en/latest/kernels.html). As a developer of IHaskell, you are likely on the leading edge here (thanks for the excellent blog post that the docs refer to).\n\n@takluyver @minrk If you can field this question for @gibiansky, I'll add the response to the documentation.\n\nThanks!\n Partly missing docs, partly that it's open ended to allow for extra files in the future.\n\nI think the three files you mention are the only ones we use at present. As the logo filename hints, we've anticipated the need for other logo sizes. I could also envisage including e.g. a Python module to declare an extra pygments style.\n Great, good to know!\n\nWould be great to mention the two other files on that page then and say that no other files are currently used and that this may change in the future.\n\nThanks!\n @gibiansky @takluyver PR opened in jupyter/jupyter_client\n","Hi there !\n\nThanks for the bug report ! We didn't had much chance to work with asyncio yet (we hope to have some time to spend on that at some point it definitively looks fun). This is more an IPython kernel issue I guess,  [see some previous discussion about asyncio kernel here](https://github.com/ipython/ipykernel/issues/21). \n\nSo there is likely bugs you are right. \n\nIn this particular case, I'm unsure it is an IPython bug as I can reproduce the exact same behavior in a plain Python interpreter. \n\nI must admit that I'm far from an AsyncIO expert, but as far as i understand: `asyncio.wait(tasks)` does not consume the task, it just block until the task is finished, which likely means you get a list of futures:\n\n```\nIn [3]: tasks\nOut[3]:\n[<Task finished coro=<anything() done, defined at <ipython-input-1-f8502dfae557>:5> exception=NameError(\"name 'err' is not defined\",)>,\n <Task finished coro=<anything() done, defined at <ipython-input-1-f8502dfae557>:5> exception=NameError(\"name 'err' is not defined\",)>,\n <Task finished coro=<anything() done, defined at <ipython-input-1-f8502dfae557>:5> exception=NameError(\"name 'err' is not defined\",)>,\n <Task finished coro=<anything() done, defined at <ipython-input-1-f8502dfae557>:5> exception=NameError(\"name 'err' is not defined\",)>,\n <Task finished coro=<anything() done, defined at <ipython-input-1-f8502dfae557>:5> exception=NameError(\"name 'err' is not defined\",)>,\n <Task finished coro=<anything() done, defined at <ipython-input-1-f8502dfae557>:5> exception=NameError(\"name 'err' is not defined\",)>]\n```\n\nIf you ask for this task result it should raise (and does raise apparently):\n\n```\nIn [5]: t = tasks[0]\nIn [6]: t.result()\n---------------------------------------------------------------------------\nNameError                                 Traceback (most recent call last)\n<ipython-input-6-afae469afdaa> in <module>()\n----> 1 t.result()\n\n/Users/bussonniermatthias/anaconda/lib/python3.5/asyncio/futures.py in result(self)\n    272             self._tb_logger = None\n    273         if self._exception is not None:\n--> 274             raise self._exception\n    275         return self._result\n    276\n\n/Users/bussonniermatthias/anaconda/lib/python3.5/asyncio/tasks.py in _step(***failed resolving arguments***)\n    237                 # We use the `send` method directly, because coroutines\n    238                 # don't have `__iter__` and `__next__` methods.\n--> 239                 result = coro.send(None)\n    240             else:\n    241                 result = coro.throw(exc)\n\n<ipython-input-1-f8502dfae557> in anything(i)\n      7     await asyncio.sleep(i)\n      8     print('after')\n----> 9     err                                                    # exceptions seem to be ignored\n     10\n     11 loop = asyncio.get_event_loop()\n\nNameError: name 'err' is not defined\n```\n\nWhich should automatically raise if you use it in a generator or yield the task in a coroutine [but here it's starting to get fuzzy in my brain], and it will raise in the context were you use it, not in the context of where it is defined. \n\nDoes that kind-of make sens ? \n\nThat's non obvious I agee. My guess is that at shutdown the Python interpreter does consume all the remaining task. Maybe it should not raise, but emit a warning ? @njsmith might have more insight into that than I do, in which case we could try to bring that up to CPython. \n Yeah, I think can get the gist for what you mean.  This seems a bit non-intuitive though for Python in general.  And unnerving to see blatant errors pass with the notebook.  Maybe it is something to bring up in the Python mailing list.  Thanks @Carreau.\n Yeah, I'm not sure what ipython (or python) could reasonably do differently here.\n\nAs long as you have that `tasks` variable sitting around, you _might_ go and do `tasks[0].result()` or `await tasks[0]` or something, which is how you propagate the exception further. So python has to hold on to the exception quietly and wait for you to do that.\n\nWhen you shut down the interpreter, then that implicitly does `del tasks`, the reference count on the future objects drops to 0, they get garbage collected, and at that point their `__del__` method prints that \"uh-oh there was an error that you never propagated, and now you never will because I'm being garbage collected!\" message. But you can't really raise the error from inside `__del__`.\n\nIf you weren't capturing the `tasks` in a global variable and thus pinning them in memory, then the results here would be a little less confusing :-).\n Maybe it would be useful to have a wrapper function that waits on a bunch of tasks and then checks that they all succeeded?\n > Maybe it would be useful to have a wrapper function that waits on a bunch of tasks and then checks that they all succeeded?\n\nThat's pretty trivial IIUC:\n\n```\nIn [7]: async def wait_and_use(tasks):\n   ...:     await asyncio.wait(tasks)\n   ...:     return [t.result() for t in tasks]\n   ...:\n```\n\nBut it feel like the usage of `asyncio.wait(tasks)` is unnatural, usually you should have a consumer of the task. You will rarely directly ask AsyncIO to to wait for it. \n\nI don't know if there would be a way to detect earlier that a task has no potential consumers without triggering a gc collection. \n\nThe current behavior seem totally natural and expected though, as you still have tasks.\nI **guess**, we could try to count the number of reference for all tasks linked from `__main__` namespace and print a warning if there is no other consumer, but that seem like over engineering  things for (little) benefits.\n I think there's a reasonable case where you're invoking a set of tasks asynchronously for their side effects (e.g. downloading a thousand small files to a directory on disk), and they don't have a meaningful return value. I.e. something you'd do synchronously like:\n\n``` python\nfor i in range(1000):\n    do_thing(i)\n```\n\nThinking about it a bit more, I think the answer may be to use [asyncio.gather](https://docs.python.org/3/library/asyncio-task.html#asyncio.gather) in place of `asyncio.wait()` - that should immediately propagate an exception if one is raised.\n Indeed, it works (in the sens that it fails immediately.\n\n```\ntasks = [loop.create_task(anything(i)) for i in range(1, 7)]\nloop.run_until_complete(asyncio.gather(*tasks))\n```\n OK then, closing this as a \"don't hold it like that\" bug ;-)\n Yes, I get an exception.  An elegant workaround for an unexpected outcome.  Many thanks all.\n","well , After set chrome's default monospaced font , it is normal....\n","I would appreciate as well that feature -  I  simply show hereby the case for safari: as you can see safari spell-checker does not recognise the typo in the md cell.\r\n<img width=\"432\" alt=\"spell_check_integration\" src=\"https://cloud.githubusercontent.com/assets/15370425/22259873/4cdc0586-e267-11e6-871f-fc8163cf4649.png\">\r\n ","BTW, the messaging spec docs are in the jupyter_client repo - not a big deal, but it's best to file issues there.\n https://github.com/jupyter/jupyter_client\n See jupyter/jupyter_client#165\n Thank you! I looked around the repos to try to figure out where to best file these but didn't find anything concrete -- will keep in mind for future (sorry!).\n","Also, it's somewhat confusing as to the `output` parameter in `history_request`. \n\nSpecifically, the output is clearly just text, not a `display_data`, whereas _all_ kernel outputs are not `display_data` (only via iopub `display_data` and `execute_result`). So there's no longer a real notion of a \"text\" output of a cell or line.\n\nSo, does that mean that the `output` for a cell (in the context of history) should be _only_ the plain text representation (`text/plain`) of the `display_data` and `execute_result` for that execution? And, is that only the `execute_result`, or also all associated `display_data`? (For example, for `print_and_return_input(\"Hello\")`, would `output` be just `\"Hello\"` or would it be something like `Hello\\n\"Hello\"`?)\n You're right that this session is a separate concept from the session in the message header. A history session generally corresponds to the lifetime of a kernel process, though in IPython I think it's possible to get a new session without restarting the kernel. The idea is that a session contains the sequence of commands that operated on the same namespace. The references to 'lines' was written when we were only thinking about console interfaces; one notebook cell is one 'line' for this purpose.\n\n'Output' is only the plain text representation of the `execute_result`.\n\nThe history messaging was designed by exposing the entire IPython API for history access, and as far as I know, nothing uses most of the possibilities. I believe the only history_request that our own frontends make is a 'tail' request with `output=False`, for the console interfaces to fill their local history buffer. We may well simplify it in the next major revision of the message protocol.\n Also, while IPython implements the `output` part, it doesn't by default write output to its history database to record it after the current kernel dies. I don't know of any other kernel that implements the output part (maybe Julia does?), so it's probably of almost no use.\n Sounds good. It'd be great if some of that eventually made it into the docs.\n\nThanks for all the clarifications -- I'm working on rewriting the lower level of the IHaskell libraries to support arbitrary kernels with a type-safe version of the entire messaging protocol, so since I'm trying to get all the details totally clear and conformant to the spec and type-safe, these little things become important. \n\nThanks!\n","Duplicate of issue #1588  \nThis is so small world ! Both of us posted this issue almost at the same time. Jupyter team member has already replied to #1588 .\n Closing here, discussion can continue on #1588.\n","We recommend that things like function and class definitions that you want to reuse should be stored in regular Python files rather than in notebooks. We have some code somewhere that makes it possible to import a notebook, but the notebook environment is not great for writing the sort of code that you import.\n\nCode often starts in interactive notebooks and later moves to modules, and we know that that refactoring process is not very smooth at the moment. We're interested in ways to make that more pleasant.\n You have mentioned that there is \n\n> some code somewhere that makes it possible to import a notebook.\n\nCan I get details or link to this code. I can have a look and take it up for improvement.\n @minrk knows where it exists\n One advantage to importing child notebooks vs. python classes/functions is that the notebook can encapsulate other things like Markdown. This way you can build modular pipelines which render to HTML/PDF, with each child document maintaining both the code logic, but also any relevant text/references/etc.\n The importing notebooks in IPython example [is here](https://github.com/ipython/ipython/blob/4.x/examples/IPython%20Kernel/Importing%20Notebooks.ipynb).\n","Who do I prod about broken UI stuff these days?\n This is still broken, and I do consider it a blocker for 4.3.\n @takluyver do you think this is something that we can work on on the hacktrain? Or will it likely require internet access to debug appropriately? \n\nI.e., do you feel that between you, @Carreau, @yuvipanda and I and the local codebase we will likely have the relevant knowledge needed to fix this?\n I think there's a pretty good chance we can work out the problem on the hacktrain. :-)\n Looks like this bug was introduced in master by the attachments code, and 4.x is not affected (there is no `MarkdownCell.prototype.select` in 4.x)).\r\n\r\nI just followed the repro steps on the 4.x branch, and it appears to be working as intended. Retargeted as 5.0. Feel free to send it back to 4.3 if you can reproduce it with the 4.x branch.",":+1: This approach looks good.\n\nI guess at some point we'll want the integration tool to generate a proper Sphinx `.. toctree::` directive, because I imagine Sphinx is currently spitting out warnings about documents not being in its list of contents. But that can be another day.\n Thanks.  I'd still like to get rich output and widgets working, but I'd like to address that in another PR later.  Although it's not perfect, I'd like you to consider merging this as-is to expedite my docs work.  I'm going to be using the same general idea for the widgets repository, so I may end up consolidating the tools to a single repository somewhere (also making the link replacement a little more robust, if possible).\n I'm quite happy to merge this and keep iterating. I'll leave it until tomorrow so other people have a chance to have a look at it.\n Yes, let's merge and iterate...\n\nOn Thu, Jun 18, 2015 at 4:16 PM, Thomas Kluyver notifications@github.com\nwrote:\n\n> I'm quite happy to merge this and keep iterating. I'll leave it until\n> tomorrow so other people have a chance to have a look at it.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/159#issuecomment-113315420.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n :shipit: I trust you guys.\n :+1: to go in several steps...\n","There might be some information logged to the terminal where the notebook server is running that could point the way. If it's dying on import, it is likely a C-level error, which doesn't generally propagate all the way to the notebook.\n\nI'm not sure what would be the difference between the notebook and `jupyter console`, but you might compare `sys.path` and `os.environ` in the two cases, to see what might be different.\n I started the notebook server in Ubuntu via `<Alt-F2>`, instead of starting it in a terminal. As a result some variables were not taken over from .bashrc. After killing the server and restarting from terminal `import ROOT` reliably worked. \n\nafter fiddling some more with terminal I could reproduce the crash being caused by \nabsence of:\n`export LD_LIBRARY_PATH=$ROOTSYS/lib/root:$LD_LIBRARY_PATH`\nso the issue is not with Jupyter.\n\n@minrk, thank you  for the hint with the terminal. This should be the preferred way to start servers.\nI'd consider issue closed.\n Thanks. Yes, it's unfortunate that the common ways to set environment variables only affect things started from a terminal.\n","Woo!\n\nWe should look through the various open Issues pertaining to terminal and see which ones are closed by this. I know the terminal paste issue has been open for a _long_ time.\n\nAnd we should also make sure this works without webpack if we really are going to rollback the webpack change for the legacy pages (I looked into this for a while last week, and it looked like a lot of work).\n Thanks @blink1073 :-)\n If we lose WebPack we also lose npm modules.  I am actively working on a way to get everything to work in harmony: https://github.com/jupyter/jupyterlab/pull/225\n It could be that the classic notebook will need to similarly expose a public API for v5+.\n webpack is currently failing with `ModuleNotFoundError: Module not found: Error: Cannot resolve module 'style-loader' in /tmp/pip-build-uaps7hmg/notebook/notebook/static/terminal/js`\n @takluyver, awesome!  That means adding `bail: true` did what it intended. ;)\n @blink1073 have you figured out how to get runtime `require` to return the actual exact module instance (forgive my Python terminology) when it was bundled up with webpack? This is the backward-compatibility bit we need to figure out if we are going to keep webpack for the legacy endpoints.\n @minrk, each WebPack bundle will _be_ an AMD module in the notebook, exporting the desired API.\n I think I'm close to cracking this nut ;).\n That's very exciting. Looking forward to the PR. Thanks for working on it.\n It's now failing in some Python code that checks that the expected JS files are in place - this probably just needs to be updated.\n\n```\n      File \"/tmp/pip-build-ow9jpojc/notebook/setupbase.py\", line 220, in check_package_data\n        assert os.path.exists(path), \"Missing package data: %s\" % path\n    AssertionError: Missing package data: notebook/static/components/term.js/src/term.js\n```\n Thanks, let's see how we get on with this.\n \\o/ Thank you all! The bot users of Wikimedia love you :)\n\nOn Tue, Jul 5, 2016 at 11:07 PM, Thomas Kluyver notifications@github.com\nwrote:\n\n> Merged #1591 https://github.com/jupyter/notebook/pull/1591.\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/pull/1591#event-713582050, or mute\n> the thread\n> https://github.com/notifications/unsubscribe/AAB23iVHeBoMGnuBNyChw3ttyKyQ-lciks5qSsd2gaJpZM4JFKEt\n> .\n\n## \n\nYuvi Panda T\nhttp://yuvi.in/blog\n Thanks for this guys! Seriously.... so many analysts will stop hating me because of this fix.\n I've kinda of ported this to run on top of 4.2.1 with https://github.com/jupyter/notebook/pull/1613. Note that I haven't touched js in a long time - this works for me, but might not work for everyone!\n","Good call. We should see if the CodeMirror list is discoverable somewhere.\n that would be really cool as i plan to add some in jupyter/help#71\n The relevant file for the help dialog is here: https://github.com/jupyter/notebook/blob/f75e591bd68d4a6d201a0883a5c3a60694055313/notebook/static/notebook/js/quickhelp.js#L175 (notebook/notebook/static/notebook/js/quickhelp.js)\n","Sounds reasonable. Let's remove the first line for \"general installation\". \n","I'm pretty sure this is pip reporting the version from the wrong place. I don't believe that we have any control over that, other than patches to pip itself.\n Yes, there are a few issues with pip that report the wrong version number regularly,\nLike \"unpacking Foo v1.2.3\", \"Foo 2.1 successfully installed.\" \n","It is not necessary. What is the total output of running the tests?\n","Definitely looks interesting! \n\nIt would be nice if there were a way of seeing assigned issues that could be manipulated in a similar manner\u2026\nthat way, it could act a task management system that is co\u00f6rdinated for both _individuals_ and teams but that does so entirely within GitHub.\n\nnonetheless, looks like it will already be really useful at a project level, @willingc thanks for the heads up \ud83d\udc4d \n\n@Carreau \n yep, `@matthias` is not me :-) I have second GitHub account, but I don't have access to it anymore as it was through my lab.\n\nAnd I saw it on github RSS feed.\n\n> It would be nice if there were a way of seeing assigned issues that could be manipulated in a similar manner\u2026\n\nYou can see it, but not ordered:\n\nhttps://github.com/pulls?utf8=%E2%9C%93&q=+assignee%3Amichaelpacer+\n\nYou can develop an app like @minrk did: https://minrk.github.io/all-my-pulls/ if you want a custom UI. \n","I'm a bit surprised we didn't have a test which caught this. Is there an easy way to add one that would exercise this code?\n Me, too, as a matter of fact. I found it because I couldn't open any notebooks. Not sure how that doesn't get any exercise, as anything that opens a notebook should hit this.\n Oh, now I know. It's because I'm on a branch of traitlets where this invalid call to `validate` raises instead of instantiating an object that gets immediately thrown away.\n\nWe don't seem to have a test here for notebooks that fail validation.\n > We don't seem to have a test here for notebooks that fail validation.\n\nIs it worth adding one? If you don't fancy doing it here, feel free to open an issue for it, and then I'll merge this.\n We should start adding linters when possible, this would have been caught as one import clober another. \n I'll add a test.\n\nLinters are nice, but can be trouble in CI. I like pyflakes since it mostly checks correctness, but since it gives no mechanism to tell it \"No, really, it's fine\" I don't think it's okay to use in CI. I've used flake8 + turning off most of its annoying checks to get basically pyflakes with some control.\n Test added.\n Test failed ;-)\n\nIt's a Legacy Python thing:\n\n```\nTraceback (most recent call last):\n  File \"/home/travis/build/jupyter/notebook/notebook/services/contents/tests/test_contents_api.py\", line 305, in test_get_nb_invalid\n    self.make_txt(path, json.dumps(nb))\n  File \"/home/travis/build/jupyter/notebook/notebook/services/contents/tests/test_contents_api.py\", line 169, in make_txt\n    f.write(txt)\nTypeError: must be unicode, not str\n```\n Argle bargle. Should be okay this time.\n Good job, thanks.\n","We could add a frontend-config value that's `codemirror_addons`, and load the list.\n you don't [need to](https://github.com/ipython-contrib/IPython-notebook-extensions/tree/master/nbextensions/usability/ruler) apparently. \n Closing as you can do that through an extension. \n","Can you include the traceback (the full error, not just the last bit)? What OS?\n sure thing,\nTraceback (most recent call last):\n\n  File \"<ipython-input-1-7fbec1989fc6>\", line 1, in <module>\n    runfile('C:/Users/owner/Documents/.spyder2/temp.py', wdir='C:/Users/owner/Documents/.spyder2')\n\n  File \"C:\\Users\\owner\\Anaconda2\\lib\\site-packages\\spyderlib\\widgets\\externalshell\\sitecustomize.py\", line 699, in runfile\n    execfile(filename, namespace)\n\n  File \"C:\\Users\\owner\\Anaconda2\\lib\\site-packages\\spyderlib\\widgets\\externalshell\\sitecustomize.py\", line 74, in execfile\n    exec(compile(scripttext, filename, 'exec'), glob, loc)\n\n  File \"C:/Users/owner/Documents/.spyder2/temp.py\", line 9, in <module>\n    import lmfit as fit\n\n  File \"c:\\users\\owner\\anaconda2\\lib\\site-packages\\lmfit-0.7.4-py2.7.egg\\lmfit__init__.py\", line 18, in <module>\n\n  File \"c:\\users\\owner\\anaconda2\\lib\\site-packages\\lmfit-0.7.4-py2.7.egg\\lmfit\\minimizer.py\", line 23, in <module>\n\nImportError: cannot import name anneal\n\nand the operating system is windows 10\n Looks like lmfit is trying to import `scipy.optimize.anneal`, which was removed in Scipy 0.16. You need a newer lmfit or an older scipy.\n Okay, so I downgraded scipy to version 0.13 (which also required me to downgrade numpy to 1.8), but now my spider IDE won't open.  When I try to open it I see the loading screen very briefly and then it doesn't continue to load.  Is there some conflict between these packages? \n I get this error when I run spyder --show-console:\n![spyder error](https://cloud.githubusercontent.com/assets/10412412/16665516/c502bc30-4438-11e6-999d-12256128eeb8.png)\n No idea. You might have better luck asking on a spyder mailing list.\n Thanks,  I got it working. I updated lmfit to 0.9.2 and I updated scipy to the latest version, so now everything is working properly. If anyone else has a similar issue with anaconda I used conda install -c astropy  lmfit=0.9.2 to update lmfit (looking for it using conda commands didn't bring this up as an option for download on my system).\n","It's possible to create quiz-like widgets using [ipywidgets](https://github.com/ipython/ipywidgets) or [declarativewidgets](https://github.com/jupyter-incubator/declarativewidgets). See the [widget-cookiecutter](https://github.com/jupyter/widget-cookiecutter) project for an example of how to create a custom Jupyter widget. \n\nI am going to close this issue. If you have specific questions about how to build such a widget, please see the [ipywidgets Gitter](https://gitter.im/ipython/ipywidgets).\n","I feel like I'm running into this too yet it's intermittently affecting my users.\n Could someone who knows about the notebook JS give @parente a hand getting this fixed? It sounds like it should be pretty simple with the right knowledge.\n I suspect it's related to the fact that any errors in *handlers* for an event are raised in the `.trigger` call. For instance, in:\r\n\r\n```javascript\r\n        events.one('test_event', function () {\r\n            console.log('triggered');\r\n            undefined_error();\r\n        })\r\n        console.log('triggering');\r\n        events.trigger('test_event');\r\n        console.log('after trigger');\r\n```\r\n\r\n`after trigger` will never be reached due to the error in the event handler raising in the `.trigger()` call. So any error in an event handler called during the notebook-loading path can preempt setting the finished-loading flag.","Very cool tool, though for me the best of this kind remains [LyX](http://www.lyx.org). It lets you combine typing LaTeX that gets auto-rendered (like MathQuill) with having command palettes for more esoteric stuff you may not know/remember how to type in LaTeX.  \n\nThat makes it incredibly powerful: if you know the commands, you just type along and it simply \"compiles on the fly\" to WYSIWYM (\"What you see is what you mean\", i.e. close enough visually to the final LaTeX render to be useful, but not pixel-perfect so it can be done on the fly without a full LaTeX call). But if you don't know something, you can use the palettes to visually create the piece you are missing.  When I was doing lots more complex mathematical writing, it saved me endless amounts of poring over LaTeX docs, and I even used it often to answer colleagues' questions about how to do something in LaTeX: I would just open LyX, type/build up what they needed, and then view the raw LaTeX (which it will show you if you want) for the answer to copy/paste into a raw `.tex` file.\n\nI've yet to find a system for math editing that I like better than LyX.\n You can see the HackerNew Thread :https://news.ycombinator.com/item?id=12065699 , arguably the command palette part is the easy part, as lomg as you have WYSIWYG movement end rendering, adding buttons that insert the right latex seem like the easy part. \n\n[This](https://www.codecogs.com/latex/eqneditor.php) has a palette but the edition/redering are in 2 different area.\n\nHaving used LyX, I think http://mathquill.com/ is the closest to something that could eventually replace it that I have seen. \n This is truly amazing! I wrote my Ph.D. using LyX and it would be truly\nincredible to have this in the notebook.\n\nCheers,\n\nBrian\n\nOn Sun, Jul 10, 2016 at 5:20 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> You can see the HackerNew Thread :\n> https://news.ycombinator.com/item?id=12065699 , arguably the command\n> palette part is the easy part, as lomg as you have WYSIWYG movement end\n> rendering, adding buttons that insert the right latex seem like the easy\n> part.\n> \n> This https://www.codecogs.com/latex/eqneditor.php has a palette but the\n> edition/redering are in 2 different area.\n> \n> Having used LyX, I think http://mathquill.com/ is the closest to\n> something that could eventually replace it that I have seen.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1604#issuecomment-231614347,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AABr0C6OF6GZCMkP3ot-KagSxYrsxnALks5qUXBBgaJpZM4JI4Ln\n> .\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n yep, this would be absolutely amazing, i might take a look at it\n +1\r\nIs there any move/decision towards this direction ?","I'm pretty sure we do display output in the order we receive the messages, so this is probably up to the Julia kernel and how it orders the output messages. I would guess it's buffering stdout in some fashion.\n","I apologize, the indentation got messed up:\n\n   maskg = (fitwz > o3[1]_1.001) & (fitwz < o3[1]_1.03)\n   newfit = max(fitnorm[maskg])\n   fitarray = fitnorm[maskg]\n   params = lm.Parameters()\n   params.add('amp', value = newfit_0.5, max=newfit_2)\n   params.add('fwhm', value = 0.5)\n   params.add('cent', value = o3[1])\n   S = 30\n   i = 0\n   result = lm.minimize(gausstomin, params, args=(fitwz,fitnorm))\n   pDict = result.params.valuesdict()\n   amp = pDict['amp']\n   rfwhm = pDict['fwhm']\n   cent = pDict['cent']\n   final = result.residual + fitnorm\n   lmlinefit = gauss(plotwz, amp, cent, rfwhm)\n   for j in range(0, len(plotwz) - 1):\n       if(abs((plotwz[j] - cent)/cent) < 0.0002):\n           peakloc = j\n           print j\n   peak = fnorm[peakloc]  \n   hm = peak/2\n   lfw = []\n   for k in range(0, len(plotwz) - 1):\n       if(abs((fnorm[k] - hm)/hm) < 0.1):\n           lfw.append(plotwz[k])\n           print k\n Ah, well the indentation is correct in my code.  only the code inside the for loops and if statements are indented (it's not indenting correctly here for some reason)\n I have fixed the indentation in your first post - you can use triple backticks (<code>```</code>) to delimit a code block.\n\nI don't understand how what you're seeing differs from what you expect to see. You show the output from the code, which is printing `j` and `k`, and then you inspect `fnorm[peakloc]` and you get a number. Is the number you get the wrong number? I don't know what it's meant to be.\n so during runtime peak = fnorm[peakloc]  stores the value 1.04423 in peak where peakloc stores the integer value 94. but when I look in the variable explorer the value of fnorm[peakloc] is 5.1663046, which is also what I get when I directly input fnorm[peakloc] into the ipython console. I apologize, the code above is revised, before I had a print fnorm[peakloc] instead of peak = fnorm[peakloc].\n 1. You're talking about something you see in Spyder. What makes you think this is related to Jupyter rather than to Spyder?\n2. Your code is doing something unexpected, but we don't have enough of the code+data to actually run it, so it's almost impossible for anyone to debug.\n3. Have you tried running the same code in different environments? E.g. in Jupyter, or in plain Python? I.e. is this something that depends on the environment where you run your code?\n I apologize, I found my issue. If I had put the entire code in originally you would have likely spotted my error.  I redefined fnorm later in my code which had a different maximum than I expected for the data. I did not believe this was related to Jupyter (I'm not familiar with this), but I had placed another spyder issue on this site recently for which I received help and believed that it was a forum for general python issues operating in any environment. Thank you for your help\n No problem, glad you got it fixed.\n\nThis isn't a general Python help forum. You might want to try [stackoverflow](http://stackoverflow.com/questions/tagged/python), though be warned that they can be a bit rough on questions that aren't specific enough for people to answer. There's also [learnpython](https://www.reddit.com/r/learnpython) on reddit.\n","Do you have sublime keybindings?\n I've seen it sometimes too, I think if I hit Ctrl-F while in edit mode. I've never actually wanted it, and I'd be happy if we disabled it - though I'm sure someone would be unhappy.\n Due to focus/keybinding stuff, when I've seen it it doesn't work at all, so I doubt anyone would miss it (some might wish it actually worked, though).\n > Do you have sublime keybindings?\n\nI don't think so, and yes it does not work. \n I couldn't easily reproduce this. @Carreau do you still see it? I can reproduce by enabling the  `Select CodeMirror Keymap` nbextension and selecting Sublime keymap from the `Edit` menu.\r\nHack to disable it : rename the `search` folder to `search.back` in your `python2.7/site-packages/notebook/static/components/codemirror/addon`\r\n\r\nor comment out \r\n```\r\n\"codemirror/addon/search/searchcursor\",\r\n\"codemirror/addon/search/search\",\r\n```\r\nIn `[env]/share/jupyter/nbextensions/select_keymap/main.js`\r\n","I wonder why you closed this issue?\n\nIf I understood your proposal you see the need for a multiple \"synchronized\" view of a notebook as the master version is modified.\n\nIt seems like a good idea to me, for a classroom/tutorial setting.\n\nI'm not aware of such an existing \"real time\" capability.\n Hey all, sorry I was vascillating on where I should put this but I'm going to make a decision and post it here.\n No worries. Most of the team's busy at Scipy this week, but it is a good idea, and it fits in with the real-time collaboration stuff that @Carreau has planned.\n We did not spoke a lot about RTC, but that should be doable with JLab to \"share\" a RO view.\n Thanks @Carreau. I'll look into trying to do something this weekend.\n","Preview here: http://jdfreder-notebook.readthedocs.org/en/docs/\n","If I roll back Anaconda to get versions before a recent upgrade\n\n```\n    ipython:             4.2.0-py35_0\n    jupyter_console:     4.1.1-py35_0\n```\n\nthen this hanging window does not occur anymore, but I am back with an old bug I suffered from, viz. that if I hit \"run all\" on a notebook contain a matplotlib magic (in a separate cell!), execution permanently hangs at the magic-containing cell. If I run this cell manually, then I can hit \"run all below\" without problems, and the figure appears as desired.\nMaybe some bugfix with unintended side-effects in either jupyter_console or ipython?\n Issue ipython/ipython#9659 looks similar, but I _am_ using the magic before import, and still the figure hangs.\n I suspect the traceback is significant. See ipython/ipykernel#157. We need to do a quick bugfix release of IPython, but most of the people are busy at a conference. I'll try to get to it.\n Thanks, much appreciated!\n I just would want to say, that this does not look only matplotlib problem, but all Qt stuff (PyQt4 and PyQt5 both are affected by this bug)\n I can confirm this is fixed with Ipython 5.1.0/ipykernel 4.4.1/notebook 4.2.2.\n","These should be visible if you hover the shortcut area with the  mouse:\n![screen shot 2016-07-20 at 16 06 18](https://cloud.githubusercontent.com/assets/335567/17006208/fb86c39a-4e93-11e6-92c4-54a6ffa42c15.png)\n @Carreau thanks for the follow-up. I cannot reproduce that pop-up on Chrome Version 51.0.2704.106 (64-bit), Ubuntu 14.04, python 2.7.6, latest pip version. Arguably even if I could, it still is very subtly advertised.\n > Arguably even if I could, it still is very subtly advertised.\n\nYes I know and you can't copy and paste. The tooltip might be only on master, which also have a nice dialog to bind/remove new keyboard shortcuts:\n\n![screen shot 2016-07-20 at 16 40 41](https://cloud.githubusercontent.com/assets/335567/17006859/d11fca5c-4e98-11e6-9fe4-9bedf33b867d.png)\n I'm pondering whether we should promote that for the current notebook, or make it a JupyterLab only thing. Maybe even update the current action names to match the futures-one form JupyterLab with deprecation warnings.\n @Carreau is there anything you want to do here for 5.0? > @Carreau is there anything you want to do here for 5.0?\r\n\r\nHum, check if the keyboard shortcut editor still works. > @Carreau is there anything you want to do here for 5.0?\r\n\r\n#2104 should be enough and close this. ","would that be when notebook autosaves ? Have you updated ipywidgets ?\n It could be autosave induced, it is hard to tell. I don't think I have updated ipywidgets since I installed everything 1.5 months ago. Would that change something?\n Yes please, try to update ipywidget and corresponding extension.\n\nOn Jul 21, 2016 10:04 AM, \"Samuel\" notifications@github.com wrote:\n\n> It could be autosave induced, it is hard to tell. I don't think I have\n> updated ipywidgets since I installed everything 1.5 months ago. Would that\n> change something?\n> \n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1612#issuecomment-234318190,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AAUez-iwTzjt9puqZKIoXUZaALYnc4zYks5qX6avgaJpZM4JN26A\n> .\n I found and followed this: http://stackoverflow.com/questions/25631344/turn-off-autosave-in-ipython-notebook\nand so far it's been working.\n Ok, so then it is likely the ipywidgets issue. \n\nI would **strongly** recommend to update ipywidgets as if you have the version with that bug, you are **extremely likely** to be affected with a similar bug that can end up in permanent data-loss or worse. And this whether or not autosave have been turned off. \n How do I update ipywidgets?\n From the [documentation](http://ipywidgets.readthedocs.io/en/latest/user_install.html) I would say:\n\n```\npip install ipywidgets --upgrade\njupyter nbextension enable --py widgetsnbextension\n```\n Its working better now, and it no longer re-renders when I save. Thanks for the help.\n Great ! Happy that solves it for you. \n\n@gnestor  I updated your permissions, can you try to close this issue ? That will allow us to check that you can press the \"Close and comment button\" and that everything works as expected. \n \ud83d\udc4c \n > \ud83d\udc4c\n\nGreat welcome to the team !\n","I'm running the js tests locally now to see if I Can repro the failures.\n @yuvipanda #1633 should have fixed the travis builds on 4.x, if you want to rebase and see if it passes, now.\n Seem to have snafu'd the rebase, I've re-done it in #1634\n","Thanks !\n","Hi @staeiou, you found a vestige of when JupyterLab was contained _within_ this repository (a few weeks ago).  The plan is for the jupyterlab extension to add the button itself.\n We have decided that the notebook package will _depend_ on JupyterLab so it will never happen that JLab will be missing if that button is shown.\n We should make it depend right now, then.\n But the other issue is that the extension should provide the button so that it appears in notebook 4.2 when you have the extension installed. I think once we have that, we should follow through and remove the hard-coded button in notebook dev master.\n > We have decided that the notebook package will depend on JupyterLab so it will never happen that JLab will be missing if that button is shown.\n\nIf I'm reading this right, this implies the kernel_gateway package, which depends on notebook for the API definition, will now also pull in the jupyterlab package?\n one of the other issue is that if the extension is still there, but the js extension is there you still get the link, but it's broken....\n I no longer see the 'Try Jupyterlab' button in the notebook, so can this be closed now?\n","Should this also not remove the jupyter_lab.png file, since that isn't being used anywhere?\n -1 on this, please see my comment on the original issue...\n\nOn Sat, Jul 16, 2016 at 12:47 PM, Yuvi Panda notifications@github.com\nwrote:\n\n> Should this also not remove the jupyter_lab.png file, since that isn't\n> being used anywhere?\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/pull/1616#issuecomment-233142285,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AABr0IOgwucbi8HqT3KGKUsaHlgtd_wgks5qWRkegaJpZM4JOCic\n> .\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Agreed, closing. \n","One way of resolving this is that we could test to see if a name is importable (even if `--py`) is not added and then ask the user what they intend?\n hi,\n\nWith aspect of an application, do you think it's good idea to install and enable extension in the fly rather than explicitly asking user to perform several steps after doing `python setup.py install`? It's very easy to forget.\n\nWe've been trying to do that in our `nglview` package: https://github.com/arose/nglview/blob/ipywidgets5/nglview/__init__.py#L3-L10\n\nhttps://github.com/arose/nglview/blob/ipywidgets5/nglview/install.py\n\nThe Jupyter ecosystem is growing quite fast so it's understandable that the installation and API are not stable. Just want to bring the issue here for discussion.\n\nHai\n The problem is that users may have multiple extensions that do the same thing - a great example is theming the notebook. Users might have 10 themes installed but only one could be active at a time. \n The eventual solution will be that we offer a nice UI for enabling and managing extensions. That is something we plan of offering in JupyterLab.\n I see. thanks.\n Take a look at https://github.com/Jupyter-contrib/jupyter_nbextensions_configurator\n > Take a look at https://github.com/Jupyter-contrib/jupyter_nbextensions_configurator\n\nI would really like to get that into the main notebook, and/or have it ported to JupyterLab. It is really hi quality work that would be extremely useful for users.\n","Hi there, sorry for the delayed response. \nIf you are on master and/or have tried jupyterlab, you might need to nuke your config as jupyterlab was an extension. So you likely have a config value that try to load jupyterlab. \n\nLet see if we can prevent errors to happend if you have a broken extension on the serverside.\n It looks like we already catch errors loading server extensions; that traceback is being logged to show what went wrong, but it shouldn't affect anything else. If you're still having other problems, please file a new issue describing those in more detail.","GitHub does static rendering of notebooks with no javascript, for security reasons. So collapse is not possible.  We have no control of how they render it. Sorry about that. \n","@minrk, @rgbkrk - I think this is ready for review.\n Guess that works for now. Makes me a bit sad that we don't have a more comprehensive doc, but that's on us. Sounds like Min wants to try out swagger at the very least for JupyterHub.\n ok with me\n","> Namely after some time, notebooks fail to display the inline matplotlib plots on startup but instead simply display something like for plots of the notebook.\n\nI'm not sure what you're seeing - are the plots there at first and then they disappear? Or do they never show up, but you expect them to? How long does this take?\n\nWhat browser are you using? Can you try a different one? Do you have any extensions, either to your browser or to the notebook itself?\n The plots never appear while they should (they do for the first n-th times I open the notebook). Then, something happens (I don't know what) and I only see something like <matplotlib.figure.Figure at 0x28e5a4a8> instead of the plots. If I replot them, then they are normally displayed but once I close the notebook and reopen it, they again are not displayed. I thus have to recreate the notebook from scratch for it to work again. Note that I am using  the following for plotting:\n%matplotlib inline\n%config InlineBackend.figure_format = 'svg'\n\nI am using Firefox 32-bit (just realized that it is the 32-bit version while my machine is 64-bit).\nI experienced this problem for quite some time. In the beginning I was using no extensions. Now I use several extensions : execute time, (some) LaTeX environment, scratchpad, autosavetime, codefolding, initialization cells, collapsible headings and table of contents (2).\n\nI will try on Chrome to see if anything changes.\n If you can make it happen with an example notebook you don't mind sharing, please upload the notebook once it's happened, so we can see if the problem is that the data is disappearing, or that it's just not showing up for you.\n Here is a notebook where I have this problem. It is small and light compared to my other notebooks so it's good for checking I guess.\n\n[Distributions.zip](https://github.com/jupyter/notebook/files/368763/Distributions.zip)\n Ah, you're using SVG figures. I'd guess that when the figures disappear, it's because the notebook has become untrusted. Are you running it on different computers, synchronised by something like Dropbox or Github?\n\nOutput formats like HTML and SVG are able to send code to the kernel to execute, so we have to be careful about displaying them, because it's a security risk. If a notebook is recognised as one that you have run all of and saved on this computer before, it is _trusted_, and those outputs are displayed. If any of the outputs weren't generated and saved on this computer, it's untrusted, and you can't see potentially dangerous outputs.\n\nPossible workarounds:\n- Use PNG plots - PNGs can't send code to the kernel (except potentially by exploiting browser bugs), so they don't need to be trusted.\n- If you're sure of where the notebook came from, you can manually mark it as trusted in the file menu.\n Yes indeed I do synchronize them on several computers. Marking them as trusted works indeed and the figures reappear!\nI guess it was a trivial problem and I feel sorry for wasting your time with this. Thank you very much for your help!\n No worries, this stuff can be confusing. Closing as it appears to be working as designed.\n","My bad, should have read the docs better:\n\nhttp://jupyter-notebook.readthedocs.io/en/latest/public_server.html\n Should we close this then?\n",">  the num variable is never modified from the js code. \n\nIt probably is, but only after the cell printing it has run.\n\nDepending on what you need it for, you may be able to define a function in Python that receives the value, and then call that function from the Javascript.\n > It probably is, but only after the cell printing it has run.\n\nNo, actually is not modified, because in that case, after every cell is executed, the modification should be available let's say on a new cell, or if I re-execute the last cell, but it isn't.  And calling a defined python function from javascript, in my case, does not work either, because the data I need comes only from javascript (is a json object), and I'll have to pass it as a parameter to the function, which is the same thing that storing it into a python var. \n\n*_Update: *_\n@takluyver: In the example I did, you're right, the num var is being modified. But my case is a little more complex, but I've realized that what I'm doing is not too efficient since it is not a simple number, but it could be billions of data rows, so I'll have to drop this solution and close this issue. Thanks anyway!\n","using `jupyter notebook --NotebookApp.ignore_minified_js=True heatmap.ipynb` yields:\n\n```\nGET http://localhost:8889/static/components/jquery-typeahead/dist/jquery.typeahead.js [HTTP/1.1 404 Not Found 271ms]\nError: Script error for \"typeahead\"\nhttp://requirejs.org/docs/errors.html#scripterror\n```\n\nyou need to add tests for this option\u2026\n OK, hacking around to quick & dirtily fix the above issue and the fact that the error message has _no indication_ of _what_ request failed, i found out that it\u2019s:\n\n`/api/contents/heatmap.ipynb?type=notebook`\n Thanks for digging into that, I think the `ignore_minified_js` is broken in general. Will investiagate. \n\nMarking as 4.3 optimistically. \n note that i only used `ignore_minified_js` to help me debug the original issue. it being broken didn\u2019t help here, but also isn\u2019t as important as the fact that jupyter notebook simply refuses to render a perfectly fine notebook, and gives no error message at all.\n\ni think that\u2019s a bad enough bug that it has to be fixed in a bugfix version. it hit me pretty hard, but luckily i could use `nbconvert` to get my code and finish my work using another environment.\n if we want to do it by the book, i think the steps would be\n1. fix `ignore_minified_js`\n2. add a test for it, so that it never breaks again\n3. add the requests being made to the log\n4. fix that error message: it should show that 1. a request failed and 2. which request it was\n5. find the real bug and fix it\n Related to #1154? Ping @jasongrout \n 1. \u2713 ignore_minified_js is gone in master, and the typeahead URL fix is in #1917 for 4.x (already fixed in master).\r\n2. \u2713 it's gone, see 1.\r\n3. \u2713 All requests are logged by the server with `--debug`.\r\n4. \u2713 The current error (4.x) when /api/contents fails with 404 looks like this:\r\n    \r\n<img width=\"697\" alt=\"screen shot 2016-11-23 at 13 52 49\" src=\"https://cloud.githubusercontent.com/assets/151929/20562495/29d9a5c0-b184-11e6-8a72-e05e3e047b3f.png\">\r\n\r\n \r\n5. it's still unclear what the real bug is. It looks like the `heatmap.ipynb` file doesn't exist, so 404 is the right thing to do. However, the notebook page should have 404'd itself if that's true. I can open the example notebook without issue, so it doesn't seem to have to do with the contents of the file itself. Perhaps it had to do with its permissions on disk? cool! thank you for all the fixes!\r\n\r\n---\r\n\r\nabout 5.: let me assure you: it existed.\r\n\r\ni also didn\u2019t know what could have changed the permissions, as recreating the notebook would make the error reappear.\r\n\r\ndid you change something, save it and reload it? that made the error appear for me in the past I don't doubt it, I'm just unclear on what exactly was going wrong, so I can chase it down. The 404 suggests that the file is gone (or a URL was built incorrectly), but I don't know how that would happen. OK, i get:\r\n\r\n```console\r\n$ python -m notebook --debug heatmap.ipynb                                                                         master \u2b06 \u25fc\r\n[D 13:26:21.286 NotebookApp] Searching ['/home/phil/Dev/Python/Jupyter/notebook', '/home/phil/.jupyter', '/usr/etc/jupyter', '/usr/local/etc/jupyter', '/etc/jupyter'] for config files\r\n[D 13:26:21.287 NotebookApp] Looking for jupyter_config in /etc/jupyter\r\n[D 13:26:21.287 NotebookApp] Looking for jupyter_config in /usr/local/etc/jupyter\r\n[D 13:26:21.287 NotebookApp] Looking for jupyter_config in /usr/etc/jupyter\r\n[D 13:26:21.287 NotebookApp] Looking for jupyter_config in /home/phil/.jupyter\r\n[D 13:26:21.287 NotebookApp] Looking for jupyter_config in /home/phil/Dev/Python/Jupyter/notebook\r\n[D 13:26:21.288 NotebookApp] Looking for jupyter_notebook_config in /etc/jupyter\r\n[D 13:26:21.288 NotebookApp] Loaded config file: /etc/jupyter/jupyter_notebook_config.json\r\n[D 13:26:21.288 NotebookApp] Looking for jupyter_notebook_config in /usr/local/etc/jupyter\r\n[D 13:26:21.288 NotebookApp] Looking for jupyter_notebook_config in /usr/etc/jupyter\r\n[D 13:26:21.288 NotebookApp] Looking for jupyter_notebook_config in /home/phil/.jupyter\r\n[D 13:26:21.288 NotebookApp] Looking for jupyter_notebook_config in /home/phil/Dev/Python/Jupyter/notebook\r\n[I 13:26:21.297 NotebookApp] It looks like you're running the notebook from source.\r\n    If you're working on the Javascript of the notebook, try running\r\n    \r\n        npm run build:watch\r\n    \r\n    in another terminal window to have the system incrementally\r\n    watch and build the notebook's JavaScript for you, as you make changes.\r\n    \r\n[D 13:26:26.051 NotebookApp] Loading extension jupyter_nbextensions_configurator\r\n[D 13:26:26.051 NotebookApp]   Editing template path to add /usr/lib/python3.5/site-packages/jupyter_nbextensions_configurator/templates\r\n[D 13:26:26.051 NotebookApp]   Editing nbextensions path to add /usr/lib/python3.5/site-packages/jupyter_nbextensions_configurator/static\r\n[D 13:26:26.052 NotebookApp]   Adding new handlers\r\n[I 13:26:26.052 NotebookApp] Loaded extension jupyter_nbextensions_configurator\r\n[I 13:26:26.056 NotebookApp] Serving notebooks from local directory: /home/phil/Dev/Python/Jupyter/notebook\r\n[I 13:26:26.056 NotebookApp] 0 active kernels \r\n[I 13:26:26.056 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/?token=24f649a8fe9c5b453e489a1330c85f7edeba7cbbc59ad39f\r\n[I 13:26:26.056 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\r\n[D 13:26:26.690 NotebookApp] Using contents: services/built/contents\r\n[D 13:26:26.726 NotebookApp] 200 GET /notebooks/heatmap.ipynb?token=d57eade08375cb03236d717739e19928c1410b561f2e5e56 (::1) 37.03ms\r\n[D 13:26:27.268 NotebookApp] Using contents: services/built/contents\r\n[D 13:26:27.269 NotebookApp] 200 GET /notebooks/heatmap.ipynb?token=d57eade08375cb03236d717739e19928c1410b561f2e5e56 (::1) 1.71ms\r\n[D 13:26:27.505 NotebookApp] 304 GET /custom/custom.css (::1) 0.89ms\r\n...\r\n```\r\n\r\nand\r\n\r\n```\r\nAPI request failed (404): error\r\n\r\nError stack trace while loading notebook was:  1.main.min.js:29980:466\r\n\r\nwrap_ajax_error@http://localhost:8888/static/services/built/contents.js:1032:30\r\npromising_ajax/</settings.error@http://localhost:8888/static/services/built/contents.js:1053:25\r\nx.Callbacks/l@http://localhost:8888/static/components/jquery/jquery.min.js?v=ccd0edd113b78697e04fb5c1b519a5cd:4:24877\r\nx.Callbacks/c.fireWith@http://localhost:8888/static/components/jquery/jquery.min.js?v=ccd0edd113b78697e04fb5c1b519a5cd:4:25702\r\nk@http://localhost:8888/static/components/jquery/jquery.min.js?v=ccd0edd113b78697e04fb5c1b519a5cd:6:5371\r\n.send/t/<@http://localhost:8888/static/components/jquery/jquery.min.js?v=ccd0edd113b78697e04fb5c1b519a5cd:6:9122\r\n```\r\n\r\nthe only 404 the inspector tells me about is http://localhost:8888/nbextensions/widgets/notebook/js/extension.js Does anyone have an change for this in mind that should go into 4.3? If not, I'm going to bump it so we can close in on this release.\r\n\r\nPing @SylvainCorlay as the last thing sounds like widgets might be involved. by the way: i still see \u201cerror: error\u201d, so\r\n\r\n> 4. \u2713 The current error (4.x) when /api/contents fails with 404 looks like this\r\n\r\ndoesn\u2019t apply to other APIs (if that failed AJAX request was indeed the failed API request) Something's weird if those logs are accurate, because it means whatever's getting a 404 is not being served by the notebook server (all 404 errors are always logged by the server, and all requests are logged by the server with `--debug`) - it's coming from a different server. Are you perhaps running the notebook server behind a proxy (nginx, apache)? Can you run the notebook server without any extensions or custom.js? how can i do this without tracking down and moving all the config? is there a command line switch? I think running with `JUPYTER_CONFIG_DIR=/tmp` should ignore all of your config. I\u2019M AN IDIOT\r\n\r\nthis was fucking uBlock.\r\n\r\neasylist has a filter `/heatmap.*?`\r\n\r\nsorry for wasting your time \ud83d\ude22 \r\n No worries, these things happen. I don't think I would have guessed that it was a browser extension. Even when you said that, I though 'I use uBlock; how have I not seen this?'. And then I noticed that `heatmap` is the name of the notebook you were trying to load.\r\n\r\nI'd still like to see if it's possible to make the error message more meaningful, but with so much complex software interacting, it may well be hard. yeah, shall we open a new issue with just the real information from this one in it?\r\n\r\ncalled \u201cmeaningful error message when request fails\u201d\r\n\r\ni mean, it could still fail for some other reason than being blocked. Go for it, especially if you can figure out where the error message comes from and if there's any way it can be improved :-)","``` python\nIn [3]: notebook.__version__\nOut[3]: '4.2.1'\n```\n See #1645 \n thanks.\n","It's not currently exposed in the 'Download as' menu - though it's a totally reasonable request - but you can already do this at the command line:\n\n```\njupyter nbconvert --to latex MyNotebook.ipynb\n```\n Thanks a lot! I didn't know you could do that\n\n2016-07-20 14:51 GMT+02:00 Thomas Kluyver notifications@github.com:\n\n> It's not currently exposed in the 'Download as' menu - though it's a\n> totally reasonable request - but you can already do this at the command\n> line:\n> \n> jupyter nbconvert --to latex MyNotebook.ipynb\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1625#issuecomment-233939466,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/ABUD0YcqKe3a6ToVDrS5TfnslQbdGnzMks5qXhnBgaJpZM4JQpp5\n> .\n @YPares I'm going to close this issue. We welcome and invite PRs to support a \"Download as LaTeX\" feature.\n","Make me think, I never asked @gnestor, which is/are the OS you use in general ?\n @Carreau I'm OS X...\n","Can you look in the browser's JS console for any error messages? Also, any errors in the terminal where you started the notebook?\n Thanks for getting back to me Tak. I got it figured out. I had edited custom.js in my previous iPython notebook to allow for emacs bindings. Once I deleted those lines, the Jupyter notebook started working.\n\nFYI, there were no relevant error messages that popped up in my JS console. \n OK, I'm glad you got it figured out - though it's a bit disconcerting that problems in custom.js can stop the whole thing from loading and not give any error message. I'll leave this open for now in case anyone wants to look into making that more robust.\n > OK, I'm glad you got it figured out - though it's a bit disconcerting that problems in custom.js can stop the whole thing from loading and not give any error message. I'll leave this open for now in case anyone wants to look into making that more robust.\n\nI **think** in master it is taken care of, but it's quite complicated to get it right in JS with webpack + require. \n Is this fixed (or easier to fix) now that we've dropped webpack? On master with an invalid (SyntaxError) custom JS, notebooks loads. So I'll consider as fixed and close.","`_` is a convention in the plain Python shell as well as IPython, so you can't set it to something else when working interactively. You can work around this by doing:\n\n``` python\nfrom fn import _ as _x\n```\n we should be able to  detect in IPython if `_` is `In[-1]` or not, and not reset it if set. \nThat's how the normal Python interpreter behave, \n See https://github.com/ipython/ipython/pull/9825, that could be further improved , and need to be tested. \n Marking as \"Non notebook\", as this is not really a notebook issue, and keep the maintainer of this repo with a smaller list of issue. \n","+1 :)\n","If you just want to get back to the regular kernels mechanism, I think that uninstalling `nb_conda_kernels` should do it.\n That fixed the issue, thanks.\n after uninstalling `nb_conda_kernels`, it just rasies \n\n```\n[C 02:02:39.584 NotebookApp] Bad config encountered during initialization:\n[C 02:02:39.584 NotebookApp] The 'kernel_spec_manager_class' trait of <notebook.notebookapp.NotebookApp object at 0x0000\n01B7078F8A20> instance must be a type, but 'nb_conda_kernels.CondaKernelSpecManager' could not be imported\n```\n\nHow can I solve it?\n > after uninstalling nb_conda_kernels, it just rasies\n> \n> [C 02:02:39.584 NotebookApp] Bad config encountered during initialization:\n> [C 02:02:39.584 NotebookApp] The 'kernel_spec_manager_class' trait of <notebook.notebookapp.NotebookApp object at 0x0000\n> 01B7078F8A20> instance must be a type, but 'nb_conda_kernels.CondaKernelSpecManager' could not be imported\n> How can I solve it?\n\nYou need to find the configuration file that conda modified, and remove the `NotebookApp.kernel_spec_manager_class` setting.\n Just to let you know, several people have been working in a solution for the original issue and we will have the updated package (containing the fix) available from the default channels by early next week.\n > Just to let you know, several people have been working in a solution for the original issue and we will have the updated package (containing the fix) available from the default channels by early next week.\n\nThanks a lot @damianavila !\n Pasting general answer here as well:\n\nWe've released versions of `nb_conda`, `nb_conda_kernels` and `nb_anacondacloud` through the official Anaconda conda repos that should resolve the issues you are seeing!\n\n```\nconda update nb_conda nb_conda_kernels nb_anacondacloud\n```\n\nAs-installed kernel names that are eligible for being default (e.g. python2, python3, ir, etc.) will be maintained unmodified, so they should always appear there.\n\nThe downside is as many as three options for the current env, i.e. if you are in root, you will see Python 2 and Python [root] and Python [default], you can now reproducibly capture which environment your kernel should run against.\n\nmeta: Anaconda-Platform/anaconda-nb-extensions#166\n I have tried to update `nb_conda`. \nbut after I update, there stills shows `python[root]` in the jupyter notebook, and cannot find any python kernels, even I have tried to use `python -m ipykernel install --user`, and in 'kernels' folder, there did exist a python3 kernelspec file. But jupyter cannot load it.\n\n```\n[W 15:02:20.478 NotebookApp] Unrecognized JSON config file version, assuming version 1\n[I 15:02:21.048 NotebookApp] [nb_conda_kernels] enabled, 2 kernels found\n[I 15:02:21.538 NotebookApp] \\u2713 nbpresent HTML export ENABLED\n[W 15:02:21.539 NotebookApp] \\u2717 nbpresent PDF export DISABLED: No module named 'nbbrowserpdf'\n[I 15:02:21.544 NotebookApp] [nb_conda] enabled\n[I 15:02:21.605 NotebookApp] [nb_anacondacloud] enabled\n[I 15:02:22.175 NotebookApp] Serving notebooks from local directory: C:\\Users\\Anakin\n[I 15:02:22.175 NotebookApp] 0 active kernels\n[I 15:02:22.175 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/\n[I 15:02:22.190 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[I 15:02:25.228 NotebookApp] Creating new notebook in\n[W 15:02:25.814 NotebookApp] 404 GET /kernelspecs/Python%20[Root]/logo-64x64.png (::1) 8.00ms referer=http://localhost:8\n888/notebooks/Untitled2.ipynb?kernel_name=Python%20[Root]\n[W 15:02:25.882 NotebookApp] Kernel not found: Python [Root]\n[E 15:02:25.882 NotebookApp] {\n      \"Host\": \"localhost:8888\",\n      \"Cache-Control\": \"no-cache\",\n      \"Content-Type\": \"application/json\",\n      \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0\n Safari/537.36 Edge/13.10586\",\n      \"Content-Length\": \"83\",\n      \"Connection\": \"Keep-Alive\",\n      \"Accept-Language\": \"en-US,en;q=0.8,zh-Hans-CN;q=0.5,zh-Hans;q=0.3\",\n      \"Accept\": \"application/json, text/javascript, */*; q=0.01\",\n      \"Accept-Encoding\": \"gzip, deflate\",\n      \"Referer\": \"http://localhost:8888/notebooks/Untitled2.ipynb?kernel_name=Python%20[Root]\",\n      \"X-Requested-With\": \"XMLHttpRequest\"\n    }\n[E 15:02:25.908 NotebookApp] 501 POST /api/sessions (::1) 80.02ms referer=http://localhost:8888/notebooks/Untitled2.ipyn\nb?kernel_name=Python%20[Root]\n```\n I get the following collision warnings during the install of these packages, and when I subsequently run notebooks:\n\n```\nCollisions detected in jupyter_notebook_config.py and jupyter_notebook_config.json config files. jupyter_notebook_config.json has higher priority: {\n      \"NotebookApp\": {\n        \"nbserver_extensions\": \"{'jupyter_nbextensions_configurator': True, 'ipyparallel.nbextension': True, 'jupyterlab': True, 'nb_conda': True, 'nbpresent': True, 'nb_anacondacloud': True} ignored, using {'jupyter_nbextensions_configurator': True, 'jupyterlab': True}\"\n      }\n    }\n```\n Are the new packages still supposed to have names like this:\n\n![](http://dsh.re/1f20a)\n\nThese make sharing notebooks a bit of a pain because it requires all users to have kernels with the same name.\n > These make sharing notebooks a bit of a pain because it requires all users to have kernels with the same name.\n\nNotebook should fall back on a similar python env, or at least ask use to chose a matching env if this is the case. \n\nCan you open a separate issue for the collision ? \n > Notebook should fall back on a similar python env, or at least ask use to chose a matching env if this is the case.\n\nThat's right... additionally, we have been thinking about this and there is some nice ideas on this thread to solve this one and other issues: https://github.com/Anaconda-Platform/nb_conda_kernels/issues/42#issuecomment-236173104\n One more clarification, if you use `python [default]` and share that notebook with another one without `nb_conda_kernels` installed you will be fine, because `python [default]` use the Jupyter's default kernels name. If you try to share a notebook with a `conda...` kernel in it, in that case, the notebook will ask you to select a kernel (from the available ones) to start the notebook if you have several kernels installed, otherwise it should default to the native one.\n I installed the latest version of anaconda3 and have similar issues\n > I installed the latest version of anaconda3 and have similar issues\n\nCan you describe the issues? I guess it is related with other issue: https://github.com/jupyter/notebook/issues/1716\n\nThanks! \n Same problem. On my system, \"Python [Root]\" and Python [default]\" are the same. I propose to avoid duplication (#48)\n > Same problem. On my system, \"Python [Root]\" and Python [default]\" are the same. I propose to avoid duplication (#48)\n\n The correct link is : https://github.com/Anaconda-Platform/nb_conda_kernels/pull/48 :wink: for people interested.\n\nCheers.\n","This wouldn't be related to Jupyter, but one of its dependencies. What do you see in `conda list`?\n Since this is an issue with the conda libzmq package not loading its dependency properly, it is possible that `conda install libsodium` would fix it, or perhaps remove and reinstall zeromq:\n\n```\nconda remove zeromq\nconda install zeromq\n```\n Hi @minrk \n\n`conda remove zeromq;\nconda install zeromq`\n\nworked a charm. Thanks for your help! This seems to be an eq fix of 'turning it off and on again' so I should have thought of that earlier.\n\nWill\n","Merging since this is only a travis change, to get 4.x builds back again.\n","+1\n",":+1: glad to hear that it's being actively improved!\n I've also deployed a custom fork of 4.x to our jupyterhub installation with\nxterm.js being used, and it's been highly appreciated! I'll continue living\non the bleeding edge of xtermjs for our install for a while since terminal\nis such a big use case for us.\n\nOn Tue, Jul 26, 2016 at 8:30 AM, Thomas Kluyver notifications@github.com\nwrote:\n\n> \ud83d\udc4d glad to hear that it's being actively improved!\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/pull/1635#issuecomment-235305457,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AAB23kG7CO0BNWkYcvYjRW9s-8sklvUAks5qZigRgaJpZM4JVRZk\n> .\n\n## \n\nYuvi Panda T\nhttp://yuvi.in/blog\n Sweet, thanks so much @yuvipanda!\n","Hi, I don't achieve to reproduce that (on Mac OS) , does it still do it on 4.4 ? Do you have any particular config ?\n\nI'm sure it might be a tornado issues, as 4.4 was released recently. \n I have anacondas defaults, im downgrade tornado 4.4.1. to tornado 4.3 this its solution, I agree with you. Tornado 4.3 its works and tornado 4.4.1 doent works\n I just tested upgrading tornado to 4.4.1 with conda on Windows, and couldn't reproduce it. If there is something to be fixed (and not just random file corruption), it's probably something for the conda packagers to deal with.\n Maybe jupyter notebook doesnt support  tornado 4.4.x. Only  tornado 4.3 down\n It's not a question of what we support. The error message indicates that a file in your tornado installation is corrupt - either something went wrong on your computer, or someone made a mistake in packaging tornado. Jupyter can't do anything about that.\n Thank you, You're right\n\nClosed\n","Thanks!\n","that is strange, according to [MDN](https://developer.mozilla.org/en-US/docs/Web/Security/CSP/CSP_policy_directives) single quotes are **required** for some of these.  We'll have to check that. \n\nThanks a lot for you detailed investigation. \n The keywords e.g 'self' need quotes, the URLs don't. Kind of the opposite to python code.\nself without quotes would mean a hostname self.\nI'll try and find some definitive documentation - w3c mentions that you need the quotes for keywords but not that they are superfluous for URLs.\n\nTry it - my results above were with the latest firefox (47.0)\n @Carreau does this want a docs change for 5.0? I think we can bump to a 5.1, but it woudl be nice to have that on stable docs. ","I can completly see the rational, though there is a test to check that  '\\r\\n' delimiter is conserved when passed as a kwarg that this breaks.\n\nDo you want to `newline = kwargs.pop('newline','\\n')` to make it the default ? I would  also get some input from what others think. \n I think this makes sense with the change proposed by @Carreau (though I would do it the other way around - `kwargs.setdefault('newline', '\\n')`\n I'm genuinely not sure how this will affect users on Windows, though. I can definitely imagine that there will be those who are adversely affected by the change.\n @minrk it will affect Windows users once, but then there should be no problem. The pain point with Windows always was that default editor `notepad.exe` does not understand LF. Luckily, IPython provides much better editing capabilities.\n @takluyver how do we test on Jenkins ?\n We don't have notebook test jobs set up yet. I should get round to that, but it's not high on my priority list at the moment. You can set it up if you want - clone one of the existing Windows jobs, change the repo and the installation commands.\n So, how do we go from here?\n @techtonik I'll run a couple of tests manually on Windows, then merge this if all goes well, and then we can test in the wild.\n Seems okay. Thanks.\n :+1: \n","Thanks, we are aware of this issues, though it need a bit of refactoring to decide wether 2 dialog are the same, or should not overlay.\n @Carreau is this something we can get fixed for 5.0 (which I'm trying to make soon)? If not, please bump it to 5.1. I think this one is easy: Don't draw another dialog if one is already there. I can have a fix for that shortly.\r\n\r\n I think we have other Issues tracking when this dialog occurs spuriously, which I think we can't fix for 5.0. #2098 should do it.","I believe you can only use this flag when running from a git repo (`cd /to/notebook/repo && pip install -e .`)\n @minrk Thank you for your reply. :)\nActually, I deploy a develop env for jupyter notebook as below:\n![image](https://cloud.githubusercontent.com/assets/10845504/17210027/dcfe5bf8-54f2-11e6-9935-440c0fa67575.png)\n\nand I run notebook from source\u3002 I clone source code from github, so the project it is a git repo. right?\n![image](https://cloud.githubusercontent.com/assets/10845504/17210068/1814f738-54f3-11e6-8b28-c9f6b350cf64.png)\n What do you get from `python -c 'import notebook; print(notebook.__file__)'`?\n Yep, if you've cloned from Github, the project is a git repo.\n\nCheck the `notebook/static/components` subdirectory to make sure that you've got the notebook's javascript dependencies; these are still needed even with `ignore_minified_js`, and I think someone recently found `pip install -e .` didn't get them.\n\nIf that directory is empty, run `python setup.py jsdeps` to fetch the necessary JS libraries.\n With the recent webpack/requires modification it might be --ignore_minified_js does not work anymore. \n @takluyver  I check the  ``notebook/static/components`, it has javascript dependencies.\n![image](https://cloud.githubusercontent.com/assets/10845504/17234609/0fa5b630-556d-11e6-9b7a-d609feae03cb.png)\n\nI thank if the subdirectory is empty, the console will be throw 404 status, but it not.\n I delete the code in in `/notebook/templates/page.html`\n\n```\n define(\"bootstrap\", function () {\n          return window.$;\n      });\n\n      define(\"jquery\", function () {\n          return window.$;\n      });\n\n      define(\"jqueryui\", function () {\n          return window.$;\n      });\n\n      define(\"jquery-ui\", function () {\n          return window.$;\n      });\n```\n\nIt works well. \n\nBy the way, I find in `/notebook/templates/page.html`,  js dependcy `typeahead: 'components/jquery-typeahead/dist/jquery.typeahead'` is wrong path, because in `components/jquery-typeahead/dist/` only has `jquery.typeahead.min.js`, no `jquery.typeahead.js`\n\nI checkout the source code from tag 4.2.1\n > By the way, I find in /notebook/templates/page.html, js dependcy typeahead: 'components/jquery-typeahead/dist/jquery.typeahead' is wrong path, because in components/jquery-typeahead/dist/ only has jquery.typeahead.min.js, no jquery.typeahead.js\n\nI **think** it might be using a search path, so `min.js`  or `.js` should not matter. \n\nThanks a lot for diving into that and making a detailed bug report. \n\nI'll assign myself and try to see what's happening there, I have a bit of backlog to go through first, so I might not get to dig into that soon. \n","\ud83d\udc4d \n `s/redirect/redirect_unsafe/g`, `s/_redirect_safe/redirect/g` from a best practice ? Or, if it's to not break API, prepare for a switch in next major version ? \n `redirect` is a method defined by tornado, so let's not change what it means.\n > redirect is a method defined by tornado, so let's not change what it means.\n>  Show all checks\n\nOk. \n","You can use the `nbformat` module to load a notebook file in Python. Then you can `exec()` code cell sources if you're sure they're pure Python, or if you need IPython syntax support, instantiate an InteractiveShell instance and call its `run_cell()` method.\n For reference, in IPython, you can also %run a notebook.\n","In general, we avoid Ctrl- shortcuts because they clash with browser shortcuts (both Ctrl-G and Ctrl-H are already bound on my system, for instance).\n\n@Carreau is the shortcut editor released yet?\n > @Carreau is the shortcut editor released yet?\n\nNo it's only on master for now, and it would still need a custom extension to add such an action. \n\nNote that the `\\alpha<tab>` is taken care of by **IPython** note the notebook, as it is an actual kernel completions that will work only on CodeCell. If it would be useful I think developing an extension should not be too hard, but it will likely need to extend codemirror. \n\nI would strongly recommend a custom keyboard layout use something like [ukelele](https://www.macupdate.com/app/mac/14495/ukelele)  on mac, you can set up a dead-key/compose key to type any unicode caracters or abbreviation. it has the advantage of working in all applications. \n","> would this be better?\n\nyes. thanks. (It's always better to give a direct instruction in error message than asking users to ask in forum or google :D).\n > yes. thanks. (It's always better to give a direct instruction in error message than asking users to ask in forum or google :D).\n\nYes we are trying to improve aur deprecation warnings as well...\n @hainm Thanks for the PR!\n\n@Carreau Should we:\n- Merge this into master now?\n- Merge into master when we are closer to a 4.3 release?\n- Merge this into 4.x branch?\n @gnestor in general, PRs are against master unless they only affect a backport branch. If a PR affects master and should be backported, the general flow is:\n1. mark PR with milestone for the next backport release (4.3)\n2. merge into master\n3. backport to 4.x\n4. push updated 4.x branch\n\nBackports can be done in a variety of ways, but we have [a script](https://github.com/ipython/ipython/blob/master/tools/backport_pr.py) for automating the common process of:\n1. download [the patch](https://patch-diff.githubusercontent.com/raw/jupyter/notebook/pull/1645.patch)\n2. checkout the 4.x branch\n3. apply the patch\n4. make a commit\n\nwhich works for simple cases, at leats.\n\nIn this case, it would be:\n\n```\npython /path/to/ipython-repo/tools/backport_pr.py jupyter/notebook 4.x 1645\n```\n\nAfter master and backport branches have diverged, the script may not work and backporting the patch by hand may be necessary. If you want to be conservative after manually backporting a patch, a PR against the backport branch would be appropriate.\n Thanks @minrk, I\"m going to copy your explanation on the Jupyter/jupyter repo for it to appear in the documentation !\n I'm also wondering how current master and what should be 4.x differ and whether we should retarget things and says that master == 4.x or, release a 5.0 instead of 4.x\n @Carreau we could mark it 4.x. I think we would have to roll back some changes to do so, though.\n Ok, it looks like @minrk has backported this PR to 4.x. Give me a \ud83d\udc4d and I will merge this into master.\n :+1: I did not mean to backport before this was merged.\n Well, go ahead and merge then !\n\nFeel free to bump thing on 5.0 if needed. We discussed being a bit more aggressive to mark more things for 5.0 as backporting is painful. \n @Carreau Agreed. In the future, I will consider bumping milestones to 5.0.\n","+1\n","> My experiment may run long time (hours). It seems the notebook stop running after the browser tab closed. How to keep it running and updating the notebook?\n\nUnfortunately there are no current simple way to do that. We are aware of the issue and working on it. In the meantime, I would suggest wrapping all the computation you are doing in `Futures`, in order to query for results only interactively. \n\nCLosing as this is already tracked in many places, but feel free to continue asking questions.\n Thanks for you reply, Carreau. I'm fresh to python notebook and not quite understand the \"Futures\" you mentioned. Could you give me a simple example? Great great thanks.\n A future is an object representing a task - it provides a way to see if the task is done, and get the result (or error) when it's finished. They're a general concept, but Python provides an implementation in [concurrent.futures](https://docs.python.org/3/library/concurrent.futures.html#module-concurrent.futures). They're normally used in code that's doing more than one thing at once.\n\nI think that's probably more complex than you need, though. A cell that you've started running will keep going when you close the browser tab, but the output it produces is lost. The easiest workaround is just to leave the browser tab open - tabs are cheap, I've got ~50 open now. If you can't do that for some reason, make sure it assigns any results you want to keep to a variable - they should still be available when you open it again. You can also use the [%capture magic](http://ipython.readthedocs.io/en/stable/interactive/magics.html#cellmagic-capture) to store printed output into a variable you can get later.\n I am struggling with this issue as well for some time now. The kernel keeps running your job on the server, but there is no way to see the console output after closing the browser.\r\n\r\nMy workaround was to write all my logs to a file, so that when my browser closes (indeed when a lot of logs come through browser it hangs up too) I can see the kernel job process by opening the log file (the log file can be open using Jupyter too).\r\n\r\n```\r\n    #!/usr/bin/python\r\n    import time\r\n    import datetime\r\n    import logging\r\n    \r\n    logger = logging.getLogger()\r\n    \r\n    def setup_file_logger(log_file):\r\n        hdlr = logging.FileHandler(log_file)\r\n        formatter = logging.Formatter('%(asctime)s %(levelname)s %(message)s')\r\n        hdlr.setFormatter(formatter)\r\n        logger.addHandler(hdlr) \r\n        logger.setLevel(logging.INFO)\r\n    \r\n    def log(message):\r\n        #outputs to Jupyter console\r\n        print('{} {}'.format(datetime.datetime.now(), message))\r\n        #outputs to file\r\n        logger.info(message)\r\n    \r\n    setup_file_logger('out.log')\r\n    \r\n    for i in range(10000):\r\n        log('Doing hard work here i=' + str(i))\r\n        log('Taking a nap now...')\r\n        time.sleep(1000)\r\n```\r\n\r\n+1 on this or some kind of long running process management I'm confused why this is difficult. Since a serialized jupyter notebook contains cell output, it should be possible to keep track of output when a user closes a tab and returns to the notebook by adding to the notebook json as it runs in the background, in which case the output generated while running in the background would be in the notebook. Why can't jupyter just keep writing to the json file? It doesn't write to the JSON files as soon as output is sent by the kernel - it is sent to the browser, which adds it in to the notebook document. When you save it (or an autosave occurs), the notebook document is converted to JSON and written to disk as a whole.\r\n\r\nWe're planning to change that so that the server keeps the notebook model and sends updates to the browser, but that's a big change to the architecture. That would be great! Is there an current issue or milestone where I can track the progress? I don't know of one - @Carreau might be able to give you more info on the progress. That would be great! My group works on remote servers. So being able to reconnect to a session would be very valuable.","Hi @dickfeynman \n\nThe appearance of keyboard shortcuts should be following platform conventions, [At least on Windows and  Mac OS], so it seem weird that you got confused, isn't that the case for you ? But thanks for the data point. \n @Carreau: I'm surprised; I wasn't aware of such a thing as platform conventions for displaying keyboard shortcuts. I'm using Firefox 47.0.1 on Arch Linux (kernel 4.6.4-1) with gnome-shell v3.20.3, and I've attached a screenshot of what I see.\n![jupyterkeyboardshortcuts](https://cloud.githubusercontent.com/assets/1929464/17345781/a8a5e812-58d5-11e6-88ae-0749ae973b11.png)\n Can you screenshot native menus for comparison ? e.g, on Mac os, native shortcut are uppercase, always. [And APple Human Guideline interface ask for them to be upper case. \n\n![screen shot 2016-08-02 at 15 45 14](https://cloud.githubusercontent.com/assets/335567/17347961/1fd2c06c-58c8-11e6-9948-a807fb78eea9.png)\n You're right, my desktop environment seems to be following the same upercase convention. I guess it's been a long time since I looked up keyboard shortcuts on my system.\n\nThanks for the responses. My bad.\n > You're right, my desktop environment seems to be following the same upercase convention. I guess it's been a long time since I looked up keyboard shortcuts on my system.\n> \n> Thanks for the responses. My bad.\n\nNo problem, you are not the first one to make the remark. I guess the thing that threw you off was that there is **no** modifiers, so your brain desperately fills-in a modifier by thinking \"Oh it's uppercase I have to press shift\". There are case where shortcut appear lower case, like GMail for example. But even putting shortcut lowercase does confuse people who are looking for a modifier.\n On most keyboards, the key caps also have uppercase letters, so I have a Q key rather than a q key. ;-)\n\nI've just checked the applications I have open (on Linux) and they all use uppercase letters in shortcut descriptions - including apps built in XUL, Qt, Gtk and Electron.\n","Looks like it just got overlooked in the traitlets API update. #1652 should fix it.\n","> along with pre-ticked checkboxes that show exactly which notebooks are about to be deleted, allowing you to uncheck ones mistakenly included in the deletion list.\n\nThat is IMHO too much or need a confirmation dialog to confirm that what you have ticked it correct.\n +1 for a trash folder somewhere you can restore from\n This seem like generic enough that there should be a library for that. This would require a refactor of the content manager though if we want an undo in the UI. \n > +1 for a trash folder somewhere you can restore from\n\n:+1:  too... I think is a sensible option...\n [Send2Trash](https://pypi.python.org/pypi/Send2Trash) is a way to use the OS-provided trash mechanism, which should probably at least be an option, and possibly the default (since server admins are more likely to configure things like this than desktop users).\n\nI don't think desktop 'recycle bins' are very well designed - as I described before, I think users tend to end up either bypassing them entirely, or accumulating thousands of 'deleted' files. But they are there, and for desktop users, I think it's better to use the existing trash mechanism than come up with our own system.\n Unfortunately, as the name suggests, Send2Trash doesn't appear to have any APIs for retrieving a file from Trash, so the 'Undo' button might have to be left out with desktop integration. I'll make an issue asking about it, but development looks a bit dead.\n How would this work with other ContentsManager implementations?  Would providing the ability to restore a deleted file become part of the ContentsManager's responsibilities?  @Carreau w/r/t jupyter-drive, for example, does Google Drive have that kind of functionality built-in?\n Yes, I'd guess it would become part of the ContentsManager's responsibilities. Though we could do things in such a way that it's optional for ContentsManager implementations to provide.\n There's precedence for optional trash behavior. Some mounted remote filesystems don't support trash, in  which case the standard delete action prompts with \"This will be permanently deleted\" confirmation.\n\nOne significant change - moving to trash doesn't typically have a confirmation, so if we add it, I would probably _either_ have trash or a confirm-delete dialog, but not both.\n Yep, one of the big advantages of trash is that we could skip the confirmation, because deleting is no longer a destructive action.\n @Carreau \"That is IMHO too much or need a confirmation dialog to confirm that what you have ticked it correct.\" \n\nWhat I'm thinking is if I have accidentally ticked a lot of files, I can easily be blinded to \"delete N files\". I did originally think that clicking the delete button could then highlight the files to be deleted with a red background, for example, that would alert the user to the fact they were about to delete a lot of files?\n\nI also wondered about whether there need to be guards against deleting running notebooks?\n I wonder about having a single button that is Shutdown if any selected items are running notebooks, and Delete otherwise (the label/icon would change, not just the action). That way it takes two clicks to delete things including a running notebook, and it's clear what they're doing.\n Something I just noticed - if I tick a selection of running notebooks to shut them down, when I click on shutdown the notebooks remain ticked. I half expect the ticks to be removed by the action? eg if I'm going to shutdown notebooks and then delete some of them, I currently need to:\n- select notebooks I want to shutdown,\n- shut them down,\n- untick them,\n- select the notebooks I want to delete,\n- delete them.\n\nAs compared to:\n- select notebooks I want to shutdown,\n- shut them down (and automatically untick them),\n- select the notebooks I want to delete,\n- delete them.\n\nI know the overhead of unticking all is trivial, but I still feel like it's too easy to select notebooks and in-haste delete them (I'm forever trying to make reminder prompts disappear quickly and can - in haste - take the wrong option without paying due heed to the prompt...!;-)\n I think the best way to deal with this is via full git integration. Then you have full suite of git-related versioning tools to help you deal with accidental loss of code: just revert! See, e.g., [this gist](https://gist.github.com/jbgo/1944238).  No reason to solve this long-standing coding problem again.  Just posted another feature request about this. \n As useful as git is, I don't think that's the answer we need here. IPython shouldn't rely on git being installed, and it would be hard to build a UI around git that is intuitive for novice users. For instance, what if you have changed other notebooks in the repository since deleting the one you now want to recover? Just reverting doesn't help there.\n\nAlso, we're often curating notebooks in repositories manually, and if every save was a new commit to that repository, automated commits with trivial commit messages would quickly take over the history. If you were playing around with plots or other images in notebooks and saving frequently, it would also make the repository balloon in size.\n\nThere are really interesting possibilities with using git as a storage backend for notebooks, and that was one of the cases we had in mind when we made the contents manager & the checkpoint manager APIs that other people can implement. But I don't think it's going to become the default way to run the notebook, and I think we need a solution to this that doesn't rely on it.\n Makes sense.  (I still love the idea of a more robust git integration for other purposes.) \n So do I ;-).\n\n@jdfreder @ssanderson - we were going to make some documentation of custom content managers, I think. Has that been started yet? We could sprint on it at SciPy if you like.\n @takluyver I was waiting on the docs infrastructure to settle down before starting on those docs.  Are they in a place that's ready for external hands?\n\n@donaldbraman you might also be interested in https://github.com/csiro-scientific-computing/GitCheckpoints and https://github.com/csiro-scientific-computing/NotebookDiff, which implement the Checkpoints API in terms of git commits and adds diffing functionality to the notebook using git diff as the backend.\n I think so, but check in with @jdfreder, who was co-ordinating the notebook docs.\n\nOh cool, I didn't know about those two projects.\n @ssanderson those are very cool.  Will definitely check them out. \n We **really** need a place where people can register that. \nLike a wiki extensions page.\n\nThe keeping things ticks is (IIRC) a design decision from @ellisonbg .\n @ssanderson yeah, the docs stuff is mostly settled now.\n @donaldbraman I also maintain a _relatively_ mature contents extension here: https://github.com/quantopian/pgcontents.\n\n@jdfreder great!  Can you point me at where I'd go to make changes/additions?\n @ssanderson you should probably write the content as an RST document for now.  Place the new file in `./docs/source` .  Then add a reference to it in the index.rst, in that same folder.  You can then test your document by running `make html` in `./docs`, which will produce an HTML build of the docs, IIRC in `./docs/build`.  Once your content is merged, it will appear on http://jupyter-notebook.rtfd.org/ .\n\nIf you're interested in writing the docs as a notebook instead, let me know, the steps are slightly different. \n Hi, it would be great as an enhancement to a future version of Jupyter. In the Jupyter Notebook UI, the check boxes should get reset after any action. This way, you don't accidentally delete a notebook.\n","I don't see any downside to this, given that we're just turning something that was effectively random into something at least predictable.\n\nBefore I merge, my only question is: in addition to the help string, is there any location in the docs where it's worth documenting the load order?\n > don't see any downside to this, given that we're just turning something that was effectively random into something at least predictable.\n> \n> Before I merge, my only question is: in addition to the help string, is there any location in the docs where it's worth documenting the load order?\n\nYes, and write a test also. \n +1, I'll wait then.\u200b\n @Carreau It looks like you updated the docstring. Do you want to write a quick test for `init_server_extensions` so we can merge?\n > @Carreau It looks like you updated the docstring. Do you want to write a quick test for init_server_extensions so we can merge?\n\nI'll try to do that soon, I have a few other things that I want to finish first while they are fresh in my head; apologies if I am not super responsive.\n @Carreau No prob. I'll take a quick stab at it...\n @Carreau Ya I'm not sure how to write a test for this. Assigning to you...\n Ok, finally came up with a way to test that, which could be cleaner but should work. \n\none question though, I'm wondering is enforcing ordering on keys is the right thing as it is apparently system dependant (leading zero might not count) and users might start to rely on this specific fact and publish extensions with specific names to force this ordering. \n\nI'm considering just saying that the order is stable on a specific configuration (without consideration of which order), and for example sort using a hash of the key. \n @Carreau So you're proposing that we don't allow users to be able to specify loading order of extensions by sorting extensions by a hash of their name, for example? What if the loading order was based on the order in `jupyter_notebook_config.json`? This would allow users to specify the loading order of extensions there (as long as jupyter respects this order when writing to the file and doesn't arbitrarily rearrange the order like I've observed in `nbconfig/notebook.json`).\n Ok, so github since to have missed it, but there is now tests. \n @gnestor the extensions to load are stored in a JSON object rather than an array, so it's conceptually unordered. If the loading order of extensions matters, I'd say that either the extensions or our API are doing something wrong.\n","It's working for me in master. I think this is tied up with the logging changes in ipykernel: ipython/ipykernel#127. If so, ipykernel 4.4 should fix it.\n Arguably it should abort the execution on the cell magic which does not exist. But agreed that on master there is at least a message. \n","I was in the middle  of another patch/debug so couldn't fix it on the fly.  Thanks for taking care of it. \n","Sorry. Thanks. \n","See also #1589\n > See also #1589\n\nOh yes, thanks !\n I think this was fixed by #1891","@julienr I guess this one will be of interest to you :-) \n\n> Have to check if the attachment thing was released to know if we can fix it without backward compat.\n\nAttachments are only on master, so it should be safe to make think markdown compliant again !\n > Have to check if the attachment thing was released to know if we can fix it without backward compat.\n\nIt hasn't been, but it's part of why I [pinged people](https://github.com/jupyter/nbformat/issues/40) about releasing nbformat, as well as brought it up at the last two dev meetings.\n\nHowever, the about-to-be-released nbformat spec in 4.1 _only_ defines how attachments are included in the notebook data structure, not how markdown references to them should be made. That bit is in this repo, and only in master, so we are free to fix it if there's something wrong.\n @Carreau Ooops, that was an oversight on my part, sorry about that. Seems like your patch fixes it though or is there anything else that require changes ?\n Sorry if I missed this in previous discussions, but why exactly is the double slash `//` necessary for URLs?\r\n\r\nI think this looks quite ugly.\r\nAnd since no host specification is following, it might not even be a valid URL?\r\nIf anything, shouldn't it be *three* slashes (which is even more ridiculous)?\r\n\r\nI didn't find anything about this in the Markdown spec (https://daringfireball.net/projects/markdown/syntax).\r\n\r\nThe current CommonMark spec (http://spec.commonmark.org/0.27/#link-destination) doesn't require it.\r\n\r\nRFC 3986, if I understand it correctly, doesn't require the double slash: https://tools.ietf.org/html/rfc3986#section-4.2 `://` is not strictly required to be a valid URL, but it is conventional and clear. I don't have a strong preference between `attachment:name.ext` and `attachment://name.ext`, though I think the latter is clearer. I think you are correct that there wasn't a correctness issue, as `attachment:name.ext` is valid, according to markdown in particular and URLs in general.\r\n\r\n> And since no host specification is following, it might not even be a valid URL?\r\n\r\nI don't believe there is any requirement that hosts come after `://` (see `file://`)\r\n\r\n> If anything, shouldn't it be three slashes (which is even more ridiculous)?\r\n \r\nI wouldn't say so, no. The third slash denotes absolute file paths, not resources that don't live on a filesystem. For `file://`, the delimiter is still `://`. Thanks for the quick answer. Since it wasn't quite the answer I was hoping for, I had another look at RFC 3986.\r\n\r\nIs this the relevant source?\r\n\r\nIf yes, I'm now quite sure that the current form `attachment://myfile.png` is **invalid**!\r\n\r\nA double slash can only appear together with a (possibly empty) host name, but in this case, the path has to be absolute or empty (see https://tools.ietf.org/html/rfc3986#section-3).\r\n\r\nUsing three slashes `attachment:///myfile.png` would be syntactically possible, but I guess in our case an absolute path doesn't make sense. And three slashes look ridiculous. But this is actually the not so uncommon case of `file:///my/absolute/file.txt`.\r\n\r\nHere's the syntax definition of RFC 3986 (https://tools.ietf.org/html/rfc3986#appendix-A):\r\n\r\n```\r\nURI           = scheme \":\" hier-part [ \"?\" query ] [ \"#\" fragment ]\r\n\r\nhier-part     = \"//\" authority path-abempty\r\n              / path-absolute\r\n              / path-rootless\r\n              / path-empty\r\n\r\nURI-reference = URI / relative-ref\r\n\r\nabsolute-URI  = scheme \":\" hier-part [ \"?\" query ]\r\n\r\nrelative-ref  = relative-part [ \"?\" query ] [ \"#\" fragment ]\r\n\r\nrelative-part = \"//\" authority path-abempty\r\n              / path-absolute\r\n              / path-noscheme\r\n              / path-empty\r\n\r\nscheme        = ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\r\n\r\nauthority     = [ userinfo \"@\" ] host [ \":\" port ]\r\n\r\n...\r\n\r\npath-rootless = segment-nz *( \"/\" segment )\r\n\r\n...\r\n\r\nsegment-nz    = 1*pchar\r\n\r\n...\r\n```\r\n\r\nI initially thought the `relative-ref` is what we need, but this doesn't have a `scheme`!\r\n\r\nI guess what we want is plain old `URI`. The `scheme` part and the colon should be obvious, and for the `hier-part` there is only one option that fits in our case, namely `path-rootless`.\r\n\r\nSo if I'm not mistaken and if RFC 3986 is indeed the relevant source, the double slash is not allowed and the correct way to spell it would be\r\n\r\n    attachment:myfile.png\r\n\r\n... which IMHO is much less confusing and simply looks better.\r\n I've provided https://github.com/jupyter/nbformat/pull/77 and #1965.\r\nDoes this need to be changed anywhere else? Should be just those two.","@Carreau Can you test this before I merge? \n @minrk This shouldn't require a backport, right?\n Correct, the watch stuff we have for js is new in 5.0 (it's part of the webpack tooling), I'd probably do the same for css.\n It's an improvement so merging and we can refine the details later.\n Thanks !\n","Related #1293 \n @ellisonbg Can you UX test?\n Nice!\n I would just not use the `danger` alternative as it's ok to view an untrusted notebook. \nI think the \"classic\" color for both trusted and untrusted might be sufficient. \n\nOne of the reasons I think it would be better, is that I don't want this action to become something which is click-through like the UAC on windows. \n\nOtherwise +1\n Yeah, we want to avoid creating something like the MS Office 'enable macros' dialog. Because when the computer says \"This might be incredibly dangerous!\", users say:\n\n![70494602](https://cloud.githubusercontent.com/assets/327925/17442901/dfe98de0-5b2f-11e6-8327-8452602e23ce.jpg)\n Ok, I just switched to classic style. \n\nOne other question: Should the \"Trusted\" notification hide itself after a second or so? Currently both notifications are persisted. If the \"Untrusted\" notification is clicked, the user is prompted to trust the notebook. If the \"Trusted\" notification is clicked, the notification hides.\n > Ok, I just switched to classic style.\n> \n> One other question: Should the \"Trusted\" notification hide itself after a second or so? Currently both notifications are persisted. If the \"Untrusted\" notification is clicked, the user is prompted to trust the notebook. If the \"Trusted\" notification is clicked, the notification hides.\n\nI think that's a good compromise. And it's easy enough to change afterward if needed. \nIt will keep the UI clean for most users. \n\nAs @Phyks was the first initiator of that, we can ask him his thoughts. \n I think I'd be inclined to hide both notifications after 10 seconds or so, to reduce the likelihood that the user will click to make it go away. Even in blue, it still stands out quite a bit.\n >  Even in blue, it still stands out quite a bit.\n\nBoth are gray now. IIUC.\n Sorry, I did not have much time to follow it and eventually work on my PR lately. \n\nThanks @gnestor ! Your design implementation looks really cool!\n\nI would not be in favor of hiding the untrusted notification, as the user may not notice it before it goes away and the main purpose of this feature was to have an indication that a notebook is untrusted. The trusted notification can go away though I think, as it results from either a user interaction, or a notebook being safe from the loading.\n Ok, @minrk should we switch this to 5.0 before merging or leave it at 4.3 and backport?\n > Ok, @minrk should we switch this to 5.0 before merging or leave it at 4.3 and backport?\n>  Show all checks\n\nYou can leave at 4.3 for the backport script to find the issue. \nOr you can decide this is only 5.0 and is a \"new feature\" and leave switch the milestone to 5.0; \nUp to you. I'm fine considering that as \"new feature\" and having one less thing to backport. \n > I'm fine considering that as \"new feature\" and having one less thing to backport.\n\nThat's what I was thinking...\n Yeah !\n","\ud83d\udc4d \n","Rebased. I guess that we would want to make notebook depend on the next release of `jupyter_client` and `ipykernel`.\n Since the notebook doesn't strictly depend on any kernel, that won't make sense. It also doesn't use the jupyter_client Python API, so that also won't be relevant here. This method is probably going to have to be allowed to be undefined on kernels for notebook 4.x.\n","@SylvainCorlay Any ideas?\n","You can also try other themes \n\nhttps://github.com/dunovank/jupyter-themes/blob/master/README.md\n +1 for using other themes.\n\nSee https://github.com/ipython/ipython/issues/5623#issuecomment-40517625 for an example of how to modify custom.js to hide the header/menu.\n @gnestor Have you tried the example you have linked?\n\nFYI, it does not work in current version of Jupyter, and my point was to avoid rewriting JS for such obvious thing like removing useless elements from workspace which should be included by default or at least allow user to set the preference in some config file.\n\nOTOH just take a look at various pycon videos that use Notebook - by default almost all use half screen as presentation workspace, because of these elements that are enabled by default.\n\nAs for the skins, thanks to @hainm for suggested workaround, but I don't want to use skins as I like the way Notebook looks.\n @rornor The code I linked to is no longer compatible with the current version of the notebook. I've tested the following code and it works (if you're running 4.2.2, note https://github.com/jupyter/notebook/issues/1730 and put the code outside of `'app_initialized.NotebookApp'` callback):\n\n``` js\nevents.on('app_initialized.NotebookApp', function () {\n    console.log('custom.js: hiding header and toolbar');\n    $('#header-container').toggle();\n    $('.header-bar').toggle();\n    $('div#maintoolbar').toggle();\n    events.trigger('resize-header.Page');\n});\n```\n\nScreenshot:\n\n![screenshot](http://g.recordit.co/DOj9to5V91.gif)\n\nSo, regarding your your issue:\n- You can obviously toggle the header and toolbar using the menu but this config is not persisted, so that the next time you open the same notebook or any other notebook, you will need to re-toggle.\n  - However, toggle status can be persisted using `nbconfig` (this is used to persist line number toggle status on master). I will look into doing the same for header/toolbar toggle status...\n- You can customize the notebook UI using `custom.js` which offers users a lot of flexibility. \n Thanks for you explanatory reply @gnestor \n\nI just updated notebook to 4.2.3, and when I started new notebook, toolbars and headers are now hidden.\n\nI would guess that the snippet you linked (that's the one I also used in the past) works with 4.2.3, and it does not work only on 4.2.2 (probably due to #1730)\n @rornor Yes, 4.2.3 is just a patch for https://github.com/jupyter/notebook/issues/1730. Glad it's working! I am still working on persisting header/toolbar toggle status across notebook sessions. You can follow https://github.com/jupyter/notebook/pull/1769.\n Thanks @gnestor for taking interest in this issue. \n\nI just wanted to show reference to some random pycon video from my history: https://www.youtube.com/watch?v=M1-MVYLONZc&feature=youtu.be&t=32m00s\n\nPresenter is not using slides but live Notebook. He doesn't even maximize his browser, and of course toolbars and headers are there, as perhaps he was busy with making presentation work, then making it's visual appearance best.\n Hi, \r\n\r\nas @gnestor suggested, version 4.3.1 should persist the user configuration, also after server restart. \r\nHow can I get that version?\r\n\r\nAfter `pip3.5 install -U jupyter` or `pip3.5 install notebook --upgrade` \r\n( suggested [here](http://jupyter-notebook.readthedocs.io/en/latest/changelog.html) )\r\nI still have `jupyer --version` -> 4.2.1\r\n\r\nThanks\r\n\r\nps: `which jupyter` -> \r\n/Library/Frameworks/Python.framework/Versions/3.5/bin/jupyter @ggrrll `jupyer --version` returns the jupyter core version (4.2.1 is the latest). Try `jupyter notebook --version`.  Thanks... indeed it gives `4.3.1`  but still, when I re-start the kernel it still re-open the toolbar and header \r\n(I checked if it's a conflict with `Nbexstensions`  and it seems not - I only _disable_ them all, not uninstalled)\r\n\r\n(I am on `macOS 10.12.2`)\r\n\r\n(I could get rid of toolbar and header with another jupyter [theme](https://github.com/dunovank/jupyter-themes) ...but this is not really a solution) @ggrrll My mistake, the PR for this feature (https://github.com/jupyter/notebook/issues/1769) is targeted for notebook version 5.0, so it is not available in 4.3.1. We are working towards a 5.0 release, so in a couple weeks you should have this feature \ud83d\udc4d ","Thanks, you can use classic browser bookmark in the meantime. \n","@shyamalschandra We don't recommend using sudo to install on OS X. I would recommend using the Anaconda distribution as described in the Jupyter documentation http://jupyter.readthedocs.io/en/latest/install.html. Alternatively, what is the full output if you type `pip install jupyter`?\n I now used \n\n`pip install --user jupyter`\n`pip install --user notebook`\n\nbut when I do a `jupyter notebook`, jupyter says the following:\n\n```\nShyamals-iMac-174:session-2 shyamalchandra$ jupyter notebook\njupyter: 'notebook' is not a Jupyter command\n```\n\nWhat do I do to solve this problem?\n I would guess that the location it's installed scripts to (probably `~/.local/bin`) is not on `$PATH`. We usually solve this by modifying PATH in something like  `~/.bashrc`.\n I don't see `~/.local/bin` in Mac OSX.  Do I need to create the directory?\n\nThanks!\n Maybe it's a different location on Macs, someone else will have to advise you on that.\n @shyamalschandra I highly suggest that you just install Anaconda which will install Python, Jupyter, and most of the libs that you might use with Jupyter. Otherwise, installing Jupyter can get complicated. See the [installation docs](http://jupyter.readthedocs.io/en/latest/install.html#installing-jupyter-using-anaconda-and-conda) for more info.\n","I support this, strongly.\n We could do the same on the jupyter website.\n Hello, I'm new to open source but a big fan of Jupyter Notebooks and hoping to contribute if I can. Any tips to get started on this? Hi @jinmehta13 welcome !\r\n\r\nHow experienced are you, and in which domain ?\r\n\r\nDepending on how you want to get started I would do the following:\r\n\r\nIf you want to get started on the website, and add a message in the JS console there, the first step would be to get the website to work on you local machine. The website repo is [there](https://github.com/jupyter/jupyter.github.io), once this work we can see for modifications.\r\n\r\nIf you like to make that on the notebook, the simplest if first to get this current repo on your computer, and managed to install a development version of the notebook. You should be able to find the documentation [here](http://jupyter-notebook.readthedocs.io/). Once this is done you can start to make local modifications :-) \r\n\r\nOne thing that would be great, is while you are doing this: when you find something unclear, hard, or just don't know where to search, take notes and tell us afterward, that will help us to improve the documentation a bit more for the next contributor. \r\n\r\nIf you have more questions, feel fre to ask.  Hey @Carreau, I finished up my undergrad in Computer Science and Engineering this past May. Still looking for a job but my internship experiences worked with a single page web application and a lot of IPython Notebooks with pandas, NumPy, and matplotlib. Like I mentioned earlier, new to open source but looking to be an involved contributor to a project and this seemed like a good fit given my familiarity with Jupyter from projects.\r\n\r\nSo it took a little time but I managed to get the website working on my local machine. It'd be nice to work on the notebook too so I'll try to have that setup over the next few days.\r\n\r\nSome notes on the setup process for the website (note: I had no prior experience with Ruby, Gems, etc.):\r\n\r\n- Installing Ruby and the DevKit was straightforward and I had no issues following the docs\r\n\r\n- Installing github-pages and some other dependencies on a Windows 64-bit machine required some work. It might help to mention in the [Readme](https://github.com/jupyter/jupyter.github.io#quick-local-testing) to run `bundle install` to execute the Gemfile already included in the project. At one point I made a Gemfile in the Devkit directory.\r\n\r\n- I ran into the following error: `You have already activated json 2.0.3, but your Gemfile requires json 1.8.6. Prepending 'bundle exec' to your command may solve this. (Gem::LoadError)`\r\nI couldn't get past this by specifying `gem 'json', '1.8.6'` in the Gemfile so I have to run `bundle exec jekyll serve --baseurl ''` to serve the project to localhost.\r\n\r\nOverall, it was not much trouble to get setup with the website. Could you provide some more specifics or next steps to add this welcome message (what message to output, where some of the core logic that I might be working with is located, etc)? I'll try to familiarize myself with the project structure in the meantime. Thanks! @Carreau so I can add the console message like so:\r\n\r\n`<script>console.log('Welcome to Project Jupyter! Explore the various tools available and their corresponding documentation. If you are interested in contributing to the platform, please visit the community resources section at http://jupyter.org/community.html.')</script>`\r\n\r\nI added that at the bottom of the \"head.html\" file but I'm not sure if that is an ideal place to include this code. Also, let me know if the welcome message is alright and if any changes need to be made. Thanks @jinmehta13 ! That's seem like a good message and a good place. You can make a PR directly on the website repository. \r\n\r\nThe message is great !\r\n\r\nThank you for the feedback on the doc as well, we'll see if we can improve the instruction. It's true that few of us have windows machines available and are used to windows, so the instruction are often lacking.  @Carreau thanks, PR made with the website repo. I'll get working on the notebook version and I'll provide feedback on that setup process too. > @Carreau thanks, PR made with the website repo. I'll get working on the notebook version and I'll provide feedback on that setup process too.\r\n\r\nThanks ! It's live ! @Carreau, question regarding the console message for the notebook (I got a development version of the notebook up and running by the way): is the message to be displayed in the user's terminal or in the browser console when the notebook app launches? Also, is `notebook/notebook/templates/tree.html` an appropriate place for the message if it's to be displayed in the browser console? @jinmehta13 I was thinking in the JS console, but we could have something in the terminal as well. It should not be too hard. \r\n\r\nI would try to add th message in one of the `main.js` likely, for the notebook we try to separate cleanly the html from the javascript. \r\n\r\nYou can also try to figure out if the developer tools are getting opened, and re-print the message in the JS console if it has been. How does that sounds ? @Carreau, I moved the console message into `..notebook/static/tree/js/main.js`. I looked around between Stack Overflow and the Chrome/Firefox APIs and I don't think there's any sound way to detect if the dev tools are being opened.\r\n\r\nAlso added the console message into the terminal output between the Control-C exit information and authentication token. That change was made in the `../notebook/notebookapp.py` file.\r\n\r\nI'll put in a PR but let me know if you have some ideas on detecting the dev tools usage and I can try to implement that as well. closed by #2065","Thanks\n","We don't use Ctrl-T or Ctrl-N as shortcuts, precisely because they conflict with browser shortcuts. We only use a couple of Ctrl- shortcuts where the browser option wouldn't make sense - I've just checked Ctrl-S (save) and Ctrl-V (paste dialog) in Firefox 48, and they both work.\n I noticed this because I had added a shortcut:\nJupyter.keyboard_manager.edit_shortcuts.add_shortcut('Ctrl-t', 'jupyter-notebook:scroll-cell-top');\n\nCtrl-n is useful when using CodeMirror in Vim mode. It triggers completions and one can select from drop-down suggestions. (with Ctrl-p too, I think)\n\nThese three had worked fine until the update to Firefox 48, so I assumed Jupyter is capturing these shortcuts somehow.\n Aha, OK. If I run that line in the JS console, it also doesn't affect the shortcut, whereas it does if I use Ctrl-B instead. However, I get the same behaviour in Chromium, and it [appears they deliberately](https://bugs.chromium.org/p/chromium/issues/detail?id=33056) block overriding certain shortcuts like Ctrl-N and Ctrl-T. I haven't found any information about Firefox doing it, but I'd guess they've gone down the same route.\n Yes, turns out you are right.\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=1291706\n","Sorry to turf you back, but I'm pretty sure this is something to do with pandas in the first instance: it's using [ctypes code](https://github.com/pydata/pandas/blob/b7abef4949fb1ba7fd1004feba4f47ace7004282/pandas/util/clipboard.py#L62) to access the Windows clipboard, and ctypes is the top suspect whenever a Python process dies without an exception.\n\nHow are you starting Jupyter? I wonder if there's some difference in the environment if it's running without a console window.\n\nPing @jreback\n to launch it I open cmd.exe, type `jupyter notebook <PathToFolder>`.\n\n(I'll let you guys decide if it's a pandas or a jupyter issue...)\n If you run this code directly in a notebook, does the kernel die? And if you split it up line by line, which line is it that makes the kernel die?\n\n``` python\nCF_UNICODETEXT = 13\nd = ctypes.windll\nd.user32.OpenClipboard(0)\nhandle = d.user32.GetClipboardData(CF_UNICODETEXT)\ndata = ctypes.c_wchar_p(handle).value\nd.user32.CloseClipboard()\n```\n\n(This is part of the code that I believe pandas is running when you call `read_clipboard()`.\n It does die, on line `data = ctypes.c_wchar_p(handle).value`\n\nIn context: https://github.com/pydata/pandas/blob/f71537ab2561ab5727008095e9685966619fa7b9/pandas/util/clipboard.py#L67\n This works fine though:\n\n```\nimport win32clipboard\nwin32clipboard.OpenClipboard()\ndata = win32clipboard.GetClipboardData(win32clipboard.CF_UNICODETEXT)\nwin32clipboard.CloseClipboard()\n```\n\nso yeah, ctypes is seems to be the problem\n Interestingly enough, I seem to run into this problem as well using the python console in PyCharm, which is using IPython 4.2.0. I will write the error manually here (after this happens I can't use the clipboard, not even for a screenshot):\n\n```\nTraceback (most recent call last):\n    File \"C:\\Users\\pbreach\\Anaconda3\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 2885, in run_code\n        exec(code_obj, self.user_global_ns, self.user_ns)\n    File\"<ipython-input-5-9912851e21a2>\", line 1, in <module>\n        pd.Series(test).to_clipboard()\n    File\"C:\\Users\\pbreach\\Anaconda3\\lib\\site-packages\\pandas\\core\\generic.py\", line 1202, in to_clipboard\n        clipboard.to_clipboard(self, excel=excel, sep=sep, **kwargs)\n    File \"C:\\Users\\pbreach\\Anaconda3\\lib\\site-packages\\pandas\\io\\clipboard.py\", line 98, in to_clipboard\n        clipboard_set(object)\n    File \"C:\\Users\\pbreach\\Anaconda3\\lib\\site-packages\\pandas\\util\\clipboard.py\", line 85, in _copyWindows\n        ctypes.cdll.msvcrt.wcspy(ctypes.c_wchar_p(pchData), text)\nOSError: exception: access violation writing 0x0000000000000000\n```\n\nSo I think @jmarrec might be right in saying that it is a ctypes problem (at least it is the one throwing the error). I often get access violation errors with ctypes if I try to overwrite a file that is open in another process. It could be that the clipboard is being used by jupyter/ipython, and when pandas tries to access it, it causes the kernel to crash due to this error happening within jupyter/ipython process. Maybe it's possible that pandas could get around this or throw an error before it gets down to ctypes? \n We do have some code to access the clipboard in IPython, but it isn't run unless you run `%paste`. I still think we're causing pandas' clipboard to hit some corner case that's exposing a bug there. 'access violation' sounds like a Windows equivalent of 'segmentation fault'.\n See Pandas documentation to use **read_clipboard** (Anaconda Package)\nIt seems pandas read_clipboard need optional dependencies which are not yet compatible with **python 3.5**. I guess that's hindrance for _**read_clipboard**_ \n\nhttp://pandas.pydata.org/pandas-docs/stable/install.html#optional-dependencies\n\n![image](https://cloud.githubusercontent.com/assets/19371042/20247366/58a93212-a9f0-11e6-8a5b-a22eb8ba036d.png)\n\nDoesn't have any issue in Python 3.4 (Anaconda Package)\n Looking at the code, I don't think it needs any of those on Windows, which is the case for this bug report. In any case, `xclip` and `xsel` are external commands, so they shouldn't depend on the Python version.\n","@Carreau Another thing: If I reload the page with devtools open, it loads a blank page and closes devtools. If I open devtools up again, it reads: \"DevTools was disconnected from the page. Once page is reloaded. DevTools will automatically reconnect.\" Is anyone else experiencing this?\n We switched to `inline-source-map` in JupyterLab because it was misbehaving: https://github.com/jupyter/jupyterlab/blob/master/jupyterlab/webpack.conf.js#L20\n @blink1073 Thanks for the quick response! I tried that but I'm still not able to breakpoint within the source files, etc. Did you need to do networking mapping or anything else within devtools? \n Here's what I had:\n\n<img width=\"303\" alt=\"screen shot 2016-08-09 at 1 17 10 pm\" src=\"https://cloud.githubusercontent.com/assets/2096628/17528139/bfdb1a58-5e33-11e6-9fbe-2f8032c541f5.png\">\n Ok I just upgraded to Chrome 52 and that fixed the devtools disconnecting on reload issue. I then [reset my devtools](http://stackoverflow.com/a/21911933/2217533) and re-mapped my network resources. I think you have to map your local resources to network resources in order to set breakpoints and debug files. \n > Ok I just upgraded to Chrome 52 and that fixed the devtools disconnecting on reload issue. I then reset my devtools and re-mapped my network resources. I think you have to map your local resources to network resources in order to set breakpoints and debug files.\n\nHum that's weird, I didn't had to map files... Happy this worked for you. maybe the disconnection is because you have a detached debugger window ? \n\nI'm reopening so that we write some of this process on the documentation at some point. \n\nThanks both for investigating !\n I should say:\n\n> I think you have to map your local resources to network resources in order to set breakpoints and debug _local_ files.\n\nPlease correct me if I'm wrong, but I don't know how else devtools would know how network files (e.g. `webpack:///./notebook/static/notebook/js/notebook.js`) map to local files (e.g. `notebook/static/notebook/js/notebook.js`).\n Ok, yes, sure; make sens. \n","@Carreau Can you test? \n > @Carreau Can you test?\n\nStarting to test review that. Sorry for the delay !\n Hum... does not seem to fix it for me... Let me make sure I have your branch...\n Ha... it work 1/2 time...\n\ni can do `Kernel A` -> `Broken Kernel` -> `Kernel B` successfully, but not `Kernel A` -> `Broken Kernel` -> `Kernel A`. \n Ok, that's because this logic is faulty as well: \n\nhttps://github.com/jupyter/notebook/blob/fd03c87f431372fc5de459ecbba00fa3f5c15765/notebook/static/notebook/js/notebook.js#L258-L260\n\nif the kernel is broken `that.session.kernel` still point to the **old** kernel, so it does nothing and does not start a new session... \n @Carreau Good catch! Can you pull and test again?\n Whooo ! Thanks !\n","Seeing the signature is triggered by hitting shift-tab. This is the same in Jupyter and IPython, since Jupyter is just a renaming of the project.\n Shift tab has been here since 1.0, and tab was deprecated back then as it conflicts with other functionality. You'll need to remap you habits. \n @startakovsky didn't say he used tab.  He said the signature popped up automatically.  I thought I remember that too, and I thought it was extremely cool.\n > He said the signature popped up automatically. I thought I remember that too, and I thought it was extremely cool.\n\nIt was cool!\n\nThe old tab functionality was my preference too, but I wasn't present for that discussion (or don't remember it).\n\n1.0:\n\n![screenshot 2015-06-23 12 46 57](https://cloud.githubusercontent.com/assets/836375/8313031/da20d9a8-19a5-11e5-8728-23add89e247c.png)\n\nHitting tab on the current 3.x series:\n\n![screenshot 2015-06-23 12 47 36](https://cloud.githubusercontent.com/assets/836375/8313042/e62548a6-19a5-11e5-89b5-b2fdcb020e9d.png)\n\nMuscle memory is hard and I find myself doing this as well.\n Will is going to be working on this stuff during the summer and I think we\ndo want to address some of these UI/UX issues. I would prefer to have a\nsingle UI that does everything well, rather than two partial UIs as we have\nnow.\n\nOn Tue, Jun 23, 2015 at 10:47 AM, Kyle Kelley notifications@github.com\nwrote:\n\n> He said the signature popped up automatically. I thought I remember that\n> too, and I thought it was extremely cool.\n> \n> It was cool!\n> \n> The old tab functionality was my preference too, but I wasn't present for\n> that discussion (or don't remember it).\n> \n> 1.0:\n> \n> [image: screenshot 2015-06-23 12 46 57]\n> https://cloud.githubusercontent.com/assets/836375/8313031/da20d9a8-19a5-11e5-8728-23add89e247c.png\n> \n> Hitting tab on the current 3.x series:\n> \n> [image: screenshot 2015-06-23 12 47 36]\n> https://cloud.githubusercontent.com/assets/836375/8313042/e62548a6-19a5-11e5-89b5-b2fdcb020e9d.png\n> \n> Muscle memory is hard and I find myself doing this as well.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/167#issuecomment-114587195.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Sorry for being imprecise in response. `(` and `tab` where deprecated. \n\n@startakovsky sorry this response is long, nothing against you, just historical explanation that I'm tired in repeting in many places, so here it will be.\n\nThe behavior of tab was inconsistent and difficult to understand in many case. \n- `(` after 3sec  not doing anything would trigger tooltip. \n  - which was inconsistent for haskell and other language.\n  - confusing user wondering what they were doing. \n  - wondering why it wouldn't work sometimes (kernel busy)\n- tooltip on tab after `(` in some unambiguous cases.\n  - Sometime leading to completion.\n  - nothing sometimes if kernel busy, even worse would indent. \n  - make user that actually complete on user_ns be pissed of\n- complete on `([space]<tab>`.\n  - sometimes\n  - kernel busy problem again.\n- Add kwarg, comma, space into the mix. \n  - Coma -> tooltip,\n  - Comma space -> complete.\n  - what if arg or kwarg subexpr?\n  - what if several open parens ?\n- Add regex into the mix. \n- Add other kernels into the mix. (so want to config regex,)\n- People that want to completer/tooltip on \n  - space \n  - dollars\n  - dot\n  - backspace\n  - not 3000 ms, but 2250, and only i when not looking at code and actually want tooltip cause it hides code. \n- Should you dismiss the same if auto-popped on `(` than if user press tab/shift tab explicitly ?\n\n(shake the thing and optimize) \n\nShift tab was since long before 1.0 bound to the Always do tooltip, and was alway the way to do it. Despite people saying otherwise on the internet (even our own tuto). It was the obvious non-ambiguous choice that simplified the code and the question about what tab does (@fperez said \"we've weaponized the tab key\"). The problem on that is there is no simple answer to `how do I complete`, `how do i get tooltip` and `what does tab do`.\nHence Tab was : \n- made optional default true\n- made optional default false\n- removed.\n\nThe last 2 might have been in same release cycle. Not sure anymore for `(<wait>`\n\n> Will is going to be working on this stuff during the summer and I think we\n> do want to address some of these UI/UX issues. I would prefer to have a\n> single UI that does everything well, rather than two partial UIs as we have\n> now.\n\nI did propose a tooltippleter, and proposed that the message spec be changed for completion/inspection request to be merged in ; plus a UI type:\n\n```\n  completion 1 | This is the help for the current selection (arrow)\n  completion 2 | on the left of this text, it is the great \n> completion 3 | unified tooltipleter. It is particularly \n  completion 4 | useful for julia as methods have same name\n  completion 5 | multiple dispatch and not same docstring\n  completion 6 | \n```\n\nFor which I was welcome with roughly what **I** (emphased I, don't render great on gh) remember as : We don't see the point, it is useless, the completer completes and tooltips tooltips. These are not the same actions it is perfectly natural to have 2 shortcuts.\n\nSo, sorry if it was better before, sorry if we don't communicate enough, sorry if people don't read [release notes](http://ipython.org/ipython-doc/2/whatsnew/version2.0.html#other-changes), sorry if I can seem annoyed, but I answered this question around 5 times in the last 2 weeks in 4 differents way of communication with people asking the same question on 3 different channel without acknowledging responses, or ignoring responses and reasking somewhere else.\n\nThis is (as we discussed in meeting) reason why gitter and RT chat should be banned from first help channel in which we asked to go (not you @startakovsky) so that they could get information like that in a way that can be googled, and editted. (which is 1 point for not ML first) \n\nPlease feel free to link to this explanation, edit, add links, tags or anything that make it easier to find. \n\nThanks for reading. \n @Carreau Thank you so much for your response. I hear your frustration, you are doing great & please please please keep up the good work.  Thank you!\n","@takluyver I'd be happy to look into this. A couple questions:\n- Where are mime types defined in this repo?\n- Where are handlers for mime types defined?\n This file should be the most relevant one: https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/js/outputarea.js\n Thanks @takluyver! Here is an initial implementation https://github.com/jupyter/notebook/pull/1672.\n Merged with https://github.com/jupyter/notebook/pull/1672\n","See https://github.com/ipython/ipywidgets/pull/712\n","@takluyver This adds support for \"application/mathml+xml\" and provides a `append_mathml` function that mirrors `append_latex` functionality. \n\n@poke1024 @rgbkrk @minrk Do you have any idea how to test this? Are there any kernels that output this mime type?\n This is the chicken and egg problem for the project, which is that kernels won't implement/experiment with mimetypes that the notebook doesn't implement (let alone other frontends), while demand for new mimetypes in the notebook has to come from library authors and kernel developers knowing they \"need\" those mimetypes. Great to see this initial implementation!\n > This is the chicken and egg problem for the project, which is that kernels won't implement/experiment with mimetypes that the notebook doesn't implement (let alone other frontends), while demand for new mimetypes in the notebook has to come from library authors and kernel developers knowing they \"need\" those mimetypes. Great to see this initial implementation!\n\n@rgbkrk Theoretically, could I add a MathML [formatter](https://github.com/ipython/ipython/blob/bf3b45fbc38e224703b18a53d18ff03e4279d296/IPython/core/formatters.py) to ipython to test? The question then is: how does the kernel map outputs to mime types (e.g. how will ipython know that the output is \"application/mathml+xml\" type)? Is that what [display.py](https://github.com/ipython/ipython/blob/8185987f6af796024c3eac3cc36c5a5162c889fa/IPython/core/display.py) is for?\n Yes, we should add a corresponding `MathMLFormatter` in IPython, which would recognise a special method like `_repr_mathml_`. The formatters themselves store the mimetypes of the output they produce, as a `format_type` attribute.\n That looks sensible to me, but I hope that someone more familiar with our JS code will have a look at it too.\n Looks good to me relative to how other mime types are implemented.\n Something good to follow up here with: it would be good to use constants (locally scoped shared variables in JS) for \"application/mathml+xml\".\n @rgbkrk Are you suggesting that we use constants for all references to mime types in `outputarea.js`? I think this is a good idea...\n @gnestor yup!\n > Something good to follow up here with: it would be good to use constants (locally scoped shared variables in JS) for \"application/mathml+xml\".\n\n@rgbkrk See https://github.com/jupyter/notebook/pull/1678\n","oops, other changes got in here\n","http://nbviewer.jupyter.org/github/netroby/jupyter-notebook/blob/master/How%20to%20write%20python.ipynb\n The Error log\n\n```\n500 : Internal Server Error\nThe error was:\nnbconvert failed: PDF creating failed, captured latex output:\nThis is pdfTeX, Version 3.14159265-2.6-1.40.15 (TeX Live 2015/dev/Debian) (preloaded format=pdflatex)\n restricted \\write18 enabled.\nentering extended mode\n(./notebook.tex\nLaTeX2e <2014/05/01>\nBabel <3.9l> and hyphenation patterns for 2 languages loaded.\n(/usr/share/texlive/texmf-dist/tex/latex/base/article.cls\nDocument Class: article 2014/09/29 v1.4h Standard LaTeX document class\n(/usr/share/texlive/texmf-dist/tex/latex/base/size11.clo))\n(/usr/share/texlive/texmf-dist/tex/latex/base/fontenc.sty\n(/usr/share/texlive/texmf-dist/tex/latex/base/t1enc.def))\n(/usr/share/texlive/texmf-dist/tex/latex/psnfss/palatino.sty)\n(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphicx.sty\n(/usr/share/texlive/texmf-dist/tex/latex/graphics/keyval.sty)\n(/usr/share/texlive/texmf-dist/tex/latex/graphics/graphics.sty\n(/usr/share/texlive/texmf-dist/tex/latex/graphics/trig.sty)\n(/usr/share/texlive/texmf-dist/tex/latex/latexconfig/graphics.cfg)\n(/usr/share/texlive/texmf-dist/tex/latex/pdftex-def/pdftex.def\n(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/infwarerr.sty)\n(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/ltxcmds.sty))))\n(/usr/share/texlive/texmf-dist/tex/latex/caption/caption.sty\n(/usr/share/texlive/texmf-dist/tex/latex/caption/caption3.sty))\n(/usr/share/texlive/texmf-dist/tex/latex/adjustbox/adjustbox.sty\n(/usr/share/texlive/texmf-dist/tex/latex/xkeyval/xkeyval.sty\n(/usr/share/texlive/texmf-dist/tex/generic/xkeyval/xkeyval.tex\n(/usr/share/texlive/texmf-dist/tex/generic/xkeyval/xkvutils.tex)))\n(/usr/share/texlive/texmf-dist/tex/latex/adjustbox/adjcalc.sty)\n(/usr/share/texlive/texmf-dist/tex/latex/adjustbox/trimclip.sty\n(/usr/share/texlive/texmf-dist/tex/latex/collectbox/collectbox.sty)\n(/usr/share/texlive/texmf-dist/tex/latex/adjustbox/tc-pdftex.def))\n(/usr/share/texlive/texmf-dist/tex/latex/ifoddpage/ifoddpage.sty)\n(/usr/share/texlive/texmf-dist/tex/latex/varwidth/varwidth.sty))\n(/usr/share/texlive/texmf-dist/tex/latex/xcolor/xcolor.sty\n(/usr/share/texlive/texmf-dist/tex/latex/latexconfig/color.cfg))\n(/usr/share/texlive/texmf-dist/tex/latex/tools/enumerate.sty)\n(/usr/share/texlive/texmf-dist/tex/latex/geometry/geometry.sty\n(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/ifpdf.sty)\n(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/ifvtex.sty)\n(/usr/share/texlive/texmf-dist/tex/generic/ifxetex/ifxetex.sty))\n(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsmath.sty\nFor additional information on amsmath, use the `?' option.\n(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amstext.sty\n(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsgen.sty))\n(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsbsy.sty)\n(/usr/share/texlive/texmf-dist/tex/latex/amsmath/amsopn.sty))\n(/usr/share/texlive/texmf-dist/tex/latex/amsfonts/amssymb.sty\n(/usr/share/texlive/texmf-dist/tex/latex/amsfonts/amsfonts.sty))\n(/usr/share/texlive/texmf-dist/tex/latex/base/textcomp.sty\n(/usr/share/texlive/texmf-dist/tex/latex/base/ts1enc.def))\n(/usr/share/texlive/texmf-dist/tex/latex/upquote/upquote.sty)\n(/usr/share/texlive/texmf-dist/tex/latex/eurosym/eurosym.sty)\n(/usr/share/texlive/texmf-dist/tex/latex/ucs/ucs.sty\n(/usr/share/texlive/texmf-dist/tex/latex/ucs/data/uni-global.def))\n(/usr/share/texlive/texmf-dist/tex/latex/base/inputenc.sty\n(/usr/share/texlive/texmf-dist/tex/latex/ucs/utf8x.def))\n(/usr/share/texlive/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty\nStyle option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix \n<2008/02/07> (tvz))\n(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/grffile.sty\n(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/kvoptions.sty\n(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/kvsetkeys.sty\n(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/etexcmds.sty\n(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/ifluatex.sty))))\n(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty))\n(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hyperref.sty\n(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty\n(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/hobsub-generic.sty))\n(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/auxhook.sty)\n(/usr/share/texlive/texmf-dist/tex/latex/hyperref/pd1enc.def)\n(/usr/share/texlive/texmf-dist/tex/latex/latexconfig/hyperref.cfg)\n(/usr/share/texlive/texmf-dist/tex/latex/url/url.sty))\n\nPackage hyperref Message: Driver (autodetected): hpdftex.\n\n(/usr/share/texlive/texmf-dist/tex/latex/hyperref/hpdftex.def\n(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/rerunfilecheck.sty))\n(/usr/share/texlive/texmf-dist/tex/latex/tools/longtable.sty)\n(/usr/share/texlive/texmf-dist/tex/latex/booktabs/booktabs.sty)\n(/usr/share/texlive/texmf-dist/tex/generic/ulem/ulem.sty)\nNo file notebook.aux.\n(/usr/share/texlive/texmf-dist/tex/latex/base/ts1cmr.fd)\n(/usr/share/texlive/texmf-dist/tex/latex/psnfss/t1ppl.fd)\n(/usr/share/texlive/texmf-dist/tex/context/base/supp-pdf.mkii\n[Loading MPS to PDF converter (version 2006.09.02).]\n) (/usr/share/texlive/texmf-dist/tex/latex/oberdiek/epstopdf-base.sty\n(/usr/share/texlive/texmf-dist/tex/latex/oberdiek/grfext.sty)\n(/usr/share/texlive/texmf-dist/tex/latex/latexconfig/epstopdf-sys.cfg))\n(/usr/share/texlive/texmf-dist/tex/latex/caption/ltcaption.sty)\n*geometry* driver: auto-detecting\n*geometry* detected driver: pdftex\n*geometry* verbose mode - [ preamble ] result:\n* driver: pdftex\n* paper: <default>\n* layout: <same size as paper>\n* layoutoffset:(h,v)=(0.0pt,0.0pt)\n* modes: \n* h-part:(L,W,R)=(72.26999pt, 469.75502pt, 72.26999pt)\n* v-part:(T,H,B)=(72.26999pt, 650.43001pt, 72.26999pt)\n* \\paperwidth=614.295pt\n* \\paperheight=794.96999pt\n* \\textwidth=469.75502pt\n* \\textheight=650.43001pt\n* \\oddsidemargin=0.0pt\n* \\evensidemargin=0.0pt\n* \\topmargin=-37.0pt\n* \\headheight=12.0pt\n* \\headsep=25.0pt\n* \\topskip=11.0pt\n* \\footskip=30.0pt\n* \\marginparwidth=59.0pt\n* \\marginparsep=10.0pt\n* \\columnsep=10.0pt\n* \\skip\\footins=10.0pt plus 4.0pt minus 2.0pt\n* \\hoffset=0.0pt\n* \\voffset=0.0pt\n* \\mag=1000\n* \\@twocolumnfalse\n* \\@twosidefalse\n* \\@mparswitchfalse\n* \\@reversemarginfalse\n* (1in=72.27pt=25.4mm, 1cm=28.453pt)\n\n(/usr/share/texlive/texmf-dist/tex/latex/ucs/ucsencs.def)\n(/usr/share/texlive/texmf-dist/tex/latex/hyperref/nameref.sty\n(/usr/share/texlive/texmf-dist/tex/generic/oberdiek/gettitlestring.sty))\n(/usr/share/texlive/texmf-dist/tex/latex/amsfonts/umsa.fd)\n(/usr/share/texlive/texmf-dist/tex/latex/amsfonts/umsb.fd)\n\nLaTeX Warning: No \\author given.\n\n(/usr/share/texlive/texmf-dist/tex/latex/ucs/data/uni-79.def)\n(/usr/share/texlive/texmf-dist/tex/latex/ucs/data/uninames.dat)\n(/usr/share/texlive/texmf-dist/tex/latex/ucs/data/uni-79.def)\n\n! Package ucs Error: Unknown Unicode character 20320 = U+4F60,\n(ucs)                possibly declared in uni-79.def.\n(ucs)                Type H to see if it is available with options.\n\nSee the ucs package documentation for explanation.\nType  H <return>  for immediate help.\n ...                                              \n\nl.284 \u4f60\n         \u4eec\u8fd9\u4e9b\u78e8\u4eba\u7684\u5c0f\u5996\u7cbe\u554a\uff0e\u975e\u8981\u8001\u592b\u5f04\u4ec0\u4e48\u4e2d\u6587\uff0c\u5f04\ufffd...\n\n? \n! Emergency stop.\n ...                                              \n\nl.284 \u4f60\n         \u4eec\u8fd9\u4e9b\u78e8\u4eba\u7684\u5c0f\u5996\u7cbe\u554a\uff0e\u975e\u8981\u8001\u592b\u5f04\u4ec0\u4e48\u4e2d\u6587\uff0c\u5f04\ufffd...\n\n!  ==> Fatal error occurred, no output PDF file produced!\nTranscript written on notebook.log.\n```\n If you have time, can you try installing [nbconvert](https://github.com/jupyter/nbconvert) from master? We've switched from pdflatex to xelatex, which is supposed to handle unicode better.\n Sorry  i do not know how to install from master branch\n If you have git:\n\n```\ngit clone https://github.com/jupyter/nbconvert.git\ncd nbconvert\npip install -e .\n```\n\nOr shorter:\n\n```\npip install git+https://github.com/jupyter/nbconvert.git\n```\n @takluyver I'm trying to test this but I'm getting the following error: `nbconvert failed: pdflatex not found on PATH`. I saw a couple similar issues on nbconvert, etc. I assume pdflatex needs to be installed (e.g. via Homebrew) in order to use \"Download as PDF\"? Same with xelatex? If so, the nbconvert docs need to reflect this.\n Yes, conversion to PDF requires Latex, and yes, we ought to make that clear in the docs.\n Related https://github.com/jupyter/nbconvert/issues/281 https://github.com/jupyter/nbconvert/issues/243\n Also, I would not recommend installing pdflatex with homebrew. If possible\nplease install using https://tug.org/mactex/ ; it will make sure that all\nof the necessary packages are present.\n\nI'm not sure if there's an easy way to use mactex from the command line.\nI'm sure it's possible, if needed I'll look into it.\n\nOn Wed, Sep 14, 2016 at 8:34 AM, Grant Nestor notifications@github.com\nwrote:\n\n> Related jupyter/nbconvert#281\n> https://github.com/jupyter/nbconvert/issues/281\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1674#issuecomment-247054039,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/ACXg6MtHFgE56s_53yr5iv2B_NmEOr5xks5qqBQMgaJpZM4Ji1J6\n> .\n @michaelpacer Ya I discovered that TeX binaries are shipped OS X but not included in the PATH in OS X El Capitan (https://github.com/jupyter/nbconvert/issues/406#issue-176941534), so adding the path to the binaries to the PATH fixes the `nbconvert failed: pdflatex not found on PATH` issue. I'm running into a new issue: \n\n```\nnbconvert failed: PDF creating failed, captured latex output:\nThis is pdfTeX, Version 3.14159265-2.6-1.40.17 (TeX Live 2016) (preloaded format=pdflatex)\n restricted \\write18 enabled.\nentering extended mode\n(./notebook.tex\nLaTeX2e <2016/03/31>\nBabel <3.9r> and hyphenation patterns for 22 language(s) loaded.\n(/usr/local/texlive/2016basic/texmf-dist/tex/latex/base/article.cls\nDocument Class: article 2014/09/29 v1.4h Standard LaTeX document class\n(/usr/local/texlive/2016basic/texmf-dist/tex/latex/base/size11.clo))\n(/usr/local/texlive/2016basic/texmf-dist/tex/latex/base/fontenc.sty\n(/usr/local/texlive/2016basic/texmf-dist/tex/latex/base/t1enc.def))\n(/usr/local/texlive/2016basic/texmf-dist/tex/latex/psnfss/palatino.sty)\n(/usr/local/texlive/2016basic/texmf-dist/tex/latex/graphics/graphicx.sty\n(/usr/local/texlive/2016basic/texmf-dist/tex/latex/graphics/keyval.sty)\n(/usr/local/texlive/2016basic/texmf-dist/tex/latex/graphics/graphics.sty\n(/usr/local/texlive/2016basic/texmf-dist/tex/latex/graphics/trig.sty)\n(/usr/local/texlive/2016basic/texmf-dist/tex/latex/graphics-cfg/graphics.cfg)\n(/usr/local/texlive/2016basic/texmf-dist/tex/latex/pdftex-def/pdftex.def\n(/usr/local/texlive/2016basic/texmf-dist/tex/generic/oberdiek/infwarerr.sty)\n(/usr/local/texlive/2016basic/texmf-dist/tex/generic/oberdiek/ltxcmds.sty))))\n(/usr/local/texlive/2016basic/texmf-dist/tex/latex/caption/caption.sty\n(/usr/local/texlive/2016basic/texmf-dist/tex/latex/caption/caption3.sty))\n\n! LaTeX Error: File `adjustbox.sty' not found.\n\nType X to quit or <RETURN> to proceed,\nor enter new name. (Default extension: sty)\n\nEnter file name: \n! Emergency stop.\n<read *> \n\nl.42     \\usepackage\n                    {xcolor} % Allow colors to be defined^^M\n!  ==> Fatal error occurred, no output PDF file produced!\nTranscript written on notebook.log.\n```\n Did you install pdflatex/xelatex via homebrew? I really don't recommend installing them separately from the entire macTeX package. \n\nThat isn't something that ships with OS X, it's a completely separate package that installs basically everything you need for a modern TeX installation (including many of the packages on CTAN). \n\nIf you build your LaTeX system from scratch using macTeX (which you might be able to get from CTAN, I now see: https://www.ctan.org/pkg/mactex) I'd recommend trying that rather than debugging some stuff done by brew. \n @netroby Did installing from master work for you?\n @gnestor So i also found this issue related to `adjust_box.sty`, I'm not sure if it's related to your issue, but I figured it'd help to put it on your radar. https://github.com/jupyter/nbconvert/issues/357\n @michaelpacer Before installing anything, I received the `nbconvert failed: pdflatex not found on PATH` error. After installing [basictex](https://tug.org/mactex/morepackages.html), I received the `File 'adjustbox.sty' not found` error. After upgrading to regular [mactex](https://tug.org/mactex/mactex-download.html), I was able to download a notebook as PDF. \n\n@netroby I tried opening your example notebook and downloading as PDF and I received the same error:\n\n```\nnbconvert failed: PDF creating failed, captured latex output:\nThis is pdfTeX, Version 3.14159265-2.6-1.40.17 (TeX Live 2016) (preloaded format=pdflatex)\n restricted \\write18 enabled.\nentering extended mode\n(./notebook.tex\nLaTeX2e <2016/03/31>\nBabel <3.9r> and hyphenation patterns for 83 language(s) loaded.\n(/usr/local/texlive/2016/texmf-dist/tex/latex/base/article.cls\nDocument Class: article 2014/09/29 v1.4h Standard LaTeX document class\n(/usr/local/texlive/2016/texmf-dist/tex/latex/base/size11.clo))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/base/fontenc.sty\n(/usr/local/texlive/2016/texmf-dist/tex/latex/base/t1enc.def))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/psnfss/palatino.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/graphics/graphicx.sty\n(/usr/local/texlive/2016/texmf-dist/tex/latex/graphics/keyval.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/graphics/graphics.sty\n(/usr/local/texlive/2016/texmf-dist/tex/latex/graphics/trig.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/graphics-cfg/graphics.cfg)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/pdftex-def/pdftex.def\n(/usr/local/texlive/2016/texmf-dist/tex/generic/oberdiek/infwarerr.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/generic/oberdiek/ltxcmds.sty))))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/caption/caption.sty\n(/usr/local/texlive/2016/texmf-dist/tex/latex/caption/caption3.sty))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/adjustbox/adjustbox.sty\n(/usr/local/texlive/2016/texmf-dist/tex/latex/xkeyval/xkeyval.sty\n(/usr/local/texlive/2016/texmf-dist/tex/generic/xkeyval/xkeyval.tex\n(/usr/local/texlive/2016/texmf-dist/tex/generic/xkeyval/xkvutils.tex)))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/adjustbox/adjcalc.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/adjustbox/trimclip.sty\n(/usr/local/texlive/2016/texmf-dist/tex/latex/collectbox/collectbox.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/adjustbox/tc-pdftex.def))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/ifoddpage/ifoddpage.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/varwidth/varwidth.sty))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/xcolor/xcolor.sty\n(/usr/local/texlive/2016/texmf-dist/tex/latex/graphics-cfg/color.cfg))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/tools/enumerate.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/geometry/geometry.sty\n(/usr/local/texlive/2016/texmf-dist/tex/generic/oberdiek/ifpdf.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/generic/oberdiek/ifvtex.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/generic/ifxetex/ifxetex.sty))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/amsmath/amsmath.sty\nFor additional information on amsmath, use the `?' option.\n(/usr/local/texlive/2016/texmf-dist/tex/latex/amsmath/amstext.sty\n(/usr/local/texlive/2016/texmf-dist/tex/latex/amsmath/amsgen.sty))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/amsmath/amsbsy.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/amsmath/amsopn.sty))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/amsfonts/amssymb.sty\n(/usr/local/texlive/2016/texmf-dist/tex/latex/amsfonts/amsfonts.sty))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/base/textcomp.sty\n(/usr/local/texlive/2016/texmf-dist/tex/latex/base/ts1enc.def))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/upquote/upquote.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/eurosym/eurosym.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/ucs/ucs.sty\n(/usr/local/texlive/2016/texmf-dist/tex/latex/ucs/data/uni-global.def))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/base/inputenc.sty\n(/usr/local/texlive/2016/texmf-dist/tex/latex/ucs/utf8x.def))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty\nStyle option: `fancyvrb' v2.7a, with DG/SPQR fixes, and firstline=lastline fix \n<2008/02/07> (tvz))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/oberdiek/grffile.sty\n(/usr/local/texlive/2016/texmf-dist/tex/latex/oberdiek/kvoptions.sty\n(/usr/local/texlive/2016/texmf-dist/tex/generic/oberdiek/kvsetkeys.sty\n(/usr/local/texlive/2016/texmf-dist/tex/generic/oberdiek/etexcmds.sty\n(/usr/local/texlive/2016/texmf-dist/tex/generic/oberdiek/ifluatex.sty))))\n(/usr/local/texlive/2016/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/hyperref/hyperref.sty\n(/usr/local/texlive/2016/texmf-dist/tex/generic/oberdiek/hobsub-hyperref.sty\n(/usr/local/texlive/2016/texmf-dist/tex/generic/oberdiek/hobsub-generic.sty))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/oberdiek/auxhook.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/hyperref/pd1enc.def)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/latexconfig/hyperref.cfg)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/url/url.sty))\n\nPackage hyperref Message: Driver (autodetected): hpdftex.\n\n(/usr/local/texlive/2016/texmf-dist/tex/latex/hyperref/hpdftex.def\n(/usr/local/texlive/2016/texmf-dist/tex/latex/oberdiek/rerunfilecheck.sty))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/tools/longtable.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/booktabs/booktabs.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/generic/ulem/ulem.sty)\nNo file notebook.aux.\n(/usr/local/texlive/2016/texmf-dist/tex/latex/base/ts1cmr.fd)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/psnfss/t1ppl.fd)\n(/usr/local/texlive/2016/texmf-dist/tex/context/base/mkii/supp-pdf.mkii\n[Loading MPS to PDF converter (version 2006.09.02).]\n) (/usr/local/texlive/2016/texmf-dist/tex/latex/oberdiek/epstopdf-base.sty\n(/usr/local/texlive/2016/texmf-dist/tex/latex/oberdiek/grfext.sty)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/latexconfig/epstopdf-sys.cfg))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/caption/ltcaption.sty)\n*geometry* driver: auto-detecting\n*geometry* detected driver: pdftex\n*geometry* verbose mode - [ preamble ] result:\n* driver: pdftex\n* paper: <default>\n* layout: <same size as paper>\n* layoutoffset:(h,v)=(0.0pt,0.0pt)\n* modes: \n* h-part:(L,W,R)=(72.26999pt, 469.75502pt, 72.26999pt)\n* v-part:(T,H,B)=(72.26999pt, 650.43001pt, 72.26999pt)\n* \\paperwidth=614.295pt\n* \\paperheight=794.96999pt\n* \\textwidth=469.75502pt\n* \\textheight=650.43001pt\n* \\oddsidemargin=0.0pt\n* \\evensidemargin=0.0pt\n* \\topmargin=-37.0pt\n* \\headheight=12.0pt\n* \\headsep=25.0pt\n* \\topskip=11.0pt\n* \\footskip=30.0pt\n* \\marginparwidth=59.0pt\n* \\marginparsep=10.0pt\n* \\columnsep=10.0pt\n* \\skip\\footins=10.0pt plus 4.0pt minus 2.0pt\n* \\hoffset=0.0pt\n* \\voffset=0.0pt\n* \\mag=1000\n* \\@twocolumnfalse\n* \\@twosidefalse\n* \\@mparswitchfalse\n* \\@reversemarginfalse\n* (1in=72.27pt=25.4mm, 1cm=28.453pt)\n\n(/usr/local/texlive/2016/texmf-dist/tex/latex/ucs/ucsencs.def)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/hyperref/nameref.sty\n(/usr/local/texlive/2016/texmf-dist/tex/generic/oberdiek/gettitlestring.sty))\n(/usr/local/texlive/2016/texmf-dist/tex/latex/amsfonts/umsa.fd)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/amsfonts/umsb.fd)\n\nLaTeX Warning: No \\author given.\n\n(/usr/local/texlive/2016/texmf-dist/tex/latex/ucs/data/uni-79.def)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/ucs/data/uninames.dat)\n(/usr/local/texlive/2016/texmf-dist/tex/latex/ucs/data/uni-79.def)\n\n! Package ucs Error: Unknown Unicode character 20320 = U+4F60,\n(ucs)                possibly declared in uni-79.def.\n(ucs)                Type H to see if it is available with options.\n\nSee the ucs package documentation for explanation.\nType  H <return>  for immediate help.\n ...                                              \n\nl.284 \u4f60\n         \u4eec\u8fd9\u4e9b\u78e8\u4eba\u7684\u5c0f\u5996\u7cbe\u554a\uff0e\u975e\u8981\u8001\u592b\u5f04\u4ec0\u4e48\u4e2d\u6587\uff0c\u5f04\ufffd...\n\n? \n! Emergency stop.\n ...                                              \n\nl.284 \u4f60\n         \u4eec\u8fd9\u4e9b\u78e8\u4eba\u7684\u5c0f\u5996\u7cbe\u554a\uff0e\u975e\u8981\u8001\u592b\u5f04\u4ec0\u4e48\u4e2d\u6587\uff0c\u5f04\ufffd...\n\n!  ==> Fatal error occurred, no output PDF file produced!\nTranscript written on notebook.log.\n```\n\nI am running master version of notebook and master version of nbconvert (which is supposed to be using xelatex but based on these logs it's still using pdflatex).\n @gnestor I'm pretty sure that invoking XeLaTeX can sometimes involve a call to pdfLaTeX if Latexmk is involved\u2026\n\nHowever, that should definitely not be running pdfTeX\u2026which suggests that something is wrong. I'm going to dive into the nbconvert code to see what's up.\n Ok\u2026\n\nWhen you use `nbconvert --to pdf` it errs and seems to be using `pdflatex` not `xelatex` even on the current master. I can't figure out why it's still calling pdflatex. But, that is the source of the error. \n\nSo it looks like when you use the notebook's download as pdf function it invokes everything correctly. It produces a pdf without error. But that doesn't produce any chinese characters in the output (but I think that's a font related issue, more on that later). This should just mirror the nbconvert function, so I have no idea why it wouldn't have the same error.\n\nAnd, if you convert to LaTeX `nbconvert --to latex` and then manually run xelatex, you get no errors, but the final pdf still doesn't have Chinese characters. I think we don't provide a font with better support for unicode points reserved for CJK values.  I don't know whether one is shipped with the MacTeX package\u2026I just think we might need to declare it explicitly as an option using the `\\setCJKmainfont{}` and `\\setCJKfallbackfamilyfont{}`\u2026which means that we might need to identify a default CJK font that we make sure people have. \n\nThe problem is you can only declare those things in the preamble which is the part of the LaTeX document that we don't give people access to as far as I can tell in nbconvert. I'll open an issue there, because really this should be an issue there.\n Ok. there are some fonts included in MacTeX\u2026good so we're set. I'm going to make a PR that adds the relevant commands to the preamble. It may not be the prettiest CJK font, but it's better than having nothing.\n\nAlso, once I made these changes, I stopped having issues with --to pdf trying to use pdfTeX and the download as PDF command even worked in the browser. I think this may be because `\\usepackage{xeCJK}` is specific to XeLaTeX, so if it were to try to call pdfLaTeX that will break that call and it may fall back to XeLaTeX. This isn't a clean way of solving why sometimes pdfTeX would be used as the actual typesetting engine\u2026but I can't figure out why that was happening at all. \n @michaelpacer Nice work! I will test as well...\n I tested and @michaelpacer's PR resolves this issue!\n","+1 to do that !\n It looks like all the checks failed! \ud83d\ude2e @Carreau Can you tell why?\n I'll have a look. \n\nSorry 'm usually more responsive, but I had a lot of things that coulnd't that took priority.\n\nIt seem to be 3 of [these lines](https://github.com/jupyter/notebook/blob/master/setupbase.py#L124-L130) that try to ensure at install time that the `.maps` files are built.\n https://github.com/gnestor/notebook/pull/1 shoudl fix the build. \n @Carreau To make sure I understand: The checks were failing because I switched from `source-map` to `inline-source-map`? \n Yes, building the python package was failing to include the map files that\nwhere explicitely included.\n\nIt's not obvious from the log, as there is this weird combination of python\ncalling npm.\n\nThe error messages are probably due to some extra-cleverness from\nsetuptools of trying to figure out what went wrong in previous command.\n\nOn Aug 15, 2016 15:54, \"Grant Nestor\" notifications@github.com wrote:\n\n> @Carreau https://github.com/Carreau To make sure I understand: The\n> checks were failing because I switched from source-map to\n> inline-source-map?\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/pull/1675#issuecomment-239953476,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AAUez6UUf-1eXFSxkrQZsgSBS4zXhAczks5qgO4NgaJpZM4JjbPw\n> .\n \"Checks have passed!\"\n > \"Checks have passed!\"\n\nAka: Travis is Happy.\n\n@minrk , this inline the maps if we release it,  and make the files bigger, do you know of anyone that would be strongly affected on the hub side by these changes and would complain ?\n @Carreau @minrk If inline maps prove to be an optimization issue in production, we can conditionally set the `sourcemap` config based on the `NODE_ENV` (e.g. `inline-source-map` for `development` and `source-map` for `production`). However, this may over-complicate things for `setupbase.py` and Travis.\n :shipit: \n @Carreau I wouldn't expect any complaints about the size due to including maps.\n","Added line number config persistence thanks to @Carreau and https://github.com/jupyter/notebook/pull/1423/commits/c04046430d2b10923ae3d08d367b629351283f1d\n @Carreau I think this is ready to merge if you would like to have the honors...\n Wonderful.\n Merged!\n","@poke1024 @takluyver @rgbkrk A couple questions:\n- Are `...` delimiters for AsciiMath standard?\n- Do we want to support [Experimental mml3](http://docs.mathjax.org/en/latest/mathml.html#experimental-mml3-extension)?\n- Do we want to support [semantic and annotations](http://docs.mathjax.org/en/latest/mathml.html#semantics-and-annotations)?\n- What version of notebook/nbviewer is Github running? How often to they update? Will this prove problematic for users if these features are enabled in their local environment but not elsewhere like Github?\n > What version of notebook/nbviewer is Github running? How often to they update?\n\nI don't know what version of nbconvert GitHub is using, but they seem to update extremely rarely, if ever, and have not been responsive in particular to longstanding math rendering errors in the version they still have deployed.\n\n> Will this prove problematic for users if these features are enabled in their local environment but not elsewhere like Github?\n\nYes, likely. We can propagate it to nbconvert easily enough, so it can land on nbviewer probably before we release it in the stable version of the live notebook.\n\n> Are ... delimiters for AsciiMath standard?\n\nI'm not sure what's standard in AsciiMath, but what's the impetus for supporting asciimath here? The `$` delimiters we started with for mathjax have proven pretty troublesome, since any delimiter type thing is a defacto extension of markdown, which gets hairy when it starts interacting with the markdown rendering, and further loosens the definition of what markdown we actually support (since it's no longer markdown once there is math).\n Yeah I'd like to let the MathML play out before doing Ascii Math. I haven't seen much use of it and it seems like development has slowed down. I'd want to wait on extensions to commonmark for further mathiness.\n Ok removed AsciiMath support. Is there any issue with supporting Content MathML?\n Nah, I think this looks good. You'll want to rebase with master now that I merged your constants PR.\n Getting rid of AsciiMath is fine. Changes look good to me.\n I'm having a hard time rebasing this branch and given that the only outstanding change left is Content MathML support, I am closing this PR and submitting a new one: https://github.com/jupyter/notebook/pull/1685\n","Out of interest, what is the advantage of this?\n Based on my understanding, using constants this way a) centralizes information (in this case, the mime type strings) and b) can be used to catch errors if you're using a static analysis tool like Flow or Typescript. It's easy to imagine one of those `\"application/mathml+xml\"` accidentally ending up like `\"application/matml+xml\"` which would probably pass tests and make it into production while `MIME_MATML` would not if we using Flow. \n\n@rgbkrk What are your thoughts?\n > Based on my understanding, using constants this way a) centralizes information (in this case, the mime type strings) and b) can be used to catch errors if you're using a static analysis tool like Flow or Typescript. It's easy to imagine one of those \"application/mathml+xml\" accidentally ending up like \"application/matml+xml\" which would probably pass tests and make it into production while MIME_MATML would not if we using Flow.\n\nI think that's a good point, and even if not using flow, i guess with `\"use strict\"` you would get an error.\n\nThanks !\n > Out of interest, what is the advantage of this?\n\nThe notebook is a fairly complex web app. Even if this was a compiled application, I'd prefer single constants for repeated strings to both give me name hinting (within Atom and Vim) and to catch my typos (`eslint` will catch this after all). What @gnestor says is exactly right.\n Thanks both for taking the time to explain it to me.\n\nOn 15 August 2016 at 17:31, Kyle Kelley notifications@github.com wrote:\n\n> Out of interest, what is the advantage of this?\n> \n> The notebook is a fairly complex web app. Even if this was a compiled\n> application, I'd prefer single constants for repeated strings to both give\n> me name hinting (within Atom and Vim) and to catch my typos (eslint will\n> catch this after all). What @gnestor https://github.com/gnestor says is\n> exactly right.\n> \n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/pull/1678#issuecomment-239852468,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AAUA9a9wf3PphyJLAapX9ak8bF-ZXqVQks5qgJRLgaJpZM4JjyIo\n> .\n","You could configure the data dir and the runtime dir to be the same location as the config directory. The easiest way to do that is by setting environment variables (`JUPYTER_DATA_DIR` and `JUPYTER_RUNTIME_DIR`). But I wouldn't really recommend it: information that refers to the normal locations will be confusing, and if any tools assume the standard location without checking the environment variables, they won't work for you.\n","I didn't realize we hadn't merged this guy. Can you rebase so we can verify that it's okay?\n Rebased, tests passing.\n","@poke1024 I can confirm that master currently will not render the SVG and that this PR will render it. In testing, I noticed that the less-watch script only recompiles LESS on a file change and not on `npm run build:watch` so I will submit a PR to fix that...\n\n@Carreau @minrk Feel free to test as well but I think this is ready to merge.\n Thanks!\n","Sorry for bothering. The root cause of this is our nginx proxy which doesn't support WebSocket yet. It was used for HTTP proxy so that we can access the index page. But it doesn't support WebSocket yet and it's nothing related to `jupyter notebook`, `docker` or `AWS`.\n","@Carreau Can you review?\n Thanks ! \n","IIRC we had too many users complaining that after installing notebooks they did not have the terminal available, and it make things consistent with all the other dependencies that are not really required to run the notebook. Technically you do not need IPython, or nbconvert to run the notebook. \n\nThis was done in PR https://github.com/ipython/ipython/pull/7632.\n Yeah, these dependencies are really what Debian packaging calls 'recommends'. We don't have a way to express that distinction in Python packaging, so we make them dependencies.\n\nYou can pass a `--no-deps` option to pip to ignore dependencies, and take care of installing them yourself. Of course, you're then responsible for handling any changed dependencies on each upgrade. Or you can install normally and then `pip uninstall` any packages you don't want.\n > You can pass a --no-deps option to pip to ignore dependencies\n\nIt doesn't really _ignore_ dependencies, it just installs the package without dependencies. With `--no-deps`, the dependencies are still recorded, giving errors at run-time instead of build-time.\n A more general issue with roughly _all_ Jupyter/IPython projects is that they behave significantly different depending on whether they are installed using `python setup.py install` or `pip install PKG`. See https://github.com/ipython/ipywidgets/issues/718 for a particularly bad instance of this.\n\nThis is really annoying for SageMath, since we are changing the installation of Python packages from `python setup.py install` to `pip install .` and we needed a lot of fixes to Jupyter packages to install correctly this way. Other Python packages did not have this problem.\n Sorry about that. Running `setup.py install` directly has not been recommended for some time, because you get either:\n1. The default behaviour of setuptools, which is a major cause of headaches\n2. The behaviour of plain distutils, which may not do everything you want.\n\nWe've mostly held out from requiring setuptools, so with our projects you'll mostly get 2. However, we generally now consider pip the correct way to install packages, so in a sense you're just running into the modern systems.\n\n> With --no-deps, the dependencies are still recorded, giving errors at run-time instead of build-time.\n\nObviously if they are really hard dependencies, you're going to get errors at run time if they're not installed. But if you're getting entry point scripts which use pkg_resources and check for dependencies, I would _strongly_ recommend upgrading to a newer version of pip. Modern versions no longer create those setuptools-style entry points.\n","Hi there, thanks for the proposal, we are aware that we need a better way to show shortcuts to users. \n\nKeyboard shortcuts being extremely scarce when using a browser, I'm worried it  would not such a good idea to reserve one more for this action. \n\nNote that on current master, the command palette (Ctrl-P) doe show the shortcut associated with each actions, and that the help menu now allows you to redefine your shortcuts. \n\nJupyterlab now also introduce the shortcuts in the menu as well; so a shortcut to show shortcut seem a bit too much.\n\nTechnically I guess with the shortcut configurable you can define one one your own if you like, and there is also the chicken and egg problem; how do use fing the shortcut to shop the shortcut help...\n\nWhat do you think ? Do you think the current development on master resolve some of what you are trying to propose ? Do you see any improvement on what's available ?\n +1 for using the command pallette.\n\nScreenshot: \n\n![screenshot](http://g.recordit.co/9ORsJLordR.gif)\n The command palette is very effective and should be added in the _User Interface Tour_, in my opinion. \nDespite this, I still consider adding the <kbd> ?  </kbd>  shortcut to show the _Keyboard Shortcut_ menu pertinent. \n\nMore than that, it could be interesting to emphasize the _open the command palette_ option.  \n The _Open the Command Palette_ is currently featured in the toolbar:\n\n![screenshot](http://g.recordit.co/VDwGzbKZZD.gif)\n @mikebotazzo isn't' 'h' what you were looking for?   - maybe you can close this?","@rgbkrk Merge away!\n","@jasongrout I'd be happy to work on this. What version do you suggest we upgrade to? Latest? And are you aware of any test notebooks that can be used to test all the different syntaxes?\n Can we have the latest code mirror? `~5.21`\r\n\r\nThis has https://github.com/codemirror/CodeMirror/issues/4356\r\n\r\nThat will fix:\r\n\r\n -  https://github.com/JuliaLang/IJulia.jl/issues/484\r\n -  i.e. https://github.com/jupyter/jupyter/issues/214\r\n\r\n\r\nIf I am understanding how it all links together\r\n\r\n cool, that would also contain my [newer fixes in 5.20](https://github.com/codemirror/CodeMirror/commit/0e4c156a9ab63dcbc5fa9f60ada54e3c5d5ad03b) Sure thing. 5.21 in #1921.","I think you would have to write some code yourself to collect the plots, and render them into a single HTML output, with style `display: block-inline`.\n","The 404 and \"Widgets not available\" message happen on Chrome as well as Firefox.\n hmm, running `jupyter nbextension enable --py widgetsnbextension` seems to have gotten rid of the 404 and the warning, but I'm still not seeing the markdown render until I reload the page.\n My fault. I didn't realize that you have to run the cell for it to render into markdown. I'd thought it rendered automatically when it lost focus.\n","What does the whole of `language_info` say?\n ```\n{'codemirror_mode': {'name': 'ipython', 'version': 3},\n 'file_extension': '.py',\n 'mimetype': 'text/x-python',\n 'name': 'python',\n 'nbconvert_exporter': 'python',\n 'pygments_lexer': 'ipython3',\n 'version': '3.6.0a4'}\n```\n\nIt's the same with both versions of notebook.\n That all looks as I'd expect. `codemirror_mode` is what tells it the syntax highlighting to use. I see some bizarre effects with f-strings too (it acts as if the rest of the cell is an f-string). Maybe we need to upgrade the version of Codemirror we use.\n Upgrading Codemirror didn't help, but I think I found a bug in Codemirror for f-strings: codemirror/CodeMirror#4182.\n\nTo check if it's trying to use Python 3 syntax, put these three lines in a cell:\n\n``` python\nraise\nprint\nzip\n```\n\nIf it's treating it as Python 3, `print` will be highlighted like `zip`. If it's treating it as Python 2, `print` will be highlighted like `raise`.\n It's using python 2 as `@` doesn't get highlighted like `+`\n Right, but maybe that's a bug. I'm seeing that as well, even though the `print` test indicates that it's using Python 3 highlighting.\n OK my bad. `print` does get highlighted like `zip`. The bug is definitely in Codemirror.\n Actually, thinking about it a bit more, I bet the `@` bug is ours. We define the 'ipython' mode, including redefining the operators here: https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/js/codemirror-ipython.js#L27\n\nWe need to update that for the `@` operator.\n The @ operator was fixed by #1763, and the `f` prefix should be fixed in Codemirror 5.18, which we use as of #1764.\n Hey. This bug reappeared, `@` and `raise print zip` tests pass, but `f\"\"` doesn't get parsed properly.\r\n\r\n```\r\n{'codemirror_mode': {'name': 'ipython', 'version': 3},\r\n 'file_extension': '.py',\r\n 'mimetype': 'text/x-python',\r\n 'name': 'python',\r\n 'nbconvert_exporter': 'python',\r\n 'pygments_lexer': 'ipython3',\r\n 'version': '3.6.0'}\r\n``` Annoyingly, we reverted to an old version of Codemirror to work around an issue with Safari. @gnestor and @minrk are keeping an eye on it so we can go back to a newer version of Codemirror at some point. OK thanks! Is there a way to manually select a newer version for the time being? If you [install the notebook from source](http://jupyter-notebook.readthedocs.io/en/latest/contributing.html#setting-up-a-development-environment), you can select it by editing `bower.json` before you build it. OK thanks exactly what I was looking for! Done, works as expected :) We're tracking this bug here: https://github.com/jupyter/notebook/issues/2037 Thanks @gnestor :-)","We're working on proper installation documentation for the whole project at http://jupyter.readthedocs.org/en/latest/install.html . I don't want the README to become a long list of 'installation on platform X' instructions.\n Sounds good, would you prefer if I make these changes to that instead? Note that I attempted to use the \"pip install jupyter\" approach from RTD first, and my env couldn't find the project in pip.\n Yeah, those instructions are being prepared for when it's released, which it's not yet. ;-)\n\nThat particular install page is also supposed to be the short, non-scary version that covers only the most common cases. We probably need some docs somewhere in this repo about getting it installed for development. I guess this may be the relevant page for that: http://jupyter-notebook.readthedocs.org/en/latest/development.html\n I think we should also write the instructions to be interpreted a bit rather than copied verbatim. E.g. there's absolutely no requirement to use bash to work on the notebook, except that the later instructions in the same block use it. There's lots of different ways to do the setup which are all equally valid, so the important thing is the explanation of the process, so that the developer understands which bits they can use an alternative for.\n I believe bash is required to source the \"activate\" script from the virtualenv. Totally agree that a better description of the install instructions could be made. In my experience starting with one specific path to success and then gradually building optional paths from there ensures that the learned knowledge gets committed somewhere.\n In a virtualenv on my system, there are `activate.csh`, `activate.fish` and `activate_this.py`, besides the bash `activate` script. And it's not uncommon to not to activate virtualenvs at all, but instead use full paths to the scripts inside them.\n\nI think there are so many optional paths that you'd never document them all. That's why I think it's better to explain and illustrate the steps, so that developers can work out on their own where to diverge from the instructions.\n These are still some improvement beyond no instruction on Free BSD. We can iterate if needed. \n\nThanks !\n","Do you have by any chance  a `py` file in another config directory? Use `jupyter --path` to see all the path where config is searched. \n Config appears to look in these directories:\n\n```\nconfig:\n    /Users/fonnescj/.jupyter\n    /Users/fonnescj/anaconda3/envs/workshop/etc/jupyter\n    /usr/local/etc/jupyter\n    /etc/jupyter\n```\n\nHowever, the second directory only has a json config file, and the last two directories do not exist on my machine.\n I wonder if the collisions detector gets confused when there are config files in multiple directories on the search path.\n > I wonder if the collisions detector gets confused when there are config files in multiple directories on the search path.\n\nIt might be... I\"ve open an issue to try to track that and have absolute path. \n","@ellisonbg Can you share your markdown text here?\n\nThis is what I'm seeing:\n\n![image](https://cloud.githubusercontent.com/assets/512354/17796670/adfdbf5e-657f-11e6-8702-5c6df933a4dd.png)\n Are you running a dev version of Chrome? I am on latest Chrome stable. I will try again to make sure though...\n Ya, I'm using vanilla Chrome 52.\n OK, did an npm clean, etc, cleared cache and everything is fine. Sorry about the noise...closing\n","Update:\n\nI played around with the version of notebok and downgraded to version 4.2.0:\n\n```\npip3 uninstall jupyter\npip2 install notebook==4.2.0\n```\n\nAnd then I noticed the following messages in the log\n\n```\n[D 09:59:04.497 NotebookApp] Initializing websocket connection /api/kernels/10e8c215-4152-48ee-9160-cdedd70b44ff/channels\n[D 09:59:04.500 NotebookApp] Requesting kernel info from 10e8c215-4152-48ee-9160-cdedd70b44ff\n[D 09:59:04.500 NotebookApp] Connecting to: tcp://127.0.0.1:50264\n/usr/bin/python: No module named shutil_get_terminal_size; 'ipykernel' is a package and cannot be directly executed\n[I 09:59:07.470 NotebookApp] KernelRestarter: restarting kernel (1/5)\n[D 09:59:07.471 NotebookApp] Starting kernel: [u'/usr/bin/python', u'-m', u'ipykernel', u'-f', u'/root/.local/share/jupyter/runtime/kernel-10e8c215-4152-48ee-9160-cdedd70b44ff.json']\n[D 09:59:07.477 NotebookApp] Connecting to: tcp://127.0.0.1:59295\n/usr/bin/python: No module named shutil_get_terminal_size; 'ipykernel' is a package and cannot be directly executed\n[I 09:59:10.480 NotebookApp] KernelRestarter: restarting kernel (2/5)\n[D 09:59:10.481 NotebookApp] Starting kernel: [u'/usr/bin/python', u'-m', u'ipykernel', u'-f', u'/root/.local/share/jupyter/runtime/kernel-10e8c215-4152-48ee-9160-cdedd70b44ff.json']\n[D 09:59:10.484 NotebookApp] Connecting to: tcp://127.0.0.1:59295\n/usr/bin/python: No module named shutil_get_terminal_size; 'ipykernel' is a package and cannot be directly executed\n[I 09:59:13.486 NotebookApp] KernelRestarter: restarting kernel (3/5)\n[D 09:59:13.487 NotebookApp] Starting kernel: [u'/usr/bin/python', u'-m', u'ipykernel', u'-f', u'/root/.local/share/jupyter/runtime/kernel-10e8c215-4152-48ee-9160-cdedd70b44ff.json']\n[D 09:59:13.490 NotebookApp] Connecting to: tcp://127.0.0.1:59295\n/usr/bin/python: No module named shutil_get_terminal_size; 'ipykernel' is a package and cannot be directly executed\n[W 09:59:14.501 NotebookApp] Timeout waiting for kernel_info reply from 10e8c215-4152-48ee-9160-cdedd70b44ff\n[D 09:59:14.502 NotebookApp] Opening websocket /api/kernels/10e8c215-4152-48ee-9160-cdedd70b44ff/channels\n[D 09:59:14.502 NotebookApp] Connecting to: tcp://127.0.0.1:50264\n[D 09:59:14.503 NotebookApp] Connecting to: tcp://127.0.0.1:51216\n[D 09:59:14.503 NotebookApp] Connecting to: tcp://127.0.0.1:48014\n[I 09:59:16.491 NotebookApp] KernelRestarter: restarting kernel (4/5)\nWARNING:root:kernel 10e8c215-4152-48ee-9160-cdedd70b44ff restarted\n[D 09:59:16.492 NotebookApp] Starting kernel: [u'/usr/bin/python', u'-m', u'ipykernel', u'-f', u'/root/.local/share/jupyter/runtime/kernel-10e8c215-4152-48ee-9160-cdedd70b44ff.json']\n[D 09:59:16.495 NotebookApp] Connecting to: tcp://127.0.0.1:59295\n/usr/bin/python: No module named shutil_get_terminal_size; 'ipykernel' is a package and cannot be directly executed\n```\n\nPay special attention to this line:\n\n```\n/usr/bin/python: No module named shutil_get_terminal_size; 'ipykernel' is a package and cannot be directly executed\n```\n\nThis error message isn't appearing in `version 4.2.2`, at least not for me. We had this problem before and fixed it with something like this:\n\n```\nRUN /usr/bin/yes | pip2 uninstall backports.shutil_get_terminal_size && \\\n                       pip install backports.shutil_get_terminal_size\n```\n\nI'm not sure what the issue is here, whether it's a problem with python2/3. Hopefully this helps someone else :) \n\nCheers.\n > RUN /usr/bin/yes | pip2 uninstall backports.shutil_get_terminal_size && \\\n>                        pip install backports.shutil_get_terminal_size\n\nI'm not sure which Python your `pip` here uses, but you need to make sure that module is correctly installed for Python _2_. It's not needed under Python 3.\n","Sorry, can you be a bit more specific about what you did and what you see?\n I am trying to export my jupyter notebook in pdf format using nbconvert. I have installed Latex packages required for exporting in PDF. After package installation, I am able to get the pdf but it is not in proper format. The html format is being depicted as html code and also it is not properly aligned which means if I have some long lines which is horizontally scroll-able then in pdf format I am not getting it complete. Not sure how we can format it. \n I guess I should have been more specific about being more specific ;-)\n\nWhat commands are you typing in? Or if you're converting by click things, what things do you click? Can you either upload an example file, or at least show us a screenshot of the problem?\n I am also facing the same problems like @shubhjain26 \n @shubhjain26 @dvigneshwer \n\nAre you running off of the master branch or are you working off of the stable version. If you are working off of the stable version, could you check that it works using the nbconvert master?\n\nAdditionally, could you see if this occurs if you use a more limited set of html markup? I.e., if it is a problem with a particular feature that is causing the entire conversion pipeline to burst rather than something general, it will save a lot of time to know which feature is causing that. \n Closing this in favor of addressing in https://github.com/jupyter/nbconvert/issues/388. @shubhjain26 If you want to post examples of your problem, please do so in this other issue. \n","Nevermind I see you've deprecated the image I'm using.\n","Thanks for catching that. Is there a Jenkins running somewhere that tests the installed package that I should check in the future?\n No problem. https://jenkins.jupyter.org/ is our server. The jobs which test this repo are:\n- Notebook\n- notebook-windows\n- jack-of-none (which installs and tests master from a range of our projects)\n Merging this to try to fix the test failures.\n Thanks. (I don't have merge perms here else I would have done it.)\n Annoyingly, this does not seem to have solved things on Windows. I'm not sure why at the moment.\n","It looks like you may have an old version of pip, which could be causing problems. I'd recommend that you upgrade pip and then reinstall notebook:\n\n```\npip3 install --upgrade setuptools pip\npip uninstall notebook\npip install notebook\n```\n Thanks - progress\nI ran the above and now have notebook running in terminal (not browser), but it requires activation of javascript. \n![screenshot](https://cloud.githubusercontent.com/assets/13242613/17833710/fe1b6c04-66ea-11e6-9510-19daaabe5885.png)\n sorry - did not intend to close issue\nCan you suggest how to activate JavaScript?\n I think the problem is I have to ssh to get onto server that is running notebook\n The default browser it has found is a terminal browser, which won't be able to display the notebook. You can:\n1. Set the environment variable $BROWSER to a graphical browser (e.g. Firefox)\n2. Configure the notebook to use a different browser ([config docs](http://jupyter-notebook.readthedocs.io/en/latest/config_overview.html#notebook-server)).\n3. If you're running the notebook server on a separate machine for the browser, start with `--no-browser` to skip opening the browser on launch. There's also a config option for this.\n Great - that explains it.\n\nCharles\n","@Carreau Any ideas?\n Hum...not from the top of my head.... Assigning myself I'll have a look next week.\n","It's the `jupyter_core` package that provides the `jupyter` command. It should have been installed automatically as a dependency of notebook, but double check that it is. If it is, it may have installed the executable file to a location that's not on your default $PATH (e.g. a `--user` install on Linux puts it in `~/.local/bin`). If that's the case, you'll need to update PATH from a file like `~/.profile`.\n Right, figured out the issue. \n\nOn Mac OSX 10.11.6, all installations via MacPorts are in `/opt/local/bin`. Users must specify which version of `jupyter` they are using, e.g. `jupyter-2.7 notebook` is the correct command. \n\nFeel free to close---apologies for the confusion.\n That's rather ugly. It shouldn't be necessary to install jupyter on each\nPython version, because one jupyter installation can be told about multiple\npython kernels.\n Agreed, but I think that's how MacPorts makes us play the game. \n\nI have nothing in my `~/.local/bin` except the default version of Python. Everything else is in `/opt/local/bin`.\n","You may be able to hack something together, but I think its's something we've considered before and aren't interested in supporting; the mechanisms to see and change which kernel a notebook is connected to would be a significant extra piece of user-facing complexity.\n @takluyver Then if there is any clue on this? I have no idea how to start to hack this.\n [Sessionmanager](https://github.com/jupyter/notebook/blob/master/notebook/services/sessions/sessionmanager.py) is what maintains the mapping between notebooks and kernels. I haven't thought at all about how you'd adapt it to do what you want, though.\n Not a separate notebook, and one cell only, but this extension may be useful: https://github.com/minrk/nbextension-scratchpad\n","Looks like it got rewritten with a different indentation.\n Seems sensible enough. Is there a reason to use gulp-minify instead of clean-css?\n > Seems sensible enough. Is there a reason to use gulp-minify instead of clean-css?\n\n```\nDEPRECATED\nThis package is marked as deprecated. Please use jonathanepollack/gulp-minify-css instead.\n```\n > Looks like it got rewritten with a different indentation.\n\nYes, I just don't know why npm would use a different indentation.\n Ha, and it's less that specifically recommends clean-css because less's own minification is deprecated. Deprecate all the things!\n Yes it make sens, I just copied and pasted an example, thought the same, and got the habit of typing `less`. renamed. \n Commented line was a mistake. Uncommented. \n When I run `gulp css`, it doesn't build the sourcemaps. Do you know what's going on there?\n > When I run gulp css, it doesn't build the sourcemaps. Do you know what's going on there?\n\nNo, but I figured it out. I'll tell you at lunch I want to see your face when I say it. \n update to give an explicit path. @min, do you get external sourcemaps  now ?\n @Carreau yup.\n","There needs to be some way for users to open a JS console and poke around the JS interfaces. How would we do that without a global of some kind?\n Is there a way that we can grab a handle to the things that require has\nimported for a page?\n\nI am all for getting rid of the global, but agree with @takluyver about\nneeding a handle for debugging things\n\nOn Thu, Jun 25, 2015 at 11:30 AM, Thomas Kluyver notifications@github.com\nwrote:\n\n> There needs to be some way for users to open a JS console and poke around\n> the JS interfaces. How would we do that without a global of some kind?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/170#issuecomment-115355984.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Well, modules are still  available by `foo = require('path')`, I have no issues having user poking around, but what if you want many notebook per page ? What about many extensions requiring the global IPython ?\n\nWe need a way for it to work even without globals, and we can have global injection to be done only if user click a checkbox or set an option. Though it forces extensions and code to be clean of global only, and get convenience of global only in explicit case. e\n I should clarify - I am fine completely getting rid of the global - I think\nwe just want to have some way for users to dig around and get access to the\nobjects for debugging\n\nOn Thu, Jun 25, 2015 at 1:51 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Well, modules are still available by foo = require('path'), I have no\n> issues having user poking around, but what if you want many notebook per\n> page ? What about many extensions requiring the global IPython ?\n> \n> We need a way for it to work even without globals, and we can have global\n> injection to be done only if user click a checkbox or set an option. Though\n> it forces extensions and code to be clean of global only, and get\n> convenience of global only in explicit case. e\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/170#issuecomment-115393257.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n The important bit is the instances, which you can't get with require. I don't think poking around should only be possible if you set some special option. And we're still a long way from having multiple notebooks on a page, so we've got time to work out a good solution to the problem that doesn't make the notebook less capable.\n Yes, it is definitely the instances. phosphor may help with this - Chris\nactually has a very powerful system that takes care of instantiating\nobjects that implements various interfaces and tracking their lifetimes and\ninteractions.\n\nOn Thu, Jun 25, 2015 at 1:59 PM, Thomas Kluyver notifications@github.com\nwrote:\n\n> The important bit is the instances, which you can't get with require. I\n> don't think poking around should only be possible if you set some special\n> option. And we're still a long way from having multiple notebooks on a\n> page, so we've got time to work out a good solution to the problem that\n> doesn't make the notebook less capable.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/170#issuecomment-115396916.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n The point is not to cripple the notebook, it is to make hard to access the global in places where you should not, like \n\n```\ndefine(['forget_namespace'],function(){\n    // Use global without realizing. \n})\n\n> Yes, it is definitely the instances. phosphor may help with this - Chris\n> actually has a very powerful system that takes care of instantiating\n> objects that implements various interfaces and tracking their lifetimes and\n> interactions.\n\nFor that it would be nice to push typescript and notebook rewriting forward... it nice to say that it's a powerful things, it would be nice to use it.\n\n```\n Yup, I think it's just the instances, adn I think it's really just `IPython.notebook`, the outermost instance, that's needed to be attached to _something_ global. We could attach it directly to `window`, I suppose. I'm fully in support of removing all of the IPython.Classes, etc. from the IPython namespace, and removing any reference/use of the IPython namespace outside the `main.js` files.\n `keyboard_manager` too need to be somewhere. Wether `IPython` or `notebook` is top level is the same problem, it is just a global. It would be nice to have something explicit like a function call \u00e0 la `get_ipython()`\n But then you need to make the function global, and it needs to be a closure over a reference to `IPython` or `notebook`, or something. It doesn't avoid having a global, it just makes it slightly harder to use.\n\nThe only way I can think of to avoid making it a global is to attach it to an element on the page, so you have to do e.g. `$('#notebook').data('notebook')` to get it.  That seems inelegant, and unnecessary until we actually have multiple notebooks on a page.\n The problem is that the global `IPython` and the requirement: `require(['base/js/namespace'], function(IPython){})` in the end expose the same thing: `IPython`. Which make the distinction for users impossible.\n\n`$('#notebook').data('notebook')` or `get_ipython()` make it obvious there is a difference. Even injecting the name differently global 250ms after notebook ready would at least prevent user from using it in extensions. \n","I wrote a [small python script](https://github.com/paderijk/jupyter-password) that creates the correct password entry. Although would be nice if there is a flag like `--set-password`, so for example:\n\n``` bash\njupyter notebook --generate-config --set-password\n```\n\nOr to reset it:\n\n``` bash\njupyter notebook --set-password\n```\n #2007 added `jupyter notebook password`. This should be released in 5.0.","1.1 apparently hasn't been published to npm yet. 1.0 is still the [latest release](https://www.npmjs.com/package/xterm).\n Yup, filed https://github.com/sourcelair/xterm.js/issues/244\n They fixed the issue with their release script and pushed 1.1.3, so I've updated to that. Waiting for travis now.\n Are these just flaky tests? I don't see how they are related...\n Yup, looks like flaky tests. I just re-ran the failing one, and it passed. Let's see if this helps with #1724.\n","Some of these relate to #1695, which doesn't seem to have fixed things entirely on Windows, others are to do with path separators, and it should just live with the import of tornado.\n\nPinging @parente for the bundler tests.\n Some of the bundler failures look like legitimate failures in the bundler utility code on Windows. I'll grab a windows machine sometime soon and work on fixing it. I was on the fence about whether that utility code should go into notebook or not and the solution may be to just pull that bit out. (/cc @nitind)\n\n@takluyver does the jenkins windows job build PRs or master after merge?\n The existing job builds master - we can set up jobs which you give a PR number and it tests that; we have some of those for IPython.\n\nDo you want an account on our Jenkins server so you can configure and run jobs?\n Reopening as there are still some errors; I don't think any of these are to do with bundler, though.\n I was a bit pressed for time so I tackled just the bundler related errors in the PR. If I get a chance I'll have a look at the others. \n We've got tests passing on Appveyor now, so I think we can close.","Not sure what would do this, but multiprocessing in interactive interpreters on Windows is well known to be a bit dodgy.\n Thanks for taking interest in this issue. I think you may have read the post a bit too fast : I am not using multiprocessing (I am well aware of its issues in interactive interpreter on Windows) but rather multiprocess, a fork of multiprocessing replacing pickle by dill for the serialization (see [this SO question](http://stackoverflow.com/questions/27932987/multiprocessing-package-in-interactive-python) with the answer from the multiprocess author). This works very well in an ipython console (built-in multiprocessing does not) so I thought this would translate to the notebook but it does not. I guess that, if you could point me to differences between the ipython console and notebook interpreters, I might be able to find a workaround. BTW, this is not a critical issue, but rather a nice side benefit that I was hoping to get from going with multiprocess.\n The main difference between the notebook and the terminal is that a tornado eventloop is running and some zmq sockets are listening. There are also some extra threads running for things like forwarding stdout, stderr.\n","```\n...\n[I 15:50:50.082 NotebookApp] 302 GET / (::1) 25.00ms\n[I 15:51:19.674 NotebookApp] Creating new notebook in\n[E 15:51:21.121 NotebookApp] Failed to run command:\n    ['python2', '-c', 'from IPython.kernel.zmq.kernelapp import main; main()', '-f', 'C:\\\\\nUsers\\\\user\\\\AppData\\\\Roaming\\\\jupyter\\\\runtime\\\\kernel-8e4a852d-6d2d-498a-ab44-7a25197828\n46.json']\n    with kwargs:\n    {'stdin': -1, 'stdout': None, 'cwd': 'E:\\\\[openx]\\\\level2\\\\scripts', 'stderr': None, \n...\n```\n There is no `python2` binary on Windows system.\n ```\n[D 21:13:44.022 NotebookApp] Found kernel python2 in C:\\Users\\user\\AppData\\Roaming\\jupyter\\kernels\n[D 21:13:44.023 NotebookApp] Found kernel python3 in C:\\ProgramData\\jupyter\\kernels\n```\n Contents of `C:\\Users\\user\\AppData\\Roaming\\jupyter\\kernels\\python2\\kernel.json`\n\n```\n{\n \"display_name\": \"IPython (Python 2)\", \n \"language\": \"python\", \n \"argv\": [\n  \"python2\", \n  \"-c\", \n  \"from IPython.kernel.zmq.kernelapp import main; main()\", \n  \"-f\", \n  \"{connection_file}\"\n ], \n \"codemirror_mode\": {\n  \"version\": 2, \n  \"name\": \"ipython\"\n }\n}\n```\n ```\n>pip uninstall ipython\n>pip uninstall jupyter\n>pip uninstall ipykernel\n> rmdir /q /s C:\\Users\\user\\AppData\\Roaming\\jupyter\n```\n\n```\npip install jupyter\n```\n ```\n[D 21:29:48.842 NotebookApp] Found kernel python3 in C:\\ProgramData\\jupyter\\kernels\n[D 21:29:48.842 NotebookApp] Found kernel python2 in C:\\Users\\user\\.ipython\\kernels\n```\n\nContents of `C:\\Users\\user\\.ipython\\kernels\\python2\\kernel.json`:\n\n```\n{\n \"display_name\": \"IPython (Python 2)\", \n \"language\": \"python\", \n \"argv\": [\n  \"python2\", \n  \"-c\", \n  \"from IPython.kernel.zmq.kernelapp import main; main()\", \n  \"-f\", \n  \"{connection_file}\"\n ], \n \"codemirror_mode\": {\n  \"version\": 2, \n  \"name\": \"ipython\"\n }\n}\n```\n\n```\nrmdir /q /s C:\\Users\\user\\.ipython\n```\n ```\n[D 23:48:18.642 NotebookApp] Found kernel python3 in C:\\ProgramData\\jupyter\\kernels\n[D 23:48:18.644 NotebookApp] Native kernel (python2) available from c:\\python27\\lib\\site-p\nackages\\ipykernel\\resources\n[D 23:48:18.644 NotebookApp] Starting kernel: ['c:\\\\python27\\\\python.exe', '-m', 'ipykerne\nl', '-f', u'C:\\\\Users\\\\user\\\\AppData\\\\Roaming\\\\jupyter\\\\runtime\\\\kernel-d4b30511-7793-4cba\n-b6ac-5d2d2ee37067.json']\n[D 23:48:18.667 NotebookApp] Connecting to: tcp://127.0.0.1:58167\n[I 23:48:18.670 NotebookApp] Kernel started: d4b30511-7793-4cba-b6ac-5d2d2ee37067\n```\n\nNow it is good.\n\nJupiter should clean up ancient invalid kernels.\n @techtonik To confirm, removing the `.ipython` directory resolved your issue?\n @gnestor yes.\n","What do you see for `jupyter kernelspec list`? You might want to do:\n\n```\nipython kernel install --sys-prefix\n```\n Wow. Github created two issues in a row. See #1704. Basically, I hoped that Jupyter is able to migrate its configs to new versions itself. =)\n","Copied from the original discussion at the ipywidgets repo:\n\n> I am going to put some cycles on this this week or next week. Putting the conf.d thing on the side,, here are a few things I think should be changed:\n\nNice and thanks in advance!\n\n> sys-prefix install should be the default instead of system for both enabling and installing. People are confused when enabling/installing an nbextension requires different privileges from the pip install. Doing anything else than --sys-prefix should be a conscious decision. It is also important to note that --user is global to all the python installs that the user may use. (Hence --user is almost always evil).\n\nI totally agree with you here...\n\n> When installing an nbextension, --override should be True by default. Otherwise people don't know that they may have an older version of the js installed.\n\nSound reasonable, in fact, in some conda-packaged nbextensions we are using --override by default.\n\n> Uninstalling an nbextension should also disable the nbextension.\n\nI agree too, people forget about disabling and that could bring some problematic leftovers... people usually request installation and activation to be separated, but I believe in this case, one thing (uninstalltion) should cause the other (disabling) as well..\n\n> A major change that I want to put in place is that if nbextension is loaded because it is enabled in e.g. sys-prefix, the assets should only looked for in sys-prefix. If it is loaded because enabled in the user configuration directory, it should only load the assets in the user data directory etc...\n\nmmm... not sure about this in a composite scenario, I can see a scenario where sys-prefix installed extensions provides some \"common\" extensions (ie, provided by anaconda distro or a conda-forge set of extensions, etc) and user installed/enabled extensions that a user wrote and want to enable in all their notebook instances without installing the extension in every environment (maybe hundreds?).\n\n> At the moment, disabling an extension with --user (i.e. setting it to False in the user nbconfig) will cause the extension to not be enabled even if it is enabled e.g. in sys-prefix because the user configuration has the priority - which is really silly. This problem will go when I fix the previous one.\n\nThat maybe should be warned? In the same scenario I described above, I can see a use case to disable one extension in all my envs without disabling it in every environment...\n From @SylvainCorlay \n\n> PS: I slightly modified the point on \"uninstalling an nbextension should also disable the nbextension\".\n\nNow it is:\n\n> Uninstalling an extension should also remove the line corresponding to the extension in the notebook.json configuration file (which is a bit different from disabling it as we see in the following).\n\nI agree.\n The installation of Jupyter kernels is analogous and suffers from some of the same problems.\n\nWhatever solution we come up with, we also need good complete examples. There should be minimal working packages for an example of a kernel and an example of an nbextension.\n\nSee also a long discussion at https://github.com/jupyter/jupyter_core/pull/61 and https://github.com/jupyter/jupyter_core/pull/69 which was closed but not resolved.\n I propose we target this for 5.0, and I am willing to work on it.  \r\nI see this as separate from the kernelspec question because kernels can be used in multiple contexts, whereas nbextensions are meant to be used by the notebook application itself, and so it can be more opinionated. In the mean time, there is a minimal example of a kernel at https://github.com/jupyter/echo_kernel\r\n\r\nUnfortunately, I disagree with how things are done there. In my opinion, `pip install echo_kernel` should also install the kernel spec file (with the philosophy that basic usage should be as simple as possible). I know that @takluyver claims that it cannot be done, but I disagree with his arguments for that. See https://github.com/jupyter/echo_kernel/issues/3","@jasongrout @SylvainCorlay Do you know where the code for this is? I can try to have a look\n @dmadeka I can verify that mouse scrolling does not toggle between suggestions (and I don't believe it is intended to). I can also verify that click to select a suggestion is working for me using Chrome on OS X. What browser/OS are you using?\n\nSee https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/js/completer.js for introspection/autocomplete code.\n\nScreenshot:\n\n![screenshot](http://g.recordit.co/KOY10nE4Qi.gif)\n","Also note that the documentation of `ConfigWithDefaults.get_sync` is a bit misleading, because the default is also returned in case `key` is not present in the loaded config.\n This looks OK to me, but I'll let someone more familiar with JS double check.\n","o_O\n\nTry\n\n```\n \u25c9_\u25c9 (\u0ca0_\u0ca0)(\u256f\u00b0\u25a1\u00b0\uff09\u256f\ufe35 \u253b\u2501\u253b\n```\n\nCan reproduce....\n @takluyver the prompt regex might be eating space too much space ? `hist -t` show that the `print` line get as many space removed that the fist line has. \n Yep, if the first line has leading whitespace, it will try to trim that much leading whitespace off each line for the rest of the cell. We could make it ignore the first line if it's only whitespace, or stop trimming as soon as one line has less whitespace than the first line, or cut the trimming down to how much whitespace that line has... but I suspect that all of these will produce an unexpected result in some other strange case.\n Another nice example is\n\n``` python\n\u00b7\u00b7\u00b7\u00b7\u00b7\nif 1:\n\u00b7\u00b7\u00b7\u00b7print(0)\n\n\u00b7\u00b7\u00b7\u00b7for b in range(9):\n\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7print(b)\n```\n\nIf you remove one space in the first line the place of the error point changes...\n How are you getting these cells with a line of spaces at the top?\n (?) well, I just wrote them... I don't know how I got the first one (when I realized something bad happened)... probably there were some code on top I deleted... \n Marking as no-action here, since it's an IPython issue.\n","<img width=\"1440\" alt=\"screen shot 2016-08-25 at 10 55 12 pm\" src=\"https://cloud.githubusercontent.com/assets/13116550/17982532/d328edde-6b25-11e6-8c1b-a13c1fb45735.png\">\n the following page is opening while trying to issue the command \"jupyter notebook\" in the terminal.\n\nTried the command open -a Google\\ Chrome http://localhost:8888 also and still seeing the same page.\n > [I 22:49:48.716 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888\n\nCan you try pasting `http://localhost:8888` as the url in the browser, if still nothing try `http://127.0.0.1:888` ; do you still get the above page ?\n Thank you very much for quick response!!\n\nI tried clearing cache and it started to work!!\nbut the issue with pyspark is not resolved yet.\n\nI gave the following commands in .profile and .bash_profile,still I am not able to open notebook issuing pyspark command.\n\n# .profile \n\nexport PATH=/usr/local/Cellar/apache-spark/2.0.0/bin:$PATH\n\nexport PYSPARK_DRIVER_PYTHON=ipython\n\nexport PYSPARK_DRIVER_PYTHON_OPTS='notebook\u2019 pyspark\n\n# .bash_profile\n\nexport PATH=/Users/ravan/anaconda/bin:$PATH\n\nexport SPARK_HOME=/usr/local/Cellar/apache-spark/2.0.0\n\nexport PATH=$SPARK_HOME/bin:$PATH\n\nexport PYSPARK_SUBMIT_ARGS=\"--master local[2] pyspark-shell\u201d\n","#1713 closes this.\n","\ud83d\udc4d cc @willingc \n @michaelpacer Thank you! This doc change is eloquent and clear and does a great job capturing the input from @fperez on the the mailing list. Thanks for your work on this. Yes, you have used the important block correctly. I trust your judgement so please follow your instincts when to use them. :cake:\n\nVery happy to merge. Thanks @minrk for the review too.\n Great, thanks!!\n","CC @minrk\n (cf. https://github.com/jupyter/jupyterlab/issues/771)\n Makes sense. I don't think we can reasonably do anything in between everything and just PATH, even though things like PYTHONPATH, etc. might be useful for Python kernels.\n","Yup. If anything, this link should be provided by the lab extension.\n","@damianavila ?\n Can you paste the output of `conda list`\n\nHow did you try to uninstall the conda packages?\n\nCan you also provide the output of `jupyter nbextension list` and `jupyter serverextension list`\n\nThanks!\n @damianavila \n\n[root@jup-nr ~]# conda list\n\n# packages in environment at /opt/anaconda3:\n\n#\n_nb_ext_conf              0.3.0                    py35_0\nalabaster                 0.7.7                    py35_0\nanaconda                  4.0.0               np110py35_0\nanaconda-client           1.4.0                    py35_0\nanaconda-navigator        1.1.0                    py35_0\nargcomplete               1.0.0                    py35_1\nastropy                   1.1.2               np110py35_0\nbabel                     2.2.0                    py35_0\nbeautifulsoup4            4.4.1                    py35_0\nbitarray                  0.8.1                    py35_0\nblaze                     0.9.1                    py35_0\nbokeh                     0.11.1                   py35_0\nboto                      2.39.0                   py35_0\nbottleneck                1.0.0               np110py35_0\ncffi                      1.5.2                    py35_0\nchest                     0.2.3                    py35_0\ncloudpickle               0.1.1                    py35_0\nclyent                    1.2.1                    py35_0\ncolorama                  0.3.7                    py35_0\nconda                     4.1.11                   py35_0\nconda-build               1.20.0                   py35_0\nconda-env                 2.5.2                    py35_0\nconda-manager             0.3.1                    py35_0\nconfigobj                 5.0.6                    py35_0\ncryptography              1.3                      py35_0\ncurl                      7.45.0                        0\ncycler                    0.10.0                   py35_0\ncython                    0.23.4                   py35_0\ncytoolz                   0.7.5                    py35_0\ndask                      0.8.1                    py35_0\ndatashape                 0.5.1                    py35_0\ndecorator                 4.0.9                    py35_0\ndill                      0.2.4                    py35_0\ndocutils                  0.12                     py35_0\ndynd-python               0.7.2                    py35_0\net_xmlfile                1.0.1                    py35_0\nfastcache                 1.0.2                    py35_0\nflask                     0.10.1                   py35_1\nflask-cors                2.1.2                    py35_0\nfontconfig                2.11.1                        5\nfreetype                  2.5.5                         0\ngevent                    1.1.0                    py35_0\ngreenlet                  0.4.9                    py35_0\nh5py                      2.5.0               np110py35_4\nhdf5                      1.8.15.1                      2\nheapdict                  1.0.0                    py35_0\nibm-db                    2.0.7                     <pip>\nidna                      2.0                      py35_0\ninsight-factory           0.1                       <pip>\nipykernel                 4.3.1                    py35_0\nipython                   4.1.2                    py35_1\nipython_genutils          0.1.0                    py35_0\nipywidgets                4.1.1                    py35_0\nitsdangerous              0.24                     py35_0\njbig                      2.1                           0\njdcal                     1.2                      py35_0\njedi                      0.9.0                    py35_0\njinja2                    2.8                      py35_0\njpeg                      8d                            0\njsonschema                2.4.0                    py35_0\njupyter                   1.0.0                    py35_3\njupyter-kernel-gateway    1.0.0                     <pip>\njupyter_client            4.2.2                    py35_0\njupyter_console           4.1.1                    py35_0\njupyter_core              4.1.0                    py35_0\njupyterhub                0.6.1                     <pip>\njupyterhub-ldapauthenticator 1.0                       <pip>\nldap3                     1.4.0                     <pip>\nlibdynd                   0.7.2                         0\nlibffi                    3.0.13                        0\nlibgfortran               3.0                           0\nlibpng                    1.6.17                        0\nlibsodium                 1.0.3                         0\nlibtiff                   4.0.6                         2\nlibxml2                   2.9.2                         0\nlibxslt                   1.1.28                        0\nllvmlite                  0.9.0                    py35_0\nlocket                    0.2.0                    py35_0\nlxml                      3.6.0                    py35_0\nMarkdown                  2.6.6                     <pip>\nmarkupsafe                0.23                     py35_0\nmatplotlib                1.5.1               np110py35_0\nmistune                   0.7.2                    py35_0\nmkl                       11.3.1                        0\nmkl-service               1.1.2                    py35_0\nmpmath                    0.19                     py35_0\nmultipledispatch          0.4.8                    py35_0\nnb_anacondacloud          1.2.0                    py35_0\nnb_conda                  2.0.0                    py35_0\nnb_conda_kernels          2.0.0                    py35_0\nnbconvert                 4.1.0                    py35_0\nnbformat                  4.0.1                    py35_0\nnbpresent                 3.0.2                    py35_0\nnetworkx                  1.11                     py35_0\nnltk                      3.2                      py35_0\nnose                      1.3.7                    py35_0\nnotebook                  4.2.2                    py35_0\nnumba                     0.24.0              np110py35_0\nnumexpr                   2.5                 np110py35_0\nnumpy                     1.10.4                   py35_1\nodo                       0.4.2                    py35_0\nopenpyxl                  2.3.2                    py35_0\nopenssl                   1.0.2h                        1\npamela                    0.2.1                     <pip>\npandas                    0.18.0              np110py35_0\npandasql                  0.7.3                     <pip>\npartd                     0.3.2                    py35_1\npatchelf                  0.8                           0\npath.py                   8.1.2                    py35_1\npatsy                     0.4.0               np110py35_0\npep8                      1.7.0                    py35_0\npexpect                   4.0.1                    py35_0\npickleshare               0.5                      py35_0\npillow                    3.1.1                    py35_0\npip                       8.1.2                    py35_0\nply                       3.8                      py35_0\npsutil                    4.1.0                    py35_0\nptyprocess                0.5                      py35_0\npy                        1.4.31                   py35_0\npyasn1                    0.1.9                    py35_0\npycosat                   0.6.1                    py35_0\npycparser                 2.14                     py35_0\npycrypto                  2.6.1                    py35_0\npycurl                    7.19.5.3                 py35_0\npyflakes                  1.1.0                    py35_0\npygments                  2.1.1                    py35_0\npyopenssl                 0.15.1                   py35_2\npyparsing                 2.0.3                    py35_0\npyqt                      4.11.4                   py35_1\npytables                  3.2.2               np110py35_1\npytest                    2.8.5                    py35_0\npython                    3.5.2                         0\npython-dateutil           2.5.1                    py35_0\npytz                      2016.2                   py35_0\npyyaml                    3.11                     py35_1\npyzmq                     15.2.0                   py35_0\nqt                        4.8.7                         1\nqtawesome                 0.3.2                    py35_0\nqtconsole                 4.2.0                    py35_0\nqtpy                      1.0                      py35_0\nreadline                  6.2                           2\nredis                     2.6.9                         0\nredis-py                  2.10.3                   py35_0\nregex                     2016.7.21                 <pip>\nrequests                  2.9.1                    py35_0\nrope                      0.9.4                    py35_1\nruamel_yaml               0.11.14                  py35_0\nscikit-image              0.12.3              np110py35_0\nscikit-learn              0.17.1              np110py35_0\nscipy                     0.17.0              np110py35_2\nsetuptools                25.1.6                   py35_0\nsimplegeneric             0.8.1                    py35_0\nsingledispatch            3.4.0.3                  py35_0\nsip                       4.16.9                   py35_0\nsix                       1.10.0                   py35_0\nsnowballstemmer           1.2.1                    py35_0\nsockjs-tornado            1.0.1                    py35_0\nsphinx                    1.3.5                    py35_0\nsphinx_rtd_theme          0.1.9                    py35_0\nspyder                    2.3.8                    py35_1\nsqlalchemy                1.0.12                   py35_0\nsqlite                    3.13.0                        0\nstatsmodels               0.6.1               np110py35_0\nsympy                     1.0                      py35_0\nterminado                 0.5                      py35_1\ntk                        8.5.18                        0\ntoolz                     0.7.4                    py35_0\ntornado                   4.3                      py35_0\ntraitlets                 4.2.1                    py35_0\nunicodecsv                0.14.1                   py35_0\nutil-linux                2.21                          0\nwerkzeug                  0.11.4                   py35_0\nwheel                     0.29.0                   py35_0\nxlrd                      0.9.4                    py35_0\nxlsxwriter                0.8.4                    py35_0\nxlwt                      1.0.0                    py35_0\nxz                        5.2.2                         0\nyaml                      0.1.6                         0\nzeromq                    4.1.3                         0\nzlib                      1.2.8                         3\n\n---\n\n[root@jup-nr ~]# jupyter nbextension list\nKnown nbextensions:\n  config dir: /root/.jupyter/nbconfig\n    notebook section\n      sidebar/main  enabled\n      - Validating: OK\n      toc/main  enabled\n      - Validating: OK\n      config/config_menu/main  enabled\n      - Validating: OK\n  config dir: /opt/anaconda3/etc/jupyter/nbconfig\n    notebook section\n      nbpresent/js/nbpresent.min  enabled\n      - Validating: OK\n      nb_conda/main  enabled\n      - Validating: OK\n      nb_anacondacloud/main  enabled\n      - Validating: OK\n      jupyter-js-widgets/extension  enabled\n      - Validating: problems found:\n        - require?  X jupyter-js-widgets/extension\n    tree section\n      nb_conda/tree  enabled\n      - Validating: OK\n[root@jup-nr ~]#\n\n---\n\n[root@jup-nr ~]# jupyter serverextension list\nconfig dir: /opt/anaconda3/etc/jupyter\n    nbpresent  enabled\n    - Validating...\n      nbpresent  OK\n    nb_conda  enabled\n    - Validating...\n      nb_conda  OK\n    nb_anacondacloud  enabled\n    - Validating...\n      nb_anacondacloud  OK\n[root@jup-nr ~]#\n\nI used conda uninstall command.\n Let's try `conda remove _nb_ext_conf` (it will remove all the extensions but `conda remove nb_conda` should be the same because it removes all the extension bundle as well) and please post the output of `jupyter nbextension list` and `jupyter serverextension` list to see if they are disabled as expected.\nAdditionally the content of  `/opt/anaconda3/etc/jupyter/jupyter_notebook_config.json` to see if nb_conda_kernel reference was removed.\n\nThanks!\n [root@jup-nr ~]# jupyter nbextension list\nKnown nbextensions:\n  config dir: /root/.jupyter/nbconfig\n    notebook section\n      config/config_menu/main  enabled\n      - Validating: OK\n      toc/main  enabled\n      - Validating: OK\n      sidebar/main  enabled\n      - Validating: OK\n\n[root@jup-nr ~]# jupyter serverextension list\n[root@jup-nr ~]#\n\n./opt/anaconda3/pkgs/_nb_ext_conf-0.3.0-py35_0/etc/jupyter/jupyter_notebook_config.json\n\n{\n  \"NotebookApp\": {\n    \"kernel_spec_manager_class\": \"nb_conda_kernels.CondaKernelSpecManager\",\n    \"nbserver_extensions\": {\n      \"nb_conda\": true,\n      \"nb_anacondacloud\": true,\n      \"nbpresent\": true\n    }\n  }\n} \n\n./opt/anaconda2/pkgs/_nb_ext_conf-0.3.0-py27_0/etc/jupyter/jupyter_notebook_config.json\n\n{\n  \"NotebookApp\": {\n    \"nbserver_extensions\": {\n      \"nbpresent\": true,\n      \"nb_conda\": true,\n      \"nb_anacondacloud\": true\n    },\n    \"kernel_spec_manager_class\": \"nb_conda_kernels.CondaKernelSpecManager\"\n  }\n}\n\n./opt/anaconda2/etc/jupyter/jupyter_notebook_config.json\n\n{\n  \"NotebookApp\": {\n    \"nbserver_extensions\": {\n      \"nbpresent\": true,\n      \"nb_conda\": true,\n      \"nb_anacondacloud\": true\n    },\n    \"kernel_spec_manager_class\": \"nb_conda_kernels.CondaKernelSpecManager\"\n  }\n}\n `./opt/anaconda2/etc/jupyter/jupyter_notebook_config.json`\n\nDo you have anaconda2 installed alongside with anaconda3?\n\nIn any case, if you start jupyterhub in your anaconda3 env, I don't see how this could affect unless the Spawner is using notebook server from the anaconda2 env (although I did not play to much with jupyterhub yet and maybe I am missing something else). \n\nWhat happens if you remove the extensions from the anaconda2 installation as well?\n I'm having similar issues from switching from python2 to python3\n > I'm having similar issues from switching from python2 to python3\n\nWhat do you mean? For instance you don't need anaconda2 to have python2 kernels... can you clarify how is your setup? Thanks!\n [root@jup-nr ~]# /opt/anaconda2/bin/jupyter nbextension list\nKnown nbextensions:\n  config dir: /root/.jupyter/nbconfig\n    notebook section\n      sidebar/main  enabled\n      - Validating: OK\n      config/config_menu/main  enabled\n      - Validating: OK\n      toc/main  enabled\n      - Validating: OK\n[root@jup-nr ~]# /opt/anaconda2/bin/jupyter serverextension list\n[root@jup-nr ~]#\n\nIt works fine now. I can see the kernels as R, Python 2 and Python3.\n\nSo just to summarize\n\nI would need to do the following to fix the issue right ?\n/opt/anaconda2/bin/conda remove _nb_ext_conf\n/opt/anaconda3/bin/conda remove _nb_ext_conf\n\nDid I miss any step ?\n Does the remove command affect user defined jupyter notebook extensions ?\n > Did I miss any step ?\n\nI think you are OK now... interesting to see that you have both anaconda installed alongside... curious about the setup and why you put them together...\n\n> Does the remove command affect user defined jupyter notebook extensions ?\n\nRemoving _nb_ext_conf will remove the extensions provided by default by Anaconda but it should not affect other jupyter extensions defined by the user...\n Thanks.\n\nWould I have to always run the remove command or in the next jupyter updates this issue would be fixed?\n > Would I have to always run the remove command or in the next jupyter updates this issue would be fixed?\n\nThe Anaconda distribution is shipping some nbextensions by default. So anytime you use Anaconda, if you don't want those extension, you need to remove it.\nBut, just to be clear, this is something specific from Anaconda. \nYou can always have the native jupyter experience, creating new environments with just the notebook on it, removing the extensions as I mentioned before or using other alternatives installations as the Jupyter docs explain in details.\n\nCheers.\n Just to follow up on this - the \"conda remove _nb_ext_conf\" command output is scary..\n\n```\n$ conda remove _nb_ext_conf\nFetching package metadata .......\nSolving package specifications: ..........\n\nPackage plan for package removal in environment /opt/anaconda3:\n\nThe following packages will be REMOVED:\n\n    _nb_ext_conf:     0.3.0-py35_0\n    anaconda:         4.2.0-np111py35_0\n    ipywidgets:       5.2.2-py35_0\n    jupyter:          1.0.0-py35_3\n    nb_anacondacloud: 1.2.0-py35_0\n    nb_conda:         2.0.0-py35_0\n    nb_conda_kernels: 2.0.0-py35_0\n    nbpresent:        3.0.2-py35_0\n\n```\n\nIt seems like removing jupyter and ipywidgets and.. anaconda itself(?) would have a detrimental effect on the whole jupyter notebook experience.\n I remember being confused by similar things. `jupyter` and `anconda` are _metapackages_: they contain no (or very little) code themselves, but they depend on a lot of other packages, so you can conveniently install a bunch of things by doing `conda install jupyter`. So removing them is not actually as big a problem as it sounds.\n @laurikoobas see my comment here: https://github.com/jupyter/notebook/issues/1805#issuecomment-251237272\n @takluyver, I think this can be closed, the thread have enough information for anyone hitting the same issue/question. Thanks!\n Maybe I missed something, but I just have anaconda3 installed, and still see two kernel entries for conda root, and default as opposed to just python 3. I can't seem to parse here or on #1805 \r\n\r\n1. why this is the case (seems to be 'an extension'?) and \r\n2. how to prevent it on a new install? I teach a lot of new users with ipython+anaconda and this is another major source of confusion.\r\n3. how to correct it on an existing install, without removing all extensions? > why this is the case (seems to be 'an extension'?) and\r\n\r\nYes, it is the nb_conda_kernels extension that provide kernelspec on the fly for your conda envs: https://docs.continuum.io/anaconda/jupyter-notebook-extensions#notebook-conda-kernels\r\n\r\n>how to prevent it on a new install? I teach a lot of new users with ipython+anaconda and this is another major source of confusion.\r\n\r\nThis is shipped by default with Anaconda, you can create one environment with the plain jupyter to have the native experience, or alternative, remove the extension from your root environment with `conda remove nb_conda_kernels`. Notice this will also remove other extension provided with Anaconda and listed here: https://docs.continuum.io/anaconda/jupyter-notebook-extensions# \r\n\r\n>how to correct it on an existing install, without removing all extensions?\r\n\r\nYou can disabling instead of removing the extension, see this link: https://docs.continuum.io/anaconda/jupyter-notebook-extensions#uninstall (check the second paragraph, not the removal of nb_conda).\r\n\r\nHope this helps!","> Any idea why Jupyter shows Python[Root] instead of 'Python 2.7'?\n\nThat's an anaconda thing, it show the environment of python kernel. It does automatically list environment, and the default environment append to me named `[root]`.\n\n@damianavila , @bollwyvl  can you report things up the continuum chain the `[root]` is confusing a lot of users, we had a bootcamp monday/tuesday that thought `[root]` was the user running the kernel.\n\nCan we just change the display_name to be more explicit ? like `Python {version} [{env} environment]`\nMaybe there is already an issue on conda/conda ?\n\n> How do I update Julia to version 0.5? I built Julia from source and it runs from the shell. \n\nThat's a question for the Julia people, in particular the [IJulia repository](https://github.com/JuliaLang/IJulia.jl) I guess. \n Jupyterlab displays \u2018No kernel\u2019 \u2026 but Python is really running.\n\n> On Aug 26, 2016, at 2:11 PM, Matthias Bussonnier notifications@github.com wrote:\n> \n> Any idea why Jupyter shows Python[Root] instead of 'Python 2.7'?\n> \n> That's an anaconda thing, it show the environment of python kernel. It does automatically list environment, and the default environment append to me named [root].\n> \n> @damianavila https://github.com/damianavila , @bollwyvl https://github.com/bollwyvl can you report things up the continuum chain the [root] is confusing a lot of users, we had a bootcamp monday/tuesday that thought [root] was the user running the kernel.\n> \n> Can we just change the display_name to be more explicit ? like Python {version} [{env} environment]\n> Maybe there is already an issue on conda/conda ?\n> \n> How do I update Julia to version 0.5? I built Julia from source and it runs from the shell.\n> \n> That's a question for the Julia people, in particular the IJulia repository https://github.com/JuliaLang/IJulia.jl I guess.\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub https://github.com/jupyter/notebook/issues/1717#issuecomment-242852627, or mute the thread https://github.com/notifications/unsubscribe-auth/AC9i217_bFCpc04PWomNMkkcMtWlW4DHks5qj1ZkgaJpZM4JudWw.\n > Jupyterlab displays \u2018No kernel\u2019 \u2026 but Python is really running.\n\nJupyterLab is alpha version, it's likely a bug in JupyterLab, \n I 17:43:13.136 NotebookApp] Kernel started: e940ab35-80b4-4f06-938f-05cff3a2d61c\nINFO: Precompiling module ZMQ...\nINFO: Precompiling module Nettle...\n[W 17:43:24.414 NotebookApp] Timeout waiting for kernel_info reply from e940ab35-80b4-4f06-938f-05cff3a2d61c\nStarting kernel event loops.\n[E 17:43:29.861 NotebookApp] Uncaught exception GET /api/kernels/e940ab35-80b4-4f06-938f-05cff3a2d61c/channels?session_id=AB70E3A4A70D48B39B67B749446DBF61 (::1)\n    HTTPServerRequest(protocol='http', host='localhost:8888', method='GET', uri='/api/kernels/e940ab35-80b4-4f06-938f-05cff3a2d61c/channels?session_id=AB70E3A4A70D48B39B67B749446DBF61', version='HTTP/1.1', remote_ip='::1', headers={'Origin': 'http://localhost:8888', 'Upgrade': 'websocket', 'Sec-Websocket-Extensions': 'x-webkit-deflate-frame', 'Sec-Websocket-Version': '13', 'Connection': 'Upgrade', 'Sec-Websocket-Key': 'eeztMBqcVc0lsBJ5FZXMEg==', 'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/601.7.7 (KHTML, like Gecko) Version/9.1.2 Safari/601.7.7', 'Host': 'localhost:8888', 'Cookie': 'csrftoken=mA6yl7Xrl6EG3dMhZcOugzLNL8Xw5HRV; jobs-showAll=true; stages-showAll=true; undefined-table-hidden=false', 'Pragma': 'no-cache', 'Cache-Control': 'no-cache'})\n    Traceback (most recent call last):\n      File \"/Users/davidlaxer/anaconda/lib/python2.7/site-packages/tornado/web.py\", line 1401, in _stack_context_handle_exception\n        raise_exc_info((type, value, traceback))\n      File \"/Users/davidlaxer/anaconda/lib/python2.7/site-packages/tornado/stack_context.py\", line 314, in wrapped\n        ret = fn(_args, *_kwargs)\n      File \"/Users/davidlaxer/anaconda/lib/python2.7/site-packages/zmq/eventloop/zmqstream.py\", line 191, in <lambda>\n        self.on_recv(lambda msg: callback(self, msg), copy=copy)\n      File \"/Users/davidlaxer/anaconda/lib/python2.7/site-packages/notebook/services/kernels/handlers.py\", line 296, in _on_zmq_reply\n        msg = self.session.deserialize(fed_msg_list)\n      File \"/Users/davidlaxer/anaconda/lib/python2.7/site-packages/jupyter_client/session.py\", line 859, in deserialize\n        raise ValueError(\"Invalid Signature: %r\" % signature)\n    ValueError: Invalid Signature: 'stderr'\n\n> On Aug 26, 2016, at 2:24 PM, David Laxer davidl@softintel.com wrote:\n> \n> <Screen Shot 2016-08-26 at 2.23.50 PM.png>\n> \n> > On Aug 26, 2016, at 2:22 PM, Matthias Bussonnier <notifications@github.com <mailto:notifications@github.com>> wrote:\n> > \n> > Jupyterlab displays \u2018No kernel\u2019 \u2026 but Python is really running.\n> > \n> > JupyterLab is alpha version, it's likely a bug in JupyterLab,\n> > \n> > \u2014\n> > You are receiving this because you authored the thread.\n> > Reply to this email directly, view it on GitHub https://github.com/jupyter/notebook/issues/1717#issuecomment-242855226, or mute the thread https://github.com/notifications/unsubscribe-auth/AC9i21G3hCr2R9N2agjeoZbVjYSsFP7Pks5qj1kpgaJpZM4JudWw.\n > @damianavila , @bollwyvl can you report things up the continuum chain the [root] is confusing a lot of users, we had a bootcamp monday/tuesday that thought [root] was the user running the kernel.\n> Can we just change the display_name to be more explicit ? like Python {version} [{env} environment]\n> Maybe there is already an issue on conda/conda ?\n\n@Carreau last version of nb_conda_kernels shows `Python [default]` and `Python [conda root]` and `Python [conda: name_of_env]`. That should make things less confusing...\n","Let's see what happens...\n","You might want to make sure HOME is set correctly. It's also possible that you will have a better experience launching via a small shell script, to ensure a full shell environment is established, rather than launching `jupyter` directly\n Thanks a lot @minrk !!!\n\nI've just set the environment variable HOME in my supervisor config file and now everything works fine.\n\nCheers,\nWalter \n","I'm afraid not. The terminal is only supported on *nix machines (Linux, OS X, FreeBSD).\n This is because Windows does not have TTY based terminal support.\n\nOn Thu, Jun 25, 2015 at 2:06 PM, Kyle Kelley notifications@github.com\nwrote:\n\n> I'm afraid not. The terminal is only supported on *nix machines (Linux, OS\n> X, FreeBSD).\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/172#issuecomment-115398608.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Okay, thanks.\n is it possible to get it working wiht PuTTY?\n Or cygwin?\n [winpty](https://github.com/rprichard/winpty) might be a viable option, as well.\n We've looked at winpty. It might do what's necessary, but take a look at the instructions to build it - \"Winpty requires two g++ toolchains...\". We definitely don't want to support or recommend something that complex.\n\nI think the best hope for this is that apparently Microsoft put an ssh server for powershell into Windows 10. I'm not exactly sure how that works, but if it's robust, we might be able to use it. Has anyone tested that out? What do you have to do to get it to work? Can you e.g. run the Python shell inside it?\n I have tried a lot of ways including installing lots of modules ,and all failed.\noh,I want a pc of macos .\n installed terminado can't fix \n now i suggest you to install anaconda,not terminado.it installs with a lot of pakages which will save you much time and miss a lot of pakage error.\n I got it to work on windows 10, mingw, visual studio 2015. \r\n![image](https://cloud.githubusercontent.com/assets/3673651/22023782/9fffee1c-dc95-11e6-8e0b-e726854e48de.png)\r\n\r\n\r\n","@conormdurkan I'm not able to reproduce using Chrome on OS X. What browser are you using?\n\nScreenshot:\n\n![screenshot](http://g.recordit.co/3rpynVkR3W.gif)\n","If you look at the source of the page in the browser, what does the `<script>` tag loading Mathjax have for the `src` URL?\n Without `c.NotebookApp.mathjax_url`:\n\n```\n<script type=\"text/javascript\" src=\"/static/components/MathJax/MathJax.js?config=TeX-AMS_HTML-full,Safe&delayStartupUntil=configured\" charset=\"utf-8\"></script>\n\n<script type=\"text/javascript\">\n// MathJax disabled, set as null to distingish from *missing* MathJax,\n// where it will be undefined, and should prompt a dialog later.\nwindow.mathjax_url = \"/static/components/MathJax/MathJax.js\";\n</script>\n```\n\nWith `c.NotebookApp.mathjax_url = '/static/components/mathjax/mathjax.js'`:\n\n```\n<script type=\"text/javascript\" src=\"/static/components/mathjax/mathjax.js?config=TeX-AMS_HTML-full,Safe&delayStartupUntil=configured\" charset=\"utf-8\"></script>\n\n<script type=\"text/javascript\">\n// MathJax disabled, set as null to distingish from *missing* MathJax,\n// where it will be undefined, and should prompt a dialog later.\nwindow.mathjax_url = \"/static/components/mathjax/mathjax.js\";\n</script>\n\n```\n So that looks like it is taking effect correctly in the template. Maybe we need to do something else to set where it loads extensions from?\n It is strange.\nWorks: `c.NotebookApp.mathjax_url = '/static/components/MathJax/MathJax.js'`\nWorks: `c.NotebookApp.mathjax_url = '/static/components/mathjax/MathJax.js'`\nDoes not work: `c.NotebookApp.mathjax_url = '/static/components/mathjax/mathjax.js'`\n\nSo I guess this is a MathJax issue rather than a Jupyter notebook issue.\n Aha, I bet it's looking for `MathJax.js` at the end when constructing the path to extensions.\n Yes, looks like you are right. Now it is working :-)\n","Tests are passing locally.\n","Asserts in zeromq are always a bug in that package, so there is probably not much we can do about it any Python package. Can you include `conda list` to help track this down? It's been a few years since I've seen it myself.\n","Unfortunately not fixed by #1701. I've replicated this in Firefox and Chromium, rebuilt the JS (`python setup.py css js`) and ensured that it's not browser caching.\n We had to update some CSS in JupyerLab to accommodate the version change: https://github.com/jupyter/jupyterlab/pull/800\n Interestingly, this seems to be happening no matter which version I set it to, even 0.33.0.\n nvm, git bisect tells me it happened in the bump to 1.0. investigating.\n\nIt's strange, since I'm running it with 1.0 in paws.wmflabs.org and it works fine...\n @takluyver can you try https://github.com/yuvipanda/notebook/tree/fix-xtermjs?\n","How would you navigate to the root directory listing if the home link is overridden? This link is part of the path breadcrumbs, and I think should always take you to the root tree listing. Note that the default_url, which is where clicking the Jupyter _logo_ takes you is already configurable. That is most analogous to other web application \"home URLs\", not the little house in the breadcrumbs.\n @anderbubble My plan was to replicate the feature that the logo provides for links such as the user's home directory. So if the user has full system traversal that if they decide they'd rather not always go back to root, but their home. I was hoping this would provide more customization and maybe easier for some users to understand the meaning of that home button. I imagine that moving to root could be done by going one parent up at a time and that this wouldn't happen often if it is customized to a directory they regularly return to.\n > @anderbubble My plan was to replicate the feature that the logo provides for links such as the user's home directory. So if the user has full system traversal that if they decide they'd rather not always go back to root, but their home. I was hoping this would provide more customization and maybe easier for some users to understand the meaning of that home button. I imagine that moving to root could be done by going one parent up at a time and that this wouldn't happen often if it is customized to a directory they regularly return to.\n\nThe ability to get back to the hub make sens, but I doubt  changing the meaning of the home icon is the right way to do it, though we really appreciate the thought, and will consider that. Another similar request we had was how to access multiple drives on windows whic would require modification of the UI as well. \n\nSide note and comment about the commit themselves when you make a pull request:\n\nCan you avoid to add files like the sqlite one and other file not relevant to the change on the PR ?\nIf you are new to git feel free to ask questions. \n\nWe also prefer not to trim whitespace in non modified lines of files, we would appreciate if you could configure your editor to not do that when contributing. The reasoning has mostly 3 points:\n- It create conflicts between PRs. \n- it make review harder, \n- It screws up looking at the history if we need to git blame. \n\nFeel free to ask if you have any questions.\n > I doubt changing the meaning of the home icon is the right way to do it\n\nI'd argue that notebook is already breaking the meaning of the home icon in this sense. In every UI I've used, a home icon goes to the home directory. We're just trying to maintain that UI concept while allowing the user to navigate outside of their home directory as well.\n\n> Another similar request we had was how to access multiple drives on windows whic would require modification of the UI as well.\n\nMakes sense enough, and I don't want to undervalue the impact of changes to the UI. Still, allowing the behavior of the home button to be configured shouldn't break that for anyone who doesn't wish to change it.\n If the icon is the source of confusion, I would propose that we change it from a house to something else that indicates the \"root\" of the served directory. What we have is a breadcrumb for the root of the served directory (which usually does not include the user's home, so the home directory cannot be navigated to), not a link to 'home'. The \"default URL\" for a given notebook server is already defined and configurable, and currently linked from the Jupyter logo. This is what people are already using to default to users' home directories in JupyterHub instances with access to the whole filesystem. I don't think we should have two separate definitions for a default URL, though I'm happy to consider adding new links to the default URL if the upper-left logo convention is insufficient.\n\ncc @ellisonbg for UI/icon/link questions\n To avoid ambiguity, I suggest that the home icon be replaced with a [folder icon](http://fontawesome.io/icon/folder/) or the name of the current working directory (served directory).\n @gnestor I think a different icon is a good idea. A folder icon could work, in which case I'd advocate for hovertext that displays the served path. The name of the path itself might be ok; but I'm afraid of losing the visual abstraction that the current icon provides (e.g., people don't _have_ to care what the served directory is).\n\nI'd also put forward an icon of [a tree](http://fontawesome.io/icon/tree/) as a potential alternative (though I must admit I don't actually like _that_ tree icon).\n I'm happy with where this discussion is going, btw. It seems like our desired functionality exists, it's just a UI concern. To that end, I want \"clicking on the logo to get to the default directory\" to be more discoverable. Until @Amerterasu discovered it as part of this effort, I had no idea it did that.\n Folder icon:\n\n![image](https://cloud.githubusercontent.com/assets/512354/18446809/c4f28836-78d8-11e6-8f2a-17719c5bdb68.png)\n\nDirectory name:\n\n![image](https://cloud.githubusercontent.com/assets/512354/18446904/2ed39bc8-78d9-11e6-9a02-18911968ed59.png)\n I take my suggestion of tree back, along with any reservations about using the folder icon. That looks great.\n Agreed that look great\n For simplicity's sake, I think we should just open a new PR with only the icon change and close this one given the extra files (e.g. sqllite) and trimmed whitespace. The only line that needs to be changed is https://github.com/jupyter/notebook/blob/master/notebook/templates/tree.html#L99.\n Can we get some indication of the function of clicking on the logo in that PR, too? Or should that be a yet separate PR?\n @anderbubble Ok, good! I created a new PR regarding new root breadcrumb icon: https://github.com/jupyter/notebook/pull/1760. \n\nRegarding the href of the Jupyter logo...\n\n> The \"default URL\" for a given notebook server is already defined and configurable, and currently linked from the Jupyter logo.\n\n@minrk Can you elaborate on how to configure the href of the Jupyter logo? \n @gnestor see `NotebookApp.default_url`\n @anderbubble Ok, so you're familiar with how to configure the default URL. What more would you like to see changed?\n @gnestor I think what's missing is a visual indication that the logo in the upper-left corner is a clickable link that takes you somewhere, or where it takes you. While this is a convention on many websites (this one included), it's not necessarily clear that the logo is a link (though it does hover as a link, and show the not-super-clear hover text 'dashboard', I believe). Perhaps expanding the hover text to be clearer is sufficient?\n @gnestor is correct. I don't think expanding the hover text is particularly sufficient, though. I understand that \"click on the site's logo\" is a convention on websites for \"return to the home/front page\" I definitely didn't even think to try it in this context. The \"click-on-logo-for-home\" idiom implies a association between the top-level branding and the top-level-content: I'd almost expect clicking on that logo to take me to http://jupyter.org before I'd expect it to take me to whatever the default directory happens to be in the notebook file browser.\n @anderbubble and @Amerterasu Ok, feel free to submit a new PR (or clean up this one as per @minrk's suggestion) proposing something more intuitive or user-friendly. \n Let's close this PR for now. Feel free to open a new one to provide some visual indication that the Jupyter logo in the upper-left of the dashboard is a link and where it links to.","Thanks. Nice catch !\n",":+1: \n Tests are good \ud83d\udc4d \n I enabled appveyor, it should ignore any branch without an `appveyor.yml` but I hope it will start to build this PR.\n\nThanks @minrk for starting this !\n Closing and reopening to see if that triggers Appveyor.\n Several test failures on Py2 appear to relate to it not getting errors when expected.\n > Closing and reopening to see if that triggers Appveyor.\n\nOh, good point. \n\n> Several test failures on Py2 appear to relate to it not getting errors when expected.\n\nEasy path forward if skip-if windows for now.\n I only got Python 3 passing yesterday, but moved on before dealing with the Python 2 errors. I'll spend a little more time figuring out exactly why they fail before punting to skip-on-Windows. It's a bit odd that they only fail on Python 2.\n Most of the py2 failures were because of a real bug. The samefile backport in #1142 didn't work on Python 2 because the stat fields used (st_ino, st_dev) always return 0 on Windows + Python 2, causing the function to return True for any pair of files. It works everywhere else, though. I updated the method to do case-insensitive file comparison plus full stat comparison (times included), and use the stdlib `os.path.samefile` where it's available (everywhere but win+py2).\n\nAn alternative would be to make the fill-in same file just do `path == other_path`, which would never give a false-positive, but would disable renaming with only changed case on Windows + Python 2. Since it works correctly on Python 3 due to samefile, I don't have a huge preference either way.\n I also have no strong preference, but since you have this working now, let's go with this unless/until we want to do something different. :-)\n Yeahh ! Thanks @minrk  !\n","Awesome.\n","Thanks for the report! A fix meant to catch errors in custom.js (#1378) ended up moving the load time to a later point, which will be definitely after app_initialized and _possibly_ after notebook_loaded (it generally still sees notebook_loaded for me). #1732 should catch errors in a way that doesn't delay custom.js loading.\n Thanks @minrk! Just tested your fix and confirmed it works.\n Closed with https://github.com/jupyter/notebook/pull/1732\n","Whether you need sudo depends on your permissions for the target directory. In this case, `sys-prefix` is `/usr` because presumably you are using the system Python. Given that, ou almost certainly **do not** want to use `--sys-prefix` in this case. Try removing the argument.\n Ah thanks! \n","@minrk Is there anything I can do to test? If not, is this ready to merge?\n @gnestor see the snippet in #1730, you should see the log statements for the given events.\n I tested and I can verify that custom.js loads first however I am encountering an issue with Codemirror so the notebook is not fully loading...\n\nScreenshot:\n\n![image](https://cloud.githubusercontent.com/assets/512354/18533148/c57c9ef4-7a95-11e6-8c05-0ed27c715e5a.png)\n\nI believe it has something to do with the base of this branch:\n\n![image](https://cloud.githubusercontent.com/assets/512354/18533176/f1b24014-7a95-11e6-87b4-3b18c7ce0504.png)\n I think webpack shouldn't be showing up at all, since this is a PR against 4.x. Try cleaning everything out when you switch to the branch:\n\n```\ngit clean -xfd\npip install -v -e .\n```\n\nAnd make sure you restart your notebook server.\n @minrk I followed your instructions, tested, and it looks good.\n\n![image](https://cloud.githubusercontent.com/assets/512354/18570073/f179eb58-7b5b-11e6-862e-2f85fc799f9f.png)\n @minrk With this merge, I think we are ready to release 4.2.3? I created [a new _Project_](https://github.com/jupyter/notebook/projects/1) to track issues and PRs assigned to 4.2.3. \n\nAdditionally, this issue is affecting master so we should merge this with master or create another PR if that would be easier. To reproduce:\n1. Add the following to `custom.js`:\n\n``` js\ndefine(['base/js/events'], function(events) {\n    events.on('app_initialized.NotebookApp', function () {\n        console.log('app_initialized.NotebookApp');\n    });\n});\n```\n1. Open a notebook and 'app_initialized.NotebookApp' is never logged. However, code outside the `'app_initialized.NotebookApp'` callback will be called.\n Uh oh, Travis build failed: https://travis-ci.org/jupyter/notebook/jobs/160312310#L967\n @gnestor cool, thanks! Yes, I think we can release 4.2.3.\n\nThe `js/notebook` test seems to have some intermittent failures, I've restarted it. I think it's a race / timeout that we haven't tracked down, but it comes up once in a while.\n Released 4.2.3 with this and one or two small typo PRs marked for 4.2.3.\n Thanks @minrk! How should we go about _forward-porting_ this fix to master?\n Made #1770 manually porting this to master, because there were enough differences between 4.x and master.\n","This is probably related to differences between the code mirror lexer and the underlying JSON parser:\n\nCode mirror probably expects standard LaTeX formatting, which `\\[\u2026\\]` is(technically you aren't supposed to use $$\u2026$$ if you're writing LaTeX as it is a classic TeX command that has nonstandard spacing\u2026 which I'm guessing has been explicitly excluded from activating highlighting for that reason.) \n\nHowever js sees `\\[` as just escaping the [ so it won't render, but `\\\\[ \u2026 \\\\]`will. I guess this would qualify as a bug but I don't know if the place to fix it is on the Jupyter end\u2026 it might be I'm just not sure.\n If I am correct, Mathjax uses `$$ ... $$` in default.\n https://github.com/jupyter/notebook/pull/1757 fixes an issue regarding CodeMirror config for text (markdown and raw) cells. I've tested and syntax highlighting is working for math inside of `$` brackets but still not for `$$` brackets. The question is: was highlighting of math inside of `$$` brackets ever supported? @minrk Do you know?\n","@randy3k yes, that's correct. To do it system-wide (assuming it's a shared single computer), add the line to `/etc/jupyter/jupyter_notebook_config.py`:\n\n``` python\nc. NotebookNotary.secret_file = \"/path/to/notebook_secret\"\n```\n\nNow, there is a **big** caveat to this that you should know before you do something like this:\n\n> A shared secret file means that your users can produce notebooks that when other users _open_ them, execute code immediately as the second user. This is the primary thing that trust protects users from.\n @minrk This isn't working for me. I added the line to `~/.jupyter/jupyter_notebook_config.py` on two different computers. The line points to identical `notebook_secret` files on each computer. A notebook saved on one computer is not trusted by the other.\n @minrk Could you test whether this works as intended?\n I also cannot get it to work.\n @physinet on it!\n","Thanks\n Backported. \n","Do you see any information in the javascript error console? The \"Load failed\" suggests there might be a validity problem in the notebook. Save is disabled in this case because it failed to load the full notebook, so if you saved at that point it would write less than all of the notebook, losing data. There may also be an informative message in the log output in the terminal where you started the notebook server.\n There were no error or other messages in the console and I also have this problem when I create a new (blank) notebook (as described above). \nI have found a workaround so that I can keep working but it requires to overwrite the file with the downloaded one and use the checkpoints (from the saves from the \"first time editing\"-mode) to continue working but it is complicated and obviously not the intended way to use the program :)\n I faced with the same issues trying to save notebook. \r\n\r\nThere was an error in Chrome JavaScript Console:\r\n`main.min.js:87 Uncaught (in promise) Error: Syntax error, unrecognized expression: #new-notebook-submenu-python3_(keras)`\r\n\r\nI found the same error message [here](https://bitbucket.org/tdaff/remote_ikernel/issues/1/cannot-save-notebook) and think that the issues arose because of non alphanumeric characters (bracket signs) in the kernel name. Update:\r\nApparently, this error occurs only when I have notebooks running in an environment.\r\nIf I start the notebook without any (conda) environments on, I can create a new notebook and save it without any problems.\r\nHowever, if I try to create a new notebook using a different environment (Python [python3.5] as shown in the picture), I cannot save it, leading to the error messages described in my original post above.\r\n![condaenvironmentscrop](https://cloud.githubusercontent.com/assets/9751090/22589994/6d8699c4-ea0d-11e6-8202-33b3f3bc5aa4.png)\r\n\r\n That's odd, I don't know why that would affect it. Are there any errors in the terminal where you launched the notebook? Nope, no errors... The exactly same behavior as described in the original post in September occurs now, only that I played around more with the notebook and found this interesting thing (that saving works only from the root..)\r\nAt least I can work from the root now, although it would also be nice to be able to work from environments..","@minrk I assume this logout button is only visible on JupyterHub? Is there anyway I can test this locally?\n You can set a password on the regular notebook:\n\nGenerate a hashed password:\n\n``` python\nfrom notebook.auth import passwd\npasswd('P@$$w0rd')\n```\n\nand store it in `c.NotebookApp.password` in your jupyter_notebook_config.py\n I tested and logout button now works in a terminal page. Merging...\n","This is a [codemirror](http://codemirror.net/doc/manual.html) thing, you have to search codemirror manual, we do not do anything specific for that to happen. \n We probably do want to eventually document things like this somewhere - we shouldn't expect end users to work out what JS text editor we're using and go and look up its documentation. But I don't think we really have the bandwidth to do that at the moment.\n\nConsider it a hidden bonus feature ;-)\n Once we upgrade to codemirror 5.4 we can just point user to Cm docs. \n","@ellisonbg I can't reproduce this. My steps:\n1. Pull master\n2. `npm run build:watch`\n3. `jupyter notebook`\n4. Open a notebook\n5. Scroll to middle of notebook\n6. \"Save and Checkpoint\"\n I've seen this behavior this week, using the current release (not master). But I only see it in one situation: when I am using a lower-res projector. I never see it on my laptop nor desktop. I'm not sure of the exact dimensions nor zoom of the browser (Chrome on Arch Linux). But I can look at details next time I see it jump.\n @dsblank Does it jump down and back up again about 1s later? If so, this is probably the save/checkpoint notification. I observe this behavior in viewports less than 1000px wide.\n @ellisonbg @dsblank Any news on this one?\n @gnestor I believe that you are correct: what I am experiencing is a narrow screen combined with some long text in the save notification. BTW, sometimes if the browser time is different from the server time, you can end up with a message stating \"in about a second\", which may take up valuable screen space.\n I think the only solution is to make the notification area CSS `position: absolute` on narrow viewports which would always take up a dedicated space, regardless of whether a notification is displayed (side note: on master the \"Trusted\" notification is always displayed). \n","![image](https://cloud.githubusercontent.com/assets/5075497/18266447/60dc5ef2-7438-11e6-84df-6abac0ccf221.png)\n\nThere is no custom folder in my config directory, How do I generate it ?  \n","Am I the only one seeing this? I noticed also that the Markdown syntax highlighting has disappeared.\n I see the same thing. Not sure what happened.\n https://github.com/jupyter/notebook/pull/1676/commits/14089ce13941cc110a37993a700b1e1d242baf3d seems to have disabled the mechanism for loading the markdown cell default codemirror config.\n Seems to be fixed by #1757\n","Are you using a self-signed SSL certificate? It is a known issue that Safari does not allow websocket connections on https if the certificate is 'untrusted' (e.g. self-signed or otherwise results in the \"Are you sure...\" prompt on connect). This is the most common cause for kernel connection failing only on Safari.\n Indeed it is a self-signed certificate. I believed that after the \"Are you sure..\" prompt, this would not be the problem. So, the only way to work with Safari is using a 'trusted' certificate? I will stick with firefox then... Thanks and closing the issue.\n","My complete code implementation I have uploaded in https://github.com/dvigneshwer/Spawning_jupyter_notebook_webapp and also have mentioned all the problems I am facing.\n Notebooks are always spawned by web request in the current notebook application. It depends a bit on what you mean by \"spawn\", though.\n\nRight now, when you click a link in the tree view, it navigates to `/notebooks/notebook-name.ipynb`. The javascript on this page then makes a POST request to `/api/services` to open a session and get a kernel for that notebook.\n\nYou can do either or both of these from your own webpage, but you may need to do some CORS configuration if your server and the notebook server are on different domains.\n @minrk Thanks for getting back to me, really appreciate it. \n\nBy spawn I mean to start a notebook application. \n\nI need to exactly do the same like you have mentioned above, when I click on the **start notebook** button in my web app I need to start a notebook application.\n\nIn my current setup both my server and notebook server are in the same machine.\n\nCan you share some relevant link/docs which will help me understand POST request to /api/services.\n If you want to have the entire notebook application, then you probably don't want to POST anything, just create an iframe with the URL for the notebook. In that case, it's probably just the CORS configuration options that you need. You can try:\n\n``` python\nc.NotebookApp.tornado_settings = {\n    'headers': {\n        'Content-Security-Policy': \"frame-ancestors 'yourhost.com:1234'\",\n    }\n}\n```\n\nwhere yourhost.com:1234 is the host+port for your web application, which should allow the notebook to be embedded in iframes served on that host.\n Hi I tried the above approach for embedding the notebook application but failed in it you can check my attempt in https://github.com/jupyter/notebook/issues/1256#issuecomment-244880417\n\nI am gettting the following error,\n\n![image](https://cloud.githubusercontent.com/assets/5075497/18351599/7e52d62a-75f8-11e6-8e82-f04a72332805.png)\n\nMade the above changes in jupyter config python file and but didn't find the custom/custom.js in the ~/.jupyter (could that be a reason of it not working)\n I _think_ you don't want the `http://` in there\n I tried without http:// also I am getting the same error, PFB\n\n![image](https://cloud.githubusercontent.com/assets/5075497/18380100/66546a34-7693-11e6-8f76-7e259e4e35d1.png)\n\nIn this documentation (https://github.com/jupyter/notebook/blob/master/docs/source/public_server.rst#embedding-the-notebook-in-another-website) it says to edit the custom/custom.js file, which is not present in my systems ~/.jupyter directory, could that be a reason why its not working.\n The custom.js is for changing whether links open in new tabs or not, it won't be relevant until you can render a page. Its absence just means the default will be used, you do not need this file unless you want non-default behavior.\n Is there any way to debug this error ? I am not able to understand the error itself ?\n\n@minrk can you suggest any other way to debug this problem ?\n @dvigneshwer You are encountering a CORS (Cross-Origin Resource Sharing) issue. According to the [docs that you pointed to](https://github.com/jupyter/notebook/blob/master/docs/source/public_server.rst#embedding-the-notebook-in-another-website), you need to modify the `jupyter_notebook_config.py` file ([docs](http://jupyter-notebook.readthedocs.io/en/latest/public_server.html#prerequisite-a-notebook-configuration-file)) on your server. \n ![image](https://cloud.githubusercontent.com/assets/5075497/18460759/f18424c2-7991-11e6-9f4b-9e6382f8aee3.png)\n\n@gnestor I made these changes in /home/user/,jupyter/jupyter_notebook_config.py \n @dvigneshwer Try this: `c.NotebookApp.allow_origin = '*'`\n\nSource: https://github.com/jupyter/jupyter/issues/79#issuecomment-164268449\n ![image](https://cloud.githubusercontent.com/assets/5075497/18500252/8b8d2e02-7a63-11e6-82d4-0364dd5eac2c.png)\n\nThis configuration worked fine, I was successfully able to embedd the notebook application in the iframe.\n\n@minrk can you share more details about spawning the notebook application using the api's from the webapp.\n It really depends on what you mean by \"spawning the notebook application\". If you want to launch a notebook with the full UI, then navigating to `[base_url]/notebooks/[notebook-name.ipynb]` (e.g. in an IFrame) is everything. You don't need to make any API requests for that. If you want to launch kernels via the API and write your own notebook application, and want to spawn a kernel for a given notebook, then you make a POST request to `/api/sessions`, as described [in the REST API](http://petstore.swagger.io/?url=https://raw.githubusercontent.com/jupyter/notebook/4.2.2/notebook/services/api/api.yaml#!/sessions/post_sessions).\n Below are the steps I followed to spawn the notebook application in a webapp using the **REST api's of jupyter notebook**\n1. To start a new notebook.ipynb used the PUT api/contents/file_path/name_of_notebook\n\n![image](https://cloud.githubusercontent.com/assets/5075497/18713911/9f09ba26-8031-11e6-85dc-8ed9fb0311ca.png)\n\nI copied the content for the new notebook by using the GET api of a untitled.ipynb (Not really sure if its the correct way to do it, let me know)\n\nBy modifying the POST request body with copy_from I could clone already existing notebook to a new location,\n\n![image](https://cloud.githubusercontent.com/assets/5075497/18715824/4809ff54-8038-11e6-868c-e65b88257896.png)\n\n**Q1 ) But was not able to start a new notebook with a new name with the content of an older notebook, what should api request I need to make ??.**\n\n![image](https://cloud.githubusercontent.com/assets/5075497/18715984/c33dc6a6-8038-11e6-8ccf-e2589afd9b61.png)\n\nI got a response saying only post can copy but the documentation says PUT can also copy to a new notebook name. (Documentation link \n\nhttp://jupyter.readthedocs.io/en/latest/development_guide/rest_api.html)\n1. For seeing this newly spawned notebook json in notebook application, I just had to redirect myself to \n\n![image](https://cloud.githubusercontent.com/assets/5075497/18714930/f8a3bb7e-8034-11e6-95c1-70e79e2a1df5.png)\n\nBut it default started with python2 kernel, this is where I wanted the option of starting any kernel in the webapp\n1. In this step was trying to start a session with the desired configuration of kernel which was the problem in step2 \n\nNotebook session needed the following information in its body, \n\n![image](https://cloud.githubusercontent.com/assets/5075497/18715044/6b642ffe-8035-11e6-80ab-f0a85ee3de7e.png)\n\nThe above information I got from the GET request to /api/sessions/id_of_active_notebook, after which I started a new kernel session using the POST request,\n\n![image](https://cloud.githubusercontent.com/assets/5075497/18716178/78a07336-8039-11e6-8173-a89f6d10bc03.png)\n\nThen I did post request with the above mentioned response,\n\n![image](https://cloud.githubusercontent.com/assets/5075497/18717272/09518b7e-803d-11e6-86b5-3fddb87db668.png)\n\nBy which I was able to get the session as per my configuration.\n1. For closing a particular noteboook just use the Delete Api request with the kernel id.\n\n![image](https://cloud.githubusercontent.com/assets/5075497/18831842/a3afde0c-8405-11e6-871a-1af6f64b2e1d.png)\n\nBelow are the following problems I am facing,\n\nQ2 ). Was not able to **rename the notebook.ipynb** json using the patch request.\n![image](https://cloud.githubusercontent.com/assets/5075497/18714427/4db96818-8033-11e6-9375-f74c96ec7e46.png)\nI am guessing I am giving a wrong body content.\n\nQ3). What is the api I need to call for saving the notebook , right now I have to relia on the auto save.\n\nDuring the above process I encountered problems of mutiple users using the same notebook session via the webapp https://github.com/jupyter/notebook/issues/1777\n ![image](https://cloud.githubusercontent.com/assets/5075497/18859377/2b74982e-8491-11e6-98b2-2b0dd26fd159.png)\n\nI am getting this error when I am trying to create a new notebook using PUT api in js,\n\n```\n// Function to create the notebook function \nfunction put_web_api(url){\n    try{\n        console.log(url);\n        console.log(typeof(url));\n        //contents of an empty notebook     \n        var data = \"{ \\n \\n\\t\\\"content\\\":\\n \\t\\t\\t\\t{\\n\\t\\t\\t\\t   \\t\\\"nbformat_minor\\\": 1,\\n\\t\\t    \\t\\t\\\"cells\\\": [],\\n\\t\\t    \\t\\t\\\"nbformat\\\": 4,\\n\\t\\t    \\t\\t\\\"metadata\\\": {}\\n  \\t\\t\\t\\t}\\n}\";\n\n        var xhr = new XMLHttpRequest();\n        // xhr.withCredentials = true;\n\n        xhr.addEventListener(\"readystatechange\", function () {\n          if (this.readyState === 4) {\n            console.log(this.responseText);\n          }\n        });\n\n        xhr.open(\"PUT\",url,true);\n        xhr.setRequestHeader(\"cache-control\", \"no-cache\");\n        //xhr.setRequestHeader(\"Access-Control-Allow-Origin\", \"*\");\n        // xhr.setRequestHeader(\"postman-token\", \"0bcbe07b-1a89-d95e-688c-9f28c94966f4\");\n\n        xhr.send(data);\n\n        console.log(xhr.status);\n        console.log(xhr.statusText);\n\n        if (xhr.status == 200){\n            return true;\n        }\n        else{\n            console.log(\"Jupyter api did not work\");\n            return false;\n        }\n    }\n    catch(err){\n        console.log(err);\n        return false;\n    }\n}\n```\n\nThe above code works as a python code snippet and in the Postman tool,\n\n```\nimport requests\n\nurl = \"http://localhost:8888/api/contents/demo/Name3.ipynb\"\n\npayload = \"{ \\n \\n\\t\\\"content\\\":\\n \\t\\t\\t\\t{\\n\\t\\t\\t\\t   \\t\\\"nbformat_minor\\\": 1,\\n\\t\\t    \\t\\t\\\"cells\\\": [],\\n\\t\\t    \\t\\t\\\"nbformat\\\": 4,\\n\\t\\t    \\t\\t\\\"metadata\\\": {}\\n  \\t\\t\\t\\t}\\n}\"\nheaders = {\n    'cache-control': \"no-cache\"\n    }\n\nresponse = requests.request(\"PUT\", url, data=payload, headers=headers)\n\nprint(response.text)\n```\n\nGot the following output (Json response),\n`\n{\"mimetype\": null, \"writable\": true, \"name\": \"Name4.ipynb\", \"format\": null, \"created\": \"2016-09-27T03:36:41.103724+00:00\", \"content\": null, \"last_modified\": \"2016-09-27T03:36:41.103724+00:00\", \"path\": \"demo/Name4.ipynb\", \"type\": \"notebook\"}\n`\n\nJupyter notebook log,\n\n![image](https://cloud.githubusercontent.com/assets/5075497/18860226/0faca174-8499-11e6-8d0c-37ebe025ee32.png)\n\nWhen I googled searched about the error it says we need to enable Access-Control-Allow-Origin in the server we are trying to access but I have already enabled it.\n","Receiving json error when trying to open the changed notebook. Notebook will not open.\n So the error was that there were two versions of Python listed in the \"metadata\" https://github.com/jupyter/notebook/pull/1742/commits/ec632df150309c3c7ba861fdaae8bcdb0d75c8ed#diff-dd2b9f636222197ec2b761794b5dfc1dR600\n\nRemoving one of the versions solves the build problem. What's odd is that the \"metadata\" saved the second version and \"anaconda cloud\" a few lines before (bug?).\n\ncc/ @minrk @michaelpacer \n Is there a way to get Travis to include a docs build as part of the testing suite? If so, we might want to incorporate that so there are fewer cases of tiny changes breaking docs builds that require entirely new PRs.\n I've done Travis builds for docs on other projects. I haven't done it with notebooks in docs but I agree it would be good to have the docs build tested.\n","I believe this is what you are looking for: https://github.com/jdfreder/jupyter-tree-filter\n\nTo install, I suggest installing [jupyter_nbextensions_configurator](https://github.com/Jupyter-contrib/jupyter_nbextensions_configurator) which is an extension manager for the Jupyter Notebook. Otherwise, follow the [nbextension installation instructions](https://github.com/ipython-contrib/jupyter_contrib_nbextensions#installation).\n @gnestor Exactly what I was looking for. Thanks.\n @gnestor - thanks for the suggestion\r\n\r\nhowever, it doesn't look for the file in sub-directories... maybe that's something to be implemented too... @ggrrll I suggest that you create a feature request issue on the https://github.com/jdfreder/jupyter-tree-filter repo.","Lgtm, though I think the anaconda cloud thing is going to come up anytime anyone runs, saves and commits a notebook from a conda env. We might want to look into why that is breaking things.\n @michaelpacer I believe you are correct with the anaconda cloud thing. Let's keep an eye on the next notebook change in a doc to see why the python version was appended to the metadata instead of replacing the python version in the original PR.\n\nThe second Python version is causing the issue since there is no `,` between the two.\n","@willingc Let me know how I can help!\n","The way Notebook Server works we abstract the dealing with file through the \"contents manager\", so that the frontend is unaware that the backend is Filesystem, Postgres, GoogleDrive, DropBox, or whatever. \nBaking git in would break that assumption, and force us to deal with the case where git is not installed. \nAlso why git and not mercurial. The git operation that you want to do sand support start to be complex and require lots of UI  (that even github does not provide). \n\nSo we are staying (and will probably stay) away from adding git in our interface for a log time. \n\nThough,  the notebook server support extensions, and you should have all the hooks necessary in Notebook to do that. \n\nWe'll do a basic on how to write extension at SciPy in a couple of weeks, with some written docs if you cannot attend. \n\nClosing as this is not something we will have in the core, but feel free to ask questions if you want to try writing an extension.\n OK.  I can't make SciPy, sadly, but will keep an eye out for the docs.  \n On the other hand, you could just add all of them.  Or offer them as extensions.  Start with the what you think will be most used and work your way down to least used.  It would certainly help with on-ramping new users to have an easier way to get data in and out of docker instances. \n We are splitting things into more repo to get more things **out** of the core, not in. And the bandwidth we have to make extensions is quasi null. As when something is in the core we become the de-facto maintainer, we can't afford to get everything in, especially as the code quality need to be higher if the thing ship with the Notebook. \n\nIf Someone does it as an extension, and it get popularity we can consider move it in the core once it's considered stable. \n\nHave a look at https://github.com/jupyter/scipy-advanced-tutorial for the tutorial material. \n That makes perfect sense.  Maybe one thing to add to the core -- eventually\n-- would be an extension manager. It could pull a list from a central\nrepository that refers to other repositories maintained by other folks. My\nguess is that you've already thought of that.\n\nOn Saturday, June 27, 2015, Matthias Bussonnier notifications@github.com\nwrote:\n\n> We are splitting things into more repo to get more things _out_ of the\n> core, not in. And the bandwidth we have to make extensions is quasi null.\n> As when something is in the core we become the de-facto maintainer, we\n> can't afford to get everything in, especially as the code quality need to\n> be higher if the thing ship with the Notebook.\n> \n> If Someone does it as an extension, and it get popularity we can consider\n> move it in the core once it's considered stable.\n> \n> Have a look at https://github.com/jupyter/scipy-advanced-tutorial for the\n> tutorial material.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/175#issuecomment-115992909.\n\n## \n\nDon\n202-503-4132\ndonald.braman@gmail.com\n Our frontend is going to get more modular, which will make it much easier\nfor third parties to build extensions that do things like this.\n\nOn Sat, Jun 27, 2015 at 2:16 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> We are splitting things into more repo to get more things _out_ of the\n> core, not in. And the bandwidth we have to make extensions is quasi null.\n> As when something is in the core we become the de-facto maintainer, we\n> can't afford to get everything in, especially as the code quality need to\n> be higher if the thing ship with the Notebook.\n> \n> If Someone does it as an extension, and it get popularity we can consider\n> move it in the core once it's considered stable.\n> \n> Have a look at https://github.com/jupyter/scipy-advanced-tutorial for the\n> tutorial material.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/175#issuecomment-115992909.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n We even have a proof of concept [here](https://github.com/ipython-contrib/IPython-notebook-extensions/pull/164)\n","You can accomplish this by using Chrome's Find feature:\n\n![image](https://cloud.githubusercontent.com/assets/512354/18453589/d89eceb4-78f4-11e6-851f-225252fa1ead.png)\n There is also a Jupyter Notebook extension that does exactly this: https://github.com/jcb91/jupyter_highlight_selected_word\n","This is in progress in #1905, but we have identified a security concern with viewing HTML files, so we're bumping it to 5.0.\n","@piec Thanks for this!\n","Also, had to deal with this error:\n\n```\nhttps://github.com/webpack/css-loader/issues/145\n```\n Yes, this appears to be the result of using a legacy version of Node (probably Node <4).\n\n@Carreau @willingc Should the docs include a minimum Node version in the installation requirements? I just searched and I don't see any mention of Node as a requirement.\n @dsblank Sorry! Were you using the following links or docs from another spot? If from another spot, we should update that place to give users a bit more guidance.\n\nhttps://jupyter-notebook.readthedocs.io/en/latest/contributing.html\nhttps://jupyter-notebook.readthedocs.io/en/latest/contributing.html#installing-node-js-and-npm\n\nThe second link contains an important step with Ubuntu/Debian since the legacy node requires installation.\n\nMost importantly, we are happy to have any doc contributions or corrections. Please feel free to ping me if you run up against something like this in the future.\n\n@gnestor Feel free to add a note about using an up to date version of node. Thanks for following up!\n @willingc Ok it looks like https://jupyter-notebook.readthedocs.io/en/latest/contributing.html#installing-node-js-and-npm covers it. Thanks. \n\n@dsblank Feel free to close.\n @willingc I did follow those instructions. The only way I could get `nvm` as a command was to do the above. I think that this is a separate issue.\n Also note that the issue pointed to here https://github.com/webpack/css-loader/issues/145 is another issue, I think because of version incompatibilities.\n\nI think that docs you point to could use some checks (\"at this point you should be able to run the following: node, nvm, npm, ... with these versions.\") and followed by troubleshooting hints.\n @dsblank Thanks for the suggestions and we'll take a look at improving.\n\n@gnestor I'm traveling today. Would you mind taking a look at the node/webpack process? Thanks!\n We add the following in JupyterLab to work around the css-loader issue: https://github.com/jupyter/jupyterlab/blob/d32b3f8180cc1ec5bcad25b1ddc9b5d3f6924674/jupyterlab/webpack.config.js#L4-L6\n @blink1073 Thanks for confirming; I had to add that line too.\n @blink1073 Thanks for adding this in \ud83d\udc4d \n @blink1073 Should I submit a PR to notebook adding the es6-promise polyfill to the webpack config?\n\n@dsblank Where are you seeing the following: \"at this point you should be able to run the following: node, nvm, npm, ... with these versions.\" I don't see it at https://jupyter-notebook.readthedocs.io/en/latest/contributing.html#installing-node-js-and-npm. I'd like to add that nvm is not a requirement for installing or running the notebook (nvm is a version manager for Node), just a non-legacy version of Node, so `brew install node` (on OS X) can be used in lieu of: \n\n```\ncurl https://raw.githubusercontent.com/creationix/nvm/v0.16.1/install.sh | sh\nnvm install 5.6\nnvm use 5.6\nnpm upgrade -g npm\n```\n @gnestor I was suggesting that text like that should be added. That is, it would be helpful to have checks, and also troubleshooting along the process.\n\nI am new to this the notebook development process; I'm just reporting the problem I had, and what appears to have resolved it. I'm using Ubuntu.\n @dsblank Ok, you're on Ubuntu. Did you try `sudo apt-get install nodejs-legacy npm`? I did a little reading and the `nodejs` Ubuntu package does not provide a `node` command while the `nodejs-legacy` package does.\n @gnestor, I'd say add the polyfill to the webpack config, the move it from bower to an npm requirement.  \n","@dsblank I'm happy to help with this PR. Can you make the changes suggested by @minrk or check the [\"Allow edits from maintainers\"](https://help.github.com/articles/allowing-changes-to-a-pull-request-branch-created-from-a-fork/#enabling-repository-maintainer-permissions-on-existing-pull-requests) box in the right column on this page and I will give it a try?\n Ping @dsblank - do you have time to finish this up, or should @gnestor take it over and push it to completion?\n @gnestor I'd like to land this as part of the push towards 4.3. Can you make a branch from @dsblank's branch, fix the things discussed above, and open a new PR?\n @takluyver Sure thing!\n Thanks for picking this up! \n Closing this in favour of #1905, which build on it.\n","@damianavila - sounds like the conda kernels thing might be interfering here.\n Hi Thomas Kluyver,\nIs there anything that you see I might be missing in my settings for django with IPython. \nThanks,\nVenkatesh Patil\n Nothing that I see, but I don't know Django.\n I'm not sure why I get the error : CommandError: No notebook (Python) kernel specs found\nwhen Under home directory .local/share/jupyter/kernels folder there is a kernel.json file\n `kernel.json` should be another level down, inside a folder with the kernel name. I.e.\n\n```\n$ ls ~/.local/share/jupyter/kernels/python3/\nkernel.json\n```\n Sorry, It is under python2 folder: \n~/.local/share/jupyter/kernels/python2/kernel.json\n Then I'd guess it is the conda kernels thing interfering. Pinging @damianavila again.\n Sorry to be late... @venkateshpatil, I don't know how Django work with the notebook, but as a preventive measure, you can disable the nb_conda_kernels and the other extensions, or alternative, remove them.\nSee this section for more info: https://docs.continuum.io/anaconda/jupyter-notebook-extensions#uninstall\n\nI can not debug your scenario now, but at least what I referenced above would help you to keep working... if the nb_conda_kernels is the interfering thing... \n\nLet's us know how it goes.\n\nCheers.\n Hi @damianavila ,\nThank you so much for your suggestion. It worked now after uninstalling the extensions.\n$ python manage.py shell_plus --notebook\n[I 09:09:19.586 NotebookApp] Writing notebook server cookie secret to /run/user/1000/jupyter/notebook_cookie_secret\n[I 09:09:19.831 NotebookApp] Serving notebooks from local directory: /home/venkateshpatil1/data-platform/data-platform/SourceCode\n[I 09:09:19.832 NotebookApp] 0 active kernels\n[I 09:09:19.832 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/\n[I 09:09:19.833 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[W 09:09:19.833 NotebookApp] No web browser found: could not locate runnable browser.\n[I 09:10:56.789 NotebookApp] 302 GET / (::1) 3.85ms\n[I 09:11:21.718 NotebookApp] Creating new notebook in\n[I 09:11:23.978 NotebookApp] Kernel started: 61acd360-64fd-423e-85c3-c41e2ef725b1\n[I 09:13:23.901 NotebookApp] Saving file at /Untitled.ipynb\n[I 09:17:23.889 NotebookApp] Saving file at /Untitled.ipynb\n @venkateshpatil1 thanks for the report. Eventually, it would be nice to research into the issue but, for now, glad you have it working. @takluyver, I think you can close this one for now.\n Thanks Damian :-)\n","This fixes the issue for me, thanks.\n I have tested and it fixes Markdown syntax highlighting and line soft wrapping for me. Merging...\n","@Carreau @minrk Can you reproduce?\n Yup, I see this, too. Maybe related to the recent xterm change?\n","See also #1724.\n\nPinging @yuvipanda \n This definitely is a nicer fix than the one I had!\n Tested and works nicer than mine in both firefox and chrome. \n\n@takluyver I'm going to merge this unless you've objections?\n No objections from me - I haven't really looked at this stuff for ages in any case. Merge away :-)\n Done! Thanks @gnestor :)\n","\ud83d\udc4d \n","Have you checked the access permissions of the notebook file or parent directory? The \"permission denied\" error message is the result of an `EPERM` or `EACCES` error: https://github.com/jupyter/notebook/blob/6dcfc4d35284eee9ce3e39e1d04d469ce7c2614d/notebook/services/contents/fileio.py#L232\n I found in my directory there was a copy of the notebook, MyCode.ipynb, that appeared as .~MyCode.ipynb.  I don't know what the prefix .~ means.  There was also checkpoint file.  I deleted both the file with the .~ and the checkpoint and it now seems to work.\n\nThanks for responding to my question.  If you happen to know what was going on, I'd still be interested in finding out.\n @minrk Do you know about `.~notebook.ipynb` files?\n No, I'm still pretty new to Jupyter, although I really like it.\n `.~` is the atomic save intermediate, which will only be left on-disk if save fails to write the actual intended file. The prefix is chosen as one that is known to be ignored by some things like dropbox.\n\n**edit:** I wrote autosave, where I meant atomic save\n Interesting, that file must have been conflicting with my save permissions.  Appreciate the help!\n @minrk Thanks for clarifying!\n\n@JRocki Feel free to close this if the issue is resolved.\n","That's very strange indeed. What OS? What do you get from `pip list` or `conda list` in the environment where the notebook server is running?\n\nIs the notebook server running locally, or do you have a remote server?\n @minrk If the server is running locally, could the invalid header be inspected in the server's logs?\n @minrk The notebook is running locally and I get it from `pip list`. My PC OS is Windows 8.1. And I tried to rename the file on IE11, but it did not work well either.\n There should be an error in the logs if it is raised by the server. What's strange is that I couldn't find the error message in either the tornado or Jupyter source, so I don't know what is producing it. Perhaps a proxy?\n I can't find the error in CMD log, either. \nI'm not a professional programmer but a student who uses it for something interesting. What else can I offer to fix this problem?\n It seems like it has to be something in between your browser and the server. Does restarting the notebook server work? Can you save _any_ notebooks at all, in any browser?\n\nDo you have any proxy configuration, firewall, or AV software running? If so, you might try temporarily disabling it to see if that is the culprit.\n I find the answer ---- I delete hosts then I can rename in browser. The host file changes IP for localhost, I think.\nNow notebook works well. Thank you for your help.\n @Akelio-zhang Great! Feel free to close \ud83d\udc4c\n @Akelio-zhang \r\ncould you tell me how to delete hosts? @jyokako \r\nIt depends on your OS which determines your hosts file's location. Also, you may try to close any proxy configuration, firewall, or AV software running to fix this problem as minrk said.","@takluyver Can you review and test?\n Looks good to me, thanks.\n","@jasongrout I've enabled \"allow edits from maintainers\" so feel free to contribute to this PR.\n @gnestor what's WIP here? looks good to go, here (I've done this same bump previously while tracking down an unrelated bug, and didn't encounter any issues).\n @minrk Just wanted to make sure... I'm not sure what all depends on Codemirror. Feel free to merge \ud83d\udc4d\n Thanks! Codemirror issues caused by minor updates are generally rare / weird edge cases, so the main way we have to test is getting it in the hands of people running on master.\n","@blink1073 I see that moment and underscore are listed as both npm and bower dependencies so I figure that they can be removed from bower. However, removing them causes conflicts... How do I resolve conflicts when changing dependencies?\n What do you mean by conflicts, merge conflicts?  That should only happen if you weren't basing your PR off of master.\n I'm actually not sure. You can see that \"All checks have failed\" and I'm seeing \"This branch has conflicts that must be resolved\". I created this branch from master, so I'm assuming that this is related to me changing the npm/bower dependencies?\n What I mean is that you probably did not have the latest commit from jupyter/notebook master as the basis of your PR, you probably need to fetch and rebase.\n You're right, something weird happened...\n Travis is complaining that `The command \"pip install -f travis-wheels/wheelhouse file://$PWD#egg=notebook[test]\" failed and exited with 1 during .` for every build. What does that mean?\n I think the significant error message is this bit:\n\n```\n    AssertionError: No files match pattern notebook/static/components/es6-promise/*.js\n```\n\nSome files are not landing where the Python packaging machinery expects. The package_data is specified here: https://github.com/jupyter/notebook/blob/179bb24fbf79d153812858126127a91431da3319/setupbase.py#L133\n How can I resolve this `bower.json` conflict? \n It must have changed in master as well - fetch master from github, and then `git rebase master` to start rebasing. This is a bit fiddly if you haven't done it before, but you can probably find info online about it.\n Oh, and once you've rebased you'll need to force push (`git push -f`) to update the branch on Github.\n Ok I'm just going to forget about removing duplicate dependencies and maybe create an issue about it...\n @blink1073 I think this is ready to be merged...\n \ud83d\udc4d, I don't have push rights in this repo.\n @takluyver I think this ready to be merged!\n","[nbconvert](https://github.com/jupyter/nbconvert) is responsible for exporting to PDF, I suggest submitting an issue there...\n Thanks for the heads-up. Will do that.\n","For questions about the Julia kernel, you might want to ask at: https://github.com/JuliaLang/IJulia.jl\n I believe this problem is more close related to jupyter notebook itself\n https://github.com/JuliaLang/IJulia.jl/issues/464\n","@Carreau I am following your lead from https://github.com/jupyter/notebook/pull/1423/commits/c04046430d2b10923ae3d08d367b629351283f1d. However, neither the `header` or `toolbar` properties are being persisted in `notebook.config.data` after refresh. I don't fully understand how nbconfig works so I would appreciate your input here (I've enabled \"Allow edits from maintainers\" so you should be able to push to this PR).\n Yeah, nbconfig thing is complex. let me have a look. Thanks for that. \n So it seem you get the config right, the problem is the asynchronicity and the config return defaults before being completly loaded. \n\nif you `cat ~/.jupyter/nbconfig/notebook.json` you can see the values get changed. \n\nYou might want to add a `this.config.loaded.then(function(){stuff(that.config.data)}`\n\nThe `resolve`  part of the promise does not get passed the new config apparently, but that should be fixable in `notebook/services/config.js` around line 34:\n\n```\n ConfigSection.prototype._load_done = function() {\n        if (!this._one_load_finished) {\n            this._one_load_finished = true;\n            this._finish_firstload();  // might want to pass self.data here. \n        }\n    };\n```\n\nDoes that make sens ?\n The idea with the config is that you can create a `ConfigWithDefaults` object, and then you have a choice of:\n\n``` javascript\n// Get a value immediately, using the defaults if real values aren't loaded yet\nvisible = c.get_sync('toolbar_visible');\n\n// Wait for the value if necessary\nc.get('toolbar_visible').then(function(visible) {...});\n```\n @Carreau Your `this.config.loaded.then()` suggestion worked great...\n\nTwo questions:\n1. Is there a place to define default config values so that I don't have to wonder if `this.config.data.Header` is defined or not?\n2. Is there a better place to check the config values and hide/show the header/toolbar than in the initialization of the `Notebook` class (e.g. `Notebook.load_notebook`)?\n > Is there a place to define default config values so that I don't have to wonder if this.config.data.Header is defined or not?\n\nThere's a `ConfigWithDefaults` class, used like this:\n\n``` javascript\nconfigwd = ConfigWithDefaults(this.config, {\n    header: true,\n    toolbar: true,\n});\nconfigwd.get('header').then(function(header) {\n    if (!header) {\n        $('#header-container').hide();\n        ...\n    }\n});\n```\n Thanks @takluyver! I think this is ready for review...\n @Carreau Would you care to review? It's working for me and I think it's quite a bit cleaner given @takluyver's feedback. Two questions for you:\n1. I would like `notebook.line_numbers` to use `ConfigWithDefaults` as well to keep these properties consistent. I tried it and the issue is this: `ConfigWithDefaults` (or `notebook.class_config.set`) saves the line numbers toggle state at `Notebook.Cell.cm_config.lineNumbers` and `ConfigSection` (or `notebook.config.update`) saves it at `Cell.cm_config.lineNumbers`. After switching to `ConfigWithDefaults`, the cells no longer reflected the state in `Notebook.Cell.cm_config.lineNumbers` after refresh. However, if I manually changed the value of `Cell.cm_config.lineNumbers` in `notebook.json`, then they would reflect that. **Sooo, the cells are not accessing the line numbers toggle state from `notebook.line_numbers` but appear to accessing it via `notebook.config.data.Cell.cm_config.lineNumbers`. My question for you: where does Codemirror look to determine whether a cell should display line numbers or not (specifically on load)?**\n2. Is there a better place to put the \"check nbconfig for header/toolbar toggle state and hide/show them accordingly\" behavior than in the initialization of the `notebook` class (like `notebook.load_notebook` for example)?\n I'm giving a seminar today and will talk to a lot of people before and\nafter so won't be online a lot. I'll have a look ASAP.\n\nOn Thu, Sep 22, 2016 at 12:54 PM, Grant Nestor notifications@github.com\nwrote:\n\n> @Carreau https://github.com/Carreau Would you care to review? It's\n> working for me and I think it's quite a bit cleaner given @takluyver\n> https://github.com/takluyver's feedback. Two questions for you:\n> 1. I would like notebook.line_numbers to use ConfigWithDefaults as\n>    well to keep these properties consistent. I tried it and the issue is this:\n>    ConfigWithDefaults (or notebook.class_config.set) saves the line\n>    numbers toggle state at Notebook.Cell.cm_config.lineNumbers and\n>    ConfigSection (or notebook.config.update) saves it at\n>    Cell.cm_config.lineNumbers. After switching to ConfigWithDefaults, the\n>    cells no longer reflected the state in Notebook.Cell.cm_config.\n>    lineNumbers after refresh. However, if I manually changed the value of\n>    Cell.cm_config.lineNumbers in notebook.json, then they would reflect\n>    that. _Sooo, the cells are not accessing the line numbers toggle state\n>    from notebook.line_numbers but appear to accessing it via\n>    notebook.config.data.Cell.cm_config.lineNumbers. My question for you: where\n>    does Codemirror look to determine whether a cell should display line\n>    numbers or not (specifically on load)?_\n> 2. Is there a better place to put the \"check nbconfig for\n>    header/toolbar toggle state and hide/show them accordingly\" behavior than\n>    in the initialization of the notebook class (like\n>    notebook.load_notebook for example)?\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/pull/1769#issuecomment-249010144,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AAUez2t4sDZ71KaM56Al57PNjhchdlrxks5qstzogaJpZM4J_FhF\n> .\n @Carreau Ok no problem!\n > Notebook.Cell.cm_config.lineNumbers\n\nthis is due to the fact that line number could be toggle per-cell. \nI think this is/was a mistake, and I'm fine not storing this config there anymore.\n\nCurrently here is how it seem to work...:\n\nCodemirror instances are created on the `create_element` methods of `codecell.js`, and `textcell.js` (`this.code_mirror = new CodeMirror(input_area.get(0), this._options.cm_config);` lines.\n\n`this._options.cm_config` contain likely the `lineNumber` field which is set on the parent class `Cell` (from `cell.js`) generated on the line `this._options = utils.mergeopt({}, cell_config_data, class_config_data);`, and `class_config_data` get the config synchronously `class_config_data = this.class_config.get_sync();`.\n\nDoes that make (some) sens ?\n Yep, it makes perfect sense. The culprit was https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/js/notebook.js#L1185. I ran into a little error but it's almost there...\n @Carreau Let's merge this and I will work off of another branch to try to get `notebook.line_numbers` to use `ConfigWithDefaults`.\n You are right, let's try ! Thanks !\n","+1\n","Failure seem legitimate. \n Yeah, this doesn't seem to work due to webpack differences. Since it now looks like 5.0 will remove webpack, I'll wait for that to re-issue.\n","`!` in the notebook uses Pexpect, which creates a pty; this is necessary to get programmes like `ls` to behave as they would in a terminal. However, it means that the process' stdout and stderr are combined into a single stream before we ever see them, so we can't treat them differently.\n Gosh :(  That's really a pain in the neck :(\n\nAre there alternatives to `!`, say magic commands, that would rather rely on subprocess or so?  TIA!\n Wouldn't it be desirable to redirect stderr before calling Pexpect?  I claim perfect lack of knowledge in this area...\n I don't think so, but you could easily [make your own magic](http://ipython.readthedocs.io/en/stable/config/custommagics.html) which runs a command with `subprocess`.\n","Can you run `jupyter nbextension list` and paste the output here?\n","I guess you refer to using a Notebook server on Windows.\nYou can try to execute the Notebook server with a VSB script:\n\n``` vbs\nDim oShell\nSet oShell = WScript.CreateObject (\"WScript.Shell\")\noShell.run \"C:\\Anaconda\\python.exe C:\\Anaconda\\Scripts\\ipython-script.py notebook\", 0\nSet oShell = Nothing\n```\n\nSetting `intWindowStyle` parameter of the `object.Run(strCommand, [intWindowStyle], [bWaitOnReturn])` to 0 results in hiding the window. [Details for Windows Script Host](https://msdn.microsoft.com/en-us/library/d5fk67ky%28v=vs.84%29.aspx)\n\nThe only drawback is that you will need to kill the notebook server using a Task Manager (loop for the Python executable) or using pskill or similar.\n Yes, I meant on Windows. Thanks this is fine. I want to switch back to linux but one program is holding me back at the moment. I plan on forking a project to suit my needs but till then I am stuck with stupid and clunky windows.\n","That looks like an IRkernel error - I think I recall seeing similar things before. Sometimes the png device seems to require a running X server. I can't remember the solution, though. @flying-sheep @janschulz ?\n @takluyver @janschulz @flying-sheep \n\n> Sometimes the png device seems to require a running X server. \n\nIn that case, perhaps this just needs some sort of flag before running `jupyter notebook`? \n From a @flying-sheep's PR IRkernel/IRkernel#409, could you try adding this line to your `~/.Rprofile`:\n\n``` R\noptions(bitmapType='cairo')\n```\n this will only work if `capabilities('cairo')` is `TRUE`. if R is compiled with neither cairo nor X11 capabilities, it has to be recompiled.\n @takluyver @flying-sheep So, I'm a bit confused by the solution mentioned above and the other thread: \n\nI will add `options(bitmapType='cairo')` to `~/.Rprofile:`.\n\n> this will only work if capabilities('cairo') is TRUE. if R is compiled with neither cairo nor X11 capabilities, it has to be recompiled.\n\nDo you mean that current version of R should be reinstalled globally? I'm slightly confused what it means to reconfigure a \"misconfigured R system\", or why this issue suddenly started if cairo or X11 capabilities weren't set previously---perhaps the sysadmin reset previous setttings? \n\nApologies for bothering you two\n sorry, i could have been clearer:\n\nyou can use `./configure` to set several options during compiling R, among them X11 and cairo support.\n\none of both is needed on any (non-OSX) system. if there\u2019s none available, `png()` won\u2019t work, a state that i consider broken and which is unsupported by IRkernel. here, only recompiling R works.\n\nlikewise, the _runtime_ configuration for `png()` is broken if R was compiled with exactly one of both, but the `bitmapType` option is set to the unavailable one. here the Rprofile solution works.\n\nand no need to apologize!\n","By setting `table-layout: auto`, we get full-width table for wide-format displays (vs. a left-justified, fixed-width table) without squishing columns on narrow-format displays. \n\n`table-layout: auto`:\n\n![image](https://cloud.githubusercontent.com/assets/512354/18691854/2aedf47c-7f4b-11e6-8663-6ed3bcd672e2.png)\n\n`table-layout: fixed`:\n\n![image](https://cloud.githubusercontent.com/assets/512354/18691872/45600822-7f4b-11e6-9042-dbcf2c7f7ce1.png)\n\n@ellisonbg Thoughts?\n Looks great - two question?\n\n1) What if the table wouldn't otherwise take up the full width (only a few cols). Does the `auto` setting stretch it to full width?\n2) What if the table has many many cols? Does this setting try to squish all of them into full width or will it start to scroll horizontally?\n Also, in JupyterLab, we are using Material Design colors for everything (in particular the greys). Are we doing that here as well?\n - Here's an example of 2 columns and 20 columns respectively:\n  ![image](https://cloud.githubusercontent.com/assets/512354/18692734/1d0ce4ca-7f51-11e6-82d4-6d1117c04bed.png)\n- notebook uses Bootstrap, so we have Bootstrap variables at our disposal. For this PR, I just used the hex for the zebra-stripe color in JupyterLab.\n- I updated the `border-width` for `thead`.\n Hmm, the 2 cols case in wonky. Unless there is a way to limit the width, let's use the fixed approach that we did in JupyterLab.\n Also being a pure style change, we could probably backport this to the next 4.x release...\n\n@Carreau ?\n > Also being a pure style change, we could probably backport this to the next 4.x release...\n\n-1 on backporting a big visual change to a minor release, even if the change is good.\nI like to make the parallel : Visual Design is the API between the screen and the user brain, \nand tend to favor consistency over improvement.\n\nIt's also, I think, a recipe to get questions during tutorials like \"I don't have the same thing how do I get that\".\nAnd we've seen that with matplotlib 2.0 which is an easy thing to remember. Style changed on Major versions, which is easy to remember.\n\nThat's just a preference though. \n +1 for the change otherwise, \nmy _guess_ is that a well chosen \":hover\" on rows can be of great help onwide screen, but that's true from JupyterLab as well.\n\nI would also _strongly_ recommend to read [this piece of news](https://blogs.msdn.microsoft.com/oldnewthing/20160906-00/?p=94255)\n\n> Q: So how do you get people [to upgrade] with urgency?\n> A: Change the wallpaper.\n> ...\n> The theory was that [people] will say, \"Whoa, this is a big deal,\" [...]and they will abandon their old and busted build with the horrible bug and install the new hotness.\n Ok, I will remove that last commit and I agree about backporting.\n @Carreau Sorry, I didn't see your comment! I understand your point about holding off until a major release... According to our _release policy_, UI changes are reserved for major releases. However, I am comfortable releasing this with 4.3 as it changes a non-interactive UI (vs. something interactive, like the menu or toolbar). Given the Windows blog post, we should save the shiny new table for a rainy day \ud83d\ude0b.\n\nRegarding `:hover`, here's a quick stab at it using a lighter shade of the _selected cell indicator_ color:\n\n![screenshot](http://g.recordit.co/sfEjVXTG6P.gif)\n\nI think it's a nice feature to have whether the table is very wide or not.\n\n@ellisonbg What are your thoughts about the hover and backporting given @Carreau's thoughts?\n My only concern about waiting for 5.0 is that release may take a while to get out. Two reasons: i) in the past we have planned on doing that at the same time as JupyterLab 1.0 and ii) there have been Ui changes in master that will require a lot of UI/UX/design review and testing.\n\nBut in general, I do think that pushing major design changes in point releases isn't great. Would love to get @fperez take on that.\n\nIn terms of a hover, I am open to it. But let's merge this PR without it and then play with different hover styles in JupyterLab to see what makes sense.\n > My only concern about waiting for 5.0 is that release may take a while to get out [...] in the past we have planned on doing that [5.0] at the same time as JupyterLab 1.0\n\nAnd that's exactly the reason I **don't** want to backport. There have been a number of things we said we wouldn't do (like make JupyterLab only an extension) exactly to push notebook 5.0 _forward_. \nI also saw that the `notebook_server` was forked from `notebook` which IMHO is too early, and one more reason to neglect the current notebook.\n\nBackporting starts to become hard, and I'm in favor of saying that if you want things out, then some cycles of the developers of JupyterLab should be spent on making 5.0 a reality. I don't have much time to help @gnestor and I don't want to bother him more. PLus with 4.x growing and 5.0 on it's way + JupyterLab, the testing of each branch by developer is quasi-null. Which increase the risk of bugs.\n\nAlso, for example 4.x does _not_ have the ability to order file by date in the dashboard which is well beyond time to release. So while I can't prevent you from backporting things to 4.x, I'm exceptionally going to start putting the strongest -1 on backporting to 4.x until 5.0 is out, starting with this. \n\n> In terms of a hover, I am open to it. But let's merge this PR without it and then play with different hover styles in JupyterLab to see what makes sense.\n\nAgreed.\n Ok, merging this, if we decide to backport it we can still do it later. \n I like the new table style, but is the `max-width` setting really right?\r\n\r\nI have [a notebook](http://nbviewer.jupyter.org/github/mgeier/python-audio/blob/master/plotting/matplotlib-animation.ipynb) with an innocuous table in it:\r\n\r\n```markdown\r\nfield name | contents\r\n-----------|---------\r\nleft | impulse responses for the left ear\r\nright | impulse responses for the right ear\r\nfs | sampling rate\r\napparent_azimuth | directions of sound incidence (in radians)\r\n```\r\n\r\nFor comparison, this is how it is rendered right here on Github:\r\n\r\nfield name | contents\r\n-----------|---------\r\nleft | impulse responses for the left ear\r\nright | impulse responses for the right ear\r\nfs | sampling rate\r\napparent_azimuth | directions of sound incidence (in radians)\r\n\r\nWith the new table style, it looks like this:\r\n\r\n![truncated](https://cloud.githubusercontent.com/assets/705404/21424197/7d75a0e8-c841-11e6-85b0-4e326b262245.png)\r\n\r\nI don't see a reason for limiting the column width in this case. Without the `max-width` setting, it looks like this:\r\n\r\n![full-width](https://cloud.githubusercontent.com/assets/705404/21424252/d449ac34-c841-11e6-99c0-9903c03cd77f.png)\r\n\r\nI don't think my cell contents are exceedingly wide.\r\nI understand that in some cases the column width has to be limited, but I think in this case it's not the right thing to do. If anything, there should be line breaks, but making part of the content invisible seems strange ...\r\n\r\nShould the width probably be limited in auto-generated tables (like `pandas` data frames) and not limited in handcrafted tables in Markdown cells? @mgeier the issue is that in the wild it is very common to have tables that have dozens or even hundreds of columns. When that shows up, not having the `max-width` is really painful. \r\n\r\nHowever, you do make a really good point about tables in markdown. Those are handcrafted and would usually be smaller. I would be fine if we add some conditional CSS to remove the max-width on those. Can you submit a PR or at least open an issue targeted at the 5.0 milestone? Thanks! Issue on JupyterLab:\r\n\r\nhttps://github.com/jupyterlab/jupyterlab/issues/1436 @ellisonbg Done: #2008\r\n\r\nI can't set a target milestone, I've just mentioned it in the text.\r\n\r\nSorry I can't actually implement this, I have too much in my pipeline already. Thanks, we will get this done!\n\nOn Thu, Dec 22, 2016 at 9:16 AM, Matthias Geier <notifications@github.com>\nwrote:\n\n> @ellisonbg <https://github.com/ellisonbg> Done: #2008\n> <https://github.com/jupyter/notebook/issues/2008>\n>\n> I can't set a target milestone, I've just mentioned it in the text.\n>\n> Sorry I can't actually implement this, I have too much in my pipeline\n> already.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/1776#issuecomment-268833391>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0NZHzwIYYSMZrnF3lMnTyHIsTR66ks5rKqJlgaJpZM4KCOj1>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","Until we have real-time collaboration, it doesn't make much sense to have two users actively using the same notebook at the same time - they will be editing independent copies, and overwriting each other on every save (or getting a warning about the file changing on disk). For now, it makes more sense for each user to be working on a separate notebook.\n I totally agree to the part of multiple users using an notebook session , think of environments which has multiple user agent using the same creditials for using the notebook application.\n\nConsider cases where I have a notebook session spawned using the notebook api's in a webapp by embedding notebook application in an iframe and my webapp wants only one person to edit the notebook at a time for uniformity reason.\n\nThe only solution I see is to have multiple queue connected to the kernel for serving multiple user agents modification so that it does not affect the other users operations. Atlast some version controlling need to be done in order to keep the latest version and the other solution I see is like to have jupyterhub setup for spawning multiple notebook servers for multiplte user agent.\n Tagging this with the JupyterLab milestone as that is likely where this will end up fixed.","Sounds good to me.   I'd say you can just remove those explicit checks since we're not shipping any code from node_modules.\n This is an educated guess, but I think it may be that npm dependencies are used for build & development tooling, and bower dependencies are what we package into the notebook. If that's the case, it's probably OK for there to be some packages in both.\n My impression is that bower is used for things that must be used as script tags, and npm for things that can be bundled.  The number of things that must be used as script tags is shrinking, and may be reduced to MathJax and RequireJS.  Even those can be npm installed and then moved from node_modules to a known location for serving.\n I would say wait until we have implemented something like https://github.com/jupyter/notebook/issues/1554#issuecomment-245144140 to start exploring this.\n Until webpack was adopted, client-side js exclusively came from bower, and build utilities (e.g. bower itself, less) exclusively came from node_modules. The use of webpack has mixed this up quite a bit, as now _some_ client-side js comes from node_modules (eventually, after building), while _most_ comes from bower.\n Right, webpack allows us to bundle npm modules along with our source in such a way that it can be loaded in the browser. If we decide to stick with webpack vs. abandoning it and returning to strictly RequireJS, then we could potentially ditch bower all together seeing as though even [mathjax](https://www.npmjs.com/package/mathjax) is available as an npm module.\n I've created a PR to start trying things out because my attempts in https://github.com/jupyter/notebook/pull/1765 were breaking Travis and Appveyor left and right. \n Frontend deps are no longer provided by npm.","I did see that while I was working on a PR, but I'm not seeing it now. Maybe clean are rebuild js?\n I ran:\n\n```\ngit clean -xfd\npip install -v -e .\n```\n\nand I'm still seeing this error anytime I open a notebook.\n I'm not seeing this anymore","It looks like these errors are all being logged by tornado, before dispatching to any IPython code. The handling/logging of SSL failures is perhaps better brought up with that project.\n And you are right - unhandled exceptions in the callbacks does not bring down the server. They get logged, and the server moves on. So this isn't any kind of vulnerability, just an aesthetic issue in the logging.\n Got it, thanks for confirming the server won't go down. Moved the conversation over to tornado: https://github.com/tornadoweb/tornado/issues/1304\n","That's weird. What browser are you using? I can't replicate it with Firefox on notebook master.\n I'm using a recent version of Chrome (version 53). It seems to be a problem with my local installation because if I use a JupyterHub instance (eg. https://data8.berkeley.edu) the traceback is present as it should be.\n\nI'll give the master branch a try.\n Do you have any notebook extensions installed, namely skip-traceback, which does exactly what you describe?\n @juhasch Thanks for the pointer! I was having some problems with an old install of `jupyter_contrib_nbextensions` since I upgraded `notebook`. Uninstalling and reinstalling nbextensions from `master` fixed my issue.\n","Thanks for looking at this. You're right that the language there is a bit hard to read, but unfortunately I don't think your changes improve on what's currently there.\n @takluyver : I understand. There was a bit too much use of 'the' in that. I thought with the changes I have proposed, it'd be clearer to read.\n Some of the 'the'-s are necessary for the text to make sense, though, and others are there to match the way we tend to talk about them - e.g. we say \"the IPython kernel\" rather than using \"IPython kernel\" as a name. However, we do use \"Project Jupyter\" as a name, so it doesn't need a 'the'.\n @takluyver : Ok, I get it now. Thanks for correcting me.\n Thanks :-)\n","For users with superuser access, at least on Linux, adding the option `local_lock=all` to the `/etc/fstab` file or `/sbin/mount` command line should provide relief by bypassing server-side locking and doing all locking on the client.  This should **ONLY** be done in situations where it's guaranteed with absolute certainty that only 1 client will ever write to that SQLite database at a time; otherwise, corruption **will** occur.\n\nAnother possible option is SQLite proxy locking; see https://github.com/aosm/SQLite/blob/master/Notes/ProxyLocking.txt for details.\n Proxy locking sounds interesting. I'm reticent to invoke sqlalchemy or another ORM as a dependency for such a small thing as nbformat, especially when our SQL demands are so incredibly light.\n\nThe first thing I would look at is supporting any [dbapi2](https://www.python.org/dev/peps/pep-0249/) implementation, in which case all we should need is the right config for exposing the connection function and arguments. That should get us psycopg2 for postgres, mysql-python for mysql, etc..\n That seem reasonable. It should be pretty easy to make a swapable db manager as well. If not already possible.\n I got dbapi2 just about working, but found that even the most basic things like 'AUTOINCREMENT' aren't in common with postgres, so we would need to know what the common subset is, or deal with the relative inconsistencies. That tells me that sqlalchemy might be better, but that seems like it might be a too-heavyweight dependency.\n\nhttps://github.com/jupyter/nbformat/pull/50\n If we do want an ORM, I believe [peewee](https://pypi.python.org/pypi/peewee/2.8.3) is a lighter dependency than sqlalchemy. However, abstracting over multiple SQL databases in order to store _a set of hashes_ feels like something has gone wrong.\n @takluyver agreed. If you have a better tool for looking up a hash that supports concurrent access, fast lookup without reading the whole thing in, etc., that would be great. If only SQLite+NFS weren't such a mess, I wouldn't bother putting any energy into supporting anything other than sqlite.\n\nWe also want the same thing for IPython history, where search, etc. come in. It's not actually the ORM that we want, it's just the SQL abstraction.\n It seems like a key-value database would be a better fit than SQL for the signatures, though that's less clear for history. There are several embedded k-v databases, like dbm, Berkeley DB, Kyoto Cabinet. Most seem to have copyleft licenses; UnQLite is an exception, but probably has the same issues with NFS that SQLite does: https://twitter.com/unqlite_db/status/642479750368370688 . And I have no evidence that any of the other options _doesn't_ fall over with NFS.\n\nThe only embeddable thing I've found that might work is the approach used in [cdb](https://en.wikipedia.org/wiki/Cdb_%28software%29) - to add an entry, rebuild the database and rename it over the old file, relying on rename to be atomic. But our database gets big enough and changes often enough that we probably don't want to be rewriting it over NFS on every addition.\n\nSo if we can't trust the filesystem, we're back to database server to maintain consistency. I still suspect it's worth looking at key-value stores over SQL databases, but I don't have the patience to wade through all the NoSQL hype and marketing to figure out which one would actually be a good fit.\n\nDid you look into SQLite proxy locking? I had a brief skim, and it sounded relevant, but I didn't go through thoroughly enough to be sure.\n (Of course, we probably need to keep an embedded option like sqlite, because I don't know of any database server we can express as a dependency, and we can't expect users to set up a separate database package)\n @takluyver sure. I'm mainly thinking of having a usable alternative for those on NFS systems. If there's an _easy_ option that doesn't have NFS issues, we can just pick that up, but otherwise having a decent alternative seems good enough.\n\n[simplekv](http://pythonhosted.org/simplekv/index.html) seems like an easy option for key-value store, and works on the filesystem by default, with support for memcache, redis, etc. I don't see a mechanism for the culling to trim the entries, which is the only relational bit that we do here.\n\nI'll also peek at peewee, which seems like it might be a simple solution.\n Nice. Digging into the code of simplekv gives me a \"why didn't we think of that before?\" moment: its FilesystemStore creates files in a directory, named with the keys in question.\n\nThat does leave a couple of concerns, though:\n- Do we need to work on any filesystems which may have small limits on filename length?\n- Can all filesystems quickly check for the existence of a file in a directory containing thousands of files?\n There are numerous well-documented problems on many filesystems with large numbers of files in a single directory.  (Start [here](http://serverfault.com/questions/43133/filesystem-large-number-of-files-in-a-single-directory), for example.)  The definition of \"large\" has been getting better over time, but it's still something to consider carefully.  And unless the filesystem is B-tree-based or similar, finding a file in a directory is typically a linear search (i.e., O(n)).  Fortunately, most modern filesystems are tree/hash-based by default (e.g., [ext4's dir_index](https://en.wikipedia.org/wiki/Ext4)).\n _sigh_ so we probably can't rely on that. Thanks for the info.\n\nWe could maybe write an implementation that used a nested directory structure based on chunks of a hex digest - so instead of `a49cd3...` you might have `a4/9c/d3...`. But that starts to sound complex and fiddly.\n That actually isn't unreasonable.  Lots of existing stuff uses that, including Git.  :-)\n Culling old items seems pretty expensive without the relational part, since it seems to necessarily mean reading every file in the store (or stat if we want to use/trust mtime rather than contents). That's the only real argument I see against it right now.\n\nPip uses the same scheme (a/b/c/d/e/f123...) for its cache directory. I don't think it's too complex to deal with.\n","I think you might also need to remove some script tags in `page.html` or the other templates.\n @blink1073 Good call! Now what about instances where `moment` is defined using RequireJS (https://github.com/jupyter/notebook/blob/53ab302a98ca24b2a104a4ec7bb049ff4dcc1a09/notebook/static/base/js/utils.js#L6)? Will that look for `moment` in node_modules? If not, then we need to replace these with `import moment from 'moment'`...\n It looks like `moment` is in the compiled WebPack bundle, so the code looks good as is.  Eventually, it may make sense to switch to all-CommonJS code in `static/`.\n @blink1073 @minrk It looks like the tests are failing because [\"ReferenceError: Can't find variable: Promise\" ](https://travis-ci.org/jupyter/notebook/jobs/162261858#L922). I removed `es6-promise` from bower so now the tests will rely on webpack for `Promise`. Is the source not being built by webpack before tests are run?\n I believe the source is built by webpack in the tests, otherwise no js would be loaded because the main.js would be undefined.\n Is the webpack even running?  It looks like the build is failing because you need to `require('webpack')` in order to use the `ProvidePlugin`.\n","shell-level files such as `/etc/profile` or `/etc/bashrc` can be used for this kind of thing. Is that what you are after?\n @minrk I have tried both files but the command are executing only when I login from server not on notebook terminal.\n\nNotebook terminal are non-login ones. Need to know from where they are loading bashrc file or profile.\n\nOr is there any thing we can do in spawner to run a particular command when terminal are fist started.\n You can change the command that the Spawner launches:\n\n``` python\nc.Spawner.cmd = ['/path/to/my/launch.sh']\n```\n\nwhere that launch.sh has:\n\n``` bash\n#!/usr/bin/env bash -l\n\nexport PATH=\"whatever:$PATH\"\n# other env setup, startup actions\n\n# actually launch the single-user server\n# - exec replaces the current process (avoids extra intermediate process)\n# - $@ passed through arguments, so this script behaves the same as the default command\nexec jupyterhub-singleuser $@\n```\n @minrk \nI want to disable tab in notebook terminal for that I want to execute > bind 'set disable-completion on'\ncommand whenever notebook terminal open. I am not able to set that in users bashrc or profile file for the user. \n Thanks @minrk for launch.sh but when I open terminal , terminal dont starts . I can see error i logs file for jupyterhub.\n @minrk can you please explain more about lauch.sh ..\n\nCurrently in my system it is adding in the single server command but .. single server not getting started as getting error for permission denied.\n @minrk The issue is solved for running command in terminal.\n\nHowever you can share your thoughts on launch.sh permission denied issue and can close this.\n\nVery thankful to you.\n If the command is just `/path/to/launch.sh`, you need to set the execute permissions on that file (`chmod +x launch.sh`). Otherwise, you can make the command `bash /path/to/launch.sh`\n @minrk  Thanks please close this. \n your help is really very helpful and your responses are very fast .. really appreciate it.\n Happy to help!\n","I think that's a reasonable thing to do, although at present I think the kernel IDs it uses are only stored in memory. The main reason it doesn't, as far as I know, is that we haven't come up with any UI we like for connecting a notebook to an existing kernel.\n How about instead of relying on finding a connection file, we make the /api/kernels POST request (which normally starts a kernel from a kernelspec name) take an optional kernel connection file contents as data? Or we could have a new endpoint that connects to an existing kernel, something like `/api/kernels/{kernel_id}/connect` (where we have to provide a made-up id). Or perhaps we reserve the name 'connect' in the kernel_id spot: `/api/kernels/connect`.\n Yes, that does sound better. Going through a connection file wouldn't add any value. Does anyone have a clear preference for one of those URL schemes?\n One disadvantage is that, until the kernel nanny arrives, this will mean that interrupt, restart actions will be unavailable.\n > If it doesn't know about that session, it errors. I am wondering if, before erroring, it could check the on-disk cache of running kernels (e.g., in ~/Library/Jupyter/runtime). If it find the kernel_id in question, it would start a new session connected to that existing kernel. To say it another way, I see that the cache of kernels known to the manager includes only those initiated by that particular server process, not any kernels started by some other processes.\n\nMany people inadvertently start many servers as they think \"Oh jupyter-notebook just open the browser\" falling back on reading files will create weird conditions when multiple server connect to same kernel, same file hence why we don't do it. \n\nIf we go this route I would _suggest_ that the server write a file saying I'm this PID , on this host I \"own\" the file. And once another server do the file lookup, it check whether the said process is still running.\n\n> Would that be a crazy thing to do? The goal is to enable something like ipython console --existing <kernel_id> in the notebook server.\n\nWe had a quick discussion with Fernando some time back. We think that `jupyter console --existing` should bring a UI (in general, if is tty) that allow user to select console. Regardless of whether it's ran from the server. \n\n> For example, suppose Alice and Bob are running separate notebook servers on the same machine. Alice wants to allow Bob to observe the inputs and outputs in a console or notebook that she is working on. She sends Bob the connection file info (perhaps via a hub extension). Bob opens a console and creates a new session connecting to that running kernel. Now Alice and Bob each have a session connected to the same kernel. Since the JupyterLab console now mirrors iopub messages from any session, not just the session that initiated execution, Bob can see Alice's inputs and outputs. He can also execute code. This is one simple mode of real-time collaboration.\n\nI'm sure almost no-one will understand the security risk of that. _If_ bob connect from another session if should likely get a connexion though some other kind of connexion (Fake kernel connexion infos ?) that make it clear he is not Alice.  In general I think a better (and more complicated) way of having collaboration would be for Alice and bob server to make a handshake, and for Bob server to see remote kernels \"exposed\" by Alice server. \n\nAlso Alice and Bob likely don't have the same signature key for messages, so should sharing kernel.json files requires Alice to give bob access to sensitive info ?\n Thanks for explaining, @Carreau. I see that a handshake between servers makes more sense. Is this part of the planned work on addressing collaboration for JupyterHub v0.8, @minrk? I'm interested in helping / offering BNL users as guinea pigs.\n > Also Alice and Bob likely don't have the same signature key for messages, so should sharing kernel.json files requires Alice to give bob access to sensitive info ?\n\nEach kernel has a key (in the connection info), so if you can talk to a kernel (send _or_ receive), you have the key. There is currently no mechanism to receive messages from a kernel without being able to also execute on that kernel.\n","@YogeshTayal These are just webpack warnings. From the logs you provided, it looks like it in fact did build without any errors.\n @gnestor it threw syntax error and module parse failed exception. Also, my changes didn't reflect after running **python setup.py js css** (as mentioned in CONTRIBUTING.rst). Anyway, I found the fix. **python setup.js build** worked for me.\n @YogeshTayal Ok, I think I remember encountering something like this after doing a `git clean` and reinstalling one time. My guidelines:\n- When first installing from source: `pip install -e . --user`\n- When switching between branches: `npm run build` (or `npm run build:watch` if actively developing)\n- When switching between master and the 4.x branch (which are significantly different, 4.x doesn't use webpack to bundle JS): `git clean -xfdi` and then reinstall using `pip install -e . --user`\n @YogeshTayal Lastly, successful webpack builds still result in the following (which looks identical to your log output):\n\n```\nHash: e9d8866eac4d174b1f87\n[1] Version: webpack 1.13.2\n[1] Time: 38196ms\n[1]         Asset     Size  Chunks             Chunk Names\n[1]   main.min.js  19.9 kB       0  [emitted]  main\n[1] 1.main.min.js  4.73 MB       1  [emitted]  \n[1]     + 184 hidden modules\n[1] Hash: ef2d14083e953c410c61\n[1] Version: webpack 1.13.2\n[1] Time: 39773ms\n[1]         Asset     Size  Chunks             Chunk Names\n[1]   main.min.js  31.2 kB       0  [emitted]  main\n[1] 1.main.min.js  4.17 MB       1  [emitted]  \n[1]     + 178 hidden modules\n[1] Hash: d8b79a33d7918338f1b5\n[1] Version: webpack 1.13.2\n[1] Time: 39881ms\n[1]       Asset     Size  Chunks             Chunk Names\n[1] main.min.js  3.99 MB       0  [emitted]  main\n[1]     + 176 hidden modules\n[1] Hash: 4c983b6bcce2583cdb93\n[1] Version: webpack 1.13.2\n[1] Time: 41865ms\n[1]         Asset     Size  Chunks             Chunk Names\n[1]   main.min.js   148 kB       0  [emitted]  main\n[1] 1.main.min.js  4.49 MB       1  [emitted]  \n[1]     + 193 hidden modules\n[1] \n[1] WARNING in ./~/xterm/addons/linkify/index.html\n[1] Module parse failed: /Users/grant/Sites/jupyter/notebook/node_modules/xterm/addons/linkify/index.html Unexpected token (1:0)\n[1] You may need an appropriate loader to handle this file type.\n[1] SyntaxError: Unexpected token (1:0)\n[1]     at Parser.pp$4.raise (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:2221:15)\n[1]     at Parser.pp.unexpected (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:603:10)\n[1]     at Parser.pp$3.parseExprAtom (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:1822:12)\n[1]     at Parser.pp$3.parseExprSubscripts (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:1715:21)\n[1]     at Parser.pp$3.parseMaybeUnary (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:1692:19)\n[1]     at Parser.pp$3.parseExprOps (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:1637:21)\n[1]     at Parser.pp$3.parseMaybeConditional (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:1620:21)\n[1]     at Parser.pp$3.parseMaybeAssign (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:1597:21)\n[1]     at Parser.pp$3.parseExpression (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:1573:21)\n[1]     at Parser.pp$1.parseStatement (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:727:47)\n[1]     at Parser.pp$1.parseTopLevel (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:638:25)\n[1]     at Parser.parse (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:516:17)\n[1]     at Object.parse (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:3098:39)\n[1]     at Parser.parse (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/lib/Parser.js:902:15)\n[1]     at DependenciesBlock.<anonymous> (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/lib/NormalModule.js:104:16)\n[1]     at DependenciesBlock.onModuleBuild (/Users/grant/Sites/jupyter/notebook/node_modules/webpack-core/lib/NormalModuleMixin.js:310:10)\n[1]     at nextLoader (/Users/grant/Sites/jupyter/notebook/node_modules/webpack-core/lib/NormalModuleMixin.js:275:25)\n[1]     at /Users/grant/Sites/jupyter/notebook/node_modules/webpack-core/lib/NormalModuleMixin.js:259:5\n[1]     at Storage.finished (/Users/grant/Sites/jupyter/notebook/node_modules/enhanced-resolve/lib/CachedInputFileSystem.js:38:16)\n[1]     at /Users/grant/Sites/jupyter/notebook/node_modules/graceful-fs/graceful-fs.js:78:16\n[1]     at FSReqWrap.readFileAfterClose [as oncomplete] (fs.js:445:3)\n[1]  @ ./~/xterm/addons ^\\.\\/.*$\n[1] \n[1] WARNING in ./~/xterm/addons/attach/index.html\n[1] Module parse failed: /Users/grant/Sites/jupyter/notebook/node_modules/xterm/addons/attach/index.html Unexpected token (1:0)\n[1] You may need an appropriate loader to handle this file type.\n[1] SyntaxError: Unexpected token (1:0)\n[1]     at Parser.pp$4.raise (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:2221:15)\n[1]     at Parser.pp.unexpected (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:603:10)\n[1]     at Parser.pp$3.parseExprAtom (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:1822:12)\n[1]     at Parser.pp$3.parseExprSubscripts (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:1715:21)\n[1]     at Parser.pp$3.parseMaybeUnary (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:1692:19)\n[1]     at Parser.pp$3.parseExprOps (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:1637:21)\n[1]     at Parser.pp$3.parseMaybeConditional (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:1620:21)\n[1]     at Parser.pp$3.parseMaybeAssign (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:1597:21)\n[1]     at Parser.pp$3.parseExpression (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:1573:21)\n[1]     at Parser.pp$1.parseStatement (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:727:47)\n[1]     at Parser.pp$1.parseTopLevel (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:638:25)\n[1]     at Parser.parse (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:516:17)\n[1]     at Object.parse (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/node_modules/acorn/dist/acorn.js:3098:39)\n[1]     at Parser.parse (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/lib/Parser.js:902:15)\n[1]     at DependenciesBlock.<anonymous> (/Users/grant/Sites/jupyter/notebook/node_modules/webpack/lib/NormalModule.js:104:16)\n[1]     at DependenciesBlock.onModuleBuild (/Users/grant/Sites/jupyter/notebook/node_modules/webpack-core/lib/NormalModuleMixin.js:310:10)\n[1]     at nextLoader (/Users/grant/Sites/jupyter/notebook/node_modules/webpack-core/lib/NormalModuleMixin.js:275:25)\n[1]     at /Users/grant/Sites/jupyter/notebook/node_modules/webpack-core/lib/NormalModuleMixin.js:259:5\n[1]     at Storage.finished (/Users/grant/Sites/jupyter/notebook/node_modules/enhanced-resolve/lib/CachedInputFileSystem.js:38:16)\n[1]     at /Users/grant/Sites/jupyter/notebook/node_modules/graceful-fs/graceful-fs.js:78:16\n[1]     at FSReqWrap.readFileAfterClose [as oncomplete] (fs.js:445:3)\n[1]  @ ./~/xterm/addons ^\\.\\/.*$\n```\n\nThese are webpack warnings (not errors, errors are fatal) about 2 files that webpack is trying to bundle but doesn't know how to (because they're HTML). We should definitely resolve whatever is the cause of these warnings...I'll look into it now.\n","I'm not able to reproduce this so I need more info. Are you running Jupyter in your own local environment? Is the notebook server serving from localhost? Do you have permission to write to the file system? Did you install Jupyter using Anaconda? Have you tried upgrading notebook?\n","@diego898 This sounds like an issue with ipywidgets. I suggest that you submit an issue [over there](https://github.com/ipython/ipywidgets/issues) as they will be more able to help.\n thanks @gnestor \n","I like this a lot. Obviously, it doesn't address the problem of how to build/distribute/select themes, but at least consolidating the theme variables seems like a helpful start.\n Yeah, I don't think we can really talk about build/distribute/select until it is easy to configure a theme that is applied to the whole interface.\n\nLike I said, once we've solidified how this works with a default theme we could easily refactor theme generation into its own node module or CLI that Jupyter would depend on, or we could just have a bunch of `theme/<name>.less` files that generate different CSS.\n Oh my gosh, thank you. I can't wait to use that dark theme.\n Ah, finally someone that doe the right things !\n\nYou can adapt https://github.com/jupyter/notebook/compare/master...Carreau:theme which give gulp a flag to build a different theme. Then we can just \"rebuild\" with different names\n Yes, this is awesome and definitely the right way to go about theming things. A few questions and comments:\n- When @jdfreder looked at it last, we had close to a dozen different greys on the different pages. We have been meaning to go through and consolidate those to a few carefully chosen ones. Have you done that in this PR?\n- What about the theming on non-color things like border widths and corner radii?\n > What about the theming on non-color things like border widths and corner radii?\n\nThis is trivially changeable with the last variable you include, and why in above links, I just bother in changing `variable.less`. The last included variable take precedence. So basicaly `theme.less` and `variable.less` have the same goal. We can distinguish them \"in principle\" by putting only customisable things in `theme.less` and non -customizable one (line height, and other stuff) in `variable.less`.\n Cool!\n +1\n Merging as progress, and we can keep improving with future PRs.\n Btw, codemirror has syntax coloring themes. https://codemirror.net/demo/theme.html\n\nBesides, the dark theme is the one that comes by default now apparently.\n I somehow didn't notice that this totally changes the default theme. I'll go through and revert that part.\n besides, I don't think that we should edit codemirror syntax coloring by hand, but rather use predefined coloring themes.\n Yes sorry @minrk that was part of why I said this was just a proof of concept. It was not immediately obvious to me how to fit the default color scheme into this format so I adopted other schemes I've worked with in the past to try it out. Happy to help porting the default theme (or setting a new default).\n #205 reverts this PR, since making a fix on top of it wasn't quite feasible. @nsonnad I welcome you to open a new PR to continue this conversation, even starting with the same patches. Sorry for not realizing that before merging!\n","For issues with R code, it's best to ask on the [IRkernel repo](https://github.com/IRkernel/IRkernel). I have no idea about that error, I'm afraid.\n","Awesome ! Thanks !\n","Great ! Thanks !\n","Drat.  In order for this to work all of the modules will have to be converted to be fully CommonJS.  Otherwise the bulk of the modules end up in `1.vendor.js` and are not in the DLL manifest.\n @gnestor, @minrk.  I am 100% convinced this will work if I implement the above, but it is going to be time consuming and invasive.\n I like it in principle, but I don't like how much work we are making you do on this. @blink1073 what do you think about the tradeoffs in terms of effort of getting webpack to not break requirejs here vs going back to requirejs with no webpack?\n Looking at the `package.json`, all of the `dependencies` are available on `bower`.  I'd say going back to being `bower` + `requirejs`-only is the way to go.  It is the least brittle solution, since the above solution requires making sure everything is available as a commonjs import and stays that way.\n > I'd say going back to being bower + requirejs-only is the way to go\n\nThat makes sense to me. I took a stab at exactly that a while back, but too many webpack changes had been made for it to be really easy, and I ran out of time.\n I'll close this one then.  :(\n","Unfortunately no. It is a security measure set up by browser. They won't let the pages context get shortcuts. In some OS the window manager even intercept the shortcut and the browser never receive it. \n\nYou _might_ be able to get around using browser extensions, but that's unsure. \n Aww that's what I was thinking :( I guess I'll just use Chrome for now... I might at some point look into an extension.\n\nI do find it strange that `ctrl-n` doesn't work `edit_mode` but `ctrl-p` does.\n There's a specific set of shortcuts that Firefox no longer lets us capture, and Ctrl-N (new window) is one of them. They're deemed too important to browser operation for websites to mess with. I think Ctrl-T (new tab) and Ctrl-W (close tab) are in the same category.\n\nI think Chrome has been doing the same for longer than Firefox.\n Ohh, that's odd, it currently works fine in Chrome Version 53.0.2785.116 (64-bit) on Fedora 24.\n Maybe Chrome allows them under certain circumstances, or maybe it has changed back. A few years ago, people [were saying](http://stackoverflow.com/a/7296303/434217) that Chrome didn't let you capture those.\n Ahh, yeah in there it says they changed it at some point. I'll try to dig a bit more into whether anything can be done through browser extensions.\n\nThanks!\n \r\n\r\nI love this prj, as well. Along with my blue switch keyboards. Actually https://addons.mozilla.org/en-US/firefox/addon/keybinder/?src=search works! Which means Ctrl-n can be disabled for Firefox. Ctrl-Shift-n works. A little annoying but it's a work around for now. Thanks for the suggestion! Unfortunately, this did not work for me. It successfully removes the C-n key binding for creating a new window, but it still doesn't let the keys bubble down to the notebook, so C-n still doesn't take me to the next line.\r\n\r\nBtw, if you're on Chrome on Linux, most of they key shortcuts work as expected. Actually, it (Chrome Version 55.0.2883.87 (64-bit) & Lubuntu 16.04) does not have this right either. Ctrl-n opens up new Brower windows. Was there some add-on or setting u had to do?\r\nThanks, Oh :( it seems that it's due to having global Emacs keybindings enabled in Gnome (which I believe is actually implemented in GTK). You could try [enabling Emacs mode for GTK](http://shallowsky.com/blog/linux/gtk3-emacs-key-theme.html) and then setting Chrome to use GTK, but YMMV, especially since you're on LXDE. Actually, thank you but above did not work as u suspected. But I found this add-on \"Menu Wizard\" and I just disabled the Control-n from it and it now \"Ctrl-n\" works as down key! Be sure to reboot the browser after installing it & shit Shift-Alt-M to launch it. Hit the Tool thingy (wrench icon) & and disable the Keyboard shortcut. It's now better than Chrome, which I had problem with Keras update. I will share more as I figure it out, but now the main issue is solved.\r\nI still have issues with Ctrl-Shft-_ splitting the cell & few others but... this is much better. This seems a easy change according to http://jupyter-notebook.readthedocs.io/en/latest/examples/Notebook/Custom%20Keyboard%20Shortcuts.html Awesome!! thanks a lot!\r\n\r\nI actually took a few of the existing Emacs and Vim keybinding extensions available and added it to https://github.com/ipython-contrib/jupyter_contrib_nbextensions, just enable the `select_keymap` extension there. That should take care of the `Ctrl-Shit-_`. It also fixes `Ctrl+Y` so it doesn't highlight after yank, adds `Ctrl+n/p` navigation to move around cells, and allows you to paste from system clipboard using `Ctrl+V`. For fun, I also added `M-x` to show the command pallete.\r\n\r\nI'll add to the documentation about that extension for firefox users :) Excellent! Thank u a lot as well. Just be sure to create a non-using key to replace the C-n short cut. I attempt to blank it out and ctrl-n returns when I restart a new browser. So, I just assigned to a key I would never use. $ jupyter nbextension list\r\nKnown nbextensions:\r\n  config dir: /home/hyoon/.jupyter/nbconfig\r\n    notebook section\r\n      select_keymap=emacs  enabled \r\n      - Validating: problems found:\r\n        - require?  X select_keymap=emacs\r\n      nbextensions_configurator/config_menu/main  enabled \r\n      - Validating: problems found:\r\n        - require?  X nbextensions_configurator/config_menu/main\r\n      jupyter_emacskeys/init  enabled \r\n      - Validating: OK\r\n    tree section\r\n      nbextensions_configurator/tree_tab/main  enabled \r\n      - Validating: problems found:\r\n        - require?  X nbextensions_configurator/tree_tab/main\r\n  config dir: /opt/miniconda3/envs/Py3/etc/jupyter/nbconfig\r\n    notebook section\r\n      nb_conda/main  enabled \r\n      - Validating: OK\r\n      nb_anacondacloud/main  enabled \r\n      - Validating: OK\r\n      nbpresent/js/nbpresent.min  enabled \r\n      - Validating: OK\r\n      jupyter-js-widgets/extension  enabled \r\n      - Validating: OK\r\n    tree section\r\n      nb_conda/tree  enabled \r\n      - Validating: OK\r\n\r\nHi:\r\n\r\nAs seen above.\r\nI do have: select_keymap=emacs  enabled but I still get split screen when I hit Ctrl+Shit+_ \r\nLet me know if this is a bug.\r\nThanks,\r\n Hey, sorry you enable it with:\r\n```\r\njupyter nbextension enable select_keymap/main\r\n```\r\nor in http://localhost:8888/nbextensions/. Once enabled, when you're in a notebook you can select they keymap you want in the `Edit` menu. The selection will persist on your browser.","Your code looks good. Does it appear like custom.js is being loaded before the notebook (try adding a log statement in custom.js and verify that the log statement is the first one in the console when loading the notebook)? If not, then you either need to:\n- Upgrade notebook to 4.2.3\n- If you're running notebook from source, there is an [outstanding issue affecting master](https://github.com/jupyter/notebook/pull/1770)\n\nIf it's not loading first, then setting the cell default config (as you are in your code example) after the config has been loaded will have no effect. \n\nIf it is loading first, then let me know and I will do some investigating.\n\nFYI, line number toggle status is persisted to nbconfig, so if you show line numbers in one notebook, they should show in any other notebooks you open on your computer. \n I think this is the webpack problems with custom.js that are fixed by removing webpack. @minrk I tested and with the following custom.js:\r\n\r\n```js\r\ndefine([\r\n    'base/js/events',\r\n], function(events) {\r\n    console.log('custom.js');\r\n    events.on('app_initialized.NotebookApp', function () {\r\n        console.log('app_initialized.NotebookApp');\r\n    });\r\n})\r\n```\r\n\r\nI am seeing `custom.js` being logged first (which is expected) but no `app_initialized.NotebookApp`. Oops, missed these notifs. @gnestor, are the steps you suggested in https://github.com/jupyter/notebook/issues/1795#issuecomment-251822448 still the right things to try? > Upgrade notebook to 4.2.3\r\n\r\nThe current release is 4.3.1, so I suggest upgrading...\r\n\r\n> If you're running notebook from source, there is an outstanding issue affecting master\r\n\r\nThis should no longer be an issue.","It's fine for application code (e.g. `InstallNBExtensionApp`) to use simple `print()`. But for API functions like `install_nbextension()`, I think it's better for them to use the logging machinery unless writing output to the terminal is explicitly what the function is for - which it's not in this case.\n\nI'm not sure why it matters that stuff is written to stderr instead of stdout, though? I think of stderr as a side-channel to display info to the user when the main output channel is redirected; it doesn't necessarily indicate that something has gone wrong.\n It's a minor annoyance to me because I think we are managing output wrong, but no need to block a release for it.","## [Current coverage](https://codecov.io/gh/jupyter/notebook/pull/1798?src=pr) is 74.21% (diff: 100%)\n\n> Merging [#1798](https://codecov.io/gh/jupyter/notebook/pull/1798?src=pr) into [master](https://codecov.io/gh/jupyter/notebook/branch/master?src=pr) will increase coverage by **0.01%**\n\n``` diff\n@@             master      #1798   diff @@\n==========================================\n  Files            76         76          \n  Lines          7144       7148     +4   \n  Methods           0          0          \n  Messages          0          0          \n  Branches          0          0          \n==========================================\n+ Hits           5301       5305     +4   \n  Misses         1843       1843          \n  Partials          0          0          \n```\n\n> Powered by [Codecov](https://codecov.io?src=pr). Last update [3617c5d...b398d00](https://codecov.io/gh/jupyter/notebook/compare/3617c5d9b8881ee8860e258ef25bff871e7d356d...b398d005ad2cbc033b0ec3234ba2c94e1259ea68?src=pr)\n Kicked travis. +1.\n And travis is happy.\n","See these discussions:\n- https://github.com/IRkernel/IRkernel/issues/163#issuecomment-234760479\n- https://groups.google.com/a/continuum.io/d/msg/conda/nqPfPGYP--g/kF1IbP8gCQAJ\n\nFrom the second link, try:\n\n```\nconda remove gcc libgcc\n```\n @mingwandroid could be of help here :-)\n He's the current maintainer of R packages in Continuum\n @takluyver Thanks for the pointers, but I'm not sure about that temporary fix. It may do more harm than good, in case other Anaconda packages also depend on `gcc` or `libgcc`.\n\n@ccordoba12 Many thanks, hopefully @mingwandroid can shed some light on this.\n\nMore info: I uninstalled `stringi` from the baseline R library in my system. After that, I can open R notebooks in Jupyter without errors. However, I don't think that you should be forced to uninstall any package from the baseline R library in your system when the whole point of using Anaconda is basically to encapsulate all dependencies in your working environment.\n\nI have set up R with Jupyter notebooks in Anaconda many times previously (both in Linux and Windows). This is the first time I run into this problem. \n\nMy big doubt is: if Anaconda is (apparently) installing its own version of all R packages, aside from any other R installation in your system, why is there any conflict between `stringi` packages in both locations? It should only see what is installed _inside the Anaconda environment_. In fact, you don't need to follow IRkernel linking instructions anymore.\n\nThanks in advance for your help with this issue. I think this can be a serious problem, as it is very likely that many users willing work with R notebooks in Jupyter will also probably have R and RStudio already installed.\n I think he's on vacations now, but hopefully he will respond to this after that :-)\n If someone is able to assign this to me please do so. Otherwise ping me next week.\n @glimmerphoenix, please close this issue and open a new one in the anaconda-issues repo:\n\nhttps://github.com/ContinuumIO/anaconda-issues/\n\nI'll assing @mingwandroid there :-)\n Issue moved to https://github.com/ContinuumIO/anaconda-issues/issues/1133, as per request from @ccordoba12 . Closing here, thanks again for your help.\n","Thanks for posting this link. I know we will eventually have to cross the\naccessibility bridge at some point.\n\nOn Tue, Jun 30, 2015 at 11:50 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Ping @ellisonbg https://github.com/ellisonbg I found this libs that\n> visually highlight issues on pages.\n> \n> http://khan.github.io/tota11y/\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/180.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Any more thoughts on accessibility support in the Notebook? We have a visually impaired learner in a Software Carpentry workshop this weekend, and have some learners with physical challenges as well.\n > Any more thoughts on accessibility support in the Notebook\n\nThere haven't been a lot of work for current notebook. I haven't been involved that much but I suppose that is taken care of in JupyterLab. @jasongrout & @ellisonbg  might be more aware.\n We have talked to some of our collaborators from IBM about their doing an\naccessibility study of the notebook. But that hasn't happened and our core\ndevs are swamped with other things. I don't think the work is too\ndifficult, but it will require sustained effort (probably a year) by\nsomeone who knows that area.\n\nOn Thu, Jun 9, 2016 at 8:41 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Any more thoughts on accessibility support in the Notebook\n> \n> There haven't been a lot of work for current notebook. I haven't been\n> involved that much but I suppose that is taken care of in JupyterLab.\n> @jasongrout https://github.com/jasongrout & @ellisonbg\n> https://github.com/ellisonbg might be more aware.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/180#issuecomment-225086397,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AABr0OCJmuWtqzHHpjoVy0uREkofHJ01ks5qKNz0gaJpZM4FPN7l\n> .\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n cf. https://github.com/jupyter/enhancement-proposals/pull/10, where the current internationalization discussion is going on currently.\n","I think this might be a bug for us in safari not respecting the file extension we are using - or overriding it because we are giving it an application/json MIME type. This was reported again on March 17, 2017 by Duke Univ. biostatistics & bioinformatics faculty using Jupyter. ","Hi @crwilcox \n\nThanks a lot for this issue, I'm going to link to another related issue. jupyter/jupyterlab#911\nYes we tried our best to improve accessibility, but for lack of people that told us what they had difficulty with we didn't went far. And it's true that we don't have much experience with it either. \n\nThe structure of the current notebook is not that great to do any improvements (as we were not javascript/web developers). But we are now working on [JupyterLab](https://github.com/jupyter/jupyterlab), which is a complete rewrite of the notebook (using Typescript). We hope to try to bake accessibility directly in it.\n\nWe are doing user studies every now and then, if we could find a way to get users with accessibility issues to give early feedback that would be great.\n\nNote that we also had a look at adding voice control to the notebook (as an extension) in order to help users with reduced mobility. Unfortunately the voice recognition API that were accessible were not that great at understanding my strong french accent, but that's something which can be revisited.\n\ncc @ellisonbg  and @jasongrout from JupyterLab. @willingc  and @JamiesHQ as well.\n Hi @crwilcox,\n\nThanks for your interest in accessibility. Four years ago, I had the opportunity to have dinner with a woman and her guidedog. She demonstrated for me how you could set up and configure an iPhone without the need to see the screen or have assistance by another person. This demo had a huge impact to see what is possible with accessibility and its importance.\n\nHere are some resources that I keep handy when working on Jupyter's documentation. We are currently looking at updating our documentation themes (cc @gnestor @SylvainCorlay ), and I am sensitive to providing the best user experience with the resources that we have.\n\n**Resources**\nhttps://pages.18f.gov/accessibility/\nhttp://a11yproject.com\n\n**Tools**\nOne tool that I find helpful for a quick look at accessibility of a page is: http://squizlabs.github.io/HTML_CodeSniffer/\n\nThe other resources provide a great list of available tools.\n\ncc @ivanov @fperez @minrk \n Terrific. Thanks for getting back to me. We currently use Jupyter Notebook and quite possibly will be transitioning to Juptyer Lab when it goes 1.0. It sounds like, and correct me if I am wrong, but Jupyter Notebook is likely to get little in the way of improvements.  Your linked issue does indicate to me that Jupyter Lab is getting some real improvements though.\n Also - @willingc @gnestor @SylvainCorlay : we also have a newish Berkeley accessibility policy that we're working toward incorporating into the documentation design: https://webaccess.berkeley.edu/\n @JamiesHQ @willingc Does it make sense to open an issue elsewhere to tackle docs accessibility across Project Jupyter?\n @crwilcox Regarding accessibility on the jupyterlab front, a label has been created to track those efforts: https://github.com/jupyterlab/jupyterlab/issues?q=is%3Aissue+is%3Aopen+accessibility+label%3Acat%3AAccessibility\n @gnestor Grant, I think it does make sense to open a docs accessibility issue wherever work on the improved RTD theme will live. Perhaps for now open in jupyter/jupyter. Thanks!\n Thanks @willingc & @gnestor - probably worth discussing at the project meeting next week.\n Copying in @cameronoelsen since he'll be doing some of the work on the new theme's design.  cc @ellisonbg \n","Thanks! What are you setting ws_url for?  I had actually thought we removed that option because it was never used.\n Awesome! Thanks for the merge.\n\nws_url is a very useful option for us at [Instabase](https://www.instabase.com). \n\nWe ran into a problem with GCloud load balancers. There are two types of them: Network and HTTP. (1) Network LB supports websockets but doesn't forward client ip to upstream, (2) HTTP LB forwards client ip to upstream but doesn't support websockets. \n\nWe partitioned our traffic wherein websocket traffic went to a network lb and the rest went to a http lb. ws_url option saved the day for us and allowed us to keep our infrastructure stack fairly simple.\n Is there a timeline to push 4.3 milestone to GA? We use conda to install notebook and would love to have these changes in a conda notebook package.\n Backported.\n","Thanks @willingc !\n","What OS and version of Chrome? Are you just trying to connect to a local notebook on your computer? It's odd that Origin would be empty (browsers don't do this, normally). Do you have any firewall / AV / proxy software running? Does it work with another browser? Does it work if you use `127.0.0.1` instead of `localhost`?\n Hi there,\n\nFirst of all thanks for responding so fast! Answers:\n- Windows 7, Chrome 53.0.2785.143 m\n- Yes I'm trying to connect locally\n- It doesn't work with Chrome, Firefox or Explorer\n- 127.0.0.1 doesn't work either\n- Looking into the firewall thing, it's a company laptop and Notebook stopped working after a software update pushed by IT, so it is very probable that it is some sort of firewall/proxy issue \n Update on the issue: I got it working again: apparently some extensions of Chrome were blocking the acces to the Python kernel. After deactivating the extensions, it worked again.\n","It's something one of the conda extensions does. I don't think it's necessarily a problem. @damianavila knows more about it.\n Yes I agree, its not a big problem, Its just a little confusing for my jupyterhub users. Just wondering if there is an easy way to fix this?\n I think you can get rid of it by uninstalling something. Possibly `conda uninstall nb_conda_kernels`?\n ![image](https://cloud.githubusercontent.com/assets/10758934/19046600/23f62bd2-896c-11e6-9841-10f1c611dd35.png)\n\nIt's asking me to remove all these as well...it does not seem right?\n A hard approach is just remove the extension... but that will remove all the bundle as you show above.\nA softer approach is just disabling the extensions, you can do something like this:\n\n```\npython -m nb_conda_kernels.install --disable --prefix=<ENV_PREFIX>\n\njupyter-nbextension disable nb_conda --py --sys-prefix\njupyter-serverextension disable nb_conda --py --sys-prefix\n```\n\nIn this case, you just disable nb_conda_kernels and nb_conda that depend on the first one, but still keep the other ones active.\n\nYou have more details about the extensions here: https://docs.continuum.io/anaconda/jupyter-notebook-extensions.\n I tried the soft approach without luck, I replaced the <ENV_PREFIX> by \"root\" and also tried \"conda root\" and ran the lines below but it really did not seem to have any effect. So I tried the hard approach and  did `conda uninstall nb_conda_kernels` which worked the only thing obviously is that I no longer have the nbpresent allowing me to create presentations. Is there a way to get that back without getting the multiple environments on the drop down??\n I ended up installing `conda install -c damianavila82 rise` aka RISE for the slideshow. It seems to work pretty well with the notebook! \nI think that'll work nicely! Thanks for your help @damianavila @takluyver \n @yourinoelnelson in case you want nbpresent, you can still install it using the `anaconda-nb-extensions` channel... that version should install nbpresent alone, without the other extensions.\n\nBtw, very happy you like RISE :wink: if you find any issue don't hesitate to report it on the github repo.\n\nCheers.\n @damianavila the `jupyter` metapackage shouldn't depend on nb_conda_kernels. That should just be the `anaconda` metapackage, right? I wouldn't want users of miniconda who `conda install jupyter` to get the anaconda-nb-extensions.\n @minrk the jupyter metapackage does not depend on nb_conda_kernels, but the jupyter metapackage contains ipywidgets... and ipywidgets is installed as a bundle with the other nbextension, such as nb_conda_kernels. Until we have a conf.d approach working, I don't think it will be a solvable thing... because ipywdgets can only be shipped in anaconda using the bundle approach (no post-scripts allowed in anaconda).\nThe other option is to eliminate ipywidgets from the jupyter metapackage that anaconda provides... but that will be a discrepancy with the jupyter metapackage we (jupyter) offer...\nThoughts welcome!!\n I am just curious. What is the difference between Python [Default] and Python [Conda Root]? Are they the same?\n I think that 'Default' refers to the conda environment you launched the notebook server in. 'Conda root' is the root conda environment, the one that you're in before you activate another env. So if you start the notebook server without activating a conda environment, they will be the same.\n","Pinging @flying-sheep for an issue related to R.\n\nIt sounds like after some time it's deciding to only generate the text representation of the plot. I don't think I've ever seen that before, and I can't think why it would occur.\n correction: it has to be notebook-related, not R or IRkernel related:\n\n> Even if I restart the R kernel, it will still be failed; I have to kill the current ipython notebook process and re-start the ipython notebook, then it will be working fine again. After a few hours intact, it will fail again.\n\n---\n\nso let\u2019s give some technical background: \u201cPlot with(out) title\u201d is the text representation emitted by the IRkernel, but unless configured otherwise, it\u2019ll also emit a PNG representation.\n\nif that one isn\u2019t displayed, either\n- IRkernel doesn\u2019t create it (e.g. because it\u2019s configured to only emit text. i don\u2019t see how that can happen accidentally, and survive a kernel reboot but not a notebook restart)\n- IRkernel doesn\u2019t send it (would be strange because it gets handled a list with all representations and converts it to JSON, then sent as one blob)\n- notebook doesn\u2019t receive it (it\u2019s stripped out somewhere along the way)\n- notebook doesn\u2019t display it (because the text format is the only one, it\u2019s configured to display text rather than PNG using display_priority, or because displaying PNG errors somehow)\n Right, it can't be R in isolation, but this is so weird I wondered if you knew of anything that might cause the kernel to behave oddly while plotting.\n\n@andrewzhang1 when this happens, can you open your browser's JS console and see if there are any errors displayed there?\n so it\u2019s certainly the notebook process that goes bad somehow.\n\nthe only thing a notebook process gone bad could influence the kernel would be if it after that point repeatedly sends a message to the kernel that re-breaks the kernel even after restarts\u2026 e.g. if it starts to prefix every code cell with `options(jupyter.plot_mimetypes = NULL)` or repeatedly sends that code to be executed. this sounds implausible.\n\ntherefore i guess the problem is probably completely on the notebook side, although it _might_ be only possible with the kind of data the IRkernel sends (certain PNG structure? no idea)\n\n@andrewzhang1 could you please also send us a notebook that was **saved with** one intact plot cell (before the damage, displaying a plot) and a broken plot cell (after the damage, displaying the \u201cPlot with(out) title\u201d text)? that way we know if the problem only occurs during displaying or with the actual notebook data. please also test if reloading the browser tab helps.\n [Sample_R_Before-Damage.ipynb.zip](https://github.com/jupyter/notebook/files/509223/Sample_R_Before-Damage.ipynb.zip)\n[Sample_R_After-Damage.ipynb.zip](https://github.com/jupyter/notebook/files/509224/Sample_R_After-Damage.ipynb.zip)\n\nI enclosed two ipynb files: Sample_R_Before-Damage.ipynb and Sample_R_After-Damage.ipynb. Please let know if I need to add more, thanks!\n I checd the version for the python and R in my two machines that have above problem:\nR version 3.3.1 (2016-06-21) -- \"Bug in Your Hair\"\n\nPython 2.7.12 |Anaconda 2.2.0 (64-bit)| (default, Jul  2 2016, 17:42:40)\n[GCC 4.4.7 20120313 (Red Hat 4.4.7-1)] on linux2\n\nand \n\nR version 3.3.1 (2016-06-21) -- \"Bug in Your Hair\"\n\nPython 2.7.12 |Anaconda 4.1.1 (64-bit)| (default, Jul  2 2016, 17:42:40)\n However, I had an old instance with same os (ubuntu) on aws that runs for many months, and the both R and ipytyon notebooks work fine without above problem, their version of R and python are:\n\nR version 3.2.2 (2015-08-14) -- \"Fire Safety\"\n\nPython 2.7.11 |Anaconda 2.4.1 (64-bit)| (default, Dec  6 2015, 18:08:32)\n\nIs the problem due to the newer version of R?\n hmm, so the PNG data is certainly gone from the file\u2026 i.e. not a pure display problem.\n\nand as said: i don\u2019t think R has anything to do with it, since as you said the corruption persists across kernel restarts but not notebook restarts.\n Are there any errors in the JS console when you try to plot something and the plot doesn't show?\n @takluyver yes, sometime I saw this error after a few days intact when I try to plot:\n\nE\nr\nr\no\nr\n\ni\nn\n\n.\nE\nx\nt\ne\nr\nn\na\nl\n2\n(\nC\n_\nX\n1\n1\n,\n\np\na\ns\nt\ne\n(\n\"\np\nn\ng\n:\n:\n\"\n,\n\nf\ni\nl\ne\nn\na\nm\ne\n,\n\ns\ne\np\n\n# \n\n\"\n\"\n)\n,\n\ng\n$\nw\ni\nd\nt\nh\n,\n\n:\n\nu\nn\na\nb\nl\ne\n\nt\no\n\ns\nt\na\nr\nt\n\nd\ne\nv\ni\nc\ne\n\nP\nN\nG\n\nT\nr\na\nc\ne\nb\na\nc\nk\n:\n\nplot without title\n That old error with the exploded string again!\n\n``` py\n>>> ''.join(c if c else ' ' for c in s.split('\\n'))\n'Error in .External2(C_X11, paste(\"png::\", filename, sep = \"\"), g$width, : unable to start device PNG Traceback:'\n```\n So that is an error coming from R. I'm mystified as to why it would start doing that depending on how long the notebook server has been running, though. :-S\n wild ass guess: maybe the PNG devices get never closed and just open file descriptors until the OS starts to disallow it?\n\nand the file descriptors somehow get repatriated to the jupyter process once the kernel dies and therefore don\u2019t vanish?\n\nIDK why i think this, but maybe it\u2019s better to mention it than not.\n Reasonable hypothesis, but to the best of my knowledge file descriptors are cleaned up when a process dies.\n\n@andrewzhang1 are you totally sure that restarting an R kernel after this has occurred does not make it work again? Sorry to ask something that you already said, but that seems very strange. Is there anything else that could be changing when the problem appears?\n Not it's even worse: it starts hanging when I run any of the R code, it will show: \nIn [*]; while ipython notebook works fine for the plot, etc. Even I restart the R kernel, it won't solve the problem, I have to kill the process and re-start the ipyton notebook in order to get it back to work (I saw this many times, and use it as a workaround by re-starting the notebook).\n maybe an update gone awry. your error message is mentioned here:\n\nhttp://stackoverflow.com/questions/22096391/generate-png-with-r\n @flying-sheep I installed the update as per above links; however, it did no solve my problem. It still get the error after a while. What is the root cause for the problem? What if I downgrade to R 3.2 (how do I downgrade)?\n we\u2019re in the dark about the root cause, i\u2019m afraid.\n\nthe error above (\u201cunable to start device PNG\u201d) reminds me of another error that occurs when R isn\u2019t installed properly, but then it would appear immediately, not after a time.\n\nthe question is if you or your sysadmin compiled R from source. if so, it will compile but have broken graphics (i.e. `png` doesn\u2019t work). you can fix that by either\n- using R from package sources instead of compiling yourself, or\n- by recompiling with something like `./configure --prefix=/usr/local --without-x --with-cairo --with-libpng --enable-R-shlib && make && make install`, and then checking if `getOption('bitmapType') == 'cairo'`\n","Makes sense. The Travis failures look like they're not just random, though.\n Indeed, improper use of this and that. Should be okay, now.\n Backported.\n I modified my local codecell.js with the changes listed here, but the autosave does not save when jupyter is executing a code. Are there any other modifications that needs to be done to enable this feature?\n `codecell.js` and the other js files alongside it are bundled into a single big javascript file for quicker loading. The [contributing guide](http://jupyter-notebook.readthedocs.io/en/latest/contributing.html) has details of how to get the development version and build the css & js.\n","I'd consider that expected behaviour, though I can see how it would be a bit frustrating if you didn't know you'd still got the notebook open.\n thanks for the reply..  but say it was opened and left in some other tab and I want to delete it. but after some time I am seeing it in my dashboard. It will question jupyter functionality. Any was to disable that .. we can disable auto save . but any luck to tackle the thing.\n\nMore .. what is the prons of the functionality.\n The pros of the functionality is to not lose work if your browser crash. \n\nIt's the same behavior as most editor. If you open a file, leave the window open and delete the file from the file system your program will resave the file at some point. \n Thank you .. Please close this.\n","Hi there ! \nThanks for your pull request ! \n\nI am not sure what you are trying to achieve here, from what I can read you are trying to add API to use a versioning system as a content manager right ? And need APIs to pass the commit message around. \n\nFirst this need to have some conflicting in a couple of files:\n\n```\nnotebook/static/notebook/js/menubar.js\nnotebook/templates/page.html\n```\n\nSecond as a advice I would suggest you configure your editor to not autostrip trialing whitespace, it increases the chances of conflict, and screw up git history (in particular blam which is useful). \n\nIf you have any questions feel free to ask !\n Hey there, I'm going through old issues and it seems to me that it makes sense to close this one.\r\n\r\nThere are too many irrelevant commits here that just whitespace related, and the PR has been sitting idle for 3 and a half months without any activity.\r\n\r\n\r\nThanks everyone and happy hacking! :bowtie:","We will be working on that by actually having the model on the server side, which will send only the require part to the browser. \n\nAs for which mimetype to actually compute, right now, usually libraries have global flag to enable/disable. \n\nAny help to move things forward is of course appreciated. \n This is something we've thought about in other kernels as well. Until quite recently, the R kernel was drawing SVG, PNG, JPEG and PDF by default - the last especially made big chunks of binary data. We've now dropped JPEG and PDF from the defaults.\n\nHowever, I don't want to go too far in the direction of only drawing the format the current client wants. I think it's a bad user experience if you have to explicitly think about whether this is an archival notebook or a quick-and-dirty exploration before making a plot. In a sense, the whole point of the notebook is to make a smoother transition from exploration to a more presentable document. So I think we need defaults that work reasonably well for both.\n","I see the same in [this Codemirror demo](http://codemirror.net/demo/closebrackets.html).\n\nCodemirror is the editor component we use in cells. We have only limited control over the editing behaviour from the outside, so for something like this you probably need to take it up [with Codemirror](https://github.com/codemirror/CodeMirror/) and then get a new version included in the notebook.\n Cool i'll raise an issue there, thanks.\n https://github.com/codemirror/CodeMirror/issues/4287\n","A notebook should be trusted once you have executed it all the way through on the computer you're using. But being untrusted shouldn't stop it from saving, so I suspect that something else is the problem.\n\nAre there any errors in the terminal where you launched the notebook when you try to save?\n No, there aren't any errors. Below is the full console trace.\n\nPython 3.5.2 |Anaconda 4.2.0 (32-bit)| (default, Jul  5 2016, 11:45:57) [MSC v.1900 32 bit (Intel)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n\n> > > import notebook.notebookapp\n> > > notebook.notebookapp.main()\n> > > [I 23:06:04.714 NotebookApp] [nb_conda_kernels] enabled, 2 kernels found\n> > > [I 23:06:05.900 NotebookApp] [nb_conda] enabled\n> > > [I 23:06:06.011 NotebookApp] \\u2713 nbpresent HTML export ENABLED\n> > > [W 23:06:06.012 NotebookApp] \\u2717 nbpresent PDF export DISABLED: No module named 'nbbrowserpdf'\n> > > [I 23:06:06.139 NotebookApp] [nb_anacondacloud] enabled\n> > > [I 23:06:06.381 NotebookApp] Serving notebooks from local directory: C:\\Users\\UserName\\Documents\\MyDocuments\\Python workspace\n> > > [I 23:06:06.381 NotebookApp] 0 active kernels\n> > > [I 23:06:06.382 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/\n> > > [I 23:06:06.383 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n> > > [I 23:06:17.526 NotebookApp] Kernel started: 4ab93ecc-ad90-4e6a-835d-916e6049609c\n> > > **[I 23:06:21.973 NotebookApp] Saving file at /Introduction to Data Science/MyFirstNotebook.ipynb**\n> > > [I 23:06:26.837 NotebookApp] Kernel shutdown: 4ab93ecc-ad90-4e6a-835d-916e6049609c\n> > > **[W 23:06:29.950 NotebookApp] Notebook Introduction to Data Science/lecture9-Copy\n> > > 2.ipynb is not trusted**\n> > > [I 23:06:32.298 NotebookApp] Kernel started: 49cb7f3c-5e60-44d2-a6b9-e08e4f6c0c45\n> > > [I 23:07:05.265 NotebookApp] Interrupted...\n> > > [I 23:07:05.265 NotebookApp] Shutting down kernels\n> > > [I 23:07:05.767 NotebookApp] Kernel shutdown: 49cb7f3c-5e60-44d2-a6b9-e08e4f6c0c45\n\nThe first file, \"MyFirstNotebook\" is my file, so it can be saved correctly. The second file, \"lecture9-Copy2\" is my teachers file, so it cannot be saved.\n\nActually, I have already discovered that the problem disappears when I turn my antivirus off. So, now I have only one question: which program saves the file? I was trying to add python.exe as an antivirus exception, but it won't help. \n Oh, security software. That's still very weird that it will let you save your own notebooks but not ones you got from elsewhere, though. It's the notebook server that saves notebooks; I guess that would be running as python.exe, but I don't know what your security software is actually blocking. What AV system is it? Does it have any kind of log that might show you what happened?\n My AV is Kaspersky Internet Security 2012, and actually I'm going to change it. I hope it will helps me. I tryied to discover some logs, but unsuccessfully.\n\nActually, I have discovered another interesting issue. To discover how Jupyter saves files, I change file notebook/services/contents/handlers.py -- I put \"raise ValueError()\" inside _save() function. So, then I watch a call stacktrace and watch a function run() at tornado/gen.py. I have change this function as follows:\n\n```\n                    print(future) #delete_it\n                    value = future.result()\n                    print(value) #delete_it\n```\n\nInstead of just\n                        value = future.result()\n\nand then Jupyter stops to even load my teachers files! I've got a message \"Error loading notebook\nAn unknown error occurred while loading this notebook. This version can load notebook formats v4 or earlier. See the server log for details.\" when I was trying to watch my teachers file, and also in console, there was error log message:\n\nb'GET /api/nbconvert HTTP/1.1\\r\\nHost: localhost:8888\\r\\nConnection: keep-alive\\\nr\\nAccept: _/_\\r\\nX-Requested-With: XMLHttpRequest\\r\\nUser-Agent: Mozilla/5.0 (W\nindows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.143 Safar\ni/537.36\\r\\nReferer: http://localhost:8888/notebooks/Introduction%20to%20Data%20\nScience/lecture9.ipynb\\r\\nAccept-Encoding: gzip, deflate, sdch\\r\\nAccept-Languag\ne: ru-RU,ru;q=0.8,en-US;q=0.6,en;q=0.4\\r\\nIf-None-Match: \"0ee129b36ba950a6aac381\nef4a3f3ce5103bf478\"\\r\\n\\r\\n'\n\nFor me it seems like some kind of UB: I just put some print commands, and it fails.\n\nUPD: a call stacktrace:\n\n```\nTraceback (most recent call last):\n  File \"C:\\Anaconda3\\lib\\site-packages\\notebook\\base\\handlers.py\", line 457,\n```\n\n in wrapper\n        result = yield gen.maybe_future(method(self, _args, *_kwargs))\n      File \"C:\\Anaconda3\\lib\\site-packages\\tornado\\gen.py\", line 1015, in run\n        value = future.result()\n      File \"C:\\Anaconda3\\lib\\site-packages\\tornado\\concurrent.py\", line 237, in\nresult\n        raise_exc_info(self._exc_info)\n      File \"<string>\", line 3, in raise_exc_info\n      File \"C:\\Anaconda3\\lib\\site-packages\\tornado\\gen.py\", line 1021, in run\n        yielded = self.gen.throw(*exc_info)\n      File \"C:\\Anaconda3\\lib\\site-packages\\notebook\\services\\contents\\handlers.p\ny\", line 244, in put\n        yield gen.maybe_future(self._save(model, path))\n      File \"C:\\Anaconda3\\lib\\site-packages\\tornado\\gen.py\", line 1015, in run\n        value = future.result()\n      File \"C:\\Anaconda3\\lib\\site-packages\\tornado\\concurrent.py\", line 237, in\nresult\n        raise_exc_info(self._exc_info)\n      File \"<string>\", line 3, in raise_exc_info\n      File \"C:\\Anaconda3\\lib\\site-packages\\tornado\\gen.py\", line 285, in wrapper\n\n```\n    yielded = next(result)\n  File \"C:\\Anaconda3\\lib\\site-packages\\notebook\\services\\contents\\handlers.p\n```\n\ny\", line 182, in _save\n        raise ValueError()\n @AC130USpectre Have you figured out a workaround for this?\n @gnestor, no, I just every time when I use Jupyter disable Kaspersky AV. Actually, even with my own Notebooks there is a saving issues with enabled AV -- after some time (an hour maybe) it stops saving. In November AV license expires, so I will try a new version and I hope that it will works.\n Interesting, so AV is the cause. It may be worth inquiring to Kaspersky why their software might be regulating the writing to files downloaded from the internet (or whatever your exact situation). I'm closing this. Let us know if you learn anything else...\n","One thing that I've wanted for a long time for easy metadata editing is a 'cell tagging' UI, which would let you attach simple tags to cells. We could define some common ones (e.g. `hide_output`), and extensions could use arbitrary tags for whatever makes sense.\n you mean switch `\"metadata\": {\"hide_output\":true}` to `\"metadata\": {\"tags: [\"hide_output\"]}`?\n\nand then maintain a list of known tags, one of tags in the document, and a UI allowing to easily add tags from both lists or new ones ([like this](https://goodies.pixabay.com/jquery/tag-editor/demo.html))\n Yup, exactly. Mostly just because there's already a well-established UI convention, and existing components we may be able to reuse, for 'tags', whereas for editing key-value pairs we'd need something much more custom.\n Yes. The tags have been in the notebook format for a couple of year.  it's true that just the UI is missing. \n\ncc @michaelpacer \n Trying to implement a filter that would look for this. I'm assuming that this is taking the wrong tack, because the error I got trying to keep with our general style of call was that booleans have no get method. \n\n```\n{%- if cell.metadata.get(\"tags\",False).get(\"hidden\", False) -%}\n\njinja2.exceptions.UndefinedError: 'bool object' has no attribute 'get'\n```\n\nBut, if I try to just go with \n\n```\n{%- if cell.metadata.tags.get(\"hidden\", False) -%}\n\njinja2.exceptions.UndefinedError: 'nbformat.notebooknode.NotebookNode object' has no attribute 'tags'\n```\n\nSome cells don't have a tags part of their metadata and so the call fails.\n\nSo I don't think our metadata format should be determined only by how we may be able to easily query their contents, however this does seem unnecessarily complicated. \n\nand just for clarification's sake, this is the data just below the cell level including the metadata with the tags argument (reformatted for human legibility):\n\n``` json\n    \"cell_type\": \"code\",\n        \"execution_count\": 1,\n        \"metadata\": {\n            \"collapsed\": false,\n            \"deletable\": true,\n            \"editable\": true,\n            \"tags\": [\n                \"hidden\"\n            ]\n     }, \n```\n\nThat was how you were imagining it being stored, correct? @takluyver @Carreau @flying-sheep \n Note: this nested dictionary thing seems to be somewhat intractable\u2026 at least acc. to this SO: http://stackoverflow.com/questions/10788771/no-side-effect-nested-dictionary-implementation.\n Ok so this worked. \n\n`{%- if cell.metadata.get(\"tags\",False) and \"hidden\" in cell.metadata.tags -%}`\n\nBut that still looks pretty icky.\n\nSo I'm attempting to mod the nice toggling in http://www.damian.oquanta.info/posts/mimic-the-ipython-notebook-cell-execution.html. \n\nSo the hard part is when you're hiding a cell altogether, there is a need to create something that is clickable that can appear and disappear on the fly depending on whether it is expanded. \n\nI wasn't able to figure out how to do that yet, but I was able to get the following to work. \n\n``` jinja2\n{%- block any_cell -%}\n{%- if cell.metadata.get(\"tags\",False) and \"hidden\" in cell.metadata.tags -%}\n<img class=\"clickimage\" src=\"broken.png\" alt=\"\">\n<div class=\"hidden_cell\">\n{{super() }}\n</div>\n{%- else -%}\n{{ super() }}\n{%- endif -%}\n{%- endblock any_cell -%}\n```\n\nand use the image as the clicking target instead of the input area:\n\n``` javascript\n<script>\n$(document).ready(function(){\n    $(\".clickimage\").click(function(){  // This is where it breaks because there's nothing left to use as the toggle.  \n        $(this).next('.hidden_cell').slideToggle();\n    });\n})\n</script>\n```\n `None`, as well as empty `dicts` and `list`s are falsey, so both things would work:\n\n``` jinja\n{% if metadata.get('maybe_dict', {}).get('hidden') %}\nmetadata['maybe_dict'] is a dict\nmetadata['maybe_dict']['hidden'] is truthy\n{% else %}\nmetadata doesn\u2019t contain the key 'maybe_dict', or\nmetadata['maybe_dict'] or metadata['maybe_dict']['hidden'] is falsey.\n{% endif %}\n```\n\n``` jinja\n{% if 'hidden' in metadata.get('maybe_list', []) %}\nmetadata['maybe_list'] is a sequence containing the item 'hidden'\n{% else %}\nmetadata doesn\u2019t contain the key 'maybe_list', or\nmetadata['maybe_list'] doesn\u2019t contain the item 'hidden'\n{% endif %}\n```\n Since `tags` as stated above are a list, the latter seems more appropriate and cleaner than my solution.\n\nOther details seem like they should be saved for the nbconvert repo\u2026 any thoughts on how to hide things while maintaining a clickable area to unhide them would also be welcome!\n > Since tags as stated above a list, the latter seems more appropriate and cleaner than my solution.\n> \n> Other details seem like they should be saved for the nbconvert repo\u2026 any thoughts on how to hide things while maintaining a clickable area to unhide them would also be welcome!\n\nSee what dashbords from IBM is doing they have a global toggle that make things translucent but not hidden. THen while in this mode click hide/unhide.  \n Marking this with the JupyterLab milestone as we are working on something over there that would address much of this. @ellisonbg \r\nCan you link to those jupyterlab prs and issues here? \r\n\r\nIs jupyterlab focusing on the UI or the tag semantics? \r\n\r\nAlso @mgeier had some thoughts about the tagging semantics that are discussed here: https://github.com/spatialaudio/nbsphinx/issues/65 @michaelpacer Thanks for bringing this to my attention.\r\n\r\nI'm sorry if this was explained already somewhere else, but are you planning to have special UI elements for hiding and unhiding cells/input/output?\r\nOr should everything be done with a generic metadata or tag editing interface?\r\nThose two things seem a bit mixed up in the discussion above.\r\n\r\nIf there will be special UI elements, I don't think it makes sense to store the state in the list of tags.\r\nThose tags might still be very useful, just not for things that have already special UI elements.\r\n\r\nAFAIU, the \"tag toolbar\" we're talking about here is part of each cell, right?\r\nNow if a cell gets \"hidden\", will the \"tag toolbar\" still be visible? My concerns were addressed here: https://github.com/spatialaudio/nbsphinx/issues/65#issuecomment-269041731, thanks! the relevant issues in jupyterlab (I think) are: \r\n* https://github.com/jupyterlab/jupyterlab/issues/902\r\n* https://github.com/jupyterlab/jupyterlab/issues/1308 Agreed, thanks for coordinating, @michaelpacer!","You don't generally want to overwrite files in `site-packages`. If you want to use custom.js, the place to put it is `~/.jupyter/custom/custom.js`. What version of the notebook are you using?\n Notebooks version is 4.2.2\n I placed the code as per you blog in ~/.jupyter/custom/custom.js and restarted jupyterhub and ran my test code as stated above. It gave me 62k lines. I need to limit output to 1k only.\n just an update I ran the code on notebook version ~ 4.2.1\n Any pointer on this.\n","Any suggestions to add meta data too all notebooks through backend. \n\nAlso to newly creating notebooks too.\n If you want to add metadata on all notebooks, you can do this in two ways:\n1. in a custom ContentsManager that adds the metadata on open/creation of notebooks\n2. in a javascript nbextension that adds it on the client-side on open.\n The correct way to do this is to create your own ContentsManager which does the specific action before creation or save. To do this you would need to make a server extension though.","Thanks, this is already tracked as ipython/ipython#8741 (the way lists display is part of IPython, not the notebook). Unfortunately we have not yet found a good general fix that doesn't mess things up for things like lists of lists or lists of dicts.\n","It looks like the notebook does not currently provide a \"duplicate line\" or \"duplicate cell\" feature. However, if it did then you could define a custom keyboard shortcut by following [these instructions](http://jupyter-notebook.readthedocs.io/en/latest/examples/Notebook/Custom%20Keyboard%20Shortcuts.html). FYI, notebook uses [Codemirror](https://codemirror.net/) for the text editor, so [any features that it supports](https://codemirror.net/doc/manual.html#api) are also supported in notebook.\n I have done it\nhttp://stackoverflow.com/a/40505055/6003870\n Nice work, @setivolkylany! I have copied and pasted your code here for future reference. Add the following to your [custom.js](http://jupyter-notebook.readthedocs.io/en/latest/examples/Notebook/JavaScript%20Notebook%20Extensions.html#custom.js):\n\n``` js\nCodeMirror.keyMap.pcDefault[\"Ctrl-Down\"] = function(cm){\n\n    // get a position of a current cursor in a current cell\n    var current_cursor = cm.doc.getCursor();\n\n    // read a content from a line where is the current cursor\n    var line_content = cm.doc.getLine(current_cursor.line);\n\n    // go to the end the current line\n    CodeMirror.commands.goLineEnd(cm);\n\n    // make a break for a new line\n    CodeMirror.commands.newlineAndIndent(cm);\n\n    // filled a content of the new line content from line above it\n    cm.doc.replaceSelection(line_content);\n\n    // restore position cursor on the new line\n    cm.doc.setCursor(current_cursor.line + 1, current_cursor.ch);\n};\n```\n Thanks a lot. Excuse my ignorance, but how do you load CodeMirror from custom.js ?\r\n- I copied the content of the CodeMirror src folder  inside the  **.jupyter/custom**  folder \r\n- and added on top of the **custom.js** script :\r\n```\r\n$.getScript(\"codemirror.js\", function(){\r\n});\r\n```\r\nbut not to avail. Any feedback would be greatly appreciated.\r\n I suppose my request wont be implemented in a future version of Jupyter ? @clementlefevre You want to use the notebook's CodeMirror module vs. importing your own (which is conveniently available as a [global](https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/js/main.js#L83) `CodeMirror`). However, setting `CodeMirror.keyMap.pcDefault[\"Ctrl-Down\"]` in `custom.js` will affect the global `CodeMirror` but none of the instances used by the `Cell` objects in the notebook (because `custom.js` is being executed after the notebook is loaded), so if you want to add this keymap to work in your cells, you will need to get all of the cells and modify their `code_mirror` instances. An example `custom.js`:\r\n\r\n```js\r\n// Get instances of `Cell` in the notebook\r\nvar cells = $('#notebook-container').find('.cell').map(function() { \r\n  return $(this).data('cell')\r\n});\r\n// For each instance of `Cell`, add a keymap to `Cell.code_mirror`\r\ncells.each(function(index) {\r\n    this.code_mirror.addKeyMap({\r\n        'Ctrl-Down': function(cm) {\r\n            var current_cursor = cm.doc.getCursor();\r\n            var line_content = cm.doc.getLine(current_cursor.line);\r\n            CodeMirror.commands.goLineEnd(cm);\r\n            CodeMirror.commands.newlineAndIndent(cm);\r\n            cm.doc.replaceSelection(line_content);\r\n            cm.doc.setCursor(current_cursor.line + 1, current_cursor.ch);\r\n        }\r\n    });\r\n});\r\n```","Hi there !\n\nCan you provide a self contained example notebook ? I have difficulty reproducing this. \nOr are you falling in the trap of python's \"[mutable default arguments](http://docs.python-guide.org/en/latest/writing/gotchas/#mutable-default-arguments)\" which is a classic misunderstanding of how default arguments works[1].\n\nHere is what I did:\n\n```\n%%writefile testpy.py\n\ndef g(s=[]):\n    s.append(2)\n    return s\n```\n\n```\ndef f(s=[]):\n    s.append(2)\n    return s\n```\n\n```\nfrom testpy import g\n```\n\n```\ns = [3,4]\n```\n\n```\ng() # [2]\n\nf() # [2]\n```\n\nSame if I define `s=[3,4[` first.\n\n[1]: Default arguments implementation is tricky to understand and rarely correctly explained, one can question question why it has been chosen to be this way.\n","There's a total rewrite of the frontend code going on under the name [Jupyterlab](https://github.com/jupyter/jupyterlab).\n","I removed `~/.jupyter`, buyt the problem persists.   I then found found the python3 version that it was running (from some old project) and deleted it, and now it just gives 'cannot find interpreter' errors.  pip uninstalling/reinstalling jupyter doesn't work.\n There are kernelspecs installed pointing to that. Run `jupyter kernelspec list` to see where they are.\n\nhttp://ipython.readthedocs.io/en/stable/install/kernel_install.html\n","@frederikhermans congratulation for your first PR! You seem to have done everything correctly. \n\nThe fix seems fine too ! I'll let someone else have a look still.\n\nThanks !\n @takluyver You're absolutely right, it should be `pre-wrap` instead of just `wrap`. (Just as `white-space` is `pre-wrap` for all `<pre>` tags, as defined in notebook.less).\n\nBut even with `pre-wrap`, the prompt's wrapping behavior is slightly different from the rendered result, because the `<span>` breaks words differently than the `<pre>`. So either we add more CSS to the  `<span>` to get `<pre>`-like behavior, or we replace the `<span>` with a `<pre>` for the prompt. The latter solution seems cleaner to me.\n\nI'll look into it and get back in a day or two.\n Took another shot at it. I replaced `span.input_prompt` with a `pre.input_prompt`.\n\nHere's what it looked like before: http://gfycat.com/WellwornCluelessIbizanhound (Note how the formatting of cell 3 changes when the user hits enter)\nHere's what it looks like now: http://gfycat.com/RashIllfatedBluebottlejellyfish (Formatting doesn't change)\n\nI've tried the patch with an ipython kernel running in Chrome 43.0.2357.130, Firefox 38.0.5, Safari 8.0.6, all on OS X 10.10.3.\n\nNote that I also moved the explicit setting of a monospace font on the `div.raw_input_container` to `input.raw_input`. This was necessary because the `div.raw_input_container` was be much wider (in Chrome and Firefox) than the output container with which it is replaced upon user input. The change in the width would cause words to be wrapped differently during and after the prompt. I haven't figured out what the issue actually is, but I think it was due to relative spacing somewhere.\n Thanks, I think this is fine, but I'll let someone else double check.\n Travis failure seem spurious, can somebody restart it? \nbtw... LGTM too.\n Woohoo! Thanks guys!\n","I like this idea. What about putting three dots through the middle of the logo while the kernel is busy?\n I just submitted a PR for this \ud83d\udc4d\n","Also, it would be good to insert an iopub message that says that further iopub messages were limited, so that the error is stored in the notebook and it is clear to the end user. Right now only the server operator gets to see what the problem was.\n Thanks.  I frequently have to manually edit ipynb files using vim to remove huge output that users of SageMathCloud generate.  These are often students who are first time Python/Jupyter users, so epically large unintentional output is not uncommon. \n Thanks for bringing that up. For the record, the rate limits here don't address performance problems that may come up with rendering files that already have many outputs.\n @jasongrout @Carreau @minrk Any suggestions as to what a good default value would be?\n I agree 100%, but I don't know how to pick a sensible default other than human testing. My guess is that message rate limit should be between 100-1k per second. I have less of a sense of the flow rate limit. I'll play with some values and come back with something to start with.\n I've played around a bit, and I'm having difficulty coming up with reasonable default numbers. With almost any value, I can cause problems in the browser with certain output patterns, but also be annoyingly restrictive with others, using the same values.\n\nRight now, I'm looking at:\n- data_rate = ~1M\n- msg_rate = 500-1000\n- rate_limit_window = 2-3\n >  I can cause problems in the browser with certain output patterns, but also be annoyingly restrictive with others, using the same values.\n\nI don't know how you guys implemented things, but in SMC at least, whenever rate limitation happens, there is a big clear message saying it happened with instructions about how to raise/lift the limitation.  \n Yup, we've got a big clear message saying that rate limit has been hit and how to raise it. It's still really unpleasant when it happens, so I don't want the default limit to be too low.\n I guess that the best way to test this is to merge into master and start using it ourselves. I just submitted a PR. Have a look and let's merge and start testing...\n","What folder did you start the notebook in? Does your user account have permission to write files there? Does `data.csv` already exist in that folder?\n Oops!!! I forgot the permission matter... It looks like that I didn't use sudo option...\nBut another question occured. After I run sudo jupyter notebook --allow-root, the console remind me as follow:\n[1013/192242:ERROR:nss_util.cc(94)] Failed to create /home/iterator/.pki/nssdb directory.\nAborted (core dumped)\nso why ...\nThank you for your reply.\n We do not recommend running the notebook as root or with `sudo`. I would guess it fails because some environment variable still refers to your home directory, and root can't write to that.\n","I suspect that it's some issue with `%APPDATA%` pointing to a UNC path (starts with `\\\\`). Can you check for the folder it's trying to write to, both interactively and in Python?\n\n``` python\nos.path.exists('\\\\tholos.itserv.scss.tcd.ie\\Pgrad\\munozmae\\AppData\\jupyter\\runtime\\')\n```\n","@Carreau Is there anything like this? Running `jupyter notebook --help-all` reveals:\n\n```\nKernelManager options\n---------------------\n--KernelManager.autorestart=<Bool>\n    Default: True\n    Should we autorestart the kernel if it dies.\n```\n\nWe could potentially change the value from a bool to an integer to represent the number of retries or timeout in seconds...\n We run some spark-backed kernels (Toree included) that I would love to be able to increase this timeout on, similar to the jupyter console settings. I think there is some logic somewhere to delay the timeout for the first heartbeat. Not sure where. It might be in a dependency.","Related to ipython/ipython#9969\n cc @jasongrout @blink1073 for JupyterLab. Following  ipython/ipython#9969 and other async-output discussions, I'm increasingly convinced that this is the right approach: Leave it to the cell to dispose of callbacks, which should happen on the next execution, and otherwise leave callbacks for a given execution registered as long as the output area associated with it is on the page. This eliminates the issue of trying to guess whether output is done.\n","need to update a few tests to take the added timestamps into account\n I just spotted this in the hackpad. Does it align with the activity tracking added to the kernel gateway a while back?\n\nhttps://github.com/jupyter/kernel_gateway/blob/master/kernel_gateway/jupyter_websocket/swagger.yaml#L298\n @parente I forgot about the KG activity API! This is significantly less than that:\n1. it only tracks a single activity stamp, not categories\n2. it's two added fields (last_activity, execution_state) in the kernels API, rather than a new API endpoint\n\nDo you think we should pull in the KG API wholesale, rather than this simpler tracker? What have you used the more detailed information for?\n > Do you think we should pull in the KG API wholesale, rather than this simpler tracker? What have you used the more detailed information for?\n\nI think the extra detail was added shotgun style because we didn't have our hands around everything that operators would want to know to make decisions about monitoring and shutting down kernels. At a minimum it'd be good to have the field names and types that are common match at least, even if the API is not 100% the same.\n\nThe original issue is here: https://github.com/jupyter/kernel_gateway/issues/96\n\n@rwhorman probably has more detail on what's used or not at the moment.\n \\o/ Can we use this from the hub too, thus taking out last activity tracking from the proxy?\n This is so excellent to see.\n https://github.com/jupyterhub/jupyterhub/issues/857 is related, talks about adopting a standardized format for exposing white-box metrics (such as last-activity!).\n Haven't heard back from @rwhorman on the comment above. \r\n\r\n@jtyberg @lbustelo do either of you guys know if the activity tracking API proposed here vs the one with way more properties in the kernel gateway will satisfy existing use cases? @parente  Nothing conclusive, as we're still experimenting and adjusting our model.  Heads up, this has a merge conflict. Thanks, rebased. Hopefully this will make it into 4.4?\n\nOn Fri, Jan 13, 2017 at 6:54 AM, Min RK <notifications@github.com> wrote:\n\n> Thanks, rebased.\n>\n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/1827#issuecomment-272461488>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAB23rAW9fMxFseaT75VW-A6x5fotPLgks5rR5APgaJpZM4KTsKR>\n> .\n>\n\n\n\n-- \nYuvi Panda T\nhttp://yuvi.in/blog\n I'm hoping we might go straight to 5.0, because I'm getting tired of telling people that the new clipboard functionality (#1286) is not available yet. What's the status of this? I'm trying to push towards a 5.0 release. Is this going to be mergeable fairly soon, or should we hold it for 5.1? @takluyver fixing it now. I think it's in good shape, I just need to update the new tests to deal with the token changes. The js/tree group for py3.5.1 build was stuck on Travis for 2 hours and 45 minutes without starting, so I stopped it and restarted it just now. Thanks, @ivanov! Looks all green now.\r\n\r\nI'm happy with it as-is now, but further reviews and ideas are always welcome. :tada:","I'm unsure about that.  Define is just defining a module while `require()` will actually  trigger its evaluation (when a module have a main function). Here we do want to _define_ them in particular they all rely on the `base/js/namespace` module to be available, and evaluation will be triggered by the value returned in\n\n```\nreturn {\n             load_ipython_extension: load_ipython_extension\n         };\n```\n\nDid you actually have things that don't work with `define` and do work with `require` ? \n OK! I was ill informed about define, I didn't realize it's used to define and require at the same time\nThanks\n > OK! I was ill informed about define, I didn't realize it's used to define and require at the same time\n> Thanks\n\nyeah the naming is quite... unfortunate. You can think of `define()` as the lazy of the two. It tells you that something does exist and will evaluate it when needed. This is generally useful when you have circular dependencies. \n\nIt took me a while to understand it as well. It's kinda weird !\n\nThanks for try though ! We really appreciate !\n","ends up being the `CTRL` + `[` is a legacy way of getting `ESC` and is not equivilent to the `ESC` key (it's a browser issue not a jupyter notebook issue)\n","Seem like one could \"just\" use a normal slider and use `10^value` no ?\n Yes but this is just a nice-to-have.\n Shashi, thanks for the issue!  Can you open an issue on the ipython widgets repo?  https://github.com/ipython/ipywidgets\n\nAnd also, could you be a bit more descriptive?  I'm not sure exactly what `logspace(-3,+3)` is.  Are you saying you want the labels and values on the slider to change?  Could a slider that takes arbitrary text labels and associated values work?\n\nEdit: I just ried `logspace(-3,+3)` in Julia, and it gave back an array of values presumably equally spaced with respect to log.  In Sage, we had the concept of a continuous and discrete sliders, and a discrete slider would take a list of values.  Would a discrete slider (i.e., just take a list of values) be sufficient for your usecase?\n","Hi there, \n\nThanks for the report. For information we prefer security vulnerability report to be disclosed on security(at)ipython.org in order to investigate without potential malicious listener to use the hypothetic vulnerability. We'll have a look. \n Oh, sorry about that. Do you think it is too late to just delete this issue report or do you think too many people have been notified about it?\n > Oh, sorry about that. Do you think it is too late to just delete this issue report or do you think too many people have been notified about it?\n\nNo problem, now that's it's here there are little advantage of removing it. \n Didn't know ipython.org was still around. I should have looked for that at least for a bit first instead of only digging around on jupyter.org\n So a couple of information, regardless of whether you run a localhost server or a remote one we always _strongly suggest_ setting up https/SSL and password. \n\nThis is in [our docs](http://jupyter-notebook.readthedocs.io/en/latest/public_server.html#securing-a-notebook-server) and we are enforcing that a little more each time we make a new major release. We also provide [a tool ](https://github.com/jupyter/notebook/blob/master/tools/secure_notebook.py) to automaticlly secure notebooks. \n\nAs far as I can tell, once a notebook server is secured over https + password the server should be immune to the attach describe.  \n\nIf they are over http, then notebook are anyway susceptible to another wide range of attack. Maybe not remote with DNS poisoning, but they give all users and program of the current machine shell access as the user who run the notebook servers/kernels. \n\nUnfortunately it is relatively hard to automatically generate a trusted-self-signed certificate for a machine it is (still) something we cannot enforce without manual user intervention. \n\nI'm going to refer to @rgbkrk, @minrk and @yuvipanda  to be sure, and likely push a bit more user to set-up ssl. \n\n> Didn't know ipython.org was still around\n\nOh, we are the same developers and IPython is still actively developed. We use the same security mailing list. \n That is good to hear. That does sound like it probably mitigates it (I am not an expert, though)\n\nI guess I fell a bit behind the news in the last couple years with the split.\n > I guess I fell a bit behind the news in the last couple years with the split.\n\nSorry about that. \n\nThe problem was people asking : \n\n> is there IPyhon for R ? Is there IPython for Haskell\n\nSo the part of IPython  which was not purely python became Jupyter. \nJupyter on it's own does nothing for code execution, so when you use Jupyter with Python you are actually using (Jupyter + IPython) as once, but you can also use (Jupyter+IRkernel) or (Jupyter+Scala kernel) . \n\nDoes that make some sens ? \n That makes sense.\n\nThe split was rather nice (i have used the julia and octave kernels some)\n What we did in the Sage notebook (I think implemented by @robertwb) was to by default generate a long random key when the server starts up, and we start the browser with that key in the URL. In Jupyter's case, it's a bit more complicated, but perhaps we could _always_ authenticate the user (either using a random key at startup, or the existing password mechanism) to set an authentication cookie.\n @jasongrout we should be doing that, and once we do, we can require setting a token on the local notebook server.\n FYI, @minrk has submitted a PR to implement this token authentication: https://github.com/jupyter/notebook/pull/1831\n I might be misunderstanding something, but since the kernel can execute arbitrary code, one wouldn't need the DNS trick (the kernel could e.g. email the private data)? If so, shouldn't this be a rather severe vulnerability, where instead of running a DNS, one could execute an exploit using even a static webpage? Normally the cross-origin protection should mean that only pages loaded from the Jupyter server can talk to the server REST API and open websockets to kernels. I'm not a security expert though, so if you think there's another way round that, please try it and let us know. The link  http://bouk.co/blog/hacking-developers/ mentioned that cross-origin protection doesn't prevent `POST` requests. Would this be enough to submit code to the kernel? Running code on a kernel requires a websocket connection, but you could do enough to be concerning just by POST-ing. We also do origin checks on the server side, which *should* prevent this by checking the headers before taking the action. But we skip the check if either the `Host` or `Origin` header is missing, as we assume that's a local script using the REST API. The example in the blog looks like browsers might sometimes send a request without the `Origin` header, which might be a problem.\r\n\r\n@rgbkrk I'd appreciate your assistance once you're up and about :-) With an AJAX request, and it looks like Origin and Host are both [forbidden names](https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name) which cannot be set from Javascript. Now I'll try with forms, as shown in the blog post. With a form submission, it appears that you can perform any operation which doesn't require a JSON body. The ones I can find are:\r\n\r\n* `/api/contents/<dir_path>` - create a new, unnamed file in dir_path\r\n* `/api/kernels` - start a new kernel with the default kernel spec.\r\n* `/api/kernels/<uuid>/<action>` - interrupt or restart a kernel. You need to know the kernel ID for this, however.\r\n\r\nHere's how to replicate it:\r\n\r\n```html\r\n<form enctype=\"text/plain\" method=\"POST\" action=\"http://localhost:8888/api/kernels\">\r\n<input type=\"submit\" value=\"Submit\" />\r\n</form>\r\n```\r\n\r\nWith a running notebook server, serve this (`python3 -m http.server`), open in a browser and click submit. On my system, Chromium sends an `Origin` header, so the origin check blocks it, but Firefox does not, so a kernel starts.\r\n\r\nA simple mitigation for the first two cases would be for `get_json_body` to expect a JSON object, even if it's empty. What I'm doing currently works because it allows a totally empty request body. This doesn't feel like a very robust solution, though. From my limited reading (and a much earlier investigation) the websockets are extremely strict about the origin and header from the browser matching expectations. The usual REST requests are certainly subject to this type of attack though. So how serious is this after all? Is it still true that *hubs are secure? What about notebooks, is it worthy to backport a security patch for the versions that are still supported? @akhmerov an authenticated server is protected from the DNS issue, so Hubs are not affected. The general fix is to enable a version of authentication that is acceptable to use by default (i.e. not a password that people have to remember).\r\n\r\n4.3 *is* the backport of the security fix to 4.x. Backporting farther would probably not be appropriate.","This doesn't allow entering the token in the password field of the login form, which may make sense, and be a more convenient field to paste into in certain circumstances, rather than the full URL.\n > first connect with token sets a cookie\n\n:+1:\n > Truly public servers, such as tmpnb, will need to set NotebookApp.login_token='' to fully disable auth.\n\nWould there be a way for us to allow tmpnb to provide the session information, which would make the notebook server session explicitly only work for one user?\n How will this interact and/or be used with jupyterhub?\n > Would there be a way for us to allow tmpnb to provide the session information, which would make the notebook server session explicitly only work for one user?\n\nAn interesting idea! tmpnb could use this information and redirect with the token in the URL on first connect, rather than disabling the token. I'll look into that one.\n\n> How will this interact and/or be used with jupyterhub?\n\nIt won't. The affected case should be the default behavior of the single-user notebook. JupyterHub uses its own mechanism for checking login via the Hub, and any other deployment using a non-default LoginHandler should also not be affected.\n Should we use a one-time token for launching a browser? It's passed to the browser in a URL given as a command line argument. Command line arguments are visible to other users while the process is around, at least on Linux. So another user could see the token and use it try to connect to the same server.\n\nI've just tested this on my system; I created a new user called `test`, logged in as that user and ran `firefox http://example.com/?foo=secret`. Switching back to my normal account, `ps -eaf | grep fire` immediately shows me the URL 'test' used.\n\nIt may be more difficult in other situations (e.g. if the browser is already running and the command opens a new tab and then exits), but we shouldn't rely on command line args staying secret. So I would have a single use token for launching a browser, and display a second token on screen for the user to copy into other browsers.\n Is the expectation for users that always use `--no-browser` that they'll now either disable token auth too or immediately use `jupyter notebook list` to get the token? (Checking if I'm missing something.)\n @takluyver good call, I'll look into a one-time token for the browser launch. I'm used to OS X where browser launch is always a transient command, but that's still observable.\n\n@parente the token is logged, so you will see:\n\n```\nThe Jupyter Notebook is running at: http://localhost:8888/?token=ce46813a9231f6f543e0ff23293643d1e4f207004d76a6de\n```\n\nimmediately, no need to run an extra command. Plus, it is only the first time you connect to a notebook on a given host:port with a given browser that this token is needed, as the first connect sets a cooke that will be used for all future instances.\n\nCloses #325\n :+1: \n This now allows entering the token in the password form, since that's easier to type into than a URL bar in many contexts.\n Appveyor tests failed because \"The input line is too long.\" :roll_eyes: \n > Appveyor tests failed because \"The input line is too long.\"\n\nThat does not seem to be due to this PR. it's a more general appveyor thing. \n Line too long might be fixed by #1842, which copies a patch from conda-smithy.\n One last thing, while I've been talking to @rgbkrk about alternate frontends, etc.: Since I'm already adding a token here, I added a check in the Authorization header for the same token (same as JupyterHub and Kernel Gateway), which may be an easier field for non-browser clients to use.\n Does that mean it will be possible for a client to use token-authenticated requests without having to handle cookies?\n > Does that mean it will be possible for a client to use token-authenticated requests without having to handle cookies?\n\nYes, precisely. It's the same header that JupyterHub and Kernel Gateway use:\n\n```\nAuthorization: token token-goes-here\n```\n I can also back out the Auth header and do that in another PR.\n Sounds good to me, I was just checking that I understood what you meant.\n (To clarify: doing it in this PR is what sounds good to me)\n Closes #325\n How does this interact with Jupyterhub? Do we need to arrange release schedules so that this doesn't break JH before a new version of that is released?\n Thanks @rgbkrk ! This is awesome:)\n @takluyver this shouldn't impact JupyterHub at all since JupyterHub defines its own authentication mechanism. The only case that should be affected is the defaults of the single-user notebook. \n Great. Anything more you want to do or check with this before we merge?\n > Anything more you want to do\n\nNope, I'd love to get this in and tested in the wild.\n :shipit:\n","This sounds like an environment issue. Have you tried running any other servers in your environment? For example, you can run `python -m SimpleHTTPServer 8888` to serve a directory with an `index.html` in it. If you're experiencing a similar issue with `localhost` not resolving, then I suggest doing a Google search for \"ubuntu localhost connection refused\".\n @gnestor I ran the command and got\n\n> ~/anaconda3/bin/python: No module named SimpleHTTPServer\n The Python 3 version of that command is:\n\n```\npython -m http.server 8888\n```\n Thanks @takluyver\n @takluyver  @gnestor \nRunning it runs: `Serving HTTP on 0.0.0.0 port 8888 ...`\nuntil I close it.\n\nI should update you that it is not working just in Opera. In Firefox and Chromium it works.\n\nWhen Opera is used the url being used is `http://openurl%28http//localhost:8888/tree,new-page)`. And when using `localhost:8888/tree)` I get the Connection error.\n > When Opera is used the url being used is http://openurl%28http//localhost:8888/tree,new-page)\n\nThat sounds like something is misconfigured in Opera.\n @takluyver I just found out that it happens because I had Turbo mode on.\n Aha. I think 'Turbo' mode in Opera uses a proxy server to prefetch pages. I'm surprised it doesn't know to skip that for localhost, but I guess it doesn't.\n I have the same issue both with and without opera turbo, with or without VPN. If anyone finds a workaround, I'd be happy to hear about it","Thanks @lgeiger. Since escape-carriage is such a tiny library, I suggest that you just copy and paste the function body vs. adding it as an NPM dependency. I created a [branch](https://github.com/gnestor/notebook/commit/d2a6221c2368e73da454cace4ccf8907807ba96f) and tested and it works fine. \n\n![image](https://cloud.githubusercontent.com/assets/512354/19404463/f502b3d0-9222-11e6-86c6-1a0ebab95d26.png)\n @gnestor Thanks for testing!\nWe can just use your branch if you like keep the dependency list small. \ud83d\udc4d \n Alrighty, I'll just submit a new PR \ud83d\udc4d\n","Are you aware of the Home > Running > Terminals tab? It lists all terminal instances. Are you proposing that terminal instances display _age_ like the notebook instances?\n\n![image](https://cloud.githubusercontent.com/assets/512354/19405151/53e0069a-9229-11e6-9759-6e00d22404c4.png)\n yes Gnestor - Are you proposing that terminal instances display age like the notebook instances? yes that would be good . what we are trying to achieve is 100s of ppl  open the terminal and not using it for days the linux server is getting killed with high cpu and mem. if we can list the open terminals in linux command line -we can notify folks to close it properly.\n @Carreau @minrk I took a look through https://github.com/jupyter/notebook/blob/179bb24fbf79d153812858126127a91431da3319/notebook/static/tree/js/terminallist.js and it looks like a `created` property is not available on terminal items returned from the server. I also looked through https://github.com/jupyter/jupyter_server/blob/dd4b052403cc0ce70dbde9bfc6c71d6b09e814ec/notebook/terminal/api_handlers.py and it looks like terminado doesn't provide anything like a `created` property. Do you have an idea about how we could provide this info for terminal instances?\n I'm not sure this information is present, but we can easily record a timestamp when a terminal is created. It might make more sense to follow #1827, though, and track activity on the websocket, so the stamp is last-activity, not created.\n @minrk Last activity is more similar to last modified (than created) which is what the \"Running\" tab in the dashboard exposes for notebooks. \n\nA couple questions regarding #1827: Does creating a terminal instance from the dashboard launch a kernel instance? If so, then would I just query the kernel model and use the `last_activity` value as the \"last modified\" value for a terminal instance?\n No, terminals do not use kernels.\n","Thanks! What's your Apache version? People seem to have had a similar issue [with nginx](http://stackoverflow.com/questions/37063442/websocket-connection-failed-one-or-more-reserved-bits-are-on-reserved1-0-re) and the answer was to make sure that the server was up-to-date. Perhaps there's something out-of-date in Apache?\n Hi Min, thanks, I came across that issue, but I wasn't sure if it was related. I'm running on RHEL7.2, and I'm using the system provided httpd(-2.4.6-40.el7.centos.4.x86_64)\n\n```\n$ yum info httpd\nLoaded plugins: product-id, rhnplugin, search-disabled-repos, subscription-\n              : manager\nThis system is receiving updates from RHN Classic or Red Hat Satellite.\nInstalled Packages\nName        : httpd\nArch        : x86_64\nVersion     : 2.4.6\nRelease     : 40.el7_2.4\nSize        : 3.7 M\nRepo        : installed\nFrom repo   : rhel-x86_64-server-7\nSummary     : Apache HTTP Server\nURL         : http://httpd.apache.org/\nLicense     : ASL 2.0\nDescription : The Apache HTTP Server is a powerful, efficient, and extensible\n            : web server.\n```\n\nI'm currently testing against  https://github.com/jupyterhub/jupyterhub/commit/f8229c9fb6ab5a5135f67ea253e6833cebd761f7 along with [notebook (4.2.2)](https://github.com/jupyter/notebook/releases/tag/4.2.2) I see slightly different behaviour if I test against https://github.com/jupyterhub/jupyterhub/commit/2985562c2f482ba783bc5f7c167a5d8030d9fdf8 and [notebook (4.2.3)](https://github.com/jupyter/notebook/releases/tag/4.2.3) but the global result is the same, Firefox and Safari seem to allow the restart, Chrome doesn't.\n\nI'll try to bring one system up the the latest versions of the hub and notebook and see if that makes a difference.\n\n**Edit**: I'm now on https://github.com/jupyterhub/jupyterhub/commit/a3eb2d2b9a5c34ff7e538a281d037951d8482bb7 and [notebook (4.2.3)](https://github.com/jupyter/notebook/releases/tag/4.2.3) and RedHat's most recent httpd but I still can't reconnect to a kernel in Chrome. If I jump back to Home in another tab I can see the notebook in the Running tab and if I click on it I can connect to it no problem. The problem seems to be restricted to reconnecting from inside the notebook.\n","Thanks ! Appveyor failure is unrelated. \nMerrging. \n Backported.\n",":+1: \n I really like this change. Can we also not change the page title anymore, now that we have this much less distracting indicator in a tab? This may be for a different PR, but if you could do it in this PR, that would be awesome.\n I'd also favour not changing the title - my tabs are often quite short, and \"(Busy)\" will take up ~all the visible space.\n @jasongrout @takluyver Updated this PR with your suggestion...\n I kicked Appveyor.\n Appveyor is having constant problems with Python 2 right now, failing with the error \"The input line is too long.\" I don't know what to do about that - I'm ignoring it for now...\n Nice!\n","XTerm now has a [publicly documented API](http://xtermjs.org/docs/api/Terminal/). So what are we using that's not in the documented API:\n- Constructor options, but I think this is an omission from the docs - the source code looks like constructor options are supported. I'll open an issue on xterm about it.\n- `screenKeys` and `useStyle` options - don't appear to be there in the code.\n- `brokenBold` - still in the code, looks like it's now autodetected, so we shouldn't need to set it.\n- The `title` event.\n > XTerm now has a publicly documented API. So what are we using that's not in the documented API:\n> \n> Constructor options, but I think this is an omission from the docs - the source code looks like constructor options are supported. I'll open an issue on xterm about it.\n> screenKeys and useStyle options - don't appear to be there in the code.\n> brokenBold - still in the code, looks like it's now autodetected, so we shouldn't need to set it.\n> The title event.\n\nIs that a request for a change ? The app-veyor breakage is unrelated. Can we merge ?\n Yes, it's a request to clean up the things that are probably no longer needed or have no effect: `screenKeys`, `useStyle` and `brokenBold`.\n\nI've opened an issue for the constructor options (sourcelair/xterm.js#313). The title event is still there in the xterm code, so let's leave that for now, and I'll open an issue about documenting it.\n Title event: sourcelair/xterm.js#315\n I'll patch these later in the day. Thanks for checking that, Thomas!\n\nOn Tue, Oct 18, 2016 at 4:04 AM, Thomas Kluyver notifications@github.com\nwrote:\n\n> Title event: sourcelair/xterm.js#315\n> https://github.com/sourcelair/xterm.js/issues/315\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/pull/1838#issuecomment-254475688,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AAB23sK2reflhuvImCTUbftIdBLX1o_gks5q1KfDgaJpZM4KXx48\n> .\n\n## \n\nYuvi Panda T\nhttp://yuvi.in/blog\n I love that the docs show how to connect it up with terminado.\n Yup, that landed yesterday :-) xtermjs/xtermjs.org#4\n Ping @yuvipanda :-)\n Caught up with a bunch of other stuff. Tomorrow :)\n\nOn Tue, Oct 25, 2016 at 3:34 AM, Thomas Kluyver notifications@github.com\nwrote:\n\n> Ping @yuvipanda https://github.com/yuvipanda :-)\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/pull/1838#issuecomment-255999190,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AAB23nJmGBCN8uS2eXkVVer4RnhrTw19ks5q3dtRgaJpZM4KXx48\n> .\n\n## \n\nYuvi Panda T\nhttp://yuvi.in/blog\n @takluyver I bumped xterm verion and also removed the deprecated constructor params. I'll also send a PR to xterm.js about the title event now.\n Should we consider switching to using https://github.com/sourcelair/xterm.js/blob/b1c6ae8a06ecef68a86a648beaaccf65fee056d8/addons/terminado/terminado.js directly?\n I can't seem to find where to send doc PRs to xterm.js\n https://github.com/xtermjs/docs.xtermjs.org ?\n This looks good to me, thanks :)\n https://github.com/sourcelair/xterm.js/pull/351 for docs in xterm.js\n Nice one :-)\n","I tried both our sample code and the following:\n\n``` python\nstr = ''\nfor _ in range(200000):\n    print(str + 'a')\n```\n\nIt evaluated surprisingly fast for me (~1.5s). If you're still having an issue with this, please provide more info like the version of notebook (`pip show notebook`), version of Python, OS, etc.\n Hi,\n\nSorry for my late answer . Here are the info :\n\n```\nMetadata-Version: 2.0\nName: notebook\nVersion: 4.2.3\nSummary: A web-based notebook environment for interactive computing\nHome-page: http://jupyter.org\nAuthor: Jupyter Development Team\nAuthor-email: jupyter@googlegroups.com\nInstaller: pip\nLicense: BSD\nLocation: c:\\users\\romain.julien\\dev\\python\\lib\\site-packages\nRequires: tornado, ipython-genutils, nbformat, jupyter-core, jupyter-client, ipykernel, traitlets, jinja2, nbconvert\nClassifiers:\n  Intended Audience :: Developers\n  Intended Audience :: System Administrators\n  Intended Audience :: Science/Research\n  License :: OSI Approved :: BSD License\n  Programming Language :: Python\n  Programming Language :: Python :: 2.7\n  Programming Language :: Python :: 3\nEntry-points:\n  [console_scripts]\n  jupyter-nbextension = notebook.nbextensions:main\n  jupyter-notebook = notebook.notebookapp:main\n  jupyter-serverextension = notebook.serverextensions:main\nYou are using pip version 8.1.2, however version 9.0.1 is available.\nYou should consider upgrading via the 'python -m pip install --upgrade pip' command\n```\n\nBut I just have updated pip and Jupyter to their newest version (9.0.1 & 4.2.0) and I do not have this problem anymore\n\nRomain\n","> I'm using Jupyter 3.0.0-f75fda4\n\nUpgrade to 3.2 which is an important security fix.\n\nAnd yes we know that a better dashbord with filtering, ordering would be nice.  We just need  someone to write it. \n Can I also add a feature request to be able to sort folder contents in reverse order. I name all my notebooks starting with a datestamp (e.g., 20151202_some_work.ipynb) and it would be most useful to have these sorted in reverse order because I usually reopen the most recent notebooks (e.g., to continue working on them). Currently I have to scroll all the way to the bottom to find my most recent notebooks.\n Similar https://github.com/jupyter/notebook/issues/1267\n sorting by modification date will be highly appreciated\n This was implemented 1/16/16 by https://github.com/jupyter/notebook/pull/943 but it's marked for a 5.0 release, which may not happen for a few months. If you install notebook from master by following [these directions](https://github.com/jupyter/notebook/blob/master/CONTRIBUTING.rst#setting-up-a-development-environment), you can take advantage of the feature now.\n Closing as this got implemented in #943. This feature is not active in master? I see it in master:\r\n\r\n![screencap](http://g.recordit.co/uZaOqraygZ.gif) so sorry. had a clashing conda package that sneaked in and overruled the GH install. > so sorry. had a clashing conda package that sneaked in and overruled the GH install.\r\n\r\nSee https://github.com/fperez/conda-edev , relatively recent. Should avoid these kind of issues by providing pip-install as a conda \"overlay\". ","It has a `--prefix` argument - does that work for you?\n There are two (possibly three) problems with the `--prefix` argument.\n\nFirst, it overrides the default installation directory structure.  The\n`--root` argument doesn't, it keeps the exact same directory structure.\nThis allows you to just pick up the entire root from your build directory\nand put in the the real root later when doing a package installation and\neverything will be like the `--root` argument wasn't used at all.\n\nSecond, the `--prefix` argument doesn't affect the settings directory (as\nfar as I can tell looking at the source).  The `--root` argument controls\nevery directory, they are all placed relative to `--root`.  Again, this\nlets you transparently move everything at once to its final location.\n\nAnother difference, which may or may not be an issue with any nbextensions\nbut often is with other installations, is that the change of root is\ninvisible to whatever is installed.  So if what is installed keeps track of\nwhere it is installed, it won't see the `--root` directory, it will think\nit is still being installed relative to the normal root.  This makes sure\nthat the applications are portable when the root is changed during package\ninstallation later.\n @toddrme2178 If `--prefix` doesn't satisfy your use case and if you think that others may benefit a `--root` flag for `jupyter nbextension`, we invite you to submit a PR!\n","Are there any error messages in the terminal where you started the notebook?\n @takluyver \nHere are part of messages in the terminal:\n\n```\n[E 20:26:09.871 NotebookApp] Exception restarting kernel\n    Traceback (most recent call last):\n      File \"/Users/xuliucheng/anaconda/lib/python3.5/site-packages/notebook/services/kernels/handlers.py\", line 88, in post\n        yield gen.maybe_future(km.restart_kernel(kernel_id))\n      File \"/Users/xuliucheng/anaconda/lib/python3.5/site-packages/notebook/services/kernels/kernelmanager.py\", line 109, in restart_kernel\n        self._check_kernel_id(kernel_id)\n      File \"/Users/xuliucheng/anaconda/lib/python3.5/site-packages/notebook/services/kernels/kernelmanager.py\", line 169, in _check_kernel_id\n        raise web.HTTPError(404, u'Kernel does not exist: %s' % kernel_id)\n    tornado.web.HTTPError: HTTP 404: Not Found (Kernel does not exist: e0a94bef-0287-4f37-8249-c82250c96200)\n[E 20:26:09.873 NotebookApp] {\n      \"Host\": \"localhost:8888\",\n      \"Accept-Language\": \"zh-CN,zh;q=0.8,en;q=0.6\",\n      \"Accept\": \"application/json, text/javascript, */*; q=0.01\",\n      \"Referer\": \"http://localhost:8888/notebooks/Downloads/TestingRpy2.ipynb\",\n      \"Origin\": \"http://localhost:8888\",\n      \"Content-Length\": \"0\",\n      \"Accept-Encoding\": \"gzip, deflate\",\n      \"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36\",\n      \"X-Requested-With\": \"XMLHttpRequest\",\n      \"Connection\": \"keep-alive\"\n    }\n[E 20:26:09.873 NotebookApp] 500 POST /api/kernels/e0a94bef-0287-4f37-8249-c82250c96200/restart (::1) 2.51ms referer=http://localhost:8888/notebooks/Downloads/TestingRpy2.ipynb\n```\n\n [Here](https://github.com/michhar/rpy2_sample_notebooks/blob/master/TestingRpy2.ipynb) is the ipython file.\n\nI run the cells again and it didn't lead to the lead kernel this time, but notebook does not work as expected at the sametime. The output of whole cells is nothing.\n Hmm, nothing about that really says what's going on. The only thing I can suggest is that you try uninstalling rpy2 and installing it again.\n I reinstalled rpy2. Unfortnately, the problem is still there.\n\nCould the following messges imply anything? @takluyver \n\n```\n$ jupyter notebook\n[W 21:22:34.621 NotebookApp] Unrecognized JSON config file version, assuming version 1\n[W 21:22:34.626 NotebookApp] Collisions detected in jupyter_notebook_config.py and jupyter_notebook_config.json config files. jupyter_notebook_config.json has higher priority: {\n      \"NotebookApp\": {\n        \"nbserver_extensions\": \"{'nb_anacondacloud': True, 'nbpresent': True, 'nb_conda': True} ignored, using {'jupyter_nbextensions_configurator': True}\"\n      }\n    }\n[I 21:22:35.749 NotebookApp] [nb_conda_kernels] enabled, 4 kernels found\n[I 21:22:35.879 NotebookApp] Loaded extension jupyter_nbextensions_configurator\n[I 21:22:35.906 NotebookApp] Serving notebooks from local directory: /Users/xuliucheng\n[I 21:22:35.906 NotebookApp] 0 active kernels\n[I 21:22:35.906 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/\n[I 21:22:35.906 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[I 21:22:49.778 NotebookApp] Kernel started: 6d29fcd4-4b23-4071-aa83-7f65f983aa05\n[W 21:22:49.815 NotebookApp] 404 GET /kernelspecs/Python%20[tensorflow]/logo-64x64.png (::1) 27.61ms referer=http://localhost:8888/notebooks/pelican-blog/content/Untitled2.ipynb\n[W 21:22:50.142 NotebookApp] 404 GET /notebooks/pelican-blog/content/biblio.bib (::1): No such file or directory: pelican-blog/content/biblio.bib\n[W 21:22:50.144 NotebookApp] 404 GET /notebooks/pelican-blog/content/biblio.bib (::1) 3.28ms referer=http://localhost:8888/notebooks/pelican-blog/content/Untitled2.ipynb\n[I 21:22:58.779 NotebookApp] KernelRestarter: restarting kernel (1/5)\nWARNING:root:kernel 6d29fcd4-4b23-4071-aa83-7f65f983aa05 restarted\n[W 21:23:03.572 NotebookApp] 404 GET /api/kernels/1d66ab3a-f88f-47dd-8187-0a5b824c3c71/channels?session_id=A18AE3B994A6497CA99EF6A6C70F348B (::1): Kernel does not exist: 1d66ab3a-f88f-47dd-8187-0a5b824c3c71\n[W 21:23:03.574 NotebookApp] 404 GET /api/kernels/1d66ab3a-f88f-47dd-8187-0a5b824c3c71/channels?session_id=A18AE3B994A6497CA99EF6A6C70F348B (::1) 6.49ms referer=None\n[I 21:23:04.790 NotebookApp] KernelRestarter: restarting kernel (1/5)\nWARNING:root:kernel 6d29fcd4-4b23-4071-aa83-7f65f983aa05 restarted\n[I 21:23:16.801 NotebookApp] KernelRestarter: restarting kernel (1/5)\nWARNING:root:kernel 6d29fcd4-4b23-4071-aa83-7f65f983aa05 restarted\n```\n Sorry, that doesn't really contain any hints either.\n @Carreau I know you did [some very interesting cross-language experiments](http://carreau.github.io/posts/23-Cross-Language-Integration.html). Have you used [rpy2.ipython](http://rpy.sourceforge.net/rpy2/doc-2.4/html/interactive.html#module-rpy2.ipython.rmagic) before? Any suggestions?\n Hum, this is likely a dynamic library issue. I would try running %load_ext rpy2.ipython in pure IPython terminal to get a better error message. I had to change my dynamic library LDPATH on my computer but I never had a segfault. \n Hi--I don't know if I had the same problem as ghost, but it had the same symptoms: kernel of my Jupyter Notebook reproducibly died when I tried to execute %load_ext rpy2.ipython.  I tried Carreau's suggestion of running the command in the pure IPython terminal, and found I got no error message at all--worked flawlessly.  After a bit more digging, I determined the issue was apparently due to interaction with miniconda environments: in the error condition, I had started the Jupyter Notebook server in the root conda environment, then used the new Jupyter Notebook kernel selection functionality to choose the python install in the conda environment for my particular project.  When run that way, the kernel died every time when I tried to load the rpy2.ipython extension.  However, when I sourced the miniconda environment for my project in a terminal window and worked from within the environment (either directly in the IPython terminal, or by starting the Jupyter Notebook server from within that environment), the  %load_ext rpy2.ipython command worked just fine. Yeah, don't use the conda nbkernel extension it sets up environment only for the running Python kernel, so some things wont work. You'll have to install the kernel spec from within the environment.","Thanks!\n\nIt looks like we can get rid of this again once there's a new release of Miniconda. I've subscribed to [this issue](https://github.com/ContinuumIO/anaconda-issues/issues/1161) to know about it.\n","Not sure if this is any help for you, but try (on the host machine):\ndocker ps\n\nAnd inspect the \"ports\" column. It should say \"0.0.0.0:8888->8888/tcp\". If not, Docker is not forwarding the ports correctly, likely due to the way that you started the container. Using -p 8888:8888 as a parameter when running the container could fix it.\n","Right, this is a known bug (rkern/line_profiler#61) with an open PR ((rkern/line_profiler#65). Sorry to have wasted your time \n","Which kernel?\n\nIf you're wanting something persistent, I highly recommend using [Sage Math Cloud](https://cloud.sagemath.com/).\n Sorry for leaving that out, Python2 and Python3 kernels. Each crashed on me multiple times.\n\nI'm not looking for anything to persist longer than a couple hours.\n I can verify that the Python 3 kernel is dying after a couple minutes:\n\n![image](https://cloud.githubusercontent.com/assets/512354/19630511/d4b3bd0c-9940-11e6-8db2-38214a37730f.png)\n\nIf I try to restart or reconnect:\n\n![image](https://cloud.githubusercontent.com/assets/512354/19630516/fa367ea2-9940-11e6-8de2-f47e302155fd.png)\n Tried again today and it's failing on load:\n\n![image](https://cloud.githubusercontent.com/assets/512354/19667172/2d70955a-9a04-11e6-89b3-818ec0d438f9.png)\n Any progress on this since October?   It's hard to \"Try Jupyter\"  if keeps dying every 2 to 5 minutes, like my experiences so far with tryjupyter.org.   Have used multiple browsers, on Mac & Windows.\r\n There's no secret. Possibly it's just overloaded?","Thanks! I've got some refinements to the rate measuring and messages I came up with while testing. I'll open another PR with those when I get a chance.\n I'm going to comment here, since I don't know where to comment.  I just spent a while trying to use the rate limiting command line options for jupyter, and  it doesn't seem to solve the real problem.   I can't think of any useful way to even use it, which is a bummer, since I desperately need something like this (as students are constantly causing trouble, which leads to disaster).  \n\nThe basic test problem is this:\n1. Drawing a plot should work.\n2. Doing something dumb like this should be severely limited: `for i in range(50000): print('hi')`.\n\nThe currently-implemented functionality treats the output of 1 and 2 exactly the same.  Both result in a single message.  However, rendering and dealing with a 0.3MB plot (say), is completely different than dealing with a single output message that is 0.3MB of strings of text, which is very hard on the browser to render...  Ignoring this difference is not good.\n\nIn SageMathCloud, images are just sha1 hashes that reference a remote image store.  So rate limiting based on data transmitted works fine. \n I'm going to run with rate limitations (as you implemented them) in production for a week on SMC and see what happens with user feedback.  Maybe this does work fine.  I could be completely wrong above. Data will tell.\n @williamstein This is a very common problem for beginner Jupyter users. I think that rate limits should be imposed by default with available config flags to override them. Let us know how it goes and how this can be improved. \n Having deployed the current released rate limiting code in practice for a week, there is one surprise way in which Jupyter's approach is far inferior to what we do with SageMathCloud worksheets.    In SMC, when you hit the rate limits, the error message says, basically \"type the following (right here in this worksheet!) to increase the limit\".  That works fine, and we've never had a complaint.  However, asking the users to restart the backend jupyter server with different parameters is disruptive and isn't even possible in some environments (e.g., SMC). \n @williamstein Do you suggest that we handle limits the same that SMC does? \n @gnestor -- YES.  If you can, please make it so users can increase the rate limit from some default by explicitly running code in their notebook.    As it is now, we are getting a continuous stream of support requests due to people hitting even rather large rate limits.  E.g., here's one from 30 minutes ago: \"Hi, i am suddenly having trouble displaying a web map. Previously (3-4 weeks ago) it took a while to draw the map however it would display after a minute or two. Now i get an error when the \"display(m)\" function in cell 5 executes via the button press in cell 6. The error is as follows:  \"iopub data rate exceeded. The notebook server will temporarily stop sending iopub  messages to the client in order to avoid crashing it.  To change this limit, set the config variable  `--NotebookApp.iopub_data_rate_limit`.\"  \n\nThe error message provides no real help to my users.  They don't explicitly start Jupyter notebook servers -- they use Jupyter notebooks.  Instead, the error should be: \"iopub data rate exceeded. The notebook server will temporarily stop sending iopub  messages to the client in order to avoid crashing it.  To change this limit, ... run this code ...; for more help and options related to iopub rate limitation, type ... (or visit http://...)\"  \n\nAlso, this acknowledges that for _certain_ use cases having a high rate makes perfect sense!  E.g., there is a big difference between animations or interactive plotly usage... and just playing around learning the basics of Python.  Make it so the notebook creator can target these difference cases from the notebook itself, not from the server on the backend.  That's how SageMathCloud works.\n Let's see if we can make an APi on the server that can allow us to change the limiting rate. \n\nAs the rate limiting is on the server, it might not be super easy to have something from the kernel that change the rate limit, but we might have a toggle in the UI. \n > As the rate limiting is on the server, it might not be super easy to have something from the kernel that change the rate limit, but we might have a toggle in the UI.\n\nPresumably there is some way to send commands via code that goes directly to the server and not the kernel?  E.g., maybe\n\n```\n%%server blah\n```\n\nThe communications channel exists to do this, since the client UI uses it...\n\nJust something in the UI would only solve half the problem.  It definitely does not solve the entire problem, which is that some notebooks specific need different rate limitations than others, and this should be something one can set in the notebook itself.\n > Presumably there is some way to send commands via code that goes directly to the server and not the kernel? E.g., maybe\n\nYes and no. \n\nNo: The server act strictly as a proxy, it does not peek at the messages. \nYes: %blah could return a javascript object that would trigger some API call to the frontend.\nYes: You could inject a magic which is aware of the server and can communicate to it via another method.\n\nBut in the general case the kernel is in the dark as to whether the server is running it, or not. It could even be connected to 2 \"clients\" one that would be rate limited and not the other and would still be unaware of this fact.\n","@rgbkrk any ideas?\n What OS, browser, and OpenSSL version are you using @w3rs?\n It looks like I forgot to specify **https://** in my browser. When it's in URL, I can actually connect (with warning about non-private connection).\n","I think it's more widespread than websocket. It's even \"some browser refuse tls on non 443 and 8443. I have submitted a patch on PyPI (https://github.com/pypa/pypi-legacy/pull/536) which allow to set the port just for this reason.\n Odd. I'm only having problems with websockets. All regular ol' HTTP 1 over TLS is working just fine.\n I'm on Chrome dev. \n Or at least Beta (54.0.2840.59 beta )\n This seems related to the Safari won't connect websockets with self-signed certs issue, in that browsers don't seem to reliably use the same configuration for websockets as regular connections. Sad!\n\nThere's probably nothing for us to do other than keep this here as a known issue and report upstream to chromium.\n ~~Looks like I was wrong about Safari being able to connect. I can't connect with Safari either.~~\n ~~Uh oh, Firefox isn't working either now. Additionally, El Capitan no longer works (with security updates yet not using Sierra).~~\n\nHow does one even file a bug with Apple?\n Filed an issue with Apple.\n Update: Firefox and Safari seem fine again. Nevermind me there.\n <img width=\"586\" alt=\"screen shot 2016-10-28 at 4 54 57 pm\" src=\"https://cloud.githubusercontent.com/assets/836375/19825545/6b9cb150-9d2f-11e6-86be-1adfb8ccee3a.png\">\n\nThis definitely doesn't seem like a self signed certs issue!\n\nTry doing:\n\n```\n$ openssl s_client -showcerts -connect apple.com:443\nCONNECTED(00000003)\n59594:error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure:/BuildRoot/Library/Caches/com.apple.xbs/Sources/OpenSSL098/OpenSSL098-59.60.1/src/ssl/s23_clnt.c:593:\n```\n","Thanks for the contribution! I don't think this will work, though - Jupyter doesn't have 'profile' directories, just a config directory.\n I've made an updated version of this in #241 which sets `config_dir` instead of `profile_dir`.\n","They will probably be the same. Conda is making kernels corresponding to conda environments on your computer; if you haven't created any manually, then the only environment will be the 'root environment' that Anaconda sets up by default.\n Yep, there are also other possibilities when you start the notebook server from one environment to run kernels in other environments... in that case, if you are not starting the notebook server in the root environment, the conda root and the python default kernels will point to different python executables... BUT this is not the most common case (I think) and most of the cases, as Thomas said, both will be pointing to the very same python executable.\n what can we do to display or view their difference? or can we find where the different kernels points to? @damianavila  >what can we do to display or view their difference? or can we find where the different kernels points to?\r\n\r\nA simple `import sys; sys.executable` will tell you what python executable are you pointing at with the current kernel.\r\n\r\n Thank you very much. After I run your support codes, the `sys.executable` are really the same.\r\nNow, I have another question that why my jupyter notebook has 0 active kernel?  In the process of starting, the output information show 2 kernels found, but 0 active. I am new to jupyter notebook, how can I fix the problem?\r\n\r\nby the way, how to list the installed packages for a specific environment?\r\nI run the command `conda-env list`, the output info are as follows:\r\n\r\n```\r\n# conda environments:\r\n#\r\nroot                  *  C:\\Program Files (x86)\\Anaconda2\r\n```\r\n\r\nwhy there is a blank line starting with the symbol \"#\"? @damianavila  Thank you very much! Now, I have a problem that when I open a jupyter Notebook, there is a hint message:\r\n\r\n> I couldn't find a kernel matching Python [Root]. Please select a kernel:\r\n\r\nhow should I set a default kernel for all the jupyter notebook? @damianavila  >Now, I have another question that why my jupyter notebook has 0 active kernel? In the process of starting, the output information show 2 kernels found, but 0 active. I am new to jupyter notebook, how can I fix the problem?\r\n\r\nWhat do you mean with 0 active kernels? Having kernels \"enabled\" means you have them available to run when you start a notebook with a specific one. I don't see a problem to fix...\r\n\r\n>by the way, how to list the installed packages for a specific environment?\r\n\r\n`conda list -n your_env` should list the packages in `your_env`.\r\n\r\n> why there is a blank line starting with the symbol \"#\"?\r\n\r\nNo problem with that... just formatting.\r\n\r\n> Now, I have a problem that when I open a jupyter Notebook, there is a hint message:\r\n\r\nYou probably create that notebook with an old version of `nb_conda_kernels`... next time you open it, it should be OK... and any new notebook should work OK.","@takluyver I've enabled \"Allow edits from maintainers\" so feel free to revise.\n There are also some bits earlier in the file that refer to the signature being stored in notebook metadata.\n myeh, I couldn't get the 'allow edits from maintainers' thing to work, so I've sent you gnestor/notebook#3 with some more changes.\n Looks good to me. Merge at will \ud83d\udc4d\n","Thanks for raising this up, we should definitely support RTL more easily.\n We should look into that directly for Jupyterlab. cc @ellisonbg @jasongrout \n Thanks for your prompt reply, I'm from Arabic Competence and Globalization Center Team at IBM Egypt. Our team is supposed to support Bidi - Features like \"GUI Mirroring \" as described above . \n\nThis Ticket is to describe the design approach ,So we need an approval before proceeding to the development phase.\n\nThanks !\n I've opened up https://github.com/jupyterlab/jupyterlab/issues/1163 in JupyterLab (the next generation notebook) to point to this issue.\n @samarsultan approval from us or at IBM?\n @rgbkrk , from your side .\n Your approach looks good. We won't be able to judge it much until there's a pull request. I think you should for it and find out how feasible it is in the current notebook.\n Thanks @samarsultan a lot for submitting #1860, we'll be happy to move forward on it. \n\nBefore you spend too much time on it we want to warn you that nowadays most of the effort is on [jupyterlab](https://github.com/jupyterlab/jupyterlab) which should replace the current notebook at some point in time. Handwaving we would _like_ jupyterlab to be the default UI in a year or so, and progressively transition to the current notebook being an extension that we will slowly sunset.\n\nDepending on your timescale and your short/long term plans, you might want to also have a look at the current state of JupyterLab. If you have any question we would be happy to clarify that, whether in public discussion (we need to do a better job at this), or even in a private conversation if you need to ask about specific things.\n @Carreau ,Ok .. I need to know how bidi-work will be migrated to Jupyterlab if the mirroing support will be for the Notebook . Are you going to change the core libraries ? And Would you mind to recommend whether to continue for the Notebook or Jupyterlab  as long as the current Notebook will no longer be existed !\n The bidi work would likely need to be redone in JupyterLab - the css and styling are completely different.\n\nAs for working on the notebook vs lab - that depends on how much effort it is likely to take and your timeframe for needing this. If it's not a lot of effort, it'd be great to have it in both the notebook and lab. If you need it right away, the notebook is definitely the more stable/polished project. However, if it's a lot of effort, and you don't need it right away, I'd suggest working on Lab.\n @jasongrout @Carreau @rgbkrk . My name is Tomer. I am development manager of IBM team called Bidi Development Lab. We are working together with @samarsultan team on addressing various RTL languages requirements. Can you please share which component is used as rich text editor in JupyterLab ? In JupyterNotebook CodeMirror editor (https://codemirror.net/) is used. My team is working on contribution of missing support for RTL languages to this editor. In case JupyterLab is going to be based on some other editor I would be very much interested to know which one. This way we can assess and contribute missing functionality into the right component. Many thanks for your help and guidance. \n Hi @tomerm, \n\nCurrently most of JupyterLab is [based on CodeMirror](https://github.com/jupyterlab/jupyterlab/blob/master/src/notebook/codemirror/cells/widget.ts), though there is nothing preventing multiple panel to use different editors. [The following issue](https://github.com/jupyterlab/jupyterlab/issues/875) track the progress for making editor an abstract component and having the ability to replace CodeMirror if desired ([Monaco](https://github.com/Microsoft/monaco-editor) for example, was mentioned). A lot of in person discussion have been done yesterday as most of the team is currently in San Luis Obispo for a bi-yearly meeting, so I would expect some update soon.\n\nDoes that help ?\n @Carreau thanks a lot for your quick reply and information sharing. This helps a lot. Future version of Jupyter (now called JupyterLab) was known for quite a while but there was  never clear understanding about time line (even on a very high level it was not clear if new product will be released one year from now or 5 years from now etc..). That is why efforts are currently invested in technology which is de-facto used by customers (Jupyter Notebook - CodeMirror). But we should always carefully review the roadmap and technological dependencies to make right choices down this path. \n Thanks @tomerm, \n\nThe exact timeline is still hard to project for now, but we are starting to be able to give a rough timeline. \nNo promise yet, but it should something along:\n- if you are planning to deploy jupyterlab and have custom extensions or want to make relatively involved proposal in the design/api ; Nowish is the right time. \n- It is not ready for production and day-to-day use. If you want to you _can_, there is still some rough edges for a few workflow.\n- If you can use it a couple of hours each week to see progress and report back on what is annoying that would be great. (We ourself become blind to some usability as we might work too close to the code)\n- A beta / version 0.9 should be release late 2016, early 2017. \n- We want a stable 1.0 by mid 2017\n- Start to sunset the current notebook shortly after if the transition goes well. \n\nAll of the above schedule depends (among other things) about community involvement and time the can  be injected into jupyterlab.\n\n@ellisonbg and @jasongrout might have a more detail schedule or correct me. \n","Hi there, \n\nThanks for the suggestion, pep 8 also says:\n\n> A Foolish Consistency is the Hobgoblin of Little Minds\n> One of Guido's key insights is that code is read much more often than it is written. The guidelines provided here are intended to improve the readability of code and make it consistent across the wide spectrum of Python code. As PEP 20 says, \"Readability counts\".\n\nSo pep8 is mostly a guideline, and is often recommended to be applied in spirit, see for example [this talk](https://www.youtube.com/watch?v=wf-BqAjZb8M) from Raymond Hettinger one of core Python developer. \n\nAlso the notebook is not only for Python so we can't (and won't) enforce python-only rules. \nSome extensions allow you to show a ruler to help you organize your code. \n\nWe can try to keep that as a suggestion though and might refine the snapping on future revisions.\n\nThanks. \n","\ud83d\udc4d! Do you think the existing tests provide sufficient Windows coverage, since we have Appveyor now? Or are there some manual tests we should have a go at?\n I've pinged Oscar on the mailing list to try it - I think the existing tests can give us reasonable confidence that I haven't broken it, but I'm not sure if it will actually make a difference to the performance.\n\nIn my brief tests on Linux, listing a large-ish directory seemed to be maybe 10% faster, but it was already in the 50ms range, so it's not a big win.\n I'm currently polling the notebook contents API so even a little improvement is helpful.\n Cf. https://groups.google.com/forum/#!topic/jupyter/SRVKUyJYPtM\n\n@takluyver Thanks for investigating\n To summarise those results here, it was taking 14-24 seconds without this pull request, and seemed to take about 9s with this PR. I was hoping for a bit more of a speedup, but it's still a definite improvement - and we don't seem to have broken anything.\n > To summarise those results here, it was taking 14-24 seconds without this pull request, and seemed to take about 9s with this PR. I was hoping for a bit more of a speedup, but it's still a definite improvement - and we don't seem to have broken anything.\n\nThanks !\n\nI guess to speedup more we would need to actually profile see where the bottleneck is.\n\nMerging.\n","Hi, I made the effort to run this PR of the notebook inside an SMC project. The errors I was talking about previously do indeed disappear with this fix!\n @haraldschilly thanks!\n Thanks !\n","Seemingly not. Maybe the `-latest-` version hadn't been changed when that ran.\n Bump to 5.1 I don't really know what to do about this one. It's supposed to be fixed in conda, but every time I've tried re-running it on Appveyor, it fails again. Let's give it another try... conda-forge recipes explicitly upgrade conda: https://github.com/conda-forge/jupyterlab-feedstock/blob/799b17e8271081316117a523086bfcfe0504218e/appveyor.yml#L63, could that be it? Interesting. I don't think that's it, because it happens after activating the environment, which is the step that fails for us. But it reminds me that Appveyor already has Miniconda installed, so I'll make another PR which tries using that rather than downloading a copy. Closing as #2109 has landed, and that seems like a neater way of doing things.","I'm not quite sure what this means - is it related to tmpnb or jupyterhub, perhaps?\n Thanks! we have our own docker spawner which is hard to integrate with tmpnb. So I run notebook directly and need a /health_check.\n I'm still not sure what you're after. What information would be in the response of `/health_check`? What are you trying to load balance? Sorry if this is obvious relative to tmpnb or something - I don't know much about that part of the project.\n Are you interest in a /health_check REST endpoint that a load balancer can hit to get the status of the notebook server?","Thanks !\n","@blink1073 do you have time to make a pull request for this?\n Yep, #1895.\n","It's the dollar sign.  You can use the \"\uff04\" sign instead or try this:\n\n``````\n1. This code is in a enumerated list so the block needs to be indented:\n\n   ```bash\n   laptop ~```$``` ssh-agent bash\n   laptop ~```$``` ssh-add\n   ``` # This comment required to prevent github from treating this as the closing fence.\n\n2. If the previous block is not indented, this will restart as number 1.\n``````\n Thanks for the \uff04 substitute. Works for now =)\n","Cool, how do I enable this? Do I switch my language to Arabic on my OS?\n No, just from the browser settings.\n Great ! Thanks a lot @samarsultan to work on that !\n\nI guess for test purpose, we can add a notebook command to force-switch rtl. \nAlso I'm pretty sure you tried, but are all the `!important` necessary ?\n\nI'm happy to merge that early and iterate. \n I'm cool bringing it in and iterating as well, we look forward to you iterating on it @samarsultan. :smile:\n @Carreau ,thanks for your add-on . You are right , we may not need all the important except for 1 or 2 places. I'll re-push them . \n @rgbkrk , do you mean by iterating on it to be fully supported ? If so , I just needed to gurantee that our approach is going to be suitable to submit the full patch. \n I think that by \"iterating\" we mean:\n\nFeel free to submit partial patches, small patches are easier to review quickly and merge.\n\nThe time to review and land some changes increase with the size of the patch. \n\nIt's even ok to get something in master have it available for a week or so and decide that it was not actually the right thing to do.\n\nDoes that make some sens ?\n\nThanks !\n By iterating, I mean that we should merge this and not expect perfection right away. We should make forward progress with you and continue patching to get closer to the ideal. I'm not a domain expert on this, so I want you to have plenty of freedom to support rtl for users. :smile:\n With regard to this PR , I'm going to continue supporting the UI Mirroring alongside with the new requested features #2154 & #2156  ,if you are OK with them.\r\n\r\nI need to ensure which branch to work against. Do I need to create a new branch to push my changes in (for ex. \"bidi\" branch)?\r\n\r\nThanks ! > With regard to this PR , I'm going to continue supporting the UI Mirroring alongside with the new requested features #2154 & #2156 ,if you are OK with them.\r\n\r\nOf course, we welcome your input and contribution on this !\r\n\r\n> I need to ensure which branch to work against. Do I need to create a new branch to push my changes in (for ex. \"bidi\" branch)?\r\n\r\nYou likely want to always submit your work against master (that's the default GitHub configuration so that should be easy), but the exact branch you push your work to, does not really matter. You should anyway be able to push only on your fork. The only limiting factor is you need at least one branch per opened Pull Request. So if you are sure to always have only one PR \"in flight\" then you can always use the same \"bidi\" branch. Otherwise you can push things with different name like `bidi-fix-calendar`, and `bidi-fix-numeral` for example, that what I would do.\r\n\r\nAlso, just as a tip, we tend to not check messages on close issues/merged PR, so if we don't respond feel free to open a new issue.  If you have any other questions about git feel free to ask. \r\n Thanks @Carreau , I 'll open a new Issue with the proposed design for the Bidi work.","@minrk @takluyver There were discussions a few weeks ago about custom MIME types that resulted in this doc https://jupyter.readthedocs.io/en/latest/reference/mimetype.html We should make sure that we are not propagating more than one type for the same notebook. I'm assuming this PR only covers notebook downloads.\n\nRef: https://github.com/jupyter/jupyter/pull/209, https://github.com/jupyter/jupyter_client/issues/207\n cc @rgbkrk . if we use jupyter, should register vnd.jupyter ? \n This was chosen as the mimetype for notebooks at [a dev meeting](https://ipython.hackpad.com/2014-IPython-Weekly-Development-Meetings-part-2-bxJTQTtMzh0#:h=August-14) [some years ago](https://github.com/jupyter/jupyter/issues/68#issuecomment-207520317), though admittedly almost nothing has used or documented it until now. I wasn't planning on starting a new discussion about changing the mimetype for notebooks, but we can have that discussion again if people prefer.\n\n@willingc so far, we don't have a place for the mimetypes of notebooks themselves, just the outputs/interactive pieces used in output areas, etc. We should add this one to that page, though.\n @minrk I'm totally cool with other folks decide. Merely raising the question to avoid confusion now or down the road ;-) Agree we should add this one to the doc page.\n `x-` or `vnd` are fine - they're both valid for these \"custom\" (non-IANA declared). I primarily care about ensuring consistency and documented specs. :smile:\n\n`application/x-ipynb+json` was declared sometime ago, we can keep on with it.\n","I'm confused . It runs on me?\n\nOn Oct 31, 2016 10:01 AM, \"Kyle Kelley\" notifications@github.com wrote:\n\n> It currently runs on @Carreau https://github.com/Carreau and I'm unable\n> to retrigger the builds.\n> \n> Side note: I paid for extra workers on the nteract account, which didn't\n> seem too bad compared to the pain and time it saves per day. \ud83d\ude04\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1862, or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AAUez0iuZaeyJAqzBz07_cJZSBrkbtijks5q5h7ngaJpZM4KlQGf\n> .\n https://ci.appveyor.com/project/Carreau/notebook/build/1.0.92\n\nThe project namespace on appveyor is under Carreau.\n > https://ci.appveyor.com/project/Carreau/notebook/build/1.0.92\n> \n> The project namespace on appveyor is under Carreau.\n\nI have no clue why this is. I have no clue what to do. \n I clicked on a lot of places. Does it work ?\n Went ahead and created a jupyter org account, added a few people as admins (feel free to add more): https://ci.appveyor.com/project/jupyter/notebook\n\nI'll be back in a bit.\n > Went ahead and created a jupyter org account, added a few people as admins (feel free to add more): https://ci.appveyor.com/project/jupyter/notebook\n> \n> I'll be back in a bit.\n\nCool, I was unable to do it for whatever reason. \n > Cool, I was unable to do it for whatever reason.\n\n[AppVeyor has a lot of setup to get an org account configured](https://www.appveyor.com/docs/team-setup/) - it's not straightforward.\n Thanks!\n","Are there any errors in Chrome's Javascript console? Can you try it in a different browser?\n I tried it in Explorer but it doesn't work.\n\nAlso nothing appears in the Javascript console...\n That's weird. There's nothing obviously wrong in the command prompt, though it's odd that it says 'Creating new notebook in' and doesn't give a directory.\n\nIn your first screenshot, the tab has the spinning indicator that it's still loading. Does it ever complete loading, or do you just see it keep spinning?\n\nDo you have any security software installed? We have had problems a few times with overenthusiastic security programs blocking Jupyter.\n No the loading never complete, even after few minutes. I have Kaspersky antivirus but I never had problems with it. I also have the windows firewall activated\n Someone else reported a different problem with Kaspersky recently (#1811). Can you try temporarily disabling that and seeing if it works better?\n I disabled it and launched a new notebook but it still doesn't work... I also asked to my Python instructor but he doesn't how to solve my problem\n That's very strange. I'm not sure what could be going on. If you start it with `jupyter notebook --debug`, what does it say?\n I did it and launched a new Python notebook but nothing happens again.\n\nI think that the problem may come from my browser. In fact when I try to launch a jupyter notebook from the jupyter website and not the command, I can create a python notebook without problem.\n\nHowever, after fews minutes I lose the connection to the server notebook: \"A connection to the notebook server could not be established. The notebook will continue trying to reconnect. Check your network connection or notebook server configuration\". And I can't reconnect to the server\n Have you closed it because you found a way to make it work?\n Hmm no, I didn't close anything, I still have the same problem\n > Hmm no, I didn't close anything, I still have the same problem\r\n\r\nLet's reopen. \r\n\r\nDo you still have the issue ? ",":+1: \n Thanks !\n","Awesome to see this in the works!\n Thanks ! We can write tests in a separate PR. \nI think it's ok to replace, kernels like haskell are already hacking around it. \n Backported.\n","These warnings are generated by the [jupyter_nbextensions_configurator](https://github.com/Jupyter-contrib/jupyter_nbextensions_configurator) (see [`jupyter_nbextensions_configurator/__init__.py`#L105-L110](https://github.com/Jupyter-contrib/jupyter_nbextensions_configurator/blob/1dacfb1223b6d1edde16fd7052167fdce67edcd3/src/jupyter_nbextensions_configurator/__init__.py#L105-L110)), rather than notebook proper (perhaps there should be a logging prefix to reflect this?), and it looks like the issue is caused by an install of [jupyter_contrib_nbextensions](https://github.com/ipython-contrib/jupyter_contrib_nbextensions) in two distinct locations. Essentially, it seems like you've got one set installed at the `sys.prefix` location `~/anaconda3/share/jupyter`, and another set at the OSX per-user location `~/Library/Jupyter`. I suspect you could fix this by running\n\n```\njupyter contrib nbextension uninstall --user\n```\n Thanks for you answer @jcb91, I understand, I tried your solution and it worked well, so thanks for your time. \n You're welcome, glad you got it sorted ok!\n","Thanks, this looks good to me.\n Backported\n","It is pretty open ended.\n It is! I'd be happy to close it once we have\n- [x] some explanation of what comms are\n- [x] how to register targets in Python, connect them from JS, and send messages both ways.\n- [x] link to the messaging spec docs about comm messages for authors of other kernels.\n Hey @takluyver, Thinking this was the SO question: http://stackoverflow.com/questions/40352628/messaging-and-jupyter-notebooks\n\nIf you or others want to do a detailed outline, that would be a helpful start. Alternatively links to the above 3 points in the code or other docs. Thanks.\n I'm _very_ happy to pair on this or even explore it from a protocol level (see https://github.com/jupyter/jupyter_client/issues/198) during the dev meetings. I'm not a good one to speak to for the JS APIs on jupyter/notebook for comms as we're taking a slightly different approach in nteract: https://github.com/nteract/nteract/pull/840\n I'm going to try to make some basic docs now. If you want to take it further, that would be great.\n @takluyver If you make bullets, I'm happy to wordsmith. We can certainly iterate \ud83d\udc4d \n Closing as we now have some docs - that doesn't stop us improving them more!\n","Seem legit. I'll wait for the test to pass. \n","Thanks Carol\n","It's not a known problem, as far as I recall. I don't think any of us are familiar with JSmol. Can you look into:\n- Are there any errors in the JS console when the JSmol thing is displayed or when you right click?\n- What does it do in Javascript to set up a context menu? I don't know much about that stuff, but maybe other people will recognise an issue with what it's doing.\n No messages in the console regarding JSmol.\n\nI don't know much about JSmol myself, but there is an active [SageMathCell discussion](https://groups.google.com/forum/#!topic/sage-cell/-g1AMBs0SdE) regarding encoding issues for languages other than English. It appears that the context menu is set up server side using PHP.\n That appears to be about a Java implementation called Jmol (as opposed to JSmol).\n SageMath does use the Java version from the command line, but the one embedded in Jupyter notebooks is the JavaScript version. The JavaScript version has PHP and Java files as part of its underlying source, and the maintainer of SageMathCell has been able to get things to (mostly) work in the pages served up. Perhaps this issue has to do more with how the SageMath backend translates things than the Jupyter notebook itself.\n Sorry, I don't properly understand the relations between Jmol, JSmol and SageMath. I think you'll need to talk to the developers of at least one of those projects to work out what's going on with right click menus and how Jupyter might be breaking it.\n Feel free to follow up here once there's more info about what is going\nwrong. :-)\n\nOn 9 Nov 2016 3:05 p.m., \"Paul Masson\" notifications@github.com wrote:\n\n> Closed #1872 https://github.com/jupyter/notebook/issues/1872.\n> \n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1872#event-853725871, or mute\n> the thread\n> https://github.com/notifications/unsubscribe-auth/AAUA9cD9xOtX694VFa5-J1_rFd2xGkHCks5q8lGzgaJpZM4Ko3nC\n> .\n","It sounds like you're trying an import in two different installations of Python, or two different environments. Check `sys.executable` to see which Python and environment you're running in, and `sys.path` to see where it looks to import modules.\n\nPython packages must be installed separately for each copy of Python you use, and if you are using virtualenvs or conda envs, packages must be installed into each environment where you need them. Either the package is not installed in one, or a different version of the package is installed.\n\nTo install packages to a particular Python installation or environment using pip, you can run it like this:\n\n``` shell\npath/to/python -m pip install ...\n# Replace path/to/python with the path of the Python executable (sys.executable)\n```\n\nIf you are using conda environments, you can install packages from conda like this:\n\n``` shell\nsource activate myenv  # On Windows, just 'activate myenv' (no 'source')\nconda install ...\n```\n\n[ This is a saved reply because I answer similar questions often - sorry if it doesn't exactly fit your case ]\n Closing as this is probably not a bug. Feel free to use comments to continue working it out.\n","Awesome!\n Backported.\n","Other than that, :+1: thanks :-)\n Backported.\n","See #1331. There are ways to make it work in Linux-on-Windows if you're keen to do so, but in general I'd still recommend installing Jupyter on Windows directly for most users.\n","@takluyver, I went ahead and made some changes. Let me know if theres something I should go ahead and expand on. I don't see any more obvious placeholders, but I'm not familiar with the REST API specification language, so it's not obvious to me if anything's missing. http://jupyter-api.surge.sh/#/, replacing the url with https://raw.githubusercontent.com/jdetle/notebook/terminals/notebook/services/api/api.yaml will show the changes I made. It looks like there is an error I introduced, I'll try to fix that soon. Hi, fixed that bug! Still an error, but its one that was already there :) Yeah, there's an error in an unrelated part of the schema that needs to be addressed. I can try to tackle it here or in a separate pr Hi @takluyver, @rgbkrk, just fixed the other error, there was an extraneous semicolon that was causing some issues. Excellent! Thanks for going the extra mile on finding and fixing the other error. (Tried to backport, but it didn't apply cleanly, and as it will be available in docs online anyway, I don't think it's worth spending time on)","Hi! It looks like you're trying to submit work for a class. This is not the right place to do that. Unfortunately, I can't help you find the right place; I don't know what class you're taking or even what school you're at. If you're having trouble finding the submission site, please ask someone at your school.\n\nThis site is for reporting bugs in the Jupyter Notebook software. If you think there is a bug which is affecting your assignment, please describe it.\n","An example notebook for testing with these messages (doesn't require IPython PRs): https://nbviewer.jupyter.org/gist/minrk/1a1e56a611f1ff1e2645f733bdd0e381\n Only missing thing: updating execute_result.\n Looking good!\n No longer WIP, this should be all set, now.\n","That sounds like you've got some unreleased version of ipython from git.\n\nIf you want to use IPython, we'd recommend using version 3.2 (the latest release) for now - we're splitting pieces up, so it's trickier to install from master until we've released them all.\n\nIf you're interested in working on IPython/Jupyter itself, you need to get the latest version of all the pieces. See the instructions [in the README of this repository](https://github.com/jupyter/notebook#jupyter-notebook) to get started.\n @takluyver  Thank you for your reply.\nIt means it's better to use IPython with python3.2? \nI'm interested in IPython Jupyter notebook. Should I need to delete them all then rebuild all packages again? \n Sorry, I meant IPython 3.2, not Python 3.2 (I know this is confusing). IPython currently works with Python 2.7 and Python 3.3 or higher.\n\nFor now, the easiest way to install it is to `pip install ipython[notebook]` (see [the install page](http://ipython.org/install.html)).\n\n'Jupyter' is the name of the next version of IPython, but we're still working on that, so it's not easy to install at the moment. It will initially look and work a lot like the current version of IPython.\n","(Responded on the mailing list)\n Yes, a Jupyter notebook can programmatically halt itself.\n\nUse a cell at the end of an iPython notebook like this:\n\n```\n%%javascript\nJupyter.notebook.session.delete();\n```\n-  On \"Run All\" the final %%javascript cell \"Jupyter.notebook.session.delete();\" correctly stops the notebook.\n-  The notebook interface shows \"No Kernel\", the Running tab no longer lists the notebook.\n-  The previous cell **incorrectly** still shows a running status [ \\* ], however the output from that cell has already returned. This can be misleading, but seems minor -- I can report it as a separately issue if anyone cares.\n\nRestart the stopped notebook with:\n-  Menu > Kernel > Restart ... \"Dead Kernel\" warning > Try restarting now\n-  ...or refresh the browser tab.\n\nA demo ipynb file is posted on the [forum thread](https://groups.google.com/forum/#!topic/jupyter/3zAVHofQykg)\n This led to a question: should it be possible to use `exit()` to stop the kernel in a notebook? At present, using `exit()` will make the notebook think that the kernel has died, and it will automatically start a new kernel. I think that `exit()` should probably put the notebook interface into the state it arrives in if it gives up on trying to start a kernel.\n As a current workaround for those interested in notebook halting, I developed this %%javascript cell for use at the end of a Run All sequence. It uses a modal dialog to halt the notebook kernal (and optionally restart it on user click).\n\n---\n\n**Notebook Halt / Restart cell**\n\n_When included at the bottom of a notebook, it will stop the notebook at the end of Run All, and pop up a modal dialog letting the user know that the notebook was auto-stopped at the end of the run. The dialog offers a \"Kernel Restart\" button which restarts the notebook._\n\n```\n%%javascript\nrequire(\n    [\"base/js/dialog\"], \n    function(dialog) {\n        dialog.modal({\n\n                title: 'Notebook Halted',\n                body: 'This notebook is no longer running; the kernel has been halted. Close the browser tab, or, to continue working, restart the kernel.',\n                buttons: {\n                    'Kernel restart': { click: function(){ Jupyter.notebook.session.restart(); } }\n                }\n        });\n    }\n);\nJupyter.notebook.session.delete();\n```\n\nhttps://groups.google.com/forum/#!topic/jupyter/3zAVHofQykg\n Related to this, in #2070, which was recently merged, I added a \"Shutdown\" menu item to the Kernel menu. Hey there, I'm going through old issues and it seems to me that it makes sense to close this one.\r\n\r\n@jeremydouglass figured out a workaround in the forum link posted two comments above this one, and I added \"Shutdown\" item to the Kernel menu.\r\n\r\nThanks everyone and happy hacking! :bowtie:","Pinging @tacaswell\n I have a good guess as to what is going wrong and it is due to the auto-redraw on stale logic.\n\npost-execute event checks if any figures are stale -> figure is stale -> triggers redraw -> redraw fails -> the figure is still stale ->  post-execute event checks if any figures are stale -> ...\n So that would be a mpl issue? Feel free to use this thread to work out the details, and let us know if we can do anything on our side.\n What are the conditions when 'post_execute' hook is called?  \n\nFixing the infinite loop is relatively strait forward (just mark the figure as not stale, even if drawing failed), but I am not fully convinced _correct_.\n\nGetting the exception to propagate across is going to be more difficult an the draw is run via a callback from the js side via a comm we have set up (this is the same reason of the other issues where tracebacks and `print` calls from mouse / keyboard events do not make it back out to the notebook.  These issues _should_ be addressed by `ipympl`.\n","That's strange. When this happens, can you look to see if there's any error displayed in either the browser's Javascript console or the terminal where you started the notebook?\n There are no terminal messages besides the Kernel starting which seems normal.\n\n**Javascript did yield this error** when trying to save:\n\n```\nTypeError: IPython.notebook.metadata.toc is undefined toc2.js:92:1\n```\n\nThere is further code there that I can send if needed.\n\nI also noticed looking at the Javascript console the following error when opening the notebook, although I don't know its significance:\n\n```\nAPI request failed (404): Session not found: session_id=u'23aeec95-959c-4934-93d8-1ba0178bd7a7' main.min.js:12718:9\nNetworkError: A network error occurred.\n```\n\nThere are other errors as well, but these seem to occur with other notebooks that do save correctly:\n\n```\nTypeError: IPython.notebook.kernel is null\nStack trace:\naddSaveAsWithToc@http://localhost:8888/nbextensions/toc2/toc2.js?v=20161110110608:58:10\nload_ipython_extension@http://localhost:8888/nbextensions/toc2/main.js?v=20161110110608:119:5\nload_extension/</<@http://localhost:8888/static/notebook\n```\n\nFinally, I also noticed that under the `File` menu, the notebook is no longer trusted, and when I try to trust it,  I get the same error:\n\n```\nTypeError: IPython.notebook.metadata.toc is undefined toc2.js:92:1\n```\n\nIs this something weird with the TOC nbextension?\n That does sound like an issue with the TOC extension. @jcb91 and @jfbercher, you seem to have worked on that recently, does this sound familiar?\n Yes, this is probably toc2's fault.\n\nThis sounds pretty much like https://github.com/ipython-contrib/jupyter_contrib_nbextensions/issues/762, and, without closer inspection, seems to originate from lines in toc assuming the existence of metadata values which for some reason don't exist. One solution is probably to patch the toc2 nbextension to create default values, in case it gets mangled somehow, although it's unclear so far how the mangling happens in the first place.\n @ultradian, simple check would be to disable the toc2 nbextension and see if this behaviour disappears\n I haven't been able to reproduce this, not the similar issue reported in  ipython-contrib/jupyter_contrib_nbextensions#762. Indeed this is related to a nonexistent metadata value, though it should have been created during the extension's load. The only explanation I see is that in some very rare circumstances and for yet unknown reasons `config.load` fails silently. \nAs I said previously\n\n> It should be possible to strengthen [l89-95](https://github.com/ipython-contrib/jupyter_contrib_nbextensions/blob/master/src/jupyter_contrib_nbextensions/nbextensions/toc2/toc2.js#L89-L95) whith the creation of toc section, then nav_menu if both do not exist; but I would prefer to understand what happens at root. \n\nI would still prefer to understand what happens but indeed it is possible to patch. \n @ultradian if you could provide a notebook which repeatably shows this behaviour, that'd be super helpful to diagnose what difficulty toc2 is actually encountering!\n OK.  Here is what I found out:\n\nWhen I turn off the toc2 extension, it does start to work again as you anticipated.  If I save a new version, the new version seems good although the follow notices came up in the JS console:\n\n```\n1478916043230   addons.productaddons    ERROR   Request failed certificate checks: [Exception... \"SSL is required and URI scheme is not https.\"  nsresult: \"0x8000ffff (NS_ERROR_UNEXPECTED)\"  location: \"JS frame :: resource://gre/modules/CertUtils.jsm :: checkCert :: line 145\"  data: no] Log.jsm:751:0\n1478916043230   Toolkit.GMP ERROR   GMPWrapper(gmp-gmpopenh264) findUpdates() - updateTask for gmp-gmpopenh264 threw: [Exception... \"SSL is required and URI scheme is not https.\"  nsresult: \"0x8000ffff (NS_ERROR_UNEXPECTED)\"  location: \"JS frame :: resource://gre/modules/CertUtils.jsm :: checkCert :: line 145\"  data: no] Stack trace: checkCert()@resource://gre/modules/CertUtils.jsm:145 < downloadXML/</success()@resource://gre/modules/addons/ProductAddonChecker.jsm:113 Log.jsm:751:0\n1478916043745   addons.update-checker   WARN    Update manifest for {972ce4c6-7e08-4474-a285-3208198ce6fd} did not contain an updates property\nContent Security Policy: The page's settings blocked the loading of a resource at about:blank (\"base-uri https://github.com\")\n```\n\nI still have a copy of a file that consistently gives the error `TypeError: IPython.notebook.metadata.toc is undefined` but it is 88 MB, and still 28MB if I zip it.  Is there a good way to get it to you?  I imagine it would be more helpful to figure out how I created it - maybe I had it open when installing Nbextensions?  I did have some unusual problem installing it in #https://github.com/ipython-contrib/jupyter_contrib_nbextensions/issues/785 that I couldn't reproduce.\n Hi @ultradian \nCould you give a try to the update \n\n```\njupyter nbextension install https://rawgit.com/jfbercher/small_nbextensions/master/toc2.zip  --user\njupyter nbextension enable toc2/main \n```\n\nand report if it improves things? Look in the console if `toc2` reports something about metadata. Thanks. \n It seems to fix every file so far.  Did not notice any messages besides the initial `[toc2] toc2 initialized (via notebook_loaded)`\n\nThanks!\n Just for the record: this was probably due to a race condition during notebook loading. Config was loaded, processed and metadata written to the notebook before it was fully loaded (this happened of course for large notebooks). The metada were probably overwrited during notebook load and initialization data lost. \n\nNow the extension detects that the notebook is fully loaded (or use the `notebook_loaded` event) before initializing itself). \n @jfbercher good work \ud83d\udc4d\nI thought there might be some kind of race in there somewhere haha :)\nWe should also add this fix to ipython-contrib/jupyter_contrib_nbextensions#762\n @jfbercher https://github.com/jfbercher Yes.  Great job!\n\nOn Tue, Nov 15, 2016 at 8:35 AM, Josh Barnes notifications@github.com\nwrote:\n\n> @jfbercher https://github.com/jfbercher good work \ud83d\udc4d\n> I thought there might be some kind of race in there somewhere haha :)\n> We should also add this fix to ipython-contrib/jupyter_\n> contrib_nbextensions#762\n> https://github.com/ipython-contrib/jupyter_contrib_nbextensions/issues/762\n> \n> \u2014\n> You are receiving this because you modified the open/close state.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/1882#issuecomment-260692864,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/ANfHjTmZRsIzXspT1rFk6AU0I-27JLrSks5q-d9cgaJpZM4KuCUt\n> .\n","I have tried but could not find any answer on how the jupyter client and server (kernel) work.\r\n\r\n1. How to manipulate cell `metadata`? I can see that some nbextensions can set metadata and the metadata could be saved in `.ipynb`, but I am not sure how the kernel can access cell meta information.\r\n2. How does `user_expressions` work? I mean, how the frontend determines which `user_expressions` to evaluate? The `user_expressions` looks to me the only way for the front and backend to exchange meta information, but I am not sure how to control the frontend.\r\n\r\nIn the end, what I would like to do, in the context of [Script of Scripts](http://vatlab.github.io/SOS) is to **store and use kernel information in each cell**. More specifically,\r\n\r\n1. The frontend reads `metadata` of a cell, and send the kernel information to `do_execute` (via `user_expression`). If this is possible, the frontend can also use different color to display cells created by different kernels.\r\n2. The kernel decides which subkernel to use to evaluate the `code` (current active kernel for new cells and creating kernel for existing cells), and send result, as well as `kernel` information to frontend (through `user_expression`)?\r\n3. The frontend saves kernel info in `metadata` of a cell. The information will be used when the cell is executed again.\r\n\r\nI would appreciate it if anyone can let me know if these are at all possible and point me to relevant documentation or source code. Thanks.\r\n\r\n > How to manipulate cell metadata? I can see that some nbextensions can set metadata and the metadata could be saved in .ipynb, but I am not sure how the kernel can access cell meta information.\r\n\r\nThe kernel can't directly manipulate cell metadata: by design, it doesn't know about the document the code is part of. You can display Javascript output which will manipulate cell metadata, or even set up a comm to exchange data between the frontend and the kernel.\r\n\r\n> How does user_expressions work? I mean, how the frontend determines which user_expressions to evaluate? The user_expressions looks to me the only way for the front and backend to exchange meta information, but I am not sure how to control the frontend.\r\n\r\nI don't think the notebook uses `user_expressions`, and I'm not even sure that any of our frontends do. It was specified in the protocol to allow custom prompts in the frontend,  but we never got round to implementing that, and it hasn't proved very useful for anything else, as far as I know.\r\n\r\nYou might be best off looking into [comms](http://jupyter-notebook.readthedocs.io/en/latest/comms.html) to allow custom messages between the frontend and the kernel. Great! Thank you very much for your info and I can now send information from the kernel to frontend, update frontend style accordingly and save to metadata. This will greatly increase the usability of the SoS kernel.\r\n\r\nI have a few related issue though, hopefully you have some quick answers for them.\r\n\r\n1. The SoS kernel uses magic `%use R` etc to switch kernel so I can only know which kernel was actually used after the completion of the execution. When I send the 'actual used kernel' information to the frontend, I am having trouble finding the cell that was just executed. `IPython.notebook.get_selected_cell()` does not have to be the just executed cell, using `execution_count` or `code` to look up cell do not work well because `execution_count` might not be immediately available in the frontend after execution, and multiple cells might have the same `code`. Is there an easy way to find the just executed cell so that I can set metadata to the right one? The cells have field `last_msg_id` but I am not sure what id it is (is it for the `execution_result` message?) and how to get the ID from the kernel.\r\n\r\n2. How can I send metadata to the kernel when I execute a cell? I am thinking of a `preexecute_hook` to send the metadata to kernel through `Comm` but after reading the [frontend code](https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/js/codecell.js) I tend to think that I have to override `CodeCell.prototype.get_text` for this.\r\n\r\n3. I am also having trouble setting the cell style from cell metadata, but I suppose I can learn it from nbextensions such as [exercise2](https://github.com/ipython-contrib/jupyter_contrib_nbextensions/tree/master/src/jupyter_contrib_nbextensions/nbextensions/exercise2).\r\n\r\nThank you again for your help, you know, a simple hint to the right direction can save me hours of searching and code digging. Maybe it would actually be better to use the metadata in `execute_request` and `execute_reply` messages. All Jupyter messages have a metadata part where you can put any information you want. The downside is that that may be a bit trickier to access from an extension in the frontend. I don't know that code very well, unfortunately. I think the `execute_request` is triggered by the [frontend execute function](https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/js/codecell.js#L303) so we have to insert the metadata in that function. The particular feature I want to do is that if a cell was execute by R and has `cell.metadata.kernel=\"R\"`, I need to wrap the code with\r\n\r\n```\r\n%with R\r\ncode\r\n```\r\n\r\nto make sure the code is re-executed in the `R` kernel. I will see if I can override [CodeCell.prototype.get_text](https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/js/codecell.js#L491) to achieve this. Because overriding `CodeCell.prototype.get_text`has a number of side effects (e.g. the added meta information would be saved to notebook), I ended up modifying `cell.kernel.execute` as follows\r\n\r\n```\r\n        var my_execute = function (code, callbacks, options) {\r\n            \"use strict\"\r\n            var cells = IPython.notebook.get_cells();\r\n            for (var i = cells.length - 1; i >= 0;  --i ) {\r\n                // cells being executed would have input prompt '*' according\r\n                // to this.set_input_prompt('*') before execute is called.\r\n                // Also, because a cell might start executing without a previous cell\r\n                // being finished, we should start from reverse and check actual code\r\n                // A magic is used to send meta information and cell index to the kernel\r\n                if (cells[i].input_prompt_number == '*' && code == cells[i].get_text()) {\r\n                   return this.orig_execute(\r\n                        \"%softwith \" + cells[i].metadata.kernel + \" --cell \" + i.toString() + \"\\n\" + code,\r\n                        callbacks, options)\r\n                }\r\n            }\r\n        }\r\n        // override kernel execute with the wrapper.\r\n        IPython.notebook.kernel.orig_execute = IPython.notebook.kernel.execute\r\n        IPython.notebook.kernel.execute = my_execute\r\n```\r\n\r\nThe code also sends cell index to the kernel which also solves problem 1 (locate just executed cell). It is a hack and it is not particularly efficient (search notebook for each `execute` call) also I would be happy to switch if there is a better way to send meta data to kernel for execution (it looks like `user_expression` could be used for this).","Pushed this directly on 4.x\n (the test are failing only on appveyor for unrelated reason of appveyor not setup on 4.x branch)\n","We should be sizing images to a reasonable default size in markdown cells. If this isn't working for images you attach, then this is a bug.","Fixed by #1887 \n","Thanks! I had spotted the issue with pid reuse before, but I didn't realise we were failing to clean up files here.\n","Is there anything unusual about that notebook (e.g. is it particularly big)? Can you find anything that changed yesterday that could have affected this (e.g. updates installed)?\n\nThe code that handler is using to retrieve the notebook is [here](https://github.com/jupyter/notebook/blob/2bbaaa5cde5c2dc1a42042db02c6cc4025a24cee/notebook/services/contents/filemanager.py#L331) if you want to break down exactly which operation is slow. \n There is nothing unusual. This happened too even when creating new (empty) notebook. Browsing the file tree in Jupyter is fine. Opening terminal is fine. The reason I'm thinking it's the environment is because it didn't happen in my other Linux VMs not managed by corporate. \n\nThanks for pointing the entry point, will get back to this thread my discoveries after putting print statements...\n It was stucked at [this line](https://github.com/jupyter/nbformat/blob/1eaa2e89381ec9a345bc39e4727ea1b86218733d/nbformat/sign.py#L252)\n\nreally surprising, why would checking if an object is null would take a long time. Continuing with digging....\n Getting `self.db` for the first time will run [this function](https://github.com/jupyter/nbformat/blob/1eaa2e89381ec9a345bc39e4727ea1b86218733d/nbformat/sign.py#L132) which opens an sqlite database. We've had some issues with sqlite when on an NFS filesystem - is your home dir on NFS? Is `~/.local/share/jupyter/nbsignatures.db` getting big?\n\nYou can bypass the file access for this database by configuring `NotebookNotary.db_file=':memory:'`. This will mean all notebooks are untrusted, but if they load quickly, that's an improvement.\n Yes you are correct! The home dir is an NFS mount. I was thinking Jupyter only uses ~/.jupyter to store user files. The moment I saw the .db was an sqlite file and your reply came that it was stored in homedir, it is a problem. Pretty sure sqlite doesn't work in NFS.\n\nThanks for helping me with this and the work around. We can close this issue.\n\nTldr. If home directory is an NFS mount, Jupyter may not work as expected.\n\nOn November 11, 2016 12:16:44 PM CST, Thomas Kluyver notifications@github.com wrote:\n\n> Getting `self.db` for the first time will run [this\n> function](https://github.com/jupyter/nbformat/blob/1eaa2e89381ec9a345bc39e4727ea1b86218733d/nbformat/sign.py#L132)\n> which opens an sqlite database. We've had some issues with sqlite when\n> on an NFS filesystem - is your home dir on NFS? Is\n> `~/.local/share/jupyter/nbsignatures.db` getting big?\n> \n> You can bypass the file access for this database by configuring\n> `NotebookNotary.db_file=':memory:'`. This will mean all notebooks are\n> untrusted, but if they load quickly, that's an improvement.\n> \n> ## \n> \n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub:\n> https://github.com/jupyter/notebook/issues/1888#issuecomment-260020301\n\n## \n\nSent from my Android device with K-9 Mail. Please excuse my brevity.\n We are planning to move away from sqlite for the notebook signatures database - I'm hoping to have some time to work on that in the couple of days. #1782 will track that.\n\nWe also use an sqlite database for IPython history; you may have some trouble with that too. To avoid that, look up `HistoryAccessor.hist_file` in [this page](http://ipython.readthedocs.io/en/stable/config/options/terminal.html).\n You were right again on the IPython history, it was having the same problem too when starting IPython. Also, the size of sqlite db in my case is 380KB for IPython history.sqlite, and 63KB for nbsignatures.db.\n\nJust to summarize the work arounds related to issues with Jupyter/IPython hanging/not-responding/stuck for 5 minutes when starting/opening/creating notebook due to sqlite DB file on NFS mount:\n- IPython: pass `--HistoryAccessor.hist_file` parameter when running IPython to a different path on a non-NFS mount e.g. `ipython --HistoryManager.hist_file=/tmp/ipython_hist.sqlite`, or set environment variable `IPYTHONDIR` to a non-NFS mount directory. E.g. `export IPYTHONDIR=/opt/appserver/sandbox/.ipython`\n- Jupyter: Adding NotebookNotary.db_file=':memory:' in `$HOME/.jupyter/jupyter_notebook_config.py` which creates the sqlite database in memory, so will not persist when Jupyter process restarted. Or moving data directory to non-NFS partition by setting `JUPYTER_DATA_DIR` environment variable before running Jupyter. E.g. \n  `export JUPYTER_DATA_DIR=/opt/appserver/sandbox/.local/share`\n\nThe following work around from [the documentation](https://github.com/jupyter/notebook/blob/715a6c02db0f6ad639d63e4f6fdff0cc63b91ec2/docs/source/security.rst) doesn't seem to work, when starting Jupyter, log said data_dir was not recognized as a valid configuration:\n\n> To share a signatures database among users, you can configure:\n> \n> c.NotebookNotary.data_dir = \"/path/to/signature_dir\"\n> to specify a non-default path to the SQLite database (of notebook hashes, essentially). \n\nI think that instruction should be replaced with setting JUPYTER_DATA_DIR environment variable instead (from looking at [this line code](https://github.com/jupyter/jupyter_core/blob/master/jupyter_core/paths.py#L51)).\n","Thanks! We're at a meeting this week, so it might be a few days before we get to it. If you don't hear anything in a week or so, ping us to remind us about it.\n\n(Background for other people reading this - Marcel asked this as a [question](http://stackoverflow.com/questions/40554446/how-to-stop-execution-of-all-cells-in-jupyter-notebook) on SO, and I asked him to make it an issue)\n I'd like to add a simple way to reproduce: open https://try.jupyter.org/ and open a python notebook. Add a cell with `while True: pass` followed by another cell containing `print('not interrupted')`. Execute both and hit the interrupt button\n\nThis seems to exist long time already, wondering that nobody else came across this issue yet, so annoying.\n I see it on try.jupyter, but doing exactly the same thing in my local notebook, it works as expected (the second cell is not run). Do you also see it somewhere other than try.jupyter?\n\n@minrk @rgbkrk - is there anything about the tmpnb architecture that might affect this?\n I believe it's [this one](https://github.com/ipython/ipykernel/pull/190), fixed in 4.5.1, but try.jupyter is still using ipykernel-4.5.0. Thanks, Min. @MarcelSimon, if you're seeing this locally, can you upgrade to ipykernel 4.5.1 and see if it's fixed? Indeed, ipykernel 4.5.1 fixed that problem. Thanks!","This is likely due to the sanitization by caja. We should investigate whether it is doing protocol whitelisting, and if we can disable it.\n","Interesting idea, but I'm not convinced that we need to add anything to our process.\n\nWe already use milestones to indicate issues which we'd like to fix before a given release - e.g. [here's the 4.3 milestone](https://github.com/jupyter/notebook/milestone/9). When preparing for a release, we go through those issues to either fix them or bump them to a later milestone. I've just done a pass on this for 4.3. In theory, we could save some time if we had an easy way to distinguish issues we consider important to fix from things that are less important, but we'd put the fix in that release if one was ready. But I suspect it wouldn't save that much time, and I think going back and looking at these issues again is probably healthy for the project.\n\nIf we do add a label, I'd argue that it should be the other way round, i.e. tag issues that we don't mind bumping to a later release. If we tag release blockers, we would still need to go through the issues without the tag to see if any of them should get the tag. I.e. if we add an issue to a milestone, I'd treat it as a release blocker by default.\n I agree with Thomas here. There is already a requirement that all milestoned issues are resolved or explicitly postponed to another milestone before we can release. Adding a 'blocker' tag doesn't seem to improve that process.\n I am doing a bunch of issue/label triage right now and have removed the release_blocker label as it embeds the same information as the milestones. I am also converting the labels to use the taxonomy of JuptyerLab to help us in the transition.","I've also now fixed the issues with appveyor in this project, by switching where we get ObviousCI from, as described in pelson/Obvious-CI#68\n Yay for fixing appveyor while you were at it.\n","Can you try uninstalling all of:\n- ipykernel\n- ipython\n- jupyter_client\n- jupyter_core\n- traitlets\n- ipython_genutils\n\nAnd then install again. If you're doing this inside a conda env, it might be easiest to create a new environment and start from scratch. Also, if you're going to install with conda, run `conda clean -tipsy` to clean up conda caches before you start.\n fixed it! Thank you so much - I've been searching for hours for an answer! Really appreciate it.\n You're welcome. For the record, my guess is that it was incompatible versions of some of those packages being installed. It probably wasn't necessary to reinstall them all, but it's easier to do that than try to work it out more closely.\n","In #1837, we added machinery to change the tab icon when the kernel is busy. That's currently slated to land in notebook 5.0.\n","How did you install it? We have a Javascript build step now, so it doesn't run directly from source without some kind of installation. See the [contributor guide](http://jupyter-notebook.readthedocs.io/en/latest/contributing.html) if you want to set up a development copy from Github.\n I followed the instructions on the contributor guide - per http://jupyter-notebook.readthedocs.io/en/latest/contributing.html#installing-the-jupyter-notebook .  I've run development copies in the past with no problems. So I'm trying to figure out what changed.....\n I also rebuilt the js and css with \"python setup.py js css\" - no help....\n Maybe @Carreau or @minrk will have an idea.\n\n```\nTypeError: root is undefined\n```\n I haven't seen that one. For me, it's \"when in doubt, clean up and try again\", which would be:\n\n```\ngit clean -xfd # deletes everything not tracked by git\ngit pull # update\npip install -vv -e . # redo dev install\n```\n Did all this - still no help.  BTW, I can run 4.2.3 from source with no problems, so it's got to be something between then and now. Someone please help me on this, as I'm stumped.  The stack trace leads to the following in static/tree/js/built/1.main.min.js\r\n\r\n```javascript\r\n\t//     Underscore.js 1.5.2\r\n\t//     http://underscorejs.org\r\n\t//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\r\n\t//     Underscore may be freely distributed under the MIT license.\r\n\t\r\n\t(function () {\r\n\t\r\n\t  // Baseline setup\r\n\t  // --------------\r\n\t\r\n\t  // Establish the root object, `window` in the browser, or `exports` on the server.\r\n\t  var root = this;\r\n\t\r\n\t  // Save the previous value of the `_` variable.\r\n\t  var previousUnderscore = root._; \r\n```\r\n\r\nThe error says \"root is undefined\"....  I find all this a bit curious since npm thinks my underscore.js is at 1.8.3, not 1.5.2. You might have a global [cache of npm modules](https://docs.npmjs.com/cli/cache), so `npm install` get the wrong version... You probably want to clean your install aggressively (pip uninstall several time to be sure) then search your hard drive for `notebook` (and `node_modules` ?) and nuke relevant things if needed.\r\n\r\nThen I would try to reinstall. But I'm baffled as to why you would get the wrong underscore version, and how that's possible, but I haven't keep up with npm in a long time. \r\n\r\n@blink1073 have you seen something similar on JupyterLab ?\r\n\r\n\r\n I've noticed that `npm install` has recently stopped automatically rectifying itself with `package.json`, though haven't yet figured out why.  I've been manually removing the offending package from `node_modules`. This is the same issue as reported in #1495 .  I think I may have a fix.....","For the record, this follows on from jupyter/nbformat#43\n Thanks @takluyver, I was getting validation errors when saving the notebook. I just did a dev install of nbformat and no more validation errors \ud83d\udc4d\n Yeah we definitely need an nbformat release soon, possibly to include the JSON Array ability /cc @minrk.\n","Not possible yet, but this is something we would like to do. Tagging as JupyterLab milestone as we will likely end up implementing it there first. I think this will also require server changes as well...","- We can and should certainly fix where we generate invalid IDs. Do we know which characters are valid in IDs?\n- It's probably reasonable to tidy up corner cases around punctuation and numbers in the process, which hopefully not too many people are relying on.\n- I don't think we should try to follow pandoc on lowercasing all IDs, because it would break too many links in existing notebooks.\n I'm ambivalent about lowercasing everything and am prepared to defer to others on that. \n\nWhat is likely going to require the most reworking is that we should be autoextracting and replacing ids with content in curly brackets containing a leading octothorpe (`{#\u2026}`). But then we're going to need to validate that as well. \n\nSo it's probably going to have to go through two checks: \n1. detect if there is a manually defined id target, if none autogenerate an id\n2. validate the id (either manually or via autogeneration)\n","Yes! That would be great and definetly not hard to implement.\n +1 for adding the keyboard shortcuts to the menu items. This would make Jupyter much easier to use. \n :+1: yeah, that would be extremely useful!\n Came to this repo suggest that keyboard shortcuts be displayed next to menu items and found this issue.  I think it's a great idea.\n Hi @sloria, it appears that a keyboard shortcut editor is being worked on currently. https://github.com/jupyter/notebook/pull/1265\n Shortcut editor == keyboard shortcuts appear in the menu?\n No, I was just trying to point towards something relevant. \n Ah, thanks for pointing that out.\n If no one is working on this, I would try it on my own. I have some like this in mind:\n\n![image](https://cloud.githubusercontent.com/assets/2741256/14518403/c85d656e-0217-11e6-9385-def17cba62c7.png)\n\nDo you agree? I would try to dynamically load shortcuts from [here](https://github.com/jupyter/notebook/blob/41d6da235cbf3bcf6d7f818e11a066e0fd12ff8b/notebook/static/notebook/js/keyboardmanager.js). Is there any better way, should I rather hardcoded? Thanks for any help\n That looks nice! \n\nI think that most applications tend to align the keyboard shortcut to the right side of the menu and have a somewhat larger space between the text and the shortcut.\n Sure, I would definitely play with that (take the previous screenshot as a 1 minute mockup). \n With making it easy to install new nbextensions in Jupyter 4.2, I think I will try to make this feature as a nbextension.\n","This is due to a security bug in old versions, and should be avoided if you have pycurl installed, or have a reasonably secure version of Python 2.7. Is your system up to date? When did you install pycurl?\n\nYou can fetch the file manually:\n\n``` bash\ncurl https://cdn.jupyter.org/notebook/4.0.0-dev/style/style.min.css > nbconvert/resources/style.min.css\n```\n Issue solved after Ubuntu upgrade\n","There's a starting point in IPython 3.x, before we split Jupyter out into separate packages:\n\nhttps://github.com/ipython/ipython/blob/3.x/examples/IPython%20Kernel/ipython-completion.bash\n","ok sorted - couple of points for anyone else who comes across this issue\n\nI needed to use tunneling rather than just normal SSH (which i had overlooked!)\n\nAlso i set the tunnel to 8000 so need to navigate to http://localhost:8000/ rather than 8888 (even though it states that the notebook is running at 8888 in command line). \n\nDaft error on my part \n","Sorry, I'll refile this as a Jupyter issue. This is a good spot for the issue, assuming you're asking about the use inside the notebook. Good point, this might be in the kernel implementation of tab completion, but I suspect it is in the frontend.","\"All browsers will send an Origin header. You can use this header for security (checking for same origin, whitelisting/ blacklisting, etc.) and send a 403 Forbidden if you don't like what you see. However, be warned that non-browser agents can just send a faked Origin. Most applications will reject requests without this header.\"\n\nhttps://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers\n As @blink1073 pointed out, browsers are not supposed to be missing Host and Origin.\n\nAt the time we wrote this, I assumed scripted clients would have to set Host and Origin.\n Is it possible for browsers (or more precisely, ajax calls in a browser) to omit Host? If so, we should probably only be allowing missing Origin as a signal for scripts, and not allowing Origin set but no Host.\n I agree with that logic. I'm ok with what's here too for what it's worth.\n Ditto to what @rgbkrk said.\n Thanks, both!\n","Seems sensible, thanks.\n","@takluyver It's working for me. However, on Chrome, the user must enable pop-ups for the domain, otherwise only the first file in the selection will be opened and a pop-up warning will display in the address bar. \n I think that's what Min expected on #1755. I'm inclined to make it a single-item action so that we're not dealing with browser pop-up blockers.\n @minrk @Carreau What say you? If we decide that \"View\" (viewing a notebook opens the JSON file in a separate tab) and \"Edit\" (editing a notebook opens the JSON file in a text editor) should only work for single files vs. multiple files, then no action is required and this PR can be closed.\n @gnestor I think this is still useful. I'd just set the limit at 1, so that it doesn't run into pop-up blockers.\n Current \"View\" behavior: \n\n![view](http://g.recordit.co/Px36FVxnpR.gif)\n\nCurrent \"Edit\" behavior:\n\n![edit](http://g.recordit.co/By8FVDlzXF.gif)\n \"Edit\" notebook and markdown files:\n\n![edit](http://g.recordit.co/BGJAd1nFRS.gif)\n\n\"View\" HTML file:\n\n![view](http://g.recordit.co/zQXSQANs58.gif)\n Sweet ! +1\n Nice!\n Looking forward to have an occasion to use that !\n I think it might be a bit surprising for new users that 'View' and 'Edit' on a notebook both show you the raw JSON. I understand that that fits in with editing other text-based file types, but I would naively expect 'edit' on a notebook to be equivalent to opening it normally, and 'view' to be equivalent to the nbconvert-based 'print preview' we offer from the file menu.\n\nHow hard would it be to make the buttons say something like 'View raw' and 'Edit raw' if you have a notebook selected?\n @takluyver I've revised so that \"View\" is only visible for HTML, image, and PDF files and \"Edit\" will open notebooks as notebooks and all other files in the text editor. \n One more use case to consider: What if you wanted to look at or edit the JSON of a notebook file? There is currently no way to open a notebook in a text editor. Do we want to accommodate that with an \"Edit Raw\" or \"Edit Metatdata\" for selected notebook files?\n I don't think we need a button for that.... Maybe be able to open from editor would be enough?\n Thanks @gnestor, that sounds good to me. I don't think there's a pressing need for 'edit raw'.\n\nI'd still probably agree with Min that I'd only show the buttons with a single file selected, and avoid popup blockers altogether. I think the main thing we wanted to fix is that there's no easy way to view an HTML file, because clicking on it opens an editor. I don't feel strongly about this, though.\n\nWe should think about the **security implementations**. An HTML file could contain Javascript, which can execute when you 'view' it. Because it's served from the notebook domain, that Javascript can presumably start a kernel and use it to execute code (unless I've overlooked something). That seems a bit unexpected for a 'view' action. Is there any way we can mitigate this? Ping @rgbkrk \n > We should think about the security implementations. An HTML file could contain Javascript, which can execute when you 'view' it. Because it's served from the notebook domain, that Javascript can presumably start a kernel and use it to execute code\n\nThat's exactly correct. If the view needs to be supported it needs to be in a sandboxed iframe (since we don't have access to other subdomains).\n As for showing the buttons when there is only 1 vs. more selected, often times the better option doesn't make itself clear until you try to write the documentation (or teach someone how to use it). If you start describing how to use this, it becomes complicated... buttons showing/not showing because different combinations of types (files, directories) and counts (one, two) are being selected. If you can make an option more flexible and easier to explain, then go with that.\n Aha, so we would use that to disable JS scripts entirely for the HTML you're viewing?\n\nI'm going to bump this PR to milestone 5.0 as it seems like a bigger thing to work out, and I'd like to get 4.3 released fairly soon.\n > I'm going to bump this PR to milestone 5.0 as it seems like a bigger thing to work out, and I'd like to get 4.3 released fairly soon.\n\nI certainly agree with that.\n It's not that we need to disable JS so much as we want to disable access to the Jupyter REST APIs and websockets.\n\n![screen shot 2016-11-19 at 1 11 29 pm](https://cloud.githubusercontent.com/assets/836375/20458422/bdc2e162-ae59-11e6-9d59-cb649c945569.png)\n\n``` html\n<iframe sandbox=\"allow-scripts\" src=\"test.html\">\n</iframe>\n```\n\nHowever, you can disable JS by omitting the `allow-scripts` set in the sandbox options:\n\n``` html\n<iframe sandbox src=\"test.html\">\n</iframe>\n```\n Ah, I see, a sandboxed iframe has a special origin, so any attempt to access the Jupyter REST APIs would be blocked by the cross-origin protection. Thanks, I didn't know about that :-)\n Another security option that is available includes disabling scripts on specific paths with a more stringent [content security policy](https://developer.mozilla.org/en-US/docs/Web/Security/CSP).\n I think that the general 'treat this as a different origin' security measure should do the trick.\n\n@gnestor does this make sense? I imagine we will need a separate handler at something like `/viewhtml/`, which renders pages something like:\n\n``` html\n<!-- /viewhtml/foo.html -->\n<iframe sandbox=\"allow-scripts\" src=\"/files/foo.html\">\n</iframe>\n```\n\nAnd viewing an HTML file would take you to this page instead of the `/files/` URL. I don't see any way around serving the HTML insecurely at `/files/`, but at least we can make it a bit harder to get there.\n @takluyver Makes sense. Thanks!\r\n\r\n@rgbkrk Could we modify the CSP in lieu of redirecting to a page with an iframe? If so, that seems like a simpler solution...\r\n\r\n@minrk I see that you created the [FileRedirectHandler](https://github.com/jupyter/notebook/blame/master/notebook/base/handlers.py#L593), how would you go about disallowing HTML files from accessing the Jupyter REST APIs? If we went with iframe approach, would it make sense to create a `file.html` template and do something like:\r\n\r\n```py\r\nself.render_template('file.html', source='/files/foo.html')\r\n``` > how would you go about disallowing HTML files from accessing the Jupyter REST APIs?\r\n\r\nI think IFrames are the only way to do this. I'm not sure of the details, though. A properly configured IFrame should prevent access to the API via existing CORS, etc. @minrk Ok, then we'll take that approach. Would you recommend creating a template and doing something like this in `FilesRedirectHandler`:\r\n\r\n```py\r\nself.write(self.render_template('file.html', source='/files/foo.html'))\r\n``` Yeah, a template for the iframe page sounds quite sensible. Ping - are we ready to implement this with the iframe for 5.0? @takluyver Yes, I will do this next. Thanks for the reminder \ud83d\udc4c  Update: \r\n\r\n* Edit button: Edit functionality is currently broken in master, I rebased to https://github.com/jupyter/notebook/pull/2073 and it's working in the PR now (thanks @minrk)\r\n* View button: HTML files use the `/view/filename.html` route which loads the files inside of an iframe to prevent access to the Jupyter API via existing CORS\r\n* I added a test for the new view route\r\n\r\nI would appreciate any feedback regarding tests and UX before merging. OK, let's land this, we can refine things later.","I am having exactly the same problem, since about one week. The only difference is that I am using jupyter on macOS 10.12.1.\nIt \"might\" be related to the latest update of zmq: it has been released on November 4th, and I may have updated (using macports) to this version roughly one week ago.\nSome notebooks that were running fine started crashing, independently on the browser or the status of the machine.\n\n```\n% jupyter --version\n4.2.0\n% python\nPython 2.7.12 (default, Oct 11 2016, 14:42:59) \n[GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.38)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import zmq\n>>> zmq.zmq_version()\n>>> '4.2.0'\n\n```\n\n```\n[I 21:54:12.505 NotebookApp] Kernel shutdown: 9e568d43-960f-4727-bd42-9e079c671b1d\nTraceback (most recent call last):\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/bin/jupyter-notebook\", line 11, in <module>\n    load_entry_point('notebook==4.2.3', 'console_scripts', 'jupyter-notebook')()\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/jupyter_core/application.py\", line 267, in launch_instance\n    return super(JupyterApp, cls).launch_instance(argv=argv, **kwargs)\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/traitlets/config/application.py\", line 658, in launch_instance\n    app.start()\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/notebook/notebookapp.py\", line 1162, in start\n    self.io_loop.start()\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/zmq/eventloop/ioloop.py\", line 183, in start\n    raise e\nzmq.error.ZMQError: Invalid argument\n```\n An update: although I've not accumulated large statistics, it seems that jupyter notebook does not crash if started on a _specific_ file.\nIn other words, if I launch\n`jupyter notebook myfile.ipynb`\nall runs fine.\nIf instead I launch as\n`jupyter notebook`\nand then I pick the _same_ file from the directory, after a while the usual crash occurs.\nI thought to report, as a possible way to keep working while the issue gets pinned down.\n Thanks for the info! I can't think how that would make any difference to ZMQ, but maybe it will suggest something to Min.\n Thanks for the tip! I'll test it out and let you know if that works for me. I've been using jupyter notebooks on a different machine (OSX 10.12, macports install), but with an older version of zmq (4.1.5) and I haven't had any crashes. Looks like this might be specific to zmq 4.2.\n Thanks for confirming that jupyter is stable with zmq 4.1.5 !\nIt is possible to revert to an older port, following the instructions here:\nhttps://trac.macports.org/wiki/howto/InstallingOlderPort\nThe only difficulty for me was determining the revision number: for zmq 4.1.5 one needs\nsvn checkout -r 149404 https://svn.macports.org/repository/macports/trunk/dports/devel/zmq\nIncidentally, I thought that a version 4.1.6 existed, but couldn't find the tag.\n Thanks for the report! It sounds like this is a bug in the recently released libzmq-4.2.0. The relevant call is likely in `zmq_poll`, which has changed quite a bit in zmq 4.2. Indeed it is a bug in the new zmq_poll in 4.2.0, and should be fixed by https://github.com/zeromq/libzmq/pull/2221. I can also make a workaround in pyzmq (https://github.com/zeromq/pyzmq/pull/943). FYI: The update by macports of py-zmq@16.0.2 fixes the issue for me. Thanks @minrk. Thanks, @jwoillez! I also confirm that the issue is fixed with py-zmq@16.0.2, as available now from macports. Awesome! Big thanks @minrk ! Thanks so much for the quick fix, @minrk !","@Carreau Care to review?\n +1, would just calling `fromJSON` to an existing cell have the same effect. Do you need to delete and re-re-create ?\n Also for information to anyone passing by, this should be safe as we don't call clear-output so it's not affected by the [widget security bug](https://blog.jupyter.org/2016/09/26/ipywidget-security-release/)\n Thanks for clarifying that!\n > +1, would just calling `fromJSON` to an existing cell have the same effect. Do you need to delete and re-re-create ?\n\n@Carreau You're right, you don't need to! I will submit a new PR removing that bit!\n","Great ! Thanks !","can you share the code you use to fix this? I'm having a miserable time with the broken scrollbar when trying to view dataframes with lots of columns, this would probably help.  Sam,\u00a0\n\nI don\u2019t have any code to share. I\u2019ve looked around through the Notebook template but I can\u2019t seem to find where they put that setting. That\u2019s why I posted the suggestion.\u00a0\n\nHere\u2019s my workaround though. I do this in Chrome but I\u2019m sure you can figure out something similar in Firefox.\u00a0\n\nI right click the boarder of the DIV container that holds the cells and I select \u201cInspect Now\u201d.\n\nSelec the the container div: \u00a0\u201cnotebook-container\u201d.\u00a0\n\nIn the Elements tab, on\u00a0the right side under the Styles tab.\u00a0\n\nUnder the @Media section you will see \u201cWidth:\u201d click that and change it to a percentage.\u00a0\n\nOn Thu, Dec 08, 2016 at 3:57 PM Sam Zeitlin\n\n<\nmailto:Sam Zeitlin <notifications@github.com>\n> wrote:\n\na, pre, code, a:link, body { word-wrap: break-word !important; }\n\ncan you share the code you use to fix this? I'm having a miserable time with the broken scrollbar when trying to view dataframes with lots of columns, this would probably help.\n\n\u2014\n\nYou are receiving this because you authored the thread.\n\nReply to this email directly,\nhttps://github.com/jupyter/notebook/issues/1909#issuecomment-265853352\n, or\nhttps://github.com/notifications/unsubscribe-auth/AHEqDSn--D7-Bpdp1Vy9_rdUKGNN_-n0ks5rGG9VgaJpZM4K27Ac\n. I suspect the 1140px width comes from somewhere in the Bootstrap styles, or something else we load from an external source, unfortunately. Our styles are written in a series of `less` files, which are then compiled to CSS, pulling in pieces from third party sources.\r\n\r\nYou can probably set a permanent override in `~/.jupyter/custom/custom.css`. You might need a `!important` on it to force it to take precedence over other rules. The `!important` tag is a blunt instrument in CSS terms, so it might mess something else up a bit.\r\n\r\nI'm not sure what the best default is here. For wrappable text, it's generally agreed that you want to limit the maximum width, because it's hard to read very long lines. E.g. Github issues is only taking ~1/3 the width of my screen for this comment, even on a laptop. But I can see that for things like large tables this is frustrating. I ended up doing this:\r\n\r\n`from IPython.core.display import display, HTML\r\ndisplay(HTML(\"<style>.container { width:100% !important; }</style>\"))` Tagging this with the JupyterLab milestone as this is already implemented there. We are not likely to change this in the classic notebook.","Depending on what you are doing, mostly standard Python profiling tools should work, such as the stdlib [profile](https://docs.python.org/3/library/profile.html) module, and [line_profiler](https://github.com/rkern/line_profiler).\n\nSome operations may cause hanging in the _browser_ (e.g. SVG plots with too many elements), in which case using the browser's own profiler tools is a good idea.\n Closing as nothing to do here. \n","fixed by #1916","The highlighting while you're editing markdown is provided by Codemirror's markdown mode, which doesn't know about the `$math$` bits, as that's an ad hoc extension to markdown syntax. When you render the cell, it should show up correctly. So it's not exactly intended behaviour, but it's a limitation we know about.\n\nSomeone may be able to write an extended Markdown mode for Codemirror which knew about this syntax. I think we'd be happy to include the code if someone did that, but it's not high on our priority list.\n I see -- many thanks for your quick response!\n It looks like the extension @takluyver is talking about is already in use: https://github.com/jupyter/notebook/blob/666ecbf35c3310335a3c8c182e8f53441c991c14/notebook/static/notebook/js/codemirror-ipythongfm.js\r\n\r\nIn the extension both `$` and `$$` are declared as delimiters. The problem, as the comment in the code says, seems to be that defining `$` as a delimiter for the LaTeX mode causes the `$$` to be interpreted as two consecutive `$` delimiters instead of a single `$$` one.\r\n\r\nI will investigate the possibility of a workaround.","Self merging, since this is rather trivial.\n","Hi, the best place to ask this questions is likely over on the pandas GitHub org, but maybe we can help a bit. Do you have pandas installed? If so, you can read a data from as such:\r\n\r\n```python\r\nimport pandas as pd\r\n\r\ndf = pd.read_csv('filename.csv)\r\n```\r\n\r\nThis notebook may also help:\r\n\r\nhttp://nbviewer.jupyter.org/github/jvns/pandas-cookbook/blob/v0.1/cookbook/Chapter%201%20-%20Reading%20from%20a%20CSV.ipynb","I think you're probably right that if `--port` is specified but unavailable, the server should fail rather than picking another port. The way it currently works is probably just because the code that discovers that a port is in use doesn't know whether that port was specified at the command line or not.","We've discussed this multiple times, and there's an [extension](http://jupyter-contrib-nbextensions.readthedocs.io/en/latest/nbextensions/python-markdown/readme.html) that tries to do it. We don't want to implement it in the notebook directly until CommonMark agrees on a decent extension syntax for Markdown, so we're not just introducing extra ad-hoc additions to the markdown syntax. Ok thanks so much!\n\n> On Nov 22, 2016, at 11:53 AM, Thomas Kluyver notifications@github.com wrote:\n> \n> We've discussed this multiple times, and there's an extension http://jupyter-contrib-nbextensions.readthedocs.io/en/latest/nbextensions/python-markdown/readme.html that tries to do it. We don't want to implement it in the notebook directly until CommonMark agrees on a decent extension syntax for Markdown, so we're not just introducing extra ad-hoc additions to the markdown syntax.\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub https://github.com/jupyter/notebook/issues/1915#issuecomment-262297158, or mute the thread https://github.com/notifications/unsubscribe-auth/AF5Q_CFwKHJqZ4ZTMspDfvAb7yczz8V-ks5rAx4cgaJpZM4K5q33.\n","Thanks for the help, @minrk!  Thanks, @alexandercbooth! Welcome to Jupyter \ud83d\ude80  Thanks, @minrk! I've been using Jupyter for ages and I'm thrilled to start contributing!  Yay @alexandercbooth!","<del>ignore appveyor failure - appveyor shouldn't be running on 4.x.</del>\r\n\r\nswitched appveyor to whitelist of branches, only master at the moment. Min adding in min","I like the idea, but I don't want to make more ad-hoc extensions to Markdown syntax. We're hoping that CommonMark will come up with a proper extension syntax.","jupyter/notebook#355 will make mathjax non-optional so --no-mathjax will not make sens. \n","@gnestor this is marked as 4.3, but #1776 isn't. Presumably they should both have the same target, unless I misunderstood something. Are we doing this in 4.3 or 5.0? Oh right, we had a discussion about this and decided to bump it to 5.0. Thanks @minrk!","Do you mean the Fedora package, or the Python package? I think it would be great for this to be part of the fedora/debian package (note: it should be `jupyter notebook` not `ipython notebook`). For reference, I have a .desktop file in nbopen, which is principally to support opening .ipynb files from a GUI file explorer (so it doesn't actually show up in the menu):\r\n\r\nhttps://github.com/takluyver/nbopen/blob/master/nbopen/nbopen.desktop I mean the Python package. I would prefer using a desktop file with an proposed and supported startup method by you. Maybe something like the `nbopen.desktop` file would work in this case too.\r\n(yes, that bug and the Fedora ipython package is a bit older, it will be `jupyter` and not `ipython` at the end :)) Adding `jupyter notebook %f` would be good for launching a notebook server in a given directory. It would be even better if it did what nbopen does, and launches IFF one doesn't already exist, and opens if not.","I think someone else had this issue recently, and we realised there was a need to touch files periodically so they weren't cleaned up. I can't immediately find the issue now, though. Oh, after your comment I investigated if the files in `/var/run/user` get cleaned up by other programs (not jupyter itself), and it turned out OS removes this directory content every time I disconnect (I run jupyter on a remote server, accessed via ssh)! So, I changed the directory for jupyter by running `XDG_RUNTIME_DIR= jupyter notebook --no-browser` instead of just `jupyter notebook --no-browser` - so it keeps its files in another location. Looks like no problems now. That's annoying. It's supposed to be left there as long as you're logged in, which I would take to include while there is still any program running as your user.\r\n\r\nI'm reopening this because it's probably something we need to handle. I just ran into this same issue on my local cluster. Am asking our support team to figure out why.\r\n\r\nJust out of curiosity, are you using SGE, @aplavin ? So my case ends up being a bit different. Appears `XDG_RUNTIME_DIR` is set to a non-existent directory. In any event, I expect whatever solution used to solve the OP's problem will solve mine.","Should be moved to nbconvert","@abast , This would be so great. I come across that a lot too !\r\n\r\nOne way I get through it is to press `ESC` then `R` to make the cell Raw and then `Y` to make it a code cell again.\r\n\r\nNow, `ESC` -> `R` -> `Y` is natural to me whenever I want to delete the outputs of the cell :)\r\n\r\nWould love to have a shortcut or a click-path as you mentioned ! @Carreau has been working on an interface to allow easily setting up custom keyboard shortcuts. Matthias, is that going to be in 5.0? It is (see help menu) but I think it is broken right now.\n\nOn Dec 21, 2016 07:47, \"Thomas Kluyver\" <notifications@github.com> wrote:\n\n> @Carreau <https://github.com/Carreau> has been working on an interface to\n> allow easily setting up custom keyboard shortcuts. Matthias, is that going\n> to be in 5.0?\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/1925#issuecomment-268556027>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUez8rWYWKNsJP-zEWTh6UerQLqzK4Hks5rKUoLgaJpZM4K98Bj>\n> .\n>\n It would be awesome to have a shortcut for clearing all cells as well as a single cell In current master you can setup your own shortcut in the UI. \r\nExample of Ctrl-O, Ctrl-Shift-O for one cell/ all cells:\r\n![screen shot 2017-02-06 at 12 31 55](https://cloud.githubusercontent.com/assets/335567/22665089/5418f5f6-ec68-11e6-8501-1c0fa5008fd9.png)\r\n\r\nClosing as customisable now. \r\n","I think you need to install at least `ipykernel` inside the environment for it to be found. @damianavila and @bollwyvl might know more. Yep, that's correct, you need ipykernel on your `ker` environment... nb_conda_kernels will detect it and create the proper kernelspec. Thanks @takluyver @damianavila , works like a charm :)\r\n","How slow is it in the standard Python interpreter? It's very slow.\r\nIt might have something to do with graphlab I use ? It's not clear if there's anything for us to do here. Maybe you're just running something that takes a while? There's no obvious reason that the notebook should make execution any slower. I'm running some (data modelling) code in Jupyter notebook which after execution makes everything painfully slow (e.g. 5-10 secs to execute a cell, 3-4 secs for autocomplete etc). I checked with the standard IPython and there is no such problem there, so I assume it's not the code itself but something on the end of Jupyter? HI @xsway, is your code producing a lot of text or visual output in the Notebook? No, I removed all logging just in case. I also tried with FIrefox and Chrome, both are slow. Are you logging in to a remote server, or did you launch it from your machine? My local machine. Using the built in Python kernel? I think so, but I'm not completely sure. It's the one with this record in .ipython/kernels/python3/kernel.json\r\n\r\n` \"display_name\": \"IPython (Python 3)\", \r\n \"language\": \"python\", \r\n \"argv\": [\r\n  \"python3\", \r\n  \"-c\", \"from IPython.kernel.zmq.kernelapp import main; main()\", \r\n  \"-f\", \"{connection_file}\"\r\n ],` Can you share any example code or which libraries you are importing from? I'm using PyMC3 for Bayesian modelling which I thought initially was the source of the problem, since it's quite slow sometimes and uses some theano computations and variable locking. However, in standard IPython interpreter everything works fine after my code execution. So it shouldn't be my code's problem, right? It could be that the code \"finishes\" but is still processing in a thread, but presumably you'd see that in the IPython interpreter as well.  There is some overhead to sending the data back and forth to the browser, but it shouldn't be as different as what you are seeing if there is not a lot of output showing on the page.  I'm afraid I may be out of ideas. I've noticed that as iPython notebooks become longer Jupyter inevitably gets slower. Is there ever going to be  a way around this given Jupyter is running in the browser? Hi I am having a similar issue. I had been able to run this code before without any problem. Now it gets stuck on the second cell. I have pasted the code.\r\n\r\n```python\r\nimport os\r\n\r\nimport numpy as np\r\nimport cv2\r\nimport matplotlib.pyplot as plt\r\nimport matplotlib.image as mpimg\r\n# %matplotlib inline\r\nimport glob\r\n%matplotlib qt\r\n\r\n\r\nobjpoints = [] #3D points in real world space\r\nimgpoints = [] # 2D points in image plane\r\nnx = 9 # inner x corners\r\nny = 6 # inner y corners\r\nobjp = np.zeros((nx*ny,3),np.float32)\r\nobjp[:,:2]= np.mgrid[0:nx,0:ny].T.reshape(-1,2)\r\n\r\n\r\n# #read in and make a  list of calibration images\r\nimages = glob.glob('camera_cal/calibration*.jpg')\r\n\r\n\r\n\r\n# read through all calibration images\r\nfor fname in images:\r\n#     img = cv2.imread(fname)\r\n    img = mpimg.imread(fname)\r\n    # Convert to grayscale\r\n#     gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY) # if using cv2.imread()\r\n    gray = cv2.cvtColor(img, cv2.COLOR_RGB2GRAY) # if using mpimg.imread()\r\n    # Find the chessboard corners\r\n    ret, corners = cv2.findChessboardCorners(gray, (nx, ny), None)\r\n    if ret == True:\r\n        imgpoints.append(corners)\r\n        objpoints.append(objp)\r\n\r\n        cv2.drawChessboardCorners(img, (nx, ny), corners, ret)\r\n        cv2.imshow('img',img)\r\n        cv2.waitKey(500)\r\n\r\ncv2.destroyAllWindows()`\r\n\r\n`# gray.shape[::-1]returns heidth and width of grayscale\r\n# could also use img.shape[0:2] for color image\r\nimg = mpimg.imread(images[1])\r\nimshape = img[:,:,2].shape[::-1]\r\nprint(imshape)\r\nret, mtx, dist, rvecs, tvecs = cv2.calibrateCamera(objpoints, imgpoints, imshape,None,None)\r\nundst = cv2.undistort(img, mtx, dist, None, mtx)\r\n\r\n%matplotlib inline\r\nf, (ax1,ax2) = plt.subplots(1,2,figsize=(10,5))\r\n\r\nax1.set_title('Original')\r\nax1.imshow(img)\r\nax2.set_title('Udistorted')\r\nax2.imshow(undst)\r\n```\r\n\r\nNothing in my code changed. What else could have changed.","Heh, I notice this as well and it manifests mostly when I'm demoing a notebook or recording a screen capture. I'll delete the last cell for the sake of cleanup then.\r\n\r\nHowever, when I'm exploring the notebook I'll keep lots of empty cells around. Plenty of freedom to be messy -- I would be bothered by auto-cleanup. tldr; sounds like you should be fine if you have lots of empty cells around, since this wouldn't affect most of those cells (none of them if multiple cells are at the end).\r\n\r\nI understand keeping empty cells around; but this actually wouldn't affect that in most cases. Any cells in the middle would be untouched. The solution I proposed was not removing anything if there were at least 2 cells at the end.\r\n\r\nI had originally proposed it be off by default, but now that I'm thinking about it, there's a good case for making it default. It actually wouldn't affect anyone who likes keeping lots of cells around at the end, and if it were default it would make more people's demo'd/example/screencast/expository/documentation notebooks nicer to look at.\r\n\r\nAnd, if the feature were on by default, the thought was it'd always be possible to just turn this off using a configuration option.\r\n\r\nBonus: it sounds like you could achieve both the upside at the same time as preserving your workflow. I.e., my guess is you wouldn't be bothered in practice because the auto-cleanup wouldn't affect any of your \"middle\" cells (preserving exploration) and it would only remove at most one at the end (and only if there was exactly one, that you hadn't been interacting with). That one cell being deleted would be as easy to recreate as it is to navigate to the cell; just one keystroke (assuming you're either using the keyboard shortcuts or autocreating cells by executing code with \u21b2). Yeah I deal with those empty cells as well. Note sure how to handle this in a reasonable way though - much of the time there are there because I am still working and use them shortly.","Ok\u2026so sourcecode is an alias of code-block. Exists going back a long time. Given the difficulty of noticing this as mentioned in the [sphinx docs](http://www.sphinx-doc.org/en/1.4.9/markup/code.html#directive-code-block) I'm going to suggest that we switch to using `code-block::` rather than using `sourcecode::` just as that is more standard & widely used and easier to find at when searching the internet for resources related to potential documentation bugs.  Addressed by #1930","@takluyver @minrk I just tested this locally and it works.  :D \n Is it feasible to add a test with a failing nbextension?\n @minrk last commit adds a test\n ....and it fails\n Looks like nothing calls `load_ipython_extension` in the new code.\n\nIt also seems strange that `load_extensions()` takes paths without `nbextensions/`, but `load_extension()` takes a path with the `nbextension/` prefix already added. They should be consistent, whichever way we prefer.\n :+1: \n Would merge but I feel like it's bad luck to merge one's own PR :wink: \n \n[![Coverage Status](https://coveralls.io/builds/10869389/badge)](https://coveralls.io/builds/10869389)\n\nChanges Unknown when pulling **fbae11d3349f09c70a96b4aea5f8d35b51a38e5e on jdfreder:loadfix** into ** on jupyter:master**.\n","\ud83d\udc4d ","Where does it say that? There are a variety of places error messages can appear, and without a useful error message, knowing where it appears is a good start.","It sounds like you're talking about the properties of a Windows shortcut? Do you have another computer which you could compare it against? Ah yes, sorry. This is on Windows 7 - 64 bit. I don't have one now, but I could install anaconda on a separate computer and see what the paths are.\r\n\r\nGood idea.  Ok, so I've done this and this is the problem I had last time.\r\n\r\nWhen you go into the properties, the text box must have a limit because it cuts off. Here is the list of files in the target:\r\n\r\nC:\\Users\\sdouglas\\AppData\\Local\\Continuum\\Anaconda3\\python.exe C:\\Users\\sdouglas\\AppData\\Local\\Continuum\\Anaconda3\\cwp.py C:\\Users\\sdouglas\\AppData\\Local\\Continuum\\Anaconda3 \"C:/Users/sdouglas/AppData/Local/Continuum/Anaconda3/python.exe\" \r\n\"C:/Users/sdouglas/A\r\n\r\nAs you can see the last one is cut off. I didn't do this, the properties does this and if you hit \"Apply\" it will cut off the path and stop working.\r\n\r\nIs there another way to get this information and update this? Is there a way to simply reinstall jupyter notebook without reinstalling Anaconda? You could try `conda remove notebook` and `conda install notebook`. It's a bit rubbish that it gets cut off, but I don't think there's anything we can do about it - Anaconda is creating any start menu shortcuts, not us. Thanks, I'll give that a try.\r\n\r\nI should note, the program does still work if I simply use the command line and set my cd and run Jupyter Notebook. The above problems are from using the Notebook link saved to my desktop.  Closing as I don't think there's anything for us to fix here.","I'm inclined to say sorry, but no to further additions to Markdown syntax, even if they're now the recommended way to delimit maths in Latex. The more special exceptions we add to Markdown parsing, the messier it gets. Thank you for taking the time to make a pull request.\r\n\r\nThe primary reason we can't support `\\[` is that it is valid Markdown/CommonMark for an escaped bracket.\r\n\r\n[As written](https://talk.commonmark.org/t/mathematics-extension/457/18?u=rgbkrk) by @jgm:\r\n\r\n> ...the problem with that syntax is that `\\[` and `\\(` already have clearly defined meanings: they are escaped `[` and `(` characters, and it is very important that there be a way to escape these characters in certain circumstances.\r\n\r\nWe all want to support mathematics typesetting. For jupyter maintainers and operators of notebook server deployments, we can't support extensions to the syntax that are unambiguous. This does mean having to wait it out for others to solve within CommonMark or getting involved there.\r\n All that being said, it's worth looking at \r\n\r\n> `\\[ \\]` and `\\( \\)` are not recognized as maths delimiters, and the equations not correctly displayed.\r\n\r\nas a usability issue where the notebook could detect likely LaTeX and provide a notification/suggestion to use `$$` and `$`. I'm not volunteering to write that though. :wink:","This is not related to the socket that we open on port 8888, but a 'waker' socket which tornado itself creates. It looks like there is at least one bug in tornado (the `TypeError: 'OSError' object is not subscriptable` error), though I'm not sure whether that would fix the problem you see.\r\n\r\nCan you try reporting that traceback on https://github.com/tornadoweb/tornado/issues ? Feel free to ping me on the issue when you do. Thank for your answer @takluyver \r\nI have not used tornado before so I readlly don't know what the traceback mean . I will report that traceback on /tornado/issues. Hope someone know what is wrong. The traceback is the bottom 2/3 of what you posted above: it shows what code was running when the error happened. I found the reason! I install COMODO mouths ago and  shortly after that uninstall it. However, I never thought it would still work for my computer. Even I close my windows defender and firework, the uninstalled COMODO still prevent my computer for some specific connection. The solution way is: \r\n1. Open the Network Connections folder and view available connections.\r\n2. Right-click the connection that you want to configure, and then click Properties.\r\n3. on the General tab, under This connection uses the following items, uninstall the item include \"comodo\".\r\nAll the problems above were solved! Thanks for the follow up. Closing this since the error was worked out.","Not quite sure what it depends on (maybe the shell?), but on a Linux system this is handled correctly as is:\r\n\r\n```\r\n$ echo $(jupyter --data-dir)/foo\r\n/home/takluyver/.local/share/jupyter/foo\r\n``` On my system, Jupyter is installed on Windows and I use Cygwin to interact with Jupyter with hardly any issues except this one.\r\nEchoing is not the same as making the directory.\r\n\r\nMy echoes are\r\n```\r\n$ echo $(jupyter --data-dir)/foo\r\n/foosers\\andre\\AppData\\Roaming\\jupyter\r\n$ echo $(jupyter --data-dir)\r\nC:\\Users\\andre\\AppData\\Roaming\\jupyter\r\n```\r\nAs shown above the newline caused foo go to the front.\r\nI honestly never see this case before and so I assume that the path string never need a newline or EOL in most cases. I am not sure what we need to do on this one...let us know if you are able to make any progress with it...","It definitely sounds like the origin check shouldn't happen for CSP reports.\r\n\r\nAs for authentication, I'm unsure. I'd lean towards authenticated to mitigate any external API usage \"lying\". @rgbkrk thanks, I'll disable origin check, but keep auth @minrk Does this need to be backported before releasing 4.3? Backported","CC @dmadeka Perhaps `log()` doesn't have to be a function? I'm not sure what the specific lifetime concerns are with the application initialization check. @minrk - would the following work just as well?\r\n\r\n```\r\n    if Application.initialized():\r\n        log = Application.instance().log\r\n    else:\r\n        log = app_log\r\n```\r\nat the top level? @jasongrout `FileFindHandler`, which you're modifying, inherits from `IPythonHandler`, which defines the `log` property. So you should be able to use `self.log.debug(...)`, I think, without needing an extra function.\r\n\r\nThe application won't be initialised at import time, so putting that check at the top level of the module wouldn't work. Arg, I wrote a whole comment last week, but apparently GitHub lost it. What @takluyver said - module-level initialization won't work because import happens too early. This function is fine as-is. @takluyver it's needed here because this method is required to be a classmethod. @jasongrout Does this need to be backported before releasing 4.3? Backported","Thanks, #1947 should fix it.","Sounds like a good idea to me. I'll leave this for a little while for other people to look at.","I am not seeing this in master, but I do see that when I refresh the file browser view it does reset the sorting.","Hi @fonnesbeck, this may be related to https://github.com/jupyterlab/jupyterlab/issues/522, are you using Safari < 10.0 by chance? I am using Safari, but I am on 10.0.2. \r\n\r\nHere is an animation of the behavior:\r\n\r\n![](http://d.pr/i/kjFK+)\r\n\r\n Bummer, that is the same symptom we saw in JupyterLab, but switching to 10.0 on Safari fixed it for me.   Do you mean that you installed from a source checkout?  If so, what is the output of `git describe`? I've installed from git master via pip this afternoon:\r\n\r\n     pip install -U git+https://github.com/jupyter/notebook.git\r\n What does `jupyter notebook --version` say? 4.2.3 When I run the same commands from a fresh conda env I get `5.0.0.dev`.  It looks like something else is shadowing version you tried to install this afternoon. In either case, I can't reproduce the issue from either `5.0.0.dev` or `4.2.3` from PyPI, both in fresh environments using Safari 10.0.1.  Hopefully someone else has further ideas. I'm on `5.0.0.dev` now, and the behavior persists. Editing markdown cells is not viable on Safari. Moving the conversation to https://github.com/jupyter/notebook/issues/1967","This is a security measure which we implemented recently. The terminal where you started it should provide a URL containing a token which you can copy and paste into chrome.\r\n\r\nWe should add a way to get this token inside the interface, in case you're not interacting with it through a terminal. Where can one read up on this new security measure? It isn't mentioned in the [securing the notebook server](http://jupyter-notebook.readthedocs.io/en/latest/public_server.html#securing-a-notebook-server). Release notes only say \"Enable token authentication by default\" without further information.\r\n\r\nI observe an obvious downside of the token auth: the open tabs stop working across server restarts, and one cannot bookmark frequently used notebooks. I realize these problems will resolve automatically in jupyterlab, but I wonder what to do in the meantime. Searching through the rest of the docs, I only see an extremely brief mention [over here](http://jupyter-notebook.readthedocs.io/en/latest/config.html?highlight=token) without an explanation of security implications beyond\r\n\r\n`Setting to an empty string disables authentication altogether, which is NOT RECOMMENDED.` After upgrading to version 4.3.0 there is a bug in the code or the docs. The docs tell us that the default value for the token is an empty string and this seems not the case with version 4.3.0. Well, thank you very much guys for breaking the Dataproc deployment. Sorry about this disruption. Allow me to explain a bit why we've made this change.\r\n\r\nIssue #1830 pointed out that an attacker running a malicious DNS server can get round the same-origin requirements which browsers normally impose. It seems likely that this would apply to Jupyter running in its default configuration on localhost. If so, the practical upshot of this would be that a malicious website could use your browser to communicate with Jupyter and run code on your system.\r\n\r\nThis reminded us of a less severe problem that we've been aware of for a while: on a system with multiple users logged in, any user can access any other user's notebook server which is not protected by a password.\r\n\r\nNeither of these should be a problem if you're running in Jupyterhub, or if you have configured the notebook with a password. But many people (myself included) use the notebook in its default configuration: listening on localhost with no password, trusting that either we're the only one logged in to the machine, or we can trust anyone else who may log in.\r\n\r\nSo the token mechanism is intended to restrict access to the server while inconveniencing the standard user as little as possible. When you start the server, it generates two tokens: one reusable, one one-time. The reusable one is shown in the terminal (or log) to use when connecting another browser. The one-time token is used to open the notebook in the primary browser - opening a URL involves passing it as a command line argument, which on some platforms is visible to other users, so we don't pass the reusable token. When the browser provides either token in the URL, the server gives it a cookie to authenticate future requests.\r\n\r\nAttackers using the DNS trick, and other users sharing the system with you, should not know either an auth cookie nor a usable auth token, so the server will deny their requests.\r\n\r\nWe know a change like this is going to cause some pain, but we think it's necessary to fix a rather nasty security problem. We'll do our best to help you figure out how to make it work with your use cases.\r\n\r\n@viaregio The token is randomly generated each time you start the server, so there isn't really a fixed default. Unfortunately the autogenerated config docs don't know about that. @takluyver Seems as if this would be helpful to clarify in the docs. Perhaps either in the [security section](https://jupyter-notebook.readthedocs.io/en/latest/security.html#security-in-jupyter-notebooks) or [configuration overview](https://jupyter-notebook.readthedocs.io/en/latest/config_overview.html) - not autogenerated text. Going to label as a doc issue. Agreed, thanks Carol. We were being cagey about the reasoning until we'd made a release because we didn't want to draw attention to how it might be exploited. Thank you for tackling this. #1972 improved the docs. I'm going to close this one now, but we can continue to use the comments to discuss it. Thanks @takluyver \ud83c\udf68  Thanks mostly to Min on the docs work. I'll pass the ice cream on to him: :ice_cream: ","Can I ask someone with more understanding of our JS infraststructure than me to double check this? Thanks! Looks great.","You probably need to install pulp. If you think you've already installed it, it was probably in a different Python or a different environment from the one in which your kernel is running.","Seems like a good option. @takluyver Does this need to be backported before releasing 4.3? Sure. I think it's a minor bug, but it's also a simple fix. Backported","@flying-sheep is this something we already know about for IRkernel? we had that bug ages ago. @dvigneshwer what versions of IRkernel, IRdisplay, and repr do you use? ![image](https://cloud.githubusercontent.com/assets/5075497/20915214/68aa9324-bbaa-11e6-8353-fb7d26d22a95.png)\r\n\r\n![image](https://cloud.githubusercontent.com/assets/5075497/20915247/993c8916-bbaa-11e6-891e-edf29a330e8b.png)\r\n\r\nI don't think its an IRkernel problem, as for my other users in JupyterHub the output is getting propogated, only for a particular user this problem is araising. ( Using the PAM authenticator module ) \r\n can you update all the R packages? They\u2019re all old. I don't think its the R package problem as my other jupyterhub users are getting the error populated, only for one user this problem is coming.\r\n\r\n@flying-sheep @takluyver can you guys suggest any ways by which I can debug this issue ?  ah ok. what\u2019s different for that user then? shouldn\u2019t everything be the same when using jupyterhub?\r\n\r\nabout system-level output not appearing in the notebook:\r\n\r\nthis is a [known problem](https://github.com/jupyter/notebook/issues/1461) which will be fixed by https://github.com/jupyter/enhancement-proposals/pull/14 I am also wondering the same, how system level users will affect the jupyterhub platform. The services should ideally be same for all, really perplexed about the fix here.","Backported","This is because the trust action is actually part of a save, which you don't have permission to do if it's read-only. I'm not sure if we can find a way to trigger trust without re-saving the notebook.\n As I wrote in the comment: running `ipython trust xyz.ipynb` can work. Why trust should be part of a save? It just adds a signature to .ipython folder.\n Until recently, the signature was stored in the notebook requiring a save. Now that it's moved to a separate database, the impediment is that there's no REST API for triggering signature other than the save API on the contents service. With how it works now, though, we could add an explicit trust endpoint that doesn't need write access to the notebook.\n what about a simple js `IPython.notebook.kernel.execute('!ipython trust ' + sharedpath[sharedpath.length-1])`\n > what about a simple js IPython.notebook.kernel.execute('!ipython trust ' + sharedpath[sharedpath.length-1])\n\nThe kernel is not on the same machine that the notebook. \nThe kernel might not be IPython kernel.\nThe kernel might not be python at all. \nThe user of the kernel might not be the user of the notebook. \nThe notebook might not be stored on disk, but in a DB on server. \n ok ok, you win\n I know it's might not be always easy to see the all architecture at once, we don't ask user to understand everything, but the `IPython.notebook.kernel.execute('!ipython trust ' + sharedpath[sharedpath.length-1])` was a nice try :-) \n There is a Python API for it, we would just need to expose an endpoint for it on the web server, if we decide to go that way.\n","[nbmanager](https://github.com/takluyver/nbmanager) is similar to what you want. It provides a GUI rather than a command line interface, but the module `nbmanager.api` is general purpose and could be reused to make command line UI. sometimes, we manage Jupyter through SSH on remote server..... no GUI There is a `jupyter notebook list` command for listing running notebooks. There isn't a corresponding terminate, though.","I've added updating the changelog to the checklist. :-) JS test results:\r\n\r\n```\r\ngrant:notebook grant$ python -m notebook.jstest\r\n\r\nTest group: base\r\nRunning tests with notebook directory '/var/folders/wg/yhdj316j4hs2_z5s0_5_k0tc0000gp/T/tmpgyx_ksqq'\r\n\r\nTest group: mockextension\r\nRunning tests with notebook directory '/var/folders/wg/yhdj316j4hs2_z5s0_5_k0tc0000gp/T/tmpl_s_px4h'\r\n\r\nTest group: notebook\r\nRunning tests with notebook directory '/var/folders/wg/yhdj316j4hs2_z5s0_5_k0tc0000gp/T/tmpfjgom03o'\r\n\r\nTest group: services\r\nRunning tests with notebook directory '/var/folders/wg/yhdj316j4hs2_z5s0_5_k0tc0000gp/T/tmpcx163ln8'\r\n\r\nTest group: tree\r\nRunning tests with notebook directory '/var/folders/wg/yhdj316j4hs2_z5s0_5_k0tc0000gp/T/tmplz40_ce3'\r\n\r\n______________________________________________________________________\r\nTest suite completed for system with the following information:\r\nPython version: 3.5.2 | packaged by conda-forge | (default, Jul 26 2016, 01:37:38) [GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.54)]\r\nsys.executable: /Users/grant/anaconda/bin/python\r\nPlatform      : Darwin-16.1.0-x86_64-i386-64bit\r\n\r\nTools and libraries available at test time:\r\n   casperjs phantomjs\r\n\r\nTools and libraries NOT available at test time:\r\n   slimerjs\r\n\r\nStatus: OK (5 test groups). Took 9.663s.\r\n``` Python test results:\r\n\r\n```\r\nRan 219 tests in 29.641s\r\n\r\nOK (SKIP=1)\r\n``` @Carreau @takluyver I am ready to cut a release! Let me know if there is anything else we should do before.... I would just send a mail to the mailing list warning that it's their last change to complain. \r\n\r\nOr just do it. We can still do 4.3.1 if things go south. \r\n I think we should call it for this release and not accept any more commits and then we can always release patches and potentially another minor release before 5.0. I assume that this release will require a blog post? We can share the blog post with the mailing list once it's live.\r\n\r\nDo you know how to test a `wheel` and an `sdist` locally? Yes, you can just `pip install <path to wheel>` or `<path so sdist>`, technically `<path to sdist>` now build a wheel and install the wheel if possible.  Ok, that worked, although I'm not sure if I'm testing the wheel now or my dev install... How can I tell?\r\n\r\nIt looks like don't have push privileges for notebook on PyPI: \r\n\r\n`HTTPError: 403 Client Error: You are not allowed to upload to 'notebook'. for url: https://upload.pypi.org/legacy/`\r\n\r\nCan you give me permissions? Added @gnestor on PyPI @Carreau Ok, I've done everything except upload to PyPI and push the tag to GH. Would you like to have the honors of uploading and I'll push the tag after it's uploaded and tested and working? I'm mostly in meeting this afternoon, please feel free to push, and tag.\n\nYou did all the work!\n\nOn Dec 8, 2016 13:32, \"Grant Nestor\" <notifications@github.com> wrote:\n\n> @Carreau <https://github.com/Carreau> Ok, I've done everything except\n> upload to PyPI and push the tag to GH. Would you like to have the honors of\n> uploading and I'll push the tag after it's uploaded and tested and working?\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/1951#issuecomment-265861809>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUezy1Ws560aIRP8DaLmoCOtif985h9ks5rGHd1gaJpZM4LFkrr>\n> .\n>\n GH: https://github.com/jupyter/notebook/releases/tag/4.3.0\r\nPyPI: https://pypi.python.org/pypi/notebook/4.3.0 Thanks everybody here and elsewhere (we need a @jupyter/notebook team for this instance) who contributed to this release!\r\n\r\nWhen you have a chance, please install from PyPI and test. Everything seems to be working fine for me...\r\n\r\n@Carreau Do we need to publish a blog post about this? Or publish anywhere else? Wait! I have some major bugfixes I'm working on right now necessary to implement an Output widget. Or we can release 4.3.1 immediately, I suppose. There are some subtle problems with async and comm messages that I'm fixing right now. @gnestor are you sure those JS tests actually ran? 10 seconds seems suspiciously short; on Travis they take multiple minutes. I know Travis is quite slow, but that seems like a big disparity. > @Carreau Do we need to publish a blog post about this? Or publish anywhere else?\r\n\r\nWe do send a message on the jupyter mailing list, we can also post something on the Ghost Blog. \r\n\r\nlet's give jason a chance to @jasongrout to fix things. And also warn @willingc that a minor revision is out.  @jasongrout Standing by...\r\n\r\n@takluyver I just tried running again and I'm getting a lot more output than originally (above), so maybe they didn't run \ud83d\ude2e. I did receive a Travis notification that the [4.3.0 build passed](https://travis-ci.org/jupyter/notebook/builds/182420340). I will report the results when they finish... @takluyver My tests are are all timing out for some reason:\r\n\r\n```\r\nFAIL 9 tests executed in 51.493s, 0 passed, 9 failed, 0 dubious, 0 skipped.     \r\n\r\nDetails for the 9 failed tests:\r\n\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/highlight.js\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/highlight.js\r\n    uncaughtError: Wait timeout occured (10000ms)\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/highlight.js:137\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/highlight.js\r\n    uncaughtError: Couldn't find popup with url containing ''\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/keyboard.js\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/highlight.js\r\n    uncaughtError: Wait timeout occured (10000ms)\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/keyboard.js:137\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/keyboard.js\r\n    uncaughtError: Couldn't find popup with url containing ''\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/misc.js\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/keyboard.js\r\n    uncaughtError: Wait timeout occured (10000ms)\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/misc.js:137\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/misc.js\r\n    uncaughtError: Couldn't find popup with url containing ''\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/security.js\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/misc.js\r\n    uncaughtError: Wait timeout occured (10000ms)\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/security.js:137\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/security.js\r\n    uncaughtError: Couldn't find popup with url containing ''\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/utils.js\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/security.js\r\n    uncaughtError: \".CodeMirror-code\" still did not exist in 10000ms\r\n``` It would be great if we could get #1956 and #1958 reviewed and in. I just made a 4.3.1 milestone and added the two PRs above to it. @jasongrout #1958 is a new feature, and the related display_id changes aren't targeted for 4.x, so I'd probably say #1958 should be in 5.0, not 4.4. So, are we going to wait for 4.3.1 to make in ANN in the list or a blog post? @damianavila It sounds like that's the plan. I'm tracking the 4.3.1 release here: https://github.com/jupyter/notebook/issues/1974 Thanks for the info @gnestor!","@Carreau @takluyver This is a non-breaking change that I'd like to squeeze into 4.3 before releasing. It makes nbextension registration more consistent with labextension. Looks OK to me. @Carreau, you added this method, so I'll let you OK the change. Oh, nvm. @gnestor made the PR to add it, @Carreau merged. I think this is fine, then. Go ahead and backport it. Backported \ud83d\udc4d ","This fixes ipython/ipywidgets#844 \ud83d\udc4d \ud83c\udf70  it works! Thanks @jasongrout ! just waiting for the travis tests to pass... I don't think it's node + promises that are failing - I think it's the casper based tests. Thanks. You can tell I'm taking a lot of shots in the dark. At first I thought it was phantom not supporting promises, but Slimer didn't seem to help much. Ah, this might be the issue, since we are using the babel-loader for some reason: https://github.com/babel/babel-loader#note-transform-runtime--custom-polyfills-eg-promise-library I think this is ready to go now. Instead of putting the polyfill on the page, I'm still including it in the webpack bundle, but this time as an explicit polyfill file instead of trying to use the ProvidePlugin mechanism.\r\n\r\nWhen we switch away from using the babel-loader, I think we can reconsider using this approach. HUZZAH! \ud83c\udf6a for @jasongrout ! @gnestor I marked this as 5.0, because it's webkit-related. The webkit stuff isn't in the 4.x branch. @jasongrout is there still something to do for the 4.x branch? I think we're probably good - I wasn't seeing an issue on 4.2.x, at least.","The `backports` namespace package seems to cause problems occasionally; we haven't worked out the root cause, but generally finding and removing all `backports.something` packages, then reinstalling those you need, makes it work.\r\n\r\nThe idea of a namespace package is that the different packages in it can be installed in different places on your system. But if one of those gets it wrong, it can hide other packages so import can't find them at all. Okay, yeah I figured it was some packages hiding somewhere, based on previous things you've written on the topic (thanks, btw).  \r\n\r\nI don't know if there's a causal link here, but I ran:\r\n\r\n`sudo -H pip freeze | sudo -H xargs pip uninstall -y` \r\n\r\nto remove all packages/modules, and after re-installing `jupyter` and a few other packages, `jupyter` appeared to run fine. \r\n\r\n\r\nA shame none of the full-purge steps I tried managed to get _all_ modules, but glad it works now. thanks @takluyver !","Thanks!","@williamstein, @haraldschilly - can you check to see if this change fixes your issue? +1 to doing this.  If this code works at all, it'll fix our issue, since on Firefox (when using fromJSON), we were getting fontSize is undefined tracebacks.   I'm not sure what the workflow would be for testing this properly...  \r\n\r\nThis issue on our side https://github.com/sagemathinc/smc/issues/1343 -- it would be nice if somebody could comment on https://github.com/sagemathinc/smc/issues/1343 when this PR goes into Jupyter master. > I'm not sure what the workflow would be for testing this properly...\r\n\r\nIs it easy to hand-edit the javascript file with this change to check it? The relevant file should be /static/notebook/js/built/1.main.min.js if you're using notebook master. Search for `prototype._should_scroll` to find the code line. Thanks! I imagine we'll get feedback and tweaks related to other things in 4.3, so we can do a 4.3.1 with the inevitable polish (this included) in a week or two.","To reproduce, install uBlock Origin and add a custom filter for `/blockednotebook.*?`, then try to open a notebook named `blockednotebook.ipynb` Terrific, thanks for tracking down the cause, @flying-sheep!","CC @minrk, @SylvainCorlay, @ivanov. Thanks, @jasongrout - I'm starting to review this locally, but in the meantime, it looks like there are two tests failling on Travis for this:\r\n```\r\nIn /home/travis/build/jupyter/notebook/notebook/tests/notebook/display_id.js:49\r\n  Untitled suite in /home/travis/build/jupyter/notebook/notebook/tests/notebook/display_id.js\r\n    assertEquals: cell 1 has the right number of outputs\r\nIn /home/travis/build/jupyter/notebook/notebook/tests/notebook/display_id.js:70\r\n  Untitled suite in /home/travis/build/jupyter/notebook/notebook/tests/notebook/display_id.js\r\n    assertEquals: Subject equals the expected value\r\n``` It would be great to get some tests of this feature, too. > It would be great to get some tests of this feature, too.\r\n\r\nI added some tests.\r\n\r\nEdit: my tests pass on my computer, but not on travis...investigating.... I added some more tests showing the output callback overrides work correctly with the display_id things that @minrk and @rgbkrk added recently. Thanks @jasongrout, and thanks for reviewing, @ivanov! Woo, thank you! @jasongrout I marked this as 5.0, since that's where the display_id is targeted and this touches some of the same things. If you feel strongly that this should be in 4.4, we can try to wrangle that, as well. It's my hope that 4.3 is the last 4.x-series release, short of small and/or important bugfixes. I don't think we are that far off from 5.0, either. Thanks. Hopefully notebook 5 will be ready to go in time for us to release widgets 6. If not, let's address it then. @jasongrout I hope so. Thanks, @jasongrout!","Thanks, that looks good. We do want to offer editor plugins to help enter things like maths and markdown. That's super cool. I'm unsure of the level of integration work this would need. Thank you for your consideration but guppy requires more support for achieving its goal hope all interested & those who know js and json will  come to support guppy. Also tab completion is  needed for math keyword for removing ambuigity like typing \"cost\" is not possible due to cos(). I think the makers of notebook can do it.","+1\n Thanks @takluyver, this is what I need to create an extension based in `docrepr`\n :+1:. Travis failure was unrelated, but I'll wait for it to go green, then merge.\n","@SylvainCorlay can you verify whether [this code](https://github.com/jupyter/notebook/blob/ba7e7186cf00287747a2681a9c36955eccdc0102/notebook/notebookapp.py#L284-L300) is now redundant? I'm trying to aim for a 5.0 release. Wow, I had no idea this was still around. So I take it widgets hasn't needed it for some time, then? Do you know what version of widgets will be the minimum supported if that code is removed? 5.x will be required if we remove this hard-coded bit. #2093 removes it","@michaelpacer probably should open an issue on JupyterLab for this as we are actively working on such things over there. But this may even be a notebook format question that we need to open up to more folks.","For security reasons, Github doesn't allow Javascript in rendered notebooks, and I guess that extends to not loading Mathjax. So for some notebooks, you still need to view them on nbviewer (which has no interesting data to steal, so XSS attacks don't matter). Here's your notebook:\r\n\r\nhttp://nbviewer.jupyter.org/github/miroli/notebooks/blob/master/statistics/Statistics.ipynb Related: https://github.com/jupyter/help/issues/21 and https://github.com/jupyter/nbviewer/issues/452 I created a test notebook rendering Mathjax from a code cell and markdown cell (inline and block) and both seem to be rendering correctly: https://gist.github.com/gnestor/da5f48983bc510b501f3ae358affad0e I would report this to Github.","Chrome doesn't have permission to rename the notebooks files. I reran Chrome with permission, and rename action worked well. I'm not sure what you mean about permissions. It's the notebook server that actually renames the file, the browser just sends an HTTP request asking to rename it. So it shouldn't matter what browser it is. But I'm glad you got it working. Sorry for giving wrong solution. The true reason is I have used a proxy based on privoxy, which have some bugs, leading to the consequence that I saw. Since I closed the proxy, I have played happily with notebook.","The errors go away if you rerun all the cells. Closing. This means that something has saved an invalid notebook at some point in the past. 'stream' outputs are not meant to have metadata. When you re-run the notebook, it deletes the saved outputs and recreates the correctly. So there is or was a bug somewhere. I don't think the Jupyter Notebook application has ever had that particular bug, so it's likely that someone saved the notebook with another application (like Nteract or Pycharm). nteract has never had that bug explicitly, though we do fold in whatever comes in off the message spec, assuming the kernel reports valid fields. That's a good point, it could be a kernel getting it wrong. Based on the [other metadata](https://raw.githubusercontent.com/tensorflow/tensorflow/master/tensorflow/tools/docker/notebooks/1_hello_tensorflow.ipynb) (search for colab in the notebook json), it appears to be a notebook that was created internally at Google in colaboratory (the non-public version). ah, good catch","What will happen with notebooks already saved with references to attachments including the `//`? I guess those attachments wouldn't be shown until their URIs are fixed. Do we want to try to automatically fix them? Or even just provide a script which people can run to fix them? > Do we want to try to automatically fix them?\r\n\r\nsince the spec has been out for a few versions, I would. Would the automatic fix \"change\" them in memory (& so, as displayed) immediately when the notebook is loaded and then overwrite the file system version only when the file is saved? Or would it attempt to rewrite the file immediately upon loading? Probably the former - that's already how we handle upgrading notebooks in an older format, for instance. I hope you don't expect me to implement the auto-fix behavior ... I don't know enough JavaScript to do that! I suspect it could be done in Python. Maybe it belongs in the nbformat package rather than here. @minrk would it be worth doing a minor version bump on the format and using the conversion machinery to implement that?\r\n\r\nProbably the trickiest bit would be parsing the markdown to modify it. I proposed a [markdown passthrough](https://github.com/lepture/mistune-contrib/pull/9/files) for mistune, but it's not yet accepted. I expect we could get away with regexes, as `attachment://` is only likely to occur in this context. We could possibly do it in nbformat. In any case, it doesn't need to be in this PR.\r\n Can you point to examples of the conversion machinery as it already exists in nbformat that would be used in this case? \r\n\r\nI'm trying to figure out how to handle the header id convention change across nbconvert and the notebook, and while I was planning on trying to do it without altering ipynb metadata, I'm gradually coming to the conclusion that that may be impossible to do without breaking things in unintuitive ways once file sharing comes into the picture. Here's some of the conversion machinery:\r\nhttps://github.com/jupyter/nbformat/blob/master/nbformat/v4/convert.py\r\n\r\nNone of it currently reaches into the markdown to modify things, though - it's all about modifying the JSON structure of the notebook. So it may not be all that useful. I think it will probably be simpler to have the warning and shim in this repo. We can do that in another PR.","That does count as a bug! Though I'm not sure exactly whose bug it is.\r\n\r\nFrom the answers on SO, it only seems to affect Chrome with the Lastpass extension installed. Is that the case for you too? I use Lastpass in Firefox, and I don't see the issue. As a matter of fact, I do. So strange! No idea how I'd proceed from here though. Huh... talk about a corner case.\r\n I know Lastpass does things with the page to find password fields to autofill, but I don't know why it would affect saving.\r\n\r\nHere's a thread on the Lastpass forums about it. It sounds like it might also affect Google chat:\r\nhttps://forums.lastpass.com/viewtopic.php?f=12&t=236645&p=791705&hilit=jupyter#p791705 Thanks again @takluyver . I've put in a ticket with LastPass support. I subscribe to their premium service. Let's see what it gets me. I'll update when I know more. Yep getting the same. You can see the offending line of the plugin below:\r\n```\r\n\"URIError: URI malformed\r\n    at decodeURI (<anonymous>)\r\n    at XMLHttpRequest.send (chrome-extension://hdokiejnpimakedhajhdlcegeplioahd/xhrExtension.js:2:51)\r\n    at Object.send (http://localhost:8888/static/notebook/js/main.min.js?v=e80a0ad9bee7ad0d5865624902d5405d:89:9344)\r\n    at Function.ajax (http://localhost:8888/static/notebook/js/main.min.js?v=e80a0ad9bee7ad0d5865624902d5405d:89:4804)\r\n    at http://localhost:8888/static/notebook/js/main.min.js?v=e80a0ad9bee7ad0d5865624902d5405d:12787:15\r\n    at Object.promising_ajax (http://localhost:8888/static/notebook/js/main.min.js?v=e80a0ad9bee7ad0d5865624902d5405d:12779:16)\r\n    at Contents.save (http://localhost:8888/static/services/contents.js?v=20161216120736:176:22)\r\n    at _save (http://localhost:8888/static/notebook/js/main.min.js?v=e80a0ad9bee7ad0d5865624902d5405d:27436:34)\r\n    at http://localhost:8888/static/notebook/js/main.min.js?v=e80a0ad9bee7ad0d5865624902d5405d:27475:32\"\r\n```\r\nI managed to disable the hook in, by adding \"localhost\" to My Vault -> Account Settings -> Neverl URLS -> \"Never Add Site\"\r\nSeemed to prefer having it as a domain without any port or path. Thank you @devgrok for the workaround! Edit: It works for me! I followed your instructions:\r\n\r\n> adding \"localhost\" to My Vault -> Account Settings -> Neverl URLS -> \"Never Add Site\"\r\n\r\n---\r\n\r\nIn the meantime, I also got a response from LastPass, and they don't have a timeline for a fix so the best we can hope for is that they resolve it on their next release. Here is the link to the release update page: https://lastpass.com/upgrade.php?fromwebsite=1&releasenotes=1\r\n\r\n I hope the next update comes out soon, this is super annoying as I have to disable LastPass just to use many websites normally. If this is still affecting people, you may be able to use Firefox to work around it - Lastpass on Firefox does not have the issue.","It looks like this was affecting jupyterlab and is now resolved: https://github.com/jupyterlab/jupyterlab/issues/522 I've definitely seen this, but can't seem to make it happen now (also Safari v10.0.1). @ivirshup does this happen with any text (i.e. cursor doesn't move across whitespace, only when characters are entered), or only in specific circumstances? @minrk I'm only observing it when on single spaces. Double spaces and characters after single spaces update correctly. I'm testing against notebook at master on Safari 10.0.2. @minrk \r\n\r\nI'm haven't done very thorough testing, but I just spent about ten minutes in a fresh notebook and this is what I'm seeing:\r\n\r\n## In code cells\r\n\r\nStrange space formatting:\r\n\r\n* Will occur immediately after any delimiter\r\n  * e.g. `=`, `,`, `.`, `(`, `)`, `[`, `]`, `{`, `}`, `\"`, `'`, etc.\r\n* Will not occur within closed delimiters\r\n* Will not occur within compound statement if closed by `:`\r\n  * e.g. it will occur here `if x =={cursor}`, but not here`if x =={cursor}:`\r\n\r\n## In markdown cells\r\n\r\nStrange space formatting occurs:\r\n\r\n* Unless cursor is at start of a new line\r\n* Unless cursor is placed immediately after closed markup delimiter (e.g. `*text*{cursor}`)\r\n* Unless within markup delimiters (e.g. `*text{cursor}*`)\r\n\r\nHope this helps!\r\n\r\n*edit*: Fixed grammar. I'm seeing it now on 10.0.2 also with notebook 4.3.0. Where I see it most prominently is when I type a space, but the cursor does not move, yet when I type a letter afterwards, it is properly spaced. So the space registered, but was not displayed until additional text was added.  Thanks for the detailed circumstances. I know I've seen this in the past, but can't make it happen today. Since @gnestor seems to be able to, I'll let him try to tack it down. If it's a regression in 4.3, it's most likely related to the bump in codemirror version. Can anyone here who sees this in 4.3 tell if the behavior is different in 4.2? I only noticed it starting in 4.3, and its the sort of thing that would jump out at me. I did some testing and it appears that this behavior appears in [CodeMirror 5.17](https://github.com/codemirror/CodeMirror/releases/tag/5.17.0)... @flying-sheep @oxinabox Pinging you because upgrading to CodeMirror 5.21 introduced a regression for Safari 10 users. I'm trying to track down the cause. I've found that it was introduced after 5.16. I created an issue on codemirror: https://github.com/codemirror/CodeMirror/issues/4454 This is temporarily fixed by downgrading CodeMirror to 5.16. \r\n\r\n@flying-sheep @oxinabox I understand that you have contributions that have been merged since 5.16, so we intend to upgrade to the latest version as soon as we can resolve the source of this issue. \r\n\r\nLet's move conversation to https://github.com/codemirror/CodeMirror/issues/4454 and we can re-open this issue if we find that the source of this is in fact in notebook.","I think a lot of people would be happy about this, so I would say that it makes sense as a default. One case where this might not be sufficient is a hosted service where the notebook server is the only window on the system (e.g. JupyterHub, cloud services). In these cases, without a *read* API for the trash, you get something in the middle: lost access to files, but the data isn't actually cleaned up. But then again, trash is really something along the lines of a `~/.trash` folder, so it's *possible* to dig around and find what you lost. This still seems like there's enough to work out that I'm bumping it to 5.1.","This doesn't feel like a proper fix, though, so I'd like to work out something better. Maybe we should block any requests without `Origin` set, and force scripts to use the token to bypass origin checks. [Firefox issue about sending Origin](https://bugzilla.mozilla.org/show_bug.cgi?id=446344) Merged xsrf patch","thank you!\n","Thanks, I can reproduce that. @lgeiger Any ideas? @gnestor looks like it was the `+` on the end being too greedy. #1982, #1983 should fix it.","I think this is a problem.\r\nI printed jupyter executable path.\r\nIt not my designated python path.\r\n```\r\nimport sys\r\nsys.executable\r\nout::'C:\\\\Users\\\\zhoufankai\\\\AppData\\\\Local\\\\Continuum\\\\Anaconda2\\\\python.exe'\r\n```\r\nI have search internet for help. But I don't get some solves.\r\nHow can I change my jupyter executable path? \r\nThanks in advance.\r\n The problem is most likely that you have a file in that folder called `numpy.py`. If you rename that (and remove the cached `numpy.pyc`), it should work.\r\n\r\nIf you want to run the kernel with a different Python executable, you'll need to [install a kernel spec](http://ipython.readthedocs.io/en/stable/install/kernel_install.html) from that Python. Thank you for you advice. \r\nIt almost solved my problems.\r\nBut I have a question about the different Python executable. \r\nI installed kernel, But the imported package is not the same as the specified Python package.\r\nBelow is the command.\r\n\r\n```\r\nconda create -n ipykernel_py2 python=2 ipykernel\r\n\r\nsource activate ipykernel_py2    # On Windows, remove the word 'source'\r\n\r\npython -m ipykernel install --user\r\n```\r\n\r\nHow can I import packages in 'conda' environments as same as specific Python environments? To install a kernelspec from any given Python environment, run this bit with the Python you want to use:\r\n\r\n```\r\npython -m ipykernel install --user\r\n```\r\n\r\nIf you want to use a conda environment, you can `activate` that environment, and then use `conda install foo` or `pip install foo` to install packages into that environment.\r\n\r\nI'm not quite sure what you're stuck on, but does that information help?","The JS tests seem to be getting worse and worse. Restarted...","My bad, I just wasn't reloading a specific sub-module.\r\nSomething like this will work;\r\n```python\r\nreload(myModule.submodule)\r\n```\r\n","Restarted some JS tests (any idea if there's anything we can do to make these more reliable?)\r\n\r\nI have little understanding of the significance of this, so I'll let people who hopefully do have a look. I confirmed that this allows us to run the JupyterLab tests using Karma and tokens. I prefer this solution over sending the token as a URL param in plain text, per https://www.w3.org/Protocols/rfc2616/rfc2616-sec15.html#sec15.1.3. Background:\r\n\r\nCORS severely limits what you can do from one site to another. Prior to making a CORS request, browsers make an OPTIONS request, to ask the server what should be allowed. One of the things that is limited is setting headers on those requests. The server specifies which headers should be permitted with Access-Control-Allow-Headers.\r\n\r\nSince part of the point of the token authorization is to make authenticated cross-origin access *easier*, we should allow the Authorization header to be included, which is what this PR does. @minrk Does this need to be backported for 4.3.1? Yes, please, we are waiting for this in JupyterLab. Backported! Thanks @minrk.","This error also prevents the notebook from loading - config stuff should generally be more robust against simple bad values.","I'm not sure what the cause of this issue may be, but what happens if you `pip install certifi` and retry? yep, it runs through then. i didn't expect it so simple, thought that a `pip install -e .` would grep anything that's missing? I'm pretty sure `pip install -e .` just follows the commands in `setup.py` in the vein of `python setup.py develop` (but with some [slight variation in behaviour](http://stackoverflow.com/a/30306403/1816995)), and there's no explicit dependency on `certifi` listed in `install_requires`. So I opened a PR to fix that. @minrk @Carreau Should `certifi` be an explicit dependency? I suspect the issue might be that @michaelaye is using miniconda vs. regular conda? It sounds like it already is an explicit dependency, given that it doesn't build successfully without it. I genuinely thought that's what a dependency meant, so I could be wrong. \r\n\r\nBut if you suppose someone wasn't using conda at all just pip, they would have the same problem. erm, what is `regular conda`? I think he means a anaconda vs. miniconda both of which install `conda`, but whereas anaconda has a bunch of scientific python packages baked in its install, miniconda only installs python and conda and the packages they depend on. \r\n\r\nMore info [here](http://conda.pydata.org/docs/). anaconda is just a meta-package that is pre-installed, right. But there's only one conda. I'm not sure what you mean by pre-installed. But I think you've got the general idea.\r\n\r\nYes, there is only one `conda`. But the word \"conda\" is often used as a shorthand for anaconda. \r\n\r\n\r\n\r\n All what an anaconda install does is to install conda and execute 'conda install anaconda'. And the statement that 'conda' is used as a shorthand for anaconda is new to me, that's why I asked above and it's certainly not only confusing, but also incorrect, as 'anaconda' is only a meta-package pointing to all the required conda packages. (Not that I'm a big fan on how these names are all confusingly interwoven, but that's why it's helpful to be precise here.) Did not know that that was the explicit command sequence. Thank you for explaining!\r\n\r\nAgreed, I don't think it's an endorsed shorthand, and it is potentially confusing for those who already know the distinction. \r\n\r\nHowever, the alternative (always distinguishing anaconda from conda) can also be more confusing to those who haven't encountered the distinction between anaconda and miniconda before, since they probably have installed from anaconda (being the strongly more marketed option) and they will rarely need to type the characters `anaconda` again, whereas they will need to type `conda` all the time. Thus, anaconda gets the unofficial shorthand \"conda\".  What's in your `conda list`? Does it work if you create a new env? `certifi` ought to be in all conda envs by default, since it's a dependency of setuptools. It's not a direct dependency of the notebook, so we shouldn't depend on it here. This is so weird, I checked the dependency list of setuptools, and the version one gets with the defaults channel set on highest priority (I also have conda_forge at a lower prio), I get version 27.2 from the default channel, which is **THE ONLY ONE** that has certifi missing in its dependencies, and **only** on the defaults channel, while conda-forge has it, see screenshot:\r\n![screenshot 2016-12-16 09 11 46](https://cloud.githubusercontent.com/assets/69774/21269473/15441e6c-c370-11e6-9413-483199c4de9d.png)\r\nSorry to create noise here for a conda problem...\r\n But this is the set one currently receives with a new env:\r\n![screenshot 2016-12-16 08 51 38](https://cloud.githubusercontent.com/assets/69774/21269548/5a2a2a44-c370-11e6-8fba-c2d118e09694.png)\r\n 27.2 is the latest version available on the defaults channel. reporting it. > It sounds like it already is an explicit dependency, given that it doesn't build successfully without it.\r\n\r\nI guess that \"explicit\" means in setup.py as a dependency. Right now _we_ don't rely on certify directly it is an implicit dependency. ","Hmm, I don't know that we have anyone familiar enough with ceph to help on this one. If the filesystem is ceph backed, I can imagine that the expectations of the `ContentManager` object in the notebook server (which expects a real posix filesystem) aren't being met. If you really want to store notebooks in a non-POSIX file system I would recommend writing a custom `ContentManager` object. \r\n\r\nHere is an example of one for Postgres:\r\n\r\nhttps://github.com/quantopian/pgcontents Going to close with no action for now, if there is somethign we can do, please feel free to reopen. Google says:\r\nThe Ceph Filesystem (Ceph FS) is a POSIX-compliant filesystem that uses a Ceph Storage Cluster to store its data. The Ceph filesystem uses the same Ceph ...\r\n\r\nI don't know why nb server needs very complex file operations. I think it may only need read/write/monitor.\r\n If I had to guess, it's related to the use of SQLite databases on disk.\r\n\r\nSince you describe kernels too, I've got to ask -- where is ceph mounted? It isn't particularly complex file operations, but rather, we tend to find\nthat some \"POSIX compliant\" file systems (NFS is a more common example) are\ntechnically POSIX compliant, but end up, in practice, having some problems\nin real-life situations. SQLite is one of the most common places we see\nthat...\n\nOn Tue, Dec 27, 2016 at 11:20 PM, Kyle Kelley <notifications@github.com>\nwrote:\n\n> If I had to guess, it's related to the use of SQLite databases on disk.\n>\n> Since you describe kernels too, I've got to ask -- where is ceph mounted?\n>\n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/1978#issuecomment-269431947>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0LwdeQScl_Q-0O-4oyXsuBOkqVLvks5rMf-bgaJpZM4LNynl>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Thanks @rgbkrk ! The notebook server runs at /mnt/ceph/. I guess sqllite db is in ~/.jupyter? There is no .jupyter in ceph folder.  https://github.com/jupyter/notebook/blob/master/notebook/services/kernels/handlers.py#L237 it seems to be timeout for kernel info. It cost minutes to receive kernel info if I do not open the tree UI first (I direct opened http://nbserver/path/to/file.ipynb).","Same issue here after upgrading to 4.3.0. As a workaround set `c.NotebookApp.password` inside `~/.jupyter/jupyter_notebook_config.py` explicitly or downgrade to 4.2.3. This is the result of https://github.com/jupyter/notebook/pull/1831 which makes notebook servers authenticated by default. \r\n\r\nMy login page looks like:\r\n\r\n![image](https://cloud.githubusercontent.com/assets/512354/21231954/e27a8d6c-c29e-11e6-80d7-60cd48c3fb72.png)\r\n\r\nIf you run `jupyter notebook list`, you will see something like `http://localhost:8888/?token=6d48d4d8990d2adf9c0313fec7d462b5e265fe227452a273`, so just copy and paste that into the browser and you will be _logged in_.  While it is possible to disable this, we don't recommend it. Using authentication by default was done to close a security hole, and disabling it opens that hole back up. See #1944 and [this security doc](http://jupyter-notebook.readthedocs.io/en/latest/security.html) for more details.\r\n\r\nWe know this change will cause some disruption; we're doing our best to minimise that, and if you tell us more about what you're doing, we'll see if there's any way to make things easier. But security is important for something that can execute code on your computer.  @gnestor: Thanks. All I'm seeing on my login page is a password field. No description, even with having the password option commented out in the jupyter options. As from the security doc, jupyter is supposed to ask for a token in this case, which it does not (at least not on my machine). However, the token from the terminal works as a password in this case. The only other option set in my jupyter config is `c.NotebookApp.open_browser = False`. So, I'm guessing this is the real issue. If set to `True` one would automatically be logged in with a token.\r\n\r\n![](https://cloud.githubusercontent.com/assets/1119641/21259342/3215e0dc-c381-11e6-8706-0975dfa27925.png)\r\n\r\nThis is indeed very confusing. Thanks, also @takluyver, for clearing things up. @skycaptain indeed, there's supposed to be info on that page explaining about tokens, but I mixed up some logic so it's never shown in 4.3.0. The login page looks like this in 4.3.1:\r\n\r\n<img width=\"609\" alt=\"screen shot 2016-12-16 at 15 13 50\" src=\"https://cloud.githubusercontent.com/assets/151929/21265546/46db2a2e-c3a2-11e6-9f15-8704cf13bf53.png\">\r\n I'm closing this as it's fixed in 4.3.1, which we will try to release in the next couple days. @minrk \r\nThanks, pasting the token worked for me. @MissOgra Are you running notebook 4.3 or above (`jupyter notebook version`)?","I think triggering autosave on setting the kernel should address this.\n Or could we do it more directly, giving the kernelspec to the contents manager to create the notebook file with that in from the start?\n","I think the page should be clearer about why it's prompting for a password (this was already suggested on one of the issues), but I don't think we should remove the `--no-browser` option. It still does something useful, and there are ways to get a token other than letting it start a browser. Well, maybe not removing but be clearer. If you use --no-browser, then you have next to 0 chances to have access to the token.  It should still print a URL containing the token in the terminal, and you can use `jupyter notebook list` to get it. If you're using a script to access it, it can get it from the JSON file with the notebook server info, I believe. @fperez had more issue with this. In particular the cookie is not set on both localhost and 127.0.0.1 which is confising. \r\n\r\nUsers using anaconda may not even see the token in the terminal. \r\n\r\nThe token should be logged in the terminal when the login page is hit (for user to not have to scroll). \r\n\r\n I have to say, the current usability of this for new comers is basically -infinity.  It nearly stopped me dead on my tracks, and I know a bit more than many of our new users.  For someone who doesn't understand all the moving parts, this can be a complete show-stopper right now.\r\n\r\nI also understand the important security reasons why this is present, not trying to discount that.  But we need to figure out an improvement for the UX.\r\n\r\nBTW, in my case part of the issue is that I seem to have `no-browser` set somewhere, but even with @Carreau's help we couldn't figure out where.  `jupyter notebook` in my case doesn't trigger a browser, but I can't find any customization to that effect anywhere.\r\n\r\nAnd having `jupyter notebook list` be the solution isn't going to help new users: many of them won't even know this subcommand exists (I'd completely forgotten it). I don't think it's so bad for newcomers - the default experience is with it opening a browser directly on launch, which works (as far as we know). The problems are mainly for existing users who already have a different way of doing things which doesn't work with this. Like yourself and the hidden no-browser setting.\r\n\r\nThe login page (which you see if you miss the token) will point users to `jupyter notebook list` as of 4.3.1.\r\n\r\nThe only other thing I can think of to do is to special case connections which say they're coming from `localhost` or `127.0.0.1` (and the correct port). I.e. check the origin against what the server expects it to be, rather than comparing two values sent by the browser. But I'm not wild on this, because:\r\n\r\n- Adding an exception to any security mechanism is a risk, because someone might find a way to exploit that exception. The flaw that prompted adding this mechanism highlighted just how complex browsers and web security are. More special cases makes it harder to be sure we're doing things right.\r\n- Special casing specific origins means more surprising behaviour when you're legitimately accessing it at a different domain.\r\n\r\n> the cookie is not set on both localhost and 127.0.0.1 which is confising.\r\n\r\nI understand that it's confusing, but from the browser's point of view, those are different domains. We [can't set a cookie for another domain](http://stackoverflow.com/a/6761443/434217). (Looking at that last link more carefully, I see that it may actually be possible to set the cookie across both domains - I posted it only having read the first line ;-) Hi all, \r\n\r\nWas just surprised by this issue while building a Docker container that I was testing on an AWS instance (i.e. no desktop). \r\n\r\nBased on my reading of the [instructions](http://jupyter-notebook.readthedocs.io/en/latest/security.html), I tried both of the following launch commands with notebook v4.3:\r\n\r\n```bash\r\njupyter-notebook --no-browser --port 8888 --ip=0.0.0.0 \\\r\n--config NotebookApp.password='' \\\r\n--config NotebookApp.token='' \\\r\n--config NotebookApp.password_required=False\r\n```\r\n\r\nand\r\n\r\n```bash\r\njupyter-notebook --port 8888 --ip=0.0.0.0\r\n```\r\n\r\nHowever neither of these launch commands successfully removed the password requirement within the Docker container. \r\n\r\nI was only able to remove it by forcing the notebook version to be 4.2.3. This is fine in the short term, but not a long term solution, obviously.\r\n\r\nIf I have missed something or you have suggestions, let me know. Thanks. @mlgill : the way you're trying to pass config in does not work:\r\n\r\n```\r\n# Wrong:\r\n--config NotebookApp.token=''\r\n\r\n# Right:\r\n--NotebookApp.token=''\r\n```\r\n\r\nThe `--config` option is for specifying the path to a config file. I should also point out that disabling all security and then listening on all interfaces is not recommended (to put it mildly). Hopefully you already know that and are just testing, but I wanted to make sure it's clear for anyone else reading this thread.\r\n\r\nThe docs have more info on how to [secure a server that will run publicly](http://jupyter-notebook.readthedocs.io/en/latest/public_server.html#securing-a-notebook-server). I've retitled the issue to point to making the info clearer, since we shouldn't disable token auth, or even recommend doing so.\r\n\r\n@mlgill when you launch the notebook server, the token is logged, and you can use this to connect. Or, if the token being generated causes inconvenience, you can use a predetermined value, e.g.\r\n\r\n    jupyter notebook --NotebookApp.token='super-secret'\r\n\r\n#1972 should have already covered most of this. The login page looks like this now:\r\n\r\n<img width=\"633\" alt=\"screen shot 2016-12-13 at 13 19 49\" src=\"https://cloud.githubusercontent.com/assets/151929/21315421/64bb29d4-c5fc-11e6-9393-956bea2d8f51.png\">\r\n\r\nwhich better explains why the login page is shown, and shows in detail the exact steps to get the information you need. Logging in with a token is needed once per browser+port+machine combo, so once a user has done this one time on their laptop, they should never need to do it again.\r\n\r\n#1994 should fill in the one remaining gap I see of extra emphasis of the information already in the log output, which will now look like:\r\n\r\n```\r\n[C 15:17:09.076 NotebookApp]\r\n\r\n    Copy/paste this URL into your browser when you connect for the first time,\r\n    to login with a token:\r\n        http://localhost:8888/?token=d0b6a3e08ee7d81ce602e8e5f5f3bd4d37f4380f36798df7\r\n```\r\n\r\nAny further feedback on what we should do would be greatly appreciated.\r\n\r\nI'm sorry for the consternation this has caused. I'd like to get 4.3.1 out very soon with these improvements ASAP.\r\n\r\nAs a side issue, @fperez, I'm not sure how you would have `open_browser = False` if it's not in your `jupyter_notebook_config.py`, but it could happen without any configuration if the webbrowser module cannot find any browser (in which case a `No web browser found:` message is logged). I was affected here in part because I had cookies disabled. It might be worthwhile to explicitly mention on the login page that cookies must be enabled (specifically for 127.0.0.1 and localhost). @roycoding good point! @minrk, what are all the locations where `jupyter_notebook_config.py` might be read from? I can't seem to find that in `~/Library/Jupyter` nor in `~/.ipython`, nor does a Spotlight search find any occurrence under my home dir...\r\n\r\nHappy to help track this down, if nothing else, so we understand what's going on. @takluyver, may I suggest that when a user (me, in this case :) reports that they are having a real usability struggle with our system, replying \"the problems you think you're having aren't as bad as you say they are\" is not the ideal response?\r\n\r\nThere may be any number of reasons why users don't get the token info, they lose their browser, their notebook was launched externally, etc.  As it currently stands, there's a very good chance they are going to be completely stumped by a login page they'd never, ever seen before, and for which they have no idea what to do with.\r\n\r\nLet's instead figure out a solution that improves the situation.  I know that the intersection of good security and good UX is often the empty set, but let's see what we can do here... @fperez I actually needed to use this regarding the locations where` jupyter_notebook_config.py` in tracking down some remnant issues with a bad install of `jupyter_contrib_nbextensions`.\r\n\r\nThe command you want is\r\n\r\n    jupyter --paths\r\n\r\n`jupyter --config` only returns the first element in the config path list. \r\n\r\nI actually was just trying to think about how to pass the json version of the output `juptyer --paths --json` to be parsed, extract the list of paths and pass that to a grep (in my case for `jupyter_contrib_nbextensions`). \r\n\r\nBut after hacking at it for a while, I'm pretty sure that's way too much to be happening in sequence of pipes so I should just write a python script for it. It'd probably be helpful for these kinds of cases where some setting exists somewhere on a user's machine and we don't know where the setting is coming from. Has the `password_required` listed here: http://jupyter-notebook.readthedocs.io/en/latest/config.html\r\n\r\nbeen removed? My latest pip installed jupyter says the following:\r\n\r\n```\r\n[W 06:14:52.969 NotebookApp] Config option `password_required` not recognized by `NotebookApp`.  Did you mean `password`?\r\n``` Thanks @michaelpacer! That was useful, now I know for the future...\r\n\r\nUnfortunately, I didn't find any browser-related config flags in any of the paths I got for config:\r\n\r\n```\r\ndenali[~]> jupyter --paths\r\nconfig:\r\n    /Users/fperez/.jupyter\r\n    /Users/fperez/usr/conda/etc/jupyter\r\n    /usr/local/etc/jupyter\r\n    /etc/jupyter\r\n```\r\n\r\nBut this rubber-ducking helped me!! Given that there was nothing left, I scoured my environment, and found this:\r\n\r\n```\r\ndenali[~]> env | grep -i brow\r\nBROWSER=google-chrome&\r\n```\r\n\r\nThis is a carryover of my `bashrc` from my Ubuntu days, but on OSX calling `google-chrome` doesn't do anything.  So what was happening in my case was that the browser command was failing, leaving me without a browser.\r\n\r\nThis shows another failure mode that can affect an unsuspecting user: if for whatever reason they don't get the browser to open, they're left to read startup logs (something a new user isn't necessarily always adept at).\r\n\r\nI recently had the opportunity to help a user who was a complete newbie to Python/Jupyter, and it was really satisfactory to be able to get them to go from zero to working notebook with plots in the course of a short session (and it got them excited about the possibilities).  But this person had never interacted with a terminal at all nor had any real experience programming. I'm 100% certain that \"read the log until you find the token URL, then use that to load the session in a browser\" would be simply a bridge too far for them. @fperez sorry if my response was curt. This is a classic bug that's really annoying for the people it affects, but I still maintain that the vast majority of the new users you're concerned about will not be affected. Obviously we will take any bug you file fairly seriously however it's worded, but I find your bug reports sometimes have a little bit of the \"this must be fixed now\" flavour. And I find that all the more surprising because you have been the one reading and responding to plenty of bug reports in the past, so you know what makes a good one from the maintainers' point of view.\r\n\r\nBack to the issue:\r\n\r\n* To tackle the specific issue that caused your problem, maybe if $BROWSER is set and launching a browser fails, we should assume it's set badly, and try again as if it wasn't set. Scanning through the code of the `webbrowser` module, there doesn't seem to be a good way to do that, but if we think it will affect enough users, I'm sure we can come up with something.\r\n* I totally agree that it's a poor user experience if the server doesn't launch the browser. But I don't see a great way to improve this in general. AIUI, we need to get a secret to the browser. If we can launch the browser, we do that via the command line. If not, we make it available in the terminal and on the filesystem for the user to pick up. We can't transfer it over HTTP (unless I'm missing a trick), because that's the channel we're trying to secure. We can definitely make it clearer what's going on, which we're doing in 4.3.1, but I don't see a way to avoid it.\r\n* If we can't launch the browser and the user isn't looking at a terminal (e.g. because they've launched the notebook from a GUI), we don't have any obvious way to communicate with them even to point out what's going wrong. We could try to find an available GUI toolkit (tkinter is usually there) and open a window with information. This feels very much like a band-aid solution, though.\r\n* We could try to push users into setting a password, so that they know what to enter on the login page. E.g. the Anaconda launcher could get the user to set a password when they first launch the notebook. But this isn't great UX either, and it's extra work for less security (human chosen passwords are easier to guess than a generated token).\r\n* We could provide a GUI [notebook server manager](https://github.com/takluyver/nbmanager) as part of a default install, and add options to launch a browser and to copy the URL from that interface. That gets us back into the local GUI development we've avoided by making a web interface, but maybe that's OK for a tool with much more limited scope. @fperez I'm fully on board, and trying to get out 4.3.1 with improvements ASAP, before this bites too many more people. I'd like to do it by the end of today, if possible, but tomorrow seems more likely. What do you see as missing in what we already have in master (plus #1994)? Right now, we have:\r\n\r\n- complete information on the login page about why the page is shown and how to get the information needed (see above screenshot)\r\n- more emphasized information in the log output, for users who don't launch a browser (#1994)\r\n- detailed explanation of what's going on [in the docs](http://jupyter-notebook.readthedocs.io/en/latest/security.html)\r\n\r\n> Has the password_required listed here: http://jupyter-notebook.readthedocs.io/en/latest/config.html been removed?\r\n\r\n@jeremyherbert  I don't believe `password_required` has been backported to 4.x. It's still in master, awaiting 5.0 release. @takluyver, I do apologize if I have made it sound like \"must be done now\", that's certainly not my intent.  B/c of being overloaded on many fronts, the reality is that lately I tend to file bugs only that i think hit us pretty hard, but perhaps my wording was sub-optimal.\r\n\r\nI wasn't even worried about myself (I can work my way out of the situation), but more about the impact it can have on new users: while I think you're right in that it will be a minority, it can still be severe for those it hits.\r\n\r\nAnd it's worth seeing how this can happen in unexpected ways:  I was just now working with a colleague who was stumped by this after a conda update.  It turns out that his default browser on OSX is Safari, so after starting `jupyter notebook`, Safari opens for him.  But for Jupyter he prefers Chrome, so he has the reflex to immediately kill/hide Safari and go over to `localhost:8888` on Chrome.\r\n\r\nWell, guess what :)  Now, this puts him on a weird login/password page he'd never seen before, and was stumped.\r\n\r\nFortunately he'd just done the conda update with me in the room and I saw what happened, and was able to help him out.  But it shows that there can be multiple ways in which users can find themselves in this situation that we didn't necessarily foresee...\r\n\r\nIn any case, given that 4.3.1 is near-ready as per @minrk's description above, that sounds like a good amount of info/explanation for most cases.  We can keep collecting feedback on how this impacts the broader user base, and refine our approach.\r\n\r\nBut no, my bugs aren't \"special\", sorry again if it seemed that way. A summary of the users who are likely to face the token auth, where the default open-with-token isn't quite magical enough:\r\n\r\n- 'notebook' browser isn't default browser, or other browser hopping (e.g. switching around for testing)\r\n- run with `--no-browser`, or browser launching doesn't work / isn't available (e.g. remote notebooks, docker, etc.)\r\n- use private browsing, or other pattern where cookies are cleared often\r\n\r\nIn each of these cases, the token should only be needed for the first time a browser connects to a notebook server on a given ip/port, as a cookie is used thereafter, and cookies remain valid across notebook restarts. It should be considered an 'initial setup' step, rather than an ongoing interaction with the notebook server every time you launch. Resetting cookies will require logging in again. While *browsers* share cookies across ports, we specifically don't use the same cookie for each host:port combination, because different notebook configurations could cause conflicts on the cookie secret. We could consider reversing that, as I think the experience for *most* cases would be better (i.e. all localhost notebooks are actually local). It could cause surprising logout events for anyone who tunnels localhost to remote notebooks, though, or uses temporary config with a fresh cookie secret for testing. Thanks @minrk and team for all the work and thought on this one, I know it sits at a very uncomfortable intersection of security and UX.\r\n\r\nOne last thought (possibly for 4.3.2, given the release timeline): should we offer a `jupyter password` command that does the whole pwd creation/hashing/writing dance in one step at the cmd line? \r\n\r\nIn the past, needing a password was relatively rare, so having the process be [what explain here](http://jupyter-notebook.readthedocs.io/en/latest/public_server.html) seemed sufficient.  But if more and more users are likely to need this, we might want to streamline it as much as possible...\r\n\r\nThoughts?\r\n\r\n\r\n","We shouldn't have to do this - it's setuptools that requires certifi, not us. This also can't really fix the problem, because its setuptools that installs the dependencies, and it can't do that if it's not working.\r\n\r\nI think @michaelaye simply had a broken setup for some reason. That's unfortunate, but it's not a bug in our codebase. I agree, see my explanation in #1977 sorry for the noise. How unlucky can one be to have the only version of conda that does NOT require certifi? Thanks @michaelaye for the follow up. The issue for Anaconda's packaging is ContinuumIO/anaconda-issues#1300.","closes #1970 ","The build is generally flaky and broken in notebook js right, not just for these carriage return PRs? Yep, it's been really flakey lately. Alright, I'll lessen my hesitation towards merging.","@jasongrout This now has a merge conflict, can you rebase it? > @jasongrout This now has a merge conflict, can you rebase it?\r\n\r\n@takluyver - done.","It would be even nicer if javascript syntax would be applied directly in the markdown cell if\r\n\r\n    ```javascript\r\n\r\nis seen, e.g.\r\n\r\n    ```javascript\r\n    console.log('hello world!')\r\n    ```\r\n","We had to enable authentication by default because of a security issue. More info in [this comment](https://github.com/jupyter/notebook/issues/1944#issuecomment-266434362).\r\n\r\nIf you let it open a browser when you start the notebook server, it should authenticate automatically, bypassing the login page. Otherwise, there should be a URL in the log to connect with a token, or you can run `jupyter notebook list` in a terminal to find it. In 4.3.1, which we're trying to release quickly, the login page will explain this.\r\n\r\nSorry, we know this is disruptive, but we haven't yet come up with a good alternative. See also [the updated security docs](http://jupyter-notebook.readthedocs.io/en/latest/security.html). please see #1980 as well.","nevermind, I think a bunch of my packages are out of date... just updated with conda update --all, and it looks like the kernel is fine.","@Carreau this is the kind of bug that you're good at figuring out, so \"ping\". You use several things to help diagnose what's happening.\r\n\r\n1) `import sys; sys.executable` will tell you what is your curent python\r\n2) from within a notebook `!{sys.executable} -m pip` will use the pip of currentkernel.\r\n3) Conda-installed' notebook have their own patch with condakernels (not sure about the name) that autodetect environments. It does though break nbconvert --execute\r\n\r\n\r\n> That did nothing to change the situation, except that once I opened a notebook, and tried import notebook, it would tell me that it had no notebook module. From that I surmised that it was correctly executing the command, but somehow when activating the kernel, it's going to the wrong place.\r\n\r\nThat kind-of make sens (or at least it does not not-make-sens) as the server may be on a different machine so the env you see is the kernel's one, not the notebook one. The question is:\r\nShould the notebook only see envs restricted to where it's installed, or all the system envs. Both case make sens, but the one we choose (IIRC) is that a notebook see all kernels. Indeed you might want to install notebook with py3, and kernel with Py2. Plus the notion of \"envs\" is often Python specific. Ence while kernels are regularly machine-wide. \r\n\r\nI don't remember either if ipykernel install the specs at install time or need to be triggered manually. We can resolve that in person later and investigate, but I would expect it to be a corner case of developing the notebook. \r\n\r\n\r\n Solved: it was a kernelspec problem.","isn't it what `static_url()` is supposed to do ?\n No. custom.js,css are not served from /static anymore, they are served from /custom.\n LGTM\n","Right click and paste works for me. Clipboard events are a bit tricky in the browser, though. If you're not already on Notebook 4.3, then please update, because we switched the terminal package from term.js to xterm.js, which is an actively maintained fork. Ok perfect, I used the v 4.2 (docker-stacks). I'll try to update that.\r\nThanks,","See jupyter/jupyter_core#96.","This passed without needing a restart, which is a good sign, but of course not proof. Self-merging, as it's just a test, and should help other PRs get through. Thanks, the failures have been annoying me","One alarming thing about us logging this in general - if people choose to export their logs to external storage, this is now exposed in those logs. This helps the localhost and SSH based user so I understand why this is here, just a note for the future. @rgbkrk good call. I've switched it so that it only logs the token if it's been automatically generated. Setting a token via config would result in nothing logged. @minrk great, thank you! @minrk Looks good. Is this ready to merge? Thanks, @gnestor and @rgbkrk!","Do you have the Lastpass extension? See #1966. Yup -- That was it.  I tried to look for it but I think my search for tickets must have been limited to 'open' issues. Sorry for the noise and thanks for the help!\r\n\r\n No worries. Searching for punctuation is hard in any case. I can find it easily because I remembered it and searched for Lastpass. ;-)","Thanks, but I think it's correct as is; it says '*without* an active kernel'.","If you're trying to report an issue, please let us know. For now, I'll assume you're just experimenting with Github.","I think that error means it's finding an older version of IPython installed somewhere (maybe from dnf?). Try uninstalling all IPython and Jupyter related stuff you can find, and then installing again. @takluyver Thanks. It works for me.","That would be super neat! I've wanted this as well. On a Windows surface (pro|book), it would be nice to be able to pop open an area to start drawing in a similar fashion to how we do in OneNote.\r\n\r\nUI wise, I'd love to be able to write directly into a new cell as a canvas area and save that as `image/png`. It's up to a notebook implementation to handle this as they see fit.\r\n\r\nAs for implementation, I think it would be nice if there was a generic yet specified field for mime bundles similar to `display_data` from outputs. Something like:\r\n\r\n```\r\ncell_type: \"mimebundle\",\r\ndata: {\r\n  \"image/png\": ...\r\n}\r\n```\r\n\r\nClearly I'm spitballing here. I know I opened a related issue for being able to put `text/html` on the page without requiring magics (for the benefit of other kernels than IPython). Basically, some way to flip between edit and view mode for a singular mimetype. Related issue: https://github.com/jupyter/notebook/issues/1123 I second @rgbkrk's idea on saving to png.   Re: editing canvas-like images in notebooks\r\nhttps://github.com/uclmr/egal","Continuing in #8.\n","@ssunkara1, does this look better to you?\n thanks @jasongrout This looks good!\n","100%. I didn't realize that it had switched the default.\n","Do you have a password set in `/home/phil/.jupyter/jupyter_notebook_config.py`? If not, you might be hitting the new token authentication introduced in 4.3.0, which should be clarified in 4.3.1. Can you check the log output of the server? Hi!\r\nYes, I do have a password set and when I start the notebook server from the command line (so not via upstart) it asks for and accepts the password.\r\nI'll look for the logs and post them.\r\n\r\nP  hmmm, which raises the question where the log output is written? Can't see anything in /var/log and adding `--debug > /home/philipp/log.file 2>&1` doesn't lead to anything. Hm, that's odd. Are you sure upstart re-loaded the file? It should actually, but could this be a Systemd vs upstart issue? OK! Solved following\r\nhttps://gist.github.com/whophil/5a2eab328d2f8c16bb31c9ceaf23164f\r\n\r\nSo it was a systemd issue. Apparently the upstart service never loaded my configuration, but fell back to whatever old config it could find where ever (I really don't understand where that came from). But now I am up and running. Thanks! ","Do you have a notebook that reproduces this? Something super weird is happening, because it looks like somehow an execute_result and display_data message are getting swapped around. The above error message is shown in the browser in an overlay window above the Jupyter notebook, but only sometimes and I wasn't able to figure out the pattern when it does and when it doesn't. But I have a minimal working example that does already produce the \"Invalid JSON in body of request\" error message in the top right:\r\n\r\n![bildschirmfoto 2016-12-22 um 11 46 39](https://cloud.githubusercontent.com/assets/5837385/21423415/35df4738-c83d-11e6-9e30-6711f5f79a18.png)\r\n\r\n[bug.ipynb.zip](https://github.com/jupyter/notebook/files/668557/bug.ipynb.zip)\r\n\r\nTo reproduce it, you can do \"Kernel -> Restart & Run All\", then \"File -> Save and Checkpoint\", and if that doesn't produce the error message, rerun the last cell (such that it's execution count changes to 4) and then \"File -> Save and Checkpoint\" again. This reproduces the error for me quite reliably, and the file on disk is only overwritten (with the execution count set to 4) after several retries of \"File -> Save and Checkpoint\". I've just run those commands, and I didn't reproduce the error.\r\n\r\nI see you have some extensions enabled in the notebook; can you try disabling those and see if the problem is still reproducible? Still happens when all extensions are disabled. I does seem to depend on the length of the audio. If I reduce the length of the random sequence to 1000 it always works, for 100000 as above, it now sometimes works and sometimes doesn't, and for longer ones it seems to almost always fail. Could you try it with much longer sequences?\r\n\r\nAny hints on how I can see more details of what's failing. In the browser console I just see that the server returns \"API request failed (400): Invalid JSON in body of request\". I have a similar problem using sympy. After I do trigsimp (See last cell)\r\n\r\n<img width=\"1149\" alt=\"screen shot 2017-02-01 at 5 15 51 pm\" src=\"https://cloud.githubusercontent.com/assets/6799189/22515523/05d39112-e8a3-11e6-9fbc-ab4f89ddc188.png\">\r\n\r\nwith the command line error\r\n\r\n<img width=\"829\" alt=\"screen shot 2017-02-01 at 5 23 00 pm\" src=\"https://cloud.githubusercontent.com/assets/6799189/22515556/23bb5462-e8a3-11e6-85ac-2d5d3c031d2f.png\">\r\n\r\n\r\n[JSON_error.ipynb.zip](https://github.com/jupyter/notebook/files/745393/JSON_error.ipynb.zip)\r\n\r\n @dslemusp \r\n\r\nHere's a one character fix for your code: use `Omega` instead of `\\Omega` for your capital omega. Mostly a coincidence that this fixes it, but it does.\r\n\r\nI tracked this down, and it's a doozy. The first thing to note is that it's the plain text (unicode) output, not the latex output that's causing the problem. The second point is that the immediate cause is a bug in Sympy's unicode output, where it allows splitting lines in between a character and its combining characters (dot in this case), which results in the text trying to put the dot on a newline. The third bit is that only Safari seems to be affected, due to an unconditional unicode normalization.\r\n\r\n## Gruesome details:\r\n\r\nA minimal test to reproduce this:\r\n\r\n```python\r\nprint(u'\\n\\u0307x')\r\n```\r\n\r\nCode point [307](http://www.fileformat.info/info/unicode/char/0307/index.htm) is \"combining dot above\", and the issue at hand is that it's appearing after a newline. The utterly bizarre source of the problem is that Safari normalizes text to its combined format (NFC, see [this webkit bug](https://bugs.webkit.org/show_bug.cgi?id=113001)) when submitting ajax requests, so the JSON characters:\r\n\r\n    \\, n, DOT, x\r\n\r\nbecome:\r\n\r\n    \\, N WITH A DOT, x\r\n\r\nboth of which look like:\r\n\r\n    \\\u1e45x\r\n\r\nThe NFC form that webkit sends is invalid JSON because the `\\n` escape is no longer present.\r\n\r\n[This notebook](https://nbviewer.jupyter.org/gist/minrk/24327a18b5b3bff746194962f40636fd) illustrates what's going on.\r\n\r\n## What we can do about it\r\n\r\nI don't see a way to tell webkit to knock it off, so there are two options I can see:\r\n\r\n1. use ascii-safe JSON.stringify on Safari\r\n2. normalize to NFD server-side before parsing with JSON (optionally only after failed parse, since this should be rare)\r\n\r\nI'm not thrilled about either one, especially for such a narrow case. Since it does require truly bizarre sequence of events to hit it.\r\n @minrk \r\n\r\nThank you for figuring this out. I am relatively new in python/Jupyter and Im not sure Im following quite well the specifics of the issue (Im not really a skilled programmer), but I understand that there is an issue on the way the text is being passed by safari. Indeed it is quite surprising that removing the `\\` from the `\\Omega` solves it.\r\n\r\nThank you again","Thanks. If this is backported, the changes in `setupbase.py` should not be included, as that's not a `logging.Logger`, but `distutils.log`, which doesn't have a `warning` function. This was fixed in the webpackify PR, which made several other setupbase changes, but that's not for backport. Not hard to do, but easy to forget, as these warning conditions don't come up often.","Thanks, @gnestor!","Did we decide not to do the thing with enforcing the empty JSON body? I've lost track of all the different pieces. > Did we decide not to do the thing with enforcing the empty JSON body?\r\n\r\nYes, that would be redundant, and looking around at code, sending a JSON body for requests that take no args seemed more inconvenient/annoying than adopting standard xsrf techniques.","@ellisonbg any hints on where to look if we wanted to fix and submit a PR?  thanks one way to prevent is behavior is to removed the auto-completed close-parenthesis prior to pressing newline looks to be an issue with CodeMirror, opened a ticket:\r\n\r\nhttps://github.com/codemirror/CodeMirror/issues/4461 Thanks! That is helpful because I hadn't looked into it enough to know\nhow/where to fix it ;-)\n\nOn Fri, Dec 23, 2016 at 10:56 AM, thinkingatoms <notifications@github.com>\nwrote:\n\n> looks to be an issue with CodeMirror, opened a ticket:\n>\n> codemirror/CodeMirror#4461\n> <https://github.com/codemirror/CodeMirror/issues/4461>\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2006#issuecomment-269024905>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0B7BUlc2nHqvE95z3cDqnjLfVcC2ks5rLAtMgaJpZM4LTfM2>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","Minor question above, but otherwise looks good, thx! docs and tests added Great idea. I'd be comfortable with it being a top level command too, no strength behind that opinion though. Anything else to do on this? It looks ready to me. I'm all set here.","Thanks, works great!","In the future we can probably make the tables more interactive to the point of being able to adjust the width by hand.",":+1: \n That makes perfect sense to me too.\n","You're using the Lastpass Chrome extension, see #1966 and #1995. Argh, I think the bigger bug here is Github's inability to handle punctuation or exact text in searches.\r\n\r\nThanks for the quick response! Yup, Github search is pretty poor, and searching for punctuation is hard at the best of times. For anyone that comes across this thread, LastPass claims the issue should be fixed in the next update:\r\nhttps://forums.lastpass.com/viewtopic.php?f=12&t=236645&start=10","Nice, thanks for taking this on, Min. Thank you for switching this back. I got the shortcut editor working by copying preact from the npm packages to components, which seems to be simple enough. @minrk I am finding that the Create Assignment celltoolbar from nbgrader doesn't work with master. I have tracked it down to multiple `CellToolbar` classes being present. Looks like there is one that is created from all of the files that use require.js and another from the notebook file which uses the import syntax. The version used in the nbextension to register the CTB isn't the same as the one used in the notebook, thus, it doesn't show up.\r\n\r\nDo you think this is related to other issue that this PR is fixing? Could you post links to the other issues we are seeing to help me understand what is going on. @ellisonbg yes, that's the primary motivation for this PR. *Loads* of extensions and custom.js don't work with master due to the duplicates created by the webpack build, and we never found a simple fix other than going back to the previous build setup. #1431 was the first report of the same issue, I think. Is this still WIP, or is it ready for review/merge now? I just got the tests passing a few minutes ago, so I'm taking WIP off now. Should be ready for review.\r\n\r\nI had to upgrade phantom and casper to get the tests to run, which required a few small bugfixes not related to the rollback to require.js. :clap:  well done @minrk! @minrk, do you mind updating the top level comment to reflect the preact status? @blink1073 done, thanks.\r\n\r\nThe one last thing I want to do is add a test that covers #1431, which I'm working on now. test added and passing \ud83c\udf86 :tada:","I don't think there's any dedicated API for that. Is it sufficient to just make periodic HTTP requests and see if it responds within (for example) 5 seconds? ok, thank you~","Looking at the code, it's finding a `.git` directory where the notebook is, as if it's a git clone, but it's not finding the `git` command on the system. We shouldn't be trying to run `git` on import, though. It's not clear how to get a git hash w/o running `git` and, unless I'm\nmistaken, that's exactly what it is aiming to do.\n\nIs there something like an version of\n`ipython.genutils.testing.decorator.onlyif_cmds_exist` that works outside\ntesting environments, so that we can at least catch it before trying to run\nit (possibly using  `py3compat.which()`)?\n\nOn Wed, Dec 28, 2016 at 09:30 Thomas Kluyver <notifications@github.com>\nwrote:\n\n> Looking at the code, it's finding a .git directory where the notebook is,\n> as if it's a git clone, but it's not finding the git command on the\n> system. We shouldn't be trying to run git on import, though.\n>\n>\n>\n>\n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2013#issuecomment-269510465>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ACXg6PKwTJsNWoWvvWfbrui3v-PlDn2Sks5rMpyWgaJpZM4LVS3H>\n> .\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n I think a couple of changes are required. First, we shouldn't be doing this\nstuff in the top level of the module, where it runs on import. Generally,\nimporting is expected to be fast and simple, which certainly does not cover\nlaunching subprocesses.\n\nSecond, we should catch errors from running git so getting system info\ndoesn't fall over entirely if we can't get a commit hash.\n\nOn 28 Dec 2016 8:01 p.m., \"Michael Pacer\" <notifications@github.com> wrote:\n\nIt's not clear how to get a git hash w/o running `git` and, unless I'm\nmistaken, that's exactly what it is aiming to do.\n\nIs there something like an version of\n`ipython.genutils.testing.decorator.onlyif_cmds_exist` that works outside\ntesting environments, so that we can at least catch it before trying to run\nit (possibly using `py3compat.which()`)?\n\nOn Wed, Dec 28, 2016 at 09:30 Thomas Kluyver <notifications@github.com>\nwrote:\n\n> Looking at the code, it's finding a .git directory where the notebook is,\n> as if it's a git clone, but it's not finding the git command on the\n> system. We shouldn't be trying to run git on import, though.\n\n>\n>\n>\n>\n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2013#issuecomment-269510465>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/\nACXg6PKwTJsNWoWvvWfbrui3v-PlDn2Sks5rMpyWgaJpZM4LVS3H>\n> .\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n\n\u2014\nYou are receiving this because you commented.\n\nReply to this email directly, view it on GitHub\n<https://github.com/jupyter/notebook/issues/2013#issuecomment-269532400>,\nor mute the thread\n<https://github.com/notifications/unsubscribe-auth/AAUA9XbXGEB2ltdNN0wR05wv_AIpgVlaks5rMsAwgaJpZM4LVS3H>\n.\n","Ah, nevermind. I needed to raise `AttributeError` in `__getattr__`. Yep. To clarify, your `__getattr__` implementation effectively pretends that the object has any attribute we check for (so `hasattr(a, x)` works for any x). If we detect that an object is doing that, we don't trust it when it claims to have methods like `_repr_html_`.","Try removing and reinstalling pyzmq. It looks like libzmq may have been upgraded underneath it, as well. After building an env w/ conda including python==3.6.0, I received an error trying to install jupyter:\r\n```\r\n$ conda install jupyter\r\nFetching package metadata .......\r\nSolving package specifications: ....\r\n\r\n\r\nUnsatisfiableError: The following specifications were found to be in conflict:\r\n  - jupyter\r\n  - python 3.6*\r\nUse \"conda info <package>\" to see the dependencies for each package.\r\n``` That means that none of the conda channels you're using have packaged jupyter for Python 3.6 yet. You can stick to Python 3.5 to use it with conda packages, or use pip to install Jupyter in a 3.6 env. Alternatively you could try to install separately jupyter components which are already available for 3.6:\r\n\r\n    conda install jupyter_client jupyter_console jupyter_core notebook\r\n\r\nThis was enough for me to get notebooks up and running. Ok. Seems to work\nwikiped <notifications@github.com> schrieb am Mi. 11. Jan. 2017 um 19:45:\n\n> Alternatively you could try to install separately jupyter components which\n> are already available for 3.6:\n>\n> conda install jupyter_client jupyter_console jupyter_core notebook\n>\n> This was enough for me to get notebooks up and running.\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2015#issuecomment-271957328>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABnc9NXZA1cpTIsENr2E7lu2i3VGlgAoks5rRSMmgaJpZM4LWwew>\n> .\n>\n Closing as there's nothing to do here; it's up to conda-forge and Anaconda to repackage things. I know that's underway at conda-forge at least.","Marking as \"JupyterLab\" issue. \r\n\r\nI believe that for touch screen and tablet in general there are easy way to have improvement.\r\nIn particular I believe that having a vertical \"thumb accessible\" toolbar on left (or right) can be of great use. \r\n\r\nFor example, faking it with `custom.js`\r\n\r\n```css\r\ndiv#maintoolbar-container {\r\n    display:block;\r\n    position:absolute;\r\n    right:20px;\r\n    top: 60px;\r\n    height: 80vh;\r\n    width: 50px\r\n}\r\n\r\ndiv#maintoolbar-container > .btn-group {\r\n      right: 0;\r\n      margin-bottom: 10px;\r\n}\r\n\r\ndiv#maintoolbar-container > .btn-group > .btn{\r\n    display: block;\r\n    height: 40px;\r\n    width: 40px;\r\n    margin: 0;\r\n    padding:0;\r\n}\r\n\r\n#notebook-container {\r\n    padding-right: 80px;   \r\n}\r\n```\r\n\r\nTo tweak of course.... \r\n\r\n![screen shot 2017-02-01 at 15 28 07](https://cloud.githubusercontent.com/assets/335567/22530955/1948e2de-e893-11e6-9b33-650de37e590f.png)\r\n\r\nI'm guessing @cameronoelsen and @ellisonbg may want to have a look.  Yes! I think this would really improve the UI on mobile. Thanks for mocking\nthis up. Would be especially nice if we could get the buttons to not scroll\nwith the notebook page. Love this!\n\nOn Wed, Feb 1, 2017 at 3:32 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Marking as \"JupyterLab\" issue.\n>\n> I believe that for touch screen and tablet in general there are easy way\n> to have improvement.\n> In particular I believe that having a vertical \"thumb accessible\" toolbar\n> on left (or right) can be of great use.\n>\n> For example, faking it with custom.js\n>\n> div#maintoolbar-container {\n>     display:block;\n>     position:absolute;\n>     right:20px;\n>     top: 60px;\n>     height: 90vh;\n>     width: 50px\n> }\n> div#maintoolbar-container > .btn-group {\n>       right: 0;\n>       margin-bottom: 10px;\n> }\n> div#maintoolbar-container > .btn-group > .btn{\n>     display: block;\n>     height: 40px;\n>     width: 40px;\n>     margin: 0;\n>     padding:0;\n> }\n> #notebook-container {\n>     padding-right: 80px;\n> }\n>\n> To tweak of course....\n>\n> [image: screen shot 2017-02-01 at 15 28 07]\n> <https://cloud.githubusercontent.com/assets/335567/22530955/1948e2de-e893-11e6-9b33-650de37e590f.png>\n>\n> I'm guessing @cameronoelsen <https://github.com/cameronoelsen> and\n> @ellisonbg <https://github.com/ellisonbg> may want to have a look.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2016#issuecomment-276818038>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0DE4o24DAh1vP2jtw-urkWuH12gXks5rYRYCgaJpZM4LXxn4>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Would be especially nice if we could get the buttons to not scroll\r\nwith the notebook page\r\n\r\nLet me show you a live version of above css. \r\n\r\n![no-scroll](https://cloud.githubusercontent.com/assets/335567/22531886/b85bd4da-e898-11e6-8dab-e97be1c2408a.gif)\r\n Actually there is a double scrollbar bug with  `height: 90vh;`, changed to `80vh` where it solves things (above comment edited). \r\n\r\nI don't see any clean way to switch from L to R purely in CSS, and this is kinda a hack. \r\nI'm even wondering if this UI would not even be better than the current toolbar for desktop usage. (with some refinements)  Hi,\r\n\r\nI would like to modify my jupyter notebook installation as you have done it. \r\nBut I tried to copy your css code in a custom.js file and put it in the folder ~/.jupyter/custom/custom.js\r\nBut this does move the toolbar to the right.\r\n\r\nCould you give a little advise how to get the toolbar not scrolling to the right?\r\n\r\nThanks in advance. > custom.js\r\n\r\nDid you ment `custom.css` ? \r\nTry to force-refresh also.","Disregard that, just received a PyCharm update that fixed it. ","[`@peter-ch` commented](https://github.com/ipython/ipython/issues/8467#issuecomment-105132627): I can try to patch the code myself to get this behavior. Just something quick and dirty that works. Is it easy? \n [`@takluyver` commented](https://github.com/ipython/ipython/issues/8467#issuecomment-105072967): It's not exactly a bug, just a limitation of the way terminals are done at present.\n I was not able to apply the following label(s): notebook  [`@Carreau` commented](https://github.com/ipython/ipython/issues/8467#issuecomment-270011203): @Meeseeksdev migrate to jupyter/notebook [`@takluyver` commented](https://github.com/ipython/ipython/issues/8467#issuecomment-105249185): I don't think it is easy, unfortunately. IIRC, three separate parts of the\ncode would need changes. I'll try to look into this once we've got 4.0 out.\n","Closing as dupe for #2021","The executable in your `kernel.json` is `u'/usr/local/lib/python2.7/dist-packages'`, which is a directory, not a valid executable. What is the command you expect to run to launch this kernel? @minrk I'm using jupyter notebook command and on it's URL under new drop down i'm choosing my kernel name and it's getting failed to start kenrnel.\r\nError: \r\n\r\n**\r\n\r\n```\r\n> Traceback (most recent call last):\r\n>   File \"/usr/local/lib/python2.7/dist-packages/notebook/base/handlers.py\", line 503, in wrapper\r\n>     result = yield gen.maybe_future(method(self, *args, **kwargs))\r\n>   File \"/usr/local/lib/python2.7/dist-packages/tornado/gen.py\", line 1015, in run\r\n>     value = future.result()\r\n>   File \"/usr/local/lib/python2.7/dist-packages/tornado/concurrent.py\", line 237, in result\r\n>     raise_exc_info(self._exc_info)\r\n>   File \"/usr/local/lib/python2.7/dist-packages/tornado/gen.py\", line 1021, in run\r\n>     yielded = self.gen.throw(*exc_info)\r\n>   File \"/usr/local/lib/python2.7/dist-packages/notebook/services/sessions/handlers.py\", line 75, in post\r\n>     type=mtype))\r\n>   File \"/usr/local/lib/python2.7/dist-packages/tornado/gen.py\", line 1015, in run\r\n>     value = future.result()\r\n>   File \"/usr/local/lib/python2.7/dist-packages/tornado/concurrent.py\", line 237, in result\r\n>     raise_exc_info(self._exc_info)\r\n>   File \"/usr/local/lib/python2.7/dist-packages/tornado/gen.py\", line 1021, in run\r\n>     yielded = self.gen.throw(*exc_info)\r\n>   File \"/usr/local/lib/python2.7/dist-packages/notebook/services/sessions/sessionmanager.py\", line 79, in create_session\r\n>     kernel_id = yield self.start_kernel_for_session(session_id, path, name, type, kernel_name)\r\n>   File \"/usr/local/lib/python2.7/dist-packages/tornado/gen.py\", line 1015, in run\r\n>     value = future.result()\r\n>   File \"/usr/local/lib/python2.7/dist-packages/tornado/concurrent.py\", line 237, in result\r\n>     raise_exc_info(self._exc_info)\r\n>   File \"/usr/local/lib/python2.7/dist-packages/tornado/gen.py\", line 1021, in run\r\n>     yielded = self.gen.throw(*exc_info)\r\n>   File \"/usr/local/lib/python2.7/dist-packages/notebook/services/sessions/sessionmanager.py\", line 92, in start_kernel_for_session\r\n>     self.kernel_manager.start_kernel(path=kernel_path, kernel_name=kernel_name)\r\n>   File \"/usr/local/lib/python2.7/dist-packages/tornado/gen.py\", line 1015, in run\r\n>     value = future.result()\r\n>   File \"/usr/local/lib/python2.7/dist-packages/tornado/concurrent.py\", line 237, in result\r\n>     raise_exc_info(self._exc_info)\r\n>   File \"/usr/local/lib/python2.7/dist-packages/tornado/gen.py\", line 285, in wrapper\r\n>     yielded = next(result)\r\n>   File \"/usr/local/lib/python2.7/dist-packages/notebook/services/kernels/kernelmanager.py\", line 87, in start_kernel\r\n>     super(MappingKernelManager, self).start_kernel(**kwargs)\r\n>   File \"/usr/local/lib/python2.7/dist-packages/jupyter_client/multikernelmanager.py\", line 110, in start_kernel\r\n>     km.start_kernel(**kwargs)\r\n>   File \"/usr/local/lib/python2.7/dist-packages/jupyter_client/manager.py\", line 243, in start_kernel\r\n>     **kw)\r\n>   File \"/usr/local/lib/python2.7/dist-packages/jupyter_client/manager.py\", line 189, in _launch_kernel\r\n>     return launch_kernel(kernel_cmd, **kw)\r\n>   File \"/usr/local/lib/python2.7/dist-packages/jupyter_client/launcher.py\", line 123, in launch_kernel\r\n>     proc = Popen(cmd, **kwargs)\r\n>   File \"/usr/lib/python2.7/subprocess.py\", line 710, in __init__\r\n>     errread, errwrite)\r\n>   File \"/usr/lib/python2.7/subprocess.py\", line 1327, in _execute_child\r\n>     raise child_exception\r\n> OSError: [Errno 2] No such file or directory\r\n```\r\n\r\n**\r\nbut if i'm not running jupyter notebook and try to run it using node js it throws different error.\r\nPlease see below mention nodejs snippet.\r\n```\r\nvar eclairjs = require('eclairjs');\r\nvar spark = new eclairjs();\r\nvar sc = new spark.SparkContext(\"local[*]\", \"Simple Text\");\r\n\r\nvar data = sc.parallelize([1,2,3,4,5,6,7,8,9,0]);\r\n\r\ndata.collect().then(function(val) {\r\n  console.log(\"Success:\", val);\r\n\r\n  sc.stop().then(process.exit);\r\n}).catch(function(err) {\r\n  console.log(\"Error:\", err);\r\n  sc.stop().then(process.exit);\r\n});\r\n\r\n```\r\nError:\r\n\r\n> API request failed: Unexpected token < in JSON at position 0\r\n> Failed to start Jupyter session { event: undefined,\r\n>  xhr: \r\n>   { UNSENT: 0,\r\n>     OPENED: 1,\r\n>     HEADERS_RECEIVED: 2,\r\n>     LOADING: 3,\r\n>     DONE: 4,\r\n>     readyState: 4,\r\n>     onreadystatechange: null,\r\n>     responseText: '<!DOCTYPE html>\\n<html>\\n  <head>\\n    <meta http-equiv=\"Content-type\" content=\"text/html; charset=utf-8\"/>\\n    <title>Chronograf</title>\\n  <link rel=\"shortcut icon\" href=\"/favicon.ico\"><link href=\"/style.css\" rel=\"stylesheet\"></head>\\n  <body>\\n    <div id=\\'react-root\\'></div>\\n  <script type=\"text/javascript\" src=\"/manifest.feab17100a1ee5216fe1.js\"></script><script type=\"text/javascript\" src=\"/vendor.a58fbf90d1707f1cd128.js\"></script><script type=\"text/javascript\" src=\"/app.213b96b6faf8023f24b8.js\"></script></body>\\n</html\\n',\r\n>     responseXML: '',\r\n>     status: 200,\r\n>     statusTe...\r\n\r\nActually i want to use spark in nodejs. How did you install this js kernel? The command to run that it has installed is not valid, so I'm guessing the kernel's installation is the source of the problem.","My hope was to not have any more new feature releases on 4.x, so we can push toward getting 5.0 out. But if there's a strong reason that this needs to be in 4.x rather than 5.0, that's okay, too. > But if there's a strong reason that this needs to be in 4.x rather than 5.0, that's okay, too.\r\n\r\nI think it depends on the timing of ipywidgets 6 vs notebook 5 - if notebook 5 is delayed for a long time after ipywidgets 6, I'd like to go ahead and get this in notebook 4.x. For now, we can leave the PR open for anyone that wants to run the ipywidgets beta on notebook 4.x. @takluyver - can we still have a 4.4 milestone? Even if we release 5.0, a lot of people won't be able to update to it soon, and this makes it possible for ipywidgets 6.x to work in 4.x. I'm hoping that the 5.0 release won't particularly be a more problematic upgrade than a new 4.x release. We're short enough on developer time here that I don't feel like we've got effort to spare for more 4.x releases. > I'm hoping that the 5.0 release won't particularly be a more problematic upgrade than a new 4.x release. We're short enough on developer time here that I don't feel like we've got effort to spare for more 4.x releases.\r\n\r\nI'm happy to take a crack at doing a very simple 4.4 that just has this backport in it. > I'm happy to take a crack at doing a very simple 4.4 that just has this backport in it.\r\n\r\nBut I'll wait until we are closer to a widgets 6.x release - if it ends up taking a lot longer than 5.0, then it's probably a moot point.\r\n\r\nFor now, I'll make a 4.4 milestone again and put this PR in it just to keep track of it. We may decide to forgo the 4.4 after releasing 5.0. @gnestor I have tested this locally and it works well.\r\n\r\nWe are nearing the ipywidgets 6.0 release and this is a real blocker for us. Would you guys be OK with pushing a notebook 4.4 out so that we can iterate on widgets? @SylvainCorlay That's ok by me. @takluyver What say you? It seems like we are still at least a week out from a 5.0 release... OK, if we must, but let's try not to get drawn into any more releases - it pulls away developer time, and we don't have very much of that for notebook now. @jasongrout @SylvainCorlay @gnestor have all been working *really* hard getting ready for for the 6.0 release of ipywidgets. Some aspects of this release as it relates to notebook releases:\r\n\r\n* Regardless of when notebook 5.0 comes out, we will need to release a 4.4 with the ipywidget fixes. Too many folks are still running notebook 4.x to not have latest ipywidgets work on it.\r\n* I think we are still a few weeks away from a 5.0 notebook release (see #2150).\r\n* Releasing 4.4 should be much work as there hasn't been much work.\r\n\r\n@gnestor can you take the lead on a 4.4 release? I opened an issue to discuss the 4.4 release #2161 @ellisonbg Yes, cutting a new release shouldn't take me more than an hour, so not a big deal. That would be great. Does anyone know of anything else that should be\nbackported to 4.4?\n\nOn Wed, Feb 8, 2017 at 11:32 AM, Grant Nestor <notifications@github.com>\nwrote:\n\n> @ellisonbg <https://github.com/ellisonbg> Yes, cutting a new release\n> shouldn't take me more than an hour, so not a big deal.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/2022#issuecomment-278436320>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0LshqWPQwhdNzeRhlLsWM4pgvM93ks5rahhigaJpZM4LbR80>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Let's ping the mailing list on that too. I don't know of anything else. I'll write up a short paragraph for release notes for this pr @jasongrout If you put the release notes here, I will add them to the changelog for you \ud83d\udc4c  @ellisonbg @gnestor thanks a lot for this. @jasongrout Better yet, comment on this PR regarding releast notes: https://github.com/jupyter/notebook/pull/2163","To me it seems that this is a bug in Ipython rather than in the notebook, since I was able to reproduce the same behavior in a simple ipython shell with the command\r\n```\r\nIn [1]: %%bash\r\n   ...: echo '1'\r\n   ...: sleep 3\r\n   ...: echo '2'\r\n   ...: \r\n```\r\nwhereas\r\n```\r\nIn [2]: import time\r\nIn [3]: print('1') ; time.sleep(3) ; print('2')\r\n```\r\nprints first the 1 and three seconds later the 2.","For links: likely the same issue as #1431.","Ping @Carreau  Yeah, I think we have seen this one before. The problem is we have no clue why. \r\nI'm going to guess a ZMQ/Qt event loop integration. \r\n\r\nIt's really complex to debug, and none of us a Qt5 experts. I'll add that on my loong todo list. ","Cool!","Ping @Carreau ","Thanks :-)","I typically set up tunnels with:\r\n\r\n```bash\r\nssh -L 9999:127.0.0.1:8888 aws-host\r\n```\r\n\r\nthen open `127.0.0.1:9999` on my computer, which is forwarded to `127.0.0.1:8888` on the remote machine. This has worked for me with AWS and other remote services.","Addresses some features requested in #184 \n","[`@ellisonbg` commented](https://github.com/ipython/ipython/issues/805#issuecomment-3360457): There are two different issues here: one is the idea of grouping, the other the idea of nesting.  Fernando and I have talked extensively about the fact that the way Mathematica handles grouping through nesting is quite annoying if you use it for anything non-trivial.  Our idea is to implement grouping, but not nesting.  How would this work?\n\nWe would keep the notebook as a linear sequence of cells.  We would introduce different levels of heading cells, but these would be flat/inline (like latex section/subsection/subsubsection) rather than nested like the Mathematica notebook.  We feel this style of document will be easier to import/export to different formats and is much simpler for users to manage and for us to develop a UI for.  To introduce grouping like functionality, we thought about using the locations of different heading levels to identify logical groups that could be collapsed, moved and treated as a unit.  We feel this would give the desired benefits of grouping without the complexity of nesting.  The first step along with path is to create the heading cells, them we can start to think about a UI for using them as logical groups.\n [`@minrk` commented](https://github.com/ipython/ipython/issues/805#issuecomment-2135636): We have definitely discussed this in our many design conversations (Skype or IRC, so not published), and do plan to do it.  \n\nWe haven't been creating Issues for most such things, as Issues are too heavyweight for the very large number of improvements/little fixes we have planned.  The current notebook is _very far_ from where we see it going.  We do need a lighter weight palace to put these, which probably means the [wiki](http://wiki.ipython.org).\n\nThough Issues probably do make sense for the slightly larger-scale things like this one, such as integrating with git, better printing/publishing, etc.\n [`@ccordoba12` commented](https://github.com/ipython/ipython/issues/805#issuecomment-3753073): I've been following the notebook development quite closely and I think @ellisonbg is doing a terrific job! I just have a couple of thoughts to add to this discussion:\n1. My original request was not directed exactly towards collapse/expand but more broadly to cell grouping. Collapse/expand is one of the things you can do with grouping and it's very important. I think it's more or less the equivalent of the \"include document\" functionality in Lyx: it lets you hide some parts of the document to focus your attention on others.\n2. However, there are two more things you can do with grouping (as far as I can tell):\n   - Delete/move a group. In Mathematica this is as easy as: select the group bracket (the blue vertical line, I mean), hit _Ctrl+X_ and then _Ctrl+V_ in another part of the notebook. I read in the last @fperez blog post that you plan to introduce an outline explorer similar to the Lyx one. Since this one also has the ability to move sections, I hope you could reproduce this functionality in IPython (although that seems a bit hard to do).\n   - Evaluate a particular group. Perhaps this is not well known but, again in Mathematica, if you select a group bracket and hit Shift+Enter, you can evaluate just that group. I find this quite neat and useful but I don't know if you could implement it with current flat model.\n\nAs a side note: @ellisonbg, I haven't experienced in Mathematica the indent/dedent problem you described: to indent you just have to introduce a new heading level with a lower precedence from the previous one and Mathematica will create the group automatically until the next higher heading it finds. To dedent you change the type of your group heading to a higher precedence one.\n\nTo conclude: I'm not saying that Mathematica's way of doing things is the only possible one but that IMHO the cases I described are worth considering when you're taking the next design decisions about grouping.\n\nJust my two cents,\nCarlos\n [`@ellisonbg` commented](https://github.com/ipython/ipython/issues/805#issuecomment-3388768): On Fri, Jan 6, 2012 at 2:26 AM, Min RK\r\nreply@reply.github.com\r\nwrote:\r\n\r\n> It seems to me that explicit nesting is _less_ complex than implicit nesting based on the level and location of header cells. \u00a0Isn't it easier to flatten a nested structure than to nest a flat structure? \u00a0I imagine we will need both notions internally, so should we not pick the one from which is is most sensible to make the other?\r\n\r\nFrom the computer science/data structure perspective, I completely\r\nagree that the theoretically \"correct\" data structure for the notebook\r\nis a tree.  But there are important reasons why this is not the right\r\nmodel for the notebook.\r\n- When it comes to authoring documents of almost any kind (pen/paper,\r\n  Word, Google Docs, Latex) the model that users are used to is a linear\r\n  sequence of text and headings with any hierarchy being only implicitly\r\n  defined by how heading levels are used.  Presenting an actual\r\n  hierarchy to users requires them to track that information in their\r\n  head increasing the cognitive load.  They have to translate thoughts\r\n  like \"I want to move section 1.B after section 1.C and rename it\r\n  section 2\" to their nested equivalent.\r\n- When I compare my experience in authoring documents in Mathematica\r\n  (explicit nesting) with LyX (flat, implicit nesting) there is a huge\r\n  difference.  In LyX, I just set the heading level of a section and\r\n  move on.  Once those headings are set, I can just type content without\r\n  any thought as to what level of nesting it appears at. With\r\n  Mathematica, representing sections using explicit nesting is horribly\r\n  painful - so much so that I avoid using it if at all possible.  When\r\n  you edit nested documents there are some operations (insertion/paste\r\n  is the worst, but also with indent/dedent) that are ambiguous.\r\n  Mathematica tries to guess how you want to handle these operations,\r\n  but inevitably, you end up fighting with it.  This is not a problem\r\n  with Mathematica per-se, but with the underlying model which itself\r\n  has these ambiguities.\r\n- UI complexity.  If you have a deeply nested, real hierarchy, you\r\n  have to reflect that in the UI.  Mathematica uses a sequence of\r\n  vertical lines on the R side of the document that span the\r\n  section/cells they group together.  For one level of nesting this\r\n  isn't bad.  But for multiple levels of nesting, you end up with a rats\r\n  nest of vertical lines and it become extremely difficult to figure out\r\n  which one you want to click to manage things.\r\n- Implementation complexity.  The linear sequence of cells is simple\r\n  to implement in both the notebook format and the UI.  I am\r\n  particularly concerned about the UI becoming too complex that we can't\r\n  implement it in a clean robust manner in a reasonable amount of time.\r\n\r\n> I also think performing actions on a group is more straightforward with nested structures (e.g. increase/decrease level, relocation, collapse/expand) because you invariably have the whole group as a single element in the structure, no matter what level. \u00a0When the list is flat, you have to reconstruct the group every time you perform group actions.\r\n\r\nWhile agree at the theoretical level, I have never found this to be\r\nthe case in authoring documents.\r\n [`@ellisonbg` commented](https://github.com/ipython/ipython/issues/805#issuecomment-3747786): The master now has the notion of heading cells.  We should not be able to create a UI that will collapse and expand sections based on their headings.\n [`@minrk` commented](https://github.com/ipython/ipython/issues/805#issuecomment-3382897): It seems to me that explicit nesting is _less_ complex than implicit nesting based on the level and location of header cells.  Isn't it easier to flatten a nested structure than to nest a flat structure?  I imagine we will need both notions internally, so should we not pick the one from which is is most sensible to make the other?\n\nI also think performing actions on a group is more straightforward with nested structures (e.g. increase/decrease level, relocation, collapse/expand) because you invariably have the whole group as a single element in the structure, no matter what level.  When the list is flat, you have to reconstruct the group every time you perform group actions.\n [`@minrk` commented](https://github.com/ipython/ipython/issues/805#issuecomment-3394751): Sounds reasonable.  I suppose the bulk actions for which the nested structure makes things simpler don't actually come up that often.\n [`@ellisonbg` commented](https://github.com/ipython/ipython/issues/805#issuecomment-3753965): We do support cell groupings, but we are choosing to use Heading levels to define those cell groupings.  You are right that Mathematica allows other types of cell grouping, but we feel that this more constrained model is cleaner.\n\nThere is no reason at all why we can't add other group level actions such as move, delete, evaluate, etc.  We have to develop the UI for this, but I think the it is clear at the conceptual level.  The core underlying logic we will need is the following:  Given a Heading cell, we need to be able to walk the following cell and figure out which of them are \"under\" that heading.  I think the basic logic is that you keep going until you encounter another heading that has the same level or less as the starting one.  Once you have the list of contained cells, you can start to apply actions to the group of them.  The challenging part will be designing a clean and functional UI for all of this.\n [`@ellisonbg` commented](https://github.com/ipython/ipython/issues/805#issuecomment-3772480): I will have to think more about this, but it definitely takes the\nnotebook in a literate programming direction.  I almost think the best\nway of handling this would be some sort of syntax within the cells,\nmaybe that taps into the multiline magic ideas:\n\n%mycell\nclass Foo(object):\n\n...a Markdown cell or so...\n\n%mycell\n    def **init**(self, a):\n        self.a = a\n\nIt would be trivial to piece together and execute the union of these.\nIt also keeps the actual UI complete clean and simple.  We could also\nuse this to introduce other grouping symantics.  The downside is that\nit clutters up the code cells themselves.\n\nI do like Min's idea of having a \"Run Union of Cell Group\" action that\nis based on the heading grouping.  In some ways that is the simplest\nway of going and would require no additional UI of cell clutter.\n\nI think this would make the notebook extremely literate - more so than\nany environment I have seen before.\n\nOn Wed, Feb 1, 2012 at 7:53 PM, Fernando Perez\nreply@reply.github.com\nwrote:\n\n> There's something I want to add here that I've been cooking in my head but so far have only mentioned to @stefanv at a whiteboard... \u00a0a different kind of 'cell groups'.\n> \n> The one thing where even the notebook doesn't work very well if you want to mix text-based explanations with code, is the definition of complex objects. \u00a0The reason is a limitation imposed by Python itself: Python does not allow you to declare a class in multiple execution chunks (well, you can, but only using dynamic hacks that aren't very readable and which I will henceforth ignore).\n> \n> This means that if we start using the notebook for declaring more complex classes, right now they have to live in a single, long cell. \u00a0This prevents you for example from inserting a text paragraph with a mathematical explanation before continuing with the next method.\n> \n> It occurred to me that if we had a concept of a 'cell group' where all the cells in the group would be _unconditionally_ executed _always together, all of them_, then we'd solve this problem. \u00a0Consider creating a cell group as stated above, then when you hit Shift-Enter from any cell in the group, we actually send for execution the union of all the code cells in the group ignoring non-code ones. \u00a0Then, Python would always see them as a single cell, while the human could break up the visual layout between code and text as best fit the problem.\n> \n> There are some UI challenges in how to best do this, but the more I think about it the more I like this idea. \u00a0It would make the notebook a very nice environment for literate programming in a way that no existing python tool allows. \u00a0Thoughts?\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/ipython/ipython/issues/805#issuecomment-3772232\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\nbgranger@calpoly.edu and ellisonbg@gmail.com\n [`@fperez` commented](https://github.com/ipython/ipython/issues/805#issuecomment-3772232): There's something I want to add here that I've been cooking in my head but so far have only mentioned to @stefanv at a whiteboard...  a different kind of 'cell groups'.\n\nThe one thing where even the notebook doesn't work very well if you want to mix text-based explanations with code, is the definition of complex objects.  The reason is a limitation imposed by Python itself: Python does not allow you to declare a class in multiple execution chunks (well, you can, but only using dynamic hacks that aren't very readable and which I will henceforth ignore).\n\nThis means that if we start using the notebook for declaring more complex classes, right now they have to live in a single, long cell.  This prevents you for example from inserting a text paragraph with a mathematical explanation before continuing with the next method.\n\nIt occurred to me that if we had a concept of a 'cell group' where all the cells in the group would be _unconditionally_ executed _always together, all of them_, then we'd solve this problem.  Consider creating a cell group as stated above, then when you hit Shift-Enter from any cell in the group, we actually send for execution the union of all the code cells in the group ignoring non-code ones.  Then, Python would always see them as a single cell, while the human could break up the visual layout between code and text as best fit the problem.\n\nThere are some UI challenges in how to best do this, but the more I think about it the more I like this idea.  It would make the notebook a very nice environment for literate programming in a way that no existing python tool allows.  Thoughts?\n [`@minrk` commented](https://github.com/ipython/ipython/issues/805#issuecomment-3772453): Right now, Cell means two things:\n\nA. atom of execution\nB. editable area\n\nAnd @fperez' proposal is to have some situation where one A-Cell refers to multiple B-Cells.  Another phrasing of the same thing is essentially to have rich text comments without having to split a code block into separate executions.\n\nWith the implicit cell groups given by headings, we can actually make this work quite easily with optional behavior in 'run group', where it is _not_ run as separate completely independent executions, but concatenated prior to execution.  This is not difficult, but would lack the enforcement of a special notion of multi-textarea cell, and running the cells individually would be permitted, if not necessarily valid.\n [`@Carreau` commented](https://github.com/ipython/ipython/issues/805#issuecomment-11932657): You can include any library you wish in your custom.js via a simple `$.getScript(url)`\n [`@chiwhalee` commented](https://github.com/ipython/ipython/issues/805#issuecomment-24894459): I think a bookmark navigation panel is  better than collapse/folding idea.  Folding is more suitable for pure source code, while navigation panel more suitable for a document or a notebook.  Just see what MS word, acrabat pdf do; they all use bookmarks. \nNavigation panel should also be much easier to implement.\n [`@hadim` commented](https://github.com/ipython/ipython/issues/805#issuecomment-19898496): Sorry to \"re open\" this issue. But do you have any news about it ? Are you planning to implement such feature or do we need to use custome script with the help of https://github.com/danielstocks/jQuery-Collapse/.\n\nI am convinced this would be a great UI notebook improvement.\n\nPS: I am not talking here about output cells hiding (which is already in ipython 0.13) but the ability to hide or show any part of notebook as well as creating group of cells to be able to hide and show severals cells at the same time.\n [`@janschulz` commented](https://github.com/ipython/ipython/issues/805#issuecomment-11932495): from ipython/ipython#2748: \nIt would be nice to include https://github.com/danielstocks/jQuery-Collapse/ and letting it collapse everything between (manually included) headings.\n [`@janschulz` commented](https://github.com/ipython/ipython/issues/805#issuecomment-24882935): Seems that this is implemented in https://github.com/ipython-contrib/IPython-notebook-extensions/pull/24 \n [`@tmbdev` commented](https://github.com/ipython/ipython/issues/805#issuecomment-6103716): I like the fact that headings now seem to define a hierarchy in the next notebook release.  \n\nI think it would be great if there was an outline window in which this hierarchy was explicitly visible, and that could be used to navigate, reorder, and rename entire subtrees.\n\nNote that a tree structure or hierarchy need not be imposed; rather, it can be inferred on the fly from the content, like many LaTeX editors do.\n [`@chiwhalee` commented](https://github.com/ipython/ipython/issues/805#issuecomment-40856627): Both navigation panel and section folding  have been  implemented.  check out https://github.com/ipython-contrib/IPython-notebook-extensions.  It  is full featured and awsome, satisfy all my need.  Thank those  ipython-contrib guys! \n [`@drorata` commented](https://github.com/ipython/ipython/issues/805#issuecomment-230404089): Is there any update on this front? \n [`@lrq3000` commented](https://github.com/ipython/ipython/issues/805#issuecomment-51730059): Please set them as default, or at least advertise the ipython-contrib because I'm using ipython since v0.10 and I didn't know those features were available. I am excited to try the codefolding and the navigation panel extensions!\n [`@mhooreman` commented](https://github.com/ipython/ipython/issues/805#issuecomment-246610497): Hello,\n\nI would find it very interesting. Is there any update on that?\n\nThanks a lot.\n [`@nthiery` commented](https://github.com/ipython/ipython/issues/805#issuecomment-40823575): I have been using folding in Maple a loong time ago, and have seen colleagues use it very effectively, in particular to maintain a \"laboratory notebook\" of their experiments. Maybe I am biased by being a coder, but I find it more practical and flexible for my use cases than a navigation panel.\n\nIn any case, I believe folding is a key feature; I have seen many people ask for it; personnally that would make me switch to using notebooks rather than terminal sessions (inside emacs).\n\nKuddos in advance to whoever puts energy into it!\n [`@nthiery` commented](https://github.com/ipython/ipython/issues/805#issuecomment-41009789): Cool, thanks for the pointer! It's indeed a good step forward. Kudos to the ipython-contrib guys!\n\nThings I believe would remain to do:\n- Advertise hierarchical_collapse.js in the ipython-contrib wiki\n- Activate this by default in IPython (extensions are great for power users, but folding is a nice basic feature for newcomers, and at this point installing an extension is not a \"one-click\" thing)\n- Add keybord shortcuts (Alt-F as in the codefolding extension?)\n- Use some standard visual scheme (e.g. a little button at the left of the section header, as in the codefolding extension). A button in the title bar is not so practical as it requires moving a lot the pointer back and forth.\n- A cycle through mechanism? (show subsection titles, show all the section, collapose all the section)\n\nThanks!\n I was not able to apply the following label(s): notebook  [`@pjc42` commented](https://github.com/ipython/ipython/issues/805#issuecomment-266886321): in case you find this before you find the extension, this is now implemented at [nbextensions - collapsible_headings](https://github.com/ipython-contrib/jupyter_contrib_nbextensions/tree/master/src/jupyter_contrib_nbextensions/nbextensions/collapsible_headings). seems to work great, many thanks to the contributors... I see that some usernames where not but in backticks when doing the migration. Apologies if you were mentioned and subscribed.  How is this going?\r\nI just worked with a new Jupyter notebook user who complained more than 5 times about not being able to fold chunks of the file like Mathematica in 30 minutes.\r\n\r\nThe vertical visible area of a notebook is only about half (between half and 2/3) of screen on her moderate mac book (the top bar, the browser bars, the tab bar, the scroll bar, then the Jupyter banner)\r\n\r\nSo usually a cell and the figure for that cell occupies more than the full available screen estate, hiding all context information for locating the cell in the full document.\r\n\r\nThus it is crucial to have some navigate aids, be it folding or a live TOC. TOC may be more efficient because it makes use of the extra horizontal space on wide monitors, without cluttering the existing notebook cells.\r\n\r\nWe may actually want a horizontal cell input/output layout too.\r\n\r\n\r\n There is a notebook extension for this: https://github.com/ipython-contrib/jupyter_contrib_nbextensions/tree/master/src/jupyter_contrib_nbextensions/nbextensions/collapsible_headings\r\n\r\nI'm not sure about its current state or compatibility, but if nothing else it's a reference implementation. Thanks for the link. \r\n\r\nThe particular case was affecting `new users` who likely have no idea how to install an extension. Therefore I definitely would recommend including the feature as a builtin.\r\n\r\n","Have you had a look at [nbopen](https://github.com/takluyver/nbopen)?\r\n\r\nI don't think we can associate file types directly on installing a pip/conda package, because it requires changes outside the environment those tools install to. I have not.\r\nI'm looking for a way to make it easier for first-time jupyter users to follow a tutorial.\r\nAnything from the console won't really help the windows users, and installing an additional package that's not included in Anaconda also makes it harder.\r\n\r\nThe change proposed in #1922 seems to make a change outside the environment, right? Is that considered \"dirty\"? I guess I'll open a ticket at anaconda and see if we could change it there - it does put stuff in the .rc file and into the start menu... We may provide the necessary data, but I don't think we'll ever make it so that a `pip install` sets up the association automatically. What happens if you install it in multiple environments? It's going to get confusing. Anaconda might; that has the notion of a defined 'root environment'. Though it could still get confusing if you install two copies of Anaconda. Yeah if you install two copies of anaconda, I think a bunch of things might be confusing (you change the bin PATH on install usually).\r\n\r\nI usually try to report issues in the most upstream place possible, but I agree with you that you might not be the right place to solve this issue.\r\nFeel free to close or keep (to track possible solutions for opt-in solutions). I should add that [nteract](https://nteract.io/), being a desktop app, provides this functionality.  I'm going to close this but let us know if you figure out a way to enable this \ud83d\udc4d","Idle thought: this could be solved by having a switch (and config option) that starts the server itself in the user's home directory, but then changes to the directory where the command is launched for the tree view. It is deliberate, and it is a sort-of security measure. We don't want to expose your whole filesystem over HTTP. It's not a real security boundary, because someone with full access to the server can start a kernel and read files through that, but it means someone needs more than a simple HTTP GET to read files above the directory where you launched it. Yeah that was sort-of my expectation.\r\nHow do you feel about changing the behavior for a local-only server? Too magic?\r\n\r\nThere could be an \"read anywhere if local\" config flag (that I would have like to be on by default because I'm mostly thinking about beginners). I don't want to assume that even a server running on loopback is totally safe. We recently had to fix a nasty issue which could potentially have let a webpage attack a local server through the browser. That also addressed a long-standing concern about other users on the same system using your server. Those examples are hopefully no longer problems, but I don't want to rely entirely on an outer shell of defenses. Yeah, that makes sense. Thanks for the explanation.\r\n\r\nFYI I asked (before I opened this) the anaconda folks to make the startup menu \"Jupyter Notebook\" button launch jupyter in the homefolder. That fix will probably solve most of my use-case. Yep, nbopen also launches has a default option to launch a notebook server in the home folder.","You could override the whole `post` handler in the meantime, but this is simpler and makes sense to me. sorry about the typo in defining passwd_check Thanks!","At the moment, nbconvert (which powers the 'Download as' menu) doesn't do that, because different languages have different ways of commenting things out, and we don't want it to have to know that much about each language. The plan is to allow a separate module to provide e.g. an r specific exporter - see jupyter/nbconvert#361. Actually, looking over that, it's already possible, the only thing we were going to add was a provision for an error message. I'm going to close this as the issue is being tracked at https://github.com/jupyter/nbconvert/issues/361","This is a good point! The notebook uses Bootstrap and jQuery, so this should be trivial... \ud83d\ude4c ","Hi @lincolnfrias! This is possible because the notebook uses CodeMirror and CM supports \"swapLineUp\" and \"swapLineDown\" commands as apart of its Sublime Text keymap bindings. The following tutorial will explain how you can [edit your custom.js file](http://jupyter-notebook.readthedocs.io/en/latest/examples/Notebook/JavaScript%20Notebook%20Extensions.html#custom.js) to enable this: http://blog.rtwilson.com/how-to-get-sublime-text-style-editing-in-the-ipythonjupyter-notebook/ I'm going to close this as [we don't plan on supporting this out-of-the-box](http://blog.rtwilson.com/how-to-get-sublime-text-style-editing-in-the-ipythonjupyter-notebook/). Ok, thanks for the tips.\n\nOn Wed, Jan 25, 2017 at 8:22 PM, Grant Nestor <notifications@github.com>\nwrote:\n\n> I'm going to close this as we don't plan on supporting this out-of-the-box\n> <http://blog.rtwilson.com/how-to-get-sublime-text-style-editing-in-the-ipythonjupyter-notebook/>\n> .\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2036#issuecomment-275251936>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ALVvN5QGEAICiRyJWH5hnRu73CYrgWSZks5rV8szgaJpZM4LgiqH>\n> .\n>\n","It's an issue with Codemirror, the editor component. It has been fixed (codemirror/CodeMirror#4182), but we had to stick with an old version of Codemirror to work around an issue with Safari (#2004).\r\n\r\n@gnestor @minrk what's the plan for getting back to a new version of Codemirror? Do we know if 5.22.1 fixes it? Thanks, at least the [fix](https://github.com/codemirror/CodeMirror/commit/c45674b11e990fe37abc662b0c507d3bb1f635e7#diff-04f7f1f1bbbab888742c7e849187a79c) is trivial.\r\n\r\nCould we at least patch the existing Codemirror version? F-strings are the big ticket item in Python 3.6 after all. The JS files are built into one big concatenated file. We don't have a good way to carry patches against upstream JS projects, as far as I know. Ah that's a pity, but understandable @takluyver. I've just grep'ed all js files in `site-packages` for `rbu` (safe from minification since it's a string?) and can't find this concatenated JS you mention... For the sake of myself and others patching it, please could tell me its path? Should be `notebook/static/notebook/js/main.min.js`, I think @gnestor the CodeMirror issue was closed, I think due to a comment that the bug wasn't reproducible outside the notebook. Does that mean it's due to our CSS somewhere? ## Patch\r\n\r\nTemporary solution tested on notebook version 4.3.1\r\n\r\nTwo patterns inside `site-packages/notebook/static/notebook/js/main.min.js` need replacing: `[rub]` with `[rubf]` and `\"rub\"` with `\"rubf\"`\r\n\r\nWith sed:\r\n```\r\nsed -i 's/'\"rub\"'/'\"rubf\"'/g' -i 's/\\[rub\\]/\\[rubf\\]/g' /usr/local/lib/python3.6/site-packages/notebook/static/notebook/js/main.min.js\r\n``` @minrk @takluyver I just tested 5.22.2 in Safari and the same issue as before. @jasongrout fixed this in lab by [updating the CSS](https://github.com/jupyterlab/jupyterlab/pull/764). I tried changing `.CodeMirror-lines` from `padding: 0.4em` to `padding: 5px` but no luck...\r\n\r\n@bede I can't find  a`[rub]` or `\"rub\"` in the source... @gnestor Lines 65, 73 and 188 of https://github.com/codemirror/CodeMirror/blob/97eb5221f05c09cfeafefa45b52da022fbcc46af/mode/python/python.js\r\n\r\n`rubf` and `rbuf` are the relevant updated strings I've marked this as 5.0 - I'd really like to get it fixed soon, because syntax highlighting is currently broken with the new Python 3.6 strings.\r\n\r\nAre we aware of any fix for the Safari issue in CodeMirror that would let us update it again? If not, can we work out a way to use a patched CodeMirror? @takluyver Agreed! I've spent some time investigating the Safari issue and what I've concluded is that it was introduced in CodeMirror 5.17. To quote from https://github.com/codemirror/CodeMirror/issues/4454#issue-196746612:\r\n\r\n> Here is a list commits included in 5.17: https://github.com/codemirror/CodeMirror/commits/master?after=Y3Vyc29yOjiTKo4zLKAvc9OV%2BJnP36dpIuEyKzIwOQ%3D%3D\r\n\r\n> I have a feeling that this commit might be the culprit although I haven't been able to resolve this by simply reversing the changes in this commit: https://github.com/codemirror/CodeMirror/commit/2c913e5d2914fdc64df80031544a384940006feb\r\n\r\nI will keep trying to isolate the issue. If it's not resolved by 5.0 release time, let's try patching CodeMirror.  Thanks for the detailed info on the patch! Ok, I've isolated this bug to this commit: https://github.com/codemirror/CodeMirror/commit/e60f4b7dd88b71e227f79200932c028ca047d78e\r\n\r\nWe'll see if we can fix it on the CM side... @takluyver Any idea why this commit is causing this behavior? whats the recommended workaround for this? You can try @bede's patch: https://github.com/jupyter/notebook/issues/2037#issuecomment-272466046 Notebook 4.3.2 was just published \ud83d\udc4d ","Sensible.","@Carreau this thing is pretty damn cool.  I think I have whitelisted you as well, so you should be able to mention\nthe bot (if installed on a repository). Feedback welcome.\n\nOn Jan 13, 2017 5:40 PM, \"Steven Silvester\" <notifications@github.com>\nwrote:\n\n> @Carreau <https://github.com/Carreau> this thing is pretty damn cool.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/2039#issuecomment-272591303>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUez9WYPZqDq8cF2Bzjq1qybK98l67qks5rSCd8gaJpZM4LjYnc>\n> .\n>\n @meeseeksdev Hello Case sensitive, try lowercase.  @meeseeksdev hello Helloooo @blink1073, I'm Mr. Meeseeks! Look at me! Let's merge it. Thanks > @Carreau this thing is pretty damn cool.\r\n\r\nI totally agree... thanks @Carreau for working on this.","I agree that autoclosing brackets can be tricky, but not that it should be removed entirely.\r\n\r\nHere's how you can set it in frontend config with the current code:\r\n\r\n```python\r\n# Run this in Python once, it should take effect permanently\r\nfrom notebook.services.config import ConfigManager\r\nc = ConfigManager()\r\nc.update('notebook', {\"CodeCell\": {\"cm_config\": {\"autoCloseBrackets\": False}}})\r\n```\r\n\r\nTo restore the default, do the same with `None` in place of False. Outstanding! Thanks!  Would it be possible to have this as a menu option or off by default? It would be nice if it worked like almost every other editor does (by default).","Thanks!","\n[![Coverage Status](https://coveralls.io/builds/9683871/badge)](https://coveralls.io/builds/9683871)\n\nChanges Unknown when pulling **85aedbf5c001f9fc87951e924b81ba89087db1f1 on clarka34:patch-2** into ** on jupyter:4.0.x**.\n","This should be easy to do using a template:\r\n```\r\n{%- extends 'full.tpl' -%}\r\n\r\n{% block output_area_prompt %}\r\n    <div class=\"prompt\"> </div>\r\n{% endblock output_area_prompt %}\r\n\r\n{% block in_prompt %}\r\n    <div class=\"prompt input_prompt\">  </div>\r\n{% endblock in_prompt %}\r\n```\r\nUsing a recent nbconvert version, this will remove input and output prompts.","Oh, I like this idea! \r\n\r\nPerhaps a related issue: I spent about 20 minutes today trying to get a version of my syllabus (a notebook) to print adequately for handout. I have a table with links in the notebook which caused problems:\r\n\r\n* PDF didn't do Markdown nor HTML tables\r\n* Print Preview shows full links (made table too wide)\r\n\r\nI had to download as HTML and remove some \"print\" CSS to keep the links from showing. The actual notebook is here if interested [1].\r\n\r\nA richer version of \"Download as...\" could conceivably have some options to give more possibilities.\r\n\r\n[1] - https://athena.brynmawr.edu/jupyter/hub/dblank/public/CS110%20Intro%20to%20Computing/2017-Spring/Syllabus.ipynb An API for controlling nbconvert from the notebook would be really welcome, I asked for something similar in #1629. \r\n\r\nIn the [printview extension](https://github.com/ipython-contrib/jupyter_contrib_nbextensions/tree/master/src/jupyter_contrib_nbextensions/nbextensions/printview) I currently I have to call the Python kernel of the notebook directly  to be able to customize nbconvert options. This is not a good solution and only works when a  Python kernel is running.\r\n\r\nFor testing, some time ago I added a put request to the nbconvert handler, so I was able to transfer a JSON block with nbconvert configuration options from the frontend to the notebook server. That allowed kernel-agnostic per-notebook nbconvert options. This is what I would like to see as functionality in the notebook (obviously not implemented as a hack like I have done).\r\n  ","If I make the block maths (`$$` delimited blocks) start at the beginning of a line, without leading spaces, it renders correctly. At present, nbconvert only handles block math correctly if it's at the start of the line.\r\n\r\n@michaelpacer this is a discrepancy between our processing of math blocks in the live notebook and in nbconvert. I don't have a particular feeling about which behaviour is better. Thank you for looking at it!\r\n\r\n\"make the block maths ($$ delimited blocks) start at the beginning of a line, without leading spaces\"\r\n\r\nI have modified this part:\r\n\r\n```\r\n$$ \\vec{R} = \\begin{bmatrix} R{x} \\ R{y} \\ R_{z}\r\n\r\n     \\end{bmatrix}\r\n    =\r\n     \\begin{bmatrix}\r\n       i L_{x} \\\\\r\n       i L_{y} \\\\\r\n       i L_{z}\r\n     \\end{bmatrix}\r\n              =\r\n     \\begin{bmatrix}\r\n       \\frac{i}{2}(L_{+}+L_{-} ) \\\\\r\n       \\frac{1}{2}(L_{+}-L_{-} )  \\\\\r\n       i L_{z}\r\n     \\end{bmatrix}\r\n $$\r\n```\r\n\r\nBut it is still not displaying correctly. Did I misunderstand anything? That sounds right. Here's a copy where the rendering works for me:\r\n\r\nhttp://nbviewer.jupyter.org/gist/takluyver/ed0c6030eb07ab2d76f74d3e295e7b75 Thanks!\r\n\r\nIt seems like you are using python 3? Yep, though it shouldn't affect the Markdown. Anyway thank you for the help!","Let us know if this was meant to mean something.","The 'print preview' option uses nbconvert to generate static HTML, which may have different CSS from the live view. @takluyver But when you continue to print it, it does use the print css from the live view. This is confusing! \"Print preview\" should be a preview of what would actually print, right? AIUI, we can't activate the print CSS until you use the browser's own print preview function. @takluyver Perhaps, but the output of the conversion process could itself define the view CSS using the print CSS values. Then there would be no differences, and the HTML view would look the same as applying the print CSS.  Similar: https://github.com/jupyter/notebook/issues/2044","Great to see movement on this! I was just talking to @jdfreder about resurrecting the cell tagging efforts.\r\n\r\nUI features that aren't strictly related to the display that would be helpful:\r\n* tab completion & suggestion\r\n    * this could probably reuse the UI paradigm that we use to autocomplete with multiple options in other cases\r\n    * these suggestions could be based on a number of things:\r\n         * all tags previously used in the notebook\r\n         * core supported tags (e.g., those like `jupyter:hide_cell` in nbconvert) \r\n         * tags used by extensions (or at least a list that extensions can write to for getting suggestions) \r\n         * some tags may be more or less appropriate for different kinds of cells (e.g., `jupyter:hide_output` doesn't mean anything for a markdown cell)\r\n    * for the case of prefixed tags, it may be useful to suggest completions that would apply the prefix if the unprefixed text is present (e.g., `hide_cell` \u2192 `jupyter:hide_cell`)\r\n* \"clickable\" suggestions (discussed more in https://github.com/jupyter/notebook/issues/1812)\r\n\r\nOne downside to this approach to applying tags is that it doesn't have any way to apply to multiple cells at the same time, since multiple cells can be selected, it'd be good to also surface a way to do that. I think that solving that might also suggest a more general UI that would work nicely (especially for applying tags via keyboard shortcut). To be fair, this is a tough problem that none of the other tagging solutions have solved, but it's still worth thinking about. For the purposes of future discussion, some other issues around tags (incl. those already referenced):\r\n\r\n* https://github.com/jupyter-incubator/contentmanagement/issues/18\r\n* https://github.com/ipython/ipython/pull/6638\r\n* #1812\r\n* #601 \r\n\r\nCC: @jasongrout and @rgbkrk\r\n\r\nFrom the attic:\r\n* https://github.com/jupyter-attic/ipython-components/pull/32 Possibly related jupyterlab issues: \r\n\r\n* https://github.com/jupyterlab/jupyterlab/issues/902\r\n* https://github.com/jupyterlab/jupyterlab/issues/1308\r\n Does this currently take over the cell toolbar? In that case is this compatible with nbgrader?\r\n\r\nOne possibility for cells with lots of tags (a problem mentioned in https://github.com/ipython/ipython/pull/6638#issuecomment-59967006) would be to have a clickable ellipsis that opens a modal editor view (in the vein of the current metadata editor but ideally with a nicer looking UI tailored to this context) that specifically addresses the issue of tagging cells. This type of modal editor view would then allow editing tags on multiple cells at the same time, since the editor's scope is detached from it's physical location for displaying the tags (which are still at the cell level). We know there's a lot more that can be done with the cell tagging UI, but we've been putting off doing it for ages because of making a good UI for it. So Vidar suggested, and I agreed, that he builds a minimal working UI to put into notebook 5.0 (which I hope will be soon) so that we can start playing with tags, and enhance it later.\r\n\r\nWith that in mind, let's keep this thread focussed on what's the minimum working tag interface that we're happy to land, and leave discussion of how to make a *great* tag UI for separate issues.\r\n\r\nI believe this works as a cell toolbar like any other: you can switch between them using a dropdown. So it shouldn't break nbgrader. @vidartf did you miss pushing a commit? I don't see the tags left-aligned:\r\n\r\n![screenshot from 2017-01-19 11-41-12](https://cloud.githubusercontent.com/assets/327925/22105505/48381440-de3c-11e6-8ef2-ba47da1ee7a1.png)\r\n\r\nWe should make sure that adding/removing a tag sets the dirty flag - at the moment, if I add a tag and then close the browser tab, the notebook is not saved and I don't get a warning.\r\n\r\nUnfortunately there's a merge conflict on this now (I guess one of the PRs I just merged touched notebook.js), so it will need rebasing. @takluyver I've resolved the merge conflict. Regarding the styling, I'm not very familiar with all the build steps of this project. I used `python setup.py js css` to build locally as per the docs. Am I doing it right?\r\n\r\n@michaelpacer I definitely agree that some ellipsis/dialog combination is a good solution to the overflow issue. I'll see what I can do. I'm guessing a one-tag-per-line textarea would be a decent minimal implementation for the dialog. Thanks, and I do see the styling correctly now; maybe I had it cached in my browser.\r\n\r\nI'd still like it to set the dirty flag before merging, so that the notebook knows it needs to save.  - Dirty flag is now set whenever any changes are made to metadata.\r\n - Added a button [...] that can be clicked to show a dialog with a textarea for editing tags.\r\n - Tags overflowing from the cell toolbar are hidden, with a simple fade-out effect to indicate to the user that content is overflowing. Oh, and:\r\n - Any whitespace (`/\\s/`) in the input will be interpreted as a separator in a sequence of tags to add I've played around with this a bit - it's definitely rough around the edges, but it's up to the level where I'm happy to merge it for 5.0 and let people start playing around with it and improving it. We're keen to do various things with tags, and once we have a basic interface we can start doing that while people polish it. We have more or less stopped adding js tests, because phantom and Casper\nare extremely flaky and irritating.\n\nOn 21 Jan 2017 1:10 a.m., \"Paul Ivanov\" <notifications@github.com> wrote:\n\n> *@ivanov* requested changes on this pull request.\n>\n> I would like to see some tests of the functionality provided here before\n> merging it. Adding new features without tests is asking for trouble in the\n> long run.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/2048#pullrequestreview-17794439>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUA9ff91BO9DzC9XBkwOOM8wcrXsbSOks5rUVr0gaJpZM4LnKC->\n> .\n>\n I was not going to respond to this originally, but since it has been referenced elsewhere, I want to weigh in and say that merging features which do not have tests is a mistake.\r\n\r\nI was not around when the decision was made to stop adding tests because phantom and Casper have been flaky and irritating, but writing, and more importantly *maintaining* software which is not tested is even **more** irritating. If our js testing is flaky, we should put in effort to fix it, or move to something else, but simply giving up on testing altogether is a mistake. I'm well aware that it's a bad idea. But since ~all the developer effort is now focussed on Jupyterlab, nobody has invested the time in reworking the tests in this repo, and I'm not going to ask people to do so to get their pull request merged.\r\n\r\nIf you have time to spend on it, go for it. I think we were looking into the possibility of using Selenium for tests at one point. @jhamrick do I recall you were using that in nbgrader? @minrk also had some ideas about JS testing. Has the documentation of the notebook format been updated to explain how the new metadata is stored? [Yes](http://nbformat.readthedocs.io/en/latest/format_description.html#cell-metadata), though we may want to make it more precise about which characters are allowed in tags. I'd recommend that we stick to something like `[A-Za-z0-9-_./]`. Why would you want to limit tags to less than ASCII? Doesn't using Unicode for things like this (especially in 2017) make the most sense? Excluding certain ascii characters (like space, newline and comma) makes it easier to design the tag editing UIs, because you can assume that those characters delimit tags. Opening up unicode brings in a whole range of lookalike characters that might cause confusion, but I'd be OK with adopting certain classes of unicode characters (e.g. the same set that are valid Python 3 identifiers).\r\n\r\nI'm inclined to start with a pretty small set of characters, because it's much easier to allow extra characters later than to retrospectively disallow characters people may already have used. All of the use cases I've discussed with people so far can easily be handled with the limited set of ASCII characters I suggested. Do these usecases involve people using their native language, where their native language is not English? I envisage tag names matching names defined elsewhere, so I don't see it being practical to localise them. This is akin to how we use English words like `if` and `while` in programming languages, and in things like `pip install notebook` - you can't translate `install` or `notebook` and expect it to work.\r\n\r\nI feel like you're lecturing me on the value of internationalisation, and I resent that - I'm well aware of the importance of that, but this is not the place I think we should be applying it. I think it would be reasonable to just exclude whitespace and control characters (Unicode categories Zp, Zl, Zs, Cc, Cf), which includes newlines. I'm not lecturing... it was an honest question. I have no idea what the use cases that you mentioned are. I imagine use cases that are based on user's tagging the cells for their own purposes (like tags in stackoverflow). But perhaps I am mistaken. It sounds like these tags are for more internal uses than what I had imagined. Sorry, my bad. I'm not in a great mood today, and I read your last question in a sarcastic tone.\r\n\r\nI envisage there being a range of third party use cases for cell tags - nbval uses tags like `nbval-ignore-output`, for instance. But I see them primarily as a simple way to use APIs that tools expose, so for the most part I don't see them being localised, any more than you'd localise function names in an API.\r\n\r\nSome of the use cases we've envisaged so far include:\r\n\r\n- nbconvert - hide a cell, hide the input leaving the output visible, collapse a cell leaving a way to reveal it\r\n- nbconvert to latex - markdown cell contains title (or subtitle, abstract...)\r\n- nbval - check/ignore output from a cell, skip executing a cell, expect a cell to raise an error\r\n- nbgrader - solution cell, tests cell\r\n- nbparameterise - cell contains input parameters. > I'm well aware that it's a bad idea. But since ~all the developer effort is now focussed on Jupyterlab\r\n\r\nIf jupyterlab is really where all of the new effort is, and notebook is getting little attention, why are we adding new features to it, especially untested ones?\r\n\r\n> nobody has invested the time in reworking the tests in this repo\r\n\r\nI recently [sped up the js tests](https://github.com/jupyter/notebook/pull/2055), and did not see casperjs failures (though I did see Travis choking). Now that may have been because of `travis_retry` which I did not realize is being utilized.\r\n\r\nIf anyone sees JS failures on CI or locally, please document it on [Flaky JavaScript tests omnibus ticket (#2243)](https://github.com/jupyter/notebook/issues/2243). I'd prefer to allow tags to be any unicode with a *blacklist* of separators, e.g. just comma and space. @stevengj thanks for the Unicode character classes, I think that's a good idea.\r\n\r\nI'll take a stab at some tests exercising this one. Tests in #2249","I can't reproduce. Please provide a link to an example notebook. @gnestor did you try my example code? maybe you just have a faster computer than me? Yes, I did. Initially, it was throttled by the default data rate limit ([which will ship with 5.0](https://github.com/jupyter/notebook/pull/1846)):\r\n\r\n![screencap1](http://g.recordit.co/kHLPjCaiFl.gif)\r\n\r\nAfter overriding it, I was able to fetch the data and it was slow to respond to user events initially (because it's a lot of data and a lot of DOM nodes), but then I was able to change focus with no issue (I tried the `j` and `k` keyboard shortcuts too):\r\n\r\n![screencap1](http://g.recordit.co/FRxv023lVM.gif)\r\n\r\nThere isn't much we can do to resolve the notebook being slow when a ton of data is rendered, except for implementing some form of infinite scrolling that can _paginate_ through data and ideally fetch new data from the kernel vs. keeping it in memory in the browser.  @gnestor yes this makes sense, although it might be a lot of work I think this is definitely a feature we should have, I've renamed the issue accordingly. @Carreau @takluyver Has there been any discussion around infinite scrolling for output areas? I'm not sure how much (if any) performance improvements we would get without kernel interaction (e.g. fetching new _pages_ of data from the kernel).\r\n\r\n@themrmax If kernel interaction is required, then this feature would not be implemented in notebook but rather ipywidgets or another \"infinite scrolling output area\" extension that can interact with ipython and ideally other kernels. This _could_ be a good experiment for a kernel-connected [mimerender extension](https://github.com/jupyterlab/mimerender-cookiecutter).  > Has there been any discussion around infinite scrolling for output areas\r\n\r\nYes, and more generally about the notebook itself. \r\nTHe issue is with widgets, or other elements that attach events to the DOM. You can't not display (or remove) them as it will fail to register some events. If it's a \"safe\" mime then that would be fine. \r\n\r\nAnother question would be how to \"recycle\" things that are high on the page. \r\nThat _could_ be done, by replacing elements with fixed height divs (measuring just after things get out of sight far enough). Annoying if windows resize but doable. \r\n\r\nIn the end it would be easier if model was on server side and do lazy loading. But that's far away. \r\n\r\nBeyond infinite scrolling, we can just collapse something to be and ask a \"would you like to display everything\". \r\n\r\n\r\n @gnestor i really like the idea of the jupyterlab extension, i think this is key to achieve feature parity with Rstudio/Spyder etc. @Carreau do you think it would make sense to use something like https://github.com/NeXTs/Clusterize.js ? it looks like they are using the fixed hight div's trick you suggest, and maybe it would be a fairly lightweight integration? **EDIT**: i'm going to try and update `jupyterlab_table` to use clusterize, i'll open a PR there if I can get it to work. We are having a related discussion in JupyterLab: https://github.com/jupyterlab/jupyterlab/issues/1587 @blink1073 Thanks!\r\n\r\n@themrmax I started implementing [react-virtualized](https://github.com/bvaughn/react-virtualized) in jupyterlab_table! It will be good to compare the performance of both \ud83d\udc4d  @themrmax Here is an initial implementation using react-virtualized's table: https://github.com/gnestor/jupyterlab_table/tree/react-virtualized\r\n\r\nI also have an example using it's grid which allows for horizontal scrolling but actually uses 2 different grids (one for the header) and attempts to keep their x scroll positions in sync (not very well).\r\n\r\nThey're both pretty performant but could be optimized:\r\n\r\n![screencap](http://g.recordit.co/iKgC6D3quU.gif) Nice! Excellent! @gnestor very nice! i've gotten basically the same thing working for containerized (i haven't done the headers, but i think i would need to do a similar trick as you) https://github.com/themrmax/jupyterlab_table/tree/clusterize\r\n\r\na big problem i can see with both of our solutions is that when data gets large (i.e. over a few thousand rows), it takes a very long time to load the component. as far as i can tell it's not a problem with the frameworks, the demo on https://clusterize.js.org/ instantly loads 500K rows if they're generated by javascript. is it a limitation of us loading the data into the browser as a single JSON payload, and is there a way we could work around this?\r\n\r\n**EDIT**: Just noticed the `inferSchema` function is very slow, i can get a pretty good speedup by just running this over the first few rows (10? 100?) @themrmax Yes. There is observable latency for 10,000+ cells for me. There is no latency when rendering as a pandas HTML table and this is partly because the pandas HTML is rendered _kernel-side_. A few thoughts:\r\n\r\n* I think the real solution is a _hybrid-approach_ between client-side and kernel-side rendering, where the kernel returns a maximum initial payload and the client can request additional _pages_ based on the scroll position/direction/momentum. This is pretty tricky. The react-virtualized interface looks like `function loadMoreRows({ startIndex: number, stopIndex: number }): Promise` and theoretically this callback would request a new range of rows from the kernel (e.g. `df[startIndex:stopIndex]`). The only way that I can imagine this working across kernels (and beyond pandas dataframes) is if `loadMoreRows` is defined by the user (or the display function) and provided to jupyterlab_table via JSON:\r\n\r\n```json\r\n{\r\n    \"resources\": [],\r\n    \"metadata\": {\r\n        \"startIndex\": 0,\r\n        \"stopIndex\": 1000,\r\n        \"loadMoreRows\": \"df[startIndex:stopIndex]\"\r\n    }\r\n}\r\n```\r\n\r\nAssuming that the extension can communicate with the kernel (which I know is possible but don't know how to implement), the extension could parse this `loadMoreRows` string and execute `df[1000:2000]` on the kernel and either return the rows to the `loadMoreRows` callback or asynchronously update the display using the new [`update_display` feature](https://github.com/nteract/nteract/blob/master/example-notebooks/display-updates.ipynb). This is pretty hacky... @rgbkrk Any thoughts about how to accomplish infinite scrolling across kernels?\r\n\r\n* I observed about a 10x performance improvement using react-virtualized vs. fixed-data-table, so there is probably a lot of potential to optimize the client-side rendering. @themrmax Like you said, the Clusterize.js demo appears to load 500k rows instantly, as does the react-virtualized demo. I did some initial profiling and I noticed there was a bottleneck at `inferSchema` which will [attempt to infer a schema if not provided in the payload](https://github.com/gnestor/jupyterlab_table/blob/master/component/index.js#L16-L20). I just optimized that by taking a sample of 10 rows vs. iterating through all of them. That just improved performance by about another order of magnitude (because 10,000x10 took about 8s before, and now 100,000x10 takes about the same\ud83d\udc4d ). pandas [will soon support JSON Table](https://github.com/pandas-dev/pandas/pull/14904) in which case `inferSchema` will no longer be necessary for pandas Dataframes.  > Any thoughts about how to accomplish infinite [paging] [of tables] across kernels?\r\n\r\nI'd certainly like to see it.\r\n\r\nI'm hopeful that we can make some simplified mechanics with the `setIn` based models approach, coupled with the VDom stuff.","This is a bug. I will take a look at this when I have a chance, but the culprit is here: https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/js/notebook.js#L1100-L1167 @gnestor I'm planning to aim for a 5.0 release quite soon. Do you think you'll have time to get to this? Ya, I'll work on this today \ud83d\udc4d  @gnestor did you get a chance to look at this? I actually can't reproduce this anymore. I do notice that undoing a delete cells will add the cells back out of order which is a separate bug. @rgaiacs Can you provide an example notebook to help reproduce? @gnestor Can you try \r\n[bug-353-example.zip](https://github.com/jupyter/notebook/files/754506/bug-353-example.zip).\r\n @gnestor have you had a chance to look at @rgaiacs' example? It may have been fixed in master because I still can't reproduce, even with this example notebook. See the following screen cap and follow along with me:\r\n\r\n1. Select cells from \"Episode 2\" up until \"Episode 3\"\r\n2. Scroll to top and \"Delete cells\"\r\n3. As expected, \"Episode 3\" cells and below are moved to visible range at the top of the notebook\r\n\r\n![screencap](http://g.recordit.co/cz2VKqOYEC.gif) @rgaiacs If you're so inclined, try cloning the master branch of this repo and [installing locally](https://github.com/jupyter/notebook/blob/master/CONTRIBUTING.rst#installing-the-jupyter-notebook). If you can still reproduce on master, please let me know how.  @gnestor Testing with 3e1f54502d200e25647dce85f8a441e2a4d08b42.\r\n\r\nI can reproduce the behaviour that you describe.\r\n\r\n> 1. Select cells from \"Episode 2\" up until \"Episode 3\"\r\n> 2. Scroll to top and \"Delete cells\"\r\n> 3. As expected, \"Episode 3\" cells and below are moved to visible range at the top of the notebook\r\n\r\nThe behaviour that I want is\r\n\r\n> 1. Select cells from \"Episode 2\" up until \"Episode 3\"\r\n> 2. \"Delete cells\"\r\n> 3. \"Episode 3\" cells and below are moved to the top of the notebook and scroll bar is change to the top.\r\n\r\nThe 3rd step should be more general, i.e. if I delete cells from \"Episode 3\" up until \"Episode 4\" I should have \"Episode 4\" visible on my screen. I can reproduce what @rgaiacs describes. The key difference is: don't scroll to the top before deleting cells. When I press `d, d`, the 'Episode 3' cell, now the first in the notebook, is above the visible area on my screen. I agree that ideally the selected cell should be visible after deleting cells.\r\n\r\nPinging @ellisonbg for a focus related issue, as he worked on this stuff quite a bit before. > 3. \"Episode 3\" cells and below are moved to the top of the notebook and scroll bar is change to the top.\r\n\r\nThis is what I'm seeing in master:\r\n\r\n![screencap](http://g.recordit.co/yfqwuO596l.gif)\r\n\r\n@rgaiacs @takluyver So that we're on the same page: What is unexpected about the above screen capture?\r\n\r\nAdditionally, when I delete cells from \"Episode 3\" to \"Episode 4\", the scroll position isn't changed which is what I expect:\r\n\r\n![screencap2](http://g.recordit.co/MWY4B8kBPe.gif)\r\n\r\n @gnestor I believe that this bug was fixed already. I tested again from scratch\r\n\r\n~~~\r\n$ git remote -v\r\norigin\tgit@github.com:jupyter/notebook.git (fetch)\r\norigin\tgit@github.com:jupyter/notebook.git (push)\r\n$ git fetch origin\r\n$ git rev-parse origin/master\r\na33d136cb03827edbad4a538979b3cced86057d2\r\n$ git rev-parse HEAD\r\na33d136cb03827edbad4a538979b3cced86057d2\r\n$ python -m pip install -e . --user\r\nObtaining file:///home/raniere/src/notebook\r\nRequirement already satisfied: jinja2 in /home/raniere/.local/lib/python3.5/site-packages (from notebook==5.0.0.dev0)\r\nRequirement already satisfied: tornado>=4 in /home/raniere/.local/lib/python3.5/site-packages (from notebook==5.0.0.dev0)\r\nRequirement already satisfied: ipython_genutils in /home/raniere/.local/lib/python3.5/site-packages (from notebook==5.0.0.dev0)\r\nRequirement already satisfied: traitlets>=4.2.1 in /home/raniere/.local/lib/python3.5/site-packages (from notebook==5.0.0.dev0)\r\nRequirement already satisfied: jupyter_core in /home/raniere/.local/lib/python3.5/site-packages (from notebook==5.0.0.dev0)\r\nRequirement already satisfied: jupyter_client in /home/raniere/.local/lib/python3.5/site-packages (from notebook==5.0.0.dev0)\r\nRequirement already satisfied: nbformat in /home/raniere/.local/lib/python3.5/site-packages (from notebook==5.0.0.dev0)\r\nRequirement already satisfied: nbconvert in /home/raniere/.local/lib/python3.5/site-packages (from notebook==5.0.0.dev0)\r\nRequirement already satisfied: ipykernel in /home/raniere/.local/lib/python3.5/site-packages (from notebook==5.0.0.dev0)\r\nRequirement already satisfied: terminado>=0.3.3 in /home/raniere/.local/lib/python3.5/site-packages (from notebook==5.0.0.dev0)\r\nRequirement already satisfied: MarkupSafe>=0.23 in /home/raniere/.local/lib/python3.5/site-packages (from jinja2->notebook==5.0.0.dev0)\r\nRequirement already satisfied: decorator in /home/raniere/.local/lib/python3.5/site-packages (from traitlets>=4.2.1->notebook==5.0.0.dev0)\r\nRequirement already satisfied: six in /home/raniere/.local/lib/python3.5/site-packages (from traitlets>=4.2.1->notebook==5.0.0.dev0)\r\nRequirement already satisfied: pyzmq>=13 in /home/raniere/.local/lib/python3.5/site-packages (from jupyter_client->notebook==5.0.0.dev0)\r\nRequirement already satisfied: jsonschema!=2.5.0,>=2.4 in /home/raniere/.local/lib/python3.5/site-packages (from nbformat->notebook==5.0.0.dev0)\r\nRequirement already satisfied: testpath in /home/raniere/.local/lib/python3.5/site-packages (from nbconvert->notebook==5.0.0.dev0)\r\nRequirement already satisfied: mistune!=0.6 in /home/raniere/.local/lib/python3.5/site-packages (from nbconvert->notebook==5.0.0.dev0)\r\nRequirement already satisfied: pygments in /home/raniere/.local/lib/python3.5/site-packages (from nbconvert->notebook==5.0.0.dev0)\r\nRequirement already satisfied: bleach in /home/raniere/.local/lib/python3.5/site-packages (from nbconvert->notebook==5.0.0.dev0)\r\nRequirement already satisfied: entrypoints>=0.2.2 in /home/raniere/.local/lib/python3.5/site-packages (from nbconvert->notebook==5.0.0.dev0)\r\nRequirement already satisfied: pandocfilters>=1.4.1 in /home/raniere/.local/lib/python3.5/site-packages (from nbconvert->notebook==5.0.0.dev0)\r\nRequirement already satisfied: ipython>=4.0.0 in /home/raniere/.local/lib/python3.5/site-packages (from ipykernel->notebook==5.0.0.dev0)\r\nRequirement already satisfied: ptyprocess in /home/raniere/.local/lib/python3.5/site-packages (from terminado>=0.3.3->notebook==5.0.0.dev0)\r\nRequirement already satisfied: html5lib!=0.9999,!=0.99999,<0.99999999,>=0.999 in /home/raniere/.local/lib/python3.5/site-packages (from bleach->nbconvert->notebook==5.0.0.dev0)\r\nRequirement already satisfied: setuptools>=18.5 in /home/raniere/anaconda3/envs/jupyter/lib/python3.5/site-packages/setuptools-27.2.0-py3.5.egg (from ipython>=4.0.0->ipykernel->notebook==5.0.0.dev0)\r\nRequirement already satisfied: pexpect; sys_platform != \"win32\" in /home/raniere/.local/lib/python3.5/site-packages (from ipython>=4.0.0->ipykernel->notebook==5.0.0.dev0)\r\nRequirement already satisfied: pickleshare in /home/raniere/.local/lib/python3.5/site-packages (from ipython>=4.0.0->ipykernel->notebook==5.0.0.dev0)\r\nRequirement already satisfied: simplegeneric>0.8 in /home/raniere/.local/lib/python3.5/site-packages (from ipython>=4.0.0->ipykernel->notebook==5.0.0.dev0)\r\nRequirement already satisfied: prompt-toolkit<2.0.0,>=1.0.4 in /home/raniere/.local/lib/python3.5/site-packages (from ipython>=4.0.0->ipykernel->notebook==5.0.0.dev0)\r\nRequirement already satisfied: wcwidth in /home/raniere/.local/lib/python3.5/site-packages (from prompt-toolkit<2.0.0,>=1.0.4->ipython>=4.0.0->ipykernel->notebook==5.0.0.dev0)\r\nInstalling collected packages: notebook\r\n  Found existing installation: notebook 5.0.0.dev0\r\n    Uninstalling notebook-5.0.0.dev0:\r\n      Successfully uninstalled notebook-5.0.0.dev0\r\n  Running setup.py develop for notebook\r\nSuccessfully installed notebook\r\n$ jupyter --version                \r\n4.3.0\r\n~~~\r\n\r\nand looks OK. I think that I was using a old version and didn't update properly last time. Thanks for your help. Sorry, but I can still reproduce this on master. When I follow the same steps as the first of @gnestor's two screencasts in his last post, my view does not scroll to the top cell 'Episode 3'. I'm not sure what the difference is, but I can reproduce this every time I try, in both Firefox and Chromium.\r\n\r\nI updated to master just now and rebuilt the js. Also tried disabling extensions, still see it.","Just noticed this is supported in the \"code editor\" mode (ie when you open file which isn't a notebook), but not the notebook mode. I wonder if this feature could be ported from there? also another way to solve this could be to modify the _cmd+find_  in the editing mode \r\n(_not_ find&replace)  in a way that look for the selected word in _all_ cells... a _temporary_ solution  (for mac os) would be what I [posted here](http://apple.stackexchange.com/questions/269476/merging-keyboard-shortcuts/269506#269506),\r\nfor which  I still **haven't found a shortcut that works on jupyter** -->  help!    \r\n ( for the time being I use `ctr+alt+f` that works fine on _safari_, _firefox_  ,...  ) Similar: https://github.com/jupyter/notebook/issues/2058","Ctrl+Shift+- while editing a cell should split it at the cursor. We've not yet gone down the road of custom right-click menus.\r\n\r\nYou can use Shift+(up/down) to select a range of cells, and then Shift+M to merge them. Cheers - I see I should have checked in the help to see the awesome cheatsheet.\r\n\r\nSome UI at some point in the future would definitely be nice for this.","@Nagasaki45 the code highlighting is provided by [CodeMirror][1], can you please raise this issue in their bug tracker?\r\n\r\n[1]:https://github.com/codemirror/CodeMirror/ Hi @themrmax, I would definitely do this, but I couldn't find which version of CodeMirror I'm using. Do you know the exact version (based on the information I provided above) or suggest a way to check it? The version the notebook uses is encoded in [bower.json](https://github.com/jupyter/notebook/blob/master/bower.json). You can check that at the tag of the version you have installed. In master we're currently back on an older release to avoid a Safari bug.\r\n\r\nYou can also test on [this CodeMirror demo page](http://codemirror.net/mode/python/index.html), which should be more up to date. CodeMirror issue added: https://github.com/codemirror/CodeMirror/issues/4506. Cool Martin has fixed this in codemirror/master, we should bump our codemirror version when he marks a new version\r\nhttps://github.com/codemirror/CodeMirror/commit/39ad3b619ba9ea481f2847fb85aed647b67d17d1 This appears to have just missed Codemirror 5.23, which is the latest release at the moment, so I've bumped it to notebook 5.1. If there's a new Codemirror release soon, we can bring it back to 5.0.","Fixed it by editing the codemirror js. Can you describe in more detail what you changed? Other people might be interested in making those ligatures work too. Sure, I edited [this](https://github.com/codemirror/CodeMirror/blob/39ad3b619ba9ea481f2847fb85aed647b67d17d1/mode/python/python.js#L45) line, by adding the ligatures I needed in there.","There are likely other places where our testing code can be simplified, but this was such a clear quick win that it would be a shame to not make testing faster for everyone immediately. Sweet, as expected, the `GROUP=js/notebook` tests which used to take 13 minutes to run on travis, now take 7.5 minutes!\r\n\r\nTravis run time before:\r\n![screen shot 2017-01-20 at 5 39 28 pm](https://cloud.githubusercontent.com/assets/118211/22171244/90476f9e-df3e-11e6-8bcb-3c6a2b172f73.png)\r\n\r\n\r\nWith this PR:\r\n![screen shot 2017-01-20 at 6 22 13 pm](https://cloud.githubusercontent.com/assets/118211/22171239/79db2ac0-df3e-11e6-9e61-dedcb07e4c8d.png)\r\n\r\nI'm going to try one more minor thing, a reordering of how the tests are run on Travis which should further reduce the elapsed time. Excellent! Thank you Paul. I think it's unrelated, but I did just have to kick one of the builds as node threw this error:\r\n\r\n``` \r\nsubprocess.CalledProcessError: Command '['node', 'tools/build-main.js', 'notebook']' returned non-zero exit status 1\r\n    Failed to build tree { Error: Error: ENOENT: no such file or directory, open '/tmp/pip-build-rKp5zF/notebook/notebook/static/components/bootstrap/js/bootstrap.min.js'\r\n``` For what its worth, the elapsed time did go down to 11-12 minutes by running starting the longest running tests earlier. Pipelining optimization FTW! Nice mathing!","I don't get this error, nor the one you describe in #2057. Are you still experiencing them? Can you provide more details about your system (OS, Python version, pip version)? It looks like you need to do an `npm install` and `npm run build`. @gnestor: `npm run build` seems to be called by my `pip install ...` because, typing in this manually as you suggested gives the same error as mentioned at the top. @takluyver: Yes, still experiencing these problems. I use Linux Mint 17.3, Python 2.7.6 (same troubles with Python 3.4.3), pip 9.0.1. @dkrenn `error: [Errno 2] No such file or directory: '/local/dakrenn/sage/jupyter-notebook/node_modules/proptypes'` suggests that `proptypes` has not be installed. notebook still depends on a couple npm packages, namely `preact` and `preact-compat` and `proptypes` is a dependency of `preact-compat`:\r\n\r\n```\r\ngrant:notebook grant$ npm list\r\njupyter-notebook-deps@4.0.0 \r\n\u251c\u2500\u2500 bower@1.8.0\r\n\u251c\u2500\u252c less@2.7.1\r\n\u2502 \u251c\u2500\u252c errno@0.1.4\r\n\u2502 \u2502 \u2514\u2500\u2500 prr@0.0.0\r\n\u2502 \u251c\u2500\u2500 graceful-fs@4.1.11\r\n\u2502 \u251c\u2500\u2500 image-size@0.5.0\r\n\u2502 \u251c\u2500\u2500 mime@1.3.4\r\n\u2502 \u251c\u2500\u252c mkdirp@0.5.1\r\n\u2502 \u2502 \u2514\u2500\u2500 minimist@0.0.8\r\n\u2502 \u251c\u2500\u252c promise@7.1.1\r\n\u2502 \u2502 \u2514\u2500\u2500 asap@2.0.5\r\n\u2502 \u2514\u2500\u2500 source-map@0.5.6\r\n\u251c\u2500\u2500 preact@7.1.0\r\n\u251c\u2500\u252c preact-compat@3.11.0\r\n\u2502 \u251c\u2500\u252c preact-render-to-string@3.4.1\r\n\u2502 \u2502 \u2514\u2500\u2500 pretty-format@3.8.0\r\n\u2502 \u251c\u2500\u2500 preact-transition-group@1.1.0\r\n\u2502 \u251c\u2500\u2500 proptypes@0.14.3\r\n\u2502 \u2514\u2500\u2500 standalone-react-addons-pure-render-mixin@0.1.1\r\n\u2514\u2500\u2500 requirejs@2.3.2\r\n``` I had the same issue. I just ran\r\n\r\n    npm install proptypes\r\n\r\nand then re-run\r\n\r\n    pip install -e .\r\n\r\nin my virtualenv, and the install went through smoothly. This is master commit 9dd3818 from 2016-02-22. Ok, good. [This PR](https://github.com/jupyter/notebook/pull/2011) significantly refactored the notebook's use of npm and it's possible that it resolved this issue. It looks like it was merged 2 days after you opened this issue, so if you were installing the notebook via `pip install notebook` vs. cloning the repo and installing, then you would've been installing a previous version (4.3.2). When installing, I also just ran into this (on MacOSX). \r\n\r\n```\r\n    Staging /Users/annab./notebook/node_modules/proptypes -> /Users/annab./notebook/notebook/static/components/proptypes\r\n    /Users/annab./.local/lib/python3.6/site-packages/setuptools/dist.py:333: UserWarning: Normalizing '5.0.0.dev' to '5.0.0.dev0'\r\n      normalized_version,\r\n    rebuilding js and css failed. The following required files are missing: ['notebook/static/notebook/js/main.min.js', 'notebook/static/tree/js/main.min.js', 'notebook/static/edit/js/main.min.js', 'notebook/static/terminal/js/main.min.js', 'notebook/static/auth/js/main.min.js', 'notebook/static/style/ipython.min.css', 'notebook/static/style/style.min.css']\r\n    error: [Errno 2] No such file or directory: '/Users/annab./notebook/node_modules/proptypes'\r\n```\r\n\r\nRunning `npm install proptypes` fixed the issue. @annabuyevich Have you installed notebook from source before? If so, is this the first time you've noticed this issue? I'm just wondering if this bug was introduced recently?  I can confirm that running additionally `npm install proptypes` fixes this issue. Thus, one fix would be to include this dependency somewhere in the installation script. (Or simply document it in the file `CONTRIBUTING.rst`)\r\n(This is on https://github.com/jupyter/notebook/releases/tag/5.0.0-rc.1 ) Btw, tried with pip version `9.0.1` as well; same issue. > (This is on https://github.com/jupyter/notebook/releases/tag/5.0.0-rc.1 )\r\n\r\n@dkrenn Are you encountering this with rc1? Have you tried uninstalling notebook and reinstalling rc1? @gnestor Actually, I've installed it (5.0.0-rc.1) on a new system, so no notebook was present before. We merged https://github.com/jupyter/notebook/pull/2319 which hopefully resolves this. We will release rc2 with this change. @dkrenn I will follow up with you when it's available and I will greatly appreciate you giving it a try because we don't want to release 5.0 with this issue. I just released notebook 5.0.0rc2. Can those of you who encountered this give it a try? \r\n\r\n```\r\npip install --pre notebook\r\n``` @gnestor: Installation in the repository-directory with `pip install --user -e .` completed without any error (but on a system that already had some of the requirements updated; I will try on a different, untouched system tomorrow.)\r\n\r\nHowever, I get an error, when starting the notebook server:\r\n```\r\n[E 18:17:43.636 NotebookApp] Could not open static file ''\r\n[W 18:17:43.824 NotebookApp] 404 GET /static/components/preact/index.js (127.0.0.1) 9.43ms referer=http://localhost:8888/tree?token=4bff232ca596d7df18ce0aea8dfa677db01a62898720c219\r\n[W 18:17:43.827 NotebookApp] 404 GET /static/components/preact-compat/index.js (127.0.0.1) 2.34ms referer=http://localhost:8888/tree?token=4bff232ca596d7df18ce0aea8dfa677db01a62898720c219\r\n[W 18:17:43.842 NotebookApp] 404 GET /static/components/preact/index.js (127.0.0.1) 1.36ms referer=http://localhost:8888/tree?token=4bff232ca596d7df18ce0aea8dfa677db01a62898720c219\r\n[W 18:17:43.850 NotebookApp] 404 GET /static/components/preact-compat/index.js (127.0.0.1) 1.45ms referer=http://localhost:8888/tree?token=4bff232ca596d7df18ce0aea8dfa677db01a62898720c219\r\n```\r\nbut `http://localhost:8888/tree` shows what it should; when trying to open a notebook in there is the (same) error\r\n```\r\n[W 18:17:47.061 NotebookApp] 404 GET /static/components/preact/index.js (127.0.0.1) 2.32ms referer=http://localhost:8888/notebooks/Untitled1.ipynb\r\n[W 18:17:47.065 NotebookApp] 404 GET /static/components/preact-compat/index.js (127.0.0.1) 2.21ms referer=http://localhost:8888/notebooks/Untitled1.ipynb\r\n[W 18:17:47.210 NotebookApp] 404 GET /static/components/preact/index.js (127.0.0.1) 1.98ms referer=http://localhost:8888/notebooks/Untitled1.ipynb\r\n[W 18:17:47.220 NotebookApp] 404 GET /static/components/preact-compat/index.js (127.0.0.1) 1.57ms referer=http://localhost:8888/notebooks/Untitled1.ipynb\r\n```\r\nAt the moment, I have no glue why. I saw some errors like that, but when I cleaned out `notebook/static/components` and re-ran `setup.py js` it resolved itself. @takluyver indeed, this solved the problem for me. Thanks. In our installation scripts, bower will skip installation of a library if it already exists. In your case, it existed because it was copied there from `node_modules`. When upgrading a dev install of the notebook, it's usually good practice to `git clean -xfd` and `pip install -e .` to prevent issues like these. @gnestor Overall, installation of 5.0.0rc2 went fine on a fresh Linux Mint. \r\n\r\nI went throught [CONTRIBUTING.rst](https://github.com/jupyter/notebook/blob/master/CONTRIBUTING.rst) to install, but \"missed\" that `npm` had to be installed. Not too long ago, `sudo apt-get install nodejs-legacy npm` was written on this page, but has been removed. (Why?). What I needed finally was `sudo apt-get install npm python-dev`, i.e., the Python headers were missing as well (and IMO are not mentioned somewhere, although obviously needed) You shouldn't generally need the Python headers to install Jupyter. The only case I can think of where you'd need them is if you had to build pyzmq from source, but binary packages for pyzmq should be available from a package manager near you. @dkrenn as it says on that page, where `apt install nodejs` used to be:\r\n\r\n> be aware that the nodejs or npm packages included in the system package repository may be too old to work properly\r\n\r\nThis has been replaced with a link to the official node.js installation instructions, which seems like a better recommendation. @minrk: I see, somehow I did not catch the link, but it is clearly there :) @takluyver Not sure, what exactly needed this. \r\nAs said, I've worked on a fresh system (Linux Mint) and just followed the instructions and `python-dev` was what I needed to complete this.","`ModuleBuildError` sounds like a webpack error. We recently removed webpack from notebook, so if your local copy if up-to-date with upstream master (double-check!) and you're still seeing this, try `git clean -xfd` and `pip install -e .`. This seems to be solved on https://github.com/jupyter/notebook/releases/tag/5.0.0-rc.1 Great! Let's close this and re-open if you encounter it again.","I agree that this would be better and the current workaround is to use the browser's native find feature by just clicking outside of the CodeMirror text field and pressing CMD+F (or CTRL+F). Given that, we may be better off just disabling the CodeMirror find feature (except its regex search feature is nice).","Hi Matthew,\n\njupyter is not the notebook. It is a meta package having a dependency on\nnotebook, and therefore it can have a different version number.\n\nSylvain\n\nOn Sun, Jan 22, 2017 at 10:28 PM, Matthew Kleinsmith <\nnotifications@github.com> wrote:\n\n> From the terminal:\n>\n> [image: jupyter_version_false]\n> <https://cloud.githubusercontent.com/assets/8968171/22186194/8d6d4032-e0a6-11e6-8f03-901f97cd850a.png>\n> From the notebook:\n>\n> [image: jupyter_version_true]\n> <https://cloud.githubusercontent.com/assets/8968171/22186193/8d6bf86c-e0a6-11e6-9e67-0d00bf21ffd1.png>\n>\n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2059>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ACSXFl4T4RMRNsd4HWJH2Us3_1bmoWI5ks5rU8n_gaJpZM4LqgpV>\n> .\n>\n To check the version number of the notebook at the command line, you can run `jupyter notebook --version`\r\n\r\nThe version number you get with `jupyter --version` is actually that of [jupyter_core](https://pypi.python.org/pypi/jupyter_core), a common base piece which all Jupyter applications depend on, rather than than the jupyter metapackage.","I'm trying to write some docs about that here : \n\nhttp://carreau.gitbooks.io/jupyter-book/content/Jsextensions.html\n\nIt is also what of the things we demoed in our tutorial last week: \n\nhttps://github.com/jupyter/scipy-advanced-tutorial/blob/master/Part1/04-notebook-extensions.md \n\nand the video : \n\nhttps://www.youtube.com/watch?v=38R7jiCspkw\n\nFeel free to ask more questions if you can't make it to work (or make PRs if things are not clear and you think you can express them better) \n","Thanks, @dkrenn! Looks like this PR was made against the wrong branch. Can you update the base to `:master`? All PRs should be made against master, and we can consider backporting after merge if necessary. @minrk Set to master. (Bckporting was not meant by me; simply I wanted to show only correct diff, i.e. the changes that I made branching from 4.3.1. Now the PR is crowed again...) I think you'll need to make the commits again starting from a recent commit on master (or copy them using `git cherry-pick` if you're comfortable doing that). Because you made the commits on top of the 4.x branch, targetting the PR to master doesn't work. @takluyver Sure, this will work (even merging in master on my branch should work). However, there are (as far as I have checked) no merge conflicts at all, so a from a git-workflow-perspective, no need to do such a thing as merge master in or rebase it on master. Not sure, what Github's problem is with this. \r\nBranch-update follows... Ok, I see the problem now: Your master builds up on 4.1.0, whereas my branch builds up on 4.3.1. This explains now all the merging issues. We do 4.x (for instance) releases from master until we merge something which we only want to go into 5.0. At that point, we create a `4.x` branch for further releases, and backport changes into it. In this case, that happened after 4.1. @takluyver Thanks for the clarification. I cherry-picked now. Looks much better now :) Thanks. This looks OK to me now. We'll leave it a while for other people to take a look, and merge if there are no objections.","What do you get from:\r\n\r\n```python\r\nfrom jupyter_core.paths import jupyter_config_dir\r\njupyter_config_dir()\r\n``` I had the same problem.\r\n[This answer on stackoverflow](http://stackoverflow.com/a/41521017/4098821) solved it for me.","Are they both listed as enabled? Yes, for example:\r\n```\r\n$ jupyter nbextension list\r\nKnown nbextensions:\r\n  config dir: /home/jbeezley/.jupyter/nbconfig\r\n    notebook section\r\n      nbextensions_configurator/config_menu/main  enabled \r\n      - Validating: problems found:\r\n        - require?  X nbextensions_configurator/config_menu/main\r\n    tree section\r\n      nbextensions_configurator/tree_tab/main  enabled \r\n      - Validating: problems found:\r\n        - require?  X nbextensions_configurator/tree_tab/main\r\n  config dir: /home/jbeezley/nex/testenv/etc/jupyter/nbconfig\r\n    notebook section\r\n      geonotebook/index  enabled \r\n      - Validating: OK\r\n```\r\n```\r\n$ jupyter serverextension list\r\nconfig dir: /home/jbeezley/.jupyter\r\n    jupyter_nbextensions_configurator  enabled \r\n    - Validating...\r\n      jupyter_nbextensions_configurator  OK\r\nconfig dir: /home/jbeezley/nex/testenv/etc/jupyter\r\n    geonotebook  enabled \r\n    - Validating...\r\n      geonotebook  OK\r\n\r\n```\r\n\r\nI get validation errors, but I think those are unrelated.  With this setup, geonotebook's server extension is not initialized.  Once I delete the user config at `~/.jupiter`, it works again. This appears to be due to a condition in traitlets [Config.merge](https://github.com/ipython/traitlets/blob/master/traitlets/config/loader.py#L197) method. Config keys are only merged (as opposed to clobbered) if comparing two Config objects.  In the case of server extension configurations the ```nbserver_extensions``` key is not converted to a Config object during ```Config.__init__()```.  This means when nbserver_extensions sub-keys are compared recursively from different jupyter_notebook_config.json files (e.g. from separate ```--sys-prefix``` and ```--user``` installs) they are being compared as  ```dict``` rather than ```<class 'traitlets.config.loader.Config'>```. Because of this the outer scope (e.g. ```~/.jupyter/jupyter_notebook_config.json``` ) clobbers the system-prefix scope (e.g. ```/path/to/virtual_environment/etc/jupyter/jupyter_notebook_config.json```).\r\n\r\nTo illustrate:\r\n\r\n__jupyter_notebook_config.json installed with ```--sys-prefix```__\r\n\r\n```sh\r\n(jupyter_2063) kotfic@minastirith:~/tmp/jupyter_2063 \u21d2 \\\r\ncat ~/.venvs/jupyter_2063/etc/jupyter/jupyter_notebook_config.json\r\n{\r\n  \"NotebookApp\": {\r\n    \"nbserver_extensions\": {\r\n      \"geonotebook\": true\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n__jupyter_notebook_config.json installed with ```--user```__\r\n```sh\r\n(jupyter_2063) kotfic@minastirith:~/tmp/jupyter_2063 \u21d2 \\ \r\ncat ~/.jupyter/jupyter_notebook_config.json \r\n{\r\n  \"NotebookApp\": {\r\n    \"nbserver_extensions\": {\r\n      \"jupyter_nbextensions_configurator\": true\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nBy the time we complete [load_config_file](https://github.com/ipython/traitlets/blob/master/traitlets/config/application.py#L658) nbserver_extensions will only contain ```{ \"jupyter_nbextensions_configurator\": True }```. Because displaying enabled/disabled plugins looks at each path individually (without merging) each plugin appears to be enabled.  But when the config is actually built the ```--sys-prefix``` installed configs will not be available.\r\n\r\n```nbserver_extensions``` is not converted to a Config object by [self._ensure_subconfig()](https://github.com/ipython/traitlets/blob/master/traitlets/config/loader.py#L171) because ```_ensure_subconfig``` only converts items that pass the predicate function [_is_section_key](https://github.com/ipython/traitlets/blob/master/traitlets/config/loader.py#L158-L163). ```nbserver_extensions``` does not pass this predicate because it is not **capitalized**.  \r\n\r\nI have verified that the merge of ```--user``` and ```--sys-prefix``` nbserver_extension elements works as expected if ```nbserver_extensions``` is converted to ```Nbserver_extensions``` and a [patch](https://gist.github.com/kotfic/8fc7221089a70640d726771e6652b397) is applied to change the trait in the notebook code. This is an unsatisfying but low impact fix.  Fully fixing the issue would require refactoring traitlet's Config object which would obviously have much wider impact. \r\n\r\nI am happy to put together a PR but I need a little guidance on how to proceed. Thanks!\r\n\r\n Wow, thanks for that thorough investigation!\r\n\r\nFixing it by capitalising a name doesn't seem ideal - especially as that will break all of people's existing config set with the lowercase name. Also, all other config options are lowercase. I'll have a go at thinking of a better way. I'd like to hear @minrk's thoughts too. The JSON config files for traitlets don't support merging items (setting to an empty dict needs to be possible for override in general). The frontend-specific `nbconfig` setup does, however, which makes more sense for what we are doing with extensions. I think we probably should have used the same extension system for both sides, rather than traitlets for one and a new setup for the other. This is part of what @SylvainCorlay is proposing in https://github.com/jupyter/enhancement-proposals/pull/21.\r\n\r\nI'm not sure of a decent way to fix this beyond moving the nbserver_extensions off of traitlets to the nbconfig loader, and I'm not sure we want to change how we do this *yet again* for 5.0. Conceivably, we could use that loader on the regular config files, but that seems like asking for trouble. I can sketch it out, if we think it's worth investigating, though. #2108 implements the last idea - use ConfigManager to load a merged config for nbserver_extensions, so it behaves like frontend extensions. It's not my favorite thing, but it gets the behavior we want, and might be worth the ickiness. Wait, this means that all of the `Dict` traitlets in the `NotebookApp` have this clobbering behavior?    Yes, traits in config are singletons, only class config is merged, so if you have:\r\n\r\n```python\r\nc.App.trait = {'a': 1}\r\n```\r\n\r\nat one config level, and\r\n\r\n```python\r\nc.App.trait = {'b': 2}\r\n```\r\n\r\nat another, the assignment at the later point takes precedent, and the result is the second assignment `{'b': 2}`, not the merge of the two.\r\n\r\nThe best way to think about traitlets config loading is a series of consecutive assignments.\r\n\r\nIf dict traits were always merged, there would be no way to specify that a value in higher-level config should not be there. Extensions work because the values are bools, and having a False value is equivalent to having removed that value. That's not true of dicts in general.\r\n In that case I don't think we should special-case the server extensions key amongst the others, as it will only worsen the existing confusion. @blink1073 would you prefer to move serverextensions over to the `nbconfig` out of traits, then? Yes, with a deprecation of the existing trait that still uses the current config data if it exists (removed in 6.0). What if instead we made a separate Dict-based Trait that had different semantics for merging? Then we could cleanly mark which parts of the config are merge-able. That would be a great solution. Unfortunately, the config object has finished merging before it knows which traits each value is for.\r\n\r\n@SylvainCorlay has plans for a different extension mechanism (based on #1706) for the separated Jupyter Server, and I'm a bit reticent to add another extension mechanism at the last minute for notebook 5.0 that we are going to deprecate immediately after releasing it, and there doesn't seem to be time between now and and 5.0 to fully implement #1706, since there's lots of changes regarding defaults, etc.\r\n\r\nSolving *just* the merge issue should be pretty simple - either by applying it in a band-aid fashion to the existing field (#2108) or moving it to nbconfig. I am :-1: to moving server-specific configuration to `nbconfig`, since eventually server != notebook.  It seems like #2108 is the best short term solution until we have the conf.d approach.","Maybe this is something that would make more sense to do in Jupyterhub? I think setting default permissions needs to be done at the FileContentsManager level. I'm happy for an option / different defaults in JupyterHub if that makes sense, but I think the option needs to be exposed somewhere in the single-user code. Unless setting `umask` for the process is enough, in which case JupyterHub can do it at the Spawner level.","Great! I think the unconditional message in the terminal is too much, since this will be shown to all users every time the notebook server is launched. Perhaps this one should only be triggered for a dev-install? Or maybe only having the js message is best. I pushed a commit that show the message in the terminal only on dev. \r\n Thanks @jinmehta13","@minrk I've submitted https://github.com/jupyter/notebook/pull/2068 to merge into this branch.We shoud have a fix on CodeMirror's end eventually (see https://github.com/codemirror/CodeMirror/issues/4454), but this will allow us to ship 4.3.2. Maybe it would be better to patch in-place after `bower install`, rather than track the modified file whole? Otherwise, I think we're at risk of clobbering the file on bower install, etc. That might be related to the error on Windows, I'm not sure. Let's include this in 4.3.2 \ud83d\udc4d  @gnestor merged #2068 @meeseeksdev backport to 4.x > @meeseeksdev backport to 4.x\r\n\r\nOk, I think I see the bug ... Oops, something went wrong applying the patch... Please have  a look at my logs.","the solution might be similar to the one for  #2058  I'm going to close this as it's a duplicate of https://github.com/jupyter/notebook/issues/2058","@minrk Here is a patch for CodeMirror that resolves https://github.com/jupyter/notebook/issues/1967. \r\n\r\nBuild is currently failing with: \r\n\r\n```\r\nFailed to build notebook { Error: Error: ENOENT: no such file or directory, open 'C:\\Users\\appveyor\\AppData\\Local\\Temp\\1\\pip-urfuhhtv-build\\notebook\\static\\components\\codemirror\\mode\\meta.js'\r\n```\r\n\r\nI assume this has something to do with patching CM but not sure what... I took a stab at patching in place by copying a patched `codemirror.js` from the `scripts` directory to the bower directory after `bower install` in `setupbase.py`. I'm not sure if this is the best way to do it, but builds are passing now! Can you review? Two minor comments, but \ud83d\udc4d  @gnestor want to make 4.3.2 with this? Ya let's release 4.3.2 today. I'll create an issue for it and give people a chance to chime in before releasing. @meeseeksdev backport to 4.x @Carreau Can you grant me @meeseeksdev powers? \ud83c\udfa9 interesting. You do have the power, let me try. It's probaby crashing.\r\n\r\n@meeseeksdev backport to 4.x Oops, something went wrong applying the patch... Please have  a look at my logs. Hum.. I don't know why it did not reply to you, but there is an error in backporting, i'll check. \r\n```\r\n== All has been fetched correctly\r\n2017-01-31T02:21:23.089015+00:00 app[web.1]: Cherry-picking 0e38b009f5f21ef0a480d2095de11537d9530692\r\n2017-01-31T02:21:23.346335+00:00 app[web.1]:   stderr: 'error: Mainline was specified but commit 0e38b009f5f21ef0a480d2095de11537d9530692 is not a merge.\r\n2017-01-31T02:21:23.346397+00:00 app[web.1]: fatal: cherry-pick failed'\r\n``` BTW you [are](https://github.com/MeeseeksBox/MeeseeksDev/blob/master/meeseeksdev/__init__.py#L9) white listed. that is strange it is picking up the wrong commit. It does not find the merge commit, which is supposed to be 393a04d1b0c583a613fe11f0ca38adf2c5e2ee66.... Oh... it seem like you want to backport #2066 and not this. Can you try the backport command there ? Sure, thanks @Carreau!","> In the line below I think name should be action_name:\r\n\r\nYup, I agree. PR welcome for that.\r\n\r\n> Also, the line above in conjunction with the line below are not adding the action and the button:\r\n>        Jupyter.toolbar.add_buttons_group([full_action_name]);\r\n\r\nLooking at the code, I think that should work, so if it's going wrong, there's an issue in the code. @Carreau may want to investigate.\r\n\r\n> without the final '/' in the path.\r\n\r\nI think it should work with either - unless it has a specific significance, I think that code should ignore a trailing slash on paths. So if you want to make a PR for that, I'd rather it was fixed in the code than the docs. Thanks @takluyver for the time to look into this.\r\n\r\nJust to provide some context, all my tests were made in a new conda env, installing jupyter from conda and tested on Linux and windows 7 (32bits). The extensions were always installed using `--sys-prefix` option. Here is a list of the packages installed in the conda env in the w7 box:\r\n\r\n```\r\n# packages in environment at d:\\users\\someone\\AppData\\Local\\Continuum\\Miniconda3\r\n\\envs\\jupytest:\r\n#\r\nca-certificates           2016.9.26                     0    conda-forge\r\ncertifi                   2016.9.26                py35_0    conda-forge\r\ncolorama                  0.3.7                    py35_0    conda-forge\r\ncycler                    0.10.0                   py35_0    conda-forge\r\ndecorator                 4.0.10                   py35_0    conda-forge\r\nentrypoints               0.2.2                    py35_0    conda-forge\r\nfreetype                  2.6.3                    vc14_1  [vc14]  conda-forge\r\nipykernel                 4.5.2                    py35_0    conda-forge\r\nipython                   5.1.0                    py35_2    conda-forge\r\nipython_genutils          0.1.0                    py35_0    conda-forge\r\nipywidgets                5.2.2                    py35_2    conda-forge\r\njinja2                    2.8                      py35_1    conda-forge\r\njpeg                      9b                       vc14_0  [vc14]  conda-forge\r\njsonschema                2.5.1                    py35_0    conda-forge\r\njupyter-contrib-core      0.3.0                     <pip>\r\njupyter-highlight-selected-word 0.0.7                     <pip>\r\njupyter-latex-envs        1.3.6                     <pip>\r\njupyter-nbextensions-configurator 0.2.3                     <pip>\r\njupyter_client            4.4.0                    py35_0    conda-forge\r\njupyter_contrib_core      0.3.0                    py35_1    conda-forge\r\njupyter_core              4.2.1                    py35_0    conda-forge\r\njupyter_highlight_selected_word 0.0.7                    py35_0    conda-forge\r\njupyter_latex_envs        1.3.6                    py35_0    conda-forge\r\njupyter_nbextensions_configurator 0.2.3                    py35_0    conda-forge\r\n\r\nlibiconv                  1.14                     vc14_4  [vc14]  conda-forge\r\nlibpng                    1.6.28                   vc14_0  [vc14]  conda-forge\r\nlibtiff                   4.0.6                    vc14_7  [vc14]  conda-forge\r\nlibxml2                   2.9.3                    vc14_9  [vc14]  conda-forge\r\nmarkupsafe                0.23                     py35_1    conda-forge\r\nmatplotlib                2.0.0               np111py35_0    conda-forge\r\nmistune                   0.7.3                    py35_0    conda-forge\r\nmkl                       2017.0.1                      0\r\nnbconvert                 4.2.0                    py35_0    conda-forge\r\nnbformat                  4.2.0                    py35_0    conda-forge\r\nnotebook                  4.3.1                    py35_0    conda-forge\r\nnumpy                     1.11.3                   py35_0\r\nopenssl                   1.0.2h                   vc14_3  [vc14]  conda-forge\r\npickleshare               0.7.3                    py35_0    conda-forge\r\npip                       9.0.1                    py35_0    conda-forge\r\nprompt_toolkit            1.0.9                    py35_0    conda-forge\r\npsutil                    4.3.0                    py35_0    conda-forge\r\npsutil                    5.0.1                     <pip>\r\npygments                  2.1.3                    py35_1    conda-forge\r\npyparsing                 2.1.10                   py35_0    conda-forge\r\npyqt                      4.11.4                   py35_2    conda-forge\r\npython                    3.5.2                         5    conda-forge\r\npython-dateutil           2.6.0                    py35_0    conda-forge\r\npytz                      2016.10                  py35_0    conda-forge\r\npyyaml                    3.11                     py35_0    conda-forge\r\nPyYAML                    3.12                      <pip>\r\npyzmq                     16.0.2                   py35_0    conda-forge\r\nqt                        4.8.7                    vc14_6  [vc14]  conda-forge\r\nsetuptools                33.1.0                   py35_0    conda-forge\r\nsimplegeneric             0.8.1                    py35_0    conda-forge\r\nsip                       4.18                     py35_1    conda-forge\r\nsix                       1.10.0                   py35_1    conda-forge\r\ntornado                   4.4.2                    py35_0    conda-forge\r\ntraitlets                 4.3.1                    py35_0    conda-forge\r\nvc                        14                            0    conda-forge\r\nvs2015_runtime            14.0.25420                    0    conda-forge\r\nwcwidth                   0.1.7                    py35_0    conda-forge\r\nwheel                     0.29.0                   py35_0    conda-forge\r\nwidgetsnbextension        1.2.6                    py35_3    conda-forge\r\nwin_unicode_console       0.5                      py35_0    conda-forge\r\nwincertstore              0.2                      py35_0    conda-forge\r\nyaml                      0.1.6                    vc14_0  [vc14]  conda-forge\r\nzlib                      1.2.8                    vc14_3  [vc14]  conda-forge\r\n```\r\n> Also, the line above in conjunction with the line below are not adding the action and the button:\r\n> `Jupyter.toolbar.add_buttons_group([full_action_name]);`\r\n\r\nTested in both, linux and windows and I can't see an error but the button is not in the frontend. I've tried some small modifications in the 'official' doc example, `handler` <-> `callback`, not providing `action_name` and `prefix`,... Also, defining and `action` object and trying to use it in the function was not working \u00bf?, e.g.:\r\n\r\n```javascript\r\n          //...\r\n          action = {\r\n                  'icon': 'fa-comment-o',\r\n                  'callback' : handler,\r\n                  'label': 'Kaka kaka kaka',\r\n                  'id': 'idKaka'\r\n              }\r\n          Jupyter.toolbar.add_buttons_group([action]);\r\n          /...\r\n```\r\n\r\nRegarding\r\n\r\n> `without the final '/' in the path.`\r\n\r\nIn case I have:\r\n```\r\nmy_extension1/\r\n  main.js\r\n\r\nmy_extension2/\r\n  main.js\r\n```\r\nAnd I want to install both when I use the trailing '/' `jupyter nbextension install my_extension1/` will copy the files inside the folder and not the folder so when I install the second extension, `my_extension2`, `main.js` of the first extension would be overwritten (as well as other files with same names. Also, There are problems with the uninstallation. Again, tested in both, linux and windows. I've added that on my looong todo list. If someone can get it first, please do.  @kikocorreoso if you have time, could you:\r\n\r\n1. Open a doc PR for the `action_name` fix - I think that's simple and correct.\r\n2. Work out what's going on with nbextension install and the trailing slash. I think that specifying a directory with a trailing slash should work exactly as specifying it without the trailing slash. If you can find what's going wrong, a PR to fix that would be welcome.\r\n\r\nThen if you're feeling keen, try to dig into the JS to see what's going wrong with adding toolbar buttons - there's definitely code there to handle adding them as an array of action names. @takluyver @Carreau \r\n\r\nSent a [PR](https://github.com/jupyter/notebook/issues/2077) for \"1. Open a doc PR for the `action_name` fix - I think that's simple and correct.\"\r\n\r\nRegarding the trailing slash (2.), Reading the [docs](https://github.com/jupyter/notebook/blob/master/notebook/nbextensions.py#L91):\r\n\r\n```python\r\n    path : path to file, directory, zip or tarball archive, or URL to install\r\n        By default, the file will be installed with its base name, so '/path/to/foo'\r\n        will install to 'nbextensions/foo'. See the destination argument below to change this.\r\n        Archives (zip or tarballs) will be extracted into the nbextensions directory.\r\n```\r\n\r\nI think the problem is [here](https://github.com/jupyter/notebook/blob/master/notebook/nbextensions.py#L168):\r\n\r\n```python\r\n        if not destination:\r\n            destination = basename(path)\r\n```\r\n\r\nIf I do:\r\n\r\n```python\r\nIn [1]: import os\r\n\r\nIn [2]: os.path.basename('my_extension/')\r\nOut[2]: ''\r\n\r\nIn [3]: os.path.basename('my_extension')\r\nOut[3]: 'my_extension'\r\n```\r\nI don't get the same. In the first case I would write the extension to the root of the `nbext` dir but in the second case I would include the complete folder for the extension. I don\u00a1t know if this is the expected but for me it is weird and can drive to overwrite other files with same names. I can prepare a PR to try to ammend this.\r\n\r\nFor the JS related issue, today I'm not in the mood to deal with JS (too busy, \ud83d\ude1b). If @Carreau confirms he cannot check this during the weekend I will try to spend some time on it.\r\n\r\nThanks again. That does look likely to be the issue. I think calling `os.path.normpath()` on the path before passing it to basename should fix it; among other normalisations, that removes a trailing slash from the path.\r\n\r\nNo worries if you don't have time to get to the JS. I don't think any of us are very excited about trying to debug it!","This should not affect at all the websocket. Do you have any intermediate proxies, or things that would cut connexions it they become iddle ? Does it do the same if you SSH from a 3rd machine ?\n Sorry I am fairly unfamiliar with the network configuring. What is going to be idle after detach? How do I check the existence of intermediate proxies? It seems that it happens only if I stop connecting SSH.\n Well if you ssh, the connection between your local machine and your server might idle on port 22, you do not have any packets going through. If you have a Nginx, or whatever in the middle (that might depends on the provider of your server, or sysadmin configuration), it might not recognize websocket as a persisting connexion. So it assume when you disconnect ssh that all connexion between local machine and server can be dropped. \n\nBut this has nothing to do with the notebook itself. You just have **something** in between your notebook and your local machine that drop connections.\n Closing as nothing we can do. \n What happens for me in a similar setup.\n\nI run a notebook, there are no cells that is executing (let say that it takes 10 minutes for a cell to run). I close the tab with the notebook, open it in another window and i'm able to continue.\n\nIf I execute a long running cell, close the tab and open it again, the execution of the cell will be stop (I suspect right after I close the tab). Is there a way to tell jupyter to keep execution even if nothing is connected to the notebook?\n > If I execute a long running cell, close the tab and open it again, the execution of the cell will be stop (I suspect right after I close the tab). Is there a way to tell jupyter to keep execution even if nothing is connected to the notebook?\n\nthe execution of the cell is likely not stopped, just the callback that handle the reply get destroyed with the windows context. We[1] were actually discussing that this morning, but it will take some time to fix/complex to fix correctly. \n\n[1] We in this context, is Me, Fernando, Jason Grout, Sylvain Corlay and a few folks at San Francisco Bloomberg offices.\n Great, thanks for the attention!\n Carreau, do you have any update that could help with this situation. I am running a notebook and am running into the same issue. Is there any workaround that you can suggest to keep the ping from timing out.\n > Is there any workaround that you can suggest to keep the ping from timing out.\n\nThis is not a timeout. What I suggest is to separate the function that do calculation from the function that show results. You can use Futures also.\n\nRun the computation, and disaplay the result only once connected again.\n > > If I execute a long running cell, close the tab and open it again, the execution of the cell will be stop (I suspect right after I close the tab). Is there a way to tell jupyter to keep execution even if nothing is connected to the notebook?\r\n> \r\n> the execution of the cell is likely not stopped, just the callback that handle the reply get destroyed with the windows context. We[1] were actually discussing that this morning, but it will take some time to fix/complex to fix correctly.\r\n>\r\n>[1] We in this context, is Me, Fernando, Jason Grout, Sylvain Corlay and a few folks at San Francisco Bloomberg offices.\r\n\r\n@Carreau  Are you guys still working on this issue or it is resolved? It's not resolved. There is still a lot of work to do for this to be functional. It's also not not something we have enough manpower to actively work on. Even the way we want to tackle this is unsure.","Very nice, thanks @ivanov!","That commit makes sense that it could cause such an error, but it wouldn't affect 4.2, since that commit is only in master. Can you see this error in a 4.2 release? Yes, I only see this is master. I tried the 4.2 branch and it works as expected. Mark as 5.0, not 4.3, then? #2073 ought to do it.","I can't reproduce using notebook 4.3.2 or master. I click on a `.rb` it open in the editor.\r\n\r\n![screencap](http://g.recordit.co/yYErksOnJP.gif) Using notebook 4.3.1 via JupyterHub 0.7.2 (just upgraded), and the problem is still there.\r\nEven happens when I create new text file from the Jupyter web UI, the moment I save it as .rb file, it won't open in the editor anymore.\r\n\r\nIs this something that was fixed from 4.3.1 -> 4.3.2 ?\r\n\r\nWhat could cause this?\r\nIs there a setting in jupyter regarding which extension/file types to view in editor or download?\r\nOr it has to do with something on the file system?\r\n\r\n Probably to do with what mimetype the system tells us .rb files are. Can you try (in Python):\r\n\r\n```python\r\nimport mimetypes\r\nmimetypes.guess_type('foo.rb')\r\n```\r\n\r\nIf it doesn't get a `text/something` mimetype, we won't try to edit it.\r\n You are correct, python replies with ```('application/x-ruby', None)```.\r\n\r\nSolution was to use the output of ```mimetypes.knownfiles``` and check the contents of these files for the mapping ```('application/x-ruby','rb')``` which I replaced with ```('text/x-ruby','rb')``` and now editing works!\r\n\r\nThanks for pointing me to the right direction.","Tested and working for me \ud83d\udc4d  @rgbkrk @gnestor Thanks!","Ping @rgbkrk  What happens when you try to upload a file? So the process is:\r\n1. I click upload, select my file from the directory viewer\r\n2. Try and press \"Upload\" next to the file to be uploaded\r\n\r\nI get the following:\r\n```\r\nObject { readyState: 4, getResponseHeader: .ajax/T.getResponseHeader(), getAllResponseHeaders: .ajax/T.getAllResponseHeaders(), setRequestHeader: .ajax/T.setRequestHeader(), overrideMimeType: .ajax/T.overrideMimeType(), statusCode: .ajax/T.statusCode(), abort: .ajax/T.abort(), state: .Deferred/r.state(), always: .Deferred/r.always(), then: .Deferred/r.then(), 12 more\u2026 }  main.min.js:13026:9\r\nAPI request failed (403): Permission denied: android-events.ipynb  main.min.js:13028:9\r\nError: Permission denied: android-events.ipynb  main.min.js:13074:29\r\n```\r\n\r\nLooking at this, I'm *guessing* there's nothing you can do... Alright, this is my fault. I just need to give the directory permissions. For any others that see this, just run `sudo chmod 777 $DIR` and things should work.","This sounds like it may be an issue with the implementation of the extension. I suggest that an issue be posted on its repo vs. notebook. \r\n\r\nhttps://github.com/ipython-contrib/jupyter_contrib_nbextensions/blob/master/src/jupyter_contrib_nbextensions/nbextensions/collapsible_headings\r\n\r\nIs this the extension you're using? Similar: https://github.com/jupyter/notebook/issues/2030 > This sounds like it may be an issue with the implementation of the extension. I suggest that an issue be posted on its repo vs. notebook.\r\n\r\nThanks for your suggestion. The issue I was referring to, https://github.com/ipython-contrib/jupyter_contrib_nbextensions/issues/822, is with the developer of the extension, who suggested to open an issue here.\r\n\r\nPlease let me know if I did not understand your message. Hi @gnestor so after some debugging, I had this failure to load as a result of timeouts occur even for minimal nbextensions which just log a single line to console on loading, so concluded it was a more generic problem. It's a while since I looked at it though, so I may be wrong...\r\n\r\n[edit: I'm the developer of the nbextension in question, in case that wasn't clear] so, yes, I can get this to occur for the following nbextension:\r\n\r\n```javascript\r\ndefine(function () {\r\n  return {\r\n    load_ipython_extension: function () { console.log('purdy!'); }\r\n  };\r\n});\r\n```\r\n\r\ngiven a large enough notebook, which for me seems to be ~ 500 cells (I used the notebook in [this gist](https://gist.github.com/jcb91/286ae54c8d631501d543c495b2ad1e81) to make large numbers of cells).\r\n\r\nnotebook 4.3.0\r\nChrome 55.0.2883.87 m\r\non windows 8.1","Sweet, @gnestor, thanks for this. I understand the motivation for having the whole modal be draggable, instead of just the header, but unfortunately that makes it impossible to select text from the modal (which makes editing the notebook metadata a rather painful experience). I sent you a patch to fix this - https://github.com/gnestor/notebook/pull/5  Thanks @ivanov! I also added a \"move\" cursor to the modal header to indicate that it is now draggable \ud83d\udc4d Oh wow, nice touch! \ud83c\udfbc \ud83c\udf77 \ud83c\udfb6 \ud83c\udf78  Very classy! :bowtie:  @ivanov \ud83d\ude0a","Thanks!","Some context: We deploy shared kernel environments to our Jupyter Hubs. We retain kernel specs for the last N environment versions. When we clean up a kernel spec, users who are still using the associated kernel and environment on disk can continue to work. However, because the kernel spec is gone, the JS error happens and the Running tab fails to render any notebooks. The user is stuck killing off the entire notebook server or navigating around the file tree to find running notebooks to shut down. Looks fine to me, thanks.","Interesting idea! This is probably a job for IPython's completions, and may be addressed by the upcoming switch to jedi in IPython 6. > Interesting idea! This is probably a job for IPython's completions, and may be addressed by the upcoming switch to jedi in IPython 6.\r\n\r\nI had this enabled on jedi in terminal for some time.\r\nThat's actually annoying in many case, because assigning a method/function is a valid operation in python. As is passing a callback, like in filter, map, or many other case.\r\nSo you end up being annoyed by the extra parens even if it's 1 backspace away.\r\nAdding the closing parens would be annoying to, an you would have to press left arrow once. The current completion API does not allow to reposition the cursor.\r\n\r\nI'm happy to (re)give it a try though.   PyCharm also adds parentheses - it does occasionally cause me to write code that does something different from what I expect, because I'm using the result of a function instead of the function itself. Mostly, though, I've got used to deleting the extra parentheses when I want to pass a function or method. indeed...I think it's still easier to press the backspace key ( delete one parenthesis ), instead of opening parenthesis ... - plus, some times you don't have too ","Can you describe what the goal of this PR is? \n It reintroduce icons for notebook, as they where deleted in the 3.x -> 4.x refactoring, remove the name \"IPython\" from the icons, replace it by \"Jupyter\", and change the color from bluish to orange-ish. \n\nSeem pretty obvious from looking at the diff. \n Hmm, not obvious to me :)\n\nI don't recall us ever using these icons.\n\nWhat did we use them for?\n\nDid we create these ourselves?\n\nAre we/you proposing to use them again?\n https://github.com/ipython/ipython/tree/3.x/docs/resources\n\nour docs about these icons : \n\nhttp://ipython.org/ipython-doc/2/whatsnew/version0.13.html#ipython-notebook-file-icons\n\ngoogle search for IPtyhon notebook icon:\n\nhttps://www.google.com/search?q=ipython+notebook+icon&es_sm=91&source=lnms&tbm=isch&sa=X&ved=0CAcQ_AUoAWoVChMIoauDvq3hxgIVzAWSCh3i7Qb0&biw=1280&bih=730\n\n<img width=\"664\" alt=\"screen shot 2015-07-16 at 21 49 37\" src=\"https://cloud.githubusercontent.com/assets/335567/8740798/9a509f5e-2c04-11e5-9263-f752b9cc3af4.png\">\n\nUsed by downstream packagers (at some point in the past at least), and my Finder \n<img width=\"909\" alt=\"screen shot 2015-07-16 at 21 44 03\" src=\"https://cloud.githubusercontent.com/assets/335567/8740764/029722c8-2c04-11e5-9b0c-d45cfd04cf91.png\">\n\n(Though it becomes harder in recent version of OS X since I brew-install my MacVim which make it painful to re-register.)\n\nAnd original PR:\n\nhttps://github.com/ipython/ipython/pull/1968/files\n Ahh, thanks, I missed the original PR. I will talk to Cameron about this\ntomorrow.\n\nOn Thu, Jul 16, 2015 at 9:54 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> https://github.com/ipython/ipython/tree/3.x/docs/resources\n> \n> our docs about these icons :\n> \n> http://ipython.org/ipython-doc/2/whatsnew/version0.13.html#ipython-notebook-file-icons\n> \n> google search for IPtyhon notebook icon:\n> \n> https://www.google.com/search?q=ipython+notebook+icon&es_sm=91&source=lnms&tbm=isch&sa=X&ved=0CAcQ_AUoAWoVChMIoauDvq3hxgIVzAWSCh3i7Qb0&biw=1280&bih=730\n> \n> [image: screen shot 2015-07-16 at 21 49 37]\n> https://cloud.githubusercontent.com/assets/335567/8740798/9a509f5e-2c04-11e5-9263-f752b9cc3af4.png\n> \n> Used by downstream packagers (at some point in the past at least), and my\n> Finder\n> [image: screen shot 2015-07-16 at 21 44 03]\n> https://cloud.githubusercontent.com/assets/335567/8740764/029722c8-2c04-11e5-9b0c-d45cfd04cf91.png\n> \n> (Though it becomes harder in recent version of OS X since I brew-install\n> my MacVim which make it painful to re-register.)\n> \n> And original PR:\n> \n> https://github.com/ipython/ipython/pull/1968/files\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/208#issuecomment-122175700.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n <img width=\"909\" alt=\"screen shot 2015-07-16 at 21 56 26\" src=\"https://cloud.githubusercontent.com/assets/335567/8740853/9c048c56-2c05-11e5-89fc-3dabe43ed9a6.png\">\n<img width=\"909\" alt=\"screen shot 2015-07-16 at 21 56 37\" src=\"https://cloud.githubusercontent.com/assets/335567/8740852/9c044052-2c05-11e5-8699-7c9b1ed5ab13.png\">\n<img width=\"909\" alt=\"screen shot 2015-07-16 at 21 57 29\" src=\"https://cloud.githubusercontent.com/assets/335567/8740858/aebfe908-2c05-11e5-8885-3e6876a04da9.png\">\n\nAnd how it looked with half the notebook with new icon-set. The medium sized is borked and get 24px icon instead of 32px because of the building step that fails in the middle that I need to figure out. \n\nThe first PR is 3 year old, you had plenty of time to catch up with it :-) \n\nI would like to avoid  re-Bikesheding on the font and everything about the icons if possible. \n\nMore providers that use the icons:\n\nhttps://www.terminal.com/snapshot/8e1b3ab4db4640d88f69e6e0dcc875a2f955b280b740ec21c5f7f42a4bf1b7eb\n\nhttps://demo.jujucharms.com/~bigdata-dev/trusty/apache-spark-notebook-16/?text=ipython-notebook\n\nHow to set icon in ubuntu:\n\nhttp://ochsavidare.blogspot.com/2015/04/how-to-create-new-mime-type-for-ipython.html\n\nSo not shipping that is actually removing something that is used. \n Discussing design is not bikeshedding.\n\nIf previously provided icons are now missing, we should definitely include\nthem.\n\nAs we work with Cameron on the website design, we are finding that his\ndesign skills go way beyond ours, both in quality and speed. I have no\ndoubt that he could do an icon set that is a massive improvement over these\n(no offense to you or the original authors). The main thing I want to talk\nto him about is the time effort required. Right now he is working hard on\nthe websites, which are pretty high priority. It may make sense to merge\nthe icons as is for 4.0 and then have Cameron do a redesign for 5.0.\n\nOn Thu, Jul 16, 2015 at 10:08 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> [image: screen shot 2015-07-16 at 21 56 26]\n> https://cloud.githubusercontent.com/assets/335567/8740853/9c048c56-2c05-11e5-89fc-3dabe43ed9a6.png\n> [image: screen shot 2015-07-16 at 21 56 37]\n> https://cloud.githubusercontent.com/assets/335567/8740852/9c044052-2c05-11e5-8699-7c9b1ed5ab13.png\n> [image: screen shot 2015-07-16 at 21 57 29]\n> https://cloud.githubusercontent.com/assets/335567/8740858/aebfe908-2c05-11e5-8885-3e6876a04da9.png\n> \n> And how it looked with half the notebook with new icon-set. The medium\n> sized is borked and get 24px icon instead of 32px because of the building\n> step that fails in the middle that I need to figure out.\n> \n> The first PR is 3 year old, you had plenty of time to catch up with it :-)\n> \n> I would like to avoid re-Bikesheding on the font and everything about the\n> icons if possible.\n> \n> More providers that use the icons:\n> \n> https://www.terminal.com/snapshot/8e1b3ab4db4640d88f69e6e0dcc875a2f955b280b740ec21c5f7f42a4bf1b7eb\n> \n> https://demo.jujucharms.com/~bigdata-dev/trusty/apache-spark-notebook-16/?text=ipython-notebook\n> \n> How to set icon in ubuntu:\n> \n> http://ochsavidare.blogspot.com/2015/04/how-to-create-new-mime-type-for-ipython.html\n> \n> So not shipping that is actually removing something that is used.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/208#issuecomment-122177102.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > no offense to you \n\nNone taken, \n\n> or the original authors\n\nNone taken either.\n\nSorry if I'm pushy, but that the kind of details that have been overlooked in the past,\nand I'm not yet ready to accept that saying redesign will be done will actually\nmake things happen. \n @ellisonbg where did discussions with Cameron on this get to?\n He ca. Do it but the website is higher priority so this will likely be for 5.0\n\nSent from my iPhone\n\n> On Jul 23, 2015, at 10:28 AM, Thomas Kluyver notifications@github.com wrote:\n> \n> @ellisonbg where did discussions with Cameron on this get to?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n It's true that the website have to be release before the 4.0 packages, and that people are already using the website to provide icons to user. \n Does it make sense to merge these icons for 4.0, and get redesigned ones for 5.0?\n I am fine with merging this for 4.0.\n\nOn Thu, Jul 23, 2015 at 2:19 PM, Thomas Kluyver notifications@github.com\nwrote:\n\n> Does it make sense to merge these icons for 4.0, and get redesigned ones\n> for 5.0?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/208#issuecomment-124243327.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @Carreau, do you want to restore the branch so we can do that?\n It's deleted now. I can't reopen. \n Even when I delete a branch, I see a 'Restore branch' button next to the line where I deleted it. Do you not see that? It's still showing the diff, after all, so it hasn't really deleted anything.\n The commits are probably part of this repo as you can usually get the PRs pulled to your local repo with (last line in this example from my pandas repo):\n\n```\n[remote \"origin\"]\n    url = https://github.com/pydata/pandas.git\n    fetch = +refs/heads/*:refs/remotes/origin/*\n    fetch = +refs/tags/*:refs/tags/origin/*\n    fetch = +refs/pull/*/head:refs/remotes/origin/pr/*\n```\n\nSo if you only want to get the commits back that probably possible.\n Good point, thanks @JanSchulz .\n\n@Carreau , do you see a restore button? If not, I can make a new branch with this commit.\n Thank you, I am familiar with git rebase, reflog, fetch, and my global git configuration already exposes all PRs under origin/pr/<prnumber>, and are regularly fetched as a morning routine.\n\nSo I'm sure I could get the commits again if needed.\n\nEnvoy\u00e9 de mon iPhone\n\n> Le 25 juil. 2015 \u00e0 09:06, Jan Schulz notifications@github.com a \u00e9crit :\n> \n> The commits are probably part of this repo as you canusually get the PRs pulled to your local repo with\n> \n> [remote \"origin\"]\n>     url = https://github.com/pydata/pandas.git\n>     fetch = +refs/heads/_:refs/remotes/origin/_\n>     fetch = +refs/tags/_:refs/tags/origin/_\n>     fetch = +refs/pull/_/head:refs/remotes/origin/pr/_\n> So if you only want to get the commits back that probably possible.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n","Sorry, \r\n\r\nI realised that this is more an issue for stack overflow...\r\n\r\nI get this error message from ipython3 console\r\n`AttributeError: Can't get attribute 'my_loop' on <module '__main__'>`\r\n\r\n-- if you still have answer, thanks problem solved (python3.5) by defining the pool in:\r\n\r\n`if __name__ == '__main__':` \r\n\r\ncredits to [this post on SO](http://stackoverflow.com/questions/25757794/multiprocessing-attributeerror-module-object-has-no-attribute-path)\r\n\r\n(but still, I don't understand why, as I run many simulations in the past  - python 2.7 - without the need of `__main__`)","If you run `conda list`, what version does it show for `notebook`. Try `conda update notebook` to make sure you have the latest. If you've got the latest version (4.3.1) and it's still showing that error, that sounds like an Anaconda packaging problem. This is likely a problem with conda packages. You might try:\r\n\r\n- conda remove notebook\r\n- conda clean -tipsy\r\n- conda install notebook\r\n\r\n\r\n","This looks fine to me, but I'd like someone more familiar with the notebook JS stuff to look over it too.","You don't need to go for the mouse - if you press <kbd>Return</kbd> again after executing the cell, you should go back into edit mode with the cursor at the same place. @takluyver Thanks, I didn't know that. I'd prefer it to get there back on its own but at least it works with <kbd>Return</kbd>. :) No problem. I don't think we're going to change how it works, because it was a deliberate decision to switch into command mode there, allowing you to quickly move to other cells if you want to, and also because people are used to that. Alright, got it. :) At least now I know it's possible :)\r\n\r\n![workflow](https://cloud.githubusercontent.com/assets/1429426/22479451/10d1fed8-e7ee-11e6-8daa-c179295d8b50.png)\r\n Ha! :-)","The best place to implement code at most of these stages is in subclassed ContentsManagers, which is why we don't have these hooks defined. Subclasses can make more assumptions about their storage mechanism than the base classes, as indicated by the fact that only the FileContentsManager has a post_save hook, not the general base class. So, hooks are not a project aim?\r\n\r\nThis code tells me that every content manager can use **pre_save_hook** and every filemanager have **post_save_hook** and **pre_save_hook**. Are there some reasons for only these two hooks were implemented? I think your hooks are under construction, so I'm following @minrk considerations doing my own subclass with these hooks: https://github.com/globocom/jupyterhub_hook_filemanager\r\n\r\nI'm trying to follow **pre_save** and **post_save** patterns\r\n\r\nThx guys! Closing here because I solve my problem and hooks are not full defined","Can you walk us through the timeline of what you think is happening? @jasongrout @minrk @gnestor \r\n\r\nWhat do you think of reverting #1002 and changing `execute_cell_and_insert_below` so that it first checks that the kernel is live? I'd rather fix the problem. Can you walk us through the sequence of what you think is happening? Okay, here's a possible sequence. I haven't tested this.\r\n\r\n1. The notebook launches\r\n2. The user quickly presses shift-enter to execute a cell that has widget code.\r\n3. The cell is queued up for execution\r\n4. The widget javascript is loaded. When the widget javascript is loaded, it immediately sends a comm message to the kernel with the version information, etc. This is comm message is queued *behind* the cell execution. (TODO: Check that the comm open message to jupyter.widget.version is queued behind the cells)\r\n5. The kernel starts up.\r\n6. The cell is executed. Since the kernel widgets has not seen the comm message from the javascript, it assumes there is no widget javascript and so prints an error message: \"Widget Javascript not detected.  It may not be installed or enabled properly.\"\r\n\r\nBasically, it's a race condition between the widget javascript running before the user executes a cell, and an assumption from the kernel side that the ipywidgets will be able to execute a comm open before any user code runs.\r\n\r\nBefore #1002, here's what I am thinking was happening in the situations where the message seemed to randomly pop up.\r\n\r\n1. The notebook launches\r\n2. The user quickly presses shift-enter to execute a cell that has widget code.\r\n3. The execution is silently ignored since the kernel is not up yet.\r\n4. The widget javascript is loaded. When the widget javascript is loaded, it immediately sends a comm message to the kernel with the version information, etc. *This is also silently ignored!*\r\n5. The kernel starts up.\r\n6. Another cell is executed. Since the kernel widgets has not seen the comm message from the javascript, it assumes there is no widget javascript and so prints an error message: \"Widget Javascript not detected.  It may not be installed or enabled properly.\"\r\n\r\nIt always seemed fickle when the 'js not installed' error came up.\r\n\r\nI think the real problem is that in ipywidgets, we are assuming that the widget javascript will have priority access to a kernel, before user execution. I think we probably need a more robust method for doing the version check.\r\n\r\nAnd clearly this ipywidget check is faulty if we have multiple clients talking to the same kernel. The first client will okay its version of javascript, so the error won't show if the second client does not have the javascript installed.\r\n > And clearly this ipywidget check is faulty if we have multiple clients talking to the same kernel.\r\n\r\nI'm moving this issue to ipywidgets, since I think the real problem is with the widget javascript check. Moved to https://github.com/ipython/ipywidgets/issues/1211","@takluyver @Carreau Are there any other patches that you would like to see included in 4.3.2? No, I don't think so. I'm trying to focus my efforts on getting 5.0 out soon. Travis builds are passing: https://travis-ci.org/jupyter/notebook/builds/197053747 @minrk @Carreau @takluyver  I tested the sdist/wheel and things appear to be working. Give me the green light and I will publish to PyPI. @Carreau You're the only one that is presumably awake. Can you take a look before I publish? +1 Go ahead ! 4.3.2 is out! Thanks @Carreau! Thanks !\n\nOn Tue, Jan 31, 2017 at 5:34 PM, Grant Nestor <notifications@github.com>\nwrote:\n\n> 4.3.2 is out!\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2088#issuecomment-276548619>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUez0gU2QGCN2i_5CrEyKiXoomzI1KTks5rX-E5gaJpZM4LyDlY>\n> .\n>\n Thanks!","@meeseeksdev backport to 4.x","This is very not done, but I wanted to open a PR in case others are working on similar things and deciding how to organize.\n I am very much in favor of this. Although, I am wondering if this is describing \"extending\" or \"customizing\". In the past, we had been using \"Customiztion\" as an umbrella for configuration and extending.\n @ellisonbg agreed that the line between extending and customizing is hazy.  In my mind, \"customizing\" is about taking already-existing systems and changing the parameters to them (e.g. changing how many lines are retained in history, or changing the prompt in the terminal), whereas \"extending\" has more of a connotation of adding entirely new systems (e.g. the notebook sharing system on Quantopian).  Something like writing a new contents manager falls on the border of these two ideas.\n\nI also refer to \"overriding\" aspects of the notebook a few times here, which probably could be better-phrased as \"customizing\".\n Thanks, I think this looks like a really good start.\n @ssanderson we're hoping to release 4.0 early next week. Will you have time to address the comments on this? We can merge it and make some changes ourselves if you prefer.\n @takluyver I don't think I'll be able to get this as completely done as I think would be ideal, but I think I can get these into a state that's worth merging and/or handing off to you guys by the end of this weekend.\n That sounds great - we'll pick it up on Monday. Anything you have time to do in the meantime is very welcome :-)\n @takluyver this is probably as far as I'm going to get until Monday.  Feel free to reconfigure as you please.  The two major things I think are still missing from the Contents API docs are:\n1. CheckpointManagers (maybe noting the existence/usage of `GenericCheckpointsMixin`).\n2. Documentation of the HTTP API for consumers of the API from the Javascript side.\n Thanks!\n","#2092 should fix the Travis builds once merged.","Thanks, this looks good to me.","\ud83d\udc4d ","> Should we expose jupyter notebook list results in the UI and/or API? For the local case it sounds nice, but I'm thinking it's probably not a good idea as it breaks a notebook's isolation, exposing other notebook servers for the same user on the system (including their auth info).\r\n\r\nI think not - I think it's really important to preserve the notebook's isolation.\r\n\r\n > It would probably be convenient for users who switch browsers / toggle private browsing to be able to get a link with the auth token in the URL that can be copied from somewhere in the notebook UI. That way opening a new authenticated browser can be done easily from the already authenticated browser, without needing to get the token from jupyter notebook list in a terminal.\r\n\r\nI think it would make sense to make it easy to retrieve a one-time token from the rest api, which could be exposed in the browser, or another program could launch another browser, etc. I run notebooks using Docker via Kitematic and get a status message along the lines of:\r\n\r\n![image](https://cloud.githubusercontent.com/assets/82988/23316979/8c469900-fac4-11e6-8d0c-15b56979eaeb.png)\r\n\r\nWhich is sort of true but sort of not - because when running Kitematic against a VM, the ports are forwarded:\r\n\r\n![image](https://cloud.githubusercontent.com/assets/82988/23317016/b0725f94-fac4-11e6-8e07-f3c1d99db47a.png)\r\n\r\nIn this case, it would be more user friendly if the status message just said to post the token - and then give the token - into the initial authentication screen text box and not mention the localhost / port 8888 URL combination.\r\n\r\nSo rather than:\r\n\r\n    Copy/paste this URL into your browser when you connect for the first time,\r\n    to login with a token:\r\n        http://localhost:8888/?token=NNNNN\r\n\r\nmaybe say something like:\r\n\r\n    Enter the following token at the initial sign-in to the notebook:\r\n        NNNN\r\n    Alternatively, if the server is running on the local host without port forwarding, visit the URL:\r\n        http://localhost:8888/?token=NNNNN\r\n\r\n I'd like to keep the URL as the default and most prominent thing, because there are a lot of inexperienced users who run the notebook locally, and that's the easiest way for them to get authenticated.\r\n\r\nMaybe there could be a command line option or environment variable to tell it \"you're running behind a proxy\" so that it can show a different message.","I think this looks good, and I don't know where to put it in the menu either.\r\n\r\nI generally dislike settings going under the Edit menu; 'Edit preferences' makes sense linguistically, but semantically, it's nothing like the other things that usually go in the edit menu, which are about editing the document. Thanks. I've send a PR with a menu item just next to \"keyboard shortcuts\" one. It's likely where most people will find it I guess. ","I've seen this before but I think it's an artifact of switching between branches. Try `npm run build` and hard-refreshing. That fixes it for me.  You're right, sorry about that.","I believe the reason is that those keyboard shortcuts conflict with some browser shortcuts. If you want to re-enable them for yourself, you can edit your `custom.js`, as described in this issue: https://github.com/ipython/ipython/pull/7732\n Ok, thank you for you answer.\n Does that also work in jupyter notebook? The referenced post seems to apply to ipython notebook. I can't run the code that @Carreau suggested. When I try to run:\n\n```\nIPython.keyboard_manager.command_shortcuts.add_shortcut('Shift-k','ipython.move-selected-cell-up')\n```\n\nI get an error:\n\n```\nImportError: No module named keyboard_manager\n```\n Why are these shortcuts disabled anyway? They do indeed conflict with browser shortcuts, but typically two that you don't care about when you work on a notebook (\"show downloads\" and \"type a ? in the address bar\").\n +1 for re-enabling these\n +100 for re-enabling these\n Please read the rest of the discussion before posting : \n- We **will not** re-enable that by default, it breaks some browsers. Commenting +1 or +100 won't help.\n- You can enable that yourself in your configuration. So we don't need to reenable them.\n","Love the idea of unifying all of this! \n @minrk all of these applications should probably share config in `jupyter_notebook_config.{py,json}`. Is implementing a `_config_file_name_default()` method on each the best way to achieve this?\n\nLooks like there's a circular import issue on Python 2; I'll make the imports of ConfigManager local.\n > Is implementing a _config_file_name_default() method on each the best way to achieve this?\n\nProbably, yes.\n ping @jhamrick for nbgrader. \n What a bout extension that should be enabled on all pages, like on the dashboard ( I came across that on sempervierens)\n `--section common`\n I really like this... make things simple.\n\n> Should these commands accept multiple extension names in one call? nbextension install currently doesn't, so there's a symmetry argument, but it would be easy to handle more than one if necessary.\n\nProbably not, because of the symmetry argument \n\n> Especially for disable, should it give an error if you try to disable something that's not enabled? Currently it will just pass silently. Enable could also fail if it's already enabled, but that seems less useful.\n\nErrors could be useful, I think...\n Awesome, glad to see this is happening!\n\n> Should these commands accept multiple extension names in one call? nbextension install currently doesn't, so there's a symmetry argument, but it would be easy to handle more than one if necessary.\n\nI would also agree probably it should just take one argument.\n\n> Especially for disable, should it give an error if you try to disable something that's not enabled? Currently it will just pass silently. Enable could also fail if it's already enabled, but that seems less useful.\n\nI would say in either case it shouldn't give a true error, but perhaps print a warning so the user is aware of what's happening at least.\n > I would say in either case it shouldn't give a true error, but perhaps print a warning so the user is aware of what's happening at least.\n\nFor a command line interface, I guess that the question is whether it exits with status code 0 or not...\n I think:\n- redundant enable definitely shouldn't raise (see `pip install already-installed`)\n- 50/50 about disable already disabled - error helps you catch typos (see `pip uninstall nonexistent`), no error is more symmetrical with redundant enable. In either case, a message for humans is good.\n OK, I've made this only take one extension at a time, and error (exit with code 1 and print a message) if you try to disable something that's not currently enabled. I think this is a reasonable compromise: it's easy to ignore the exit code if you don't care.\n I think the asymmetry between enable and disable behaviour is OK here - all of pip, conda and apt seem to have a similar asymmetry between install and uninstall.\n LGTM\n Marked for 4.0 because I think this is ready to go, and it would be good to get extensions using it soon. We can change the milestone if people disagree.\n","Interesting idea. We're reluctant to show anything in the list that requires reading the file, though, because that makes it slower to show the list, especially with many files. @takluyver  It surely could have an impact on the performance although I don't know exactly what it would take to get that information out of the .ipynb file or whether one could \"cache\" that somewhere. There could also be a checkbox to enable/disable this function - just throwing in some ideas :)\r\n\r\nAll I can say is that a lot of files make it sometimes hard to find the right one and sometimes in larger projects many files can accumulate - with the ability to display a short description with some minor information about that file the search could be a bit more convenient.\r\n\r\n----\r\n\r\nThat being said: It could also be a tooltip/pop-up - it does not have to be displayed in the file's row - that means one could also fetch that information just \"on demand\" for example - although this does slow down the \"search process\" since I'd have to hover over each file before I can read its description.  What milestone are we supposed to add now that \"wishlist\" is gone ? I've been using 'backlog' like 'wishlist'. I don't see us doing this any time soon, though, because of the performance issue. @takluyver What do you think would be the bottleneck? The browser or the parsing of the markdown? Imho this should not impact the performance a lot even if one had 100 files in one directory (which I guess is quite uncommon).  Opening and reading all the files is non-trivial, especially if they're on a spinning hard drive or a network-mounted filesystem. We also don't have a good way to get metadata without reading the whole file, but I suspect that even reading part of every file would be too much overhead. @takluyver Okay, that sounds reasonable. In that case I guess this won't make it into the todo list any time soon - if at all. :D\r\n I'll confirm what @takluyver said, we even had a long-ish discussion about having a different icon per language (as the language is in the metadata), and after much discussion we decided that it was not worth it. \r\n\r\nWhile it could be fast enough in some rare case (notebook stored on DB instead of filesystem) anything that requires taking a peek into the file will likely not be worth is.\r\n\r\nlet's add that as wishlist and revisit at some point in the future.  Fair enough :)","The following is my output when I run the js tests (it hangs indefinitely on the mockextension group): \r\n\r\n```\r\ngrant:notebook grant$ python -m notebook.jstest\r\n\r\nTest group: base\r\nRunning tests with notebook directory '/var/folders/wg/yhdj316j4hs2_z5s0_5_k0tc0000gp/T/tmpi2pzidgu'\r\nTest file: /Users/grant/Sites/jupyter/notebook/notebook/tests/base/highlight.js \r\nTimeout for http://localhost:8889/a@b/\r\nIs the notebook server running?\r\nFAIL Wait timeout occured (10000ms)\r\n#    type: uncaughtError\r\n#    file: /Users/grant/Sites/jupyter/notebook/notebook/tests/base/highlight.js\r\n#    error: Wait timeout occured (10000ms)\r\n\r\n#    stack: not provided\r\n\r\nCaptured console.log:\r\n    loaded custom.js\r\nFAIL Couldn't find popup with url containing ''\r\n#    type: uncaughtError\r\n#    file: /Users/grant/Sites/jupyter/notebook/notebook/tests/base/highlight.js:137\r\n#    error: Couldn't find popup with url containing ''\r\n#           findByURL@phantomjs://platform/pagestack.js:137:89\r\n#           find@phantomjs://platform/pagestack.js:89:35\r\n#           _step@phantomjs://platform/casper.js:2527:41\r\n#           runStep@phantomjs://platform/casper.js:1615:31\r\n#           checkStep@phantomjs://platform/casper.js:406:28\r\n#    stack: not provided\r\nTest file: /Users/grant/Sites/jupyter/notebook/notebook/tests/base/keyboard.js  \r\nTimeout for http://localhost:8889/a@b/\r\nIs the notebook server running?\r\nFAIL Wait timeout occured (10000ms)\r\n#    type: uncaughtError\r\n#    file: /Users/grant/Sites/jupyter/notebook/notebook/tests/base/keyboard.js\r\n#    error: Wait timeout occured (10000ms)\r\n\r\n#    stack: not provided\r\n\r\nCaptured console.log:\r\n    loaded custom.js\r\nFAIL Couldn't find popup with url containing ''\r\n#    type: uncaughtError\r\n#    file: /Users/grant/Sites/jupyter/notebook/notebook/tests/base/keyboard.js:137\r\n#    error: Couldn't find popup with url containing ''\r\n#           findByURL@phantomjs://platform/pagestack.js:137:89\r\n#           find@phantomjs://platform/pagestack.js:89:35\r\n#           _step@phantomjs://platform/casper.js:2527:41\r\n#           runStep@phantomjs://platform/casper.js:1615:31\r\n#           checkStep@phantomjs://platform/casper.js:406:28\r\n#    stack: not provided\r\nTest file: /Users/grant/Sites/jupyter/notebook/notebook/tests/base/misc.js      \r\nTimeout for http://localhost:8889/a@b/\r\nIs the notebook server running?\r\nFAIL Wait timeout occured (10000ms)\r\n#    type: uncaughtError\r\n#    file: /Users/grant/Sites/jupyter/notebook/notebook/tests/base/misc.js\r\n#    error: Wait timeout occured (10000ms)\r\n\r\n#    stack: not provided\r\n\r\nCaptured console.log:\r\n    loaded custom.js\r\nFAIL Couldn't find popup with url containing ''\r\n#    type: uncaughtError\r\n#    file: /Users/grant/Sites/jupyter/notebook/notebook/tests/base/misc.js:137\r\n#    error: Couldn't find popup with url containing ''\r\n#           findByURL@phantomjs://platform/pagestack.js:137:89\r\n#           find@phantomjs://platform/pagestack.js:89:35\r\n#           _step@phantomjs://platform/casper.js:2527:41\r\n#           runStep@phantomjs://platform/casper.js:1615:31\r\n#           checkStep@phantomjs://platform/casper.js:406:28\r\n#    stack: not provided\r\nTest file: /Users/grant/Sites/jupyter/notebook/notebook/tests/base/security.js  \r\nTimeout for http://localhost:8889/a@b/\r\nIs the notebook server running?\r\nFAIL Wait timeout occured (10000ms)\r\n#    type: uncaughtError\r\n#    file: /Users/grant/Sites/jupyter/notebook/notebook/tests/base/security.js\r\n#    error: Wait timeout occured (10000ms)\r\n\r\n#    stack: not provided\r\n\r\nCaptured console.log:\r\n    loaded custom.js\r\nFAIL Couldn't find popup with url containing ''\r\n#    type: uncaughtError\r\n#    file: /Users/grant/Sites/jupyter/notebook/notebook/tests/base/security.js:137\r\n#    error: Couldn't find popup with url containing ''\r\n#           findByURL@phantomjs://platform/pagestack.js:137:89\r\n#           find@phantomjs://platform/pagestack.js:89:35\r\n#           _step@phantomjs://platform/casper.js:2527:41\r\n#           runStep@phantomjs://platform/casper.js:1615:31\r\n#           checkStep@phantomjs://platform/casper.js:406:28\r\n#    stack: not provided\r\nTest file: /Users/grant/Sites/jupyter/notebook/notebook/tests/base/utils.js     \r\nTimeout for http://localhost:8889/a@b/\r\nIs the notebook server running?\r\nFAIL Wait timeout occured (10000ms)\r\n#    type: uncaughtError\r\n#    file: /Users/grant/Sites/jupyter/notebook/notebook/tests/base/utils.js\r\n#    error: Wait timeout occured (10000ms)\r\n\r\n#    stack: not provided\r\n\r\nCaptured console.log:\r\n    loaded custom.js\r\nFAIL Couldn't find popup with url containing ''\r\n#    type: uncaughtError\r\n#    file: /Users/grant/Sites/jupyter/notebook/notebook/tests/base/utils.js:137\r\n#    error: Couldn't find popup with url containing ''\r\n#           findByURL@phantomjs://platform/pagestack.js:137:89\r\n#           find@phantomjs://platform/pagestack.js:89:35\r\n#           _step@phantomjs://platform/casper.js:2527:41\r\n#           runStep@phantomjs://platform/casper.js:1615:31\r\n#           checkStep@phantomjs://platform/casper.js:406:28\r\n#    stack: not provided\r\nFAIL 9 tests executed in 51.984s, 0 passed, 9 failed, 0 dubious, 0 skipped.     \r\n\r\nDetails for the 9 failed tests:\r\n\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/highlight.js\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/highlight.js\r\n    uncaughtError: Wait timeout occured (10000ms)\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/highlight.js:137\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/highlight.js\r\n    uncaughtError: Couldn't find popup with url containing ''\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/keyboard.js\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/highlight.js\r\n    uncaughtError: Wait timeout occured (10000ms)\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/keyboard.js:137\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/keyboard.js\r\n    uncaughtError: Couldn't find popup with url containing ''\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/misc.js\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/keyboard.js\r\n    uncaughtError: Wait timeout occured (10000ms)\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/misc.js:137\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/misc.js\r\n    uncaughtError: Couldn't find popup with url containing ''\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/security.js\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/misc.js\r\n    uncaughtError: Wait timeout occured (10000ms)\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/security.js:137\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/security.js\r\n    uncaughtError: Couldn't find popup with url containing ''\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/utils.js\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/security.js\r\n    uncaughtError: Wait timeout occured (10000ms)\r\n\r\nTest group: mockextension\r\nRunning tests with notebook directory '/var/folders/wg/yhdj316j4hs2_z5s0_5_k0tc0000gp/T/tmpys4z4hwb'\r\nTest file: /Users/grant/Sites/jupyter/notebook/notebook/tests/mockextension/index.js\r\n``` Hmm, we're importing `SYSTEM_JUPYTER_PATH` [here](https://github.com/jupyterlab/jupyterlab/blob/d14174875712c9ad24bea31be0d54a31daa18b27/jupyterlab/labextensions.py#L19), looks like we need to check if it is empty. For the former, check that your `jupyter_core` is up to date. I don't think that there should be any case where SYSTEM_JUPYTER_PATH is an empty list (unless conda packaging changes it?) (Thomas' answer makes more sense). nbextensions are using the same pattern: https://github.com/jupyter/notebook/blob/2eb7bf19530252247dc9b112016080733b150352/notebook/nbextensions.py#L1013 The second issue looks like a symptom of the first. Thanks, guys! \r\n\r\nI tried `pip install --upgrade jupyter-core` but no luck.\r\n\r\nI ran a `conda list` and I have a couple jupyter-cores:\r\n\r\n```\r\njupyter-core              4.2.1                     <pip>\r\njupyter-core              4.2.0                     <pip>\r\njupyter-react             0.1.3                     <pip>\r\njupyter_client            4.2.2                    py35_0  \r\njupyter_console           4.1.1                    py35_0  \r\njupyter_contrib_core      0.3.0                    py35_0    conda-forge\r\njupyter_core              4.1.0                    py35_0  \r\n``` That's a bit disturbing that there are two different versions. Try uninstalling with both pip and conda, and then installing it again with just one. Correction, three versions. Even worse. Ok, I'm upgraded but still seeing the above errors:\r\n\r\n```\r\njupyter-core              4.2.1                     <pip>\r\n```\r\n\r\nI should mention that I've installed all extensions using `--sys-prefix` and cleared out any extension config in nbconfig and labconfig in my user directory.  What is the output of `python -c \"from jupyter_core.paths import SYSTEM_JUPYTER_PATH; print(SYSTEM_JUPYTER_PATH)\"`? `['/usr/local/share/jupyter', '/usr/share/jupyter']` And you're still seeing the same error as in the original comment? Ya \ud83d\ude15 I just ran the tests against Notebook and JupyterLab master locally and I'm not seeing this.  What is the output of `which nosetests` vs `which python`? Thanks for your help here, @blink1073!\r\n\r\n```\r\ngrant:notebook grant$ which nosetests\r\n/Users/grant/anaconda/bin/nosetests\r\ngrant:notebook grant$ which python\r\n/Users/grant/anaconda/bin/python\r\n``` That looks like what I have... Are you able to launch `jupyter notebook` and `jupyter lab` successfully? Ya \ud83d\udc4d  BTW, Travis runs all the tests that I would run locally, correct? So as long as Travis builds are passing, then we should be ok? Yeah, but push and pray is no way to work :wink:.  Just as a sanity check, can you manually rename the JupyterLab folder so it isn't picked up and run it again? I'm seeing a different error now:\r\n\r\n```\r\ngrant:notebook grant$ nosetests\r\n....Error loading server extension jupyterlab\r\nTraceback (most recent call last):\r\n  File \"/Users/grant/Sites/jupyter/notebook/notebook/notebookapp.py\", line 1257, in init_server_extensions\r\n    mod = importlib.import_module(modulename)\r\n  File \"/Users/grant/anaconda/lib/python3.5/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 986, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 969, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 956, in _find_and_load_unlocked\r\nImportError: No module named 'jupyterlab'\r\n``` Okay, how about moving the JLab folder back and disabling the JLab server extension? That fixes it. Does this output look like the tests are passing or not?\r\n\r\n```\r\ngrant:notebook grant$ nosetests\r\n..................................................................................................................................................Failed to import the site module\r\nTraceback (most recent call last):\r\n  File \"/Users/grant/anaconda/lib/python3.5/site.py\", line 72, in <module>\r\n    import os\r\n  File \"/Users/grant/anaconda/lib/python3.5/os.py\", line 57, in <module>\r\n    import posixpath as path\r\n  File \"/Users/grant/anaconda/lib/python3.5/posixpath.py\", line 16, in <module>\r\n    import genericpath\r\n  File \"<frozen importlib._bootstrap>\", line 969, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 958, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 673, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 661, in exec_module\r\n  File \"<frozen importlib._bootstrap_external>\", line 744, in get_code\r\n  File \"<frozen importlib._bootstrap_external>\", line 828, in path_stats\r\n  File \"<frozen importlib._bootstrap_external>\", line 75, in _path_stat\r\nKeyboardInterrupt\r\n....................................................................................................S\r\n----------------------------------------------------------------------\r\nRan 247 tests in 34.434s\r\n\r\nOK (SKIP=1)\r\n``` That looks good.  The only other thing I can think of is that using `importlib` to import JupyterLab is not working on your machine.  https://github.com/jupyter/notebook/blob/2eb7bf19530252247dc9b112016080733b150352/notebook/notebookapp.py#L1239 If you move the `jupyterlab` folder that it's importing, but leave it configured in `nbserver_extensions`, then `ImportError: No module named 'jupyterlab'` is expected (it shouldn't stop the notebook server from working, though).\r\n\r\nThe original IndexError is strange. What is the output of `python -c \"import importlib;print(importlib.import_module('jupyterlab').__path__)\"`? `['/Users/grant/Sites/jupyter/jupyterlab/jupyterlab']` Whelp, color me stumped. I think it's the mock environment setup for the tests. It empties SYSTEM_JUPYTER_PATH, which is probably shouldn't.\r\n\r\nIt should also be preventing any extensions or config from being loaded, which I'll work on shortly. #2111 should do it, I think.","What version of the `notebook` package do you have? If you've got time, can you try installing from master (see [setting up a development environment](http://jupyter-notebook.readthedocs.io/en/latest/contributing.html#setting-up-a-development-environment))?\r\n\r\nI think it's [this code](https://github.com/jupyter/notebook/blob/2eb7bf19530252247dc9b112016080733b150352/notebook/static/notebook/js/cell.js#L634) that is going wrong. I have `notebook-4.2.3-py27_0`. Can you try with the latest version, currently 4.3.1? Same result with `notebook-4.3.1-py27_1` after updating, shutting down my running notebooks, and restarting Jupyter. Thanks. In fact, I already tested on master but forgot about it earlier (sorry about that). > I think it's this code that is going wrong.\r\n\r\nYes, I'm almost sure of what's wrong. It switches language in the middle of the first line instead of waiting to end of first line to switch, which screw up codemirror highlighting. \r\n\r\nIn general the auto-highlight of IPython should be folded into a **real** IPython codemirror mode. Though that's a non-negligible task. When I was familiar with CodeMirror internals and mode writing, I would have said that a _clean_ IPython mode would take 1 to 2 good uninterrupted days of work. Plus about 1, to integrate into the current notebook JS.\r\n\r\nSo I'm going to guess this will likely end up being bumped to 5.1.\r\n Bumped for now; if anyone works out a fix, I'm happy to land it for 5.0, but I don't want to hold up the release for it.","Done. ",":shipit: Thanks @Carreau  Also what about reminding users to upgrade underlying kernels  to get bug fixes as well ? Done and Done","> If something is not clear / you need more information I will be happy to help.\r\n\r\nThanks, that is likely an IPython thing, not a notebook one as the behavior can be replicated in terminal IPython (and other frontend).\r\nThe problem here is that the decision should be taken by the cell-magic itself, not IPython, because in a cell magic the `;` may have another signification. For example in a `C/C++/Cffi` semicolon might be necessary to have valid C/C++\r\n\r\nSo that's something that need to be revisited on a per-cell-magic case. @meeseeksdev migrate to ipython/ipython Done as ipython/ipython#10227.","Wow. Pretty sure that's an IPython bug. Not a notebook one. \r\n\r\nGood catch ! This is in IPython, though it's actually a deliberate feature for the terminal that doesn't make much sense in the notebook.","Thanks Steve !","> I thought we had agreed frontend config would go in platform specific directories\n\nAnd I thought we had agreed that all config goes in .jupyter, because separating config based on how it's _likely_ to be read/written is more confusing than \"config goes here\".\n\nI think you are right that it's the notebook server looking in the wrong place, and migration is putting it in the right place.\n My memory agrees with Min's. I think that the nature of config is that\nusers may at one point or another need to edit it and that all of it should\ngo into the same place in .jupyter, not the platform specific places. I\nthink the \"config goes here\" idea is really important.\n\nOn Sun, Jul 19, 2015 at 12:58 PM, Min RK notifications@github.com wrote:\n\n> I thought we had agreed frontend config would go in platform specific\n> directories\n> \n> And I thought we had agreed that all config goes in .jupyter, because\n> separating config based on how it's _likely_ to be read/written is more\n> confusing than \"config goes here\".\n> \n> I think you are right that it's the notebook server looking in the wrong\n> place, and migration is putting it in the right place.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/211#issuecomment-122698251.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","Looks like something conda is adding. @damianavila does this look familiar? Is it related to nb_conda_kernels? Could be... I am using conda. In addition, I also have the following file: `~/Library/Jupyter/kernels/python3/kernel.json` with the following content:\r\n\r\n```\r\n{\r\n \"language\": \"python\",\r\n \"display_name\": \"Python 3\",\r\n \"argv\": [\r\n  \"/Users/drorata/anaconda3/bin/python\",\r\n  \"-m\",\r\n  \"ipykernel\",\r\n  \"-f\",\r\n  \"{connection_file}\"\r\n ]\r\n}\r\n``` That looks normal. The traceback is coming from the notebook application, in any case, not a kernel. What is normal? The kernel definition or the error message? \ud83d\ude43 Sorry, the kernel definition looks normal. I haven't seen the error before. I've reported this to conda at conda/conda#4503 @takluyver Have you seen this lately? Looking into https://github.com/conda/conda/issues/4503, it seems @kalefranz has worked out a solution (https://github.com/conda/conda/issues/4503#issuecomment-282458483). I think this was only reported once, and I don't see it myself (I don't usually use a conda-managed notebook install). But I think we can hope this is fixed on the conda side.","Thanks @minrk, this resolves https://github.com/jupyter/notebook/issues/2101 for me.\r\n\r\nHere is my `nosetests` output:\r\n\r\n```\r\ngrant:notebook grant$ nosetests\r\n....................................................................................................................................................EEEEEEE.............................................................../Users/grant/Sites/jupyter/notebook/notebook/notebookapp.py:1116: ResourceWarning: unclosed <socket.socket fd=32, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('0.0.0.0', 0)>\r\n  raise\r\n.............................S\r\n======================================================================\r\nERROR: test_get_kernel_resource_file (notebook.services.kernelspecs.tests.test_kernelspecs_api.APITest)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/grant/Sites/jupyter/notebook/notebook/services/kernelspecs/tests/test_kernelspecs_api.py\", line 53, in setUp\r\n    self.create_spec('sample')\r\n  File \"/Users/grant/Sites/jupyter/notebook/notebook/services/kernelspecs/tests/test_kernelspecs_api.py\", line 58, in create_spec\r\n    sample_kernel_dir = pjoin(self.data_dir.name, 'kernels', name)\r\nAttributeError: 'str' object has no attribute 'name'\r\n\r\n======================================================================\r\nERROR: test_get_kernelspec (notebook.services.kernelspecs.tests.test_kernelspecs_api.APITest)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/grant/Sites/jupyter/notebook/notebook/services/kernelspecs/tests/test_kernelspecs_api.py\", line 53, in setUp\r\n    self.create_spec('sample')\r\n  File \"/Users/grant/Sites/jupyter/notebook/notebook/services/kernelspecs/tests/test_kernelspecs_api.py\", line 58, in create_spec\r\n    sample_kernel_dir = pjoin(self.data_dir.name, 'kernels', name)\r\nAttributeError: 'str' object has no attribute 'name'\r\n\r\n======================================================================\r\nERROR: test_get_kernelspec_spaces (notebook.services.kernelspecs.tests.test_kernelspecs_api.APITest)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/grant/Sites/jupyter/notebook/notebook/services/kernelspecs/tests/test_kernelspecs_api.py\", line 53, in setUp\r\n    self.create_spec('sample')\r\n  File \"/Users/grant/Sites/jupyter/notebook/notebook/services/kernelspecs/tests/test_kernelspecs_api.py\", line 58, in create_spec\r\n    sample_kernel_dir = pjoin(self.data_dir.name, 'kernels', name)\r\nAttributeError: 'str' object has no attribute 'name'\r\n\r\n======================================================================\r\nERROR: test_get_nonexistant_kernelspec (notebook.services.kernelspecs.tests.test_kernelspecs_api.APITest)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/grant/Sites/jupyter/notebook/notebook/services/kernelspecs/tests/test_kernelspecs_api.py\", line 53, in setUp\r\n    self.create_spec('sample')\r\n  File \"/Users/grant/Sites/jupyter/notebook/notebook/services/kernelspecs/tests/test_kernelspecs_api.py\", line 58, in create_spec\r\n    sample_kernel_dir = pjoin(self.data_dir.name, 'kernels', name)\r\nAttributeError: 'str' object has no attribute 'name'\r\n\r\n======================================================================\r\nERROR: test_get_nonexistant_resource (notebook.services.kernelspecs.tests.test_kernelspecs_api.APITest)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/grant/Sites/jupyter/notebook/notebook/services/kernelspecs/tests/test_kernelspecs_api.py\", line 53, in setUp\r\n    self.create_spec('sample')\r\n  File \"/Users/grant/Sites/jupyter/notebook/notebook/services/kernelspecs/tests/test_kernelspecs_api.py\", line 58, in create_spec\r\n    sample_kernel_dir = pjoin(self.data_dir.name, 'kernels', name)\r\nAttributeError: 'str' object has no attribute 'name'\r\n\r\n======================================================================\r\nERROR: test_list_kernelspecs (notebook.services.kernelspecs.tests.test_kernelspecs_api.APITest)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/grant/Sites/jupyter/notebook/notebook/services/kernelspecs/tests/test_kernelspecs_api.py\", line 53, in setUp\r\n    self.create_spec('sample')\r\n  File \"/Users/grant/Sites/jupyter/notebook/notebook/services/kernelspecs/tests/test_kernelspecs_api.py\", line 58, in create_spec\r\n    sample_kernel_dir = pjoin(self.data_dir.name, 'kernels', name)\r\nAttributeError: 'str' object has no attribute 'name'\r\n\r\n======================================================================\r\nERROR: Can list kernelspecs when one is invalid\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/grant/Sites/jupyter/notebook/notebook/services/kernelspecs/tests/test_kernelspecs_api.py\", line 53, in setUp\r\n    self.create_spec('sample')\r\n  File \"/Users/grant/Sites/jupyter/notebook/notebook/services/kernelspecs/tests/test_kernelspecs_api.py\", line 58, in create_spec\r\n    sample_kernel_dir = pjoin(self.data_dir.name, 'kernels', name)\r\nAttributeError: 'str' object has no attribute 'name'\r\n\r\n----------------------------------------------------------------------\r\nRan 248 tests in 60.914s\r\n\r\nFAILED (SKIP=1, errors=7)\r\n```\r\n\r\nAll the stack traces are pointing to https://github.com/jupyter/notebook/blob/master/notebook/services/kernelspecs/tests/test_kernelspecs_api.py#L58","$SHELL is set to `/bin/bash`. I think that's more than CSS, the `div.xtem-rows` is actually outside of the `div.xterm-scroll-area`, while it should be in it.  I can confirm that 4.x branch does not have this issue... Likely culprit: https://github.com/jupyter/notebook/commit/47d44519584f894c0b8bac55a2e234d532bb14db#diff-8a9216dd0646aabf00fad51cec393fe6L4 It looks like we were requiring `xterm/src/xterm.css` but now that we don't have webpack, how should we include xterm's CSS? IIRC they have a bower package.   I'll look into this tomorrow morning.  Nevermind, Grant already fixed it. ;)","I have a hard time getting my head around how text flows when LTR and RTL are mixed, but this seems simple enough, and I'm happy to take your word for it that it's an improvement. I'll give other developers a day or two to look over it in case anyone knows more about this stuff than me. I opened https://github.com/jupyterlab/jupyterlab/issues/1598 to track this in JupyterLab as well. Does that work better as well when using \"toggle rtl layout\" (https://github.com/jupyter/notebook/pull/1863)  ?\r\n\r\n+1 @Carreau: It won't interfere with such cases, if not improve them, at least I can say. Interesting that I wanted to go for such feature after this, where can I test that? Sorry guys, my further testing revealed this regresses editing experience of the same case, I should come with another solution which perhaps some of JS of CodeMirror should be altered on the way (so I should try to upstream my patch on CM first), so for now, here is the revert: #2119\r\n\r\nBut I still like to know where to see #1863? Is it not exposed to the users yet? I perhaps can help on test and improving that also. It's exposed to the users in master, not yet a released version... however, I've just gone to try it, and found that the command palette which you'd use to access it seems to be broken (#2121, #2122). > It's exposed to the users in master, not yet a released version...\r\n\r\nNo problem, I have a working version of the master locally. Ok, will look at them, perhaps will help on them if be able to :) Thanks.","> Is there a way I can turn that button on by default to avoid this mistake in the future?\r\n\r\nI don't believe there is a simple way to do that. \r\n\r\n> Do other people have this problem? If so, is it worth considering making this the default setting for everyone? Making the opposite mistake (of only changing in a single cell) seems much less significant.\r\n\r\nI have not heard people complaining. You point of making it the default is a good one. \r\n\r\n\r\n> If there's no feasible way to accomplish 1 or 2, what's the best way to undo this mistake? Ctrl+Z doesn't really work.\r\n\r\nNone that I know of. Let's tag that as 5.0 to decide. it should not be hard to change.  We'll be happy if you want to attempt sending a PR ! It's in my calendar to take a look at it this weekend! The bad news is: I've never made a PR before, and have a only written a handful of functions in JS. So this may not go well, but I'll give it a shot.  > The bad news is: I've never made a PR before\r\n\r\nWell I have a good news then, we'll be happy to guide you through it, and don't worry you can't really screw up. We'll also be honored to receive your first contribution on GitHub.\r\n\r\n![beeea97c622c5614a80371eb0aece7082a3ff1b50421cf5acae3125c65ba5d8f](https://cloud.githubusercontent.com/assets/335567/22537732/c7a251fc-e8c1-11e6-9148-2a1b0cc4b099.jpg)\r\n\r\nDon't hesitate to ask !\r\n So here's what I've done so far:\r\n\r\n1. I forked and cloned the project.\r\n2. I made the necessary changes and manually tested them. Everything looked good.\r\n3. I tried running the JS tests by doing `npm install -g casperjs phantomjs@1.9.18` then running `python -m notebook.jstest` in the notebook directory. \r\n\r\nThere's a lot of output, much of which I can't interpret. But it seems a lot of things are failing because: `\".CodeMirror-code\" still did not exist in 10000ms`. I've attached the rest of the output. I can't find any clues in the [Contributing](https://github.com/jupyter/notebook/blob/master/CONTRIBUTING.rst) and don't know where else to look. \r\n\r\nAny thoughts? And thanks for offering to help me out with this!\r\n\r\n[errors.txt](https://github.com/jupyter/notebook/files/751422/errors.txt) Don't worry too much about testing locally, it is relatively hard with the\nnotebook.\n\nWhat you can do is commit, and push on your fork on a new branch. Then\nsubmit a pull request. Even if not done completly it's OK, you can change\nafterward.\n\nTravis will take care of testing and we can start reviewing.\n\nI can give you more details instructions but I'm on my phone for now\n\nOn Feb 3, 2017 11:49, \"Jessime\" <notifications@github.com> wrote:\n\n> So here's what I've done so far:\n>\n>    1. I forked and cloned the project.\n>    2. I made the necessary changes and manually tested them. Everything\n>    looked good.\n>    3. I tried running the JS tests by doing npm install -g casperjs\n>    phantomjs@1.9.18 then running python -m notebook.jstest in the\n>    notebook directory.\n>\n> There's a lot of output, much of which I can't interpret. But it seems a\n> lot of things are failing because: \".CodeMirror-code\" still did not exist\n> in 10000ms. I've attached the rest of the output. I can't find any clues\n> in the Contributing\n> <https://github.com/jupyter/notebook/blob/master/CONTRIBUTING.rst> and\n> don't know where else to look.\n>\n> Any thoughts? And thanks for offering to help me out with this!\n>\n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2115#issuecomment-277344567>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUez9-IyH46okaGIXT4mZErCSZa62N1ks5rY4SugaJpZM4L0X9Q>\n> .\n>\n I'm calling this one fixed by #2131, feel free to reopen if anyone disagrees.","Thanks !\r\n\r\nWe're closing in on 5 ! Do one of you want to send a message to the mailing list saying that we are closing in on 5.0, that we need a last look on critical issue and a hand for a couple of last PR ? \r\n\r\nThen we can cut a beta?  Don't forget about the issues marked 4.4. I don't think we're doing 4.4\nnow, so they should be considered for 5.0.\n\nOn 2 Feb 2017 12:44 a.m., \"Matthias Bussonnier\" <notifications@github.com>\nwrote:\n\n> Thanks !\n>\n> We're closing in on 5 ! Do one of you want to send a message to the\n> mailing list saying that we are closing in on 5.0, that we need a last look\n> on critical issue and a hand for a couple of last PR ?\n>\n> Then we can cut a beta?\n>\n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/2116#issuecomment-276831207>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUA9UApUvZG1CdDluMyhvMBYM80zuuUks5rYSbpgaJpZM4L0iAV>\n> .\n>\n > Don't forget about the issues marked 4.4. I don't think we're doing 4.4\r\n> now, so they should be considered for 5.0.\r\n\r\nI'm seeing a few we can bump to 5.1 !","We figured it out. ","> the kernel_info_reply is sent successfully (based on the return value of the zmq's zmq_send method)\r\n\r\nI don't know if it's relevant, but 'sending' a message with zmq actually puts it in a queue, and a background thread zmq is running sends it out at some point later. So the return value of `zmq_send` doesn't necessarily mean that it's actually sent OK. I think that would only affect you if there was a bug in the ZMQ bindings you're using, though. @takluyver Thanks for your reply. It's really weird given that the second reply is received. I wonder if there is any difference between how the replies are expected in the first and second situations. \r\n\r\nAlso, for zmq, I can use the `zmq_sendmsg` to send a `message` instead of a `string`. Not sure if they're different though. That is weird. I'd guess that the first `kernel_info_request` is coming from the notebook server and the second from the Javascript in the browser. @takluyver wait...So the Javascript are connecting to the kernel directly or via the server? If directly then, that might be the reason why these two have different behaviours. No, the JS connects via the server. It uses websockets to communicate from the browser to the server, and the server than sends those messages on over zmq. It may well explain why the username field is different, though. @takluyver `username` Indeed. I tried on three different machines/systems (macos and linux), the results are the same. Is there a way to debug local tcp data transportation? As if I can see what data is tranferring between the ports... Have you tried your kernel with `jupyter console` or `jupyter qtconsole`? There's less going on there, so it may be easier to debug things. I think the `--debug` flag on the Qt console shows what messages it sends and receives. @takluyver Ha, finally we got something. Thanks for the suggestion. So when I ran `jupyter console --Session.key=\"b''\" --debug --Session.debug=True --kernel=MyKernel`, it seems that the server sent out two `kernel_info_request`s immediately. And my kernel actually received both and replied both. And this time, both replies are received! It's weird though...\r\n\r\nI wonder if I should wait for several seconds before I reply to the first `kernel_info_request`. I'll try tomorrow when I have time. Meanwhile, if you have any thoughts, please let me know! That's weird. I don't think any of the other kernels need a wait to respond to kernel_info_request messages... @takluyver Setting a delay didn't work. I wonder why there were two `kernel_info_request`s sent out when the `jupyter console` started.\r\n\r\nThe logs can be found [here](https://gist.github.com/KelvinJin/50393936c62c871bc3731d32040927be)\r\n\r\nSo, the console received both replies somehow and the notebook didn't...I'm really confused now.  #1281 It might be related to this issue to be honest. I'll have a look! This is solved. It was my issue. I guess it's related to the `identity` (aka u-u-i-d) field of the message. I was always using the session id of the header to be the identity. I replaced it with the `identities` from the request, it seems to work now! (Note that there might be several _identities_.)\r\n\r\nI also changed the way I receive zmq messages. Previously I only received the 5 messages following the delimiter but now I'll use zmq's method to check if there's `more` message coming (multi-part message). This might also be the reason but I didn't test. Great! Yes, identities are something zmq uses to deliver replies corresponding to a request.","That's a  pity; thanks for contributing. Have you tested it on [plain Codemirror](http://codemirror.net/mode/python/index.html)? Is it worth opening an issue on Codemirror itself? Yes it does, just've filed https://github.com/codemirror/CodeMirror/issues/4532","Yeah, it should probably avoid loading it twice just because it's in two bits of config.\n There's a similar [issue (#285)](https://github.com/ipython-contrib/IPython-notebook-extensions/issues/285) which has come up in [ipython-contrib/IPython-notebook-extensions](https://github.com/ipython-contrib/IPython-notebook-extensions), essentially that the same extension will be happily loaded twice by utils. The discussion on that issue more or less concluded that it might be worth having utils keep a list of which extensions have been loaded, to prevent this. This would also open up potential for a user-viewable list of active extensions (say in a menu somewhere), if that seemed useful. It might be worth adding a reload option to force multiple loads of the same extension path, although I can't immediately see a use for it.\n\nI'd be happy to start trying to implement the above, with any modifications, if you think it'd be useful?\n I think remembering which extensions have been loaded is sensible and should be enough for now. Thanks, @jcb91.\n It would also take care of the double loading if an extension is set up for both the tree/ and notebook/ page. \n @Carreau I'm sorry, I'm not sure I follow - aren't the `tree/` and `notebook/` entirely separate environments? I'm not sure I understand how you'd get a double load, but I'll look into it today.\n\nJ\n Sorry that's my brain that works in weird way early in the morning. \n\nThe way I remeber we were planning to fix the double loading was to merge the `common` and `notebook` (respectively `tree`) section before loading the  extension. \n\nIf you do remember which extensions have been loaded, then you do not need to merge anymore as the second loading will just be no-op. \n\nDoes it make more sens ?\n @Carreau sure, that makes sense.\nSo I've altered the js utils, which seems to work for me locally (see #409).\nI'm trying to figure out how to get all the node and gulp building works to get it into `main.min.js` (which seems to be where some of the load calls go for me), but I can't say I understand it yet.\n Ok, it seems from a cursory inspection that my modified `static/base/js/utils.js` has been compiled into `notebook/js/main.min.js` appropriately, so I'm going to assume that it should work in other places, unless someone tells me otherwise.\n closed by #409\n","> Error importing tensorflow.  Unless you are using bazel,\r\nyou should not try to import tensorflow from its source directory;\r\nplease exit the tensorflow source tree, and relaunch your python interpreter\r\nfrom there.\r\n\r\nDid you install tensorflow from source? Are you running jupyter from the ts source directory? Hi. That seems to be a generic error message, as I installed tf from source and I am not running from its source directory. Now the problem must be that jupyter is unable to find \"@rpath/libcudart.8.0.dylib\" which is part of the cuda runtime (Strangely enough both python and ipython is able to find it). Try running the following in both the notebook and ipython:\r\n\r\n```py\r\nimport sys\r\nsys.executable\r\n```\r\n\r\nOdds are they are using different python executables. If this is the case, you can update your python kernelspec. See https://github.com/jupyter/notebook/issues/397 for reference. I tried that, and they are both using '/usr/local/opt/python/bin/python2.7' (which I think should be the homebrew python). I'd guess it's something to do with environment variables, but I don't know which. You may be better off asking in a tensorflow forum what might cause the error that you see. @takluyver  It's a bit strange, because the tensorflow installation runs fine in my python and ipython. So it shall have something to do with the way jupyter calls the tensorflow installation.\r\n\r\n(On the other hand, jupyter is able to import tensorflow on my Windows PC...) Right, but Jupyter just runs your code; it doesn't do anything specific to tensorflow.\r\n\r\nThis might be a job for [envzigzag](https://pypi.python.org/pypi/envzigzag). Try installing that, then run `!envzig` in IPython (where you can use tensorflow) and `!envzag` in a notebook (where you can't). It should show you any differences in environment variables. @takluyver Thanks. As I am running python 2.7 I couldn't run it. However, I imported os and checked os.environ, and I found I have 'DYLD_LIBRARY_PATH' in my python os.environ, but not in my Jupyter console os.environ.\r\n\r\nSo this must be the cause. But I am not sure how to solve it. Are you launching the Jupyter applications from a GUI launcher? If so, they won't pick up environment variables set in `.bashrc` or `.bash_profile`. A simple workaround is to launch them from a terminal.\r\n\r\nOn Linux, you can set environment variables in `.profile`, which is run when you log in. I don't know how to do the same on OSX. @takluyver I am running from console and I have change .bashrc and .bash_profile etc... It seems other people ran into similar problems before. I tried the method in https://github.com/jupyter/notebook/issues/1290 (by ZlodeiBaal) and it works now. Glad you've got it working. I'm a bit confused about what the problem was, but my suspicion is that there's nothing we can do in Jupyter to fix it. @gnestor  Could you please explain how to  update python kernelspec. \r\n\r\nNote : As you have mentioned in previous post I have different python executables.\r\n Ok, to find the location of your kernelspecs: `jupyter kernelspec list`\r\n\r\nThen, edit your `python` kernelspec in your editor. I think the easiest fix is to rename your python executable from an absolute path (e.g. \"/Users/grant/anaconda/bin/python\") to just \"python\". @gnestor HI, I have similar problem and can not solve it. Can you explain how to `edit your python kernelspec in your editor`? I am confused of it. Thanks. @rylanchiu First, run `jupyter kernelspec list` and you will see an output like:\r\n\r\n```\r\nAvailable kernels:\r\n  babel           /Users/grant/Library/Jupyter/kernels/babel\r\n  bash            /Users/grant/Library/Jupyter/kernels/bash\r\n  coffeescript    /Users/grant/Library/Jupyter/kernels/coffeescript\r\n  javascript      /Users/grant/Library/Jupyter/kernels/javascript\r\n  jskernel        /Users/grant/Library/Jupyter/kernels/jskernel\r\n  python2         /Users/grant/Library/Jupyter/kernels/python2\r\n  python3         /usr/local/share/jupyter/kernels/python3\r\n```\r\n\r\nTo edit the spec for `python3`, let's see which files are in its directory by running `ls /usr/local/share/jupyter/kernels/python3`:\r\n\r\n```\r\nkernel.json\tlogo-32x32.png\tlogo-64x64.png\r\n```\r\n\r\nLastly, we want to open `kernel.json` in our text editor, there are several ways to do this:\r\n\r\n* If you use the Atom editor, simply run this in the terminal: `atom /usr/local/share/jupyter/kernels/python3/kernel.json`\r\n* To open the file in your default handler for `.json` files: `open /usr/local/share/jupyter/kernels/python3/kernel.json`\r\n* vim: `vim /usr/local/share/jupyter/kernels/python3/kernel.json` @gnestor  Thanks for your detailed and helpful instruction! It solved my problem perfectly!","I've gone through the usual steps of rebuilding JS and dodging any browser caching issues. I can't reproduce on master... Once I added a shortcut to avoid #2121, I got exactly the same symptoms on Firefox.\r\n\r\nAm I using it wrong? I assumed I would just start typing and commands would appear below. Is there something specific I should type? I've been trying obvious things like 'restart' and 'insert'.\r\n\r\nAm I rebuilding CSS/JS wrong? I use `python setup.py css js`, which seems to work correctly. I can change the JS, rebuild it and see the changes take effect. Your screenshot seems to suggest that your JS/CSS if out-of-whack. And I can't reproduce in Chrome or Firefox. So you can always try a `git clean -xfd` and `pip install -e .`.  I deleted my clone of the repo, re-cloned it and installed notebook afresh. Still there. I have found, though, that if I press `p` at some point while the page is still loading, I do get a functional command palette. If I wait for it to finish loading, I get the broken version. Even if I get it functional, dismissing it and re-showing it breaks it.\r\n\r\nThis makes me suspect that an extension has broken it. Yep, it's a collision with `cite2c`, which also uses typeahead. I think that it currently ships its own copy of typeahead; maybe it should be using the one in jupyter instead. Oh crap.\r\n\r\n- Typeahead used by command palette: https://github.com/running-coder/jquery-typeahead\r\n- Typeahead used by cite2c: https://github.com/twitter/typeahead.js/\r\n\r\nThey both add the `.typeahead()` method to jQuery objects. Similar, but incompatible methods.\r\n\r\nI hate Javascript. I found a workaround in cite2c to deconflict the methods. @takluyver Javascript: You can't live with it, you can't live without it. I'm glad you figured this out!","> I understand that the python version should be updated as soon as cells were executed, but just looking at a notebook should not trigger this change.\r\n\r\nThe `language_info` property is apart of the notebook metadata, not the cell metadata, so when you open the notebook, the `language_info` is updated to reflect the new Python version and your notebook is modified as a result. \r\n\r\nI don't know how we should handle this differently... My suggestion would be to revert the following commit:\r\n\r\n`commit 86b9b0b92a3711229250165a576e46e936f06e24\r\nAuthor: Min RK <benjaminrk@gmail.com>\r\nDate:   Mon Sep 21 11:13:33 2015 +0200\r\n\r\n    set dirty flag on kernelspec/language_info changes\r\n`\r\nHere is a [commit](https://github.com/andram/notebook/commit/64018e450917195ca8ea6e6a123f7e95c1d61791) which would do this. \r\n\r\nI have tested this and so far it seems to work as expected. I did not experience any inconsistencies. \r\nOf course the notebook still becomes dirty as soon as the first cell is executed, which is the correct behavior. \r\n\r\nAn alternative might be to delay the start of the kernel until the execution of the first cell, since as far as I can tell, the kernel seems to be not used for simply displaying the notebook? However, this might lead to a delay, when the user executes the first cell. @minrk What are your thoughts? Setting the dirty flag on the kernelspec changes fixed real issues, so it shouldn't be reverted wholesale. I think the most important aspect was setting dirty on `metadata.kernelspec` change, which we should keep. `metadata.language_info` is probably not as important in practice, so as long as changing the kernelspec sets the dirty flag, we should be okay if changing language_info doesn't. To not set the dirty flag on `metadata.language_info` change would be sufficient to solve my problem. \r\nIn case it helps, here is a commit which does that:\r\n\r\nhttps://github.com/jupyter/notebook/commit/411a88f9b0dfef59e895d6a1654f62fe3424c803\r\n","Thanks Steve, that's three times as many browsers as I had tested ;-)","The notebook already doesn't use the heartbeat, and we're moving away from it in general, so I wouldn't rely on it. But if your kernel is based around an event loop, there should be some way to do a periodic callback using that. Hi @takluyver thanks for the suggestion - I will give it a try.","Thanks, this is already tracked as #2110.","LGTM\n +1\n","Can you get an Anaconda command prompt and run `jupyter notebook` in it? It probably won't work, but you should get an error message saying what's failing. takluyver,\r\nThanks a lot! I just tried, and found it actually works by running from the command window! The problem looks like that the \"Jupyter notebook\" shortcut in the Windows start menu is messed up? I wonder if that's left over from the older version of Anaconda. The shortcut properties might tell you what it's trying to call - there may be a wrong path to Anaconda or something. Closing as I don't think there's anything wrong in our code; feel free to keep using comments to work out what's going on. Did you fix this problem? I got this problem as well. Jupyter is launching from the cmd but not from the Windows shortcut.  Can you look at the properties of the Windows shortcut to see what it's launching? The shortcut is something that Anaconda makes, so we don't directly control it. i looked at the properties.. this is what it's launching:\r\nC:\\Users\\Name\\Anaconda3\\python.exe\r\nC:\\Users\\Name\\Anaconda3\\cwp.py \r\nC:\\Users\\Name\\Anaconda3 \r\n\"C:/Users/Name/Anaconda3/python.exe\" \r\n\"C:/Users/Name/Anaconda3/Scripts/jupyter-notebook-script.py\"\r\n%HOME% Yes, the problem was resolved. The shortcut was the issue. I had to\nmanually change the \"Shortcut target\" (in windows 7) to the following:\nC:\\Users\\'yourusername'\\AppData\\Local\\Continuum\\Anaconda2\\Scripts\\jupyter-notebook.exe\nLet me know if works.\nThanks,\n\nOn Tue, Feb 14, 2017 at 8:36 AM, 11257512 <notifications@github.com> wrote:\n\n> i looked at the properties.. this is what it's launching:\n> C:\\Users\\Name\\Anaconda3\\python.exe\n> C:\\Users\\Name\\Anaconda3\\cwp.py\n> C:\\Users\\Name\\Anaconda3\n> \"C:/Users/Name/Anaconda3/python.exe\"\n> \"C:/Users/Name/Anaconda3/Scripts/jupyter-notebook-script.py\"\n> %HOME%\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2130#issuecomment-279708565>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AHamRcX8YkY54p1TYpQ3Ob4YUfAoj3zHks5rca30gaJpZM4L2ZaY>\n> .\n>\n jap, using jupyter-notebook.exe as shortcut target did the trick!\r\n\r\nthank you very much! :-) Thanks @hlignin . If anyone wants to follow up the shortcut issue, the [anaconda-issues](https://github.com/ContinuumIO/anaconda-issues/) repo is probably the place to report it. This is my environment.\r\n> Windows 10 Pro 64-bit\r\n> Anaconda3 4.3.0\r\n\r\nI've experienced the same problem.\r\n\r\nThis is the default target of \"Jupyter Notebook\" shortcut. (in my case)\r\n> C:\\Users\\hwync\\Anaconda3\\python.exe C:\\Users\\hwync\\Anaconda3\\cwp.py C:\\Users\\hwync\\Anaconda3 \"C:/Users/hwync/Anaconda3/python.exe\" \"C:/Users/hwync/Anaconda3/Scripts/jupyter-notebook-script.py\" %HOME%\r\n\r\nIn here, `%HOME%` caused the problem.\r\n\r\nSo, I solved the problem with following solutions.\r\nPlease choose your preferred method.\r\n\r\n## 1. Add a new `HOME` in system variables.\r\nGo to `Advanced System Settings > Environment Variables`, add a new `HOME` in system variables.\r\n> Variable name : HOME\r\n> Variable value : C:\\Users\\hwync\\Documents\\Notebooks\r\n\r\n\r\n## 2. Change `%HOME%` to path.\r\n`%HOME%` \u21d2 `C:\\Users\\hwync\\Documents\\Notebooks`\r\n\r\n\r\n## 3. Change `%HOME%` to `%JUPYTER_HOME%` and add in system variables.\r\n`%HOME%` \u21d2 `%JUPYTER_HOME%`\r\nGo to `Advanced System Settings > Environment Variables`, add a new `JUPYTER_HOME` in system variables.\r\n> Variable name : JUPYTER_HOME\r\n> Variable value : C:\\Users\\hwync\\Documents\\Notebooks Thanks for the detailed write up! Someone should probably report this to\nAnaconda, because they make the start menu shortcut.\n\nOn 25 Feb 2017 7:24 p.m., \"hwyn.cho\" <notifications@github.com> wrote:\n\n> This is my environment.\n>\n> Windows 10 Pro 64-bit\n> Anaconda3 4.3.0\n>\n> I've experienced the same problem.\n>\n> This is the default target of \"Jupyter Notebook\" shortcut. (my case)\n>\n> C:\\Users\\hwync\\Anaconda3\\python.exe C:\\Users\\hwync\\Anaconda3\\cwp.py\n> C:\\Users\\hwync\\Anaconda3 \"C:/Users/hwync/Anaconda3/python.exe\"\n> \"C:/Users/hwync/Anaconda3/Scripts/jupyter-notebook-script.py\" %HOME%\n>\n> In here, %HOME% caused the problem.\n>\n> So, I solved the problem with following solutions.\n> Please choose your preferred method.\n> 1. Add a new HOME in system variables.\n>\n> Go to Advanced System Settings > Environment Variables, add a new HOME in\n> system variables.\n>\n> Variable name : HOME\n> Variable value : C:\\Users\\hwync\\Documents\\Notebooks\n>\n> 2. Change %HOME% to path.\n>\n> %HOME% \u21d2 C:\\Users\\hwync\\Documents\\Notebooks\n> 3. Change %HOME% to %IPYNB_HOME% and Add a new IPYNB_HOME in system\n> variables.\n>\n> %HOME% \u21d2 %IPYNB_HOME\n> Go to Advanced System Settings > Environment Variables, add a new\n> IPYNB_HOME in system variables.\n>\n> Variable name : IPYNB_HOME\n> Variable value : C:\\Users\\hwync\\Documents\\Notebooks\n>\n> \u2014\n> You are receiving this because you modified the open/close state.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2130#issuecomment-282506210>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUA9fPAprCAjDXFywIr3tvUAAbOeEDpks5rgH_kgaJpZM4L2ZaY>\n> .\n>\n @hwyncho great work! Thanks!","Thanks !\r\n\r\nThat's looks good.\r\n\r\nI'm thinking about usability now.\r\nPeople will likely have taken the habit of clicking/not clicking and from the visual design it will be hard to see the change. Do you see any way to convey this?\r\n\r\n@ellisonbg, you might want to have a look. > from the visual design it will be hard to see the change.\r\n\r\nThat's a good point. Are you thinking you want to change the icon to reflect that you're selecting everything? > That's a good point. Are you thinking you want to change the icon to reflect that you're selecting everything?\r\n\r\nPossibly. That's one way. \r\n\r\nI'm thinking the other might be to just have the button pressed by default. (I don't know if it's possible).\r\nJust trying to imagine the use case and how to make the transition visually easy to understand and hard to miss. Font awesome may have some new icons since we introduce the feature, so it might be good to recheck.\r\n\r\n@jasongrout, @blink1073  thoughs on behavior UI ? And how it would be in JLab ? Maybe [this globe](http://fontawesome.io/icon/globe/)?\r\n\r\nIt'd be like \"global search\". That's a possibility. Let's wait on @ellisonbg input for design. We're in no hurry. Agreed that this is the preferable approach since there is (currently) no document-wide \"undo\".  The globe seems like a reasonable compromise.  In JLab, I think we'd put this in a side-panel and make the options explicitly labelled with checkboxes. Closes https://github.com/jupyter/notebook/issues/2115 My first inclination is to have the button pressed by default, but the current icon doesn't really look like 'selected cells' to me. If we do that, maybe switch the icon to something like [this](http://fontawesome.io/icon/check-circle-o/) to imply 'selected'.\r\n\r\nIf we need to flip it round, maybe [this up/down arrow](http://fontawesome.io/icon/arrows-v/), as in 'cells above and below the selection'? The globe could suggest something about other languages, and even the word 'global' could suggest searching other notebooks (search across files being a common feature of IDEs).\r\n\r\nIf we're aiming this for 5.0, then there is some hurry. If we don't want to hurry, then feel free to mark it as 5.1. Yeah, using icons for things like this is painful. There is almost no good icon that indicate what we mean and most users will have to hover to read the tooltip. But I do think the default should be find/replace on one cell. I will test this PR now and see how it feels... I like the behavior of this PR and would be fine merging as is. It would be nice to find a better icon before 5.0 is released. How do folks feel about merging and then opening a separate issue for the icon - once that is done I can have @cameronoelsen hunt for a good icon... Fine by me. If we don't get anything else, I might make a PR with the vertical-arrows icon, because I think it's at least an improvement on the current state. Sounds great! I think that icon is better than the current one. Merging +1 with updown arrow. Or for having the button pressed by default. \r\n\r\nThanks @Jessime  this was a useful addition !  @Carreau, my pleasure! Thanks for encouraging me to do it. \r\n\r\nAlso, +1 for the arrow. Users will probably still need to hover to know exactly what it does, but I think you'd only have to hover the once, then you'd be fine.","Hum, it may be better to remove the `border-left` of the text field for when the button is pressed. Yeah, that seems right. > Yeah, that seems right.\r\n\r\nDone. Also trying to use the same trick with RTL layout. Not perfect, we should inject dir='ltr' by default on the `<body>` tag. Done. \r\n\r\nBody now have `ltr` by default so we can have rules that apply only to LTR or rules that can apply only to RTL instead of waiting for the first switch to have LTR/RTL flags on the body.\r\n\r\nI'm going to assume this may be on interest for @ebraminio and @samarsultan i'm going in unknow territory though so Appreciate input.  Honeslty I don't know how to see RTL UI for this yet, a quick step-by-step guide would be nice I guess. > Honeslty I don't know how to see RTL UI for this yet, a quick step-by-step guide would be nice I guess.\r\n\r\nI've said it in the other issue but I'll repeat here for completeness and future reader. \r\nUse the Command palette (Ctrl-Shift-P), and choose \"Toggle RTL Layout\")\r\n\r\nThe RTL layout is relatively bad as it was added recently.  Aha, I didn't know about command palette at all :) Now I see, this patch is OK but IMHO the functionality offered by \"Toggle RTL Layout\" is not very correct. Is there any plan to translate whole notebook UI to an RTL language? Does notebook is going to have alternative languages for UI, like Arabic and Hebrew? If so this makes sense of course for testing proposes, otherwise, not very much.\r\n\r\nWhat I really like to have here, (and a friend requested me to do on this project) is the ability to *just* toggle result cells' direction. Of course merge of this won't collide with that.\r\n\r\nSo in nutshell. This is OK to merge. Thanks. > Aha, I didn't know about command palette at all\r\n\r\nOk, so we're not publicising it well enough! \r\n\r\n> Now I see, this patch is OK but IMHO the functionality offered by \"Toggle RTL Layout\" is not very correct. Is there any plan to translate whole notebook UI to an RTL language? Does notebook is going to have alternative languages for UI, like Arabic and Hebrew? If so this makes sense of course for testing proposes, otherwise, not very much.\r\n\r\nThere have been some requests to translate in general, and proposal for RTL (see https://github.com/jupyter/notebook/issues/1852). If the usage of notebook keep increasing then we'll have to do it at some point. The open source project does not have enough resources, or knowledge to it properly though so it's not moving forward fast. We're probably not even in contact with people using RTL language to properly understand what we should be doing. So any help welcome. \r\n\r\n> What I really like to have here, (and a friend requested me to do on this project) is the ability to just toggle result cells' direction. Of course merge of this won't collide with that.\r\n\r\nWould that be on a per-cell basis ? Or on all notebook ? with a better understanding we might be able to pull that off. > There have been some requests to translate in general, and proposal for RTL\r\n\r\nGreat. Even the fact I am using a well mirrored software (MediaWiki) on every day basis, as a programmer, I personally don't see much value on making jupyter completely translated to have a RTL UI. However, I understand and appreciate the efforts there. I like to add that I see only one real and effective way making a currently LTR UI to RTL, and that is use of a CSS mirror tool, like [R2](https://github.com/ded/R2) or [CSSJanus](https://github.com/cssjanus/cssjanus), described [here](https://www.mediawiki.org/wiki/ResourceLoader/Features#Flipping) (reading this will be very insightful, specially the excepting rule part). Also [here](https://commons.wikimedia.org/w/index.php?title=Template:Dir&action=edit) is a complete list of RTL languages are listed that you probably like to complete isMirroringEnabled function there, \"ar|arc|arz|azb|bcc|ckb|bqi|dv|fa|glk|he|kk-arab|kk-cn|ks|ku-arab|mzn|pnb|ps|sd|ug|ur|ydd|yi\".\r\n\r\n> Would that be on a per-cell basis ? Or on all notebook ? with a better understanding we might be able to pull that off.\r\n\r\nJust per result cells. That would be really super useful. For example you are doing a RTL web scraping  thing and you just want to see a part of the page\\ in RTL.\r\n\r\nOne other good to have RTL support feature is applying dir=\"auto\" to all languages markdown paragraph, like what I did on https://gitlab.com/gitlab-org/gitlab-ce/merge_requests/6296","How can I repro the issue? Please don't use isolate-override, it is intended just for very very rare cases, using `unicode-bidi: -webkit-isolate; unicode-bidi: isolate;` is usually enough. If not I can help with you on that cases. > How can I repro the issue\r\n\r\nUse the command palette (Ctrl-Shift-P) and choose `toggle-rtl-layout`, you can use the `Help>Edit keyoard shortcuts` menu to bind it to a custom shortcut. \r\n\r\nI'll be happy to get indications on how to fix properly. Thanks ! Ok thanks. I didn't know about command palette at all :) I see fundamental issue with toggle-rtl-layout feature, explained [here](https://github.com/jupyter/notebook/pull/2132#issuecomment-277473368)\r\n\r\nBut without considering that, what really can make this better is to instead wrapping \"In\" \"Out\" with `<bdi>In</bdi>` tag, is that possible?\r\n\r\nIf not, the second preferred way would be applying dir=\"ltr\" (the attribute) or direction: rtl (CSS, less preferred) to the element. In a nutshell, consider use of `<bdi>` around \"In\" and \"Out\", if is possible. > But without considering that, what really can make this better is to instead wrapping \"In\" \"Out\" with <bdi>In</bdi> tag, is that possible?\r\n\r\nYes it should be possible. We'll have to coordinate with @michaelpacer to do this in nbconvert as well. \r\n I also really appreciate your input as well, I don't think anyone regularly involved with IPython/Jupyter is an expert on internationalisation and/or RTL languages even less mix of both. So feedback welcome. \r\nI was unaware of `<bdi>`/`<bdo>`.  `In` and `Out` should now be wrapped in `<bdi>`. Sorry. This probably doesn't work, what I meant was to put just \"In\" and \"Out\" text on `<bdi>` and leave the rest :-) (also rule of thumb, never use `<bdo>` and other override things, they are unnecessary really :-) ) So something like `<bdi>In</bdi> [*]:` and `<bdi>Out</bdi>[*]:`.  > Sorry. This probably doesn't work, what I meant was to put just \"In\" and \"Out\" text on <bdi> and leave the rest :-) (also rule of thumb, never use <bdo> and other override things, they are unnecessary really :-) ) So something like `<bdi>In</bdi> [*]: and <bdi>Out</bdi>[*]`:.\r\n\r\nSorry I dropped the ball for a couple of days. This is now done. And thanks for taking the time to explain to me. ![image](https://cloud.githubusercontent.com/assets/2096628/22760597/cac76678-ee1c-11e6-8b4b-2008c4f93908.png)\r\n\r\n\ud83d\udc4d  Which one is the opening bracket and which one is the closing one ? Full context:\r\n\r\n![image](https://cloud.githubusercontent.com/assets/2096628/22761772/da5df836-ee21-11e6-93dd-9dc9c2fe86ad.png)\r\n We'll still have to make a better job in codemirror...  I believe for CM you can apply `dir=\"ltr\"` on code parent element. Great! Considering the title of this PR, this is now perfect IMO :)\r\n\r\nPlease have a look at my comment on https://github.com/jupyter/notebook/pull/2132#issuecomment-277501236 after this also. Probably two bug can be filed by it. Ok, self merging. ","You can currently hide the tool bar and header:\r\n\r\n![screncap](http://g.recordit.co/WdQ8ALdjTe.gif)\r\n\r\nIf you really want to hide the menu as well, you can run this in the browser's console:\r\n\r\n```js\r\n$('#header').toggle()\r\n``` And there isn't a UI option to hide the menu bar, because it would leave you with no easy way to bring it back. > If you really want to hide the menu as well, you can run this in the browser's console:\r\n\r\nYes this is why this feature request was filed: I really want to hide the menu as well. We appreciate your feedback but this feature won't be added to the notebook because of the reason that @takluyver mentioned. The workaround is `$('#header').toggle()` and you can [edit your custom.js](http://jupyter-notebook.readthedocs.io/en/latest/examples/Notebook/JavaScript%20Notebook%20Extensions.html#custom.js) to insert a menu item and keyboard shortcut. For example:\r\n\r\n```js\r\n// Register a global action\r\nvar action_name = Jupyter.actions.register({\r\n    help: 'hide/show the menubar',\r\n    handler : function(env) {\r\n        $('#menubar').toggle();\r\n        events.trigger('resize-header.Page');\r\n    }\r\n}, 'toggle-menubar', 'jupyter-notebook');\r\n// Add a menu item to the View menu\r\n$('#view_menu').prepend('<li id=\"toggle_menu\" title=\"Show/Hide the menu bar\"><a href=\"#\">Toggle Menu</a></li>').click(function() {\r\n    Jupyter.actions.call(action_name);\r\n});\r\n// Add a shortcut: CMD+M (or CTRL+M on Windows) to toggle menu bar\r\nJupyter.keyboard_manager.command_shortcuts.add_shortcut('Cmdtrl-M', action_name);\r\n``` Ah I should mention I'm already working on it here. https://github.com/ipython-contrib/jupyter_contrib_nbextensions/pull/863\r\n\r\nHowever, it would be better to include it upstream, it would integrate better with however the site works and someone with actual js skills would implement it :wink: \r\n\r\nI use the extension every day, both when working and walking through notebooks with others, so I'd encourage you to include this since it's so useful when teaching.","Thanks @LunarLanding . I think this is the notebook frontend code that handles completions:\r\n\r\nhttps://github.com/jupyter/notebook/blob/master/notebook/static/notebook/js/completer.js","ping on this...\n","Thanks for working on this!\r\n\r\nI'm aiming to release 5.0 soon (hopefully this week), so I think this will probably miss that release, but I'd like to try to get it in for 5.1. What's the time schedule re: 5.1?   I would like to have some real target \r\ndates to shoot for....\r\n\r\n\r\nRegards,\r\n\r\nJohn C. Emmons\r\nGlobalization Architect & Unicode CLDR TC Chairman\r\nIBM Software Group\r\nInternet: emmo@us.ibm.com\r\n\r\n\r\n\r\n\r\nFrom:   Thomas Kluyver <notifications@github.com>\r\nTo:     jupyter/notebook <notebook@noreply.github.com>\r\nCc:     John Emmons/Austin/IBM@IBMUS, Author <author@noreply.github.com>\r\nDate:   02/06/2017 03:55 PM\r\nSubject:        Re: [jupyter/notebook] Preliminary i18n implementation as \r\noutlined in Jep16 (German) (#2140)\r\n\r\n\r\n\r\nThanks for working on this!\r\nI'm aiming to release 5.0 soon (hopefully this week), so I think this will \r\nprobably miss that release, but I'd like to try to get it in for 5.1.\r\n\u2014\r\nYou are receiving this because you authored the thread.\r\nReply to this email directly, view it on GitHub, or mute the thread.\r\n\r\n\r\n\r\n We don't really have a schedule for releases, I'm afraid. If the changes in 5.0 cause some problems we need to fix, there might be a 5.1 in a couple of weeks, but in that case most of the new features planned for 5.1 would be targeted to 5.2 instead.\r\n\r\nIf you want some target dates, I'd hope to have the JEP and this infrastructure merged by the end of the month. How do we go about making this so it can be merged?  I've still got a few small things that can be worked on here, but the vast majority of the work here is complete.  Please advise.","Also #1508  Sounds like some of these things have been fixed in master, but I think the lab/nb teams should meet to go over this stuff before 5.0 is released. Bringing together issues from the email:\r\n\r\n- [x] #1508 merge inconsistencies between nbextensions and server-extensions (fixed)\r\n- [x] #1992 allow disabling extensions (fixed in jupyter-core by adding JUPYTER_NO_CONFIG)\r\n- [ ] #1797 extension output on stdout (marked as backlog, minor style issue)\r\n- [ ] #1617 autocorrect for missing `--py` arg (marked as 5.1 as a non-blocker, but should be a small fix, if we want to change that)\r\n- [ ] #1706 rewrite the whole extension mechanism (marked as backlog, big change)\r\n- [ ] #2149 add new commands for disabling/uninstalling all extensions of a given type/scope\r\n\r\nTwo (#1797, #1617) seem to be pretty minor issues that I don't think should block 5.0.\r\n\r\nTo me, the main thing we need a decision on is #1706, which is a major reorganization of the whole extension mechanism. My understanding has been that this makes more sense to do as part of the standalone `jupyter-server`, rather than rewrite the extensions for 5.0 and then rewrite them again for `jupyter-server`. But if we want this for 5.0, we should get on it ASAP, because I think it would delay 5.0 by at least a month or two so it can have time to test in master. We could also decide to do *part* of it (e.g. change defaults, but not behavior), which is easier, but I'm not sure if we should do that. I'm hoping to get 5.0 out this week, so -1 to rewriting the extension system. Thank you for laying that all out, @minrk.  I agree with your assessment that there should be no remaining configuration blockers to 5.0. @takluyver can go back to having his tea in peace ;). I agree that doing the full rewrite doesn't make sense for 5.0. We already know that we will break things in the transition to jupyter-server, so I think it makes sense to postpone all breakage until them. Thanks for posting the full list of everything that has been done on this front that really helps. I think the work in #1508 is the most important thing.\r\n\r\nThe only other big issue I keep running into is the need to hard delete all existing extensions of a given type (nb, server, lab) (both the extension and the config). I think a `jupyter nbextension delete-all` would do the trick. Probably shouldn't block 5.0 though. I will open an issue for that. @bollwyvl can you confirm issues on your side will be fixed by the stuff that is in master now? If there are common / useful actions that are hard to do with current commands, I'm happy to add them. Is `delete-all` only for `--py` extension-providers? e.g. `jupyter nbextension delete-all --py jupyterlab`? See #2149 \r\n\r\nI was thinking they would uninstall or disable *all* nbextensions or server extensions in a given location (user, sys prefix, system), not just those for a single package. So I am not sure the `--py` flag makes sense. Although I could imagine a user wanting to delete all (user, sys prefix, system) things for a given nbextension, so maybe `--py package` would limit the scope of it. Let's continue the discussion on #2149  Gotcha, thanks! > @ellisonbg can you confirm issues on your side will be fixed by the stuff that is in master now?\r\n\r\nIf my side is #1508... don't know! I'll give it a spin right now!\r\n\r\nIf we're talking _my side_ being the anaconda distribution... I don't think the distribution maintainers will be _happy_ until we have #1706 or equivalent. I was wanting to get a sense from the continuum/anaconda folks and you are\nthe one following this most closely...you have answered both though ;-)\n\nOn Tue, Feb 7, 2017 at 11:43 AM, Nicholas Bollweg <notifications@github.com>\nwrote:\n\n> @ellisonbg <https://github.com/ellisonbg> can you confirm issues on your\n> side will be fixed by the stuff that is in master now?\n>\n> If my side is #1508 <https://github.com/jupyter/notebook/issues/1508>...\n> don't know! I'll give it a spin right now!\n>\n> If we're talking *my side* being the anaconda distribution... I don't\n> think the distribution maintainers will be *happy* until we have #1706\n> <https://github.com/jupyter/notebook/issues/1706> or equivalent.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2141#issuecomment-278117536>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0LpPXgy3dvcvVSGJ-yFV59G_E7owks5raMlegaJpZM4L45H2>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Yup, it looks like #1508 is [happy](https://gist.github.com/bollwyvl/b6a7b274f5a7d8a572b91833bba468cf). Thanks all! Oh, and re `disable-all --user`... from a conda point of view, that's sounds like it will result in support tickets, but perhaps no more than the baseline. `delete-all --user` (and hopefully, also `unset`, not `disable`) does sound handy, but _sounds_ extreme, so might be scary for folks. Doing that with `--sys-prefix`... no idea what that will be like for a conda-managed bunch of extensions. I suppose someone could just then `conda install --force some-extension` again. Good points!\n\nOn Tue, Feb 7, 2017 at 1:42 PM, Nicholas Bollweg <notifications@github.com>\nwrote:\n\n> Oh, and re disable-all --user... from a conda point of view, that's\n> sounds like it will result in support tickets, but perhaps no more than the\n> baseline. delete-all --user (and hopefully, also unset, not disable) does\n> sound handy, but *sounds* extreme, so might be scary for folks. Doing\n> that with --sys-prefix... no idea what that will be like for a\n> conda-managed bunch of extensions. I suppose someone could just then conda\n> install --force some-extension again.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2141#issuecomment-278149565>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0HP1IHbkUrwbE2p98YgPCetfgkPiks5raOUogaJpZM4L45H2>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Closing due to consensus that all required 5.0 actions have been made. Thanks everyone!\n\nOn Wed, Feb 8, 2017 at 6:09 AM, Steven Silvester <notifications@github.com>\nwrote:\n\n> Closing due to consensus that all required 5.0 actions have been made.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2141#issuecomment-278338072>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0NkZ0gaSbTCO4nNxM0xnvO_Iho4Eks5racyDgaJpZM4L45H2>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","I've edited your comment to add a list of a couple of things to look at.  Thanks I am going to try to run 5.0 while I teach and I can test that stuff. More new UI:\r\n\r\n- edit/view links in dashboard\r\n- sort by name, last modified (and display of last modified)\r\n- attachments Also, support for the `editable` metadata field. Also, the cell tags toolbar. Though we know the UI isn't great on that - I want tab completion, and the ability to remove/change existing tags without using the mouse. The plan is to get it into users hands so people can start using it soon, though, and then refine it later. Thanks everyone! I have consolidated all the new UI into the top comment to make it easier to look through. There is enough here that needs testing that I think a good solid alpha/beta cycle is in order.  I will open a separate issues on the release schedule. Thanks @ellisonbg ! Wondering if I should open an issue for this:  If I drag an attachment to a markdown cell from my local file system, it displays in my current session, but when I save and refresh the page I get a dead link because the file is not local to the notebook.  Perhaps the act of dropping the file should create a local copy if it does not exist? Please do open an issue; I thought the point of the attachment system was that it embedded images in the notebook. It was my understanding that attachments were adjacent to the notebook, so my point is more about enforcing that fact. I tested the other items listed in the original comment, all look good.  \ud83d\udc4d  Ah, no, it looks like the attachments are meant to be embedded in the cell metadata, but that doesn't appear to be working for me. @Carreau can you clarify where the RTL layout can be toggled? Doing UI/UX testing now and can't see any way of doing that from the UI. Thanks! OK I have tested everything listed above:\r\n\r\n* Name/Last Modified sorting (A-OK!)\r\n* Move button (feedback in #2204)\r\n* File upload (as double check, A-OK!)\r\n* Edit/View buttons (feedback in #2203)\r\n* Attachments (A-OK!)\r\n* Notebook header/toolbar state preserved upon reload (A-OK!)\r\n* RTL (can't figure out how to toggle this)\r\n* Cell tags UI (feedback in #2205)\r\n\r\nGetting close! Toggle rtl is available in the command palette only AFAIK.  Thanks!\n\nOn Sun, Feb 19, 2017 at 2:24 PM, Steven Silvester <notifications@github.com>\nwrote:\n\n> Toggle rtl is available in the command palette only AFAIK.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2142#issuecomment-280950337>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0A0gecbce-uP0rt8JIXZSwev-uxBks5reLL9gaJpZM4L47Kw>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I am going to close. I think everything has been UI/UX tested. All follow up work is being tracked in other issues targeted at 5.0 Thanks for the helpful design review Brian !","@minrk can you take a look at this? On it. #2145 should do it.","Thanks, I suspected it was something like this, but wasn't sure where to look.","I'm pretty sure I don't see it.\nFF ? Which version ?\n\n\nOn Feb 7, 2017 07:23, \"Thomas Kluyver\" <notifications@github.com> wrote:\n\n> @Carreau <https://github.com/Carreau> could you take a look? It seems to\n> affect rows immediately below ones with a shortcut defined.\n>\n> [image: screenshot from 2017-02-07 15-21-05]\n> <https://cloud.githubusercontent.com/assets/327925/22697400/3c14078e-ed49-11e6-9590-2835af6d62f7.png>\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2147>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUez9MZRupLynKpe0FgKggIZdnphrj3ks5raIxggaJpZM4L5oID>\n> .\n>\n 51.0.1. Maybe it's another issue with an extension interfering with something, I'll check. I've disabled extensions, rebuilt css & js on master (fc2e03a781b39306d9ce257d32ad927e759bb7ee) and running with a different port to avoid the cache. I still see it. Nah, I see it. wait for a PR soon.  Awesome, thanks :-)","should we turn the sphinx ext into a package at some point ?  Thanks for all the screenshots ! Yeah, I suspect that making it a package will make sense. I just had a look, there's [something similar](https://pypi.python.org/pypi/sphinxcontrib-github/0.1.3) on PyPI, but I prefer how ours works.","What's the use case? (Not trying to deny that there is one)\r\n\r\nFor testing with extensions disabled, we added an environment variable in jupyter_core, so you can run `JUPYTER_NO_CONFIG=1 jupyter notebook` The usage case is refreshing installs of everything. I don't work in envs, so I often come back and sit down to re-install the entire extension stack based on latest versions (nbgrader, ipywidgets, lab extensions, etc.). What I find is that in previous installation rounds I sometimes installed into user without realizing it. If my new install goes into sys prefix I run into problems. I end up having to walk through the entire tree of config/data for user/sysprefix and system to find all previous installations/config and kill it all.\r\n\r\nSome of this is that right now with JupyterLab we are seeing a huge amount of churn, so I have to do this often. But the same applies to nbextension/serverextensions (ipywidgets). So for me it isn't a debug issue, more of an installation refresh question. I face similar problems as @ellisonbg .\r\nI installed some self written extensions, but they installed _somewhere_ on my system and I cannot find them. So now when I run my notebook, I cannot test my new versions, because it so happily loads the old versions from somewhere. In this specific case the old versions contained a wrong CSS file path and now the style sheet won't ever load, because it still uses that old code, where the path is wrong. It is so maddening. I used all of the following to no avail:\r\n\r\n    jupyter nbextension uninstall prototype-bla --sys-prefix\r\n    jupyter nbextension uninstall prototype-bla --sys-prefix\r\n    jupyter nbextension uninstall prototype-bla --system\r\n    jupyter nbextension uninstall prototype-bla --system\r\n    jupyter nbextension uninstall prototype-bla --user\r\n    jupyter nbextension uninstall prototype-bla --user\r\n    jupyter nbextension uninstall prototype-bla\r\n    jupyter nbextension uninstall prototype-bla\r\n\r\nBut the notebook still comes up with the extensions in the list of extensions in that tab, which lists them.\r\n\r\nI also tried complete reinstall of my `conda` env. Nope. Still there. Please provide a universal `uninstall` way! Also extensions installed with `--sys-prefix` should always have higher priority than anything loaded from outside a conda env or virtualenv.\r\n\r\n*Edit:*\r\n\r\nI found the remaining installations. It seems there is also a jupyter installation in my base conda environment. In that my extensions were installed as well. The question then is, why would jupyter inside my actual conda env access extensions outside of the environment (in the conda base environment)? It should not do that. I don't know why it would find them from your conda root env. You can see the directories it should be looking in with `jupyter --paths`, under *data*. @takluyver Is there a way to restrict this? So that I could define \"only look in your own env\"? You can effectively disable the user data directory by running the notebook server with `APPDATA` on Windows or `XDG_DATA_HOME` on Linux set to an empty directory. There's no equivalent of these on Mac.\r\n\r\nWe don't offer official ways to remove data directories, because data files by themselves aren't meant to have much effect, e.g. nbextensions are only loaded if they are enabled in config (which is in a different location).\r\n\r\nThe nbextensions you saw loaded from your conda root env represent either a bug or a misconfiguration (e.g. the notebook server was not running the way you thought it was running). @takluyver Now that I found them and deleted them, it is not a problem anymore, but I think that exclusion of data directories would avoid future trouble, if I ever install an extension again without my shell script, which now always uses `--sys-prefix` and a threefold delete with `--user`, `--sys-prefix` and `--system`. So that could indeed be useful, thanks!","Yes, it is planned, in a global rewriting of the dashboard. Though it is a non negligeable amount of work which does not have priority. Unless someone start working on it.\n","I think this sounds good, though I would probably call it a beta instead of alpha. I think we can do notebook 5.0.0b1 (or a1) after conferring at the meeting today. +1 - I was already planning to release a beta today. I'll be busy after the meeting though, so if we do it after that, hopefully someone else can cut it.\r\n\r\nI think that 'beta' signals our intent more clearly than 'alpha'. @parente want to look at compatibility with kernel-gateway. Sounds good! I should be able to work on the UI/UX testing stuff later this\nweek...\n\nOn Tue, Feb 14, 2017 at 9:09 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> @parente <https://github.com/parente> want to look at compatibility with\n> kernel-gateway.\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2150#issuecomment-279770659>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0KJPJpdY4zBY-yRF20qDl7Lvbc51ks5rcd_agaJpZM4L5yd_>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Thanks @Carreau. I don't expect anything major. I'll test against alpha/beta releases as they come out. cc @JamiesHQ  I started poking at kernel gateway with with notebook 5.0.0b1 installed. A good portion of the unit test suite and some manual requests to the server both fail because of the exception:\r\n\r\n```\r\nERROR:tornado.general:Uncaught exception, closing connection.\r\nTraceback (most recent call last):\r\n  File \"/Users/parente/miniconda3/envs/kernel-gateway-dev/lib/python3.5/site-packages/zmq/eventloop/zmqstream.py\", line 440, in _handle_events\r\n    self._handle_recv()\r\n  File \"/Users/parente/miniconda3/envs/kernel-gateway-dev/lib/python3.5/site-packages/zmq/eventloop/zmqstream.py\", line 472, in _handle_recv\r\n    self._run_callback(callback, msg)\r\n  File \"/Users/parente/miniconda3/envs/kernel-gateway-dev/lib/python3.5/site-packages/zmq/eventloop/zmqstream.py\", line 414, in _run_callback\r\n    callback(*args, **kwargs)\r\n  File \"/Users/parente/miniconda3/envs/kernel-gateway-dev/lib/python3.5/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\r\n    return fn(*args, **kwargs)\r\n  File \"/Users/parente/miniconda3/envs/kernel-gateway-dev/lib/python3.5/site-packages/notebook/services/kernels/kernelmanager.py\", line 220, in record_activity\r\n    msg = kernel.session.deserialize(fed_msg_list)\r\n  File \"/Users/parente/miniconda3/envs/kernel-gateway-dev/lib/python3.5/site-packages/jupyter_client/session.py\", line 853, in deserialize\r\n    raise ValueError(\"Duplicate Signature: %r\" % signature)\r\nValueError: Duplicate Signature: b'50ee6f93c211428d751309f08f8795fce0028eeae09b82bb5cd82881278b0e73'\r\n```\r\n\r\nIt's not immediately clear if this is a problem with the kernel gateway or not. Figured I'd raise it up for awareness. That's curious. The error is coming from code that's meant to prevent against replay attacks by blocking messages with the same signature as a previous message.\r\n\r\nI'm guessing a bit, but I think the issue is with the new activity monitoring; previously, messages from the kernel were only deserialised once (to be reserialised as JSON to go to the browser). Now iopub messages are deserialised a second time to update the kernel's state. If that happens with the same session object, then it will attempt to parse the same message twice, leading to the error you see.\r\n\r\nWhat I don't understand is why we don't run into that when using the notebook server normally. @minrk ? HI all, I opened a few PRs to fix some last minor issues for 5.0. We now know what to do to fix #2209, just need someone to do a quick PR (@jorisvandenbossche may end up doing that). I have been using 5.0 and things are looking really good.\r\n\r\nThere are a few other minor issues targeted for 5.0, some related to documentation/release notes:\r\n\r\nhttps://github.com/jupyter/notebook/issues?q=is%3Aopen+is%3Aissue+milestone%3A5.0\r\n\r\nAnyone know of any other major things that need to be taken care of that isn't being tracked here?\r\n\r\nThanks everyone for helping get this release out! We're closing in on this. #2204/#2234 is the last outstanding change to the code itself. I'd like to make an RC1 or beta2 in the next couple of days. notebook 5.0.0b2 is published to PyPI: https://pypi.python.org/pypi?:action=display&name=notebook&version=5.0.0b2 re-cc @JamiesHQ  I just published 5.0.0-rc.1. Please install it from PyPI and use it for the next 5 days. We can discuss official release schedule in the weekly dev meeting. i should have paid attention, but `5.0.0-rc.1` is not a valid Python version number. It may break how pip interprete wether a file is more recent than another. \r\n\r\nIt's better to confort to [pep440](https://www.python.org/dev/peps/pep-0440/), but now that it's done don't unpublish. \r\n\r\nWe should enforce version formatting at build time. \r\n\r\nAlso you miss the wheels, but same things, don't push the wheels now.  Great job otherwise ! Thanks ! You should make an announce on the ML. Also I realise this is because the issue at the top request to release `5.0.0-rc.1`, (which is not correct). Rereading pep440, it's not even better to follow it, but it's mandatory:\r\n\r\n> The canonical public version identifiers MUST comply with the following scheme:\r\n> [N!]N(.N)*[{a|b|rc}N][.postN][.devN]\r\n\r\nI think it was `SHOULD` a couple of years ago.  It's sad that this is not enforced by default with a flag to overwrite, that requires too much implicit knowledge from developers.  @Carreau Thanks for uploading a valid version and fixing this with https://github.com/jupyter/notebook/pull/2302. I will post a message to the mailing list now... > @Carreau Thanks for uploading a valid version and fixing this with #2302. I will post a message to the mailing list now...\r\n\r\nIt's ok, the version you uploaded is fine, (and it wasn't me who uploaded the right one). \r\nThe problem with version number not conforming is that soom tools get confused and could see rc2 (if we do one) as older than rc1. Other tools will see tar.gz are more recent than .whl, leading to some useless extra install step, like forcing user to have node locally while they should not need it. Usually it does not matter, but it can lead to some headache especially during beta/rc period. Sort-by in the dashboard is not in the changelog.  I can't find how to set tags, the changelog say you can't, it does not says how. I suppose it is a cell toolbar, but I can't see it.  Style of tags UI is different from the other celltoolbar elements. In particular it has a drop-shadow (which is inconsistent) and the drop shadow is inside the button, not outside (strangely).\r\n\r\nSuggestion: remove the drop shadow.\r\n\r\n It should be in the cell toolbar menu. I'll add it to the release notes.\r\n\r\nI don't mind about the style, so if you want to remove the shadow, go for it. > It should be in the cell toolbar menu. I'll add it to the release notes.\r\n\r\nHum, I don't get it in dev, but I get it if I install the PyPI wheel.  Hmm. Have you carefully rebuilt the JS? I wonder if there could be a race condition between registering the cell toolbar and adding it to the menu. > Hmm. Have you carefully rebuilt the JS? I wonder if there could be a race condition between registering the cell toolbar and adding it to the menu.\r\n\r\nYes, I did twice, and nuked my main.min.js files to be sure. it's ok it it works on the whl.  I'm a bit concerned that it might be a race condition, but it appears to work enough of the time that I suggest we put it out and see if it's a problem. A 5.1 PR (#2293) was accidentally merged - we may need to revert that or make a branch from before it landed to make the next RC. #2326 reverted that, so the new RC can be made from master. \ud83d\ude0a  @gnestor you wanted to do an rc2, right? I think there are no open issues or PRs marked 5.0 at present. I was just about to cut a new release \ud83d\udc4d and then I spilled coffee on my laptop \ud83d\udc4e. Fortunately I have another one here. RC is for release candidate, not release coffee.\n\nOn Mar 23, 2017 09:01, \"Grant Nestor\" <notifications@github.com> wrote:\n\n> I was just about to cut a new release \ud83d\udc4d and then I spilled coffee on my\n> laptop \ud83d\udc4e. Fortunately I have another one here.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2150#issuecomment-288768000>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUez7xOb4ulIR3l3Ma_2tHRrR47D5Maks5ropdYgaJpZM4L5yd_>\n> .\n>\n hopefully that is a reimbursable cost and won't ruin Christmas. \ud83e\udd41 (punchline sound) That's really cruel.\n\nOn Mar 23, 2017 09:14, \"Grant Nestor\" <notifications@github.com> wrote:\n\n> \ud83e\udd41 (punchline sound)\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2150#issuecomment-288772601>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUez2R9TEsfCSTbFgoSc4y_9Qpdy6FAks5roppugaJpZM4L5yd_>\n> .\n>\n That's definitely some risible comedy. I will survive \ud83d\udc4d \r\n\r\n5.0.0rc2 is up on PyPI. The relevant change since rc1 is that the last of the npm dependencies (preact, preact-compat, proptypes) were moved to bower in hopes of resolving https://github.com/jupyter/notebook/issues/2056 > I will survive\r\n\r\n\ud83c\udfb6  First I was afraid, I was petrified \ud83c\udfb6 \r\n\ud83c\udfb6  Kept thinking I could never live without an RC on PyPI. \ud83c\udfb6  You know we all want to see [Alien song](https://www.youtube.com/watch?v=eim5jLlEPYI) dubbed with you singing about Python packaging. :-P > You know we all want to see Alien song dubbed with you singing about Python packaging. :-P\r\n\r\nHahahah that brings back some memories ! Update: I got my laptop back from the repair shop and I didn't fry my logic board!! Resolution Confirmed. In other news, it's time to check off that last to do item at the top. And to do that, I am going to create another to do list (please add to this if necessary):\r\n\r\n* [x] Review changelog: https://github.com/jupyter/notebook/blob/master/docs/source/changelog.rst (thanks @takluyver for putting most of thing together!)\r\n* [x] Blog post: @Carreau The Paper doc that you created is archived now.Where should we collaborate on this? @gnestor @Carreau : I've restored the 5.0 paper doc if you'd like to continue working there: https://paper.dropbox.com/doc/Jupyter-Notebook-5.0-onj98NSvrkQ1eVeT8KTFv The blog post is ready for a final review: https://paper.dropbox.com/doc/Jupyter-Notebook-5.0-onj98NSvrkQ1eVeT8KTFv\r\n\r\nCan someone give me access to the blog? \r\n\r\nEDIT: Should we mention anything about transitioning to JupyterLab in the blost post? The changelog reads:\r\n\r\n> We encourage users to start trying JupyterLab in preparation for a future transition.\r\n\r\nThe changelog is also ready for a final review: https://github.com/jupyter/notebook/blob/master/docs/source/changelog.rst\r\n\r\nWe have 2 small bug fixes related to traitlets compatibility that we could include in 5.0.0:\r\n\r\n* https://github.com/jupyter/notebook/pull/2348\r\n* https://github.com/jupyter/notebook/pull/2347\r\n\r\nOther than that, I'm ready to publish 5.0.0 as soon as the blog post is ready to publish. Invitation to the Ghost blog sent!\n\nOn Wed, Mar 29, 2017 at 2:47 PM, Grant Nestor <notifications@github.com>\nwrote:\n\n> The blog post is ready for a final review: https://paper.dropbox.com/doc/\n> Jupyter-Notebook-5.0-onj98NSvrkQ1eVeT8KTFv\n>\n> Can someone give me access to the blog?\n>\n> The changelog is also ready for a final review:\n> https://github.com/jupyter/notebook/blob/master/docs/source/changelog.rst\n>\n> We have 2 small bug fixes related to traitlets compatibility that we could\n> include in 5.0.0:\n>\n>    - #2348 <https://github.com/jupyter/notebook/pull/2348>\n>    - #2347 <https://github.com/jupyter/notebook/pull/2347>\n>\n> Other than that, I'm ready to publish 5.0.0 as soon as the blog post is\n> ready to publish.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2150#issuecomment-290236474>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0AjMfPA0SJXpHbt6tUGtp5Y-D_bKks5rqtFigaJpZM4L5yd_>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Just read through the blog post. Some comments:\n\n* I think the style of the cell tags has been changed so we should update\nthat screenshot\n* For the file sorting screenshot, we should show a screenshot that has\nfiles with different timestamps and show how those are sorted. Right now\nall files shown in the screenshot have the same timestamp so the feature\nisn't really shown\n* For the table screenshots, it is difficult to see them side, but side. I\nwould show those like this:\n\nBefore:\n\n<screenshot of before, showing the full table>\n\nAfter:\n\n<screenshot of after, showing the full table>\n\n\n\nOn Wed, Mar 29, 2017 at 6:26 PM, Brian Granger <ellisonbg@gmail.com> wrote:\n\n> Invitation to the Ghost blog sent!\n>\n> On Wed, Mar 29, 2017 at 2:47 PM, Grant Nestor <notifications@github.com>\n> wrote:\n>\n>> The blog post is ready for a final review: https://paper.dropbox.com/doc/\n>> Jupyter-Notebook-5.0-onj98NSvrkQ1eVeT8KTFv\n>>\n>> Can someone give me access to the blog?\n>>\n>> The changelog is also ready for a final review:\n>> https://github.com/jupyter/notebook/blob/master/docs/source/changelog.rst\n>>\n>> We have 2 small bug fixes related to traitlets compatibility that we\n>> could include in 5.0.0:\n>>\n>>    - #2348 <https://github.com/jupyter/notebook/pull/2348>\n>>    - #2347 <https://github.com/jupyter/notebook/pull/2347>\n>>\n>> Other than that, I'm ready to publish 5.0.0 as soon as the blog post is\n>> ready to publish.\n>>\n>> \u2014\n>> You are receiving this because you were mentioned.\n>> Reply to this email directly, view it on GitHub\n>> <https://github.com/jupyter/notebook/issues/2150#issuecomment-290236474>,\n>> or mute the thread\n>> <https://github.com/notifications/unsubscribe-auth/AABr0AjMfPA0SJXpHbt6tUGtp5Y-D_bKks5rqtFigaJpZM4L5yd_>\n>> .\n>>\n>\n>\n>\n> --\n> Brian E. Granger\n> Associate Professor of Physics and Data Science\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Thanks for the feedback @ellisonbg! I updated the Paper doc and loaded the post in Ghost, so it's ready to publish. I also updated the changelog with new screenshots and some revisions to make it more consistent with the blog post (https://github.com/jupyter/notebook/pull/2351). This is ready to merge!\r\n\r\nI also added credits to the blog post. Here is the notebook that I used to generate the credits (https://gist.github.com/gnestor/b3c83b499573f864cd5399b06fab439e).\r\n\r\nI am standing by to publish. @Carreau I'm not sure how to publish to conda, so I could use your help with that.  With the newsletter (https://paper.dropbox.com/doc/Jupyter-Notebook-5.0-onj98NSvrkQ1eVeT8KTFv) the table examples at the end are the wrong way round it seems. Good catch @SimonBiggs! It's updated in the drafts of the blog post and mailing list post. I just pushed the 5.0.0 commit to master to run CI tests and verify that everything is passing. Since Friday is not the best day to do a release, I will hold off until Monday or Tuesday. I'd generally suggest we avoid doing half a release like this, because if people see a '5.0 release' on Github, they might get confused why they can't install it. Hopefully not too many people will notice it, though.","Ping @juhasch @jcb91 @jfbercher we're nearing notebook 5.0, so any help testing extensions is welcome. I don't think there are many major architectural shifts that might break things (we backed off the webpack stuff), but it's always possible. I have checked most of the extensions in [jupyter_contrib_nbextensions](https://github.com/ipython-contrib/jupyter_contrib_nbextensions), including latex_envs, toc2,  highlight_selected_word, hinterland, collapsible headings, hide_menubar, exercise, exercise2, highlighter, python-markdown, select keymaps, ... and all that work out of the box :-)\r\n\r\nI had just a problem of interaction between `python_markdown` and `jupyter_latex_envs` where rendering the code in markdown using `python_markdown` unrendered equations elsewhere. The problem was with a mathjax StatupDelay configured in `latex_envs`. Don't know exactly why. Removing it restored the correct behaviour (it worked in 4.3).\r\n\r\nAlso, I had to install some extra js to run 5.0dev: proptypes, preact, and preact-compat @jfbercher Thanks for checking! What do you need the StartupDelay for ? @juhasch I must admit that I do not remember... :-1:  @jfbercher \r\nI think I'm coming up against a problem that you allude to above.\r\n\r\n>  I had to install some extra js to run 5.0dev: proptypes, preact, and preact-compat\r\n\r\nI've asked over [here](https://gitter.im/jupyter/notebook?at=58a3230900c00c3d4f3a05e6), but in the context of using a Dockerfile to install a dev version of the notebook, could you advise how this might be fixed, or does it require that the package.json be extended to include these additional packages? @Analect I only see an error message, as you have, indicating these missing dependencies and installed using `npm install proptypes` and so on. For your docker file, you should probably add then to the package.json. \r\nI do not know why these packages are missing, if it is just for the dev version (but not mentioned in the install doc) or it will be included in the GA version.  I haven't had a chance to try 5.0 yet, but will report back if I discover anything relevant... > I had to install some extra js to run 5.0dev: proptypes, preact, and preact-compat\r\n\r\nI think this is happening on our appveyor (Windows) CI builds at https://ci.appveyor.com/project/jcb91/ipython-notebook-extensions-ynb9f/build/master-347/job/tqivj75ifr7vr4s8#L775, though the linux build on travis seems to install 5.0.0b1 without complaint: https://travis-ci.org/ipython-contrib/jupyter_contrib_nbextensions/jobs/202988147#L386 @gnestor could you test the nbgrader create assignment celltoobar with master? @ellisonbg Sure thing \ud83d\udc4d nbgrader appears to be working as expected! \r\n\r\n![image](https://cloud.githubusercontent.com/assets/512354/23440101/ee4c9840-fdce-11e6-85b1-77da2ade9185.png)\r\n > I had to install some extra js to run 5.0dev: proptypes, preact, and preact-compat\r\n\r\n@minrk Is there a chance that an `npm install` task is missing somewhere? I saw that some other people were having issues doing a dev install at https://github.com/jupyter/notebook/issues/2056. @gnestor great, many thanks! @gnestor possibly, though it seems to be working for me. What exact commands are you executing?\r\n\r\nWhen I run it from a clean environment:\r\n\r\n    git clone https://github.com/jupyter/notebook\r\n    cd notebook\r\n    pip install -e .\r\n\r\neverything gets installed. The handling of preact is a bit fiddly, since they are only npm packages but we need to load them as if they were bower. Maybe it doesn't correctly re-run `npm install` if `node_packages` is present but needs updating. @minrk I haven't been able to reproduce it but I've seen reports of it. \r\n\r\n> Maybe it doesn't correctly re-run npm install if node_packages is present but needs updating.\r\n\r\nI think that explains it. I took a look at https://github.com/jupyter/notebook/blob/master/setupbase.py#L345-L377 and it looks like it's running `npm install` based on whether `node_modules` exists and  whether the created time of `node_modules` is older than the `package.json`. That sounds right... \ud83e\udd14\r\n\r\nLet's close this issue because it's resolved and keep an eye on https://github.com/jupyter/notebook/issues/2056 for any other reports. Hopefully it's just an edge case affecting upgrades of dev installs.","Yup, that does the trick. Thanks! Feel free to merge once Travis gives it the green light.","@Carreau Would you like to tackle this before we release 5.0.0beta1 today? > @Carreau Would you like to tackle this before we release 5.0.0beta1 today?\r\n\r\nI can try, but I have a couple things that have been requested to be done fast. \r\nAlso, as I know how to do it, I might miss the main point on how to explain it. \r\nI'll try to give it a shot though.  Ok, if you explain here then I can make the changes and submit a PR \ud83d\udc4d  Most of the info are already on the dialog: \r\n\r\n```\r\nThis dialog allows you to modify the keymap of the command mode, and persist the changes. You can define many type of shorctuts and sequences of keys.\r\nUse dashes - to represent keys that should be pressed with modifiers, for example Shift-a, or Ctrl-;.\r\nSeparate by commas if the keys need to be pressed in sequence: h,a,l,t.\r\nYou can combine the two: Ctrl-x,Meta-c,Meta-b,u,t,t,e,r,f,l,y. Casing will have no effects: (e.g:  ; and : are the same on english keyboards). You need to explicitelty write the Shift modifier. Valid modifiers are Cmd, Ctrl, Alt ,Meta, Cmdtrl. Refer to developer docs for the corresponding keys depending on the platform.You can hover on the name/description of a command to see its exact internal name and differentiate from actions defined in various plugins. Changing the keybindings of edit mode is not yet possible.\r\n```\r\n\r\nthings that need to be added: Modifier are (IIRC) case sensitive. Cmdtrl is Command on mac, ctrl on windows/linux. Meta is Alt/Option (IIRC). space comma dash/minus need to be explicitly spelled out.  I can work on this today, it happened to arise in talking with @Carreau about documentation and keyboard shortcuts, so I'll be looking at this feature today anyway. Thanks @michaelpacer  What does \"close pager\" mean?\r\n\r\nUse case: wanted to map <kbd>\u2303</kbd>+<kbd>[</kbd> to the equivalent of <kbd>Esc</kbd>. The only command escape is mapped onto is \"close pager\". Aside from being intrinsically unclear, this suggested (to me) that all the functions of escape were being mapped onto \"close pager\" and so adding <kbd>\u2303</kbd>+<kbd>[</kbd> should exit from editing mode to command mode. It doesn't do that. In the quickhelp menu, we have a explanation of the meaning of different modifier keys, do we want to add this to the keyboard shortcut editor as well? It seems like it would be worthwhile. \r\n\r\nAlso \u2014 is there a reason for specifying _OS X_ keyboard symbols in a hardcoded way (see https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/js/quickhelp.js#L241)?\r\n\r\nIs there a reason it's `-` rather than `+` to delimit combinations? What does \"ignore\" mean? > What does \"ignore\" mean?\r\n\r\nProbably ignored. Implementation detail. Is it for Shift ? It means that just pressing Shift will do nothing. \r\n\r\n\r\n\r\n> Is there a reason it's - rather than + to delimit combinations?\r\n\r\nCause that's standard (Vim, Atom, Emacs) along with no delimiter. \r\nThe difference is tha instead of comma atom use space. There are some slight variation though. \r\n\r\nEsc is hardcoded (and have to be hardcoded) in many places. because it has other side effects on many browsers.  binding ^[  to close pager works for me. (I have to use `Ctrl` in the definition though).   The pager is the pane at the bottom when you run e.g. 'zip?'. With that\ninfo, I imagine you can work out what closing it is. ;-)\n\nOn 14 Feb 2017 8:13 p.m., \"Michael Pacer\" <notifications@github.com> wrote:\n\n> What does \"close pager\" mean though?\n>\n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2153#issuecomment-279822062>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUA9ciLaHjrICjl36fgs0_UL6gr_zxjks5rcgrhgaJpZM4L505r>\n> .\n>\n Don't mind me, I replied before seeing it was explained elsewhere.\n\nOn 14 Feb 2017 10:17 p.m., \"Thomas Kluyver\" <takowl@gmail.com> wrote:\n\n> The pager is the pane at the bottom when you run e.g. 'zip?'. With that\n> info, I imagine you can work out what closing it is. ;-)\n>\n> On 14 Feb 2017 8:13 p.m., \"Michael Pacer\" <notifications@github.com>\n> wrote:\n>\n>> What does \"close pager\" mean though?\n>>\n>> \u2014\n>> You are receiving this because you are subscribed to this thread.\n>> Reply to this email directly, view it on GitHub\n>> <https://github.com/jupyter/notebook/issues/2153#issuecomment-279822062>,\n>> or mute the thread\n>> <https://github.com/notifications/unsubscribe-auth/AAUA9ciLaHjrICjl36fgs0_UL6gr_zxjks5rcgrhgaJpZM4L505r>\n>> .\n>>\n>\n Closing this as resolved by #2198. If anyone thinks there are more things we should improve - especially if you think there are changes we need for 5.0 - please say so.","Hum \r\n\r\nif this is on the PDF side we need to ping @michaelpacer, and that will likely require changes on nbconvert for the LaTeX exporter. \r\n\r\n@michaelpacer is not available this week but should be back soon.\r\n\r\n I found two places that are eligible to national calendar. One inside the notebook and the other one for the generated PDF.\r\n This also ties in with the proposed localisation work: https://github.com/jupyter/enhancement-proposals/pull/16","Thanks for the detailed description ! The conversion to PDF will also require changes to https://github.com/jupyter/nbconvert likely.  Yea , I see.\r\n\r\nWe can defer it slightly until the current notebook is fully supported.","restarted travis. ","The raw data is in the file:\r\n\r\n<image src=\"https://cloud.githubusercontent.com/assets/2096628/22736385/83e58a4a-edc3-11e6-98b8-9fd02b19127e.png\" width=400>\r\n I just tried the same, and I can reproduce it. At the very least, if we're just missing something, then lots of other people are likely to miss it too, so we definitely need some kind of improvement before 5.0. #2159 fixes this. When first added, the attachment was stored as a length-one list, not a string, so there's a bit to get the first element of this list (the string itself). Eventually, this was converted to the correct type (text), but then the code was getting the first element, which is a single character, rather than the full content.","Thanks Min, that's working for me. I also found an issue where copying cells wouldn't copy attachments. I fixed that one and added a test for it as well.","Why is this done twice? Shouldn't it be done on the outer element?\n Good point. It was so I could handle divs in the original html jquery object and then their children, but it can be done in one step if done after the rendered version has been added to the DOM. Update pushed.\n @minrk should this be targeted for 4.0? Just going through open PRs.\n @nitind Now that I've looked again at the code, I see that the rendered_html class is already added at the top-level on the text_cell_render element. That suggests there isn't anywhere to add it. Can you describe the problem you are trying to fix?\n @minrk As the original issue reported, when cell source is MD, the HTML rendering of its divs lacks the rendered_html class. I looked at the areas you mentioned earlier, but they look like they're related to cell execution that generates MD rather than MD source the user authored.\n\nPerhaps I misunderstood @Carreau ?\n @nitind but their parent has it, so the .rendered_html css applies to the entire rendered cell contents. Do you see something rendering incorrectly?\n On 3.x it does... let me try on master. \n![screen shot 2015-07-23 at 11 01 13](https://cloud.githubusercontent.com/assets/335567/8858061/2a481554-312a-11e5-8e36-db03b0c138ff.png)\n Then the issue is what I described earlier - there is no problem on markdown cells, only markdown output. @nitind this should be added to the `append_markdown` method, which should do it in the same way that append_html already does.\n @minrk Does append_javascript() need the same change?\n Perhaps so, just to be safe.\n @nitind , did you want to make this change to `append_javascript` as well?\n @takluyver sorry for the delay. I added the change.\n Thanks! Looks like someone kicked Travis to restart already. @minrk , anything else on this before we merge it?\n I was just waiting for Travis to be green. Merging.\n","@SylvainCorlay - did you want to look into that queued execution thing that you say is causing problems with nbextensions? I'm happy to sit down with you and try to think it through - I'm still don't quite understand how those are conflicting. > @SylvainCorlay - did you want to look into that queued execution thing that you say is causing problems with nbextensions? I'm happy to sit down with you and try to think it through - I'm still don't quite understand how those are conflicting.\r\n\r\nI have been trying to reproduce it with notebook 5 and could not trigger the faulty behavior. I would be happy to discuss this tomorrow. Thanks @ellisonbg for opening this. This would be super helpful to go ahead with the ipywidgets release. Ok, does everyone agree that we should push 4.4 out today with just https://github.com/jupyter/notebook/pull/2022? We should confirm with @minrk @takluyver first as they have been doing lots of the work for 5.0. But I am +1 I'm fine with 4.4 with just this. Since 4.3 introduced the token stuff, it could be logical to include [`jupyter notebook password`](https://github.com/jupyter/notebook/pull/2007) in the backport, since it is related to making notebook auth easier. But since 5.0 is quite soon as well, I don't think it needs a backport. I am fine either way with the `jupyter notebook password`. If it is easy and quick to backport sounds good, otherwise, no worry. I just UX tested `Widget List.ipynb` and everything appears to be working properly JS test results: \r\n\r\n```\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/highlight.js\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/highlight.js\r\n    uncaughtError: Wait timeout occured (10000ms)\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/keyboard.js\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/keyboard.js\r\n    uncaughtError: Wait timeout occured (10000ms)\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/keyboard.js:137\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/keyboard.js\r\n    uncaughtError: Couldn't find popup with url containing ''\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/misc.js\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/keyboard.js\r\n    uncaughtError: Wait timeout occured (10000ms)\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/misc.js:137\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/misc.js\r\n    uncaughtError: Couldn't find popup with url containing ''\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/security.js\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/misc.js\r\n    uncaughtError: Wait timeout occured (10000ms)\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/security.js:137\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/security.js\r\n    uncaughtError: Couldn't find popup with url containing ''\r\nIn /Users/grant/Sites/jupyter/notebook/notebook/tests/base/utils.js\r\n  Untitled suite in /Users/grant/Sites/jupyter/notebook/notebook/tests/base/security.js\r\n    uncaughtError: \".CodeMirror-code\" still did not exist in 10000ms\r\n```\r\n\r\nPython test results:\r\n\r\n```\r\n............................................../Users/grant/Sites/jupyter/nbformat/nbformat/validator.py:233: UserWarning: No schema for validating v2 notebooks\r\n  warnings.warn(\"No schema for validating v%s notebooks\" % version, UserWarning)\r\n..........................................................................Failed to import the site module\r\nTraceback (most recent call last):\r\n  File \"/Users/grant/anaconda/lib/python3.5/site.py\", line 554, in <module>\r\n    main()\r\n  File \"/Users/grant/anaconda/lib/python3.5/site.py\", line 540, in main\r\n    known_paths = addusersitepackages(known_paths)\r\n  File \"/Users/grant/anaconda/lib/python3.5/site.py\", line 281, in addusersitepackages\r\n    user_site = getusersitepackages()\r\n  File \"/Users/grant/anaconda/lib/python3.5/site.py\", line 257, in getusersitepackages\r\n    user_base = getuserbase() # this will also set USER_BASE\r\n  File \"/Users/grant/anaconda/lib/python3.5/site.py\", line 246, in getuserbase\r\n    from sysconfig import get_config_var\r\n  File \"<frozen importlib._bootstrap>\", line 969, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 958, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 673, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 661, in exec_module\r\n  File \"<frozen importlib._bootstrap_external>\", line 765, in get_code\r\n  File \"<frozen importlib._bootstrap_external>\", line 476, in _compile_bytecode\r\nKeyboardInterrupt\r\n..................................................................................................S\r\n----------------------------------------------------------------------\r\nRan 219 tests in 32.325s\r\n\r\nOK (SKIP=1)\r\n```\r\n\r\nNone of these seem related to https://github.com/jupyter/notebook/pull/2022, but please chime in if anything looks suspicious. I will run Travis against 4.x branch before releasing. It's a relatively easy backport. There are docs that specifically reference 'new in 5.0' that would need to be updated, though, so it might not be worth the bother.","Just tried this out, beautiful!\r\n\r\n\r\n![image](https://cloud.githubusercontent.com/assets/2096628/22753060/65f4b4ce-ee00-11e6-9d6b-87ba554f13d9.png)\r\n @takluyver thanks for taking the time to review! we're working on incorporating your suggestions and feedback This PR has been updated. Ready for review. @rgbkrk largefilemanager.py has 88% unit test coverage now. Let me know any more changes are needed. Thank you! :tada:","Thanks @gnestor! I'm going to merge this, backport it, and run Travis on 4.x. If everything passes and no one else comments at https://github.com/jupyter/notebook/issues/2161, I will release 4.4 by EOD. @meeseeksdev backport to 4.x Probably want to hand-move the 4.x specific parts, since the PR contains some changes to 5.x changelog.","@tacaswell ? Adding `plt.gcf().canvas.draw()` in a subsequent cell re-draws it (but at the wrong size?!).  My guess at what is going on here is that the notebook backend code is relying on the 'standard' clean-up of a cell to set some state / properly inject it's self into the dom and set up the web-sockets.\r\n\r\nThis behaves properly with ipympl (https://github.com/matplotlib/jupyter-matplotlib)\r\n\r\n```python\r\nimport ipympl\r\nimport matplotlib.pyplot as plt\r\n\r\ndef plot_something():\r\n    plt.figure()\r\n    plt.plot([0,2],[0,2],'-')\r\n    plt.show()\r\n\r\nplot_something()\r\nraise Exception\r\n```\r\n\r\nNeed to check with @SylvainCorlay if that is ready for prime-time yet and start advertising it! @tacaswell - thank you for your suggestion. I upgraded matplotlib and install ipympl and it works almost as expected.\r\n\r\nThe behavior I am seeing is different for the first time I run the cell and the next times. It is also different for different level of browser zoom levels (I am using Chrome 56.0.2924.87 on Windows 8.1)-\r\n\r\nFirst time that the cell is run -\r\nThe figure appears but is not fully rendered (see image)-\r\n![notebook_matplotlib_exception_ipympl](https://cloud.githubusercontent.com/assets/721123/22962876/5eed393c-f358-11e6-8d84-047a50ace0d7.jpg)\r\nIf I then resize the figure using the GUI (bottom right corner), the behavior changes based on browser zoom level-\r\n1. When using 100% zoom level (default), the figure is rendered too small. When in this state the zoom rectangle is drawn offset from the mouse pointer. The zooming is determined by the mouse pointer, it is just the drawing of the rectangle that is off.\r\n2. When using 90% zoom level (ctrl^- once), the figure is rendered to size and the zoom rectangle is working fine.\r\n\r\nWhen I rerun the cell the figure is re-rendered properly without need for resizing and independent of zoom level.\r\n\r\nAlso, do you think there could be a workaround for this using matplotlib < 2.0 and nbAgg? \r\n\r\nfrom playing around quickly with ipympl it seems taht while it looks really great, there are still some important issues in progress. for example closing figures when clearing cell input doesn't seem to work, so it is not drop-in replacement ready just yet. Also, I am unsure how quickly I can get our codebase to upgrade to matplotlib 2.0 so a solution using matplotlib 1.5.3 would be great. There will be no more 1.5.x releases, so any fix would have to be locally applied.\r\n\r\nCan you report those bugs again ipympl?\r\n\r\nA vast majority of the the changes in 2.0 were style based.  Unless you have some custom Image artists, it should be a smaller change than the normal minor releases (from an API point of view).","I just pinged @Carreau about this... Last night, the 4.x Travis build passed so I published 4.4.0 to PyPI. I then received an email that another 4.x build errored, so I went to PyPI and removed the 4.4.0 version, just to be safe. I did some reading and it appears that 4.4.0 is now locked out! So it appears that we have to release under a different version, e.g. 4.4.1 (or can we do 4.4.0.1)? You can never re-upload files on PyPI, so removing a release is a big deal. Hiding it is a safer action. If 4.4.0 needs to be changed after uploading to PyPI, the only option is to make a new 4.4.1 release. Ya, now I know. DON'T DELETE RELEASES FROM PYPI. Sorry about that all... I'm building 4.4.1 now... Thanks! Thanks! One other question: I backported the release notes with https://github.com/jupyter/notebook/pull/2164 but the [commit history on 4.x](https://github.com/jupyter/notebook/commits/4.x) reads \"Merge branch '4.x' of https://github.com/jupyter/notebook into jupyte\u2026\". Any idea why? @gnestor no problem, I did the same thing with pyzmq a while ago, which is how I learned about these things. Ok wait a minute! @minrk I'm seeing 4.4.0 on pypi.python.org again! @gnestor ignore that, I was messing around to see if I could reinstate 4.4.0. I could re-upload the tarball as `.tgz` to get around the re-upload enforcement, but can't do the same with the wheel. I don't know what the weird merge commit would be, but I wouldn't worry about it. The actual content looks fine. Ya, ok \ud83d\udc4c  Ok, 4.4.1 is live: https://pypi.python.org/pypi/notebook Thanks, @gnestor! Thank you @minrk  @gnestor - please don't forget to push the commit changing the version number to 4.4.1. Done!: https://github.com/jupyter/notebook/commits/4.x Thanks all for taking care of this ! @gnestor did you forget to push the tag for 4.4.1? It looks as though I did...it's pushed now.","Isn't this a private package? i.e., it could have the `private: true` flag and only include `dependencies`. Ok, so we should depend on `phantomjs-prebuilt` instead? \r\n\r\nRegarding path stuff, if we run an npm script, npm will add `node_modules/.bin` to the path). So we could just call `npm run test:[test name]` from `notebook/jstest.py` or possibly make `npm run test` the entry point. @blink1073 yes, that makes sense.\r\n\r\n@gnestor yes, using `npm run` would be the thing to do. I mainly mean that it would be appropriate to also do it in this PR.\r\n\r\nOne difference, though: in general, our javascript tests can be run against an *install* of the notebook package. Switching to `npm run` would mean that the tests cannot be run except from the repo. @minrk Hmmm. So users who have installed the notebook using `pip install notebook` vs. cloning the repo can run the tests? Yes, providing they have casper and phantom installed. Ok, so  I guess we have make a call: leave the test setup as is and allow users to run tests against a user install of the notebook or change it so that it's more Node package-like, with test dependencies in the devDependencies and a `npm run test` script... \ud83e\udd14 In favor of changing:\r\n\r\n- install js test dependencies in one command\r\n- doesn't require any global installation of phantom or casper\r\n\r\nAgainst:\r\n\r\n- can't run tests against an install without at least *also* doing a checkout and build from source, ...\r\n- ...unless `jstest` handles both `npm run` and global cases, which may not be worth maintaining.\r\n\r\nNot either way:\r\n\r\n- The javascript here is not an npm package in any way\u2013we just happen use npm to grab a few build dependencies, so following npm package practices doesn't seem to point one way or the other.\r\n\r\nI'm fine either way - none of those points seem too strong one direction or another. using local phantom & casper would probably have saved me a few headaches running tests locally. Given that this package is heading toward \"maintenance mode\" and isn't an npm package, I might be inclined to leave it alone unless the change solves problems people are actually facing (\"It's too hard to setup and run tests locally\" totally counts).\r\n\r\nIf you do make the change, do make sure to update travis and `jstest.py` to use the bundled casper, rather than the global one. Ok, it sounds like a \"if it ain't broke don't fix it\" situation. I'll close this and we can always re-open if it comes back up.","On Unix platforms, interrupts generally work by sending the SIGINT signal, which can interrupt running code. It shouldn't be necessary to use threads for this, and threads would probably cause more issues than they'd solve. If it's not working for sql magic, the first thing would be to establish why - please open an issue on ipython-sql for that.\r\n\r\nThings are a bit different on Windows, because it doesn't have the same signalling mechanism. I think that if the code is in a blocking C call, it won't be interrupted until control returns to Python. Just for the record I ended up configuring the underlying Postgres adapter so that it handles keyboard interrupts and cancels the running query as shown [here](http://initd.org/psycopg/articles/2014/07/20/cancelling-postgresql-statements-python/).\r\nHowever, this obviously may not work for other databases.\r\nSo far it works for Postgres and Redshift. Thanks for following up. I think that fixing it in the individual database drivers, as you have, is the best approach.","We have utilities for dealing with keyboard events already that we use in the notebook, it probably doesn't make sense to write custom keyboard handling like this, with hardcoded integer keycodes, etc.\n\nAnywhere we are going to add new keyboard shortcuts should possibly be doing it through the actions and keyboard manager stuff we set up for the notebook.\n Thanks for the feedback. I'm going to take a look around in the code and\ntry to start moving things around.\n\nOn Tue, Jul 21, 2015 at 2:50 PM, Min RK notifications@github.com wrote:\n\n> We have utilities for dealing with keyboard events already that we use in\n> the notebook, it probably doesn't make sense to write custom keyboard\n> handling like this, with hardcoded integer keycodes, etc.\n> \n> Anywhere we are going to add new keyboard shortcuts should possibly be\n> doing it through the actions and keyboard manager stuff we set up for the\n> notebook.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/217#issuecomment-123487767.\n Do you think it would be better to:\n1. Create new `keyboardmanager.js`, `keyboard.js`, and `actions.js` files\n   for the directory tree or\n2. Implement into the existing keyboard handling utilities, using the URL\n   (or maybe something else e.g. event methods) to determine whether we're in\n   a notebook or directory tree view\n\nI think that 1. would mean less irrelevant code gets loaded to the client\nbut may introduce more code duplication than 2.\n resolves issue #215 \n Please include a summary of the changes (e.g. added `tree_shortcuts` to `KeyboardManager`, copied `actions.js` -> `treeactions.js` and made modifications XYZ, etc). Also state the default bindings provided in `get_default_tree_shortcuts`.\n @minrk @takluyver please review.\nOverview of changes/additions:\n\n  In `tree/js/main.js`, initialize new `treeactions.js` file via `actions.init()`, pass into a `KeyboardManager` instance, which is then passed into a `NotebookList` instance. The new `notebook_list` object is then added to the `env` local to `ActionHandler` in `treeaction.js`, via a `.set_notebooklist` function I added to the `KeyboardManager` prototype.\n  Added new functions to the `NotebookList` prototype to handle keyboard events:\n`.get_selected_index`\n`.get_length_siblings`\n`.select_row`\n`.open`\n  Created  the actions file for instances of notebooklist, `tree/js/treeactions.js`, which is a copy of `notebook/js/actions.js`, but has different enters in the `_actions` object.\n  Created a set of default shortcuts for the file tree by adding `.get_default_tree_shortcuts` to the `KeyboardManager` prototype, which returns action names for 'enter', 'j', and 'k'.\n  Also, added a `view` variable to the `KeyboardManager` prototype in order to differentiate when to build shortcuts for the file tree or for a newly created notebook. This variable is updated in `KeyboardManager.prototype.bind_events`.\n As @minrk and @feynmanliang have pointed out, there's quite a few unwanted changes that have got into this PR - files added and whitespace-only changes. We'll need to rebase this to trim those changes out.\n - Thanks for the requested changes. I'm going to start working on it for\n  the sake of cleaning up the code, but I'm curious to hear about the\n  refactorings for the 5.0 milestone/if this PR bears significance therein.\n- the `'enter-row'` action name in `_actions`  was made to open the focused\n  file/directory on enter's keydown\n- I'm also curious to know if anyone has an opinion on `this.view` in\n  `KeyboardManager`, as in should it be initially defined in the\n  `KeyboardManager` constructor or in\n  `KeyboardManager.prototype.bind_events`, which is where it gets assigned.\n-  Also wondering if anyone has an opinion on the location of the `if\n  (this.view === 'tree')` statement on line 186 in `keyboardmanager.js`,\n\nOn Wed, Aug 5, 2015 at 11:37 AM, Thomas Kluyver notifications@github.com\nwrote:\n\n> As @minrk https://github.com/minrk and @feynmanliang\n> https://github.com/feynmanliang have pointed out, there's quite a few\n> unwanted changes that have got into this PR - files added and\n> whitespace-only changes. We'll need to rebase this to trim those changes\n> out.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/217#issuecomment-128102968.\n See my inline comment - I think it would be best to refactor things a bit so the keyboard manager doesn't have a `this.view` or conditional logic based on it.\n Gotcha\nOn Aug 5, 2015 12:24 PM, \"Thomas Kluyver\" notifications@github.com wrote:\n\n> See my inline comment - I think it would be best to refactor things a bit\n> so the keyboard manager doesn't have a this.view or conditional logic\n> based on it.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/217#issuecomment-128118437.\n @takluyver @mink reset unnecessary commits and, renamed action names in treeactions.js to be  more descriptive, removed unused action handlers in notebooklist.js, moved this.view into KeyboardManager.bind_events to help clarify it's use case\n @takluyver @mink Should I close this?\n Min and Thomas have been transitioning to the other side of the globe, I'd just wait a bit for them to get back.\n @niole there's still quite a bit of work to do on this PR to get it into working shape, including addressing the comments about avoiding committing the extra unintended changes. If you aren't prepared to finish the work, we can close it here, for now. You are always free to try again another time, but I would recommend starting with something smaller. Keyboard shortcuts in browsers are one of the more complicated and hairy aspects of the notebook.\n  @mink I rebased and squashed the commit history. let me know how it's looking.\n @niole sorry, I don't think this has been rebased correctly. It now has many commits from others, going back months. Perhaps you rebased it on the wrong branch? The commit it should be based on (as of right now) is d43d72f10d8a425432351222129d9100e64e8827.\n @minrk you're right, I should've checked twice. I think it's fixed now!\n This would need a rebase (and removing WIP from title). \nIt seem it has been forgotten as it slipped on the second page of PR list. Sorry about that. \n @Carreau , I recall that when I put this up, Jupyter was considering a widespread refactor of the entire app. I can't imagine a rebase would bring this into a mergeable state. Closing for now.\n > @Carreau , I recall that when I put this up, Jupyter was considering a widespread refactor of the entire app. I can't imagine a rebase would bring this into a mergeable state. Closing for now.\n\nok, I'll try to have a look at how hard a rebase would be !\nSorry for that. \n","Drat, I had seen that at first but then it mysteriously went away and never resurfaced across the three browsers. That suggests caching issue, but I did make an effort to check that it wasn't that... I made some further effort, and I'm still seeing it consistently. If it is something in cache, it's so far resisted every trick I can think of to avoid loading it. I tried for the past half hour and can't figure out what to do about this, shall I make a PR to revert the version? Can you still not reproduce it? Or can you see it but aren't sure of the cause? I see it but can't remove it programmatically. It doesn't happen in the JupyterLab terminal [example](https://github.com/jupyterlab/jupyterlab/tree/master/examples/terminal), but I'm not sure of the exact implementation difference that could cause it. If we can't come up with a better resolution, I think we'll need to revert it before 5.0, but let's not do that just yet.\r\n\r\n- Is it worth reporting this to xtermjs? As far as I know, we're using their library as intended.\r\n- Might other people on our team have some ideas? @yuvipanda and @rgbkrk have done stuff with the terminal in the past, IIRC. FWIW I pulled latest master on xterm.js and their included demo works fine as well. Filed sourcelair/xterm.js#539 - at least if we're doing something daft, it might be obvious to them what it is. \ud83d\udc4d ","@meeseeksdev backport to 4.x This is used by https://github.com/ipython/ipywidgets/pull/1098 I did the backport by hand: #2174. \ud83d\udc4d after updating to follow event naming conventions. > \ud83d\udc4d after updating to follow event naming conventions.\r\n\r\nDone, thanks! I'll also change the backport. @jasongrout Ready to merge? @gnestor - yep, this should be ready. Thanks!","I take it this is a request for a 4.5 release? A request for another change in 4.x, regardless the version it makes it. And I think we should hold off on releasing until we make sure there are no more changes needed to get widgets working with 4.x :). Does this mean that ipywidgets 6 won't work with 4.4? ipywidgets 6 will work with 4.4. This enables us to clear the widgets in a cell when the cell's output is cleared, which resolves a longstanding feature request/frustration with widgets (see https://github.com/ipython/ipywidgets/issues/637)\r\n If it's a new feature, I don't think it warrants another 4.x release. There are a lot of other improvements which are about to go out in 5.0. If this is backported, it's not clear why we wouldn't just backport a load of other improvements to the 4.x branch. Since 5.0 is coming soon, I'm fine with saying that this is a new feature of widgets on 5.0. That said, \r\n\r\n> If this is backported, it's not clear why we wouldn't just backport a load of other improvements to the 4.x branch.\r\n\r\nThis backport is already done, so I think it's different than planning a lot more time to backport lots of other things. Backporting the commit is not the hard bit: making sure that everything works together, cutting releases and helping users who run into issues with the new release is what takes time and effort.\r\n\r\nThis bugs me a bit because by asking for a backport and a new release, you're implicitly saying that the change you want is more important than the other changes people have made for 5.0. If you believe that it is, then please put a justification of that when proposing a backport. But when we're approaching a release, the default is that new features won't get backported.\r\n > This bugs me a bit because by asking for a backport and a new release, you're implicitly saying that the change you want is more important than the other changes people have made for 5.0. If you believe that it is, then please put a justification of that when proposing a backport. But when we're approaching a release, the default is that new features won't get backported.\r\n\r\nThanks for sharing this out loud. I'm not asking for a backport (I contributed it, here), and I agreed with you that we consider this a 5.0 feature (good call!) - perhaps I should have closed this PR at that point. Sorry, I don't mean to set your priorities or imply your priorities are wrong - on the contrary, I really applaud your and others' focus and work on moving forward with notebook 5.0. We're also working hard on trying to get an overdue ipywidgets 6.0 out the door too.\r\n\r\nI really appreciate the 4.4 release, which was a real blocker for ipywidgets (thus a really high priority for us), and I'm of course willing to help with potential problems from the changes we contributed. Sorry, I should have said asking for the backport to be merged and a new\nrelease made. Either way, thanks for taking my somewhat irate earlier\nmessage well.\n\nIf you (or anyone) think a PR should be backported, generally I'd like to\nsee that raised in comments on the original pr, rather than opening a\nbackport pr straight away. I can see that you're trying to make it easier,\nbut from my end it feels a bit pushy.\n\nI'd also like to work out what our version numbers actually mean. I don't\nhave a clear sense of which repos use the model from IPython (feature\nreleases are major, bug fix roll ups minor), and which follow semver\n(breaking releases major, feature releases minor).\n\nOn 14 Feb 2017 9:04 p.m., \"Jason Grout\" <notifications@github.com> wrote:\n\n> Closed #2174 <https://github.com/jupyter/notebook/pull/2174>.\n>\n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/2174#event-962091138>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUA9bvzrVEEuE_L3zsFdl6XDp9bWkH_ks5rchbugaJpZM4L9526>\n> .\n>\n","Great!","The 'transient' key is for data that's not meant to be persisted, I believe. If lab is writing notebook files with that key, I'd say that's a bug in lab. Tracking as https://github.com/jupyterlab/jupyterlab/issues/1698.","The notebook is populating that list using an http request that queries `nbconvert` directly: https://github.com/jupyter/notebook/blob/b2b12eca955d84b9112510ca041a057cb9472a84/notebook/services/nbconvert/handlers.py#L13\r\n\r\nBut, the import used in that handler is deprecated: https://github.com/jupyter/nbconvert/blob/master/nbconvert/exporters/export.py\r\n\r\nIt should be using: https://github.com/jupyter/nbconvert/blob/605bac326cb913a437ff56a38ba13152a7ff2364/nbconvert/exporters/base.py#L113\r\n\r\n@janfreyberg, you should also restore the mimetype in your exporter since it is used in the handler. Hmm, I thought that list was hardcoded in the notebook. @janfreyberg asked about this on nbconvert and I asked him to open an issue here. This might also require custom exporters to have a minimum amount of metadata, like a clean name? My custom exporter doesn't specify anything beyond mime type and file extension, which doesn't seem like enough to create a proper menu entry. Ah, I was looking at the REST endpoint.  The frontend is indeed hard-coded: https://github.com/jupyter/notebook/blob/8fbf1fb1ce1fa1d219d6b86deb27a0b1a3e65703/notebook/static/notebook/js/menubar.js#L193. In the template: https://github.com/jupyter/notebook/blob/8fbf1fb1ce1fa1d219d6b86deb27a0b1a3e65703/notebook/templates/notebook.html#L105. To make this dynamic, the notebook file handler would have to populate that list from the known nbconvert templates, but `TemplateExporter` class would have to gain a trait for its display name.\r\n\r\n@michaelpacer, thoughts? Ah, it seems we already get that:\r\n\r\n```python\r\nIn [2]: from nbconvert import exporters\r\n\r\nIn [3]: exporters.get_export_names()\r\nOut[3]:\r\n['asciidoc',\r\n 'custom',\r\n 'html',\r\n 'html_embed',\r\n 'html_toc',\r\n 'html_with_lenvs',\r\n 'html_with_toclenvs',\r\n 'latex',\r\n 'latex_with_lenvs',\r\n 'markdown',\r\n 'matlab',\r\n 'notebook',\r\n 'pdf',\r\n 'python',\r\n 'rst',\r\n 'script',\r\n 'slides']\r\n```\r\n Looking back at your use case, it might be useful to mention that we're planning to provide a way to override the 'script' exporter in nbconvert to do something more specific for particular languages. This might address your use case with making `.m` files. @takluyver that seems like a good idea, but I can envision a situation in which I would want more than one option for exporting a file in a particular language. For eg Matlab, `.m` is their basic script extension, but they recently released a proprietary form of notebook-type files (`.mlx` files) which would require a different exporter. So simply overriding the script exporter might be too limiting! Yep, it doesn't solve the general problem, but it would reduce the pressure for it a little.","Sorry I'm not subscribe to all the notification and missed this. I'll try to have a look, but I have plenty to do in the next 2 weeks.  > At the moment , I need any UI component to control the user preference if we enable the bidirectional behavior.\r\n\r\nWith master that's relatively easy to do, there is a command (Ctrl-Shift-P, toggle rtl layout) that allow you to set/unset the rtl flag on body. I've bound it on my system to `Ctrl-r,t,l`\r\n\r\n![screen shot 2017-02-27 at 10 14 16](https://cloud.githubusercontent.com/assets/335567/23373632/b524de8c-fcd5-11e6-8bcd-1618fa38d1be.png)\r\n\r\nI'll trust you on function naming and usage. \r\n\r\n@jasongrout @blink1073 any feedback on the naming as we'd likely want to mirror this in TS/JupyterLab ?  The naming conventions look good to me.  In TS we'd type the options as `'default' | 'national' | 'contextual'`, for example, but otherwise it should be the same.","The last line sounds like it's having trouble communicating with the kernel, but there's nothing to suggest why it would. Do you have any sort of security software installed? Some internet security things have caused problems like this, but that's usually on Windows.\r\n\r\nCan you run `jupyter console` in a terminal? @takluyver \r\ni am using `jupyter` on `Ubuntu14.04`.\r\nand i can run `jupyter console` in the terminal.\r\n![1](https://cloud.githubusercontent.com/assets/7327734/22868418/af030c0a-f1d0-11e6-818f-18a4f72ca3f7.png)\r\n Huh, I was expecting that that would fail too. What about `jupyter qtconsole`? @takluyver \r\n![default](https://cloud.githubusercontent.com/assets/7327734/22892783/a9bac9f8-f24e-11e6-9300-608ae8b00020.png)\r\n\r\n OK, that looks like an unrelated problem. I'm not sure what's going on with either of them.","Does it make sense to do this for kernels as well?\n Possibly, though I'd be worried that kernel code would try to use it for 'am I in a notebook' detection. I know we're still thinking about giving kernel code more access to some kind of frontend information, but until we've worked out something coherent, I think it's preferable not to provide this kind of information.\n\nIt can probably be misused in the terminal too - e.g. the 'open a new browser window' trick only works if you're on localhost. But without HTML output, I think there's much less opportunity for mischief.\n ok\n","What does `jupyter notebook --version` give you? It's possible that the version it's finding in the terminal is older than the version you're running the notebook server with. Thank you for your answer. I get 4.2.3 Yep, the token authentication by default was added in 4.3, so you've got two different versions installed somewhere. `which jupyter-notebook` might show you where it's launching from. Can you update it to the latest release? I ran your command and I get /Users/MissOgra/anaconda3/bin/jupyter-notebook I tried updating with conda and pip, and the version is still the same. It keeps telling me that it's up to date.\r\n There should be newer versions than that available. Maybe try uninstalling with both tools and then install it anew with just one of them? Check `conda list` and `pip list` to see what versions they think are installed. Unfortunately the two tools can mess things up for each other sometimes. Or activate the conda env your notebook server runs from and try running `jupyter notebook list` in there. It worked, you were right. Thank you very much for your help :)","Thanks Min, I was waiting on CI. Thanks @ericdill. I love when folks fix typos :sunny: I love finding typos. Easy way to feel like I'm contributing to awesome projects :grin: ","It seems to me that this could be accomplished with a dashboard tour, like the [notebook tour](https://github.com/jupyter/notebook/blob/666ecbf35c3310335a3c8c182e8f53441c991c14/notebook/static/notebook/js/tour.js)? Wow that's awesome, I didn't expect that.\r\n\r\nI'd really like to make the introductory dashboard more like this to make creating a new notebook more apparent and with less clicks:\r\n\r\n![image](https://cloud.githubusercontent.com/assets/836375/22907248/043fd456-f1fd-11e6-99d2-1f5132b95cf8.png)\r\n\r\nIt's more like a google docs style intro - the documents you can create are at the top. Something that needs to go in the mockup here is text above those document placeholders that reads \"Start a new notebook\". The dashboard could use a little redesign. Like lab's launcher and this mockup, the dashboard could display a \"New to Jupyter Notebook\" at the top that can be dismissed but ideally brought back. I'd also like to see a fixed header so that when the user scrolls down below the fold, he/she can still see actions for selected files, sort directions, and jump to the other tabs without losing scroll position within the file list.\r\n\r\n![image](https://cloud.githubusercontent.com/assets/512354/22908051/2b16f510-f201-11e6-9a63-c92d23742c1c.png)\r\n I like the idea of making the 'new notebook' action(s) much more prominent in some form or another. I'd lean towards something like Kyle's mockup, because it emphasises notebooks, which people get Jupyter for, over text editors & terminals. But maybe there could even be different dashboards configurable for different use cases? Text editors & terminals are valuable if you're logging in to Jupyterhub on a server, but I hardly ever use them when I run the notebook locally.\r\n\r\nAn obvious addition to Kyle's mockup would be for the right-most box to be an 'Install more languages' link leading to the long-awaited kernel directory.\r\n\r\nI thought about a tour, but I'd consider that a fallback if we can't think of anything better. If it starts automatically, it's annoying, and if it doesn't, ~no-one will use it. The notebook tour (which doesn't start automatically, to avoid annoying people) was broken for quite a long time before anyone noticed. Is this something we should change on this repo, or focus on JupyterLab doing a better job? That may be what we ultimately decide, but I've seen this enough times and JupyterLab still feels far enough off that I thought it was worth discussing what we might do in this repo. What about having a placeholder text in the text editor. And swapping the Notebook section to be on top in the new menu ?  see #2189  @carreau I think that generally that little \"New\" button is eclipsed by the rest that's on the page. > @carreau I think that generally that little \"New\" button is eclipsed by the rest that's on the page.\r\n\r\nYeah, but I don't want a full redesign now, that close to 5.0. Swapping seem to be the least annoying/least breaking current user expectations with the more chance to actually have an impact As user \"click on the first thing\". \r\n\r\nI agree you mockup is much better.  Oh, thanks Matthias. I wasn't actually planning to do anything about this for 5.0, I just wanted to kick off a discussion about it before I forgot. I've bumped it to 5.1 so we can have another look, but I think your PR improves things a bit.","What version of the notebook are you running (`jupyter notebook --version`)? What browser? ![image](https://cloud.githubusercontent.com/assets/1595652/22908176/e6223208-f287-11e6-92ce-1768d4676337.png)\r\nI have  tested it in Firefox, Chrome and Safari. The cursor can not display correctly in those browsers. I'd guess that this is a bug of some kind in Codemirror. Can you experiment with the demos here? http://codemirror.net/mode/python/index.html\r\n\r\nFor reference, here's the notebook cell to reproduce it as text (can't copy/paste from a screenshot):\r\n\r\n```\r\n%%html\r\n<style type='text/css'>\r\n#notebook-container {\r\n    font-size: 15x;\r\n    -webkit-transform-origin-x: 0;\r\n    -webkit-transform: scale(0.90);\r\n}\r\n</style>\r\n```\r\n\r\nI can reproduce it using that, but zooming the browser in or out works correctly. So to my mind this is low priority - if you apply custom CSS to the notebook interface, you have the power to break stuff. In the post [Incorrect cursor positioning after changing CodeMirror-lines font-size #150](https://github.com/codemirror/CodeMirror/issues/150),  the bug of  Codemirror was mentioned.\r\n\r\n@takluyver ,  Are you run the following code in code cell of jupyter notebook?\r\n```\r\n%%html\r\n<style type='text/css'>\r\n#notebook-container {\r\n    font-size: 15x;\r\n    -webkit-transform-origin-x: 0;\r\n    -webkit-transform: scale(0.90);\r\n}\r\n</style>\r\n```\r\nAfter the code executed, the font size of the text in div #notebook-container will be changed.\r\nThen the bug occurs. \r\nI have tried it in the jupyernotebook in sagemath/anacanda in different browsers. \r\n\r\n\r\n Yep, when I run that I see the bug. > The best way to change the font is to set a font-family/font-size in the .CodeMirror class, that will ensure the whole editor is using the same font. I've updated the manual to be clearer about this.\r\n\r\nfrom https://github.com/codemirror/CodeMirror/issues/150\r\n\r\nIf you would like to increase/decrease the font size in the cells, then run the following code instead:\r\n\r\n```py\r\n%%html\r\n<style type='text/css'>\r\n.CodeMirror{\r\n    font-size: 17px;\r\n</style>\r\n```\r\n\r\n![screencap](http://g.recordit.co/zxynkbN4o6.gif)\r\n\r\nIf you would like to increase the font size for all element in the notebook, I suggest using the browser's zoom function (`CMD+=` or `CTRL+=` on Windows in Chrome).  @gnestor  Thank you very much!  I find that it the following code  causes the problem:\r\n`-webkit-transform: scale(0.90);`\r\n\r\nWithout it, the code:\r\n\r\n```\r\n<style type=\"text/css\">\r\n#notebook-container{width: 210mm;!important;\r\n font-size:120%;\r\n}  \r\n```\r\nworks as expected.\r\n You're welcome. Closing this now \ud83d\udc4d ","That was a satisfyingly quick response from the xterm.js devs. :-) Indeed.","Great, thanks. This looks good to me.","I'm not sure how to explain that so I'll make a gif: The pager is the pager: \r\n\r\n![close-p](https://cloud.githubusercontent.com/assets/335567/22946793/5a74745c-f2ad-11e6-8cf9-dccaf9d0b607.gif)\r\n\r\nEscape does close the dialog, if the dialog is focused, I'm going to guess your vim-bindigs interfere. \r\n![close-d](https://cloud.githubusercontent.com/assets/335567/22946866/b09bcbd2-f2ad-11e6-838a-65bca5ae61bb.gif)\r\n\r\n\r\n I don't have any vim bindings for the notebook. But strangely it's now working, so I'll close this.  I figured out what happened. If you click into an keyboard shortcut editing box, and then click out of the box (thereby eliminating focus) it will not close the dialog. Bumping to 5.1 as it's not urgent, but I suspect it's a fairly easy fix for someone familiar with the JS.","Nice! Let's mark this as 5.0 and merge it and we can give it a try in the beta.",":+1:\n","Good catch, thanks @michaelpacer ","I always see shortcuts specified with modifier keys first, so I think that as long as those work, this is lower priority. Agreed about being lower priority, but it should be in place for 5.0.1 if not 5.0.0 (also I don't think that it'll be too hard once we identify the spot that is doing to translation between the text and the keyboard commands). Bumping as 5.1 we can for now document that modifiers should be first. But indeed it's probably not taking care of. \r\n\r\nHave you tried modifiers many time ? Like Shift-Shift-E ? > Bumping as 5.1 we can for now document that modifiers should be first.   \r\n\r\nOk, including in documentation per #2153. \r\n\r\n> Have you tried modifiers many time ? Like Shift-Shift-E ?\r\n\r\nOooh good call. Didn't test that!","Marked as 5.0 so we can have a look into it, but if it's not easy to fix I'm happy for it to be bumped. @Carreau do you think this is likely to be an easy fix? Probably hard enough that's not worth it for 5.0. Likely more complicated and less critical than other things already put as 5.1. ","I don't remember any issue like that. But when it starts a kernel, it will have to set up pyzmq sockets to communicate with the kernel; pyzmq is a compiled library, so it might be causing a segfault. Try uninstalling and reinstalling that and libzmq (the library it depends on).","It should still pick up on the working directory where you launch it. This is working for me. Is it possible you have some config file which is overriding it? Run `jupyter --paths` to see where config can live.","Thanks for your PR. Though this actually _removes_ the ability to configure this.\r\nIf you do not like default behavior you should set `IPython._target` in your `custom.js`.\r\n\r\nThis was originally left empty, set to `_blank` on purpose after many requests from user to _not_ open in the same tab by default, then made configurable hereafter to fulfill your use case. \r\n\r\nThis would then just revert to original behavior for which we _did_ had a strong pushback. \r\n\r\nSo -1.  Hey there @joar, I'm going through issues and it seems to me that it makes sense to close this one. As @Carreau mentioned, we believe the `IPython._target` mechanism is sufficient for the use case you speicify and we do not wish to remove that feature unconditionally.\r\n\r\nThanks everyone and happy hacking! :bowtie: @Carreau Sorry about that, I did not find any of those discussions after some quick searches, I might have missed a case of `[\"jupyter\", \"IPython\"] * [\"don't open new tab\", \"new tab\",  \"target\", \"_blank\"]`.\r\n\r\nI did not know about `custom.js` and the setting of variables therein. :sun_behind_rain_cloud:  @joar no worries, we could do a better job at documentation. \r\nWhere would you expect to find such information ? \r\nDo you want to send a PR that add this information in such a place ? \r\n\r\nThanks !","The error in the first screenshot appears to be that `build:watch` assumes a Unix-y system.\r\n\r\nWhat have you modified that it should pick up when you run `npm run build` (or `python setup.py js css`)? I am using Windows 7, node v6.9.5 and npm v4.2.0 .\r\n\r\nI created a folder under notebook/ static to wrap my work .\r\nThe files that I was trying to modify : \r\n\r\n     - .less files that are located in  : [notebook/static/ ] :  (e.g. base/less/ page.less ,  notebook/less/menubar.less , etc..) \r\n\r\n     - .js files that are located in the same place : [notebook/static/ ]  : (e.g. base/js/page.js)  .\r\n\r\n           @takluyver , any update ?  It should rebuild them if the modified time of the built files is older than the modified time of any of the sources. I don't know why that would have gone wrong, but you can force it to rebuild the JS with `python setup.py js --force`. Solved by reinstalling Anaconda .","It seem like something is wrong on your system. \r\n\r\nThe Notebook 4.x branch does not use traitlets' `default` and master/5.x already requires traitlets `>4.2.1`. So it is likely another package that raised. \r\n\r\nFor me a fresh install in 3.4 with pip pull traitlets 4.3 and AFAICT all packages using traitlets express the correct dependencies.\r\n\r\nCan you provide the error message ?","This is great, but:\r\n\r\n- We're still missing an explanation of 'Cmdtrl'\r\n- I am a bit concerned that is now so long that I don't see the actual shortcut editing area without scrolling down. Maybe an easy way to get round this for 5.0 would be to move the explanation to the end of the dialog, and have just the first bit at the top, like:\r\n\r\n> Here you can modify the keyboard shortcuts available in command mode. Your changes will be stored for later sessions. See more **details of defining keyboard shortcuts** below.\r\n\r\n(with a link from the bold text to scroll the help info into view) I like that idea, but how should I handle the text scrolling? Just an anchor tag with an id inside the beginning of the detailed explanation and a hyperlink? I think that should work. Try it and see :-) Nice, thanks Mike. :-)","> Is there any plan for supporting emoji codes in the markdown cells\r\n\r\n### Not in the document spec:\r\n\r\nNot currently, because emojicode is not in the standard markdown spec, and we want to avoid inventing our own. If it get standardized in CommonMark and most of the markdown tooling we use support it why not.\r\n\r\n### Maybe in the UI ?\r\n\r\nI guess, you could write and extension that tab complete to the equivalent unicode character. That will be fine, and that can be done now. There are plenty of other things we could tab-complete to/from\r\n\r\nI've already seen a notebook named `\ud83d\udcd3.\ud83d\udc0d`  so that should not be a problem.\r\n\r\n","used settings.get, fallback on request protocol if not set.\n shoudl I mark that as backport ? \n I don't think it's useful to mark for backport, since we can't backport automatically anymore. It probably makes sense to open a PR against 3.x, though.\n","Pinging @flying-sheep - any ideas why R could be crashing like that? what\u2019s the console output of jupyter? My apologies for the delay in responding\u2014after reinstalling Jupyter and the R kernel, I no longer received the error.\r\n\r\nThanks! OK, closing with status MYSTERY ;-)","There are times where the IPython kernel holds onto references to objects. This is especially if you haven't assigned them to variables. @takluyver @Carreau what is the recommended way in IPython to clear things like this? If our references are the issue, then you can use `%reset` to discard them all, or `%xdel foo` to delete all references we hold to an object named foo. It's not clear to me whether that is the issue however: I wonder if these GPU computing tools expect you to use a fresh process to get a clean slate. AFAICT (but I'm not super infomed in this domain) this is a issue with recent heavy-GPU-intensive computation tools. TF in particular.  We has a shared box at UC berkeley and one of the recurrent issue was Tensorflow refusing to behave as if it was not the only thing running on the machine. That is to say if was taking all ram and a hold onto the GPU unconditionally until process killed. \r\n\r\nThe predictive search of google (private windows) says a lot.\r\n<img width=\"289\" alt=\"screen shot 2017-02-20 at 09 44 11\" src=\"https://cloud.githubusercontent.com/assets/335567/23136347/305e23d6-f751-11e6-9c5b-2998efc6b3b5.png\">\r\n\r\nOn my session it's the first proposed search after just writing `ten` in the search bar.\r\nSo I doubt there is much to do on our side.\r\n Thanks! Hope this helps...\n\nOn Mon, Feb 20, 2017 at 10:46 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> AFAICT (but I'm not super infomed in this domain) this is a issue with\n> recent heavy-GPU-intensive computation tools. TF in particular. We has a\n> shared box at UC berkeley and one of the recurrent issue was Tensorflow\n> refusing to behave as if it was not the only thing running on the machine.\n> That is to say if was taking all ram and a hold onto the GPU\n> unconditionally until process killed.\n>\n> The predictive search of google (private windows) says a lot.\n> [image: screen shot 2017-02-20 at 09 44 11]\n> <https://cloud.githubusercontent.com/assets/335567/23136347/305e23d6-f751-11e6-9c5b-2998efc6b3b5.png>\n>\n> On my session it's the first proposed search after just writing ten in\n> the search bar.\n> So I doubt there is much to do on our side.\n>\n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2201#issuecomment-281142311>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0HrmHClY-DMPxSwqKvJMMgXs4LNQks5redGMgaJpZM4MFSbv>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","Closed by #2226","We added these because previously you couldn't do either of these things from the UI:\r\n\r\n- View HTML files\r\n- Edit files that are textual, but where the system is not reporting a text mimetype. This is system dependent, but we've had quite a few reports of this. Since this is to work around our guess of 'can we edit this file', we necessarily have to show the button for some files where it won't work, and it would be weird not to show it on known editable files.\r\n\r\nThe error viewing an HTML page is a bug; I'll look into that. #2208 fixes the error viewing HTML files, at least for me. Thanks for spotting that before we released! I think we can close this one as it is html view is fixed by #2208. And I agree with @takluyver that we should not be too smart. Edit/View everywhere seem fine to me.  Not thrilled with all the buttons, but ok \ud83d\udc4c \n\nI don't understand why we would introduced new buttons that don't do anything useful.\n\nSent from my iPhone\n\n> On Feb 22, 2017, at 10:47 AM, Matthias Bussonnier <notifications@github.com> wrote:\n> \n> I think we can close this one as it is html view is fixed by #2208. And I agree with @takluyver that we should not be too smart. Edit/View everywhere seem fine to me.\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n They both do something useful under certain conditions; see my earlier comment. Got it! I missed the issue of editable files that report the an unexpected MIME type. But allowing users to click on files that we know they *won't* be able to edit is very confusing (images in particular). Given this new information, my preference would be:\r\n\r\n* Only offer \"View\" for HTML files.\r\n* Show \"Edit\" always, except for image MIME types.\r\n\r\n There is another minor use for 'view', which I forgot - it gives you a way to get the raw text of a file which would otherwise open in the text editor. Possibly niche, but could be useful if you have e.g. a very long file.\r\n\r\nI'd broadly agree with hiding edit when only images are selected, but we need to be a bit careful, because `image/svg+xml`, for instance, is text. The media part of mimetypes turns out not to be that helpful for us. > Only offer \"View\" for HTML files.\r\n\r\nWhy ? Html are perfectly valid text files. Can't you edit a `template.html` file that you use from Python in Jupyter. \r\n\r\n> Show \"Edit\" always, except for image MIME types.\r\n\r\nWhy ? Isn't SVG a valid image format you  might want to edit with a text editor?  Well, just \ud83d\udc34  with @takluyver and I think we agreed, we don't want to be in the businesss of deciding what can and/or cannot be viewed/editted.  @Carreau sorry I think there were two possible meanings in my sentence \"Only offer \"View\" for HTML files\":\r\n\r\n1. For HTML files only offer the View option (not the Edit one)\r\n2. Only show the View button for HTML files and no other files.\r\n\r\nI was meaning (2), so that yes, you would see the \"Edit\" button for HTML files. But you wouldn't see the \"View\" button for other things.\r\n\r\nAnd by image types, I was only referring to jpg/png, not svg, which is definitely text and can be edited just fine. Right now if you \"edit\" a jpg or png, it opens the text editor, but it fails with an encoding error. If a user says \"Edit this jpg file\" that is a disappointing and confusing outcome...\r\n\r\n@takluyver I agree that getting the raw text of a text file using \"View\" would be useful, but that doesn't work right now. The View button only shows (as far as I can tell) for HTML files. So actually, the current behavior actually matches my preference (View only shows for HTML files).\r\n\r\nSo I think the only change I would like is to not show the \"Edit\" button for the `image/png` and `image/jpeg` file types. > For HTML files only offer the View option (not the Edit one)\r\n> Only show the View button for HTML files and no other files.\r\n> I was meaning (2), so that yes, you would see the \"Edit\" button for HTML files. But you wouldn't see the \"View\" button for other things.\r\n\r\nAh ! Sorry for the confusion. \r\n\r\n> but you wouldn't see the \"View\" button for other things.\r\n\r\nWait do you mean \"Edit\" ? Like you don't want the \"View\" button for images ? \r\n\r\n> And by image types, I was only referring to jpg/png, not svg, which is definitely text and can be edited just fine. Right now if you \"edit\" a jpg or png, it opens the text editor, but it fails with an encoding error. If a user says \"Edit this jpg file\" that is a disappointing and confusing outcome...\r\n\r\nI got what you were thinking. The problem is that OS are known to not give the right mimetype. We had many issues with windows reporting css as `application/css` instead of `test/css`. Starting to black/whitelist is a rats nest. jpeg ? or jpg?  or JPEG ? What if photoshop is installed ? Then it will appear as a photoshop file. \r\n\r\nKeep in mind that the button at the top are advanced action, by default clicking on the links will do the right thing (hopefully). And removing either edit (or view) has IMHO more chance of annoying advanced users than to really be annoying for newcomers, and I think that Jupyter have mostly been about allowing users to do arbitrary things, and that would go the opposite way.  I totally agree we should give advanced users the tools they need. The issue in this case is that the \"advanced\" usage-case buttons are put right in the middle of very basic buttons such as Move, Download and Delete:\r\n\r\n<img width=\"470\" alt=\"screen shot 2017-02-25 at 6 16 30 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/23336482/9789acf4-fb86-11e6-9f20-f073a65f28b7.png\">\r\n\r\nThat makes the lives of the many non advanced users difficult, just to appease the advanced ones. The right UI for this type of thing would be to put the more advanced action behind a context menu, but I think that is outside the scope of 5.0.\r\n\r\nTrying to think about an in between path...\r\n\r\nWe *already* have a reg-exp in these code paths for file extensions:\r\n\r\nhttps://github.com/jupyter/notebook/blob/master/notebook/static/tree/js/notebooklist.js#L604\r\n\r\nEditing those lists for the Edit/View button is trivial. Also, looking at file extensions is exactly how we map files onto models/views that can view/edit those files in JupyterLab. I can submit a PR to address this...but what to do exactly.\r\n\r\nTo me, the most important question is this \"what precise things do the Edit/View buttons enable a user to do that they could not do otherwise\". Based on what Thomas said that is:\r\n\r\n* View an HTML rather than edit it.\r\n* Edit text files that don't show up as text files.\r\n\r\nLet me see if I can put together a PR that shows the Edit/View buttons for these cases alone.\r\n OK, I think the PR I just submitted addresses everything. Thanks!","If we opt to keep the functionality as is, maybe a clearer way to make that clear would be to put the path to the left of the input box, as in this super high quality mockup:\r\n\r\n![move_dialog_mockup](https://cloud.githubusercontent.com/assets/327925/23127086/93ac77b0-f771-11e6-9b4b-040356da2083.png)\r\n Reference from Github:\r\n\r\n![image](https://cloud.githubusercontent.com/assets/2096628/23127185/b3b2dfb8-f73f-11e6-88e2-35508b9c97b9.png)\r\n Nice! I really like prefixing the path like that!\n\nOn Mon, Feb 20, 2017 at 6:39 AM, Steven Silvester <notifications@github.com>\nwrote:\n\n> Reference from Github:\n>\n> [image: image]\n> <https://cloud.githubusercontent.com/assets/2096628/23127185/b3b2dfb8-f73f-11e6-88e2-35508b9c97b9.png>\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2204#issuecomment-281081617>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0JvXaL-_h5xifOqW_79alNzrnvdFks5reZeYgaJpZM4MFi8Y>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I've had a go at this in #2234, but it's a bit rough.","@vidartf do you have time to look into these things? Sure, but I need feedback on the focus highlighting bit, see #2210 ( @ellisonbg ). Closing as resolved by #2210","Single file delete works without any problems. The error is coming from the selector we use on [this line](https://github.com/jupyter/notebook/blob/c305d8fda3b5f8bfb8c1ce520c0a6927f56261a1/notebook/static/tree/js/notebooklist.js#L1027). The [`:data` selector](https://api.jqueryui.com/data-selector/) is part of jquery-ui, which we're seemingly not using in the file browser view any more. Raw jQuery doesn't like it.\r\n\r\nWe're using jQuery's `.data()` storage, not `data-` attributes on the HTML element, so we can't select with e.g. `[data-path]`. I don't know whether it's better to load jQuery UI so the `:data` selector works, or change to doing the selection another way. Should be fixed by #2206 - we can iterate over the list items directly, we don't need to ask for all items on the page with path data.","We don't have a great undo mechanism at the moment. Each cell has its own undo history, and this is what's deleting the code that came from the second cell. We also have a simple undo mechanism to restore deleted cells. I think this should be available in the edit menu after you merge cells. We can clear CM history on merge, it will prevent undo beyond merge point.  @Carreau you milestoned it for 5.0 - would you like to work on it? Bumping to 5.1, even if Ctrl-Z undo Ctrl-Shift-Z should redo so that's not critical. \r\nIt should be a 1 line fix in the right place (likely the Merge command). But it will take me an afternoon to re-dive in this code. ","Milestoned for 5.0 so we at least have a look at it, but I don't want this to hold the release up if it becomes the last thing.\r\n\r\nPinging @ellisonbg for style question. Illustration of the interaction with pandas.\r\n\r\nIn the current notebook 4.x, by default *pandas* limits the amount of data represented in html table, so you still get a limited column width by default. \r\nBut, if you really want to look at the actual full data, there is an option you can use to change this: \r\n\r\n![screenshot from 2017-02-20 12-36-50](https://cloud.githubusercontent.com/assets/1020496/23129039/7ae1c1d0-f781-11e6-9698-4d267fb2be24.png)\r\n\r\nNow the same example with notebook 5.0 beta. The default repr of the dataframe is rather similar (it is bit shorter as the default of `pd.options.display.max_colwidth` (see above), but the default of the pandas setting can certainly be discussed). \r\nSo up to here, everything is OK. But now, if you want to look at the actual data, the pandas option no longer works. And there is also no alternative way to look at the actual data (apart from looking at the underlying array using `df.values`, but this looses the labeled aspect and nice formatting of the pandas table):\r\n\r\n![screenshot from 2017-02-20 12-37-12](https://cloud.githubusercontent.com/assets/1020496/23129157/e2c0bbbc-f781-11e6-8eee-78d930985864.png)\r\n\r\nSo as a conclusion: I agree the default should not be to display all data, but to have a limited column width. But, from the pandas point of view, it would be better to let pandas control this instead of jupyter. I will have a look at this later today...\n\nOn Mon, Feb 20, 2017 at 7:36 AM, Joris Van den Bossche <\nnotifications@github.com> wrote:\n\n> Illustration of the interaction with pandas.\n>\n> In the current notebook 4.x, by default *pandas* limits the amount of\n> data represented in html table, so you still get a limited column width by\n> default.\n> But, if you really want to look at the actual full data, there is an\n> option you can use to change this:\n>\n> [image: screenshot from 2017-02-20 12-36-50]\n> <https://cloud.githubusercontent.com/assets/1020496/23129039/7ae1c1d0-f781-11e6-9698-4d267fb2be24.png>\n>\n> Now the same example with notebook 5.0 beta. The default repr of the\n> dataframe is rather similar (it is bit shorter as the default of\n> pd.options.display.max_colwidth (see above), but the default of the\n> pandas setting can certainly be discussed).\n> So up to here, everything is OK. But now, if you want to look at the\n> actual data, the pandas option no longer works. And there is also no\n> alternative way to look at the actual data (apart from looking at the\n> underlying array using df.values, but this looses the labeled aspect and\n> nice formatting of the pandas table):\n>\n> [image: screenshot from 2017-02-20 12-37-12]\n> <https://cloud.githubusercontent.com/assets/1020496/23129157/e2c0bbbc-f781-11e6-8eee-78d930985864.png>\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2209#issuecomment-281095038>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0MGQ03f53L5QLQgYTlFAuAxDlWjEks5reaTygaJpZM4MGPni>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Ping @ellisonbg  I think the best option is to remove the max width on the columns for now.\nThis won't be ideal, but the consequences seems to be too severe of keeping\nit.\n\nOn Thu, Feb 23, 2017 at 2:55 AM, Thomas Kluyver <notifications@github.com>\nwrote:\n\n> Ping @ellisonbg <https://github.com/ellisonbg>\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2209#issuecomment-281961015>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0H0OVTJPdXfyeQUmRdCk9ZuD9h1_ks5rfWWOgaJpZM4MGPni>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @jorisvandenbossche since you've looked into this, do you want to do a PR? @ellisonbg Thanks for reconsidering this! \r\n@takluyver I could try that (although I don't know much about css), but, there are still some design decisions to take:\r\n\r\nJust removing the max-width is not what we want I think:\r\n\r\n![screenshot from 2017-02-24 16-01-48](https://cloud.githubusercontent.com/assets/1020496/23309018/66ddb49e-faad-11e6-8944-8d76a68e4bdc.png)\r\n\r\nSo combining with resetting `whitespace` as well:\r\n\r\n![screenshot from 2017-02-24 16-02-44](https://cloud.githubusercontent.com/assets/1020496/23309035/76f3bdba-faad-11e6-8ede-5811c332e4c9.png)\r\n\r\nNow, the line height seems a bit too small. However, resetting that as well is maybe too much space between the rows?\r\n\r\n![screenshot from 2017-02-24 16-04-39](https://cloud.githubusercontent.com/assets/1020496/23309058/8b95c2ea-faad-11e6-9a6b-2a36003d81be.png)\r\n\r\nI could decrease the padding a bit (currently `0.5em 0.5em`), but that seems rather arbitrary:\r\n\r\n![screenshot from 2017-02-24 16-25-41](https://cloud.githubusercontent.com/assets/1020496/23309200/0b5bd154-faae-11e6-88d6-4dd32c12e8f8.png)\r\n Nice, thanks for tackling this. All of the things like padding,\nline-height, etc should be chosen very carefully. In this case, we should\nprobably make the change initially in JupyterLab, as we have CSs variables\nfor most of these things. We would like the table design to match in\nlab/notebook. I am catching up on dev things right now, but can probably\nlook at it in JupyterLab.\n\nDo you have a nice example dataframe/notebook to try out?\n\nOn Fri, Feb 24, 2017 at 7:29 AM, Joris Van den Bossche <\nnotifications@github.com> wrote:\n\n> @ellisonbg <https://github.com/ellisonbg> Thanks for reconsidering this!\n> @takluyver <https://github.com/takluyver> I could try that (although I\n> don't know much about css), but, there are still some design decisions to\n> take:\n>\n> Just removing the max-width is not what we want I think:\n>\n> [image: screenshot from 2017-02-24 16-01-48]\n> <https://cloud.githubusercontent.com/assets/1020496/23309018/66ddb49e-faad-11e6-8944-8d76a68e4bdc.png>\n>\n> So combining with resetting whitespace as well:\n>\n> [image: screenshot from 2017-02-24 16-02-44]\n> <https://cloud.githubusercontent.com/assets/1020496/23309035/76f3bdba-faad-11e6-8ede-5811c332e4c9.png>\n>\n> Now, the line height seems a bit too small. However, resetting that as\n> well is maybe too much space between the rows?\n>\n> [image: screenshot from 2017-02-24 16-04-39]\n> <https://cloud.githubusercontent.com/assets/1020496/23309058/8b95c2ea-faad-11e6-9a6b-2a36003d81be.png>\n>\n> I could decrease the padding a bit (currently 0.5em 0.5em), but that\n> seems rather arbitrary:\n>\n> [image: screenshot from 2017-02-24 16-25-41]\n> <https://cloud.githubusercontent.com/assets/1020496/23309200/0b5bd154-faae-11e6-88d6-4dd32c12e8f8.png>\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2209#issuecomment-282319563>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0LvrVMfoTrRS1VeuEoVyopZVOoI0ks5rfvdBgaJpZM4MGPni>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n As we're trying to get to 5.0 soon, do we want to make a less carefully designed change to make this 'good enough' for now? E.g. remove max-width and reset whitespace so long lines can wrap? We can always make further improvements for 5.1. @ellisonbg the notebook I used to make the screenshots above: http://nbviewer.jupyter.org/gist/jorisvandenbossche/884d4370577d47ad9583f1381fcc01cc\r\n\r\nI was mainly using jupyterlab to test this out, but I raised it here as the notebook release seemed more imminent. But discussing it further in jupyterlab is fine for me as well. Looking at this now...\n\nOn Fri, Feb 24, 2017 at 8:49 AM, Joris Van den Bossche <\nnotifications@github.com> wrote:\n\n> @ellisonbg <https://github.com/ellisonbg> the notebook I used to make the\n> screenshots above: http://nbviewer.jupyter.org/gist/jorisvandenbossche/\n> 884d4370577d47ad9583f1381fcc01cc\n>\n> I was mainly using jupyterlab to test this out, but I raised it here as\n> the notebook release seemed more imminent. But discussing it further in\n> jupyterlab is fine for me as well.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2209#issuecomment-282341408>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0MrFAwqBt_0uQNqrhey3PeBR2Xqfks5rfwobgaJpZM4MGPni>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Joris, wow thanks so much for looking at this. I downloaded your example\nnotebook and everything looks stellar!!! I would go for the 0.5em spacing.\nGiven all that, let's make the following modifications to the rendered HTML\ntable display in notebook (and lab):\n\n```\n  table.td, tableth {\n    max-width: none;\n    white-space: normal;\n    line-height: normal;\n    padding: 0.5em 0.5em;\n  }\n```\n\nDo you want to submit a PR to either notebook or lab? If not I, or someone\nelse can. Thanks so much.\n\nCheers, Brian\n\nOn Sat, Feb 25, 2017 at 6:58 PM, Brian Granger <ellisonbg@gmail.com> wrote:\n\n> Looking at this now...\n>\n> On Fri, Feb 24, 2017 at 8:49 AM, Joris Van den Bossche <\n> notifications@github.com> wrote:\n>\n>> @ellisonbg <https://github.com/ellisonbg> the notebook I used to make\n>> the screenshots above: http://nbviewer.jupyter.org/gi\n>> st/jorisvandenbossche/884d4370577d47ad9583f1381fcc01cc\n>>\n>> I was mainly using jupyterlab to test this out, but I raised it here as\n>> the notebook release seemed more imminent. But discussing it further in\n>> jupyterlab is fine for me as well.\n>>\n>> \u2014\n>> You are receiving this because you were mentioned.\n>> Reply to this email directly, view it on GitHub\n>> <https://github.com/jupyter/notebook/issues/2209#issuecomment-282341408>,\n>> or mute the thread\n>> <https://github.com/notifications/unsubscribe-auth/AABr0MrFAwqBt_0uQNqrhey3PeBR2Xqfks5rfwobgaJpZM4MGPni>\n>> .\n>>\n>\n>\n>\n> --\n> Brian E. Granger\n> Associate Professor of Physics and Data Science\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","woot\n Eeek, I'm so happy!\n","Preview: \r\n![tags-review](https://cloud.githubusercontent.com/assets/510760/23129408/deb88a4e-f782-11e6-8429-9a7a370993ce.png)\r\n > Most of the asked changes are in, but I'm not sure if there is a standard way in this repo to style things in order to get rid of focus highlighting on input\r\n\r\nI don't think there is. Your snippet looks fine. Do you want to add in this PR or in a subsequent one ? I think I have a working copy of that, which I can commit to this PR\ntomorrow.\n @vidartf don't forget to commit & push that. Thanks for the reminder, just pushed it :) > Thanks for the reminder, just pushed it :)\r\n\r\nSweet ! Thanks ! @ellisonbg how does master looks for you now ?  Just tested and it looks great! I did submit a super minor PR that fixes a few minor things: #2230 \r\n\r\nOnce that PR is merged, I think the cell tags are set to go. Very happy to see these!","I don't know quite why that would have happened, but you can change it to the R kernel from the 'Kernel' menu in the notebook. Once you've done that, it should be saved in the metadata so you won't need to change it again.","I don't recall any failures like that, but it might happen if all the sockets on the system were already in use (bind() with port 0 is a way to ask for a random port number). Or maybe there's some security policy that disables the high-numbered ports it uses. I found the reason by pinging my localhost ending up with no reply.\r\nI realized I need to get the network loopback work! As follows:\r\nsudo ifconfig lo up\r\n\r\nThen, it works! I'm glad you worked it out, but a bit puzzled because I thought loopback was always enabled by default. Is there a kind of system that doesn't have it by default, or had you turned it off for some reason?","Have you got a convenient notebook to reproduce this? @takluyver @fonnesbeck Same issue here as well! The only solution I stumbled over so far is to restart the kernel. Also, if you interrupt multiple times, it accumulates lines between every update. For example, two interrupts would accumulate two lines. Look at the following:\r\n<img width=\"429\" alt=\"screen shot 2017-03-06 at 3 52 46 pm\" src=\"https://cloud.githubusercontent.com/assets/4600111/23614950/0f1813a0-0285-11e7-8bfe-b96585f0b4ff.png\">\r\n Sorry, just noticed the request for an example. I will post something momentarily. I run the following code: \r\n<img width=\"698\" alt=\"screen shot 2017-03-06 at 3 55 49 pm\" src=\"https://cloud.githubusercontent.com/assets/4600111/23615060/82194054-0285-11e7-9811-48374308925d.png\"> If you create a conda env with pymc3: \r\n\r\n    conda create -n test pymc3 notebook\r\n\r\nand try running one of the example notebooks, for example [this one](https://github.com/pymc-devs/pymc3/blob/master/docs/source/notebooks/rugby_analytics.ipynb), the behavior can be replicated by interrupting the call to `sample` down at line 9. ","@kevin-bates excellent, thanks! We're in the process of finishing up the 5.0 release from the master branch, but this can be merged once that release has been pushed out.","> The cell is currently executing.\r\n> An \"execute\" command was sent to the cell, but another cell is currently executing. The cell will execute when its turn comes.\r\n\r\nWith current architecture there is no way of distinguishing. From the point of view of the notebook it's the same. All the messages are in zmq-queue. It will be really hard to distinguish. \r\n\r\n> The kernel was interrupted / restarted while the cell was executing, it is currently not executing.\r\n\r\nThat's a bug. It might be hard to fix depending on the case. If computation was interrupted `*` should be cleared. \r\n\r\nI think this goes a a more general refactor of the notebook format and the \"dirty\" status, where we would need to have an execution \"submitted\" timestamp and compare that to last kernel execution reply. \r\n\r\n Thanks for the reply!\r\nDistinguishing only the last case (kernel interrupted / restarted) will be really useful for me. I'm surprised to hear this is considered a bug, as I Interrupt / restart the kernel often and the asterisk is almost never cleared. I would be really happy if that were fixed. Milestoned this as being for 5.1 so we can look into fixing that.","In master, I see the line breaking in both Firefox and Chromium. I have no idea what to do about it, though.\r\n\r\nI've put an example notebook to reproduce the issue here: http://nbviewer.jupyter.org/gist/takluyver/fb43b4cb6d7a44eadcdd08b024268f23\r\n(The rendering works as expected in Gist and nbviewer - it's only the live notebook that has the issue for me).","This should be fixed (by using a newer version of Codemirror) when we release 5.0 soon. You can help us test 5.0 now by installing it with `pip install --pre --upgrade notebook`. @takluyver Thanks. I'd love to test the new version.","I agree!\r\nand thanks for the great looking notebook!\r\njust through that I found out, after a long time...\r\nthat the js callbacks need to be in this shape.:\r\n```\r\nvar callbacks = {\r\n        iopub : {\r\n             output : handle_output,\r\n    }\r\n}\r\n```\r\nI have found several other pages not having the `iopub` around, which prevents the callback function to be called...","This looks fine to me. @minrk or @Carreau , can one of you take a look and merge if you're happy with it.\n I'm +1. @ellisonbg Might be picky on the phrasing. \n","@michaelpacer could you have a look at this?\r\n\r\n- Have we ever explicitly aimed to support `\\(` and `\\)` as math delimiters? I don't recall that, and I don't think it's implemented in nbconvert to HTML.\r\n- If we should fix this, should we try to get it in for 5.0? Hi all, a few thoughts (took a couple days to get my bearings on this one as there are a few related issues with which I was getting it confused). My unraveling this confusion led to these different points. \r\n\r\n1. this seems (based on the exposition\u2026I've not tried testing this yet) to address an issue I opened ages ago: https://github.com/jupyter/notebook/issues/759. If that is the scope of that, I think it should be fine. \r\n\r\n2. Technically the use of `\\\\( \u2026\\\\)` inside the notebook isn't \"escaping\" the `\\` so that it can be interpreted by the underlying javascript, but it is specifically the syntax we use in contrast to traditional `\\(` `\\)`. I think we made an explicit decision to not support those as delimiters (see next point). I don't think that this is actually doing that (based on the number of `\\`s that are present in the various instances of the commit). That said, that regular expression is a beast to read and not test, so I'll need a little time to error test it thoroughly. \r\n\r\n2.1. This should probably have some accompanying tests to check for the previously aberrant behaviour (in https://github.com/jupyter/notebook/issues/759 and https://github.com/jupyter/notebook/issues/980), but that assumes that we're still expanding our test suite. In other cases (e.g., https://github.com/jupyter/notebook/pull/2048) it was decided that tests weren't required. This seems like a particularly precarious case (as it's a \"bugfix\" rather than a \"feature request\") and so if there _is_ any planned further expansion of our test suite, then this would merit inclusion.\r\n\r\n3. If this _is_ allowing `\\(` `\\)` as delimiters (nb: I don't think it is), can someone explain why this is ok but other PRs that seemed to try to do something similar weren't (e.g., https://github.com/jupyter/notebook/pull/1935 &  https://github.com/jupyter/nbconvert/issues/477 )? I'm not opposed to including it in theory, but it strictly speaking is a departure from the the commonmark approach as quoted previously by @rgbkrk: \r\n\r\n> [the problem with that syntax is that `\\[` and `\\(` already have clearly defined meanings: they are escaped `[` and `(` characters, and it is very important that there be a way to escape these characters in certain circumstances](https://talk.commonmark.org/t/mathematics-extension/457/17)\r\n\r\nI think this observation is unrelated to this PR beyond from clarifying a point about when certain syntaxes are valid or invalid. However, if we wanted to allow `\\[` after two new lines (i.e., `\\n\\n\\\\\\[`, a `\\[` with only a blank above it\u2026) which I believe is currently needed for the `\\begin{` syntax to be detected, that could be fine. If you wanted to get back the `\\[` escapement, then you just include a space in the previous line, nbd. But, I'm hard pressed to think of a way to allow `\\(` and the escapement of `(` at the same time (since it is intended to be \"inline\" mathematics no whitespace can be used to distinguish it cleanly). Simpler comment: this should also cover `\\[` and `\\]` (by indirectly including `\\\\[` and `\\\\]` in the parsing code in places that are equivalent to the current `\\\\(` `\\\\)`).  @joined - thank you for taking the time to open a PR and write out a very complete description of the problem.\r\n\r\nThank you @michaelpacer for the incredible amount of detail and care you're putting into standardization on the format. Happy you're handling that. I can't speak much to the changes here today, so I'll have to come back to this. I can't be a blocker though, I live it in yours and @blink1073's hands. > If this is allowing \\\\( \\\\) as delimiters (nb: I don't think it is), can someone explain why this is ok but other PRs that seemed to try to do something similar weren't \r\n\r\n@rgbkrk's comment that you quoted makes sense to me (I don't remember the earlier PRs on the same subject), and thus I don't think that we should support `\\(` and `\\)` as math delimiters. I don't recall us ever indicating that they were supported delimiters, and we don't try to support all Latex syntax. @takluyver, sounds fair to me. I incorporated your feedback, I hope I got it right.\r\n\r\nThanks for clarifying the confusion with `\\\\(` and `\\(`, I now realise better why the first one was chosen as the delimiter.\r\n\r\nAnd since you are discussing about it, no, I never attempted to add the support to `\\(` as math delimiter. @takluyver are you ok merging this without tests like before? \r\n\r\nIf so this looks good to me, though a comment explaining the last replace call & the new function would be useful for future debugging. Not a blocker though. This goes beyond just fixing #980, and so is in no way blocking\u2026\r\n\r\n@joined can you explain why `$` is given a special value as `inline`? I can't see any reason, but if there is, is that something that should also apply to `\\\\\\\\\\(` & `\\\\\\\\\\)` since those are also inline math delimiters? If there's no reason, would you just replace the use of that variable to instead be a hardcoded string like the rest of the delimiters? K nvm, I just made that change. \r\n\r\nIt's small enough of a difference that, if the tests pass, I'll merge, as it would seem to leave everything else untouched and that LGTM.  I want to add that I am grateful for the work everyone has put in here, thank you @joined for providing this fix, and for everyone else (especially @michaelpacer) for the reviews. So I'm not trying to pick on you, I just don't know how else to push back against what I think is a bad policy of merging features or fixes which do not have tests.  @ivanov I understand your concerns \u2014 would you be able to put some cycles into fixing the js testing suite? That could include us pair coding our way through it since you're in the area. I'm not currently equipped to tackle the general notebook js testing problem in an efficient manner (and don't have the free cycles to teach myself about js testing from scratch). However, I think that I could pick up a lot once I got some intellectual momentum by working with someone who knows the ins and outs of the problem space. As far as I know, the JS test suite mostly works. It breaks because either some tests or some of the utility functions that tests uses end up having race conditions. I've created the [Flaky JavaScript tests omnibus ticket #2243](https://github.com/jupyter/notebook/issues/2243) where we can note down tests which occasionally fail (with any relevant details) so we can address this when it comes up.\r\n\r\n You can read about [writing and running JS tests for the notebook here](https://github.com/ipython/ipython/wiki/Dev:-Testing#javascript-tests).  \r\n\r\nThe starting point for this specific PR would probably be to look at and add to [notebook/tests/notebook/markdown.js](https://github.com/jupyter/notebook/blob/master/notebook/tests/notebook/markdown.js)\r\n\r\nI'm happy to meet with you @michaelpacer, but I hope you can start at the two links above so you can figure out what's missing and improve the docs and have a place to direct others for how to write and run these tests. So I looked into the testing for the rendered LaTeX code, it seems quite messy.\r\n\r\nFor example rendering a cell with the content `$ a*b $, $ c*d $` results in the following:\r\n\r\n````html\r\n<p><span class=\"MathJax_Preview\" style=\"color: inherit;\"></span><span class=\"MathJax\" id=\"MathJax-Element-7-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mo>&amp;#x2217;</mo><mi>b</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-40\" role=\"math\" style=\"width: 2.443em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.027em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.67em 1002.03em 2.682em -999.997em); top: -2.497em; left: 0.003em;\"><span class=\"mrow\" id=\"MathJax-Span-41\"><span class=\"mi\" id=\"MathJax-Span-42\" style=\"font-family: STIXMathJax_Main-italic;\">a</span><span class=\"mo\" id=\"MathJax-Span-43\" style=\"font-family: STIXMathJax_Main; padding-left: 0.241em;\">\u2217</span><span class=\"mi\" id=\"MathJax-Span-44\" style=\"font-family: STIXMathJax_Main-italic; padding-left: 0.241em;\">b</span></span><span style=\"display: inline-block; width: 0px; height: 2.503em;\"></span></span>\r\n    </span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.004em;\"></span></span>\r\n    </nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>a</mi><mo>\u2217</mo><mi>b</mi></math></span></span>\r\n    <script type=\"math/tex\" id=\"MathJax-Element-7\"> a*b </script>, <span class=\"MathJax_Preview\" style=\"color: inherit;\"></span><span class=\"MathJax\" id=\"MathJax-Element-8-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>c</mi><mo>&amp;#x2217;</mo><mi>d</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-45\" role=\"math\" style=\"width: 2.384em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.967em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.67em 1001.97em 2.682em -999.997em); top: -2.497em; left: 0.003em;\"><span class=\"mrow\" id=\"MathJax-Span-46\"><span class=\"mi\" id=\"MathJax-Span-47\" style=\"font-family: STIXMathJax_Main-italic;\">c</span><span class=\"mo\" id=\"MathJax-Span-48\" style=\"font-family: STIXMathJax_Main; padding-left: 0.241em;\">\u2217</span><span class=\"mi\" id=\"MathJax-Span-49\" style=\"font-family: STIXMathJax_Main-italic; padding-left: 0.241em;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span>\r\n    </span><span style=\"display: inline-block; width: 0px; height: 2.503em;\"></span></span>\r\n    </span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.004em;\"></span></span>\r\n    </nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>c</mi><mo>\u2217</mo><mi>d</mi></math></span></span>\r\n    <script type=\"math/tex\" id=\"MathJax-Element-8\"> c*d </script>\r\n</p>\r\n````\r\n\r\nI see many things that could go wrong when making an assertion on the rendered HTML output. For example MathJax attributes incremental ids to each rendered LaTeX group, and the numbering is global to the notebook.\r\n\r\nIt seems also that the inline CSS that MathJax output could change basing on the enviroment making the test fail.\r\n\r\nAny ideas? I agree that trying to assert the whole MathJax generated DOM subtree would be difficult. What about drilling down into parts of it? Or asserting how many mo and mi elements there are in a given test case? (I also just updated the title of the PR to be more descriptive) So I wrote the following code in `notebook/markdown.js` to test the LaTeX rendering with the `$` delimiter, by looking at the number of `mi` and `mo` tags as suggested by @ivanov:\r\n\r\n```javascript\r\n// Test LaTeX rendering with delimiter $\r\noutput = this.evaluate(function () {\r\n    IPython.notebook.to_markdown();\r\n    var cell = IPython.notebook.get_selected_cell();\r\n    cell.set_text('$ a*b $, $ c*d $');\r\n    cell.render();\r\n\r\n    var mi = cell.element[0].getElementsByTagName('mi'),\r\n        mo = cell.element[0].getElementsByTagName('mo');\r\n\r\n    return {\r\n        'n_mi': mi.length > 0 ? mi.length : 0,\r\n        'n_mo': mo.length > 0 ? mo.length : 0\r\n    };\r\n});\r\nthis.test.assertEquals(output, {'n_mi': 4, 'n_mo': 2}, 'LaTeX rendering with delimiter $ works');\r\n```\r\nUnfortunately the test fails with the following output:\r\n```\r\n$ python -m notebook.jstest notebook/markdown.js\r\n[...]\r\nFAIL LaTeX rendering with delimiter $ works\r\n#    type: assertEquals\r\n#    file: /Users/joined/Desktop/Software Architecture/notebook/notebook/tests/notebook/markdown.js\r\n#    subject: {\"n_mi\":0,\"n_mo\":0}\r\n#    expected: {\"n_mi\":4,\"n_mo\":2}\r\n[...]\r\n```\r\nBy checking the HTML contents of the rendered cell as seen by CasperJS with `console.log`  this is what I get:\r\n```html\r\n<div class=\"text_cell_render rendered_html\" tabindex=\"-1\"><p>$ a*b $, $ c*d $</p>\\n</div>\r\n```\r\nSo it looks like MathJax doesn't render the cell, even if calling `cell.render()` should trigger it.\r\n\r\nAny ideas?\r\n\r\n-----\r\n\r\n### Update\r\nWell, I now realise that the problem is that MathJax rendering is asynchronous. I guess it's necessary to trigger an event when the MathJax rendering is completed (there doesn't seem to be already any event triggered) and then use CasperJS's `waitFor` to wait for that event to be triggered before evaluating the contents of the rendered cell.\r\n\r\nIt seems that [the way to go](https://groups.google.com/forum/#!topic/mathjax-users/TCzNZWHskQ4) to trigger an event after the cell has rendered is to push the trigger function to the MathJax Queue just after having queued the rendering.\r\n\r\nMaybe [here](https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/js/cell.js#L271:L273) instead of passing only the element I can pass the entire `this` object to the `typeset` function and then instead of triggering `rendered.MarkdownCell` from [here](https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/js/textcell.js#L431) I can change the `typeset` function to do it, like so\r\n```js\r\nvar typeset = function(cell) {\r\n    var $el = cell.element.jquery ? cell.element : $(cell.element);\r\n\r\n    if(!window.MathJax){\r\n        return;\r\n    }\r\n    $el.each(function(){\r\n        // MathJax takes a DOM node: $.each makes `this` the context\r\n        MathJax.Hub.Queue([\"Typeset\", MathJax.Hub, this]);\r\n        MathJax.Hub.Queue(cell.events.trigger(\"rendered.MarkdownCell\", {'cell': cell}));\r\n    });\r\n};\r\n\r\n```\r\n(I don't see the reason for returning the `MathJax.Hub.Queue` objects, the return value doesn't seem to be used anywhere. I also don't see the reason for the second `text` argument of the function, because it's never called with a second parameter)\r\n\r\nThoughts? To be honest I feel like this is getting a bit bigger than expected and I think this kind of changes are better made by someone that has worked before with the codebase. Thank you a bunch for looking more into this, @joined, this will help us make progress. I met with @michaelpacer to get him up to speed on the javascript testing stuff earlier this week. We'll get there. Fix on jupyterlab with tests: https://github.com/jupyterlab/jupyterlab/pull/1846 @michaelpacer Let me know what I can do to help get this merged! Test added and passing for a case confirmed to fail on master. Thanks, @michaelpacer! Also, this closes #759. Are we ready to merge!? Thank you @joined, @michaelpacer, and all the reviewers","That doesn't look familiar. Can you show the bottom of the traceback it gives?\r\n\r\n(Preferably copy and paste errors as text rather than screenshots - it's easier to read and it means people can search based on the error message. You can copy text in the command prompt from the right click menu) hey @takluyver here's the error:\r\n\r\nC:\\Users\\MANAN>jupyter notebook\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\MANAN\\Anaconda3\\lib\\site-packages\\tornado\\platform\\common.py\", line 44, in __init__\r\n    self.writer.connect(connect_address)\r\nTimeoutError: [WinError 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\MANAN\\Anaconda3\\Scripts\\jupyter-notebook-script.py\", line 5, in <module>\r\n    sys.exit(notebook.notebookapp.main())\r\n  File \"C:\\Users\\MANAN\\Anaconda3\\lib\\site-packages\\jupyter_core\\application.py\", line 267, in launch_instance\r\n    return super(JupyterApp, cls).launch_instance(argv=argv, **kwargs)\r\n  File \"C:\\Users\\MANAN\\Anaconda3\\lib\\site-packages\\traitlets\\config\\application.py\", line 657, in launch_instance\r\n    app.initialize(argv)\r\n  File \"<decorator-gen-7>\", line 2, in initialize\r\n  File \"C:\\Users\\MANAN\\Anaconda3\\lib\\site-packages\\traitlets\\config\\application.py\", line 87, in catch_config_error\r\n    return method(app, *args, **kwargs)\r\n  File \"C:\\Users\\MANAN\\Anaconda3\\lib\\site-packages\\notebook\\notebookapp.py\", line 1142, in initialize\r\n    self.init_webapp()\r\n  File \"C:\\Users\\MANAN\\Anaconda3\\lib\\site-packages\\notebook\\notebookapp.py\", line 983, in init_webapp\r\n    self.http_server.listen(port, self.ip)\r\n  File \"C:\\Users\\MANAN\\Anaconda3\\lib\\site-packages\\tornado\\tcpserver.py\", line 127, in listen\r\n    self.add_sockets(sockets)\r\n  File \"C:\\Users\\MANAN\\Anaconda3\\lib\\site-packages\\tornado\\tcpserver.py\", line 139, in add_sockets\r\n    self.io_loop = IOLoop.current()\r\n  File \"C:\\Users\\MANAN\\Anaconda3\\lib\\site-packages\\tornado\\ioloop.py\", line 213, in current\r\n    return IOLoop.instance()\r\n  File \"C:\\Users\\MANAN\\Anaconda3\\lib\\site-packages\\tornado\\ioloop.py\", line 161, in instance\r\n    IOLoop._instance = IOLoop()\r\n  File \"C:\\Users\\MANAN\\Anaconda3\\lib\\site-packages\\tornado\\util.py\", line 278, in __new__\r\n    instance.initialize(*args, **init_kwargs)\r\n  File \"C:\\Users\\MANAN\\Anaconda3\\lib\\site-packages\\zmq\\eventloop\\ioloop.py\", line 139, in initialize\r\n    super(ZMQIOLoop, self).initialize(impl=impl, **kwargs)\r\n  File \"C:\\Users\\MANAN\\Anaconda3\\lib\\site-packages\\tornado\\ioloop.py\", line 705, in initialize\r\n    self._waker = Waker()\r\n  File \"C:\\Users\\MANAN\\Anaconda3\\lib\\site-packages\\tornado\\platform\\common.py\", line 48, in __init__\r\n    detail[0] != errno.WSAEADDRINUSE):\r\nTypeError: 'TimeoutError' object is not subscriptable\r\n\r\nC:\\Users\\MANAN> It sounds a bit similar to #1936, though it's a slightly different error message. Is it possible there's some other security software on the machine, or that you couldn't fully disable the one you mentioned? @takluyver  Well it sounds similar to many such queries on stackoverflow as well but none of them are same as this unfortunately.\r\n\r\nYes, I have QuickHeal Antivirus installed in my system on top of the default windows firewall. I disabled both of them completely ( I am sure about this since I have installed many more applications by disabling the AV in similar fashion ).\r\nAlso, I installed virtual machine, loaded ubuntu, installed (with AV turned ON) anaconda and tried starting jupyter notebook. Surprisingly, it worked all fine on ubuntu. The issue is solved. I instead of disabling my AV, uninstalled it and then it worked for me. After installation and first run of jupyter notebook, I reinstalled my AV and still worked fine. So, my issue is resolved. We can close this issue. Thank-you @takluyver for the help and support provided!","That's weird. Is the notebook you're using it on particularly long? Do you have an example that we can test to try to reproduce it? Have you got time to try with master? Actually, easier than trying with master, you can test 5.0 beta1 using:\r\n\r\n```\r\npip install --upgrade --pre notebook\r\n``` yeah, it's quite long - at least longer than the usual ones I worked on ...so maybe that's the reason \r\nBut still, I find weird that it takes so much for just find and replace...\r\n\r\n(I will work with the beta version and see how it goes) Thanks. It is a bug if it's noticeably slow on any notebook that's a practical size to work with, but it's quite possible that it has some abysmal performance characteristics that we didn't test. f&r  seems to work fine in the beta version \r\n\r\n(I appreciate the fact for instance, that _by default_ it looks into the active cell - that was a smart move ;) )\r\n\r\n(on the other hand, can we already give feedbacks on the _beta version_ with _new issues_?) > f&r seems to work fine in the beta version\r\n\r\nGreat, thanks. :-)\r\n\r\n> (on the other hand, can we already give feedbacks on the beta version with new issues?)\r\n\r\nAbsolutely, yes. Hi, \r\n\r\nit just took ~ 1 min to replace a string in 13 instances - too long... - and  fan speed of my laptop (mac) increased too (clearly cpu overload, I would say...)\r\n\r\n(the notebook is quite heavy - for an average notebook: ~ 6.9 MB)\r\n With the 5.0 beta? Is the notebook something you're willing to share so we can experiment with it? Or can you reproduce it with another notebook you're prepared to share? (yes, on the beta v)\r\n\r\nok..I will see in the next weeks how/if I can reproduce the issue on other notebooks and browsers Added to 5.0 milestone so we at least have a look at it - it can be bumped if it's not easy to fix. I'm not able to reproduce, so I'm bumping to 5.1. \r\n\r\n@ggrrll Can you provide an example notebook (as a Gist) that we can use to reproduce?  sorry, I don't have something I can share yet...\r\n(If you didn't encounter the same issue in heavy notebooks (as I said, >~ 7 MB), I wouldn't mind if you prefer to close the issue - I will post eventually something, if/when I will have a reproducible example I unfortunately don't have any example notebook that large. Let's close this for now and please do reopen if you can provide a reproducible example.","@SylvainCorlay ","First Open Source commit working at hackIllinois under @willingc  Congrats @nickylimjj for your first commit to Jupyter Notebook at the Hack Illinois event. :cake:","See [Python 3 documentation](https://docs.python.org/3/library/contextlib.html#contextlib.redirect_stdout), `redirect_stdout` is only in python 3.4 and above. (Tip these info are always at the end of the section).\r\n\r\nCLosing as there is not much we can do.\r\n\r\nThanks.","Let me rephrase, I think I have issues understanding:\r\n\r\n> View is only shown for file types that a users has no other way of viewing (only HTML for now).\r\n\r\nView is shown only for type for which the default action (click on the link), edit the file. HTML only for now.\r\n\r\nThat means you can't view a txt file (I think we should be able to, but faire enough for 5.0, it's always easy to add later, hard to remove). And you can't only \"see\" and ipynb.  \r\n\r\n> Edit is shown unless we know it is a file type that we can't edit (pdf, png, docx, xls, etc.)\r\n\r\n `ipynb` is an  exception (3rd point). That seem also inconsistent with the rest but fair. If the \"default\" for `txt` is edit, then you should not show `edit` either, if I follow your reasoning correctly.\r\n\r\nDid I get things wrong or misunderstood ?\r\n\r\n If you give me a couple of days I'd like to rethink how we talk about these things and clearly write how we decide whether a filtype can be editted viewed. \r\n\r\nI think it will be better for us to understand each other, and to write it in our docs. \r\n\r\nI'm sure by clearly introducing what \"viewing\" and \"editing\" mean plus the concept of \"default action\" (ie clicking on the file link), we can clearly communicate what should do which when. \r\n\r\nThough ?\r\n\r\n Sure!\n\nThe way we have handled this in JupyterLab follow the standard Operation\nSystem model:\n\n* We track things by file extension\n* There is a registry of handlers/apps/activities that register as handlers\nfor a set of file extensions.\n* There is a default handlers for each file extension.\n* The default handler is used when the user selects (click or double click)\non the file in the file browser.\n* Alternate handlers are available in a context menu.\n\nI don't think it is worth implementing all of that in classic notebook, but\nthe model might help show the way to proceed in notebook.\n\nCheers,\n\nBrian\n\nOn Sat, Feb 25, 2017 at 8:16 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> If you give me a couple of days I'd like to rethink how we talk about\n> these things and clearly write how we decide whether a filtype can be\n> editted viewed.\n>\n> I think it will be better for us to understand each other, and to write it\n> in our docs.\n>\n> I'm sure by clearly introducing what \"viewing\" and \"editing\" mean plus the\n> concept of \"default action\" (ie clicking on the file link), we can clearly\n> communicate what should do which when.\n>\n> Though ?\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/2229#issuecomment-282531824>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0A9_nKcV_odAVVSHrriPQVPLAqCzks5rgPy6gaJpZM4MMN6B>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Ok, I think this behavior is inconsistent as well. Let's try to dissect things. \r\n\r\n- There are items we know what to do with\r\n   - items we can edit\r\n   - items we can't\r\n   - item we default to edit\r\n   - item w default to \"view\"\r\n   \r\n- Item we don't\r\n\r\nObservations:\r\n  - \"View\" is handled by the browser so in most case it's something \"safe\". I think that (A) all items we don't know what to do with should have the _possibility_ to be viewed. (example `config.yaml`, `cat.gifv`).\r\n  - \"Edit\" make sens only on text files only. In general (B) \"edit\" should not be the default action for most files. \r\n  - Though  (C) \"Edit\" should be triggerable by advanced users (unless we know we should not). Example `foo.zorblax`, `conf.toml`\r\n  - (D) \"Edit\" does not make sens for some filetypes, thus should not be available (`'png`, `.jpeg`)\r\n\r\nQuestion (E):\r\n   - If the default action is X {in edit/view} should the X button be shown ?\r\n\r\n\r\nProposition:\r\n   - if ipynb:\r\n      - default link edit\r\n      - no button in toolbar.\r\n   - If known type, editable (txt, json, yaml, py, rb):\r\n      - default link open edit, \r\n      - button in toolbar show view\r\n   - if known type not editable: (, png, gif, zip)\r\n      - default link open view\r\n      - no button in toolbar\r\n   - if unknown type ('.zorblax, toml, cson, ')\r\n      - default link open \"view\"\r\n      - button in the toolbar show \"Edit\". \r\n\r\n\r\n\r\n  \r\n\r\n That sounds sensible to me @Carreau.  Thanks Steve, I'll let Brian have a say and to implement it, if he can't I\ncan have a take at it.\n\nOn Sun, Feb 26, 2017 at 12:53 PM, Steven Silvester <notifications@github.com\n> wrote:\n\n> That sounds sensible to me @Carreau <https://github.com/Carreau>.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/2229#issuecomment-282586580>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUez-rUrO3GYJmtEKD_v4bucE6Lyr0Oks5rgeZfgaJpZM4MMN6B>\n> .\n>\n @Carreau I think that sounds good.\r\n\r\nTwo minor questions:\r\n\r\nFor the known type, editable case. Would the \"View\" button open it in the browser (not our own text editor)? That is one good usage case that isn't covered by the behavior in my PR.\r\n\r\nWould you use the same logic for the \"View\" of unknown types (open in browser)?\r\n\r\n@Carreau I am back on teaching today, so if you can take over my PR that would be really great. Thanks for thinking through this stuff! Broadly sounds sensible, but a couple of questions:\r\n\r\n> If known type, editable (txt, json, yaml, py, rb): \r\n> - button in toolbar show view\r\n\r\nI think it would be confusing if I select e.g. `.cson` and see an *Edit* button, but when I select `.txt` I don't. If we have a button that opens the text editor, it seems weird not to show it when files are likely to be text.\r\n\r\nWhat do you think should happen if I select files of multiple types simultaneously? E.g. if I select a `.ipynb`, a `.txt`, a `.png` and a `.cson`, presumably both *Edit* and *View* buttons will be visible? What happens if I click on each button? How many pages open up? Does the ipynb open in notebook view or in text view?\r\n\r\nAgain, it would seem weird if clicking *Edit* didn't open the editor for the `.txt` file, but it would also seem weird if the button wasn't there with only `.txt` selected, but was with `.txt` and `.cson`.\r\n\r\nFinally, anything based on the extension is a guess anyway - you can make `foo.png` a text file and `bar.txt` a binary file. I don't think we need to worry too much about those specific cases, but maybe it's helpful to know that we can't get this 100% right, because it feels like we're overthinking it a bit. Maybe we need a fuzzy logic system (this file is 94% likely to contain text...) hooked up to the CSS opacity of the view & edit buttons. :-P There is this: https://github.com/audreyr/binaryornot Yep, that's what we are using in Spyder now, but it depends on the `chardet` library. I want to avoid binary guessing that would require adding handler on server\nand peaking at files.\n\nThomas, I agree, but we can't guess all the exts, and edit would be there\nonly for files which default action is view. It's not as if everyone is\nusing check box then \"edit\" button right ?\n\nWe need to be reasonable and acknowledge that we're currently bikeshedding\non an UX that is rarely used.\n\nSame for multiple files selected. I thought that edit/view were anyway\ndisable on multiple selection.\n\nAnd we can improve later, but let's already get something out, and if 1% of\nthe 1% or our users using this complain we can improve by making the list\nof extensions configurable maybe.\n\nOn Feb 27, 2017 07:54, \"Carlos Cordoba\" <notifications@github.com> wrote:\n\n> Yep, that's what we are using in Spyder now, but it depends on the chardet\n> library.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/2229#issuecomment-282760308>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUez6-opkxXlbX-cOG8BCUgMTeybgPrks5rgvGvgaJpZM4MMN6B>\n> .\n>\n > I want to avoid binary guessing that would require adding handler on server and peaking at files.\r\n\r\nYep, I don't want listing the files to involve opening each one.\r\n\r\n> We need to be reasonable and acknowledge that we're currently bikeshedding on an UX that is rarely used.\r\n\r\nYep - that was what I was trying to say at the end of my last comment.\r\n\r\n> Same for multiple files selected. I thought that edit/view were anyway disable on multiple selection.\r\n\r\nThat was the plan at one point, but it got changed. > That was the plan at one point, but it got changed.\r\n\r\nWell it's going to be un-changed because anyway it does not work. if you have multiple files selected, clicking on edit or view only open one.... So that's settled.  Also the regular expression was not matching at the end of the file name....  ![crazy-default](https://cloud.githubusercontent.com/assets/335567/23373126/72c31b46-fcd3-11e6-8d5a-a8c082cefa6c.gif)\r\n\r\nHere is how it looks like. the `-default-to-...` in the name is what the state of this PR does. \r\n\r\nit also remove the \"Edit\"/\"View\" button in multiple selections they were not working and would only open one tab. And use str/split instead of crazy regexes that were matching the middle of the files names.  Nicely done, @Carreau, @ellisonbg. Matthias, thanks for taking this one over! I think this is a nice\nimprovement over what I had. Getting close!!!\n\nOn Tue, Feb 28, 2017 at 4:12 AM, Steven Silvester <notifications@github.com>\nwrote:\n\n> Nicely done, @Carreau <https://github.com/Carreau>, @ellisonbg\n> <https://github.com/ellisonbg>.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/2229#issuecomment-283023438>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0MaMMeigMPh64SeAnZUngvBqq8hxks5rhA8ggaJpZM4MMN6B>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Matthias, thanks for taking this one over! I think this is a nice\r\n> improvement over what I had. Getting close!!!\r\n\r\nThanks for getting the ball rolling.","Hm. This may be a configuration or environment issue. I can list, create, and open unicode filenames without issue on IPython 3.x and 4.x on both Python 2 and 3. I am on OS X 10.10.4 with Pythons from conda.\n\n<img width=\"324\" alt=\"screen shot 2015-07-22 at 18 22 26\" src=\"https://cloud.githubusercontent.com/assets/151929/8841123/c3fe443e-309e-11e5-9838-ee57b2d9f896.PNG\">\n Thanks! The environment for the notebook server spawned by JupyterHub could easily be the problem. It appears that `LANG` is not set by JupyterHub. \n\nWithin the world of the notebook server, the Python 3 interpreter (Ubuntu 14.04.1 LTS `/usr/bin/python3`) just doesn't like Unicode in filenames. `open('\u00b5m.txt', 'w').write('hi')` raises a `UnicodeEncodeError`. But when I run the same interpreter in my login environment, there's no problem... until I take away its `LANG=en_US.UTF-8`. \n\nStrangely I cannot reproduce this with Python 3 from Anaconda on my Mac, even if I deliberately give it `LANG=en_US.ASCII`.\n I think that makes sense - it's using the locale encoding to convert filenames to bytes. I think it only comes up on Linux, because OS X and Windows define how filenames are encoded independent of the locale.\n\nJupyterhub should probably ensure that the single-user server is started with appropriate locale settings so that it treats the filesystem as UTF-8.\n\nThe notebook server should fail more gracefully when there's a unicode problem with a filename. I'll have a look at that.\n @nkeim what version of JupyterHub? The Hub passes its LANG, LC env variables to the notebook children by default. Do you have any custom config?\n Deferring to @ellisonbg for the JupyterHub version \u2014 he maintains it here.\n @nkeim in that case, I know exactly what the problem is. The launch config (in supervisord) is not setting the LANG environment variable. This is in `/etc/supervisor/conf.d/jupyterhub.conf` The `environment` line should add:\n\n```\nenvironment=LANG=en_US.UTF-8,LC_ALL=en_US.UTF-8,...\n```\n\nto ensure that server processes get the right env.\n @minrk Great, thanks!\n #229 should stop it from breaking the rest of the list in such cases.\n","oops will fix\n\nOn Sat, Feb 25, 2017 at 7:51 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> *@Carreau* requested changes on this pull request.\n> ------------------------------\n>\n> In notebook/static/notebook/less/tagbar.less\n> <https://github.com/jupyter/notebook/pull/2230#discussion_r103094768>:\n>\n> > @@ -48,7 +48,8 @@\n>      width: inherit;\n>      font-size: inherit;\n>      height: 22px;\n> -    padding: 0px;\n> +\t\tline-height: 22px;\n>\n> s/Tab/space/ I guess.\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/2230#pullrequestreview-23872855>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0Bdl43LpJvVNbzzG6U8w9P1iIHovks5rgPbDgaJpZM4MMOA9>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > oops will fix\r\n\r\nActually forgot I could do it from within github because of \"allow edits from maintainers\". So I did it. \r\nFeel free to check my change and merge.  Awesome, thanks! Merging.","Regarding line-height / padding. \r\n\r\nCurrent master:\r\n\r\n![screenshot from 2017-02-26 12-25-29](https://cloud.githubusercontent.com/assets/1020496/23339286/8b787a46-fc1f-11e6-8e4d-6f3764148c4b.png)\r\n\r\nWith this PR, it set line-height from 1.0 to 'normal', because otherwise multi-line cells looked weird (see the issue), but that also causes a normal table without wrapped cells look much more spacious (on my laptop: text is 20px height with 2x 6px padding -> 32 px):\r\n\r\n![screenshot from 2017-02-26 12-23-45](https://cloud.githubusercontent.com/assets/1020496/23339307/d4ded73e-fc1f-11e6-8af9-e4d231bd3aba.png)\r\n\r\nIf I adjust padding from 0.5 to 0.3, it becomes more similar to master (same text height of 20px but with 2x 3.6px padding -> 27.2 px):\r\n\r\n![screenshot from 2017-02-26 12-38-57](https://cloud.githubusercontent.com/assets/1020496/23339363/ed04d218-fc20-11e6-91d3-a86c80d6156e.png)\r\n\r\nOn master it has a text line height of 12 px, with padding of 2x 6px, giving 24px in total.\r\n Thanks! Merging... @ellisonbg Thanks for merging! \r\n\r\nI personally like the one above with a bit less padding (third figure) to have it more similar with master before this PR (first picture), but that is more a matter of personal taste, so leave that decision up to you :-) \r\n(and I think such small adjustments can always be made after in a next small release after using it a bit more in practice?) Yep, I think it's totally fine to make adjustments in 5.1","Thanks @louise-davies :cookie: ","What about show the same than in the dashboard with the folder icon ? \r\n![screen shot 2017-02-27 at 10 05 18](https://cloud.githubusercontent.com/assets/335567/23373315/52636c42-fcd4-11e6-9715-0138e197043c.png)\r\n I may be wrong, but I don't think that icon is widely recognised as 'notebook server root directory'.\r\n\r\nIf we can figure out the points above, I think we should do this for 5.0, and keep thinking about it for the future. I get the impression that our system of only allowing access to the starting folder and subfolders is not well understood. Maybe we should abandon it entirely - though I'm reluctant to do that, as even if it's a poor security measure by itself, it may make it harder to exploit flaws in other security measures - or maybe we should think about ways to make it clearer what's going on. Nice! A few comments:\r\n\r\n* You can get the layout you want using a flexbox hbox ( sorry I can't help code it, swamped with teaching...)\r\n* It is fine to expose the root of the notebook server, just not the full system path, which we do in general hide from the user. I like Matthias's idea of showing the root of the notebook server in the same manner as the file browser itself. I know it isn't standard, but at least consistent.\r\n* Even for non file system content managers, they will still have the notion of paths, so I think they would show the same type of thing as the file browser does.\r\n* I am fine using forward slashes even on windows. > It is fine to expose the root of the notebook server, just not the full system path\r\n\r\nI don't understand the distinction here. Is it OK for the body tag's data attributes to show that the server is running in `/home/takluyver`? If so, I'm not sure what you mean about the 'full system path'. @takluyver I think the issue is about the *API* path, not *filesystem* path. So rather than `/home/takluyver/foo/ [input]` it would show `/foo/ [input]` if the notebook server is running in `/home/takluyver` and the dialog is at the /tree/foo/ URL. ...which is the `notebookPath` data already on the page, I believe. Right, it already puts the API path of the directory in the input box where you can edit it. The issue (#2204) is that it's not very clear that you need a path where `/` is the root of the notebook server. This is my attempt to make that clearer. We shouldn't leak information about the filesystem above the directory\nwhere the notebook server was started. So if the notebook server was\nstarted in /home/myself and the user was currently in\n/home/myself/mynotebooks, we would only show /mynotebooks\n\nOn Wed, Mar 1, 2017 at 7:15 AM, Thomas Kluyver <notifications@github.com>\nwrote:\n\n> Right, it already puts the API path of the directory in the input box\n> where you can edit it. The issue (#2204\n> <https://github.com/jupyter/notebook/issues/2204>) is that it's not very\n> clear that you need a path where / is the root of the notebook server.\n> This is my attempt to make that clearer.\n>\n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/2234#issuecomment-283367922>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0JeTf-9sBSvEW03TdLagAy32jiLiks5rhYuZgaJpZM4MNWV8>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Arguably the user is already logged in, so it does not matter much, and mot of the time have access to this info via the kernel.\r\n\r\nRe-arguably against myself, the kernel may not be on the same machine, and the user might have a phone user home. \r\n\r\nMaybe is root is home show `~/` ? On Github, the \"root path\" is the root of the repo and the path is shown without a leading slash, why not adopt that for this path as well?\r\n\r\n<image src=\"https://cloud.githubusercontent.com/assets/2096628/23479159/2d73080a-fe89-11e6-9970-d1ff567a47bb.png\" width=300>\r\n I am fine leaving out the leading slash.\n\nOn Wed, Mar 1, 2017 at 12:13 PM, Steven Silvester <notifications@github.com>\nwrote:\n\n> On Github, the \"root path\" is the root of the repo and the path is shown\n> without a leading slash, why not adopt that for this path as well?\n>\n> [image: image]\n> <https://cloud.githubusercontent.com/assets/2096628/23479159/2d73080a-fe89-11e6-9970-d1ff567a47bb.png>\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/2234#issuecomment-283455856>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0NR4sg1Zbdc52pcmOiSoyZ8B8Ptuks5rhdFdgaJpZM4MNWV8>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n 1. I'm not clear why the root directory of the server should be secret.\r\n  - So long as our other security measures are working, only the authenticated user can see this anyway; we're not broadcasting it to the internet.\r\n  - We avoid *serving files* from outside the server root directory to make it marginally trickier for someone who can bypass those security mechanisms to read e.g. ssh keys. This has always been somewhat doubtful as a security mechanism, and I don't think that it's worth 'protecting' the information of which directory the server is serving like this.\r\n  - It's no less protected than the list of files in that directory, which seems more likely to contain sensitive information than the path.\r\n  - +1 to compressing the user's home directory to `~` as @Carreau suggested - does that make it more tolerable?\r\n2. We already show the path from the server root directory in the move dialog. We're discussing this because we're concerned that it's not obvious to users how these paths work. I think showing the server root in the dialog too makes it significantly clearer; I don't think the absence of a leading slash makes much difference. We should make sure to do something sensible for the cases where there is no `server_root` directory, e.g. when using pgcontents or GDrive. The prefix should probably come from the ContentsManager, not the Application. For example:\r\n\r\n1. use `ContentsManager.root_display` (or a better name)\r\n2. base `ContentsManager.root_display = '/'`\r\n3. `FileContentsManager.root_display = self.root_dir` by default\r\n3. allow hiding by overriding `.root_display` in config\r\n\r\nI like showing the file path in the dialog, and +1 to collapsing $HOME to ~. Another (simpler) option to the above is to use `.root_dir` always, and not allow FileContentsManagers to override display, only ensure that the base ContentsManager has `.root_dir = '/'`. Good points!\n\nOn Sat, Mar 4, 2017 at 6:10 PM, Min RK <notifications@github.com> wrote:\n\n> We should make sure to do something sensible for the cases where there is\n> no server_root directory, e.g. when using pgcontents or GDrive. The\n> prefix should probably come from the ContentsManager, not the Application.\n> For example:\n>\n>    1. use ContentsManager.root_display (or a better name)\n>    2. base ContentsManager.root_display = '/'\n>    3. FileContentsManager.root_display = self.root_dir by default\n>    4. allow hiding by overriding .root_display in config\n>\n> I like showing the file path in the dialog, and +1 to collapsing $HOME to\n> ~.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/2234#issuecomment-284199572>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0IVn1ybuxwabloUOtQkBqRuRtAP-ks5rihmjgaJpZM4MNWV8>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I'm away this week, and have very limited time to work on anything, so please feel free to move this forwards without me. From what I've gathered from this discussion, we have 2 options:\r\n\r\n* The folder icon root: \r\n![image](https://cloud.githubusercontent.com/assets/512354/23689996/2b3e44de-0373-11e7-8895-90e5efdc36c3.png)\r\n* `os.path.basename(os.path.normpath(self.settings['server_root_dir']))` which will get the server root path from `ContentsManager` like @minrk proposed and will trim the rest of the absolute path: \r\n![image](https://cloud.githubusercontent.com/assets/512354/23690054/9d285e4a-0373-11e7-8cf6-52cedcaff5e2.png)\r\n\r\nI also updated the styles to use flexbox vs. table like @ellisonbg proposed. \r\n > Another (simpler) option to the above is to use `.root_dir` always, and not allow FileContentsManagers to override display, only ensure that the base ContentsManager has `.root_dir = '/'`.\r\n\r\n@minrk Let me know if there's a more elegant way to do this. @gnestor we'll need `ContentsManager.root_dir` defined (probably  just `'/'`) on the base class so that non-file CMs don't fail with AttributeErrors. Ok, would that just require adding something like this to https://github.com/jupyter/notebook/blob/master/notebook/services/contents/manager.py#L35:\r\n\r\n```py\r\nroot_dir = Unicode(config=True)\r\n\r\n    @default('root_dir')\r\n    def _default_root_dir(self):\r\n        return '/'\r\n```\r\n\r\n @gnestor yes, but it can be simpler. You only need `@default` for dynamically-generated defaults. Simple defaults can be declared in the constructor:\r\n\r\n\r\n```python\r\nroot_dir = Unicode('/', config=True)\r\n``` @minrk Ready for final review Thanks!","I take it the bit about needing CodeMirror master is no longer true?\r\n\r\nI'd support enabling code folding by default, but probably leave it to users to configure a shortcut for it. It is better to link to the generated documentation than to the old Wiki:\r\nhttp://jupyter-contrib-nbextensions.readthedocs.io/en/latest/nbextensions/codefolding/readme.html\r\n\r\nIn addition to enabling codefolding in CodeMirror itself, the extension provides saving the folded state in notebook metadata, and an nbconvert preprocessor.  Thanks @juhasch :-)\r\n\r\nFor putting it in core, I think I'd hold off on storing the state in metadata until we've worked out the 'companion file' question, giving us a place to store metadata that you don't look at in version control. We're going to start using more metadata fields in nteract, albeit on a namespace (nteract). For small fields like these I'm not worried. It's the base64 encoded images that I want to optionally live separately as a relative asset or by absolute URL. Small metadata is less annoying, but it can be quite changeable, which is annoying for version control. Yeah what I want us to enforce going forward is establishing a schema and version for metadata we introduce: https://github.com/nteract/nteract/issues/1465 I just meant the data itself is changeable, rather than the format. I don't want things like code folding state in version control, any more than I want the last position of my cursor in version control - it makes the diff noisier for little gain. @takluyver alternatively for version control with metadata you can use https://github.com/kynan/nbstripout \r\nI find it works very well Yep, we've made a variety of tools to make notebooks better with version control. I've done [recombinecm](https://github.com/takluyver/recombinecm) and [nbexplode](https://github.com/takluyver/nbexplode), and [nbdime](https://github.com/jupyter/nbdime) is now recommended. But we try to restrict the changeable metadata in the notebook so that you don't *have* to use any of these tools. I understand that people have a variety of different uses, but I feel like\nfor putting notebook files straight into version control the ship sailed\nwhen outputs, especially images, were saved.\n\nOn Fri, 3 Mar 2017, 10:37 Thomas Kluyver, <notifications@github.com> wrote:\n\n> Yep, we've made a variety of tools to make notebooks better with version\n> control. I've done recombinecm <https://github.com/takluyver/recombinecm>\n> and nbexplode <https://github.com/takluyver/nbexplode>, and nbdime\n> <https://github.com/jupyter/nbdime> is now recommended. But we try to\n> restrict the changeable metadata in the notebook so that you don't *have*\n> to use any of these tools.\n>\n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2235#issuecomment-283921808>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAHCsgEmsXiCBidO3bqVY5vBRgBt_BXVks5rh-16gaJpZM4MNzvp>\n> .\n>\n People do put up with it, or commit notebooks without outputs, as you mentioned. I'm keen not to make the situation worse by adding more highly variable metadata, but we have some vague plans taking shape to save two copies of the file - a more version-control friendly file with just inputs and some essential metadata, and a complete file with outputs and more variable metadata.","Have you seen `IPython.display.FileLink`? Thanks! I missed that. It really provides the functionality that I was looking for.\r\n\r\nOf course, it would imo be a nice syntactic sugar to provide a button for downloading the file instead of the right clicking on the file link, but that is a minor issue.","It sounds like you're trying an import in two different installations of Python, or two different environments. Check `sys.executable` to see which Python and environment you're running in, and `sys.path` to see where it looks to import modules.\r\n\r\nPython packages must be installed separately for each copy of Python you use, and if you are using virtualenvs or conda envs, packages must be installed into each environment where you need them. Either the package is not installed in one, or a different version of the package is installed.\r\n\r\nTo install packages to a particular Python installation or environment using pip, you can run it like this:\r\n\r\n```shell\r\npath/to/python -m pip install ...\r\n# Replace path/to/python with the path of the Python executable (sys.executable)\r\n```\r\n\r\nIf you are using conda environments, you can install packages from conda like this:\r\n\r\n```shell\r\nsource activate myenv  # On Windows, just 'activate myenv' (no 'source')\r\nconda install ...\r\n```\r\n\r\n[ This is a saved reply because I answer similar questions often - sorry if it doesn't exactly fit your case ]","That's a warning coming from some of the kernel code. It's hidden by default, but when you reset the warning filters, you'll see it. Terminal IPython doesn't use the code path that causes the warning. Thanks @takluyver. This is new behavior -- the same code did not show the warning in the previous notebook/jupyter version... if I need to temporarily `filterwarnings` in the latest version notebook, how do I return to the original level when I'm done? It's a new warning ;-)\r\n\r\nMaybe try this: https://docs.python.org/3/library/warnings.html#temporarily-suppressing-warnings Yes that works. For reference, here's the code that works with Python 3.6 to temporarily suppress warnings in a notebook, without having to explicitly reset the warning filters when you're done:\r\n\r\n```python\r\nimport warnings\r\nwith warnings.catch_warnings():\r\n    warnings.simplefilter('ignore')\r\n    # do something here and its warning is suppressed\r\n``` I am getting these warnings all in almost all cells. \r\n\r\nNot sure why it happens. Same here. Just updated my python packages to their latest versions and now getting these warning in every cell.  It's especially bad when you connect to a few hundred `ipyparallel` engines and this warning is printed many many times. Same issue here. It started when I updated the python packages as well. Any pointers to this? I'm experiencing this as well in my notebooks. I'm not sure if this is the repository that needs to fix the issue but it seems to be most appropriate.\r\n\r\n@gboeing Do you mind re-opening this so it becomes a bit more visible? Same issue","Need rebase. Will we require traitlets 4.1 for notebook 5.0 ?\n :+1: LGTM\n\nping here if you'd like me to rebase\n > Will we require traitlets 4.1 for notebook 5.0 ?\n\nWe still need to decide on that. And this will likely be super painful to rebase. \nSo I'm going to close. Feel free to resubmit, or reopen. \n","I'm not sure if you mean the notebook file itself, or a file produced by code in your notebook.\r\n\r\nTo save a notebook file in another store, you'd need a custom contentsmanager. There may already be one for HDFS, I don't know. both the notebook file itself and file produced, both of them i want redirect to another store(HDFS).thanks. Can you give me some advise?\r\n@takluyver  @liushaofeng89 there are a few python clients that let you interface with Hadoop, namely [snakebite](https://snakebite.readthedocs.io/en/latest/) and [hdfs3](https://hdfs3.readthedocs.io/en/latest/). If you want notebooks to be written directly to hdfs, you'll need to [write your own contents manager](http://jupyter-notebook.readthedocs.io/en/latest/extending/contents.html#writing-a-custom-contentsmanager).\r\n\r\nFor any files produced, that's up to you (and libraries for that matter) to write to hdfs locations rather than POSIX operations (that go to local disk). @rgbkrk  thanks for your help,i got it!","MathJax and CodeMirror would probably be the things you would have to thin out most for a light version. mathjax.js is in another file. If simply gzip, it's about 400KB. Plus: it is weird that I found some files are gzipped. some are not gzipped. ","You could probably make a custom kernel that doesn't support that extra syntax, but it doesn't work as a security measure - normal Python code can do anything you can do with a shell command. If you're trying to protect the system from users, it's a better bet to run users' notebook servers in containers (e.g. using Docker). I run jupyterhub on Docker. I changed my users shell to a limited one (`lshell`). The jupyter terminal opens the `lshell` but the users can still run `sh` commands within the notebook (the shell backend seems to be setup to `/bin/sh`). Ideally, I would like that backend to be setup to `lshell` as well. Is it possible? At present, no, but I think we'd probably accept a PR for that to follow the `$SHELL` environment variable. The relevant code is here: https://github.com/ipython/ipython/blob/master/IPython/utils/_process_posix.py#L61 @naileakim unless you are running a *heavily* modified IPython, users are going to be able to run shell commands via Python APIs, e.g. `subprocess.Popen(['bash', '-c', '...'])`. Locking down `!` doesn't prevent execution of arbitrary code.\r\n\r\nIf you want to only disable `!`, you can override the `system` method on the InteractiveShell object:\r\n\r\n```python\r\nIn [11]: !ls\r\nfiles\r\n\r\nIn [12]: get_ipython().system = lambda *args: print('! is disabled!')\r\n\r\nIn [13]: !ls\r\n! is disabled!\r\n```","@michaelpacer, commenting so notifications from this get priority.  We started using `travis_retry` on our JS tests on Travis, because we were forever manually restarting failed builds when we suspected a race condition. `travis_retry` re-runs a command if it fails, up to three times. So be aware that you're probably not seeing most of the test failures.\r\n\r\nI'm well aware that this is bad practice too, of course.","The tooltip is still showing up for me, but not in the right place:\r\n\r\n![screenshot from 2017-03-02 14-36-21](https://cloud.githubusercontent.com/assets/327925/23511621/a6252e96-ff55-11e6-8521-91fc61fdad66.png)\r\n\r\nWe should fix this for 5.0 whats is the shortcut to get it ? (still `shift + tab`?) Yep, still shift-tab I think I've worked out what's causing this - when we display the tooltip, we get the location of the current cell so that the tooltip can float over it, but I think that location is coming relative to the wrong parent element. (ok, no rush... - I still get no floating tooltip at all) Are you trying it while scrolled all the way to the top of a notebook? It appears at the top of the document for me, so if I'm scrolled down, I don't see it. #2246 fixes it for me. ah, now I see it :) - should I upgrade `notebook` ? #2246 isn't merged yet, but if you've got time to [install from source](http://jupyter-notebook.readthedocs.io/en/latest/contributing.html#setting-up-a-development-environment) to test it, it would be good to have someone else checking that it fixes the issue.","Fix confirmed, thanks!","I'm not quite sure, but the `jupyter` command is part of the `jupyter_core` package, and `jupyter-console` comes from `jupyter_console`. You may want to try uninstalling and reinstalling those packages. That solved it, thanks!","At a glance, that looks reasonable to me, if you'd like to make it into a PR.","@vidartf when I right-click, the `click()` callback is not called. Do you see this? It doesn't seem right that the 'X' should be the only element on the page with this behavior, in any case (the add tags button next to it doesn't have this). @minrk There has been some changes recently: https://discourse.wicg.io/t/new-event-for-non-primary-button-click/1527, maybe this is not important anymore.","Hi, we haven't yet released 4.0 of the notebook, and there are still kinks to work out for running from git master. I would recommend getting the lates stable version of The notebook, which is IPython 3.2.1.\n Thanks.  I removed all of my ipython installation, and then put it back in using `sudo pip install ipython`.  That brought me back to IPython 3.2.1, as well as a stable version of Jupyter notebook.  It all works now.\n\nThanks for your work and good luck with you development,\nNathaniel\n","> jupyter notebook --help does not show me such option and I dont want to copy paste tokens between devices on my local network.\r\n> \r\n> How can I disable token requirement?\r\n\r\nSet up a password: \r\n\r\nhttp://jupyter-notebook.readthedocs.io/en/latest/public_server.html\r\n\r\n> without requesting for stupid token\r\n\r\nIt's not stupid, it's to prevent random website you visit from executing code on your machine.  Oh, and : \r\n\r\n> Token authentication is enabled. You need to open the notebook server with its first-time login token in the URL, or **enable a password** in order to gain access\r\n\r\nSo that's already in the middle of the explanations. ","Can you describe a bit more the results and what you expected? Thanks. I run:\r\n```\r\n# python -c 'print(\"M\"*455)'\r\n```\r\nAnd I get (notice the line breaks when I copy out of the terminal):\r\n```\r\nMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\r\nMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\r\nMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\r\nMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM\r\n``` I think that's not unusual for terminal emulators, although modern ones (including Gnome terminal, which I use) preserve it without the linebreaks. If you want to chase it up, the terminal component we use is [xterm.js](https://github.com/sourcelair/xterm.js), so that's where it would need to be changed. See maybe sourcelair/xterm.js#404.","Setting and then remembering a password isn't great UX either, unfortunately (it's easier right now, but it's either a small-cost-every-time, or irritation when you can't remember your password, especially if you run notebook servers on several machines).\r\n\r\nOur SHA-hashed password in the config file is also pretty poor, security-wise. we also do have [that](https://github.com/jupyter/notebook/blob/master/tools/secure_notebook.py) to make user life easier. ","*command* means that the shortcut is active in *command mode*, as opposed to *edit mode*. I agree that's not clear, though.","We're still getting Jupyter released - if you're feeling lost with the development version, please install the stable version of IPython, which includes the notebook, using:\n\n```\npip install ipython[notebook]\n```\n\nIt looks like we no longer put `load_extensions()` in the interactive namespace, so now you'll need to do something like:\n\n``` javascript\nrequire(['base/js/utils'],\nfunction(utils) {\n    utils.load_extensions('...');\n});\n```\n","Thanks for the PR!\r\n\r\nThis seems to do the opposite for me (Safari). When new_browser_window=True, it always opens the *same* tab for repeated calls (which I like!), whereas with new_browser_window=False it opens a new tab. Safari might be blocking new window creation, hence the \"if possible\" bit in the docs. From reading [the docs](https://docs.python.org/3/library/webbrowser.html), this might be what I should expect, but the config name makes it surprising that enabling a `new_thing` flag causes it to open *fewer* new things.\r\n\r\nMaybe we should expose the browser.new argument directly, and copy their docs, so pass `1` for window, `2` for tab, etc. e.g.\r\n\r\n```python\r\nwebbrowser_open_new = Integer(2, config=True,\r\n    help=\"\"\"new argument passed to webbrowser.open.\r\n    2 opens a new tab.\r\n    1 opens a new window.\r\n    0 opens in an existing window.\r\n\r\n    See the webbrowser.open docs for details.\r\n    \"\"\"\r\n)\r\n``` This appears sensible, I updated the branch accordingly.\r\n\r\nI'm not sure, whether the `0` option is really relevant here, though. To my understanding, it only has an effect when using the same controller (obtained through `webbrowser.get()`) several times. Or is this what you meant with \"repeated calls\"? Thanks! We'll get this merged as soon as we push out 5.0 final.","Are you in a working directory that has been deleted? No, the current directory still exists. \r\n\r\nBy the way, i am running the browser remotely on a different computer and not the box  where the jupyter notebook is running.\r\n\r\nIn this setup, the notebook where the assignment is being created (in the source folder) i am able to execute commands on the system shell with ! prefix.\r\nBut cannot execute the same command on the release notebook. Pinging @jhamrick - question involving nbgrader. @praveen049 it's possible this might cause an error if you have done the following:\r\n\r\n1. Run `nbgrader assign`\r\n2. Open the release notebook\r\n3. Rerun `nbgrader assign --force`\r\n4. Try to execute cells in the release notebook\r\n\r\nIt should fix the problem to restart the kernel of the release notebook. @jhamrick \r\n\r\nThanks. With --force it's working fine. ","What does `jupyter kernelspec list` show you? You might need to delete an outdated kernelspec.","Have you made a file called `random.py`? If so, it's finding that instead of the normal Python `random` module. Closing because I suspect there's nothing we can do here. Hello!\r\nSorry for the extremely late reply! No, I don't have a random.py file on my computer! Can you, from the same terminal where launching the notebook fails, run `python -c \"import random; print(random)\"`? You may have multiple Python installations; if so, try to ensure that the Python you run for this is the same as the one launching the notebook. Hello,\r\n when I run the command you suggested, I get the same error as when I run Jupyter Notebook. The output is give below.\r\n\r\n```\r\npython -c \"import random; print(random)\"\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"/Users/mayuri/Library/Enthought/Canopy_64bit/User/lib/python2.7/site-packages/numpy/random/__init__.py\", line 99, in <module>\r\n    from .mtrand import *\r\n  File \"numpy.pxd\", line 92, in init mtrand (numpy/random/mtrand/mtrand.c:41017)\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/__init__.py\", line 170, in <module>\r\n    from . import add_newdocs\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/add_newdocs.py\", line 13, in <module>\r\n    from numpy.lib import add_newdoc\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/lib/__init__.py\", line 8, in <module>\r\n    from .type_check import *\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/lib/type_check.py\", line 11, in <module>\r\n    import numpy.core.numeric as _nx\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/core/__init__.py\", line 46, in <module>\r\n    from numpy.testing import Tester\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/testing/__init__.py\", line 13, in <module>\r\n    from .utils import *\r\n  File \"/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/testing/utils.py\", line 15, in <module>\r\n    from tempfile import mkdtemp\r\n  File \"/Applications/Canopy.app/appdata/canopy-1.6.1.3253.macosx-x86_64/Canopy.app/Contents/lib/python2.7/tempfile.py\", line 35, in <module>\r\n    from random import Random as _Random\r\nImportError: cannot import name Random\r\n``` Are you trying to start it from inside the numpy source directory? What do `pwd` and `ls` show you? Could you clarify by what you mean? I usually just launch Jupyter Notebook from my terminal, from any directory. In this case I just tried running it from the home directory. I ran the `python -c \"import random; print(random)\"` from home directory as well. Was I supposed to run `\"import random; print(random)\"` from within python?\r\nTo see which python is being used, I ran `which python` and this showed `/Users/mayuri/Library/Enthought/Canopy_64bit/User/bin/python` It appears to be trying to load `numpy.random` as `random`. Have you set the `PYTHONPATH` environment variable, perhaps? This is my `PYTHONPATH`. Should I modify it?\r\n`echo $PYTHONPATH`\r\n`:/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages:/Users/mayuri/Library/Enthought/Canopy_64bit/User/lib/python2.7/site-packages/numpy` The last bit is the problem. You don't put packages themselves on PYTHONPATH, you put the directories that contain them, i.e. `site-packages`. And most of the time, it's not necessary to set it at all. It worked!! Thank you very much! I am now able launch jupyter-notebook with `PYTHONPATH` set as \r\n`export PYTHONPATH=$PYTHONPATH:/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages:/Users/mayuri/Library/Enthought/Canopy_64bit/User/lib/python2.7/site-packages/`\r\n\r\nThanks very much!!! :-)","Can you try with the 5.0 beta release? `pip install --upgrade --pre notebook` > Can you try with the 5.0 beta release? `pip install --upgrade --pre notebook`\r\n\r\n@takluyver Just did. This problem already been fixed in beta, thanks very much. Thanks :-)","Answering to myself in case it is helpful to s/b else:\r\n\r\nLooks like calling `Jupyter.CellToolbar.rebuild_all();` after setting `slide_type` does the trick","Pinging @damianavila who's probably interested. I just witnessed that the same behaviour happens with a cell marked as 'split', so it suggests it's the complete metadata that gets attached to the second cell rather than to the first.\r\n\r\nTrying to setp back a little, I would see 3 policies here\r\n1. either we decide statically that the metadata should be duplicated; not optimal but at least simple to grasp\r\n1. or we arbitrarily choose one the 2 resulting slides as the recipient for the whole package; my conjecture is that's what is done now, and the recipient is the second\r\n1. or we decide it's more complicated and cannot be done while ignoring the various semantics; arguing that e.g. the slide tag probably is better attached to cell (a), while split cell should be copied to (a) and (b)\r\n\r\nOf course 3. is clearly a pandorra box; maybe giving a try at option 1. would make sense...\r\n\r\nJust thinking aloud here, it's not really a big deal\r\n Your conjecture is correct - splitting works by inserting a new cell above, and moving some of the text to it. [Here's the code](https://github.com/jupyter/notebook/blob/94122d6f8c7881fd8cd87fd82e23a0b6d1e04fd4/notebook/static/notebook/js/notebook.js#L1692-L1706). I agree that copying the metadata is probably a more reasonable approach. fine thanks I\u2019ll send a pull request when I have a chance\n\n\n> On 20 Mar 2017, at 14:56, Thomas Kluyver <notifications@github.com> wrote:\n> \n> Your conjecture is correct - splitting works by inserting a new cell above, and moving some of the text to it. Here's the code. I agree that copying the metadata is probably a more reasonable approach.\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n\n > I agree that copying the metadata is probably a more reasonable approach.\r\n\r\nI agree as well.","Look for errors in the terminal where you started the notebook. Usually the kernel dying like this means that some compiled code has caused a segfault or similar fatal error.","Can you show us your code, and describe in a bit more detail what happens? There were some changes to authentication in 4.3 that might have affected it.","Thanks a lot for your contribution, \r\n\r\nEven if we try to adhere to pep-8, we don't enforce it, but more especially the pep says:\r\n\r\n> However, know when to be inconsistent -- sometimes style guide recommendations just aren't applicable. When in doubt, use your best judgment. Look at other examples and decide what looks best. And don't hesitate to ask!\r\n\r\nSo we will likely never *enforce* it. \r\n\r\nRegardless of enforcing, a gigantic pull request that just fixes all pep-8 will  be more problematic than helpful in my experience. It will break the ability to work with tools like git-bisect and git-blame, and can make things complex to backport. That's from experience, as I did this mistakes a couple of years in the past, and still regularly hate myself for having done so. So we usually do not accept wide range code base cleanup. \r\n\r\nOne helpful things though would be instead of enforcing pep8 on the all codebase enforce it on the `diff`. Tools like pep8-radius can do that IIRC. This allow the code to progressively become compliant, and still give the maintainers the ability to overwrite the tool decision without having test to permanently fail. \r\n\r\nI strongly recommend [Beyond pep8](https://www.youtube.com/watch?v=wf-BqAjZb8M) if you have 1h to spare (or even in the background).\r\n\r\nI've recently setup yapf (instead of autopep8) in my editor to only apply to lines I have changed (it's broken right now I should fix this). And one of my wishlist is a bot you could mention on a PR to autopep8 only _part_ of a file (things that have changed only, and only if requested).\r\n\r\nIn the end I think that having at least pep8 as a linter and  progressively go toward no-errors will be helpful to catch potential mistakes (like `local variable 'app' is assigned to but never used`), but I still think a large change like this one is too disruptive. \r\n\r\nThat's just my though, and I'll let other dev pitchin in.  and I have to say no to things like that as I know it can be quite the effort to work through. \r\n\r\nDoes that make some sense to you or do you disagree ? \r\n\r\n\r\n\r\n @Carreau, you could also take a look at [ciocheck](https://github.com/ContinuumIO/ciocheck). We used it for some time in Spyder and found quite useful.\r\n\r\nUnfortunately, @goanpeca has to make it work with multiple branches (right now it only works in a single branch). > @Carreau, you could also take a look at ciocheck. We used it for some time in Spyder and found quite useful.\r\n\r\nThanks for the link, I'll have a look, . I would still hate to have to impose to user to run that. \r\nWith `allow edit from maintainer`  I'm thinking a github webhook (and  bot) could actually autopush these kind of fixes so you never have to ask users to enable them. \r\n Hey @Carreau, thanks for your detailed and insightful comment.\r\n\r\nAs you seem to be willing to help new contributors and kind enough to explain the reasons behind your disapproval, I will add some context to this (and other) pull request(s).\r\n\r\nI'm working with a team of other students (@John-Pap, @adimitrova, @ajayaadhikari) on this project for the [Software Architecture](https://twitter.com/DelftSWA) course at TU Delft. We had to choose a project to analyse and we chose this one.\r\n\r\nAs part of the course we are now analysing the technical debt aspect. This involves also using linting tools to check that the code style is consistent.\r\n\r\nI totally understand your concerns and can easily imagine this pull request causing some headaches, even just by checking that all the changes made are not harmful.\r\n\r\nIt was mainly an educational exercise. I understand your reasons behind the decision of not merging it :) > As you seem to be willing to help new contributors and kind enough to explain the reasons behind your disapproval, I will add some context to this (and other) pull request(s).\r\n\r\nThanks alway welcome to guide you through the codebase if you have questions. \r\n\r\n> \r\n> I'm working with a team of other students (@John-Pap, @adimitrova, @ajayaadhikari) on this project for the Software Architecture course at TU Delft. We had to choose a project to analyse and we chose this one.\r\n\r\nGreat, I would be happy to read any of the report, and comment if that may be of help. \r\nI went through the diff as an exercise and commented on the point where I would have paid more attentions to make sure the linters were right. \r\n\r\nI believe most of the issues flagged are actual issues (when not whitespace or formatting). Though I believe in some case the linters are decreasing readability, but that's subjective. \r\n\r\nIf it's a course about software architecture then I'll double down on \"Beyond Pep 8\" as a really good talk and how language design affects what can be considered as good architecture. \r\n\r\n> \r\n> As part of the course we are now analysing the technical debt aspect. This involves also using linting tools to check that the code style is consistent.\r\n\r\nNo problem, the notebook might have also a large amount of javascript code. I would suggest looking at `setup.cfg`: \r\n\r\n```\r\n$ cat setup.cfg\r\n[bdist_wheel]\r\nuniversal=1\r\n\r\n[nosetests]\r\nwarningfilters=module   |.*            |DeprecationWarning |notebook.*\r\n               default  |.* | Warning | notebook.*\r\n               ignore   |.*metadata.*  |DeprecationWarning |notebook.*\r\n               ignore   |.*schema.*    |UserWarning        |nbfor.*\r\n               ignore   |The 'warn' method is deprecated, use 'warning' instead     | DeprecationWarning |notebook.*\r\n               error    |encodestring\\(\\) is a deprecated alias, use encodebytes\\(\\)| DeprecationWarning | notebook.*\r\n               error    |decodestring\\(\\) is a .*| DeprecationWarning | notebook.*\r\n```\r\n\r\nYou'll see that 3 of these lines deactivate a couple of warnings in subprojects we maintain.\r\nThey are deactivated on purpose (as we support older versions), but at some points we will have to turn them into warnings and errors to make sure we do not use them. \r\n\r\n> \r\n> I totally understand your concerns and can easily imagine this pull request causing some headaches, even just by checking that all the changes made are not harmful.\r\n\r\nAs said above I made a quick review. Except for the `== False`/`is False` which would need proper digging, if it was not screwing up git-blame, git-bisect and backporting, I think this would not be controversial and good a good change[*]. \r\n\r\n> It was mainly an educational exercise. I understand your reasons behind the decision of not merging it :)\r\n\r\nFeel free to ask more questions, we'll be happy to help. \r\nThere are some construct that are pretty esoteric, (in particular traitlets). If you need clarification, I'll be happy to help. \r\n\r\n > I would still hate to have to impose to user to run that.\r\n\r\nYou can make it run as another CI script (as we did), so users wouldn't have to worry about it. Of course, they'll have to fix errors reported by `ciocheck` as part of their PRs. I'm going to close this as I don't think we're going to accept this kind of change, as discussed above. Feel free to keep using the comments to discuss linting and style guidelines, though.","That seem reasonable to me, but I'll let other more up-to-date with NB developpement pitch in. \r\nI'm tagging as 5.1 are we are close to 5.0 release and I don't want to delay 5.0 more. \r\n\r\nThanks !\r\n Makes sense. Given that 100% of Page invocations use the same argument, we could probably also remove the TODO and accept that these aren't actually variable parameters.","Python 2 tests failed and I've updated the code and it's now compatible with both python 2 & 3.\r\nIt now uses [base64.b64decode](https://docs.python.org/3/library/base64.html#base64.b64decode) instead.  Sweet ! \r\n\r\nDo you want to also send a patch like the following to make the use of decodestring an error ?\r\n\r\n```diff\r\ndiff --git a/setup.cfg b/setup.cfg\r\nindex 622c74f59..8960ebeee 100644\r\n--- a/setup.cfg\r\n+++ b/setup.cfg\r\n@@ -8,4 +8,5 @@ warningfilters=module   |.*            |DeprecationWarning |notebook.*\r\n                ignore   |.*schema.*    |UserWarning        |nbfor.*\r\n                ignore   |The 'warn' method is deprecated, use 'warning' instead     | DeprecationWarning |notebook.*\r\n                error    |encodestring\\(\\) is a deprecated alias, use encodebytes\\(\\)| DeprecationWarning | notebook.*\r\n+               error    |decodestring\\(\\) is a .*| DeprecationWarning | notebook.*\r\n```\r\n\r\nThat will prevent future code modification to re-introduce it. You can add it here if you like to, or even make a separate PR later. \r\n\r\nI'm going to approve this as is, but as we are close to releasing 5.0 I'm going to wait for someone else to also validate. \r\n\r\nThanks ! @Carreau I just pushed your change. Have one more look before I merge.\r\n\r\nBTW, how would I apply your patch exactly? Copy/paste it to a `.patch` file and run `git apply file.patch`? I tried that and got `fatal: corrupt patch at line 10`.\r\n > BTW, how would I apply your patch exactly? Copy/paste it to a .patch file and run git apply file.patch? I tried that and got fatal: corrupt patch at line 10.\r\n\r\nHum, unsure, I just gave an example, And did not even tested it. Plus I was on a custom fork, so the exact patch would likely fail because of commit range. Sorry about that. ","I'm +1 I think we should wait post 5.0 though, just not to introduce a potential change so close to a release. ","Great catch, @John-Pap! The pandoc on apt is woefully out of date. It probably will not be able to handle most of our tests.\r\n\r\nI'll make a change to what we use in nbconvert to handle this. ","![screenshot from 2017-03-14 15-39-36](https://cloud.githubusercontent.com/assets/327925/23908634/77feea18-08cc-11e7-807f-a5246ed8498e.png)\r\n\r\nDon't use `colorama.init()`. Colorama is intended to turn the ANSI colour codes into Windows console API calls, but it will detect that you're not in a Windows console and strip the ANSI codes out entirely, so the notebook doesn't see them. Great, thank you @takluyver !","To be honest I'm not sure how this affects configs, since I don't use any. Everything seems to work though. It should be passing the path around as a unicode object, but it seems to be ending up as bytes somewhere. I'm not sure how to debug that.","@Carreau I'd like to get this in before releasing 5.0.0. Can you foresee any issues with pushing data to `output_area.outputs` before displaying data vs. after? I don't see any issues from the top of my head.  It looks like we have some failed tests:\r\n\r\n```\r\nIn /home/travis/build/jupyter/notebook/notebook/tests/notebook/display_id.js\r\n  Untitled suite in /home/travis/build/jupyter/notebook/notebook/tests/notebook/display_id.js\r\n    assertEquals: Subject equals the expected value\r\nIn /home/travis/build/jupyter/notebook/notebook/tests/notebook/display_id.js\r\n  Untitled suite in /home/travis/build/jupyter/notebook/notebook/tests/notebook/display_id.js\r\n    assertEquals: correct number of callback outputs\r\nIn /home/travis/build/jupyter/notebook/notebook/tests/notebook/display_id.js\r\n  Untitled suite in /home/travis/build/jupyter/notebook/notebook/tests/notebook/display_id.js\r\n    assertEquals: correct number of cell outputs\r\n```\r\n\r\n@rgbkrk Any idea why this change is causing these `display_id` tests to fail? Not sure, @minrk did the implementation for the jupyter notebook. nteract's is situated a bit differently. Since silence is consent, I should probably speak up by saying that I'm not a big fan of passing the entire mimebundle through to a renderer. It seems like there's a mismatch between the way we declare the notebook format and the way it's being interpreted here. Can't quite put my finger on it though. > It seems like there's a mismatch between the way we declare the notebook format and the way it's being interpreted here. Can't quite put my finger on it though.\r\n\r\nI can't quite put my finger on it either, but it has smelled a bit off to me too to isolate the mimetypes, have renderers say they can handle specific mimetypes, but then let the renderers change the state from the server however they wanted. I know the use-case of having the frontend render a static image and saving that in the notebook, for example, but it still feels a bit off. Ok, interesting. @rgbkrk hinted at this the other day but I didn't quite understand the issue... \r\n\r\nSome high-level questions:\r\n\r\n* What is the rationale for allowing an output to have multiple mime types?\r\n* What is the rationale for isolating mime types?\r\n* What are the dangers of allowing a renderer to access data/metadata of other mime types?\r\n\r\nSome things to consider:\r\n\r\n* Jupyterlab has supported mime bundle _injection_ for a while and @blink1073 recently refactored the rendermime interface to make output data and metadata observable and editable by a renderer: https://github.com/jupyterlab/jupyterlab/pull/1709\r\n* According to @ellisonbg, including a static image in the mime bundle is a requirement for jupyterlab_vega (as ipyvega provided this and it's proven to be an important feature): https://github.com/altair-viz/jupyterlab_vega/issues/4\r\n\r\nMy thoughts:\r\n\r\nA renderer is responsible for rendering output of a specific mime type in the notebook. The notebook is no longer a single environment but many (classic notebook, jupyterlab, nteract, nbviewer, Github's nbviewer, etc.). Ideally, a renderer will work across environments, but it doesn't. As a result, instead of seeing a nice plot on Github, you end up seeing `<altair.Vega object>`. How can this be improved? Well, all notebook environments can render `image/png` and `text/html`. The renderer on the client-side is well-suited to provide `image/png` and `text/html` representations of data that's already been renderered vs. a library of the kernel-side. Additionally, if the renderer is responsible for providing fallback mime types, then all kernels benefit from this feature, not just IPython. Now, it's not perfect (I'm seeing many edge cases where both static images and HTML fall short, especially on Github), but it solves a legitimate problem. \r\n\r\nIn my ideal world, a user would not be required to install an extension for every mime type they would like to render because this adds a lot of complexity to a user's workflow and makes reproducibility less guaranteed. I did [a little experiment](https://github.com/gnestor/jupyterlab_react) that lazy loads remote renderers, meaning that as soon as an output is available, the renderer fetches the required package for that mime type from npm, dynamically imports it using SystemJS, and renders it using using that package (which is a React component). Now don't get me wrong, this raises **huge** security concerns, but it demonstrates how renderers could be more dynamic and less coupled with the environment. One important consideration for this PR as-is: it's giving different behavior to execute_result when compared with display_data. `display_data` will have access to the 'current' mime-bundle as `outputs[-1]`, whereas `execute_result` (and other output types) will not. `outputs.length` will have a different meaning for display_data output vs all other outputs, and the display_id target relies on this value having the same meaning. I've fixed the test above, but I know that display_id will now no longer work for execute_results. The test coverage doesn't check that case yet, though.\r\n\r\nIf renderers should have access to the whole mime-bundle, I think passing the whole mime-bundle to the renderer makes more sense than ensuring it is stored on the outputs list prior to rendering. Relying on the outputs list means async code can't use it, as other outputs can have been appended in the meantime.\r\n\r\nPerhaps the simplest version of this is to add an `output_added.OutputArea` event with the output data, which could allow it to be modified.\r\n @gnestor I updated the PR to add the `output_added.OutputArea` event, which I think should satisfy the need for \"do something with this output\", instead of relying on the `.outputs` list. Sounds good, @minrk. Thanks, @minrk! I will test this out with the extensions that depend on this functionality now. Ok, let's merge this and we can iterate if need be. Thanks again, @minrk!","BTW, I increased some of the numbers involved in the above script so that it would fail reliably; the original values from https://github.com/VolkerH/interpolation_and_aliasing_matplotlib/blob/master/Interpolation%2Band%2BAliasing.ipynb\r\nwere as above but replacing 256 with 128, 96 with 48, and 48 with 24.  With the original smaller values, it would fail some of the time but not every time, which makes it less good as a test case. @jbednar thanks! Looks like we need to tune the defaults a bit.\r\n\r\nI don't think the data rate limit is working very well. Large outputs that include things like images don't generally cause problems. They may be slow on poor networks, but throttling probably isn't going to be helpful in those cases.\r\n\r\nThe main output type that is helped by the data limit is stream output. (a few MB of stdout can cause major issues, whereas a few MB image is generally no problem). One option is to apply the data-rate limit exclusively to stream outputs. That PR looks perfect, thanks! This was reverted in https://github.com/jupyter/notebook/pull/2326, so reopening for consistency.","`jupyter notebook list` relies on files on the filesystem to discover running servers - run `jupyter --runtime-dir` to see where they're stored on your system. So it can't currently discover a server that you're connected to by an SSH tunnel. Thank you. I was able to find `notebook_dir` in `sudo cat /run/user/1000/jupyter/nbserver-20160.json`. The ssh file directory is under `$HOME/.local/share/jupyter/runtime`.\r\n\r\nOn a side note, if I set a password, then my ssh directory will be the same as the `1000` directory. Not sure why the difference. I'm not exactly sure how the difference arises, but the directory starting with `/run` is specified by an environment variable `XDG_RUNTIME_DIR`. The alternative under your home directory is our fallback if XDG_RUNTIME_DIR is not set. I am pretty happy with what I have got so far. Bottom line is: if I can't find the connection, I will look in the `/run/user/` directory. Thanks. Just to also comment, the one with password is in a CentOS system, whereas the one without is in a Ubuntu system, if it has any significance.","It's probably just about the version we include. I don't think we cut any icons out. @ZelphirKaltstahl isn't it because you are referencing `graduation-cap` rather than `fa-graduation-cap`? When I use `fa-graduation-cap` it appears just fine for me @louise-davies Ha! You hit the nail on the head! That was the problem. Does the `fa` stand for font awesome? Probably. I guess there would have been collisions with other stuff if simply using the original names?","This sounds like a good solution.  Thanks so much for the quick response! It just occurred to me that this was slated for 5.1 and I merged it on to master. Is this ok or do I need to revert it? I think we should probably revert it, or make a `5.0.x` branch from the previous commit to make the release from. We're really close to 5.0 now. @minrk what do you want to do? Reverting's probably easiest for now. This was reverted in #2326, so it will need to be repeated for 5.1. Thank you, my apologies. Glad this PR was made.","[`@Carreau` commented](https://github.com/jupyter/jupyter_client/issues/246#issuecomment-286883481): nah, it's not enabled there. You need to go to `https://github.com/integration/meeseeksdev` and enable it. I've done it. I'll restart it and retry.  [`@takluyver` commented](https://github.com/jupyter/jupyter_client/issues/246#issuecomment-286881794): Hi Mike - issues relating to the notebook user interface are best on the [notebook repo](https://github.com/jupyter/notebook). This repo contains a Python API for talking the Jupyter protocol.\r\n\r\nLet's see if this works:\r\n\r\n@meeseeksdev, migrate to jupyter/notebook I'd like to +1 this, or a slightly different variant: \r\neven though we have the option to disable extensions one by one, having one keyboard shortcut - or an api - to hide/show the whole toolbar would be a plus. \r\n\r\nPS.\r\nI take it meeseeksdev is some experimental triage-assistant thingy; for what it's worth, I just wanted to outline that on this issue we've lost the identity of the initial requestor; it's accessible of course through the link but that makes it two clicks further - counting the one to come back here. just saying.. Unfortunately Github doesn't make it possible to migrate an issue and preserve the identity of people making the comments, but meeseeksdev does record who opened the original issue:\r\n\r\n> Originally opened as jupyter/jupyter_client#246 by @MikeDacre","[This docs section](http://jupyter-notebook.readthedocs.io/en/latest/security.html#collaboration) should be relevant, but I think we made a mistake in it, because `data_dir` is not configurable - try setting the values `db_file` and `secret_file` instead to locations the machines can share. Be aware that the db_file is SQLite, which may lead to conflicts in Dropbox if it's changed from different machines before it can be synced. Thanks! Just an idea: For a single person like me, wouldn't a viable idea be to not share the Dropbox-problematic SQL database, but just a single key file? When you save a notebook you have run on one computer, it saves a signature in the database to record that the contents of the current notebook are trusted. If you then change it on another computer, it has a different signature, which is not in the database, and so it shows up as untrusted. With this scheme, sharing the secret key is not enough to share 'trust' between the two computers.\r\n\r\nWhen we first added a trust mechanism, we stored the signature in the notebook file itself; with this, sharing the static secret key file was enough to share trust. But it was annoying for version control, and in the default case (without doing anything to share trust), merely opening a notebook and saving it again with no changes rewrites the signature, so it's even easier to make the notebook 'untrusted' on a system which should trust it. For this reason, we changed to the sqlite signature store.\r\n\r\nIt's possible to plug in your own signature store, if you're willing to run a database server that all of your computers can access. Unfortunately, that's the only really robust way we've so far come up with to share trust between computers, and it's obviously not practical for many users.","The jupyter folder in question should be `~/.jupyter` (in your home directory, with a leading `.`). if the `custom` directory doesn't exist inside that, just create it.","This looks fine to me. Squeeze it in for 5.0?\r\n\r\nThere's some kind of error with installing npm on Travis - I don't think it's related to this, but it's stopping the tests from running. I thought I implemented a signal for this for clearing widgets. Let me check... Yeah: https://github.com/jupyter/notebook/pull/2173. Is that not sufficient? I suppose they are slightly different. My event is a notebook-wide event for components to know when a cell clears its output - useful for something outside of the output area (and something that possibly doesn't have a handle on the output area). This event is a per-outputarea event, so more suitable for something rendered directly in that output area. Another distinction is that a single cell may have more than one output area - my event is per cell, and this is per output area. @jasongrout Thanks for this! I did some experimenting and I think your `'clear_output.CodeCell'` suffices. It's more consistent with Min's recently added `'output_added.OutputArea'` event and since it no longer depends on a specific `output_area.element`, I can take it out of the `append` function and avoid duplicating event handlers.\r\n\r\n```js\r\n// When an output is cleared,\r\noutput_area.events.on('clear_output.CodeCell', handleClearOutput);\r\n// When an output is added to the output area\r\noutput_area.events.on('output_added.OutputArea', handleAddOutput);\r\n```\r\n\r\nI'm going to close this and release 5.0.0rc!","Sidenote: \n\nI'd **wholeheartedly** recommend running something like jshint in travis with the following config.  I think these are about as undogmatic as linter options come:\n\n```\n{\n    \"eqeqeq\":true,\n    \"browser\":true,\n    \"devel\":true,\n    \"undef\":true,\n    \"unused\":true,\n    \"latedef\":true,\n    \"strict\":true,\n    \"predef\": [\"define\", \"require\"]\n}\n```\n Yup, I use jshint and it's great. Analogous to pyflakes, the similarly style-free Python linter.\n\nI don't like the idea of linting on CI, though.\n BTW, fixing things like triple-equals is totally okay. Given our relative lack of expertise in javascript, it's quite appropriate to be more strict in these things. The function in a for-loop is definitely an issue we've encountered a few times. Those particular functions didn't have any closures, so they happened to be fine, but it's a good thing to avoid, since javascript closures don't behave in sensible ways.\n I think our policy about cleanup PRs is more about style cleanups - if there's something that's functionally wrong or problematic in our code, I don't object to fixing it. That's much more likely in the JS code because we're less experienced in writing that.\n I'm fine with this too. At some point anyway if we use typescript we will have to fix theses things. \n > I don't like the idea of linting on CI, though.\n\nI think this is defensible for PEP8-esque style-linting (I personally still use PEP8 for everything I write, but I understand that it imposes significant friction for new users for a possibly dubious gain).\n\nFor stuff like javascript `===`, though, I can't imagine a circumstance where I would intentionally merge a change that had `==` unless the author explained explicitly why they wanted the type-unsafe equality check.  This means that, as a reviewer of javascript changes, I'm always manually doing the same checks that jshint is doing.  This detracts from my ability to actually review the content of a change, because my attention is now divided between code comprehension and checking for javascript gotchas, and invariably I'm going to miss a `==` that a programmatic solution will never miss.\n\nBasically, I think linting in CI should be used to perform checks that you would expect any competent reviewer to perform.\n\n/endrant\n The problem is as soon as you **want** to have an unused variable, or an `==` instead of `===` your test fails, for all PR. \n\nIf could check only for new code, that would be better.\n > The problem is as soon as you want to have an unused variable, or an == instead of === your test fails, for all PR.\n\nEvery reasonable linting tool has a way of saying \"disable checks for this line or this region of code\".  This forces the programmer to document that they actually want `\"2 == '2'\"` in this specific chunk of code.\n\nIn the specific case of jshint, there are lots of ways to do this:\n\n```\n// Code here will be linted with JSHint.\n/* jshint ignore:start */\n// Code here will be ignored by JSHint.\n/* jshint ignore:end */\n```\n\nor \n\n```\nignoreThis(); // jshint ignore:line\n```\n OK, regardless of jshint on travis, moving forward with this. \n","what's the URL for the notebook? Is it at the top-level of the notebook directory? If so, the notebook server will not serve any files outside that directory.\n Okay, got it. Just need to launch my notebook in the level above the notebook and images folder. it works now. Thanks!\n","The JupyterLab project may allow the markdown renderer to be replaced with a custom plugin, so this could be implemented as a custom plugin on top of JupyterLab. so this is not possible at the moment by implementing a respective nbextension?","@takluyver  i found the soultion , the problem was , i made an environments then  i deleted them , there were refrences for those envs ,\r\nsoultion : used this in cmd : python -m ipykernel install --user  Yup, that's what I would have suggested. Thanks for working it out yourself!\r\n\r\nFor other people who might read this: you can see kernelspecs (which may contain references to deleted envs) by running:\r\n\r\n```\r\njupyter kernelspec list\r\n``` brother @takluyver can you give me a complete steps to install python 2 kernel in notebook beside the python 3 , because the start of the problem got from doing wrong steps , thank you very much and by the way , my solution brought up from **YOU**  , so thank you very much :)  Have a look at the instructions here:\r\nhttp://ipython.readthedocs.io/en/stable/install/kernel_install.html#kernels-for-python-2-and-3","Thanks @Carreau! This is very helpful. It works!\r\n\r\n```\r\ngrant:notebook grant$ python setup.py sdist\r\nTraceback (most recent call last):\r\n  File \"setup.py\", line 51, in <module>\r\n    from setupbase import (\r\n  File \"/Users/grant/Sites/jupyter/notebook/setupbase.py\", line 76, in <module>\r\n    raise ValueError('Invalid version number `%s`, please follow pep440 convention or pip will get confused about which package is more recent.' % version)\r\nValueError: Invalid version number `5.0.0-rc.1`, please follow pep440 convention or pip will get confused about which package is more recent.\r\n```\r\n\r\nDo you think the error message should include a link to the version scheme? https://www.python.org/dev/peps/pep-0440/#version-scheme \ud83d\ude04  If we switch to always building with setuptools, this should also become unnecessary as it will do the check. I've started doing this in most new things, adding only the `bdist_egg_disabled`. I think we should stop supporting raw distutils install/sdist in general. Cough, cough: https://github.com/jupyter/jupyter-packaging > \ud83d\ude04\r\n\r\nWe know you are a semver guy :-)","These are installed automatically if pip is working correctly. Can you show the output of your install command? Also, what's your `pip` version? It should be \u2265 9. @minrk Here the output:\r\n[jupyter-notebook-install-20170317.txt](https://github.com/jupyter/notebook/files/850494/jupyter-notebook-install-20170317.txt)\r\nIt seems that only `terminado` is not installed (not sure about the remaining; they seem to be installed; maybe some kind of global/local-issue of these other packages) ```\r\ndakrenn@pc72-math /local/dakrenn/sage/jupyter-notebook $ pip --version\r\npip 1.5.4 from /usr/lib/python2.7/dist-packages (python 2.7)\r\n```\r\n...but as it finally seem to work, the old pip version does not seem to be the problem. I would definitely expect pip 1.5 to fail in a variety of ways, for this and plenty of other packages. There are several package specifications, conditional dependencies, and other features that pip 1 does not support.\r\n\r\nI would *highly* recommend upgrading pip:\r\n\r\n    pip install --upgrade setuptools pip\r\n\r\nespecially if you ever encounter installation issues. @minrk Thanks; works (tested on another, similar machine). The problem was/is, that I have had run `pip install --upgrade setuptools pip` before, but with `--user` as suggested on `CONTRIBUTING.rst`. However, the three lines later `pip install -e . --user` does not have used the new upgraded pip but still the system wide (old) pip.","@mgeier does nbsphinx handle images included using Markdown? It handles images that are using Markdown syntax `![alt text](image_link.png)`, but it currently doesn't parse HTML `<img>` tags, which are used in the abovementioned example notebook.\r\n\r\nSee also https://github.com/spatialaudio/nbsphinx/issues/52. Aha, thanks. So as Fernando said on that image, we should stick to the Markdown syntax for now. Made #2313 to convert to Markdown syntax. Just to be clear, <img> tags **used** to work fine in nbconvert of Jupyter notebooks to HTML but now this is broken?\r\n\r\nI just wanted to verify that this is the issue I'm having, and there's no workaround besides using Markdown syntax images... and that if I re-run old notebooks, I will have to edit all the <img> tag code in my MD cells?\r\n\r\nThis is the behavior I'm getting now:\r\n\r\n![image](https://cloud.githubusercontent.com/assets/4365714/24115539/08bfdf60-0d7a-11e7-86ff-96ac92b1f6e3.png)\r\n\r\nJupyter 4.3.1\r\n![image](https://cloud.githubusercontent.com/assets/4365714/24115677/827dc40c-0d7a-11e7-85cd-460cdc0fd04d.png)\r\n\r\nAfter nbconvert to HTML:\r\n\r\n![image](https://cloud.githubusercontent.com/assets/4365714/24115560/1d61e8a0-0d7a-11e7-9681-941d1a577f1b.png)\r\n\r\n HTML tags should still work in *nbconvert* - make sure both that and the `mistune` package are up-to-date, and if so file an nbconvert issue. This issue is about *nbsphinx*, which integrates notebooks into Sphinx docs.","This seems to have bitten someone else with a different filename in #2270. In general, you can't call your modules the same thing as modules that IPython relies on. In this case, you're clashing with the [standard library profile module](https://docs.python.org/3/library/profile.html).\r\n\r\nIPykernel 4.6, when it is released, should include a workaround that allows the kernel to start in that case (see ipython/ipykernel#209). But then you won't be able to import your module with `import profile`, so it's still not a good name.","I'd say use the bower versions.  > Is there any reason why we can't get these dependencies from bower?\r\n\r\nThere aren't bower versions of these, as far as I can tell. That's the only reason they are dealt with as they are. If someone has a bower version, that works for me. Ah, apologies, I had thought I had found preact on bower, it was just the misleading libraries.io site. I submitted a PR that manages to do this via bower. Can you review?","If you're using notebook 4.x, can you try with the 5.0 release candidate? `pip install --upgrade --pre notebook`.","*Every* GUI program I can find on my system shows shortcuts with capital letters. I think it's because people are used to shortcuts using modifier keys, they are reluctant to believe us that the `D` shortcut just means the `D` key, not Shift-D or Ctrl-D.\r\n\r\nIt's mainly just style, but most physical keyboards I've seen have the keycaps printed with capital letters. So I have a `D` key, not a `d` key. Agreed about GUI programs and about keyboard layouts - I don't think I've ever seen a keyboard with lower case keys, as you point out. I think ( warning: speculation ahead... ) that maybe lowercase shortcuts are more common on the web? Gmail and Github (the first two tabs that I happened to have open) both use lower case in their help. \r\n![selection_014](https://cloud.githubusercontent.com/assets/893512/24143596/2a9d0cea-0e22-11e7-9c2c-1b876c8fa7b7.png)\r\n![selection_015](https://cloud.githubusercontent.com/assets/893512/24143600/2eaf09b4-0e22-11e7-815f-4d7050731236.png)\r\n\r\n\r\nSo maybe that's what confused my students. Also, I know that some of them use e.g. VIM which uses the same letter in upper and lower case for different functions, so maybe that's what confused them. \r\n![selection_016](https://cloud.githubusercontent.com/assets/893512/24143653/518e1a88-0e22-11e7-8ba6-c48447477104.png)\r\n Thanks, that's a good point.\r\n\r\nPinging @ellisonbg for design question. I suppose it's a question of numbers: are people more likely to be confused by the difference between what's written in the help and what they have to type (current situation) or what's written in the help and what's written on their keyboards (proposed change). Sadly I have only anecdotal evidence :-) Also, my experience is strongly biased towards less-experienced users, as that's generally who I teach.  I think the general idea in keyboard shortcut display is this: show the\n\"picture\" (including case) that are on the users physical keyboard keys. To\ntype a lowercase \"m\" on a US based Mac/Windows keyboard, a user would\nusually press the key that has the picure \"M\" on it. Our usage of uppercase\nto display keyboard shortcuts matches best practices of OS styles for\nshortcuts on Mac/Windows apps, which use uppercase. I agree it is a bit\nconfusing, but I think we are making the right choice and that changing it\nwould diverge from the current \"best\" (if you can call it that) practice.\n\n\n\nOn Tue, Mar 21, 2017 at 7:01 AM, Martin Jones <notifications@github.com>\nwrote:\n\n> I suppose it's a question of numbers: are people more likely to be\n> confused by the difference between what's written in the help and what they\n> have to type (current situation) or what's written in the help and what's\n> written on their keyboards (proposed change). Sadly I have only anecdotal\n> evidence :-) Also, my experience is strongly biased towards\n> less-experienced users, as that's generally who I teach.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2309#issuecomment-288087006>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0ByMWxTOw2CdxzVM9RrrpFc690Q8ks5rn9gpgaJpZM4MhuaL>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Fair enough. I am probably also biased because I work with/teach a high proportion of international folks with non-US keyboard layouts, i.e. many of the keys either have 2/3/4 different symbols or a non-ASCII symbol. So I think in their minds (and my extension, in my mind) the \"identity\" of a key is less to do with what's displayed on it and more to do with what actually appears on the screen when you press it. \r\n\r\nThanks for the interesting discussion!","I think this means that [this function](https://github.com/jupyter/notebook/blob/94122d6f8c7881fd8cd87fd82e23a0b6d1e04fd4/notebook/static/notebook/js/menubar.js#L175) needs to use `this._new_window()`, as some functions above already do. It looks like \"Download as .ipynb\" was using different logic than the rest, which used `this._new_window(url);`\r\n\r\n```js\r\nvar w = window.open('');\r\nvar url = utils.url_path_join(\r\n    base_url, 'files', notebook_path\r\n) + '?download=1';\r\nif (that.notebook.dirty && that.notebook.writable) {\r\n    that.notebook.save_notebook().then(function() {\r\n        w.location = url;\r\n    });\r\n} else {\r\n    w.location = url;\r\n}\r\n```\r\n\r\nI just tested with single-tab mode and it works. ","It may be possible, but do you know about Shift-tab? Put the cursor in `to_excel`, press shift-tab, and you should get a tooltip with information about it. Press shift-tab more times to expand the tooltip or move it to the pager at the bottom of the window.","There's no expiry mechanism with the tokens, as far as I know. Even if you close the server and restart it, I think the cookie your browser has stored after the token authentication should still work. :confused: ","What version of the notebook are you running? I got this with 5.0.0b2 from pypi @minrk I see that there were some deprecations in traitlets 4.3. Do we need to update the notebook to reflect these? This particular one was deprecated in 4.1, but I've reverted the deprecation of `config` in the constructor in 4.3.2, so it should be fine to leave these. @tomdz I'm going to close this one as the deprecation message should go away after upgrading to traitlets 4.3.2.","Related https://github.com/jupyter/notebook/issues/2314","Related https://github.com/jupyter/notebook/issues/2314 This one's a real bug #2347","That looks like it's finding an older version of the `traitlets` package. Try uninstalling and reinstalling that using whichever mechanism you used to install the notebook.","@ZelphirKaltstahl I think you need to modify Jupyter.Notebook.prototype.execute_cells to be able to modify the base value. That's what I do when I override functions in NotebookList anyway and it seems to work \r\n@louise-davies Thanks! That works. At first I had a typo I did not see.\r\n\r\nIt tells me that:\r\n\r\n    accessing `Notebook` is deprecated. Use `require(\"notebook/js/notebook\").Notebook`\r\n\r\nBut when I replace `Jupyter` with: `require(\"notebook/js/notebook\").Notebook`, it stops working again. So I guess I'll have to stick with the deprecated way? I've noticed, that the problem seems to be a bit more difficult than I thought.\r\n\r\nI tried overwriting the function and the way @louise-davies suggested works. Except that in the original function `this` is used:\r\n\r\n    Notebook.prototype.execute_cells = function (indices) {\r\n            if (indices.length === 0) {\r\n                return;\r\n            }\r\n    \r\n            var cell;\r\n            for (var i = 0; i < indices.length; i++) {\r\n                cell = this.get_cell(indices[i]);\r\n                cell.execute();\r\n            }\r\n    \r\n            this.select(indices[indices.length - 1]);\r\n            this.command_mode();\r\n            this.set_dirty(true);\r\n        };\r\n\r\nAnd when my own code runs and calls the original function as a last step:\r\n\r\n    return original_execute_cells(cell_indices);\r\n\r\nThe value of that functions `this` seems to be not available and I get the following `TypeError`:\r\n\r\n    TypeError: this is undefined[Learn More]  main.min.js:27578:13\r\n\r\nWhich is the first line of the original function, which does anything with `this`.\r\n\r\nSo I guess I somehow have to make it so that the `this` still remains defined. How would I do this? I'm not an expert, but I think what you need is [bind()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind). It would work something like this:\r\n\r\n```javascript\r\nreturn original_execute_cells.bind(this)(cell_indices);\r\n``` @ZelphirKaltstahl Ah yes, I forgot that the deprecation warning would pop up. However, when I use\r\n\r\n```\r\nrequire(\"notebook/js/notebook\").Notebook.prototype.execute_cells\r\n```\r\n\r\nIt seems to work for me?\r\n\r\nAs for the troubles with `this`, @takluyver suggestion to use `bind` is correct. I was hasty when posting my original reply and I forgot to mention that it would be required. Thanks for the great help!\r\n\r\nI think it has to be:\r\n\r\n    return original_execute_cells.bind(Jupyter.notebook)(cell_indices);\r\n\r\nIn my case, as I want the original `this` and not the one of my current scope. Also the:\r\n\r\n    require(\"notebook/js/notebook\").Notebook...\r\n\r\nSeems to work now. Not sure what was wrong before. Maybe only an only inspector window and I got confused or something like that.\r\n\r\nGreat, I learned something more about JS today and I have a way to decorate any notebook function. In the other issue @takluyver already showed me how to use events though and I think that might be a cleaner way to do it, in cases where running the original function has the same meaning as firing the event. However, when a specific function does not fire such event, this can still be very useful, I think. If there are hooks you'd like to add where there isn't currently an event, feel free to open an issue (or a PR ;-) to suggest extra events. Yes, using events seems like the right solution for this:\r\n\r\n```js\r\ndefine(['base/js/events'], function(events) {\r\n    function load_ipython_extension() {\r\n        events.on('execute.CodeCell', function (event) {\r\n            var cell = event.cell;\r\n            console.log('EXTENSION: running decorated execute_cells function');\r\n        });\r\n    }\r\n    return {\r\n        load_ipython_extension: load_ipython_extension\r\n    };\r\n});\r\n```","Yay for unpkg. Cool, thanks @gnestor!","I see that the Travis CI builds failed.  Looking at the logs, it seems as though this fix may have broken something else.  When I make this change on my system (Windows 7, Python 3.4.1, Anaconda 2.3.0, npm 2.11.3, node 0.12.7) it works.\n I don't think `shell=True` is the right fix here.\n\n@minrk , when installing from source, if building the css & js fails, it logs a warning message that says 'not a problem', and allows it to continue. But if the CSS & JS aren't already built, it is a problem, and hiding the error makes it less clear what has actually gone wrong.\n\nOf course, the trouble is that it's the same code for installing from source as for installing from an sdist, where it ideally shouldn't even try to build the CSS & JS. But I wonder if we could do something smarter so the real error is clearer in cases like this.\n Could be.  I am still not very good with Python and am learning.  I have noticed other strange issues with the install.  For instance, the installed scripts to launch Jupyter are all bash style scripts and do not support windows.  I am not sure how to fix that right now.  I can start jupyter-notebook but then after that I think there will be issues when and if the system tries to execute the nconvert module for export...  I am still playing around here.\n You may find it easier to install the stable version of IPython while we're finishing up the release of Jupyter. http://ipython.org/install.html\n Never!  I shall never give in.   :)  I actually got things running.\n Kudos!\n I think the not a problem is inherited from the time when we tracked these things, they just might not be up to date. It definitely should refuse to proceed if the files don't exist. We should also not even be trying to run these commands from an sdist.\n","The custom css is stored in `~/.jupyter`, but it would be the same for all URLs. The fact that it's specific to the default port sounds like it might be a browser caching issue. Can you try launching on that port and then using a different browser? It is a browser caching issue. I clear the cache and the issue is gone now. Thanks.","There are named 'events' - e.g. when a Code cell is executed, the `execute.CodeCell` event is triggered. You can listen for that like this:\r\n\r\n```javascript\r\nJupyter.events.on('execute.CodeCell', function(evt, data) {\r\n    // data.cell is the cell object\r\n});\r\n```\r\n\r\nUnfortunately, I don't think there's a complete list of them anywhere, and the names are scattered throughout the codebase. @takluyver Thanks. I think I can somehow find the occurrences in the source code with that example.\r\n\r\nI added it to my extension, but when running it, I get the following in the console:\r\n\r\n    TypeError: Jupyter.events.on is not a function\r\n\r\nI did require Jupyter as follows:\r\n\r\n    define(\r\n        [\r\n            'jquery',\r\n            'base/js/namespace'\r\n        ],\r\n        function($, Jupyter) {\r\n            function load_ipython_extension() {\r\n                Jupyter.events.on('execute.CodeCell', function(evt, data) {\r\n                    // data.cell is the cell object\r\n                    notebook_cell = data.cell;\r\n                    console.log('EXTENSION: executing a cell');\r\n                });\r\n            }\r\n\r\n            return {\r\n                load_ipython_extension: load_ipython_extension\r\n            };\r\n        }\r\n    );\r\n\r\nDo I need a different way of requiring it for the events?\r\nI also tried with: `Jupyter.notebook.events` instead and that did not result in any errors. But which one is the correct one? Oh, my mistake. I was just thinking of using the global `Jupyter` object, which I usually do because I'm lazy, but it doesn't work for this. If it works with `Jupyter.notebook.events` that should be fine - various objects have a reference to one shared `events` object, so it's the same however you get it. It works with the `Jupyter.notebook.events` :+1:  The following command inside the notebook source code top level directory is useful:\r\n\r\n    grep -rni \"events.trigger\" .","The quickest way is to install `jupyter` into each environment you use.","Self-merging, because this is a pretty straightforward addition.","@Carreau Any thoughts?","@schlichtanders This is a reasonable idea. I could see the default option being the last one used which may work better than the current behavior. The notebook is currently in support-mode meaning that we are not adding many new features and focused primarily on fixing bugs. See [Jupyter Lab](https://github.com/jupyterlab/jupyterlab) for future notebook development. However, we are always welcoming of new contributors, so if you would like to submit a PR to improve the current behavior, then by all means, go for it! Very pedantic small point - seems to be a typo in the nbconvert tag in the image for the cell tagging feature\r\n![capture](https://cloud.githubusercontent.com/assets/4974928/24577113/c8786298-16bf-11e7-87a1-4c7cab1403d5.PNG)\r\n","It looks like Github doesn't render reStructuredText (rst) 100%, but if you take a look at our docs, all of the images render correctly: http://jupyter-notebook.readthedocs.io/en/latest/changelog.html","Seems reasonable.\r\n\r\nThe zip file thing is working for me with download as markdown, at least. I think it may only zip it if there are any outputs that become separate files (images, usually). @takluyver yep \u2014 I wasn't being careful when testing to make sure that it would have produced an output dir. Apologies for raising unnecessary alarms.","You could delete the kernelspec directory (`~/.local/share/jupyter/kernels/python3`) - if it's pointing to the same Python that you run Jupyter with, it's not necessary. Or if you need kernelspecs installed, you could set the environment variable `JUPYTER_DATA_DIR` so that they're in a different location on the different systems - the default for that is the `~/.local/share/jupyter` part of the path.","+1\r\n\r\n@Carreau is this OK with you? I seem to remember you added the reminder. Sure!\n\nOn Mar 23, 2017 07:18, \"Thomas Kluyver\" <notifications@github.com> wrote:\n\n> +1\n>\n> @Carreau <https://github.com/Carreau> is this OK with you? I seem to\n> remember you added the reminder.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/pull/2331#issuecomment-288733279>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAUez4j9upV2ppfGhycsDapB8AaDvXIDks5ron9DgaJpZM4Ml553>\n> .\n>\n I merged this and then thought 'wait, what about where this function is called?' :-(  PR coming up #2333 ","There's a confusing detail about the tokens that we don't try to explain in any of the UI. But you've spotted it ;-). If you're interested in more than *it's intentional*, read on...\r\n\r\nThere were a couple of reasons we added token auth. One was a complex but potentially really nasty (remote code execution) attack called DNS rebinding. The other was a simpler but more limited attack: because network sockets are shared systemwide, anyone who can log into the same computer (e.g. via ssh) while you're running a notebook server without authentication could connect to it and run code as you, potentially letting them read secret files, or modify your files.\r\n\r\nToken authentication mostly works without the user needing to do much extra - it generates a token automatically and passes it to the browser it launches. It's still caused some headaches, but it's practical enough (and the DNS rebinding attack was nasty enough) that we enabled it by default.\r\n\r\nHowever, for the cross-user attack, generating a token and passing it to the browser leaves a hole in the security. When we pass a URL to the browser, we launch a browser process with the URL as a command-line argument. But command line arguments are not private - at least on some systems, a non-privileged user can see the arguments of processes run by another user (on Linux, run `ps -ef` in a terminal). So a malicious user on the same system may be able to scan processes you have started, find the browser process started by Jupyter, extract the token and use it to connect to your server. This is even more problematic now that it seems to be secure.\r\n\r\nYou may have guessed where we're going. The token you see in your browser is an extra one-time token; once your browser has used it to authenticate (swapping it for an auth cookie), it's invalidated, so connecting another browser with the same token won't work. Technically, there's still a very small chink in the armour: once we start the browser process, the attacker could try to steal the token and use it to authenticate before your browser does. But a) that's hopefully quite hard to do, and b) you have a chance to notice that something is amiss when your browser fails to authenticate. OK - thanks very much for the explanation.  I didn't realize that the token printed to the terminal was an extra token for one-time use. The one printed to the terminal is the reusable one - the one that we open a browser with is the one-time token. @takluyver   Got it. Thanks!","Hi @Analect, that looks like a bug in JupyterLab, mind moving this issue there? @blink1073 ... happy to add problem ref meta-data not getting saved in jupyerlab ... but is this likely fixed by this [PR](https://github.com/jupyterlab/jupyterlab/pull/1986)? That was the goal ;).  Sorry, forgot to cross-link back. @gnestor ... sorry, but could you reopen this.  \r\n\r\nWhile the last part of the issue relating to jupyterlab may have been resolved, I haven't been able to resolve the part relating to how cell meta-data is failing to persist back to `model`  (the main purpose of the issue)  when using file_save hooks.  If it's a case that I am just doing this wrong, then if someone better informed could point me in the right direction, that would be great. @Analect Sorry about that, I'm doing _Spring cleaning_ on this repo. Your hook looks fine to me. Deferring to @takluyver who wrote the docs on the subject \ud83d\udc4d @takluyver \r\nWould you have any thoughts on what I might be doing wrong here.  It seems when I push updates to the `model` cell meta-data programmatically, they don't persist ... or somehow on loading, `model` isn't loading the cell meta-data, when it has been added programmatically, as per my UUID example above. Thanks.","I found the mistake shortly after posting:\r\n\r\nOne has to use `display(Javascript(...))` in the button function. `Javascript()` creates a javascript display object. If you call it at the end of a cell, it is displayed automatically, like putting `2+2` at the end of a cell will display 4. If it's not the last thing in the cell, or it's inside a function, you need `display()`, equivalent to putting `print(2+2)`.","Related: #1163 This is working for me on Firefox on Linux. Make sure you're copying and pasting with Ctrl-C and Ctrl-V (Cmd-C and Cmd-V on a Mac).\r\n\r\nIt should not be affected by either where the server is running (it doesn't involve the server), or token authentication. OK, now I see. It works in all conditions described above.\r\n\r\nMy expectation is to use C and V in command mode. I will get used to it, I suppose. Yeah, unfortunately we're caught between two limitations of UIs in the browser. We can't use Ctrl/Cmd in most of our own shortcuts, because almost every Ctrl shortcut is already used by the browser, so we either can't capture them, or people complain when we do. But on the other hand, we can only access the system clipboard when we're handling a clipboard event from the browser - which the user has to trigger with the system clipboard shortcuts.\r\n\r\nFor now, we've left in the x/c/v shortcuts using our own clipboard-like mechanism that only works within one page, in addition to the ctrl-{x/c/v} shortcuts for using the system clipboard. That's bound to be a source of confusion, but on the other hand we're bound to upset people if we remove the old shortcuts.","@Carreau Thoughts?","That behaviour does not sound familiar. Can you try with the 5.0 release candidate? `pip install --upgrade --pre notebook` @takluyver I did. No difference really.\r\n\r\nI think the most unusual part is that when I start up `jupyter notebook` and view a `.ipynb` file then it will render correctly. But as soon as I edit that file, then I get this delayed garbage as I mentioned in my first post.\r\n\r\nAlso bear in mind it should be `pip3 install ...` (I use python3 only) So normally maths is initially unrendered, and then it reappears rendered a second later once Mathjax has done its thing. It sounds like something is going wrong with the Mathjax rendering. Are there any errors in your browser's Javascript console? I found a fix for the error:\r\n\r\n1. Uninstall `jupyter-notebook` and `jupyter-core` from APT (because I had it installed)\r\n2. Install newest version of jupyter with `pip3 install (--pre) jupyter`\r\n3. Run with `ipython notebook`\r\n\r\nFor my part, this issue can be closed. Ah, OK. Probably Debian packaging has broken Mathjax :angry: ","I failed to mention, I am using the Jupyter version included in the latest Anaconda distribution, i.e. Python 3.6 with the package jupyter_core-4.2.1-py36_0\r\n```\r\n>>$ jupyter --version\r\n4.2.1\r\n``` That looks right to me...\r\n\r\n@minrk @Carreau Any ideas? What's `conda list`? I used that config and it does indeed change the shell. Where are you setting the configuration? Here's my conda -list output. Thanks for taking a look at this.\r\n\r\nroot@ip-172-31-16-26:~# conda list\r\n# packages in environment at /opt/anaconda3:\r\n#\r\n_license                  1.1                      py36_1  \r\nalabaster                 0.7.9                    py36_0  \r\nanaconda                  custom                   py36_0  \r\nanaconda-client           1.6.0                    py36_0  \r\nanaconda-navigator        1.5.0                    py36_0  \r\nanaconda-project          0.4.1                    py36_0  \r\nastroid                   1.4.9                    py36_0  \r\nastropy                   1.3                 np111py36_0  \r\nbabel                     2.3.4                    py36_0  \r\nbackports                 1.0                      py36_0  \r\nbash_kernel               0.6                       <pip>\r\nbeautifulsoup4            4.5.3                    py36_0  \r\nbitarray                  0.8.1                    py36_0  \r\nblaze                     0.10.1                   py36_0  \r\nbokeh                     0.12.4                   py36_0  \r\nboto                      2.45.0                   py36_0  \r\nbottleneck                1.2.0               np111py36_0  \r\nbzip2                     1.0.6                         3  \r\ncairo                     1.14.8                        0  \r\ncffi                      1.9.1                    py36_0  \r\nchardet                   2.3.0                    py36_0  \r\nchest                     0.2.3                    py36_0  \r\nclick                     6.7                      py36_0  \r\ncloudpickle               0.2.2                    py36_0  \r\nclyent                    1.2.2                    py36_0  \r\ncolorama                  0.3.7                    py36_0  \r\nconda                     4.3.14                   py36_0  \r\nconda-env                 2.6.0                         0  \r\nconfigobj                 5.0.6                    py36_0  \r\ncontextlib2               0.5.4                    py36_0  \r\ncryptography              1.7.1                    py36_0  \r\ncurl                      7.52.1                        0  \r\ncycler                    0.10.0                   py36_0  \r\ncython                    0.25.2                   py36_0  \r\ncytoolz                   0.8.2                    py36_0  \r\ndask                      0.13.0                   py36_0  \r\ndatashape                 0.5.4                    py36_0  \r\ndbus                      1.10.10                       0  \r\ndecorator                 4.0.11                   py36_0  \r\ndill                      0.2.5                    py36_0  \r\ndocutils                  0.13.1                   py36_0  \r\nentrypoints               0.2.2                    py36_0  \r\net_xmlfile                1.0.1                    py36_0  \r\nexpat                     2.1.0                         0  \r\nezvis3d                   0.2                       <pip>\r\nfastcache                 1.0.2                    py36_1  \r\nflask                     0.12                     py36_0  \r\nflask-cors                3.0.2                    py36_0  \r\nfontconfig                2.12.1                        2  \r\nfreetype                  2.5.5                         2  \r\nget_terminal_size         1.0.0                    py36_0  \r\ngevent                    1.2.1                    py36_0  \r\nglib                      2.50.2                        1  \r\ngmp                       6.1.0                         0  \r\ngraphviz                  2.38.0                        4  \r\ngraphviz                  0.6                       <pip>\r\ngreenlet                  0.4.11                   py36_0  \r\ngsl                       2.2.1                         0  \r\ngst-plugins-base          1.8.0                         0  \r\ngstreamer                 1.8.0                         0  \r\nh5py                      2.6.0               np111py36_2  \r\nharfbuzz                  0.9.39                        2  \r\nhdf5                      1.8.17                        1  \r\nheapdict                  1.0.0                    py36_1  \r\nIBMQuantumExperience      1.1.0                     <pip>\r\nicu                       54.1                          0  \r\nidna                      2.2                      py36_0  \r\nimagesize                 0.7.1                    py36_0  \r\nipykernel                 4.5.2                    py36_0  \r\nipython                   5.1.0                    py36_0  \r\nipython_genutils          0.1.0                    py36_0  \r\nipywidgets                5.2.2                    py36_1  \r\nisort                     4.2.5                    py36_0  \r\nitsdangerous              0.24                     py36_0  \r\njbig                      2.1                           0  \r\njdcal                     1.3                      py36_0  \r\njedi                      0.9.0                    py36_1  \r\njinja2                    2.9.4                    py36_0  \r\njpeg                      9b                            0  \r\njsonschema                2.5.1                    py36_0  \r\njupyter                   1.0.0                    py36_3  \r\njupyter_client            4.4.0                    py36_0  \r\njupyter_console           5.0.0                    py36_0  \r\njupyter_contrib_core      0.3.0                    py36_1    conda-forge\r\njupyter_contrib_nbextensions 0.2.6                    py36_0    conda-forge\r\njupyter_core              4.2.1                    py36_0  \r\njupyter_highlight_selected_word 0.0.10                   py36_0    conda-forge\r\njupyter_latex_envs        1.3.8.2                  py36_1    conda-forge\r\njupyter_nbextensions_configurator 0.2.4                    py36_0    conda-forge\r\nlazy-object-proxy         1.2.2                    py36_0  \r\nlibffi                    3.2.1                         1  \r\nlibgcc                    5.2.0                         0  \r\nlibgfortran               3.0.0                         1  \r\nlibiconv                  1.14                          0  \r\nlibpng                    1.6.27                        0  \r\nlibsodium                 1.0.10                        0  \r\nlibtiff                   4.0.6                         3  \r\nlibtool                   2.4.2                         0  \r\nlibxcb                    1.12                          1  \r\nlibxml2                   2.9.4                         0  \r\nlibxslt                   1.1.29                        0  \r\nllvmlite                  0.15.0                   py36_0  \r\nlocket                    0.2.0                    py36_1  \r\nlxml                      3.7.2                    py36_0  \r\nmarkupsafe                0.23                     py36_2  \r\nmatplotlib                2.0.0               np111py36_0  \r\nmetakernel                0.20.1                    <pip>\r\nmistune                   0.7.3                    py36_0  \r\nmkl                       2017.0.1                      0  \r\nmkl-service               1.1.2                    py36_3  \r\nmpmath                    0.19                     py36_1  \r\nmultipledispatch          0.4.9                    py36_0  \r\nnbconvert                 4.2.0                    py36_0  \r\nnbformat                  4.2.0                    py36_0  \r\nncurses                   5.9                          10  \r\nnetworkx                  1.11                     py36_0  \r\nnltk                      3.2.2                    py36_0  \r\nnose                      1.3.7                    py36_1  \r\nnotebook                  4.3.1                    py36_0  \r\nnumba                     0.30.1              np111py36_0  \r\nnumexpr                   2.6.1               np111py36_2  \r\nnumpy                     1.11.3                   py36_0  \r\nnumpydoc                  0.6.0                    py36_0  \r\noct2py                    4.0.5                     <pip>\r\noctave-kernel             0.26.2                    <pip>\r\nodo                       0.5.0                    py36_1  \r\nopenpyxl                  2.4.1                    py36_0  \r\nopenssl                   1.0.2k                        1  \r\npandas                    0.19.2              np111py36_1  \r\npandoc                    1.15.0.6                      0  \r\npango                     1.40.3                        1  \r\npartd                     0.3.7                    py36_0  \r\npath.py                   10.0                     py36_0  \r\npathlib2                  2.2.0                    py36_0  \r\npatsy                     0.4.1                    py36_0  \r\npcre                      8.39                          1  \r\npep8                      1.7.0                    py36_0  \r\npexpect                   4.2.1                    py36_0  \r\npickleshare               0.7.4                    py36_0  \r\npillow                    4.0.0                    py36_0  \r\npip                       9.0.1                    py36_1  \r\npixman                    0.34.0                        0  \r\nply                       3.9                      py36_0  \r\nprompt_toolkit            1.0.9                    py36_0  \r\npsutil                    5.0.1                    py36_0  \r\nptyprocess                0.5.1                    py36_0  \r\npy                        1.4.32                   py36_0  \r\npyasn1                    0.1.9                    py36_0  \r\npycosat                   0.6.1                    py36_1  \r\npycparser                 2.17                     py36_0  \r\npycrypto                  2.6.1                    py36_4  \r\npycurl                    7.43.0                   py36_2  \r\npydotplus                 2.0.2                     <pip>\r\npyflakes                  1.5.0                    py36_0  \r\npygit2                    0.25.0                    <pip>\r\npygments                  2.1.3                    py36_0  \r\npylint                    1.6.4                    py36_1  \r\npyopenssl                 16.2.0                   py36_0  \r\npyparsing                 2.1.4                    py36_0  \r\npyqt                      5.6.0                    py36_2  \r\npyquil                    0.0.2                     <pip>\r\npytables                  3.3.0               np111py36_0  \r\npytest                    3.0.5                    py36_0  \r\npython                    3.6.0                         0  \r\npython-dateutil           2.6.0                    py36_0  \r\npytz                      2016.10                  py36_0  \r\npyyaml                    3.12                     py36_0  \r\npyzmq                     16.0.2                   py36_0  \r\nqt                        5.6.2                         3  \r\nqtawesome                 0.4.3                    py36_0  \r\nqtconsole                 4.2.1                    py36_1  \r\nqtpy                      1.2.1                    py36_0  \r\nr                         3.3.2                  r3.3.2_0  \r\nr-assertthat              0.1                    r3.3.2_4    r\r\nr-backports               1.0.4                  r3.3.2_0    r\r\nr-base                    3.3.2                         1    r\r\nr-base64enc               0.1_3                  r3.3.2_0    r\r\nr-bh                      1.62.0_1               r3.3.2_0    r\r\nr-bitops                  1.0_6                  r3.3.2_2    r\r\nr-boot                    1.3_18                 r3.3.2_0    r\r\nr-broom                   0.4.1                  r3.3.2_0    r\r\nr-car                     2.1_4                  r3.3.2_0    r\r\nr-catools                 1.17.1                 r3.3.2_2    r\r\nr-class                   7.3_14                 r3.3.2_0    r\r\nr-cluster                 2.0.5                  r3.3.2_0    r\r\nr-codetools               0.2_15                 r3.3.2_0    r\r\nr-colorspace              1.3_1                  r3.3.2_0    r\r\nr-crayon                  1.3.2                  r3.3.2_0    r\r\nr-curl                    2.3                    r3.3.2_0  \r\nr-data.table              1.10.0                 r3.3.2_0    r\r\nr-dbi                     0.5_1                  r3.3.2_0    r\r\nr-devtools                1.12.0                 r3.3.2_0  \r\nr-dichromat               2.0_0                  r3.3.2_2    r\r\nr-digest                  0.6.10                 r3.3.2_0    r\r\nr-doparallel              1.0.10                 r3.3.2_0  \r\nr-dplyr                   0.5.0                  r3.3.2_0    r\r\nr-evaluate                0.10                   r3.3.2_0    r\r\nr-forcats                 0.1.1                  r3.3.2_0    r\r\nr-foreach                 1.4.3                  r3.3.2_0    r\r\nr-foreign                 0.8_67                 r3.3.2_0    r\r\nr-formatr                 1.4                    r3.3.2_0    r\r\nr-ggplot2                 2.2.0                  r3.3.2_0  \r\nr-gistr                   0.3.6                  r3.3.2_0    r\r\nr-git2r                   0.16.0                 r3.3.2_0  \r\nr-glmnet                  2.0_5                  r3.3.2_0    r\r\nr-gridbase                0.4_7                  r3.3.2_0  \r\nr-gtable                  0.2.0                  r3.3.2_0    r\r\nr-haven                   1.0.0                  r3.3.2_0    r\r\nr-hexbin                  1.27.1                 r3.3.2_0    r\r\nr-highr                   0.6                    r3.3.2_0    r\r\nr-hms                     0.3                    r3.3.2_0    r\r\nr-htmltools               0.3.5                  r3.3.2_0    r\r\nr-htmlwidgets             0.8                    r3.3.2_0    r\r\nr-httpuv                  1.3.3                  r3.3.2_0    r\r\nr-httr                    1.2.1                  r3.3.2_0  \r\nr-igraph                  1.0.1                  r3.3.2_0  \r\nr-irdisplay               0.4.4                  r3.3.2_0    r\r\nr-irkernel                0.7.1                  r3.3.2_0    r\r\nr-irlba                   2.1.2                  r3.3.2_0  \r\nr-iterators               1.0.8                  r3.3.2_0    r\r\nr-jsonlite                1.1                    r3.3.2_0    r\r\nr-kernsmooth              2.23_15                r3.3.2_0    r\r\nr-knitr                   1.15.1                 r3.3.2_0    r\r\nr-labeling                0.3                    r3.3.2_2    r\r\nr-lattice                 0.20_34                r3.3.2_0    r\r\nr-lazyeval                0.2.0                  r3.3.2_0    r\r\nr-lme4                    1.1_12                 r3.3.2_0    r\r\nr-lubridate               1.6.0                  r3.3.2_0    r\r\nr-magrittr                1.5                    r3.3.2_2    r\r\nr-maps                    3.1.1                  r3.3.2_0    r\r\nr-markdown                0.7.7                  r3.3.2_2    r\r\nr-mass                    7.3_45                 r3.3.2_0    r\r\nr-matrix                  1.2_7.1                r3.3.2_0    r\r\nr-matrixmodels            0.4_1                  r3.3.2_0    r\r\nr-memoise                 1.0.0                  r3.3.2_0  \r\nr-mgcv                    1.8_16                 r3.3.2_0    r\r\nr-mime                    0.5                    r3.3.2_0    r\r\nr-minqa                   1.2.4                  r3.3.2_2    r\r\nr-mnormt                  1.5_5                  r3.3.2_0    r\r\nr-modelr                  0.1.0                  r3.3.2_0    r\r\nr-munsell                 0.4.3                  r3.3.2_0    r\r\nr-nlme                    3.1_128                r3.3.2_0    r\r\nr-nloptr                  1.0.4                  r3.3.2_2    r\r\nr-nmf                     0.20.6                 r3.3.2_0  \r\nr-nnet                    7.3_12                 r3.3.2_0    r\r\nr-openssl                 0.9.5                  r3.3.2_0  \r\nr-pbdzmq                  0.2_4                  r3.3.2_0  \r\nr-pbkrtest                0.4_6                  r3.3.2_0    r\r\nr-pkgmaker                0.22                   r3.3.2_0  \r\nr-plyr                    1.8.4                  r3.3.2_0  \r\nr-pryr                    0.1.2                  r3.3.2_0    r\r\nr-psych                   1.6.9                  r3.3.2_0    r\r\nr-purrr                   0.2.2                  r3.3.2_0    r\r\nr-quantmod                0.4_7                  r3.3.2_0    r\r\nr-quantreg                5.29                   r3.3.2_0    r\r\nr-r6                      2.2.0                  r3.3.2_0    r\r\nr-randomforest            4.6_12                 r3.3.2_0    r\r\nr-rbokeh                  0.5.0                  r3.3.2_0    r\r\nr-rcolorbrewer            1.1_2                  r3.3.2_3    r\r\nr-rcpp                    0.12.8                 r3.3.2_0  \r\nr-rcpparmadillo           0.7.500.0.0            r3.3.2_0  \r\nr-rcppeigen               0.3.2.9.0              r3.3.2_0    r\r\nr-readr                   1.0.0                  r3.3.2_0    r\r\nr-readxl                  0.1.1                  r3.3.2_0    r\r\nr-recommended             3.3.2                  r3.3.2_0    r\r\nr-registry                0.3                    r3.3.2_0  \r\nr-repr                    0.10                   r3.3.2_0    r\r\nr-reshape2                1.4.2                  r3.3.2_0  \r\nr-rmarkdown               1.3                    r3.3.2_0    r\r\nr-rngtools                1.2.4                  r3.3.2_0  \r\nr-rpart                   4.1_10                 r3.3.2_0    r\r\nr-rprojroot               1.1                    r3.3.2_0    r\r\nr-rstudioapi              0.6                    r3.3.2_0  \r\nr-rvest                   0.3.2                  r3.3.2_0    r\r\nr-scales                  0.4.1                  r3.3.2_0  \r\nr-selectr                 0.3_0                  r3.3.2_0    r\r\nr-shiny                   0.14.2                 r3.3.2_0    r\r\nr-sourcetools             0.1.5                  r3.3.2_0    r\r\nr-sparsem                 1.74                   r3.3.2_0    r\r\nr-spatial                 7.3_11                 r3.3.2_0    r\r\nr-stringi                 1.1.2                  r3.3.2_0    r\r\nr-stringr                 1.1.0                  r3.3.2_0    r\r\nr-survival                2.40_1                 r3.3.2_0    r\r\nr-tibble                  1.2                    r3.3.2_0  \r\nr-tidyr                   0.6.0                  r3.3.2_0    r\r\nr-tidyverse               1.0.0                  r3.3.2_0    r\r\nr-ttr                     0.23_1                 r3.3.2_0    r\r\nr-uuid                    0.1_2                  r3.3.2_0    r\r\nr-whisker                 0.3_2                  r3.3.2_2  \r\nr-withr                   1.0.2                  r3.3.2_0  \r\nr-xml2                    1.0.0                  r3.3.2_0    r\r\nr-xtable                  1.8_2                  r3.3.2_0    r\r\nr-xts                     0.9_7                  r3.3.2_2    r\r\nr-yaml                    2.1.14                 r3.3.2_0    r\r\nr-zoo                     1.7_13                 r3.3.2_0    r\r\nreadline                  6.2                           2  \r\nredis                     3.2.0                         0  \r\nredis-py                  2.10.5                   py36_0  \r\nrequests                  2.12.4                   py36_0  \r\nrope                      0.9.4                    py36_1  \r\nrpy2                      2.8.5              py36r3.3.2_2  \r\nruamel_yaml               0.11.14                  py36_1  \r\nscikit-image              0.12.3              np111py36_1  \r\nscikit-learn              0.18.1              np111py36_1  \r\nscipy                     0.18.1              np111py36_1  \r\nseaborn                   0.7.1                    py36_0  \r\nsetuptools                27.2.0                   py36_0  \r\nshellpy                   0.5.0                     <pip>\r\nsimplegeneric             0.8.1                    py36_1  \r\nsingledispatch            3.4.0.3                  py36_0  \r\nsip                       4.18                     py36_0  \r\nsix                       1.10.0                   py36_0  \r\nsnowballstemmer           1.2.1                    py36_0  \r\nsockjs-tornado            1.0.3                    py36_0  \r\nsphinx                    1.5.1                    py36_0  \r\nspyder                    3.1.2                    py36_0  \r\nsqlalchemy                1.1.5                    py36_0  \r\nsqlite                    3.13.0                        0  \r\nstatsmodels               0.6.1               np111py36_1  \r\nsympy                     1.0                      py36_0  \r\nterminado                 0.6                      py36_0  \r\ntk                        8.5.18                        0  \r\ntoolz                     0.8.2                    py36_0  \r\ntornado                   4.4.2                    py36_0  \r\ntraitlets                 4.3.1                    py36_0  \r\nunicodecsv                0.14.1                   py36_0  \r\nwcwidth                   0.1.7                    py36_0  \r\nwerkzeug                  0.11.15                  py36_0  \r\nwget                      1.18                          0  \r\nwget                      3.2                       <pip>\r\nwheel                     0.29.0                   py36_0  \r\nwidgetsnbextension        1.2.6                    py36_0  \r\nwrapt                     1.10.8                   py36_0  \r\nxlrd                      1.0.0                    py36_0  \r\nxlsxwriter                0.9.6                    py36_0  \r\nxlwt                      1.2.0                    py36_0  \r\nxz                        5.2.2                         1  \r\nyaml                      0.1.6                         0  \r\nzeromq                    4.1.5                         0  \r\nzlib                      1.2.8                         3   Aha! Passing these settings to terminado is new in notebook 5.0, which should be released very soon. That's why it's not getting picked up. Thanks for clearing this up! Looking  forward to 5.0 :-)\n\nOn Fri, Mar 31, 2017 at 4:18 AM, Min RK <notifications@github.com> wrote:\n\n> Aha! Passing these settings to terminado is new in notebook 5.0, which\n> should be released very soon. That's why it's not getting picked up.\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/2339#issuecomment-290648131>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AFDYcimysVgJTZEBV5KMladT92JrsnPsks5rrLbygaJpZM4Mo7TQ>\n> .\n>\n","I'd suggest just running these cells individually vs. \"Run all\" or \"Run all below\". This allows you to edit the second cell while the first cell is running.  I am not sure to understand your point.\r\n\r\n> I'd suggest just running these cells individually vs. \"Run all\" or \"Run all below\".\r\n\r\nYou mean running them one by one, starting the next one whenever the first one has finished?\r\n\r\nMy workflow may be a bit non standard, but this does not solve the issue. What I am proposing here is rather to have some \"queue\" for planned executions of cells and be able to edit it (reordering cells, adding new cells to the queue and cancelling some planned executions). The idea of an execution queue is a good idea. I think such a feature would be best implemented as a notebook extension. It could use the cell toolbar (see an example of \"cell tags\" toolbar) to mark cells for upcoming execution by pressing a button or selecting a position in the queue (e.g. 1, 2, 3...). If you interested in working on such an extension, I am happy to provide direction.\r\n\r\n![image](https://cloud.githubusercontent.com/assets/512354/24458790/cb09b372-144e-11e7-8b3c-a824c77e6884.png)\r\n","If I understand correctly, the notebook is handling `cwd` the same as a regular Python file would (`cwd` is `os.path.dirname(os.path.realpath(__file__))`). \r\n\r\nAs you mentioned, you can `os.chdir('..')` in your notebook to set the `cwd`. Meh, thats a bit underwhelming. In quite a lot of python development the run directory can be decoupled from the directory of the file. (working in spyder for example). This would be just the same as running something like\r\n```\r\nipython notebook notebooks/your_script.ipynb\r\n```\r\n\r\nBy separating that out it becomes simple to organise your code into modules with a folder hierarchy.\r\n\r\nThe symptoms of the design choices made with jupyter notebook are evident in most \"Data Analysts\" work book structure, where there can sometimes be 100's of files in one folder, and each work book comes with a ton of \"code\" because you are not encouraged to modularise your programming. see [some](http://nbviewer.jupyter.org/url/jakevdp.github.com/downloads/notebooks/XKCD_plots.ipynb) [popular](http://nbviewer.jupyter.org/github/sanand0/ipython-notebooks/blob/master/Office.ipynb) [examples](http://nbviewer.jupyter.org/github/dolaameng/tutorials/blob/master/cv-tutorials/BASIC_image_processing.ipynb) [yeah i get most of thease are about the code].\r\n\r\nMy point being if you have all of your code in a report, at some point it stops being a report, and being able to have a decent folder structure is part of this.\r\n The kernel started for a notebook has a working directory of where the notebook file is. I think that makes sense for a *lot* of usecases, and is immediately understandable.\r\n\r\nIf you want to be able to import python files from another place, you could add that other directory to your `sys.path`. You could even put this into a small stub python file in the notebook directory and import it at the top of each notebook. For example, put this in `myfiles.py` in the same directory as the notebooks:\r\n\r\n```python\r\nimport sys\r\nimport os\r\nsys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), '../python')))\r\n```\r\nand then in the notebook, just do `import myfiles`. That will set up the path so that you can import your python files. > ipython notebook notebooks/your_script.ipynb\r\n\r\nRemember that the notebook server is for running many notebooks. We don't have the concept of launching just a single notebook and kernel.\r\n\r\nIf we had this concept of launching a single notebook, i.e., running a single kernel for a single notebook, I agree it would make a lot of sense to treat it like running a python file. I think there is some way to override where the kernel's working directory is set through the config, but I'd advise against it, because then you'll have notebooks that only work if they're run with that specific config. @takluyver I don't mind that, as then I could run the config for a project, which I personally find to be a better way to separate my work.  I would _want_ to launch notebooks for a particular projects. \r\n\r\nIt makes sense for my workflow to access several notebooks sharing config within a project, and it also makes sense for me to not be able to access notebooks across projects.\r\n\r\nCould you give me a hint of how to do this?  I've tried playing with `c.NotebookApp.notebook_dir`, but that was the wrong one for me.\r\n\r\nThanks for the help\r\nAkhil Hmm, maybe it's not as easy as I thought. I think you may need to provide a custom KernelManager and override this method:\r\nhttps://github.com/jupyter/notebook/blob/0d289458e8ee6318aa1bbd0e921eb008a7d4972d/notebook/services/kernels/kernelmanager.py#L64\r\n\r\nI still think it's a bad idea, anyway - if you copy the folder to another computer, or lose your custom config, your notebooks will all break. It seems much better to modify `sys.path` inside the notebook so you can import the things you want. Thanks for the help. Re; it being a bad idea due as I would lose the config, I would store the config in the project repo and commit it like any other project working file, and if the solution is tied to anything outside of the root folder of the project, this wouldn't be the solution for me.  I appreciate the time you put in to helping. I'll give it a couple of hours, then I imagine it may be worth giving up after that point. Thanks. Thanks @takluyver!\r\n\r\n@AkhilNairAmey Can we close this issue?","I'm closing this issue as it's a duplicate of https://github.com/jupyter/notebook/issues/1647 Sorry. Google failed me ;) It's ok. What we need is some AI that answers people's questions using all the knowledge in our issues \ud83d\udcad\ud83d\udc4d ","Try starting fresh:\r\n\r\n    git clean -xfd # deletes all untracked files\r\n    python setup.py js css\r\n\r\nThis worked for me with the same setup you describe.\r\n     @michaelaye Let us know if that resolves it for you \ud83d\udc4d  yep, that does it, thanks! Sorry for not reading `CONTRIBUTING.rst` properly, but for what it's worth: I'm usually efficient in scraping websites by eye, and the sentence \"Don't forget to run npm run build after switching branches\" made me ignore the rest of the paragraph, as I wasn't switching branches, but in there's the tip with `git clean -xfd`.","What's `pip list`? Specifically `python-dateutil`?\r\n\r\nAlso make sure you are using pip >= 9.","Closing as this is in ipython jurisdiction... ","Hm, test is failing which is super weird. Need to investigate further. @minrk It sounds like this should make it in 5.0.0? Sure. It's just fixing a deprecation message that's been there for a while, removing a line of code that didn't do anything.","@minrk Should we also try to include this in 5.0.0? Sure. Not a big deal, though.","[nbmanager](https://github.com/takluyver/nbmanager) can stop a notebook server on demand. Even if the GUI is not to your taste, it has a Python API module which can do the same thing. I agree that a command line interface would be good too.","It looks like a [new event listener is added on `CodeCell.execute`](https://github.com/jupyter/notebook/blame/9dd3818a00fddc07e474202c6fb018868062bed4/notebook/static/notebook/js/codecell.js#L338-L342) which would explain why you get _n_ number of events triggered for _n_ number of executes called. I think the simplest fix is to use `events.one` which will remove the event listener after the first event is handled. FYI @dkrenn:\r\n\r\nUsing [`events.on`](http://api.jquery.com/on/) will create a new event listener every time a cell is executed. [`events.one`](http://api.jquery.com/one/) will also create a new event listener, but then dispose itself after the first event is handled. @juhasch If you get a chance, can you checkout this PR and confirm the it fixes this issue:\r\n\r\n```\r\ngit fetch jupyter pull/2354/head:pr/2354\r\ngit checkout pr/2354\r\npip install -e .\r\n```` @gnestor Ok, thank you (I didn't know).  Tried it, looks good \ud83d\udc4d \r\nThanks for the quick fix!","Not sure how we could be causing that. Maybe it's a layout issue, and the labels are getting cut off the edge of the plot? @tacaswell, any ideas?","[`code` is the Interpreter base class from Python](https://docs.python.org/3.5/library/code.html) which seems like an import collision. I can't reproduce this locally with the notebook or `ipython`, so I'm not sure how to make this happen. Ok I figured it out. The problem was that somewhere in the sequence of imports there was an `import pdb` (from the stdlib) which in turn imported:\r\n\r\nimport os\r\nimport re\r\nimport sys\r\nimport cmd\r\nimport bdb\r\nimport dis\r\nimport code\r\nimport glob\r\nimport pprint\r\nimport signal\r\nimport inspect\r\nimport traceback\r\nimport linecache\r\n\r\nAnd obviously based on the python module lookup system its going to look for `code.py` in `.` before looking in your site packages. So yes I was able to reproduce the same problem if I had `code.py`, `cmd.py`, `dis.py` etc in my working directory.\r\n\r\nThe moral of the story is: dont name any module in your code the same as a module in the standard lib. A hard thing to do in python with so many standard lib modules. The issue is closed. Yeah, this is a longstanding annoyance. It's not obvious what module names to avoid. FWIW, in ipykernel  4.6 we've made a change that should allow your kernel to start in these situations.","To followup, I have even created a fresh conda env, but I get the exact same error.\r\n\r\nHere also is my conda info:\r\n\r\n```\r\nCurrent conda install:\r\n\r\n               platform : osx-64\r\n          conda version : 4.2.13\r\n       conda is private : False\r\n      conda-env version : 4.2.13\r\n    conda-build version : 2.0.2\r\n         python version : 3.5.2.final.0\r\n       requests version : 2.13.0\r\n       root environment : /Users/fonnescj/anaconda3  (writable)\r\n    default environment : /Users/fonnescj/anaconda3/envs/dev\r\n       envs directories : /Users/fonnescj/anaconda3/envs\r\n          package cache : /Users/fonnescj/anaconda3/pkgs\r\n           channel URLs : https://conda.anaconda.org/conda-forge/osx-64\r\n                          https://conda.anaconda.org/conda-forge/noarch\r\n                          https://repo.continuum.io/pkgs/free/osx-64\r\n                          https://repo.continuum.io/pkgs/free/noarch\r\n                          https://repo.continuum.io/pkgs/pro/osx-64\r\n                          https://repo.continuum.io/pkgs/pro/noarch\r\n            config file : /Users/fonnescj/.condarc\r\n           offline mode : False\r\n``` I can further confirm that installing Seaborn via pip does not fix this issue. Complete reinstallation of Anaconda fixed the issue. As it turns out, this does not fix this issue as I first claimed. It is not restricted to the seaborn package either. This occurs with pip-installed packages as well as conda:\r\n\r\n![](http://d.pr/i/6hhK+) I think you need to restart the kernel for this to work. Besides, you have to be sure to be using the right `pip` (e.g. `pip` that comes with Anaconda instead of system `pip`). I've restarted the kernel multiple times, but this continues to occur. I have even tried deactivating and reactivating the conda env. I can also confirm that it is the pip installed into the current env, rather than the one in the root env. I can import this library from the ipython console without issue.\r\n\r\nI can also confirm that `sys.executable` is what I expect it to be:\r\n\r\n    '/Users/fonnescj/anaconda3/bin/python' Just to clarify, I am using a conda env based on this yml:\r\n\r\n```yml\r\nname: dev\r\n\r\nchannels:\r\n - conda-forge\r\n \r\ndependencies:\r\n- python=3.6\r\n- arrow\r\n- basemap\r\n- blaze\r\n- bokeh\r\n- cython\r\n- dask\r\n- engarde\r\n- ipython\r\n- jupyter\r\n- notebook\r\n- ipyparallel\r\n- ipywidgets\r\n- joblib\r\n- jupyter_client\r\n- jupyter_core\r\n- jupyter_contrib_nbextensions\r\n- jupyter_nbextensions_configurator\r\n- jupyterlab\r\n- line_profiler\r\n- mkl-service\r\n- numexpr\r\n- numba\r\n- numpy\r\n- openpyxl\r\n- pandas\r\n- patsy\r\n- pillow\r\n- pip\r\n- pylint\r\n- scikit-learn\r\n- scipy\r\n- seaborn\r\n- snakeviz\r\n- sympy\r\n- tensorflow\r\n- theano\r\n- xlrd\r\n- pip:\r\n  - GPy\r\n  - PyCap\r\n  - pystan\r\n  - rpy2\r\n  - git+https://github.com/GPflow/GPflow.git#egg=GPflow\r\n  - git+https://github.com/pymc-devs/pymc3.git#egg=pymc3\r\n```\r\n\r\nThe env was created and all packages were installed without error, but some packages can be loaded into the notebook, while others were not. Even installing the old fashioned way with `python setup.py install` does not result in the notebook seeing the package. I'm at a loss here. Tried installing on an AWS instance. Same problem.  What if you use a proper terminal instead of trying to run `!pip` in the notebook? I was only using pip in the notebook to list the installed package. It was installed first with conda when I created the env and then using pip from a conventional terminal. ","That sounds like it's not saving before it offers you the document for download. We try to save, but we have to do it with a synchronous HTTP request, because downloading uses `window.open()`, which we can only call while handling a click event. You can work around it by explicitly saving (Ctrl+S, or click the save button in the toolbar) just before you download.\n\nI see the same issue on try.jupyter.org using Firefox.\n\nWe may be able to get round this using a trick we have elsewhere: create a window while handling a click, and then set its location in a separate callback.\n Exactly\uff01Thank you so much. I thought it could be automatically saved. But I see the problem now.\n","@minrk this is the only thing currently open and tagged for 4.0, can you take a look? It should be straightforward.\n","As the person who wrote this expression, I'm -1 on this change.\n\nI prefer multi-line comprehensions over one giant line because I think it clearly differentiates the three operations that are happening in the comprehension:\n\n```\n{\n     <expression>\n     <iteration>\n     <filter>\n}\n```\n\nMaybe I'm just used to reading my own style, but I find this separation much clearer than having to parse the logical sections in a long line by hand.\n I don't have a strong feeling. I don't personally find a one-line comprehension easier to follow than a multi-line one, if anything it's slightly the other way around. I'm not especially fond of filtered comprehensions in general.\n The multiple bindings of the name `key` in the expressions here make this unusually hard to parse I think.  A totally sane alternative is also to not use a comprehension at all:\n\n```\nerrors = {}\nfor key in maybe_none_keys:\n    if model[key] is not None:\n        errors[key] = model[key]\n```\n\nThis feels verbose to me, but it's almost certainly the most straightforward spelling.\n I'd be AOK with removing the comprehension if that's helpful to people. I don't think reshaping the comprehension improves it, though.\n I think why I struggled to understand it were:\n1. not used to dict comprehensions\n2. having for and if on separate lines helped me parse them as for and if statements, which threw my brain for a loop when it just didn't make sense\n3. The list comprehension a few lines above is almost the same thing, but on a single line\n\nIn general, I think comprehensions are more efficient than explicit loops, so I prefer them, so I'll close this as a style issue.\n P.S. It wasn't just me.  I showed it to @SylvainCorlay as well, and he stared at it blankly for a few seconds before I explained what it was.\n @jasongrout if you wanted to keep this PR and turn it into the for-loop, that would be fine. I don't think this is a case where any efficiency benefits of a comprehension will be noticeable, since it's also talking to a filesystem or external data store.\n","I think it's another case of \"where should the output go\". The kernel is probably sending the output, but the notebook frontend doesn't know which cell to associate it with, so it discards it. I seem to recall @jdfreder spent some effort working round this for widgets. It would be good to have a more general solution, but I'm not sure what shape that would take.\n Yeah, this is exactly the kind of thing I had to tackle with the widgets.  The notebook isn't smart enough to know what cell triggered the click event, so you need to tell it before sending the message to the backend.\n\nThanks for pinging me here @takluyver , this is one of the things I'm trying to reimagine with the output area work I'm doing.\n Threaded output is associated with the most recent execution (by the kernel). With a GUI backend, I see the output in the cell (whichever is the most recently executed). With the nbagg backend, the most recent request is likely to be a comm message, and the nbagg backend is presumably dropping those messages. The nbagg backend could hook up the cell output callback for output messages it receives for its comms.\n Mmmh... @ellisonbg, this is something that perhaps Ryan could work on as part of the MPL work.. . He might be able to make an improvement to the actual nbagg backend in MPL itself, working with @tacaswell (perhaps with some guidance from @minrk).  What do you think?\n @blink1073 is also working on a widget based version of nbagg \n Yes, see #4582 for where I left off.  https://github.com/matplotlib/matplotlib/issues/4582\n The issue I ran in to originally that the div created by `mpl.show` was being changed from under its nose during `interact`.\n When the following cell is executed, the `comm_manager` creates an nbagg connection, which creates a div.   Might there be a way to add the nbagg div to the list of widgets in `interactive`?\n\n``` python\n%matplotlib notebook\nimport matplotlib.pyplot as plt\nfrom IPython.html.widgets import interactive\n\nfig, ax = plt.subplots()\nax.plot(range(5))\n\n\nvline = ax.axvline(1, color='k')\nhline = ax.axhline(0.5, color='k')\n\ndef set_cursor(x, y):\n    vline.set_xdata((x, x))\n    hline.set_ydata((y, y))\n    ax.figure.canvas.draw_idle()\n\ninteractive(set_cursor, x=ax.get_xlim(), y=ax.get_ylim())\n```\n @jdfreder, perhaps you have some insights that can help us here?\n @blink1073 if you want the div to be treated as something that can be used by interact, you'll need to write a custom widget view and python widget.  The `value` traitlet of the widget will be what interact reads/writes.\n If instead you want something that doesn't display in the widget area, you may be able to fool it by having a Python class that inherits from HasTraits, having a traitlet called `value`.  Interact would read/write that value like it was a widget.\n Not sure this should be closed.  We also have an open mpl issue related to exceptions from event callbacks also being swallowed https://github.com/matplotlib/matplotlib/issues/5111\n OK, marking as 5.0\n It could be argued that this should only be a bug on the mpl side, but I suspect that we will need some support from IPython on this one.\n Fixed by https://github.com/matplotlib/matplotlib/pull/5754.\n\n<img width=\"839\" alt=\"screen shot 2016-05-04 at 2 03 12 pm\" src=\"https://cloud.githubusercontent.com/assets/2096628/15025868/04e64fac-1201-11e6-8dd6-2f3ffe105942.png\">\n Wonderful, thanks folks. Closing here (obviously users will need a newer mpl to get the fix, but that's fine).\n I would greatly appreciate a working example... in this code I can't even see the button\njupyer == 4.1.0\nmatplotlib == 1.5.1\npython 2.7\n\n```\n%matplotlib notebook\nfrom matplotlib.widgets import Button\nimport matplotlib.pyplot as plt\ndef callback(event):\n    plt.text(event.xdata, event.ydata, 'clicked')\n\nf,a = plt.subplots(1)\nb1 = Button(a,'Button1')\nb1.on_clicked(callback)\nplt.show()\n```\n","Because the line numbers on master are liable to change: the functions in our code are `{to,from}_absolute_cursor_position`, and in CodeMirror, `posFromIndex` and `indexFromPos`. +1 to removing ours if we can.\n :+1: to removing our own implementations if they are redundant.\n","@jasongrout should we merge this as-is, or wait for it to be more complete?\n wait.  [WIP] stands for work-in-progress.  I'm opening the PR to (a) back up my local work, and (b) notify the community that is going on.\n @jasongrout will you be trying to get this in for 4.1?  If so, go ahead and change the milestone back to 4.1 - I'm going to change it to 5.0 in the meantime.\n Updated to the more complete version from jupyter-js-services in #979\n Need rebase. \n This was finished in #979, just forgot to close.\n","We use these so we can override certain behavior.\nExample:\nTree.html\n\n``` python\n{% extends \"templates/tree.html\" %}\n{% block clusters_tab_attributes %}\nstyle=\"visibility:collapse\"\n{% endblock %}\n```\n\nand notebook.html\n\n``` python\n{% extends \"templates/notebook.html\" %}\n\n{% block kernel_logo_widget %}\n{{ super() }}\n<a class=\"pull-right\" style=\"vertical-align:middle;\" href=\"https://studio.azureml.net/\" target=\"_blank\">\n    <img class=\"azure_ml_logo\" src=\"/content/ipython/base/images/powered_by_azure_ml.png\"/>\n</a>\n{% endblock %}\n\n{% block helplink_attributes %}\nrel=\"noreferrer\"\n{% endblock %}\n\n{% block help %}\n{{ super() }}\n<li title=\"About Azure ML's Privacy and Cookies Policy\"><a id=\"notebook_privacy\" href=\"https://go.microsoft.com/fwlink/?LinkID=131004\" target=\"_blank\">Privacy + Cookies</a></li>\n{% endblock %}\n```\n\nWe also pull this trick in page, but it was already there.\n\n``` python\n{% extends \"templates/page.html\" %}\n{% block login_widget %}\n{{ super() }}\n<a class=\"pull-right\" style=\"vertical-align:middle;\" href=\"https://studio.azureml.net/\" target=\"_blank\">\n    <img class=\"azure_ml_logo\" src=\"/content/ipython/base/images/powered_by_azure_ml.png\"/>\n</a>\n{% endblock %}\n```\n Thanks for the feedback @minrk, I think using custom.css for those attributes makes good sense. I have made the changes to remove the two blocks and replace them css classes that can be used.\n I just had a chat with @DinoV and he is starting a thread on the security group about the noreferrer link.  I am just removing that change from this so it can be handled separately.  I thought we would want to customize ours to add 'rel=\"noreferrer\"' but it seems that should probably be there in Jupyter\n","What do you get from:\n\n``` python\nimport webbrowser\nwebbrowser.get(\"C:/Program Files (x86)/Google/Chrome/Application/chrome.exe\")\n```\n In An IPython session \n\n```\nIn [3]: import webbrowser\nIn [4]: webbrowser.get(\"C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe\")\n---------------------------------------------------------------------------\nError                                     Traceback (most recent call last)\n<ipython-input-4-37fdc3f3c27d> in <module>()\n----> 1 webbrowser.get(\"C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe\")\n\nC:\\Anaconda\\lib\\webbrowser.pyc in get(using)\n     50             elif command[0] is not None:\n     51                 return command[0]()\n---> 52     raise Error(\"could not locate runnable browser\")\n     53\n     54 # Please note: the following definition hides a builtin function.\n\nError: could not locate runnable browser\n```\n\nThe file IS there, however:\n\n```\nIn [5]: ls \"C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe\"\n Volume in drive C has no label.\n Volume Serial Number is 1A8B-DF1C\n\n Directory of C:\\Program Files (x86)\\Google\\Chrome\\Application\n\n07/25/2015  09:46 AM           813,896 chrome.exe\n               1 File(s)        813,896 bytes\n               0 Dir(s)  42,196,086,784 bytes free\n```\n\nI realised that in my original report, I had mixed back and forward slashes in the second command so in `cmd.exe` I did\n\n```\nipython notebook --browser=\"C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe\"\n```\n\nDoesn't work. Same error as reported originially.\nBack to IPython, changing the direction of slashes around gives the same error but this time, file not found when doing an `ls`\n\n```\nIn [6]: ls \"C:/Program Files (x86)/Google/Chrome/Application/chrome.exe\"\n Volume in drive C has no label.\n Volume Serial Number is 1A8B-DF1C\n\n Directory of C:\\Program Files (x86)\\Google\\Chrome\\Application\n\nFile Not Found\n```\n Looking at the docs for the webbrowser module, it looks like you're supposed to pass a name like 'chrome' instead of a path: https://docs.python.org/3/library/webbrowser.html\n @mikecroucher does it work if you do `--browser='chrome'`?\n Closing for inactivity and issue in webbrowser module anyway. \n For the sake of completeness: this can be made to work by registering Chrome in the webbrowser module first. \nSee [this StackOverflow answer](http://stackoverflow.com/questions/15632663/launch-ipython-notebook-with-selected-browser).\n","will conflict with #17 \n #17 nullifies this - and I prefer #17 .\n","they certainly should. Someone's not looking in the right path.\n Have you pulled recently? This sounds like the same issue I fixed in #213.\n Yep, it is the most recent master with #213.\nThe code path addressed in #213 never gets called for me.\n`self.config_manager.config_dir` is `/Users/juhasch/.jupyter`\n",":+1: \n LGTM too...\n Looks good, now it works as expected with the `notebook.json`in the `nbconfig` dir. Thanks.\n","We don't expose any such functionality in the UI. It would be possible in an extension, though working out what to do with the cell output and prompt number might be tricky.\n Yup, running selected text is not technically complicated. As @takluyver points out, though, It is a bit unclear what the right consequences of that execution should be in terms of representation in the document. Should it execute as normal (i.e. behave the same as commenting-out the remainder of the cell, executing, and uncommenting)? Or should it send the snippet's output to a transient output area (a bit tricky right now, but should become easier with some upcoming refactoring)? Or create a new cell with the snippet?\n\nThe first option would be very simple to implement and potentially useful, but violates a bit of the document metaphor, since there's no longer an indication of what code was actually executed to produce the output.\n Thank you very much for considering this inquiry.\n\nI would already be very excited about the first simpler option, where the calculation behaves as if the remainder of the text would have been temporarily commented out.  Would it be just a matter of sending the highlighted code to the method that usually executes the full cell contents?\n\nThe second version, featuring a special output region for 'debugging' sounds like it would require more extensive development, but it could be an interesting alternative add-on feature.\n\nCould the first version be done via a minimal change to the jupyter browser code base, such that it becomes automatically part of all installed kernels, such a for example python, pyspark, scala, R ...  ?\n\nWhat would it take to add (hack) this sort of feature to a local (private) copy of the code? Would very much appreciate any pointers in this regard. Thanks\n I think the simple version of this can be done as a JS extension fairly easily. You'd just need to:\n- Create a function that gets the selected text from the selected cell and executes it\n- Hook up a toolbar button and/or keyboard shortcut to call your function.\n\n@Carreau knows the details of these things best, I think\n I'll try to write how to do that and publish and proof of concept of extension that does it. \n What about [this](http://carreau.gitbooks.io/jupyter-book/content/custom-extension-1.html) ?\n\n![ext1](https://cloud.githubusercontent.com/assets/335567/9048998/65e6d930-39f2-11e5-9713-85278eced2c2.gif)\n Thank you very much Carreau, that's great, also for pointing to your insightful documentation. Does the method of creating the extension in ~/.jupyter/nbextensions/runselected work with a production copy for jupyter or does it require a rebuild from the git source?\n\nHow would one configure the notebook to load up the extension as default, without the need to access the console? I guess there is a way to add a toggle button to the notebook .... \n\nTo try, I did build the notebook from the git repo on an fresh ubuntu vagrant image. But while being able to compile and run the original notebook, I did not quite yet get the extension working form the ~./jupyter location. However I got it to work  when sourcing the all functions  from main.js directly into Chrome's JS console. I might be missing something ....\n > Does the method of creating the extension in ~/.jupyter/nbextensions/runselected work with a production copy for jupyter or does it require a rebuild from the git source?\n\nIt works on master, on Stable,3.x production put it into `~/.ipython/nbextensions`. For global install , `/usr/local/share/jupyter/nbextensions` should work across users. (it is a search path) \nit might need a server restart in some cases though. \n\nThe following does configure the server to load the extension automatically, you only have to do it once. \n\n```\nIPython.notebook.config.update({\n  \"load_extensions\": {\"runselected/main\": true}\n})\n```\n\nmore especially it just create/update this config file:\n\n```\n~ $ cat ~/.jupyter/nbconfig/notebook.json\n{\n  \"load_extensions\": {\n    \"nbgrader/create_assignment\": true,\n    \"runselected/main\": true  // <- update/create this line. \n  }\n}\n```\n\nSo you can do it programmatically if you like. \nI did not fiddled around with my system, except symlink `~/Library/Jupyter/nbextensions` to `~/.jupyter/nbextension` so it should work for you. In particular you should see `Loaded extension: runselected/main` in Chrome console, or an error if it does not get the config.\n\nYou might need to restart the server after activating the extension though because of caching, and aggressively page refresh. \n Perfect! Got it to work as well now, by setting the following symlink within the VM:\n\nsudo ln -s /home/vagrant/.jupyter /usr/local/share/jupyter\n\nps. for reference if anyone is interested, I'm running on a vagrant image using the following to start up the server: \n\njupyter notebook --no-browser --ip=0.0.0.0 --port=5000\n\nwhile enabling port forwarding within the \"Vagrantfile\":\n\nconfig.vm.network \"forwarded_port\", host: 5000, guest: 5000, auto_correct: true\n\nFinally the notebook is accessible on the host machine at:\n\nhttp://127.0.0.1:5000/\n The runselected extension in exactly what I wanted. Thanks.\n\nI really would like to map it to Cmd-Enter though. I tried editing the javascript to \"Cmd-Enter\" and I can get it to spit out \"executing selection\" to the console but the selection is not run. I simply get a newline. Anyway to over ride the existing behavior?\n","There are a couple of ways you could do something like this:\n- Configure a post-save hook that runs git commit every time a notebook is saved. I don't think that sees a distinction between a user-initiated save and an autosave, though.\n- Write a [contents manager](http://jupyter-notebook.readthedocs.org/en/latest/extending/contents.html) (@ssanderson: thanks for those docs) to store notebooks in Git.\n\nI don't think we have any plans to do this ourselves.\n it would also be great to have a simple way to ignore cell outputs in your VCS. e.g. by doing something like this:\n1. create a copy of the notebook\n2. clear outputs in original\n3. commit\n4. restore version with outputs\n\nideally also integrated in `git status` and the like.\n\nidk if that\u2019s even possible\u2026\n That's what VCS hooks are for. For git these are `clean` and `smudge` filters.\n the \u201coutput\u201d key must exist right? so cleaning would simply do `cell['output'] = []` for every cell, and smudge would either do nothing (i.e. checkouts would remove outputs) or do something smart like memorizing the outputs of the working directory version, and inserting them into the to-be-checked-out version if it has the same number of cells (else do nothing and checkout the output-less version because we have no idea what cells were added or deleted)\n See here for a git filter version of stripping output: https://gist.github.com/minrk/6176788\n\n with that:\n- only the inputs are commited\n- `git diff` is without output\n @Carreau would it be acceptable to push such an example to this repo? \n\nLike `examples/git-filter.{txt,py}`\n > @Carreau would it be acceptable to push such an example to this repo?\n> \n> Like examples/git-filter.{txt,py}\n\nI have no objections with that. \n ah it already exists! great!\n","I'll take a look at this. Feel free to assign me, @minrk.\n @captainsafia thanks, assigned.\n @captainsafia or @jorisvandenbossche, can you test my fix at #535?\n Tested.\n @captainsafia, sorry!  I didn't realize you were working on this.  I saw that it had no updates for over a week, and figured people got busy and I could help out.\n @jasongrout Rumor has it @captainsafia likes really cool cat gifs and emojis. Perhaps offer to pair on a future issue. :sunflower: \n @jasongrout \u2014 No worries! I got a little busy with coursework and didn't have the chance to follow through on this until 3 hours before you did (ha!) None the less, the bug is squashed and peace prevails for a moment.\n\n![giphy-5](https://cloud.githubusercontent.com/assets/1857993/10327971/0aac8f7e-6c74-11e5-847f-95e281da002f.gif)\n","Heading cells have been removed in IPython 3. For the extension to work, it would need to look for headings in HTML, rather than heading cells. Doing this would work in all versions of the notebook, since the heading cells render the same as headings in markdown (part of the reason heading cells were removed).\n","As you can see in the diff above, it's not just the pygments_lexer that is stale, but also the codemirror mode and the version keys.\n `language_info` should be set on the `kernel_ready.Kernel` event. I guess that's somehow not getting fired when you change kernel. It should be, IMO.\n Made #437 to fix that. \n So actually with of without #437 just changing the kernel does update the language info for me. So I either cannot reproduce, or it is already fixed. \n","Jupyter isn't officially released yet - for the moment, you should [install IPython](http://ipython.org/install.html).\n\nWe're preparing an [install overview page](http://jupyter.readthedocs.org/en/latest/install.html) for Jupyter.\n I guess that, as Jupyter is (rightly) generating a lot of attention, I'm suggesting being clear about either how to install it or that one shouldn't install it just yet, right up front on the homepage. \n That's a good point. We've been trying to get the docs ready for the imminent release, so their current contents are based on the state we will be in very shortly, where the current version of everything is 4.0. But it would have been a good choice for the docs in the intervening period to include a note about that being still in the future.\n I added a warning box to the install docs about that; it probably makes sense to do it on the website too\n There's now an install link at the top of jupyter.org, which I think is prominent enough.\n","That sounds reasonable, but I'd like someone more familiar with the frontend stuff to look at it.\n","Ok, I have a rough prototype that show something. \n\n![screen shot 2015-08-05 at 15 28 33](https://cloud.githubusercontent.com/assets/335567/9099572/acffa0c8-3b86-11e5-9c5c-32fe83d86603.png)\n @Carreau thanks for posting this - I am _really_ excited about this. We have needed this for a long time and I think it is a great idea of have @svurens start to work on this with you and @jdfreder. \n Would type ahead help the UI side of this:\n\nhttps://twitter.github.io/typeahead.js/\n @svurens and I are fixing some problems with his Canopy+Anaconda+standalone IPython install...\n > Technically I am torn in between twitter typeahead and jQuery typeahead, twitter one have stalled since April, so I went for second one. So I have no issue if we change.\n> \n> Would type ahead help the UI side of this:\n\n@ellisonbg : as I wrote in initial description Twitter-typeahead have 0 commits since april, no responses to PRs and issues. So I'm slightly negative on it. \n\nAlso the API seem to change dramatically in between patch version so i\"m not convinced we should use it. So I'm investigating jQuery typeahead, which seem : \n- better documented \n- have more real-world example. \n- maintained. \n @Carreau , @svurens has his development install working, and he is going to open a PR against your branch for discussion : )\n @jdfreder, @svurens cleaned up a bit, appreciate review. \n I left a couple of in line comments, but I'd also like to leave a general comment: you don't have many comments (no pun intended) in your code, you may want to add some more so it's easier to digest.\n\nOther than that, it's looking good!  @svurens can you review this too?\n Added comment. even if I'm not sure it make things clearer, there is not a lot to explain. \n Any extra-comments ? @jdfreder I suppose you woudl prefer your commonJS PR to be merged first ?\n @Carreau no, no more comments.  It's okay, I can deal with the rebase on my end : )  I think I came along after you with my PR..\n Thanks!  People will love this!\n > Thanks! People will love this!\n\nI don't see any docs reference here... this is something to add later in another PR?\n","> -Basic search and replace - I want to rename a variable in an entire nb (frequently)\n> -Easily delete/move group of cells - Useful for cutting a nb into two parts\n\nYes, that would be great.\n\n> -Renumbering of cells - okay so I guess I could restart kernel.\n\nYou also could use Cell -> All Output -> Clear\n\n> Recently discovered some useful magic functions that improved my workflow too.\n\nCheck out this also: https://github.com/jupyter/notebook/issues/174\n Looks like this codemirror js text editor referenced in #174 has search functionality. Neat. \nhttp://codemirror.net/doc/manual.html#addon_search\n Hi, \n\nthanks for your mail. \n\nYour request is spot on, we had a (non public) meeting with a few of us, on Tuesday, and we will try to implement some of theses things for 4.1 possibly. The search and replace is tricky as it is on many codemirror instances at once. \n\nIf some of you want to try to tackle the search and replace, we can give you hints on where to start patching the notebook. \n You might want to take a look at this:\nhttps://github.com/ipython-contrib/IPython-notebook-extensions/wiki/search-replace\n @Carreau \n\n> Your request is spot on, we had a (non public) meeting with a few of us, on Tuesday, and we will try to implement some of theses things for 4.1 \n\nThanks Matthias! This will certainly help improve workflow for common tasks.\n\n@juhasch \n\n> https://github.com/ipython-contrib/IPython-notebook-extensions/wiki/search-replace\n\nOh I see you created this extension. I will try it out soon. In fact, thanks for pointing out that repo. I wonder if it can be patched into the 4.1 release?\n\n@hellpanderrr \nThanks for pointing out that codemirror site referenced.\n > Oh I see you created this extension. I will try it out soon. In fact, thanks for pointing out that repo. I wonder if it can be patched into the 4.1 release?\n\nI haven't looked at the extension internals, but I'm not against it. \n With respect to the interactive workflow, being able to interactively edit a document with a rendered nb view while working on it would be desirable. Right now, it's pretty clunky process to convert from one format, edit, make changes and convert back. Or go back and forth between formats in the same session/screen. I guess I should make this as a separate but known paint point. I should probably update the title to bucket wishlist!\n","Please see other related issues, like #261 posted 14 h ago, which is on the top of the list. \n\nSearch and replace on many cells at once is a little bit trickier than in only one. And as in any open source project someone have to do the work.\n\nIf you want to try to tackle it, we can give you pointer. \n\n(please continue comment on other issues not to keep thing spreaded),\n\nThanks !\n Yes, please, give me a pointer.\n ON master you can do `Ctrl-shift-P` (`cmd` on mac) filter for search and replace, then you should get a search and replace dialog. It needs improvement though. \n\nOnce you have it working I can point you to the relevant bit of code if you want to tinker with it. \n I got it working and it is very nice. What improvements do you have in\nmind? What part of the code needs to be changed?\n\nOn Sat, Sep 5, 2015 at 6:15 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> ON master you can do Ctrl-shift-P (cmd on mac) filter for search and\n> replace, then you should get a search and replace dialog. It needs\n> improvement though.\n> \n> Once you have it working I can point you to the relevant bit of code if\n> you want to tinker with it.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/263#issuecomment-137955049.\n IIRC, one of the request was the ability to unselect each replacement individually, something like  a checkbox on the side of each replacement. \n\nAlso there is non \"pure search\", it would be nice if the replacement is empty to actually just hightlight all the matchings, and have a shortcut to scroll to next match, or select next match/ select previous match. \n Hi, \r\n\r\n(I don't know if this is the right place to ask )\r\n\r\nis there/do you plan to add  a quick shortcut that allows users to quickly find the _selected string_ ? \u2014 like in sublime text, for instance \u2014 _without_ having to type cmd+C, cmd+F, cmd+V\r\n\r\nThanks for your help\r\n\r\nps: same question, but also for 'function definition' and 'function documentation' (I know I can type\r\n `?function_name`, after _opening another cell_ but still, would be useful to  have something faster) pps: another nice feature would be to make the results of the 'find-window' clickable, in a way that re-send you directly to  the corresponding line/cell in the notebook","Is this obsoleted by juypyter-js-services?\n Hopefully :smile:  https://github.com/jupyter/jupyter-js-services/pull/36\n @blink1073 can you close this issue here when you merge that?\n I don't have access to close it.\n Ah, OK we can, just ping us...\n\nOn Tue, Oct 6, 2015 at 3:22 PM, Steven Silvester notifications@github.com\nwrote:\n\n> I don't have access to close it.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/265#issuecomment-145971212.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Will do.\n All set!\n","Awesome, thanks for working on this!\n\nI am +1 on getting features to users quickly, but let's not break the\nmeaning of our versions to do that. With the notebook being a separate\npackage, we can just release its 5.0 version when we are happy with the new\nfeatures we have added.\n\nOn Sun, Aug 9, 2015 at 6:38 PM, Thomas Kluyver notifications@github.com\nwrote:\n\n> From discussion the other day: we are thinking of accepting some new\n> features into 4.x releases, so that we can keep the user experience moving\n> forwards while people are working on refactoring all the frontend stuff.\n> \n> Multi-cell selection is perhaps the biggest thing that we've been wanting\n> to add for a long time, so I thought I'd take a crack at it. It turned out\n> not to be too bad (so far...).\n> \n> Use: shift+j/k to select a range of cells, shift+m to merge the selected\n> range. I haven't yet changed all the other actions which should now be able\n> to affect a range of cells, but doing so should be mostly straightforward.\n> \n> API: I've tried to keep existing API working, so stuff that assumes the\n> selection is a single cell will act on the cell at the cursor - the most\n> recently selected one. This makes some names a bit confusing - e.g.\n> Cell.unselect() now has a leave_selected parameter (to move the cursor\n> away without actually unselecting). The notebook has some very similarly\n> \n> ## named methods, like get_selected_cell() and get_selected_cells().\n> \n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/jupyter/notebook/pull/266\n> Commit Summary\n> - First attempt at multi-cell selection\n> - Multi-cell selection based on a selection anchor cell\n> - Merge cells based on range selection\n> - Clear selected range on entering edit mode\n> \n> File Changes\n> - _M_ notebook/static/notebook/js/actions.js\n>   https://github.com/jupyter/notebook/pull/266/files#diff-0 (36)\n> - _M_ notebook/static/notebook/js/cell.js\n>   https://github.com/jupyter/notebook/pull/266/files#diff-1 (21)\n> - _M_ notebook/static/notebook/js/codecell.js\n>   https://github.com/jupyter/notebook/pull/266/files#diff-2 (8)\n> - _M_ notebook/static/notebook/js/keyboardmanager.js\n>   https://github.com/jupyter/notebook/pull/266/files#diff-3 (4)\n> - _M_ notebook/static/notebook/js/notebook.js\n>   https://github.com/jupyter/notebook/pull/266/files#diff-4 (209)\n> \n> Patch Links:\n> - https://github.com/jupyter/notebook/pull/266.patch\n> - https://github.com/jupyter/notebook/pull/266.diff\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/266.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg what would be broken by calling it 4.1? It would only need to be 5.0 if there were backward-incompatible changes, right?\n The subject of our discussion the other day was that maybe we should shift what our version numbering means a bit. +0.1 releases of software in general do introduce new features, they just avoid breaking compatibility, and that's precisely what I've aimed to do here.\n I am fine if we want to change how we version our projects, but such a\ndiscussion should take place on the main jupyter/ipython lists. I think it\nis very reasonable to have 4.x releases include new features but not break\nbackwards compat - that follows the semantic versioning pattern. But that\nis not (quite) how we have been approaching our versioning in recent\nreleases so I think it would be good to discuss on the main list so\neveryone at least knows about the change.\n\nOn Sun, Aug 9, 2015 at 8:45 PM, Thomas Kluyver notifications@github.com\nwrote:\n\n> The subject of our discussion the other day was that maybe we should shift\n> what our version numbering means a bit. +0.1 releases of software in\n> general do introduce new features, they just avoid breaking compatibility,\n> and that's precisely what I've aimed to do here.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/266#issuecomment-129289288.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n It's definitely worth discussing how the new reorg affects how we treat major and minor releases, what's master, etc., as we have already been doing on the list to some degree. But we have been doing (small) new features in +.1 releases since we started having them, so I don't think this is actually a change to how we've treated versions since 1.0. In the last several releases, we only created the `.x` backport branch once the first backward-incompatible change was merged. As we've been moving quickly, of course, that has been relatively soon after release in most cases.\n I've sent a message to the jupyter list.\n So: should I adapt more actions to make use of multi-cell selection in this PR, or should we review and merge it, and adapt code to use it in further PRs?\n +1\n\nFrom a design perspective, we could style `selected-cell:last`, `selected-cell:first` differently to not have the ugly-double-border in between. (this can be separate PR though) \n I'm for doing more in subsequents PRs.\n\nPotentially marking as contributor friendly.\n\nOn Mon, Aug 10, 2015 at 12:21 PM, Thomas Kluyver notifications@github.com\nwrote:\n\n> So: should I adapt more actions to make use of multi-cell selection in\n> this PR, or should we review and merge it, and adapt code to use it in\n> further PRs?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/266#issuecomment-129572053.\n Also would like @juhasch eyes on that on how that will interact wit extensions, and if he have better/oter technical or API thoughts. \n I'd definitely like style changes to be a separate PR. The styling is not especially beautiful in this, but it's usable.\n Merging soon if no-one beats me to it. That is to say: merging next time I remember I forgot to merged. \n I think you forgot long enough. Merging!\n :tada: :shipit: \n Great to see this in Jupyter!\nI think it works pretty well, though the looks  can be improved. Adding something like\n\n```\n.cell.selected\n{\n    background-color: #f4f4f4;\n}\n```\n\nlooks much better IMO, but is probably still not optimal.\nAlso, I think `shift-up` and `shift-down` in command mode is more natural than `shift-j`and `shift-k` (where do they come from ?).\n\nConverted the copy and paste notebook extension, works nicely with the new multicell-selection.\n\nOn a side note: Always having to do a `python setup.py install` after changing a single line of Javascript code in Jupyter is painful. Luckily, I can do everything I want to do with extensions.\n The plan is to add it to shift-up/down as well, I just wanted to hide it a bit until more things actually used the multi-cell selection. I'm working on our own cut/copy/paste code right now.\n","Sorry, ment to merge. Merging, once it re-goes green. \n Travis, he is green.\n","I put all of the large drone work in the first commit, later commits are where all the good review needed stuff is at...\n This still builds concatenated js with browserify?\n Yeah it's concatenated.  One problem with this approach is that it's currently backwards incompatible with require.js based code (i.e. ipywidgets).  With a little more thought, and maybe leaving require.js as a dependency, I should be able to keep backwards compatibility.\n This is crazy and I'm excited to try it out.\n How long is the build step ? Is there a way to not have a build step and bundle and separate file to iterate over the notebook quickly ? The 30 s build step is annoying. Potentially a dev mode where files are actually es6 ?\n @Carreau 9.080s, I plan on implementing a `watch` command too.\n It will get better as we break things apart better. This is purely migrating what we have right now. We also don't have to do the full bundle if we don't want to (can split apart and only rebuild small steps). For now Jon is tackling the conversion so it works then we _must_ get into a nice live reload quick differential rebuild stage.\n That seem like a plan !\n\nAlso side not, you might want not to remove indentation, otherwise rebase\nwill be painful.\nWe can \"just\" de-indent in 1 PR which is obvious to review with ?w=0.\n\nOn Tue, Aug 11, 2015 at 6:17 PM, Kyle Kelley notifications@github.com\nwrote:\n\n> It will get better as we break things apart better. This is purely\n> migrating what we have right now. We also don't have to do the full bundle\n> if we don't want to (can split apart and only rebuild small steps). For now\n> Jon is tackling the conversion so it works then we _must_ get into a nice\n> live reload quick differential rebuild stage.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/268#issuecomment-130128939.\n Yay, build is working successfully. I'm getting roughly ~8s per full build `time npm run build`.\n https://lincolnloop.com/blog/speedy-browserifying-multiple-bundles/\n Awesome, thanks for investigating better ways to work with Javascript.\n > Also side not, you might want not to remove indentation, otherwise rebase will be painful.\n\nThanks for the suggestion, I rebase -i editted the commit with the de-indent, re-indenting everything.  This should make the diff much more readable!  We can open up a dedicated de-indent PR later.\n Even though there are still some JS errors on the notebook page and the tests aren't passing yet, the apps are working now.\n To maintain backwards compatibility with JS extensions that use requirejs, we could use a modified version of this: https://github.com/guybedford/cjs\n\nAlternatively, we could use r.js to go from commonjs->amd quickly - much quicker than the bundling operation we did before.\n @minrk @Carreau @rgbkrk should I continue to pursue this?  I'm trying to gauge interest.  I've figured out a way to make it backwards compatible with existing notebook extensions using require.js (i.e. ipywidgets), I'd need a custom require.js extension.  \n\nI'm just wondering, if got this to work, if it would be something that we'd be interested in merging soon (< month).  This would allow us to proceed with the idea of a gradual refactor, instead of a complete rewrite.  We could start by trying the output area Kyle and I have pushed.\n\nOtherwise we can mothball this, and revisit later if it's just too soon...\n Very cool! Is everyone agreed that we want to go this way rather than require.js? What about code that needs to be loaded asynchronously and not on first page load? If this can help us start to refactor in place and move more quickly, I think it would be a great thing.\n @ellisonbg , yup, that works now.  I had to do that for contents.  If you want code to load dynamically, you call `requirejs` instead of `require`.  `require` is node require, and gets browserified, where `requirejs` and `define` pass through and work like normal.\n Great! What type of review do you think this needs? It is big and risks bit\nrotting quickly so it would be great to get this reviewed quickly (not\nrushed though).\n\nOn Thu, Aug 13, 2015 at 2:33 PM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> @ellisonbg https://github.com/ellisonbg , yup, that works now. I had to\n> do that for contents. If you want code to load dynamically, you call\n> requirejs instead of require. require is node require, and gets\n> browserified, where requirejs and define pass through and work like\n> normal.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/268#issuecomment-130850906.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Well the biggest thing I need is agreement on transpiling node/es6/ts -> web es5, here I'm doing node es5 -> browser es5 using browserify.  With that, code review on a few files, like package.json, notebook/js/main.js, and notebook/js/notebook.js - I think they are a good sample of what's going on.  If I get the green light with this, I'll add a require.js bit for backwards compatibility, because as-is require-ing single modules leads to errors, because this PR changes the modules from AMD to commonjs.  Adding commonjs support to requirejs isn't bad at all, we can either use write a custom plugin that does it automagically, or use a premade one -> https://github.com/guybedford/cjs .  The premade one breaks backwards compatibility, requiring people to use the following syntax in their requirejs paths `cjs!path/to/file`.\n Oh yuck to that `cjs` one. Perhaps the terrible question from me here is if we can introduce the packages we've been making as AMD modules for the notebook.\n As long as the dev cycle is fast and easy to set-up I'm ok with that. \nIf you can just write a quick wrap up on how to test that, I'm can give it a try. \n Kyle - can you clarify - I thought you wanted us to move away from AMD\nmodules?\n\nOn Thu, Aug 13, 2015 at 5:55 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> As long as the dev cycle is fast and easy to set-up I'm ok with that.\n> If you can just write a quick wrap up on how to test that, I'm can give it\n> a try.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/268#issuecomment-130905153.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Kyle is speaking of transpiling to AMD. \n\nWrite as common JS, and make them AMD loadable. \n I'm trying to compromise on what works for the current notebook and widgets which are wedded to requirejs.\n\nI'll be checking this PR out again tomorrow.\n As in I'm definitely willing to figure out what needs to be done to make some kind of transition to working in the current notebook. \n\nOur new packages should all be commonjs. What I'm saying here is that maybe there's an extra step (as part of notebook js build) to convert to AMD or otherwise adapt.\n @rgbkrk , yeah, the easiest way forward with that idea is to `r.js --convert` (commonjs->AMD) our `dist` into an `amd` folder.  Then make the package a bower package (in addition to npm).  The only sad thing about that is that we don't get to use npm modules directly in the notebook...  But then again, that may not be a problem, seeing that the notebook frontend here will evolve into an empty shell that just loads components..\n Need rebase. \nNeed instruction how to build\nmissing glob dependency\n\nError on first build. \n\n```\n[0] Could not write file notebook/static/notebook/js/celltoolbarpresets/rawcell.js { [Error: ENOENT, open 'notebook/static/notebook/js/celltoolbarpresets/rawcell.js']\n[0]   errno: -2,\n[0]   code: 'ENOENT',\n[0]   path: 'notebook/static/notebook/js/celltoolbarpresets/rawcell.js' }\n```\n\nNeed sourcemaps by default IMHO.\n\nFail in codemirror bundle. and various other places, not sure why. \n Note, I builded with `npm run build`.\n > Need instruction how to build\n> missing glob dependency\n> \n> Error on first build.\n\nThese should all be fixed in the last commit.\n\n> Need sourcemaps by default IMHO.\n\nSource maps should exist for the bundles, but I'm not creating source maps for the individual AMDified files, because only the first and last lines change and the line numbers stay the same.  Do you still think they need source maps?\n\n> Fail in codemirror bundle. and various other places, not sure why.\n\nYeah, I see the various failures too.  In specific, I'm working on one related to ipywidgets.  I think the failures all may be caused by the same thing somewhere (i.e. a race issue or a context error).\n Tests all pass locally now - but the battle isn't done yet.  Travis is timing out on base and notebook, which leads me to believe there's a loading race condition somewhere.  I will keep everyone posted...\n Since we know that the javascript here isn't going to be pushed to npm, the `postinstall` step could probably include a build too:\n\n``` json\n  \"postinstall\": \"npm run bower && npm run build\",\n```\n In this PR, IPython/Jupyter JS gets browserified then AMDified for use by requirejs.\n Done with my passthrough. Bunch of inline questions and curiosities.\n @rgbkrk I have a feeling this is what is hanging up Travis:\n\n```\nGET http://localhost:8888/api/config/notebook?_=1440171347511 500 (Internal Server Error)x.ajaxTransport.x.support.cors.e.crossDomain.send @ jquery.min.js:6x.extend.ajax @ jquery.min.js:6promising_ajax @ utils.js:683promising_ajax @ utils.js:675ConfigSection.load @ config.js:37(anonymous function) @ main.js:41\nutils.js:609 Object {readyState: 4, responseText: \"{\"reason\": null, \"traceback\": \"Traceback (most rec\u2026 (char 94)\\n\", \"message\": \"Unknown server error\"}\", responseJSON: Object, status: 500, statusText: \"Internal Server Error\"}\nutils.js:611 API request failed (500): Traceback (most recent call last):\n  File \"/Users/jon/jupyter/notebook/notebook/base/handlers.py\", line 446, in wrapper\n    result = yield gen.maybe_future(method(self, *args, **kwargs))\n  File \"/Users/jon/jupyter/notebook/notebook/services/config/handlers.py\", line 21, in get\n    self.finish(json.dumps(self.config_manager.get(section_name)))\n  File \"/Users/jon/ipython/traitlets/traitlets/config/manager.py\", line 63, in get\n    return json.load(f)\n  File \"/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py\", line 290, in load\n    **kw)\n  File \"/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py\", line 338, in loads\n    return _default_decoder.decode(s)\n  File \"/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py\", line 366, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py\", line 382, in raw_decode\n    obj, end = self.scan_once(s, idx)\nValueError: Expecting property name enclosed in double quotes: line 5 column 3 (char 94)\n\nutils.js:660 Uncaught (in promise) Error: Traceback (most recent call last):\n  File \"/Users/jon/jupyter/notebook/notebook/base/handlers.py\", line 446, in wrapper\n    result = yield gen.maybe_future(method(self, *args, **kwargs))\n  File \"/Users/jon/jupyter/notebook/notebook/services/config/handlers.py\", line 21, in get\n    self.finish(json.dumps(self.config_manager.get(section_name)))\n  File \"/Users/jon/ipython/traitlets/traitlets/config/manager.py\", line 63, in get\n    return json.load(f)\n  File \"/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py\", line 290, in load\n    **kw)\n  File \"/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py\", line 338, in loads\n    return _default_decoder.decode(s)\n  File \"/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py\", line 366, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py\", line 382, in raw_decode\n    obj, end = self.scan_once(s, idx)\nValueError: Expecting property name enclosed in double quotes: line 5 column 3 (char 94)\n\n  File \"/Users/jon/jupyter/notebook/notebook/base/handlers.py\", line 446, in wrapper\n    result = yield gen.maybe_future(method(self, *args, **kwargs))\n  File \"/Users/jon/jupyter/notebook/notebook/services/config/handlers.py\", line 21, in get\n    self.finish(json.dumps(self.config_manager.get(section_name)))\n  File \"/Users/jon/ipython/traitlets/traitlets/config/manager.py\", line 63, in get\n    return json.load(f)\n  File \"/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py\", line 290, in load\n    **kw)\n  File \"/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py\", line 338, in loads\n    return _default_decoder.decode(s)\n  File \"/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py\", line 366, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/usr/local/Cellar/python/2.7.9/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py\", line 382, in raw_decode\n    obj, end = self.scan_once(s, idx)\nValueError: Expecting property name enclosed in double quotes: line 5 column 3 (char 94)\n\n    at wrap_ajax_error (http://localhost:8888/static/notebook/js/main.bundle.js?v=26c12aaff4fa23d4face0a05b631cdb5:29861:29)\n    at Object.settings.error (http://localhost:8888/static/notebook/js/main.bundle.js?v=26c12aaff4fa23d4face0a05b631cdb5:29882:24)\n    at x.Callbacks.l (http://localhost:8888/static/components/jquery/jquery.min.js:4:24882)\n    at Object.x.Callbacks.c.fireWith [as rejectWith] (http://localhost:8888/static/components/jquery/jquery.min.js:4:25702)\n    at k (http://localhost:8888/static/components/jquery/jquery.min.js:6:5373)\n    at XMLHttpRequest.x.ajaxTransport.x.support.cors.e.crossDomain.send.t (http://localhost:8888/static/components/jquery/jquery.min.js:6:9152)\n```\n Disregard previous deleted comments, I had misread the Travis output.\n With this change, all tests pass on [Travis](https://travis-ci.org/blink1073/notebook/builds/77393288).\n\n``` diff\ndiff --git a/setupbase.py b/setupbase.py\nindex 185ef6e..ef93b6e 100644\n--- a/setupbase.py\n+++ b/setupbase.py\n@@ -131,6 +131,9 @@ def find_package_data():\n         pjoin(components, \"jquery-ui\", \"themes\", \"smoothness\", \"jquery-ui.min.css\"),\n         pjoin(components, \"jquery-ui\", \"themes\", \"smoothness\", \"images\", \"*\"),\n         pjoin(components, \"requirejs\", \"require.js\"),\n+        pjoin(components, \"underscore\", \"underscore-min.js\"),\n+        pjoin(components, \"moment\", \"moment.js\"),\n+        pjoin(components, \"marked\", \"marked.min.js\"),\n     ])\n\n     # Ship all of Codemirror's CSS and JS\n```\n Thanks @blink1073 !  That did the trick!  This ready for review now.\n Well done! :clap: Thank you @blink1073.\n\n:bow:\n I did a read-through just now, it looks good to me.\n I've reviewed this multiple times but I'll do a pass through as well since this is so big.\n Alright, you're going to hate me Jon but are there any common notebook extensions I should test with this PR, to confirm this can be part of a 4.x release?\n Feel free to test ipywidgets again.  ipyparallel is probably a good one to test too - make sure the clusters tab works.  I'm not sure of what other common plugins to try.\n Ok, cool, I'll play with those right now.\n Verified widgets and ipyparallel.\n\nThis was a good test since ipyparallel has to be installed as an actual extension to the notebook server. A+\n\n:+1: \n :boom: :rocket: \n Also maybe try the nbgrader extension?\n\nOn Wed, Aug 26, 2015 at 2:45 PM, Kyle Kelley notifications@github.com\nwrote:\n\n> Merged #268 https://github.com/jupyter/notebook/pull/268.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/268#event-393374149.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Please dont' merge such huge things on  a rush. \nYou just broke everything. \n\nhttps://github.com/jupyter/notebook/pull/353\n Just again expressing my frustration that now most of the PR that were ok to merge need to be rebase, and has now we need to discuss wether this was or not 4.1 material or we need to revert, I basically cannot do a thing, as otherwise I'll need to rebase again. \n\nI cannot either tell user to rebase theirs as if I tell that, they might have to de-rebase if we revert. \n\n:rage: :rage4: \n\nWe usually warn 24 to 48h in advance on ML before doing such big change. \n\nNevertheless, despite the rush, and wether we roll back or not I'm happy to see that working. \nBut I'm still unhappy. Great job still :beers: . But unhappy. Grrrrr.\n > @rgbkrk Alright, you're going to hate me Jon but are there any common notebook extensions I should test with this PR, to confirm this can be part of a 4.x release?\n\nI know this work started before we had the conversation about declarative widgets and dashboards which we've implemented as extensions. I suspect this MR breaks what we've done.\n\nTwo things that would help us as we start to integrate better with the community would be:\n1. Where do we look to find out about these big changes that are about to go in?\n2. What's considered stable API for extensions to touch, if anything? For example, right now our work uses requirejs to load JS. I see this commit retains it for compatibility. But is it going to disappear eventually? And if so what should extensions (which need to load dynamically by definition) do instead?\n @parente we would usually not do that this way see this this mail I sent a few hours after: https://groups.google.com/forum/#!topic/jupyter/lkK9rOPEYMc\n Peter, sorry that this dropped with little advanced notice.\n- We will likely need to have something like requirejs for loading assets\n  dynamically - we are not quite sure eactly how it work work, but there will\n  definitely be something like requirejs, if not requirejs itself in the\n  notebook.\n- In terms of the JS API stability, we have always warned (perhaps not\n  visibly enough) that the JS is not at all stable. The refactoring that iis\n  starting to happen will definitely break the APIs in significant ways. Our\n  hope though is that the new APIs will be declared stable and will also be\n  much easier to work with for extension developers.\n- In terms of communication, the recent split into more repos and the\n  increase in contributions is showing the weaknesses in our communications\n  models. Fernando and I had a good talk about that last night and will be\n  proposing some ideas to the community and steering council to address these\n  challenges.\n\nOn Thu, Aug 27, 2015 at 6:54 AM, Peter Parente notifications@github.com\nwrote:\n\n> @rgbkrk https://github.com/rgbkrk Alright, you're going to hate me Jon\n> but are there any common notebook extensions I should test with this PR, to\n> confirm this can be part of a 4.x release?\n> \n> I know this work started before we had the conversation about declarative\n> widgets and dashboards which we've implemented as extensions. I suspect\n> this MR breaks what we've done.\n> \n> Two things that would help us as we start to integrate better with the\n> community would be:\n> 1. Where do we look to find out about these big changes that are about\n>    to go in?\n> 2. What's considered stable API for extensions to touch, if anything?\n>    For example, right now our work uses requirejs to load JS. I see this\n>    commit retains it for compatibility. But is it going to disappear\n>    eventually? And if so what should extensions (which need to load\n>    dynamically by definition) do instead?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/268#issuecomment-135440236.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Hi, Matthias sorry this went in without getting your input :(\n\nI think there are few aspects of this:\n\nCommunication:\n\nThis is another example of how our communication model is straining under\nthe many repos and increased number of contributors. I am encountering this\ntype of communications failure in many corners of the project and we need\nto do something about it - will post to the main jupyter list about this in\na few minutes. You are not the only person who is finding yourself in this\nsituation (myself included).\n\nMerging fast:\n\nFor the last few weeks, there has been a \"merge fast and iterate\" effort in\nthis particular repo. This is in response to our not wanting development of\nthe notebook to stall while we do refactoring. Other PRs that were merged\nfast were the multi-cell selection, command pallette and search+replace (I\npersonally am fine with this approach). I think the rest of the team sensed\nthat the door was open for the \"merge fast and iterate\" approach. With that\nsaid, there is no reason we couldn't have waiting longer (see communication\nabove).\n\nTechnical details of this PR:\n\nThere is broad agreement that we are moving torwards having our JS in\nseparate repos/packages that are distributed using npm. Right now we have\nquite a few developers who are building those new npm packges\n(jupyter-js-services, jupyter-js-output). The work of starting to use all\nof those new frontend npm packages is bottlenecking on this PR. Because of\nthat I think it is 1) important to merge this quickly and 2) release it in\n4.1 so we can have a single notebook effort moving forward that has both\nnew features for our users and new refactored code underneath.\n\nOn Thu, Aug 27, 2015 at 1:09 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Just again expressing my frustration that now most of the PR that were ok\n> to merge need to be rebase, and has now we need to discuss wether this was\n> or not 4.1 material or we need to revert, I basically cannot do a thing, as\n> otherwise I'll need to rebase again.\n> \n> I cannot either tell user to rebase theirs as if I tell that, they might\n> have to de-rebase if we revert.\n> \n> [image: :rage:] [image: :rage4:]\n> \n> We usually warn 24 to 48h in advance on ML before doing such big change.\n> \n> Nevertheless, despite the rush, and wether we roll back or not I'm happy\n> to see that working.\n> But I'm still unhappy. Great job still [image: :beers:] . But unhappy.\n> Grrrrr.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/268#issuecomment-135335256.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n When @carreau and I met this morning, his biggest concern was that we should probably _not_ make this part of 4.x since we're not sure how stable it is and there are bug fixes slated for 4.1. We could create a 4.x branch that predates this PR, and move forward with this as 4.2 or 5.x.\n I'm certainly happy to revert, apply @carreau's patch that fixes the command palette/search (perhaps we need tests there), and then re-open it for further discussion.\n > Merging fast:\n\nThe other PRs where purely addition and self contained. This is actually a gigantic change that break some (fixable) things, and might also have broken many other things. \nSo it is not the same. \n\n> Technical details of this PR:\n\nI'm fine with this PR, but we need a stable 4.1 have seen how many issues we have with 4.0 ? We can't afford to get a 4.1 which is more work to package than 4.0 and have downstream not upgrading from 4.0 to 4.1 because it breaks things. The rule as **always** been no refactor or big changes for 4.1, then we fork-of a dev branch and backport. \n\nLet's wait for US to finish waking up and respond on ML. We can even wait a few days, but right now, I would be a maintainer of downstream project I would just be pissed of for breaking the meaning of semantic versioning if this is a 4.1\n Yes, we may want to move this a branch and wait until after 4.1.\n\nAt the same time, there is an elephant in the room: our JavaScript APIs are\nnot stable, have never been stable, and we are about to break all of them\ncompletely. After that, they will be stable in the versions/semver sense.\n\nHere is my preference: because our JS APIs are not public, we are free to\nbreak them in each of the 4.x releases. It is my understanding that in\nsemver, internal refactoring is fine across point releases.\n\nThe alternative is to do refactoring in a branch until 5.0, which I don't\nfeel is reasonable if master evolves quickly at the same time. I don't\nthink we would ever be able to merge the two.\n\nOn Thu, Aug 27, 2015 at 7:33 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Merging fast:\n> \n> The other PRs where purely addition and self contained. This is actually a\n> gigantic change that break some (fixable) things, and might also have\n> broken many other things.\n> So it is not the same.\n> \n> Technical details of this PR:\n> \n> I'm fine with this PR, but we need a stable 4.1 have seen how many issues\n> we have with 4.0 ? We can't afford to get a 4.1 which is more work to\n> package than 4.0 and have downstream not upgrading from 4.0 to 4.1 because\n> it breaks things. The rule as _always_ been no refactor or big changes\n> for 4.1, then we fork-of a dev branch and backport.\n> \n> Let's wait for US to finish waking up and respond on ML. We can even wait\n> a few days, but right now, I would be a maintainer of downstream project I\n> would just be pissed of for breaking the meaning of semantic versioning if\n> this is a 4.1\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/268#issuecomment-135453623.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Ping @jasongrout \n If we keep this, we can start writing unit tests with mocha directly right now (though we could have with requirejs too).\n I like that !\n\nOn Thu, Aug 27, 2015 at 11:55 AM, Kyle Kelley notifications@github.com\nwrote:\n\n> If we keep this, we can start writing unit tests with mocha directly right\n> now (though we could have with requirejs too).\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/268#issuecomment-135522611.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Ok, one other negative that I didn't saw. Moving everything to static-src break the history where all file looks in github like having only 1 commit from Jon. \n Well that's no good. \n I'm currently feeling like we should revert and that we can continue discussions about the PR itself, same as seeing what can be broken out into smaller PRs.\n Is there a way of implementing this stuff without collapsing the git\nhistory?\n\nOn Fri, Aug 28, 2015 at 4:42 AM, Kyle Kelley notifications@github.com\nwrote:\n\n> I'm currently feeling like we should revert and that we can continue\n> discussions about the PR itself, same as seeing what can be broken out into\n> smaller PRs.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/268#issuecomment-135746690.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n The git history is ok, it just confuse most of the tools around because the\nall tree is moved/file renamed.\nWe can just not move things all around.\n\nOn Fri, Aug 28, 2015 at 4:21 PM, Brian E. Granger notifications@github.com\nwrote:\n\n> Is there a way of implementing this stuff without collapsing the git\n> history?\n> \n> On Fri, Aug 28, 2015 at 4:42 AM, Kyle Kelley notifications@github.com\n> wrote:\n> \n> > I'm currently feeling like we should revert and that we can continue\n> > discussions about the PR itself, same as seeing what can be broken out\n> > into\n> > smaller PRs.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/pull/268#issuecomment-135746690.\n> \n> ## \n> \n> Brian E. Granger\n> Associate Professor of Physics and Data Science\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/268#issuecomment-135804393.\n I guess that is what I am asking. Sometimes we need to move things around\nto refactor. Can we do that while addressing the version control related\nthings you are bringing up?\n\nOn Fri, Aug 28, 2015 at 8:27 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> The git history is ok, it just confuse most of the tools around because the\n> all tree is moved/file renamed.\n> We can just not move things all around.\n> \n> On Fri, Aug 28, 2015 at 4:21 PM, Brian E. Granger <\n> notifications@github.com>\n> wrote:\n> \n> > Is there a way of implementing this stuff without collapsing the git\n> > history?\n> > \n> > On Fri, Aug 28, 2015 at 4:42 AM, Kyle Kelley notifications@github.com\n> > wrote:\n> > \n> > > I'm currently feeling like we should revert and that we can continue\n> > > discussions about the PR itself, same as seeing what can be broken out\n> > > into\n> > > smaller PRs.\n> > > \n> > > \u2014\n> > > Reply to this email directly or view it on GitHub\n> > > https://github.com/jupyter/notebook/pull/268#issuecomment-135746690.\n> > \n> > ## \n> > \n> > Brian E. Granger\n> > Associate Professor of Physics and Data Science\n> > Cal Poly State University, San Luis Obispo\n> > @ellisonbg on Twitter and GitHub\n> > bgranger@calpoly.edu and ellisonbg@gmail.com\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/pull/268#issuecomment-135804393.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/268#issuecomment-135806418.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Because the files are being transpiled from one context into another, and they reference each other, sometimes with abs path, they need to live in two separate parent directories.  This means the .js files move from static/ to somewhere, or the .less & .css move from /static to somewhere and somewhere becomes the new static directory.  I just picked the prior because it made more sense.  I tried to move everything with `git mv`, I'm not sure why some of the files appear as new.\n Ahh, Ok so the files moving are not API breakages, but they led to files\nhaving a somewhat confusing git record.\n\nOn Fri, Aug 28, 2015 at 5:36 PM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> Because the files are being transpiled from one context into another, and\n> they reference each other, sometimes with abs path, they need to live in\n> two separate parent directories. This means the .js files move from static/\n> to somewhere, or the .less & .css move from /static to somewhere and\n> somewhere becomes the new static directory. I just picked the prior because\n> it made more sense. I tried to move everything with git mv, I'm not sure\n> why some of the files appear as new.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/268#issuecomment-135922224.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","travis really angry. \n Travis was just hungry. I've fed him now, and he's happy again.\n ![imgres-1](https://cloud.githubusercontent.com/assets/335567/9213611/41e5d81c-4049-11e5-9341-440b2739ffab.jpg)\n\nTRAVIS GOT FOOD. \nTRAVIS HAPPY.\nTRAVIS ALLOW MERGE. \n","+1\n travis is happy. \n","What do you get from `pip list` and `python -m IPython --version`?\n `pip list` gives me `ipython (4.0.0)`, \n`python -m IPython --version` gives me `1.2.1`.\n Okay, and what do you get from `cat /usr/local/lib/python2.7/dist-packages/*.pth`?\n It's a long output, I have at pastebin here: http://pastebin.com/yZqYqw0y\n Yup, it's exactly as I suspected - `/usr/lib/python2.7/dist-packages` should not be in `/usr/local/lib/python2.7/dist-packages/*.pth`. If you remove that, In fact, probably none of the\n\nI see lots of eggs in there, which suggest that you have used easy_install. If you have time, I would recommend removing anything you've installed with easy_install, removing all your .pth files, and installing again with only pip. easy_install is a bit of a nightmare, and all the lines of code that start with `import` in there are a source of frequent and major problems.\n Thanks @minrk, works perfect now!\n I have this same issue, but my `/usr/lib/python2.7/dist-packages/` directory is empty.\n\n```\nphil@phil-cube:~$ jupyter notebook\nTraceback (most recent call last):\n  File \"/home/phil/Enthought/Canopy_64bit/User/bin/jupyter-notebook\", line 8, in <module>\n    from notebook.notebookapp import main\n  File \"/home/phil/Enthought/Canopy_64bit/User/lib/python2.7/site-packages/notebook/notebookapp.py\", line 83, in <module>\n    from IPython.paths import get_ipython_dir\nImportError: No module named paths\n\nphil@phil-cube:~$ pip list | grep ipython\nipython (4.0.0)\nipython-genutils (0.1.0)\nipython4 (4.0.0)\n\nphil@phil-cube:~$ python -m IPython --version\n1.2.1\n```\n @whophil the issue is the same. There is probably a file called `easy-install.pth` on your system, which inappropriate information in it. You can fix this by removing the offending line from `easy-install.pth`. It may not be `/usr/lib/`, it may be `/usr/local/lib`. There should be _no_ directories called `dist-packages` or `site-packages` listed in any `.pth` file. If there is, it was caused by a bug in setuptools, and should be removed.\n Hello,\n\nI am also using the Canopy distribution and have the same issue with jupyter notebook: \nTraceback (most recent call last):\n  File \"/Users/renaudperson/Library/Enthought/Canopy_64bit/User/bin/jupyter-notebook\", line 8, in <module>\n    from notebook.notebookapp import main\n  File \"/Users/renaudperson/Library/Enthought/Canopy_64bit/User/lib/python2.7/site-packages/notebook/notebookapp.py\", line 83, in <module>\n    from IPython.paths import get_ipython_dir\nImportError: No module named paths\n\nwith\nipython (4.0.0)\npython -m IPython --version\n1.2.1\n\nthere is no *.pth in the directory\n/Users/renaudperson/Library/Enthought/Canopy_64bit/User/lib/python2.7/site-packages/\n\nand there is no dist or site-packages directory in /usr/local/lib/\n\nregards\n I fixed my problem by uninstalling/reinstalling IPython via the Canopy package manager. I then moved my `ipython_notebook_config.py` to the `.jupyter/jupyter_notebook_config.py`. Perhaps there is a sleeker solution, but I didn't have time to find it.\n Thx whophil, It works like a charm by just uninstalling/reinstalling IPython via the Canopy package manager!!!!\n when I run the command `ipython  notebook --no-browser --ip=* --port=8889` . I also face the same issue. I was facing this problem tried everything, then installed conda package, but still the problem is there.\n\n`\nTraceback (most recent call last):\n  File \"/root/yes/bin/ipython\", line 4, in <module>\n    from IPython import start_ipython\n  File \"/usr/local/lib/python2.7/dist-packages/IPython/__init__.py\", line 48, in <module>\n    from .terminal.embed import embed\n  File \"/usr/local/lib/python2.7/dist-packages/IPython/terminal/embed.py\", line 16, in <module>\n    from IPython.core.interactiveshell import DummyMod\n  File \"/usr/local/lib/python2.7/dist-packages/IPython/core/interactiveshell.py\", line 31, in <module>\n    from pickleshare import PickleShareDB\n  File \"/usr/local/lib/python2.7/dist-packages/pickleshare.py\", line 41, in <module>\n    from path import path as Path\nImportError: No module named path\n`\n upvote for minrk's solution of 6 Oct. which worked for me as well\n\n\"Yup, it's exactly as I suspected - /usr/lib/python2.7/dist-packages should not be in /usr/local/lib/python2.7/dist-packages/*.pt\"\n Yeah. Just moving easy-install.pth out of /usr/local/lib/python2.7/dist-packages/ helped.\n I've just solved this problem, i updated my ipython with pip3 install -U ipython, but i think this problem was solved because pip3 installed path.py as additional dependency while updating.\n I am still getting the same issue. \nImportError: No module named paths\n\nCan you guys please provide some solution for it.\nPlease find the [pastebin link](http://pastebin.com/e9gUr9Y4)\n That error means it's finding an older version of IPython when it tries to import it. Uninstall and reinstall IPython, and make sure that it's finding the copy you think it should be using.\n  `pip install path.py` fixed this issue for me. Found the solution [in this issue](https://github.com/jupyter/notebook/issues/525)\n Still the issue occurs after uninstalled ipython/jupyter, and removed easy_install.pth.\n\nNeed more information to resolve the issue?\n That means there's still an old IPython being imported. Try to verify with `python -c 'import IPython; print(IPython.__file__)'`\n Hi,\nI am facing the same error and even removing the easy_install.pth didn't helped.\n\nI tried your instruction.\n\n```\npython -c 'import IPython; print(IPython.__file__)'\n```\n\nOutput was following.\n\n```\n/usr/local/lib/python2.7/dist-packages/IPython/__init__.pyc\n```\n\nwhat is to be inferred from this..?? \n\nI even tried pip install path.py but still the error persist.\n\nThanks.\n Still no clue ... And I remembered when I reinstall ipython via pip the IPython folder is removed in dist-packages...\n\n``` shell\n$python -c 'import IPython; print(IPython.file)'                                                                                                                        \nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\nAttributeError: 'module' object has no attribute 'file'\n\n$python -c 'import IPython; print(dir(IPython))'                                                                                                                        \n['Application', 'Config', 'InteractiveShell', 'TryNext', '__author__', '__builtins__', '__doc__', '__file__', '__license__', '__name__', '__package__', '__path__', '__version__', 'absolute_import', 'config', 'core', 'embed', 'embed_kernel', 'extensions', 'external', 'extract_module_locals', 'get_ipython', 'lib', 'os', 'release', 'start_ipython', 'start_kernel', 'sys', 'sys_info', 'terminal', 'test', 'testing', 'utils', 'version_info']\n\n$python -c 'import IPython; print(IPython.__path__)'                                                                                                                    \n['/usr/lib/python2.7/dist-packages/IPython']\n\n$ls /usr/lib/python2.7/dist-packages/IPython                                                                                                                            \nconfig         consoleapp.pyc  display.py   extensions  frontend.py   __init__.py   kernel  __main__.py   nbconvert  parallel  scripts    terminal  utils\nconsoleapp.py  core            display.pyc  external    frontend.pyc  __init__.pyc  lib     __main__.pyc  nbformat   qt        sphinxext  testing\n\n\n$ipython --version \n1.2.1\n\n$ python -c 'import sys; print(sys.path)'                                                                                                                                \n['', '/usr/lib/python2.7/dist-packages', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-x86_64-linux-gnu', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages/PILcompat', '/usr/lib/python2.7/dist-packages/gtk-2.0', '/usr/lib/pymodules/python2.7', '/usr/lib/python2.7/dist-packages/ubuntu-sso-client', '/usr/lib/python2.7/dist-packages/wx-3.0-gtk2']\n\n$ls /usr/lib/python2.7/dist-packages|grep IPython                                                                                                                     \nIPython\n\n$ls /usr/lib/python2.7/dist-packages|grep pth                                                                                                                           \ngtk-2.0-pysupport-compat.pth\nPILcompat.pth\npygtk.pth\npython-support.pth\nrepoze.lru-0.6-nspkg.pth\nsetuptools.pth\nubuntu-sso-client.pth\nwx.pth\nzope.interface-4.0.5-nspkg.pth\n\n```\n > what is to be inferred from this..??\n\nThis means that the IPython being imported is the very-old one installed by `apt-get`. If you have done `pip install --upgrade ipython`, that should install a newer IPython in `/usr/local/lib/python2.7/dist-packages`. `/usr/lib/python2.7/dist-packages` being on the front of sys.path means that there is an `easy-install.pth` file with this path, which should be removed. It is caused by a bug in setuptools. The most likely location for this file is:\n\n```\n/usr/local/lib/python2.7/dist-packages/easy-install.pth\n```\n\nYou can check for this setuptools bug with:\n\n```\ngrep dist-packages /usr/local/lib/python2.7/dist-packages/*.pth\n```\n\nIf the file is where I expect it is, the fix should be to remove the file:\n\n```\n/usr/local/lib/python2.7/dist-packages/easy-install.pth\n```\n\nWhile you are at it, make sure your pip/setuptools are up to date:\n\n```\npip install --upgrade setuptools pip\n```\n @minrk \nProblem solved by 'apt-get remove ipython'. \n\nCheers!\n @minrk after upgrading the setup tools and pip, \"import path\" worked in python and in ipython. \n\nAs a side note, the ipython controller and engines are correctly working together in direct view mode.\n Hi all,\nI have same issue and I have already tried everything above mentioned.\nThere is no easy-install.pth file in any of mentioned directories.\nAs for versions, both pip list an python -m IPython --version give me the same result 4.1.1.\n\nPlease give some ideas how to solve this. Many thanks.\n Have you tried `apt-get remove ipython` - or the equivalent for your platform?\n\nThat error message means that it is finding an older version of IPython for whatever reason. So try removing every copy of IPython you can track down, and then installing it again.\n Yes, I did already, but nothing is changed.\n There is probably another copy of IPython hiding somewhere on your system. What platform are you on, and what might you have used to install IPython (e.g. apt, conda, pip)\n Solved: My system was crashed yesterday, after installing and uninstalling\ncouple of things. But, now after formatting ipython seams working. In any\ncase the problem was with the versions, as You said. Thank You so much for\nhelp!\n\nOn Wed, Feb 17, 2016 at 6:49 PM, Thomas Kluyver notifications@github.com\nwrote:\n\n> There is probably another copy of IPython hiding somewhere on your system.\n> What platform are you on, and what might you have used to install IPython\n> (e.g. apt, conda, pip)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/270#issuecomment-185236566.\n Hello\n\nI was facing the same problem on my mac. As suggested by @minrk, removing `easy-install.pth` from `/Library/Python/2.7/site-packages` did the trick. \n @minrk  thank you!\n I got the same import error while opening ipython notebook after I upgraded my pip. I tried everything suggested above including uninstalling anaconda (which did not uninstall for some reason) but nothing worked. While reviewing anaconda documentation, I thought of updating my conda and anaconda to see if that would help. Luckily, it did the trick. Once again, my jupyter notebook is up and running. \r\nLesson learned: When you upgrade pip, make sure to update your conda and anaconda as well. \r\nThe commands I used to resolve the issue are:\r\npip install --upgrade pip\r\nconda update conda\r\nconda update anaconda","You can take a look here:\nhttps://github.com/ipython-contrib/IPython-notebook-extensions/tree/3.x/usability/annotations\n Thanks, @juhasch! A great case for extensions.\n","Thanks. We'll track this one at jupyter/jupyter#15, since it affects multiple repos.\n\nAs a workaround for now, you can use `python -m jupyter`\n","Sorry, to clarify further, this is after installing and then running either `jupyter notebook` or `ipython notebook`\n Do you have custom configuration in `~/.ipython` or in `jupyter --config-dir` ?\nBad config mean that a config file option as a wrong value.\n There was a file there, although not one that I added myself. I think it may have carried over from an earlier and since removed installation of jupyter-drive? I'm not sure though. After deleting that file it now works, thank you!\n @cjprybol  which file you have deleted? I am getting the same error as you after installing jupyter-drive.\n okay got it its `~/.jupyter/jupyter_notebook_config.json` \n","Try running `conda update pyzmq` first. I'm not sure why conda Python would be failing to build pyzmq.\n That seemed to fix the issue. Thanks. \n","I expect this change was on purpose, but we can ping marked about it. I'm not sure there is anything we can do unless this is optional behavior in marked.\n I'm going to decide that \"Feature not bug\" or \"Wontfix\" or \"See upstream\". \nClosing. \n","Hi @davidtrem, \n\nCan you try running `$ jupyter migrate` ? It should do the right thing, \n\njust move your `custom.js` in `~/.jupyter/custom/custom.js`, it does work for me:\n\n```\n$ cat ~/.jupyter/custom/custom.js\nrequire([\"codemirror/keymap/sublime\", \"notebook/js/cell\"],\n    function(sublime_keymap, cell) {\n        cell.Cell.options_default.cm_config.keyMap = 'sublime';\n    }\n);\n```\n Closing, feel free to reopen if it does not work ! Thanks !\n @Carreau\nWell, I've checked that IPython.Cell.options_default.cm_config.keyMap is indeed correctly set in the javacript console but the sublime keybinding seems not to be effective. For example if I try Cmd-d it delete the line instead of selecting following occurrence of the word... \n What about that ?\n\n``` javascript\nrequire([\"codemirror/keymap/sublime\", \"notebook/js/cell\", \"base/js/namespace\"],\n    function(sublime_keymap, cell, IPython) {\n        // setTimeout(function(){ // uncomment line to fake race-condition\n        cell.Cell.options_default.cm_config.keyMap = 'sublime';\n        var cells = IPython.notebook.get_cells();\n        for(var c=0; c< cells.length ; c++){\n            cells[c].code_mirror.setOption('keyMap', 'sublime');\n        }\n\n        // }, 1000)// uncomment  line to fake race condition \n    } \n);\n```\n Yes that works :-)\n(I did not have to use the commented lines.)\nMany Thanks  !\n n.b. After creating custom.js for the first time, you'll need to restart the jupyter server. For subsequent modifications refreshing the browser is usually sufficient ([source](http://jupyter-notebook.readthedocs.org/en/latest/examples/Notebook/JavaScript%20Notebook%20Extensions.html#Back-to-theory)).\n On linux and windows `ctrl+enter` is a sublime shortcut for 'insert line below cursor' , so @Carreau's solution causes new lines to be added whenever running a cell.\n\nIs it possible to override individual items from a keymap? Adding `Jupyter.keyboard_manager.command_shortcuts.remove_shortcut('Ctrl-Enter');\n` doesn't seem to work.\n you can prevent the ctrl+enter produce a new line in jupyter notebook by comment out the following line:\n\n``` javascript\ncmds[map[ctrl + \"Enter\"] = \"insertLineAfter\"] = function(cm) { insertLine(cm, false); };\n```\n\nin the file:\n\n```\n[python lib path]/dist-packages/notebook/static/components/codemirror/keymap/sublime.js\n```\n @junzis What if I'm working with a Anaconda environment?\n @Carreau why is the loop through all cells necessary ?\r\n\r\nIf I don't have the loop  sometimes when I revisit a notebook I find that the keymap is forgotten. Either the whole keymap, or only the `extra_keys` that I add to it, I'm not sure. However, I can duplicate the cell (copy+paste) and the new one has the correct behaviour.\r\n\r\nI mention that I am the only one editing the notebook.\r\n\r\n---\r\n\r\nAlso, I tried removing the `Ctrl + Enter` mapping like this: `delete sublime_keymap[\"Ctrl-Enter\"]` which failed because `sublime_keymap` is not defined. Since it is in `require`, why would it not be defined ?\r\n\r\nThe following seems to work, but it doesn't set the `extra_keys` on cells which already exist. Kind of strange\r\n \r\n```javascript\r\n    require([\"codemirror/lib/codemirror\", \"codemirror/keymap/sublime\", \"notebook/js/cell\"],\r\n    function(cm, sublime_keymap, cell) {\r\n        console.log(\"loading custom sublime extension\");\r\n        let subl = cm.keyMap.sublime;\r\n        // disable ctrl-enter\r\n        delete subl[\"Ctrl-Enter\"];\r\n        delete subl[\"Shift-Ctrl-Enter\"];\r\n\r\n        cell.Cell.options_default.cm_config.keyMap = 'sublime';\r\n\r\n        var extraKeys = { \"Ctrl-A\": \"goLineStartSmart\", \"Ctrl-E\": \"goLineEnd\" };\r\n        cell.Cell.options_default.cm_config.extraKeys = extraKeys;\r\n        console.log(\"DONE: loading custom sublime extension\");\r\n    });\r\n```\r\n Each cell has its own instance of CodeMirror. Their options are copied from `cell.Cell.options_default.cm_config` when they are created. So if cells are created on the page before your JS code runs, your changes to `cell.Cell.options_default.cm_config` are too late to affect them. That's why @Carreau's code loops over all cells. nice, thank you !\r\nwhen is that run ? should it not wait for the notebook to be ready, i.e. `notebook_loaded.Notebook` event ? I'm not sure. We've had some problems reported with custom JS that I suspect were caused by code waiting for that event after it had already happened. We should probably make a notebook_loaded promise to avoid that, so you could do `Jupyter.notebook_loaded.then(...)`.","Hi @zhuzelong, \n\n`$ jupyter migrate` should do the right thing:\n\n```\n$ jupyter migrate\n[JupyterMigrate] Copying /Users/bussonniermatthias/.ipython/profile_default/static/custom/custom.css -> /Users/bussonniermatthias/.jupyter/custom/custom.css\n```\n\nUsually just rename `~/.ipython/profile_default/` to `~/.jupyter/` it should work the same. \n\nClosing, feel free to reopen if it did not work !\n\nThanks !\n","There has been enough progress in the https://github.com/jupyter/phosphor-notebook repo, as well as more progress on splitting things up further, that this experimental branch is no longer needed.\n","Closed as Travis is convinced it is causing a break.  I will issue a new pull request with one commit that should pass Travis.\n","Arg, sorry. Should be fixed by jupyter/jupyter_core#42\n","Ping\n Sorry slipped through. +1 to me simple enough, merging.\n\nThanks !\n","This can be done by adding something like this in the settings file:\n\n```\nc.NotebookApp.tornado_settings = { 'headers': { 'Content-Security-Policy': \"frame-ancestors 'self' https://*.terminal.com\" } }\n```\n","Awesome!\n May I just scream here super loudly ? \n AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHHH\n\n```\n    \uff61\u309c(`\u0414\u00b4)\u309c\uff61\n\u253b\u2501\u253b \ufe35\u30fd(`\u0414\u00b4)\uff89\ufe35 \u253b\u2501\u253b\n```\n lol, u mad bro?\n Yeahhhhh working, just need to cleanup things now....\n cc @dhermes and @michaelpacer\n Not working case:\n\n```\ndef something():\n  pass\n```\n\n```\n^( ){1,3}(\\w)\n    $2\n```\n Ok, mostly ready for comments. \n I didn't see a standard keyboard shortcut or Edit menu item for this. I know it may be difficult to find a good keyboard shortcut (maybe not) but there should definitely be an Edit menu item for this as it is a very common action.\n\nAlso, what would it take to enable this and the command pallette on the text editor page as well?\n > I didn't see a standard keyboard shortcut or Edit menu item for this.\n\nWe can bikeshed on that in another smaller PR.\nIt is \"a very common action\" but no-one was able to use it for the past 4 years, so it can wait a week. \nI would prefer to land that and test it quick then someone can decide on icon and menu naming later.\n\n> Also, what would it take to enable this and the command palette on the text editor page as well?\n\nWhat would be the point ? The command palette is made to list `actions` and work with a `keyboard_manager` which the text-editor lacks. Plus menus [do not use actions](https://github.com/ipython/ipython/pull/7285), so what would be the use of the command palette?\n I am fine merging and iterating in master. But I don't understand why you\nrefer to a discussion/decision about keyboard shortcuts and menu items as\nbikeshedding. Do you mean that we shouldn't have the discussion?\n\nIIRC there was a PR to add the keyboard manager to the file browser so\nadding it to the text editor would also make sense? I didn't realize that\nmenus were not yet using actions. My logic about the commad pallette is\nthat as we move to a single page app where there are many different\ncomponents on a page, having a command pallette would be very useful - even\nfor non-notebook components.\n\nOn Sat, Aug 15, 2015 at 8:36 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I didn't see a standard keyboard shortcut or Edit menu item for this.\n> \n> We can bikeshed on that in another smaller PR.\n> It is \"a very common action\" but no-one was able to use it for the past 4\n> years, so it can wait a week.\n> I would prefer to land that and test it quick then someone can decide on\n> icon and menu naming later.\n> \n> Also, what would it take to enable this and the command palette on the\n> text editor page as well?\n> \n> What would be the point ? The command palette is made to list actions and\n> work with a keyboard_manager which the text-editor lacks. Plus menus do\n> not use actions https://github.com/ipython/ipython/pull/7285, so what\n> would be the use of the command palette?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/285#issuecomment-131394935.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n No bikeshedding just in the sens that people will disagree on `F` vs `Shift-F`, vs `Ctrl/Cmd-Shift-F`, menu naming, position in the menu, separator or not, wether is conflit on Chrome/FF/safari/Linux, and how it is not possible to trigger the search and replace on a Mac running Linux with a physical german windows keyoard configured to use a Dvorak layout.\n\nWe can have the discussion, but I don't want to introduce (too much) non-technical change in this PR. \n\nThe other thing that could go into the discussion is the tabindex position of the \"Use regEx\" and \"case sensitive\" button in the current dialog layout.\n\nI fail to see the use on the command palette on the \"tree\" view, and I don't see any reason to have a keyboard_manager on the editor, as it is already \"just\" a full page codemirror instance that have it's own keybindings, and no concept of actions either. \n\nThough if `actions` are added to the editor or tree view, I can adapt the code of the command palette to also work there, it shouldn't be too hard. \n Updates to have 2 actions, replace in all notebook, or only in selected cells. \n Last version of the UI, with lots of though and improvement. \n\n`Search` is focused by default. \n`Tab` switch focus to `Replace`.\n\nSo you can easily search/replace with keyboard. \n\nCaseSensitive / RegEx toggle are just before Search, So just a Shift-Tab Away.\n\nI did it this way because having this after Search, or Replace was too far, or annoying. to tab 4 times to go to replace. \n\nCase &  RegEx auto focus input after toggle, which reduce the number of keypress needed.\n\nThe replace only is selected cells is just after the Replace field which make it easy to toggel just before validating. \n\nRecap of flow, Search selected by default. Shift Tab, does of course inverse of Tab. \nCaseSensitive-[tab]->RegEx Toggle\nRegEx Toggle-[tab]->Search\n**Search**-[tab]->Replace\nReplace-[tab]->Only Selected toggle\n\nSwitch Case Sensitive -> Search focused.\nSwitch RegEx -> Search focused.\nSwitch only selected cell -> replace focused.\n\n<img width=\"720\" alt=\"screen shot 2015-08-18 at 13 29 11\" src=\"https://cloud.githubusercontent.com/assets/335567/9328909/413ef236-45ad-11e5-8eb1-5a8c453de64d.png\">\n @Carreau Super!  Really happy(https://github.com/jupyter/notebook/issues/261)  about this + #266 = super power Jupyter notebook:) Your implementation looks very cool.\n > @Carreau Super! Really happy(#261) about this + #266 = super power Jupyter notebook:) Your implementation looks very cool.\n\nThanks. \n Ping.\n\nOtherwise I'll merge and wait for complaints. \n +1, we know we want this, let's merge and iterate in master if we need to.\n\nOn Wed, Aug 26, 2015 at 1:52 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Ping.\n> \n> Otherwise I'll merge and wait for complaints.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/285#issuecomment-134902074.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n You haven't pushed the Green Button in a while, do I leave you to do it ?\n (and also why are you up so early)\n Merged! - woke up at 6:30 for no particular reason - my mind must have sensed my inbox filling up :)\n any many thanks for the work on this one - super useful!\n\nOn Wed, Aug 26, 2015 at 7:31 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> (and also why are you up so early)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/285#issuecomment-135041091.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Great !\nLet me now open a PR with the keybinding, menu, and toolbar icon. \n > Merged! - woke up at 6:30 for no particular reason - my mind must have sensed my inbox filling up :)\n\n:-) I can ping you on more things. \n Hadn't even seen this! how cool.\n\nI assume the modal is not the long-term home for this? Being able to use the search results as a navigation mechanism for long documents is really key. Currently, I think the pager answers the mail, while a phosphor panel would make long term sense...\n the \"Search\" part is not really done, the replace mostly. I would use search through the browser it is more reliable. \n Sorry for my ignorance, but how do I get access to find and replace? How do I open this \"Command palette\" (Googling \"jupiter command palette\" gives me nothing useful). I could really use some find and replace functionality in my work right now where I have to rename a bunch of variables.\n\nRegarding versions:\nClicking about in Jupiter Notebook: \"The version of the notebook server is 4.0.4\"\nconda update jupyter: \"jupyter                   1.0.0                    py34_0\"\n @GandalfSaxe this hasn't been released, so you would need to install the notebook from master, or wait for the release of 4.1.\n @minrk Ah fair enough. Looking forward to it :+1: \n @Carreau I know you said the \"search part\" is not really done, but I'd love if you could implement the look ahead and look behind features of regex.\n Awesome work!\n","Nice, thanks min.\n","What do you get from `pip list`, and `python -m platform`?\n And what is the exact path that's failing?\n Hey,\n\nThanks for getting back to me. I've just tried again using a fresh python-2.7 virtualenv. Sure enough, we still have the issue.\n\nThe failing path is: `http://localhost:8888/tree`\n\npip list:\n\n```\n$ /tmp/ve/bin/pip list\nYou are using pip version 7.0.3, however version 7.1.2 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\nbackports.ssl-match-hostname (3.4.0.2)\ncertifi (2015.9.6.2)\ndecorator (4.0.2)\nfunctools32 (3.2.3.post2)\nipykernel (4.0.3)\nipython (4.0.0)\nipython-genutils (0.1.0)\nJinja2 (2.8)\njsonschema (2.5.1)\njupyter-client (4.0.0)\njupyter-core (4.0.4)\nMarkupSafe (0.23)\nmistune (0.7.1)\nnbconvert (4.0.0)\nnbformat (4.0.0)\nnotebook (4.0.4)\npath.py (8.1.1)\npexpect (3.3)\npickleshare (0.5)\npip (7.0.3)\nptyprocess (0.5)\nPygments (2.0.2)\npyzmq (14.7.0)\nsetuptools (17.0)\nsimplegeneric (0.8.1)\nterminado (0.5)\ntornado (4.2.1)\ntraitlets (4.0.0)\nwheel (0.24.0)\n```\n\nplatform:\n\n```\nOpenBSD-5.8-amd64-64bit\n```\n I've just tried using a python3.4 virtualenv. The traceback does not occur under this setup.\n @vext01 sorry, I meant the filesystem path that's failing. Can you send the path on the filesystem, and a listing of the directory that it's trying to list?\n Hey.\n\nI'm not at my computer, but it was just my home directory. So you suspect a\nfilename is causing the crash? I can try later with another path, and look\nfor troublesome characters in filenames in my home directory.\n\nCheers\nOn 10 Sep 2015 21:54, \"Min RK\" notifications@github.com wrote:\n\n> @vext01 https://github.com/vext01 sorry, I meant the filesystem path\n> that's failing. Can you send the path on the filesystem, and a listing of\n> the directory that it's trying to list?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/287#issuecomment-139362781.\n There is a non-ascii path somewhere, causing the failure. It is presumably in one of two places:\n1. the directory being listed, or\n2. one of the filenames in the listing\n Ah, well here is the problem file:\n\n```\n-rw-------    1 edd   edd      1024 May 25  2014 .?    set document.colors.dirs = \"black\"??    ## document.colors.increase_contrast [\n```\n\nI would have been confused, but I know what this is all about. There was a bug in the elinks web browser (which IIRC is now fixed), which caused elinks to write a file whose name was (some of) the contents of the elinks config file. This is one such file.\n\nObviously filename is crazy, but we could try to make this a little more robust. Something like this:\n\n```\n--- filemanager.py.orig Fri Sep 11 16:29:30 2015\n+++ filemanager.py  Fri Sep 11 16:32:56 2015\n@@ -246,7 +246,12 @@\n             model['content'] = contents = []\n             os_dir = self._get_os_path(path)\n             for name in os.listdir(os_dir):\n-                os_path = os.path.join(os_dir, name)\n+                try:\n+                    os_path = os.path.join(os_dir, name)\n+                except UnicodeDecodeError as e:\n+                    self.log.warn(\n+                        \"failed to decode filename '%s': %s\", name, e)\n+                    continue\n                 # skip over broken symlinks in listing\n                 if not os.path.exists(os_path):\n                     self.log.warn(\"%s doesn't exist\", os_path)\n```\n\nCheers\n do you want to try sending a PR ?\n","It's a bug in the import that only affects Python 2. Fixed by #289.\n thanks for fixing it\n","The requirements.txt is only for the not-yet released jupyter/ipython dependencies. setup.py expresses the terminado dependency. How did you install the notebook?\n https://github.com/jupyter/jupyter_notebook#jupyter-notebook\n\nDev quickstart:\n...\n    pip install -r requirements.txt\n Yes, as mentioned above, the requirements.txt only gets the dependencies that `pip install -e .` will fail to get. `pip install -e .` will get terminado. Did you do `pip install -e .` or something else to install the notebook package?\n pip install -e .\n\n 2021  git clone https://github.com/jupyter/jupyter_notebook.git\n 2022  cd jupyter_notebook/\n 2023  pip install -r requirements.txt\n 2024  pip install -e .\n 2025  jupyter notebook\n 2026  grep terminado requirements.txt \n 2027  pip install terminado\n 2028  jupyter notebook\n 2029  history \n\nHmm,  This shouldn't matter, but the VE is left over from attempting to follow \n\n https://github.com/ipython/ipython#development-installation  \npip install -e \".[notebook]\" --user\n Could not find any downloads that satisfy the requirement jupyter-notebook (from ipython==4.0.0-dev)  \n\nTried to figure out how to fix, gave up, but did not clean up the VE.\n Those exact steps worked for me. What version of pip?\n and setuptools, perhaps.\n ```\n(ipn)carl@twist:~/src/jupyter_notebook$ pip -V\npip 1.5.4 from /home/carl/.virtualenvs/ipn/local/lib/python2.7/site-packages (python 2.7)\n```\n\n```\n(ipn)carl@twist:~/src/jupyter_notebook$ python \nPython 2.7.6 (default, Mar 22 2014, 22:59:56) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import setuptools\n>>> setuptools.__version__\n'2.2'\n```\n\nI just tried again with a clean VE, still errors.\nI also grepped the output of pip install -e . for terminado, found nothing.\n Does it work if you `pip install --upgrade setuptools pip` first? Current setuptools is 15.1.\n\nI ran this, for a clean env:\n\n```\npython2 -m virtualenv /tmp/test-req\nsource /tmp/test-req/bin/activate\npip install -r requirements.txt -e .\n```\n\nWhich finished with:\n\n```\nSuccessfully installed appnope-0.1.0 backports.ssl-match-hostname-3.4.0.2 certifi-14.5.14 \ndecorator-3.4.2 ipython ipython-genutils ipython-kernel jinja2-2.7.3 jsonschema-2.4.0 \njupyter-client jupyter-core jupyter-nbconvert jupyter-nbformat jupyter-notebook \nmarkupsafe-0.23 mistune-0.5.1 path.py-7.3 pexpect-3.3 pickleshare-0.5 ptyprocess-0.4 \npygments-2.0.2 pyzmq-14.5.0 simplegeneric-0.8.1 terminado-0.5 tornado-4.1 traitlets\n```\n\nAnd `pip freeze`:\n\n```\nappnope==0.1.0\nbackports.ssl-match-hostname==3.4.0.2\ncertifi==14.5.14\ndecorator==3.4.2\n-e git+https://github.com/ipython/ipython.git@d538c7ac9dcee2e75ff5e670376ac4d3ad6715ee#egg=ipython-master\n-e git+https://github.com/ipython/ipython_genutils.git@cd17ef4c300b63392738c673f41c09e5b4dfaa6d#egg=ipython_genutils-master\n-e git+https://github.com/ipython/ipython_kernel.git@e02f13bfb74d1e8c82b1cf30b49e376b12fbc2c9#egg=ipython_kernel-master\nJinja2==2.7.3\njsonschema==2.4.0\n-e git+https://github.com/jupyter/jupyter_client.git@67e7a98405c154c0f4f04024d5442af63b553dae#egg=jupyter_client-master\n-e git+https://github.com/jupyter/jupyter_core.git@c0e8787e3c7e32ff632f7e6058ac083ffb9642e7#egg=jupyter_core-master\n-e git+https://github.com/jupyter/jupyter_nbconvert.git@da1d3ee05ce3453bb2c5e2c0625160711f4419fa#egg=jupyter_nbconvert-master\n-e git+https://github.com/jupyter/jupyter_nbformat.git@137926e731512b70fdf26266e9ad68254eec5b58#egg=jupyter_nbformat-master\n-e git+git@github.com:jupyter/jupyter_notebook.git@68d41f59924939f42a538956f112f4682c5853b7#egg=jupyter_notebook-master\nMarkupSafe==0.23\nmistune==0.5.1\npath.py==7.3\npexpect==3.3\npickleshare==0.5\nptyprocess==0.4\nPygments==2.0.2\npyzmq==14.5.0\nsimplegeneric==0.8.1\nterminado==0.5\ntornado==4.1\n-e git+https://github.com/ipython/traitlets.git@4b26dff292a23b89976afa7732894c5bb1969f03#egg=traitlets-master\n```\n updating setuptools fixed it.\n\n```\n(test-req)carl@twist:~/src/jupyter_notebook$ pip install --upgrade setuptools pip\n\n  Running setup.py install for ptyprocess\n  Running setup.py install for terminado\n  Running setup.py develop for jupyter-notebook\nSuccessfully installed backports.ssl-match-hostname-3.4.0.2 certifi-14.5.14 decorator-3.4.2 ipython ipython-genutils ipython-kernel jinja2-2.7.3 jsonschema-2.4.0 jupyter-client jupyter-core jupyter-nbconvert jupyter-nbformat jupyter-notebook markupsafe-0.23 mistune-0.5.1 path.py-7.3 pexpect-3.3 pickleshare-0.5 ptyprocess-0.4 pygments-2.0.2 pyzmq-14.5.0 simplegeneric-0.8.1 terminado-0.5 tornado-4.1 traitlets\n```\n\nbefore I updated:\n\n```\n(test-req)carl@twist:~/src/jupyter_notebook$ pip install -r requirements.txt -e .\n\nSuccessfully installed ipython-genutils traitlets jupyter-core jupyter-nbformat jupyter-client ipython ipython-kernel jupyter-nbconvert jinja2 tornado jupyter-notebook decorator jsonschema pyzmq pickleshare simplegeneric pexpect mistune pygments markupsafe certifi backports.ssl-match-hostname path.py\n\n(test-req)carl@twist:~/src/jupyter_notebook$ pip freeze\nJinja2==2.7.3\nMarkupSafe==0.23\nPygments==2.0.2\nargparse==1.2.1\nbackports.ssl-match-hostname==3.4.0.2\ncertifi==14.05.14\ndecorator==3.4.2\n-e git+https://github.com/ipython/ipython.git@d538c7ac9dcee2e75ff5e670376ac4d3ad6715ee#egg=ipython-master\n-e git+https://github.com/ipython/ipython_genutils.git@cd17ef4c300b63392738c673f41c09e5b4dfaa6d#egg=ipython_genutils-master\n-e git+https://github.com/ipython/ipython_kernel.git@4e153d4f6a1fc6c5780f0c198c132d29c3e9532e#egg=ipython_kernel-master\njsonschema==2.4.0\n-e git+https://github.com/jupyter/jupyter_client.git@67e7a98405c154c0f4f04024d5442af63b553dae#egg=jupyter_client-master\n-e git+https://github.com/jupyter/jupyter_core.git@c0e8787e3c7e32ff632f7e6058ac083ffb9642e7#egg=jupyter_core-master\n-e git+https://github.com/jupyter/jupyter_nbconvert.git@da1d3ee05ce3453bb2c5e2c0625160711f4419fa#egg=jupyter_nbconvert-master\n-e git+https://github.com/jupyter/jupyter_nbformat.git@137926e731512b70fdf26266e9ad68254eec5b58#egg=jupyter_nbformat-master\n-e git+https://github.com/jupyter/jupyter_notebook.git@68d41f59924939f42a538956f112f4682c5853b7#egg=jupyter_notebook-master\nmistune==0.5.1\npath.py==7.3\npexpect==3.3\npickleshare==0.5\npyzmq==14.5.0\nsimplegeneric==0.8.1\ntornado==4.1\n-e git+https://github.com/ipython/traitlets.git@4b26dff292a23b89976afa7732894c5bb1969f03#egg=traitlets-master\nwsgiref==0.1.2\n```\n Weird and worrying. I wonder what version of setuptools has this fixed.\n","Oh, I also got this in the terminal, but not much saying there, the line with `Creating new notebook in` is where it's stuck when trying to launching a new notebook.\n\n``` bash\n$ jupyter notebook .\n[I 14:26:36.267 NotebookApp] Serving notebooks from local directory: /Users/klay6683/Dropbox/src/iuvs/notebooks\n[I 14:26:36.267 NotebookApp] 0 active kernels\n[I 14:26:36.267 NotebookApp] The IPython Notebook is running at: http://localhost:8888/\n[I 14:26:36.267 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[I 14:32:42.581 NotebookApp] Kernel started: 9512e5c4-bb71-4b46-b40b-41d0ec698efe\n/Users/klay6683/miniconda3/lib/python3.4/site-packages/IPython/kernel/__init__.py:13: ShimWarning: The `IPython.kernel` package has been deprecated. You should import from ipykernel or jupyter_client instead.\n  \"You should import from ipykernel or jupyter_client instead.\", ShimWarning)\n[I 14:33:17.164 NotebookApp] Kernel started: fa794431-84f1-419a-b1cb-51ffaa2ff3e5\n/Users/klay6683/miniconda3/lib/python3.4/site-packages/IPython/kernel/__init__.py:13: ShimWarning: The `IPython.kernel` package has been deprecated. You should import from ipykernel or jupyter_client instead.\n  \"You should import from ipykernel or jupyter_client instead.\", ShimWarning)\n[I 14:33:32.793 NotebookApp] Creating new notebook in\n^C[I 14:35:11.039 NotebookApp] interrupted\nServing notebooks from local directory: /Users/klay6683/Dropbox/src/iuvs/notebooks\n2 active kernels\nThe IPython Notebook is running at: http://localhost:8888/\nShutdown this notebook server (y/[n])? y\n[C 14:35:14.455 NotebookApp] Shutdown confirmed\n[I 14:35:14.455 NotebookApp] Shutting down kernels\n[I 14:35:14.972 NotebookApp] Kernel shutdown: 9512e5c4-bb71-4b46-b40b-41d0ec698efe\n[I 14:35:14.972 NotebookApp] Kernel shutdown: fa794431-84f1-419a-b1cb-51ffaa2ff3e5\n```\n I also can report that new notebooks had been created in the folder where I launched them, and I can open them with IPy3 notebook.\n Remove temporarly  your `custom.js` from `~/.jupyter/custom`. the rest of the errors don't matter. \n Also once you remove your `custom.js` you might want to post it here so that we can fix it. \n I put the `custom.js` here as a gist:\nhttps://gist.github.com/9ecb5830ea89c701d142\n Errm, I deleted the custom.js completely and it's still being found? Still stuck at opening a new notebook.\n\n<img width=\"1198\" alt=\"screenshot 2015-08-14 14 55 15\" src=\"https://cloud.githubusercontent.com/assets/69774/9283896/80c59fe8-4294-11e5-8e56-17d2955ec4a1.png\">\n So if you are \"just\" loading extensions (and if `gist.js` is sufficiently up to date). the see [here (TL;DR)](http://carreau.gitbooks.io/jupyter-book/content/custom-extension-1.html) , [here (longer explanation)](http://carreau.gitbooks.io/jupyter-book/content/notebook-extensions.html) on how to write and load extensions in a way which is not subject to race condition. \n\nWhich roughly in your case is removing custom.js and execute only once in the notebook:\n\n```\nIPython.notebook.config.update({\n  \"load_extensions\": {\"gist\":true}\n})\n```\n You need to restart the server. and check custom js both in `~/.jupyter` and `~.ipython/profile_default`\n Try also a force refresh in case Safari is cahing things. \n After renaming the `custom.js` in ~/.ipython/profile_default a new notebook now launched.\nI cannot execute the above `IPython.notebook.config.update()` command because `IPython` does not have a module called `notebook` anymore?\n Sorry should have precised , the above command should be in the JS console. \n\nIf things are found in `~/.ipython/profile_default` that you might have a 1/2 IPython 3.x 1/2 IPython 4.x System. \n That would be the result of the `conda install jupyter` then. What do I need to remove to make it only IPy 4.x?\n So I just ran into this problem(see below for exact warning output) on the command line as well though my actual notebooks open just fine. \n\n`/usr/local/lib/python3.4/site-packages/IPython/kernel/__init__.py:13: ShimWarning: The `IPython.kernel` package has been deprecated. You should import from ipykernel or jupyter_client instead.\n  \"You should import from ipykernel or jupyter_client instead.\", ShimWarning)`\n\nMy guess is that it relates to my previous customization in the ipython profile stuff and though it did copy it over to .jupyter when I first ran the notebook, now the existence of both sets of files is causing some kind of confusion.\n i have that as well everywhere I run Jupyter/IPy 4.x? Thought that it was just a transitional feature? So I have a messed up set-up?\n Hmm, so maybe you're right and it is a transitional feature\u2026I just moved my `~/.ipython` file to `~/.ipythontest` and its not producing any errors beyond the warning that we've already pointed out. So it can't just be that\u2026\n I don't see this with any of my environments. What do you get from `pip list`?\n ``` bash\nalabaster (0.7.3)\nappnope (0.1.0)\nastropy (1.0.4)\nautopep8 (1.2)\nBabel (1.3)\nbasemap (1.0.7)\nbcolz (0.10.0)\nbeautifulsoup4 (4.3.2)\nbinaryornot (0.3.0)\nblaze (0.8.2)\nbokeh (0.9.1dev-5ce7a15-27-gb689a69)\ncertifi (14.5.14)\nchest (0.2.3)\nclick (3.3)\ncliutils (0.1.3)\nclyent (0.4.0)\ncolorama (0.3.3)\nconda (3.16.0)\nconda-env (2.4.2)\ncookiecutter (1.0.0)\ncoverage (3.7.1)\ncoveralls (0.5)\nCython (0.23)\ncytoolz (0.7.3)\ndask (0.6.0)\ndatashape (0.4.6)\ndecorator (4.0.2)\ndill (0.2.4)\nDiviner (2.4.0b4)\ndocopt (0.6.2)\ndocutils (0.12)\nflake8 (2.4.1)\nflake8-docstrings (0.2.1.post1)\nFlask (0.10.1)\nGDAL (2.0.0)\ngraphviz (0.4.5)\ngreenlet (0.4.7)\nh5py (2.5.0)\nhapi (1.0, /Users/klay6683/Dropbox/src/hapi)\nHeapDict (1.0.0)\nhtml5lib (0.999)\nhypothesis (1.10.1)\nimageio (1.2)\nipykernel (4.0.3)\nipython (4.0.0)\nipython-genutils (0.1.0)\nipywidgets (4.0.2)\nisort (4.0.0)\nitsdangerous (0.24)\nIUVS (0.3.3, /Users/klay6683/Dropbox/src/iuvs)\njdcal (1.0)\nJinja2 (2.8)\njoblib (0.8.4)\njsonschema (2.4.0)\njupyter (1.0.0)\njupyter-client (4.0.0)\njupyter-console (4.0.0)\njupyter-core (4.0.3)\nline-profiler (1.0)\nllvmlite (0.6.0)\nlocket (0.2.0)\nlxml (3.4.4)\nMarkupSafe (0.23)\nmatplotlib (1.4.3)\nmccabe (0.3.1)\nmemory-profiler (0.33)\nmistune (0.7)\nmoviepy (0.2.2.11)\nmultipledispatch (0.4.8)\nnbconvert (4.0.0)\nnbformat (4.0.0)\nnetworkx (1.10)\nnose (1.3.7)\nnotebook (4.0.1)\nnumba (0.20.0)\nnumexpr (2.4.3)\nnumpy (1.9.2)\nodo (0.3.0)\nopenpyxl (2.0.2)\nordereddict (1.1)\np4terrains (0.1, /Users/klay6683/Dropbox/src/p4terrains)\npandas (0.16.2)\npartd (0.3.2)\npath.py (0.0.0)\npep257 (0.6.0)\npep8 (1.6.2)\npexpect (3.3)\npickleshare (0.5)\nPillow (2.9.0)\npip (7.1.0)\nPlanet4 (0.4, /Users/klay6683/Dropbox/src/planet4)\nplanetpy (0.1.0, /Users/klay6683/Dropbox/src/planetpy)\nplotly (1.6.13)\npluggy (0.3.0)\nply (3.6)\npsutil (2.2.1)\nptyprocess (0.4)\npvl (0.1.1)\npy (1.4.30)\nPYCISS (0.2, /Users/klay6683/Dropbox/src/pyciss)\npycosat (0.6.1)\npyflakes (0.8.1)\nPygments (2.0.2)\npymongo (2.8)\nPyOpenGL (3.1.1a1)\npyparsing (2.0.3)\nPyPDS (1.0.1)\nPysis (0.5.2, /Users/klay6683/Dropbox/src/Pysis)\npytest (2.7.2)\npytest-cov (2.0.0)\npython-dateutil (2.4.2)\npytz (2015.4)\npyuvis (0.2, /Users/klay6683/Dropbox/src/pyuvis)\nPyYAML (3.11)\npyzmq (14.7.0)\nqtconsole (4.0.0)\nrequests (2.7.0)\nscikit-image (0.11.3)\nscikit-learn (0.16.1)\nscipy (0.16.0)\nseaborn (0.6.dev0)\nsetuptools (18.1)\nsimplegeneric (0.8.1)\nsimplejson (3.6.5)\nsix (1.9.0)\nsnowballstemmer (1.2.0)\nSphinx (1.3.1)\nsphinx-rtd-theme (0.1.7)\nSpiceyPy (0.5.3)\nSQLAlchemy (0.9.9)\ntables (3.2.0)\nterminado (0.5)\ntoolz (0.7.4)\ntornado (4.2.1)\ntox (2.1.1)\ntqdm (1.0)\ntraitlets (0.0.2)\nvirtualenv (13.1.0)\nvispy (0.5.0.dev0, /Users/klay6683/Dropbox/src/vispy)\nWerkzeug (0.10.4)\nwget (2.2)\nwheel (0.24.0)\nxlrd (0.9.4)\nxonsh (0.1.6, /Users/klay6683/Dropbox/src/xonsh)\n```\n Oh, and btw, I tried to update with conda today and got an interesting resolution offered:\n\n```\n$ conda update --all\nFetching package metadata: ....\nWarning: No packages found in current osx-64 channels matching: xonsh, skipping\nSolving package specifications: .\nPackage plan for installation in environment /Users/klay6683/miniconda3:\n\nThe following packages will be downloaded:\n\n    package                    |            build\n    ---------------------------|-----------------\n    jupyter_core-4.0.4         |           py34_0          26 KB\n    notebook-4.0.2             |           py34_0         4.2 MB\n    qtconsole-4.0.1            |           py34_0         128 KB\n    ------------------------------------------------------------\n                                           Total:         4.4 MB\n\nThe following packages will be UPDATED:\n\n    jupyter_core: 4.0.3-py34_0 --> 4.0.4-py34_0\n    notebook:     4.0.1-py34_0 --> 4.0.2-py34_0\n    qtconsole:    4.0.0-py34_0 --> 4.0.1-py34_0\n\nThe following packages will be DOWNGRADED:\n\n    ipython:      4.0.0-py34_0 --> 3.2.1-py34_0\n\nProceed ([y]/n)?\n```\n So @jhamrick just helped me figure out what was going on. \n\nThe problem is that the kernelspec has a deprecated command, so while the first time you run jupyter notebook it does migrate your settings, it doesn't upgrade you to non-deprecated versions of the ipython kernel commands. So this issues shouldn't up in non-ipython kernels.\n\nIf you want to see the contents of the files where this is specified you can use:\n`cat /usr/local/share/jupyter/kernels/python2/kernel.json`\nor\n`cat ~/Library/Jupyter/kernels/python3/kernel.json`\n\nswapping out python2 or python3 depending on where you've installed them (apparently `/usr/local/share/jupyter/kernels` are where global kernels are stored and `~/Library/Jupyter/kernels/` are where user specific kernels are stored. \n\nFor example, my old `python2/kernel.json` read as follows\n\n```\n{\n\"display_name\": \"Python 2\",\n\"language\": \"python\",\n\"argv\": [\n    \"/usr/local/opt/python/bin/python2.7\",\n    \"-m\",\n    \"IPython.kernel\",\n    \"-f\",\n    \"{connection_file}\"\n]\n}\n```\n\nand my  old `python3/kernel.json` read as:\n\n```\n{\n\"display_name\": \"IPython (Python 3)\",\n\"language\": \"python\",\n\"argv\": [\n    \"python3\",\n    \"-c\", \"from IPython.kernel.zmq.kernelapp import main; main()\",\n    \"-f\", \"{connection_file}\"\n],\n\"codemirror_mode\": {\n    \"version\": 2,\n    \"name\": \"ipython\"\n}\n}\n```\n\nTo fix it run `jupyter kernelspec install-self --user` which will fix the incorrect command to `ipykernel`\n\nSo that afterward the Python3 `kernel.json` reads:\n\n`cat ~/Library/Jupyter/kernels/python3/kernel.json`\n\n```\n{\n\"display_name\": \"Python 3\",\n\"language\": \"python\",\n\"argv\": [\n    \"/usr/local/opt/python3/bin/python3.4\",\n    \"-m\",\n    \"ipykernel\",\n    \"-f\",\n    \"{connection_file}\"\n]\n}\n```\n\nAnd\n\n```\n{\n\"display_name\": \"Python 2\",\n\"language\": \"python\",\n\"argv\": [\n    \"/Users/michaelpacer/envs/jupyterpy2/bin/python2.7\",\n    \"-m\",\n    \"ipykernel\",\n    \"-f\",\n    \"{connection_file}\"\n]\n}\n```\n\nWhere the `python2` path goes to a virtualenv installed version of python since you need to run the `jupyter kernelspec install-self --user` command from a version of the `jupyter` that was installed using `python2` to update the `python2` kernel  (or conversely `python3` to update the `python3` kernel). Because my main python is `python3` from which I installed my global version of `jupyter`, that's why it has a non-virtualenv version of `python3` in its path.\n\nAnyway \u2014 I dunno if this will fix all your problems, but this should at least make those warnings go away. \n I executed `jupyter kernelspec install-self --user` several times (on different installs) successfully to avoid the ShimWarning about kernelspec in the Terminal where I launched jupyter. But now I'm getting it in a ipython notebook running in jupyter inside the cell even after reinstalling the kernel?\n\n``` python\n%matplotlib notebook\nimport seaborn as sns\nsns.set_context('notebook')\n\n/Users/klay6683/miniconda3/lib/python3.4/site-packages/IPython/kernel/__init__.py:13: ShimWarning: The `IPython.kernel` package has been deprecated. You should import from ipykernel or jupyter_client instead.\n  \"You should import from ipykernel or jupyter_client instead.\", ShimWarning)\n```\n\nFor debugging purposes I renamed the old .ipython folder, to no avail.\n The warning's probably coming from Seaborn importing IPython.kernel. Nothing wrong, just a warning that a deprecated API is in use. Is anything not working?\n No, all seems fine. I also get it during an import of one of my own modules, weirdly? Is this hidden in the .pyc files maybe? My libraries are installed via the `develop` option though, so any change should recreate the pyc.\n Actually, a fresh compile of MPL removed that warning and now I'm only getting from my module and I certainly don't import kernels unless it's somewhere chained? Would an import of IPython.display or html.widgets create this?\n > Actually, a fresh compile of MPL removed that warning and now I'm only getting from my module and I certainly don't import kernels unless it's somewhere chained? Would an import of IPython.display or html.widgets create this?\n\nProbably not, \n\nTry to do the following before anything else:\n\n``` python\nimport warnings\nfrom  IPython.utils.shimmodule import ShimWarning\nwarnings.filterwarnings('error','', ShimWarning)\n```\n\nThis will turn ShimWarnings into errors with tracebacks, so you can narrow down what is raising the warning. \n closed by #424\n Thanks, @Carreau for that tip, I somehow did not see this earlier, sorry.\n On one of my computers that I had been using IPython since 2010 early days, I finally upgraded last week to Jupyter and I can confirm that kernels launch fine. Still getting shim warning about IPython.kernel warning and this was the only link that turned up on google search. Based on this thread, sounds like something I should not be too concerned about since everything else seems to be working.\n","How did you install? What do you see from `pip list`? Does it work if you `pip install ipywidgets`?\n I understand what happened: The Bokeh notebook switched the kernel to Python2 which I did not notice (because I was looking at the error message that popped up at the same time I could have looked at what kernel is running ;) ) and I had not yet installed jupyter on my conda python 2 env. After doing that, this error message disappears. Sorry for the noise.\n I've runned the command below and all fixed for me\n\n```\n pip install ipython notebook \n```\n","These examples have been moved to the [ipywidgets repo](https://github.com/ipython/ipywidgets/tree/master/examples)\n","closing in favor of ipython/ipywidgets#135\n","I have the same problem, just after updating to Ipython 4 and Jupyter with Anaconda, like the OP, the \\boldsymbol in all my notebooks stopped working.\n\nAlso, the headers in the markdown cells , like #Header_text now need an space between the # sign and the text: # Header_text\n 1) will be fixed by https://github.com/jupyter/notebook/pull/324 \n\n2) please keep 1 bug per issue. See https://github.com/jupyter/notebook/issues/304 the space in between `#` and text is due to marked that changed its behavior oand on which we have no control about sadly. \n","I'm fine with this, though I would reverse the logic, so the default behavior is to use the minified sources (e.g. if the variable is unspecified, the template will use main.min.js). I also think `use_bundles` is very hard to understand.\n\nPerhaps `ignore_minified_js` better represents what's going on?\n Done\n :+1: other than one True that should be False\n Rhaa nice catch, I remembered to changed the default fro the traitlets, but not here. \n\nDone.\n","This is a bug in jsonschema 2.5 see (among other) https://github.com/jupyter/notebook/issues/136, I suppose it also affect 2.4...\n\nTry to install `functools32` ? (Or migrate to Python3, instead of still using legacy python :-) ) \n\n(closing, feel free to  reopen if it does not work) \n Upgrading jsonschema via pip (btw 2.4 is the latest version available through conda) does fix the problem in the clean environment, but it does not fix the main issue in my default installation.\n\nPresumably some previously existing library is interfering with the new notebook, but I am at a loss for what it might be. Any hints?\n FWIW regular old console `ipython` works fine but `ipython qtconsole` pops up a window but immediately crashes with the following terminal output:\n\n```\n[mlw-mbair ~]$ ipython qtconsole\n2015-08-15 19:01:04.902 python[23622:507] ApplePersistenceIgnoreState: Existing state will not be touched. New state will be written to /var/folders/rr/svlz5yhs0tsdqnsp8g4qg65m0000gn/T/com.continuum.python.savedState\nQPixmap::scaled: Pixmap is a null pixmap\n/Users/mwaskom/anaconda/bin/python.app: line 3: 23622 Abort trap: 6           /Users/mwaskom/anaconda/python.app/Contents/MacOS/python \"$@\"\n```\n (I don't think I can reopen the issue as I'm not a Jupyter collaborator)\n `conda install functools32` ?  It seem to be \"just\" a missing dependency of jsonschema. \nI doubt there is anything we should do in nbformat.\n I updated jsonschema in my default environment and it looks like it pulled in functools32\n\n```\n[mlw-mbair ~]$ pip install -U jsonschema\nRequirement already up-to-date: jsonschema in ./anaconda/lib/python2.7/site-packages\nRequirement already up-to-date: functools32 in ./anaconda/lib/python2.7/site-packages (from jsonschema)\n```\n\nI think that the issue with jsonschema in the clean environment was a red herring. For clarity I've reduced the issue to the main problem.\n I just tried the following\n\n```\n[mlw-mbair ~]$ conda create -n ipython_test ipython-notebook=3.2\n[mlw-mbair ~]$ . activate ipython_test\n(ipython_test)[mlw-mbair ~]$ pip install -U jsonschema\n(ipython_test)[mlw-mbair ~]$ pip install jupyter\n```\n\nAfter doing this, I was able to start the notebook with no problems. So I don't think it is quite so simple as a problem caused by pip installing jupyter over ipython that was installed by anaconda.\n It might be an issue with the conda packages, though when I launch with a fresh conda env it appears to be working fine. What happens if you try:\n\n```\npython -m ipykernel\n```\n\nDoes it die with the same Abort trap?\n\nSimilarly, does starting with `IPYTHONDIR=/tmp/ipython jupyter notebook` work or fail in the same way?\n\nDo you have any IPython startup or config files?\n > Does it die with the same Abort trap?\n\nYep, looks like it does:\n\n```\n[mlw-mbair ~]$ python -m ipykernel\nNOTE: When using the `ipython kernel` entry point, Ctrl-C will not work.\n\nTo exit, you will have to explicitly quit this process, by either sending\n\"quit\" from a client, or using Ctrl-\\ in UNIX-like environments.\n\nTo read more about this, see https://github.com/ipython/ipython/issues/2049\n\n\nTo connect another client to this kernel, use:\n    --existing kernel-26924.json\nAbort trap: 6\n```\n\n> Similarly, does starting with IPYTHONDIR=/tmp/ipython jupyter notebook work or fail in the same way?\n\nYep:\n\n```\n[mlw-mbair ~]$ export IPYTHONDIR=/tmp/ipython jupyter notebook\n[mlw-mbair ~]$ python -m ipykernel\nNOTE: When using the `ipython kernel` entry point, Ctrl-C will not work.\n\nTo exit, you will have to explicitly quit this process, by either sending\n\"quit\" from a client, or using Ctrl-\\ in UNIX-like environments.\n\nTo read more about this, see https://github.com/ipython/ipython/issues/2049\n\n\nTo connect another client to this kernel, use:\n    --existing kernel-26950.json\nAbort trap: 6\n[mlw-mbair ~]$ jupyter notebook\n[I 21:10:29.959 NotebookApp] Serving notebooks from local directory: /Users/mwaskom\n[I 21:10:29.959 NotebookApp] 0 active kernels\n[I 21:10:29.959 NotebookApp] The IPython Notebook is running at: http://localhost:8888/\n[I 21:10:29.959 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[I 21:10:34.759 NotebookApp] Creating new notebook in\n[I 21:10:36.094 NotebookApp] Kernel started: 338dc59c-934f-42da-b7d4-bfd697776999\n[I 21:10:39.085 NotebookApp] KernelRestarter: restarting kernel (1/5)\n[I 21:10:42.091 NotebookApp] KernelRestarter: restarting kernel (2/5)\n[I 21:10:45.098 NotebookApp] KernelRestarter: restarting kernel (3/5)\n[W 21:10:46.260 NotebookApp] Timeout waiting for kernel_info reply from 338dc59c-934f-42da-b7d4-bfd697776999\nAbort trap: 6\n```\n Increasingly weird. What about `python -c 'import zmq; print(zmq.zmq_version(), zmq.__version__)'`?\n ```\n[mlw-mbair ~]$ python -c 'import zmq; print(zmq.zmq_version(), zmq.__version__)'\n('4.1.2', '14.7.0')\n```\n In case it's useful, here are all the libraries in my default environment: http://pastebin.com/4jgLnic0\n I think this has to be something to do with one of the compiled dependencies or libraries loaded at runtime. Do you have any `DYLD_LIBRARY_PATH` or related environment variables set? When you run terminal IPython in the same env, do matplotlib, pandas, etc. all work properly?\n Also, do you see anything informative in the tail of `python -v -m ipykernel` before it dies?\n > I think this has to be something to do with one of the compiled dependencies or libraries loaded at runtime. Do you have any DYLD_LIBRARY_PATH or related environment variables set?\n\nNope, that variable isn't set.\n\n> When you run terminal IPython in the same env, do matplotlib, pandas, etc. all work properly?\n\nYes, I'm able to import numpy, matplotlib, pandas, and make basic plots from the ipython terminal.\n\n> Also, do you see anything informative in the tail of python -v -m ipykernel before it dies?\n\nHere's everything that gets printed to the terminal before the Abort Trap: http://pastebin.com/vmnXLrPR\n Aha, now we are on to something. Conda's libzmq is 4.0.5, but your pyzmq is picking up 4.1.2, perhaps from homebrew (in /usr/local/lib). Try this:\n\n```\nconda remove pyzmq\npip install pyzmq\n```\n Success! pip installing didn't link to the right libzmq, but uninstalling that and then reinstalling with conda did, and now things are working. Thanks!\n Thank you very much. \n_conda remove pyzmq_ and \n_conda install pyzmq_  \ndid it for me; jupyter notebook now runs!!! \n Worked for me as well.  I saw the same initial error and ultimately fixed it with:\n\nconda remove pyzmq\nconda install pyzmq\n\nThanks!\n This no longer works.  I downgraded to pyzmq=14.6.0 and it looks like the downgraded version works though.\n yeah, downgrade pyzmq to version 14.6.0 works.\n\nconda remove pyzmq\nconda install pyzmq=14.6.0\n Thanks!  This fixed a similar issue I was having too.  It didn't even try to start after \n$ conda remove pyzmq\n$ pip install pyzmq\n$ ipython notebook\n...\nImportError: No module named zmq.eventloop\n\nbut then I tried\n$ conda install pyzmq \n\nand it started working again. \n I think I have the same problem with python 3.5 and an anaconda install updated to the latest versions. after starting a notebook, the notebook can't connect to a kernel (button on top right oscillating between green and orange). downgrading pyzmq is not possible for python 3.5. any ideas?\n @philippberens What happens if you:\n\n```\nconda remove pyzmq\nconda install pyzmq\n```\n The Notebook still doesn't get a connection to the kernel, after a while of trying it gives up (broken chain). \n Is there any info that would be good to provide?\n @philippberens do you see any info in the terminal where the notebook started?\n yes, it says \"zmq message arrived on close channel\"\n ok, thanks for the help, it seemed to be Kaspersky firewall blocking the port.\n @philippberens Glad you got it resolved.\n @philippberens Did you just need to unblock port 8888 from Kaspersky? I also have Kaspersky and am having the same issue with Jupyter so I'd be curious to hear any more details. \n I am using anaconda3 and Cant seem to get jupyter notebook to run any code anymore, I get this error  when I start jupyter:\n \" Timeout waiting for kernel_info reply from fd21f12c-7427-4a40-a686-918dcd8bb5dc \"\n\nI have tried uninstalling pyzmq and reinstalling it but it still wont work.... any other solutions?\n This one solved it for me `pip install -U jsonschema` on two of my machines.\n I'm having this same problem.  None of the solutions above will work.  I'm working with python 2.7.11 and Anaconda 4.  I start a notebook and it hangs on \"Kernel Starting, please wait\".  Any help here would be appreciated!\n Several people just reported a similar issue with a recent update to uBlock on Chrome. If you have that combination, try disabling it. Apparently uBlock 1.7.2 will fix it.\n Thanks for the quick reply.  I have uBlock, but disabling didn't seem to fix it.  Any other suggestions?\n\nEdit: Just tried it in incognito Chrome and another browser and it works fine.  I guess I needed to just not have uBlock active at all? Either way, seems like it's fixed.\n I just got the problem with uBlock. You have to disable it from the extensions menu of chrome, and it should work again. \n I have the same issue, but don't have uBlock - any other suggestions? @drorhilman I think this thread has been used to describe several similar but distinct issues - can you describe exactly what symptoms you're seeing?\r\n\r\nThe general advice falls into two categories:\r\n- Uninstall and reinstall pieces that might be relevant.\r\n- Check for internet security software; we've had several problems with various kinds of security software blocking websocket connections.","That's crazy. Maybe it has to do with an id collision, since there is already a div with id=notebook on the page?\n That was fast. Thanks :+1:\n","in Jupyter 1.0 and Notebook 4.0 all should be the same except (roughly) replace `~/.ipython/profile_default/` by `~/.jupyter`\n\nif you drop a file in `.jupyter/custom/custom.js` it should work without extra modification. \n I see this issue is closed, and the provided answer (workaround) does indeed work, but I am still having a problem specifying `extra_static_paths` that point to locations outside the standard `~/.jupyter` directory.\n\nTurning on debug option, I can see that the configuration is read properly, no errors are reported, but the `custom.js` is simply ignored. FYI, the same configuration works on v3.\n indeed, thats what i used to do in earlier versions of ipython... i had a\ncustom run.py which did that thing amongst others... however i think the\nfile is still available in current upstream, but with \"/static\" prefixed,\nso \"/custom/custom.js\" will not point to your file which seems to be at\n\"/static/custom/custom.js\". at least thats what occured to me...\n\n2015-08-27 17:35 GMT+02:00 Ali Uneri notifications@github.com:\n\n> I see this issue is closed, and the provided answer (workaround) does\n> indeed work, but I am still having a problem specifying extra_static_paths\n> that point to locations outside the standard ~/.jupyter directory.\n> \n> Turning on debug option, I can see that the configuration is read\n> properly, no errors are reported, but the custom.js is simply ignored.\n> FYI, the same configuration works on v3.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/299#issuecomment-135471175.\n I think this issue is related to #199, and should be reopened.\n","@jdfreder will reopen after the widget split.\n","```\nnpm unavailable\nFailed to run bower: [Errno 2] No such file or directory\nYou can install js dependencies with `npm install`\n```\n\nYou need node.js and npm, that get installed with it.\n sudo apt-get install npm\npython setup.py install\n\nthat fixed it.\n\nHopefully someone will update the docs right?\nthat's kinda why I am bothering to open issues.\n We are still highly in developpement since we are splitting the repo, and\nwe don't have the docs building yet. But Yes we will, and npm will probably\nnot be required on released dependencies.\n\nI guess PR on the readme would still be accepted.\n\nOn Sun, Apr 19, 2015 at 1:44 AM, Carl Karsten notifications@github.com\nwrote:\n\n> sudo apt-get install npm\n> python setup.py install\n> \n> that fixed it.\n> \n> Hopefully someone will update the docs right?\n> that's kinda why I am bothering to open issues.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/jupyter_notebook/issues/30#issuecomment-94252199\n> .\n It should have refused to proceed when calling npm failed. That's a bug in setup.py.\n\nAnd yes, npm will only ever be needed to install from git, sdists and bdists will contain the built js/css, and won't depend on npm.\n","Can you try a `python -m IPython kernelspec install-self` to reinstall the kernelspec ?\n Sweet, python -m IPython kernelspec install-self totally fixed it. Tests working perfectly now. \n Great ! Closing. \n So sweet!  Working perfectly now!  Thanks Carreau:)\n Great , I had the same problem and now , Solved !! :) :) :+1: \n @engyasin :+1: \n Fixed it to me too! Thankx\n Fixed for me too, thanks Carreau!\n Thank you!\n\n`python -m jupyter kernelspec install-self` did the trick.\n Hi, i'm also having a similiar error. How do i fix it?\nTraceback (most recent call last):\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/notebook/base/handlers.py\", line 457, in wrapper\n    result = yield gen.maybe_future(method(self, _args, *_kwargs))\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/tornado/gen.py\", line 1008, in run\n    value = future.result()\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/tornado/concurrent.py\", line 232, in result\n    raise_exc_info(self._exc_info)\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/tornado/gen.py\", line 1014, in run\n    yielded = self.gen.throw(_exc_info)\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/notebook/services/sessions/handlers.py\", line 62, in post\n    kernel_id=kernel_id))\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/tornado/gen.py\", line 1008, in run\n    value = future.result()\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/tornado/concurrent.py\", line 232, in result\n    raise_exc_info(self._exc_info)\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/tornado/gen.py\", line 1014, in run\n    yielded = self.gen.throw(_exc_info)\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/notebook/services/sessions/sessionmanager.py\", line 79, in create_session\n    kernel_name)\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/tornado/gen.py\", line 1008, in run\n    value = future.result()\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/tornado/concurrent.py\", line 232, in result\n    raise_exc_info(self._exc_info)\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/tornado/gen.py\", line 1014, in run\n    yielded = self.gen.throw(_exc_info)\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/notebook/services/sessions/sessionmanager.py\", line 92, in start_kernel_for_session\n    self.kernel_manager.start_kernel(path=kernel_path, kernel_name=kernel_name)\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/tornado/gen.py\", line 1008, in run\n    value = future.result()\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/tornado/concurrent.py\", line 232, in result\n    raise_exc_info(self._exc_info)\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/tornado/gen.py\", line 282, in wrapper\n    yielded = next(result)\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/notebook/services/kernels/kernelmanager.py\", line 87, in start_kernel\n    super(MappingKernelManager, self).start_kernel(__kwargs)\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/jupyter_client/multikernelmanager.py\", line 110, in start_kernel\n    km.start_kernel(__kwargs)\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/jupyter_client/manager.py\", line 243, in start_kernel\n    *_kw)\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/jupyter_client/manager.py\", line 189, in _launch_kernel\n    return launch_kernel(kernel_cmd, *_kw)\n  File \"/Users/brendamainye/anaconda/lib/python2.7/site-packages/jupyter_client/launcher.py\", line 123, in launch_kernel\n    proc = Popen(cmd, *_kwargs)\n  File \"/Users/brendamainye/anaconda/lib/python2.7/subprocess.py\", line 710, in __init__\n    errread, errwrite)\n  File \"/Users/brendamainye/anaconda/lib/python2.7/subprocess.py\", line 1335, in _execute_child\n    raise child_exception\nOSError: [Errno 2] No such file or directory\n Use `jupyter kernelspec list` to find out where your kernelspecs are installed. One of them contains an invalid path to a Python interpreter.\n Thanks! I checked it out and reinstalled the ipykernel for python 2 and python3.\n I've just started using Jupyter and I'm having the same problem.\n\nI've tried reinstalling the Jupyter kernel:\n![image](https://cloud.githubusercontent.com/assets/18270809/15981056/81a52246-2f68-11e6-8751-100f3eefc1c5.png)\nNice. No joy though.\n\nAnd I've tried reinstalling the Python2 kernel:\n![image](https://cloud.githubusercontent.com/assets/18270809/15981105/eccbd7b8-2f68-11e6-840a-52062e4a4061.png)\nStill no joy :_(\n\nAm I doing something silly? My code is simply\n![image](https://cloud.githubusercontent.com/assets/18270809/15981223/6a4ad7ba-2f6a-11e6-9cda-8e3337a838fe.png)\n\nAnd here's the path in my Jupyter docs\n![image](https://cloud.githubusercontent.com/assets/18270809/15981181/f6e2754e-2f69-11e6-9708-3c3c4ee108ed.png)\n The paths in the jupyter dashboard are from the directory where you\nlaunched the notebook server. That's probably not root. Run %pwd to see the\nworking directory the _kernel_ is running in, which should give you a clue.\n My current working directory is:\n![image](https://cloud.githubusercontent.com/assets/18270809/15984495/421a2114-2fc5-11e6-83d7-09759ac22aca.png)\n\nBut even writing\n![image](https://cloud.githubusercontent.com/assets/18270809/15984522/0ccd7cc6-2fc6-11e6-894b-892ab12f7e2d.png)\ngives the same error.\n\nAre there any more diagnostics the community can think of?\n Your file is called `channel_1.dat`, you're using `channel1.dat`.\n Quite literally, laughing out loud... I'm such a plonker sometimes.\n\nThank you takluyver,\n Also worked for me on Windows VM running Windows 7 Pro- thanks!\n","o_O\n\ncan you do  in python:\n\n```\nimport os\nos.symlink\nos.__file__\n```\n\nHere is what I get for example.\n\n```\n$ python\nPython 3.4.3 |Anaconda 2.3.0 (x86_64)| (default, Mar  6 2015, 12:07:41)\n[GCC 4.2.1 (Apple Inc. build 5577)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import os\n>>> os.symlink\n<built-in function symlink>\n>>> os.__file__\n'/Users/bussonniermatthias/anaconda3/lib/python3.4/os.py'\n>>>\n\n```\n Here's what it gives me (note windows + python 2.7, if it matters):\n\n```\nc:\\Anaconda>python\nPython 2.7.10 |Anaconda 2.3.0 (64-bit)| (default, May 28 2015, 16:44:52) [MSC v.1500 64 bit (AMD64)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\nAnaconda is brought to you by Continuum Analytics.\nPlease check out: http://continuum.io/thanks and https://binstar.org\n>>> import os\n>>> os.symlink\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\nAttributeError: 'module' object has no attribute 'symlink'\n>>> os.__file__\n'c:\\\\Anaconda\\\\lib\\\\os.pyc'\n>>>\n```\n Grahhhhh `os.symlink` does not exist on 2.7 and windows.... :rage:. \n Well there's your problem... \n Ping @minrk if he does not do it I'll fix that tomorrow. I'm jumping in a plane right now. \n\nYou can also try to  send a PR that replace `os.symlink` on the above line to `shutils.copytree`  if `os.symlink` does not exist.\n Thanks! Will see what I can do, though the usual \"better user than developer\" caveats apply. But that sounds like a simple fix.\n Good thing to do for a first fix ! Looking forward to your PR !\n Think I got it figured out---does that look like a reasonable solution?\n And I also noticed this a bit ago, and set symlink to False on Windows in ipython/ipyparallel#24.\n So I guess we just fixed the same problem two different ways simultaneously?\n Yup! I shouldn't have been trying to use symlinks unconditionally in ipyparallel, and since it's very common for symlinks to be unavailable (Windows py2) or _probably_ unavailable (Windows py3), it makes sense to the install command to ignore the request for symlinks if it won't work.\n Whatever works (though I have a purely sentimental attachment to my fix, just because it's my first Jupyter PR!).\n Both fixes are the right thing to do, even though only one is needed for this particular issue. Welcome to the project!\n Can we close this one ?\n","Thanks! Minor comment on how to check for os.symlink, but this makes sense to me.\n","I believe this was a deliberate change in the [marked](https://github.com/chjj/marked) javascript markdown implementation that we use.\n Surprised me too.  Discussion here: https://github.com/chjj/marked/issues/201\n #276\n @costerwi thanks, closing as duplicate.\n","Hi, \n\nyou can also post this on the jupyter-project google group. \n\nYou can also find more theme here : https://github.com/nsonnad/base16-ipython-notebook and here: http://www.damian.oquanta.info/posts/48-themes-for-your-ipython-notebook.html\n\nAnd look at previous discussions:\nhttps://github.com/ipython/ipython/issues/7931\n\nThanks !\n Awesome, thanks!\n @dunovank `oceans16` looks really nice in the notebook. thanks.\n\n<img width=\"1114\" alt=\"screen shot 2016-06-29 at 1 16 10 am\" src=\"https://cloud.githubusercontent.com/assets/4451957/16441284/2070a2ec-3d97-11e6-935a-1371d77fc546.png\">\n Thanks, glad you like it!\n\nOn Wednesday, June 29, 2016, Hai Nguyen notifications@github.com wrote:\n\n> @dunovank https://github.com/dunovank oceans16 looks really nice in the\n> notebook. thanks.\n> \n> [image: screen shot 2016-06-29 at 1 16 10 am]\n> https://cloud.githubusercontent.com/assets/4451957/16441284/2070a2ec-3d97-11e6-935a-1371d77fc546.png\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/305#issuecomment-229262461,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/ADqqzqkaAE5WyWfKMvr-qhb1Q0mxmd1Zks5qQgbzgaJpZM4FsmgA\n> .\n\n## \n\nSent from my iPhone\n","This is an issue some people do encounter, and there are two levels to it:\n1. the cost of sending the text to the browser\n2. the cost of putting the text on the page and adding it to the document\n\n(1) can be prevented only by adding a prompt at a low level in the kernel (in sys.stdout.write or flush), whereas (2) can be done in js on the client-side. It won't protect the most egregious cases, but it is often the javascript that's the biggest problem, and not the network traffic.\n > (2) can be done in js on the client-side. It won't protect the most egregious cases, but it is often the javascript that's the biggest problem, and not the network traffic.\n\nProbably useful for you: https://github.com/ipython-contrib/IPython-notebook-extensions/tree/master/nbextensions/usability/limit_output\n @williamstein pointed out how he does limitations with SageMathCloud on the server side:  https://github.com/sagemathinc/smc/blob/master/salvus/sage_server.py#L454\n","As long as people are comfortable with this ideology, I'd like to start tackling this in a PR.\n I think it's a good idea. I've wanted the dashboard refactor to happen before doing things like this, but since that's been on the horizon for at least two years now, I don't think it makes any sense to wait for it for anything anymore.\n I think this makes a lot of sense with our existing dashboard.\n","Sorry, missed that in the examples. Fixed by #310.\n Out of curiosity, and to possibly clear up some confusion that I have seen on stackoverflow and such, how would one now specify startup initialization type options for Jupyter? \n\nA specific scenario I am thinking of is with pySpark.\n See the ML discussion: \nhttps://groups.google.com/forum/?utm_medium=email&utm_source=footer#!topic/jupyter/7q02jjksvFU\n\nbut you shouldn't need a profile for that. PySpark can just be a kernel, if you really want it to be. \na kernel is basically just a way of launching a process, so it can be different envs, or different location. \nsome national lab have name kernel depending on which physical machine the process will run for example. \n Hi. I am trying to create a profile for pyspark too. Could you please tell me how to proceed ? Thanks\n There is no notion of profile in jupyter and for the notebook. \n\nIt's roughly like asking to dual boot a computer because you want to use vim **and** emacs, \nand get 2 hard drive just to set your `$EDITOR` differently.\n\nAs stated in the mailing list thread, you can if you like, it would be something like \n\n```\n$ JUPTYER_CONFIG_DIR=~/jupyter_pyspark_foo jupyter notebook\n```\n\nIf should auto create the needed files in `~/jupyter_pyspark_foo`, but it is likely not what you want. \n\nYou most likely just want a separate kernel, or just import pySpark as a library. Still without knowing more of what you want to do it's hard to give you an answer...\n I would like to use pySpark in the ipython notebook. Either by calling it\nas a library or by creating a profile/kernel/ etc.\n\nOn 25 August 2015 at 11:00, Matthias Bussonnier notifications@github.com\nwrote:\n\n> There is no notion of profile in jupyter and for the notebook.\n> \n> It's roughly like asking to dual boot a computer because you want to use\n> vim _and_ emacs,\n> and get 2 hard drive just to set your $EDITOR differently.\n> \n> As stated in the mailing list thread, you can if you like, it would be\n> something like\n> \n> $ JUPTYER_CONFIG_DIR=~/jupyter_pyspark_foo jupyter notebook\n> \n> If should auto create the needed files in ~/jupyter_pyspark_foo, but it\n> is likely not what you want.\n> \n> You most likely just want a separate kernel, or just import pySpark as a\n> library. Still without knowing more of what you want to do it's hard to\n> give you an answer...\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/309#issuecomment-134531793.\n Ok, here is what I just did durring the last 1/2 h, for me on OS X\n- Install apache-spark (`$ brew install apache-spark`)\n- install findspark ( `pip install -e .` after cloning https://github.com/minrk/findspark, and `cd findspark`)\n- install java (from [here](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html))\n- fire a notebook (`jupyter notebook`)\n\nenter the following:\n\n``` python\nimport findspark\nimport os\nfindspark.init()\n\nimport pyspark\nsc = pyspark.SparkContext()\nlines = sc.textFile(os.path.exapnduser('~/dev/ipython/setup.py'))\nlines_nonempty = lines.filter( lambda x: len(x) > 0 )\nlines_nonempty.count()\n```\n\nexecute :\n\n```\n221\n```\n\nYayyyyy ! \n (Note, installing/downloading java took 20 minutes) \n **After running:**\nimport findspark\nimport os\nfindspark.init()\n\nimport pyspark\nsc = pyspark.SparkContext()\n\n**I get this error:**\n\n```\n---------------------------------------------------------------------------\nException                                 Traceback (most recent call last)\n<ipython-input-1-0e2dcc62fef1> in <module>()\n      4 \n      5 import pyspark\n----> 6 sc = pyspark.SparkContext()\n\n/Users/victor/Downloads/spark-1.4.1/python/pyspark/context.pyc in __init__(self, master, appName, sparkHome, pyFiles, environment, batchSize, serializer, conf, gateway, jsc, profiler_cls)\n    108         \"\"\"\n    109         self._callsite = first_spark_call() or CallSite(None, None, None)\n--> 110         SparkContext._ensure_initialized(self, gateway=gateway)\n    111         try:\n    112             self._do_init(master, appName, sparkHome, pyFiles, environment, batchSize, serializer,\n\n/Users/victor/Downloads/spark-1.4.1/python/pyspark/context.pyc in _ensure_initialized(cls, instance, gateway)\n    227         with SparkContext._lock:\n    228             if not SparkContext._gateway:\n--> 229                 SparkContext._gateway = gateway or launch_gateway()\n    230                 SparkContext._jvm = SparkContext._gateway.jvm\n    231 \n\n/Users/victor/Downloads/spark-1.4.1/python/pyspark/java_gateway.pyc in launch_gateway()\n     87                 callback_socket.close()\n     88         if gateway_port is None:\n---> 89             raise Exception(\"Java gateway process exited before sending the driver its port number\")\n     90 \n     91         # In Windows, ensure the Java child processes do not linger after Python has exited.\n\nException: Java gateway process exited before sending the driver its port number\n```\n You should get this error if you get the wrong java (the 60M download instead of the 200+M download) \n I actually got **jdk-8u60-macosx-x64.dmg** which is 238.1 MB. Maybe I should restart the machine \n hum, I did not had to restart IIRC. \n does the following works?\n\n```\n$ java -version\njava version \"1.8.0_60\"\nJava(TM) SE Runtime Environment (build 1.8.0_60-b27)\nJava HotSpot(TM) 64-Bit Server VM (build 25.60-b23, mixed mode)\n```\n\nPython 2.7 or 3 ?\n It works now:\n\n**In [2]:      sc\nOut[2]:      pyspark.context.SparkContext at 0x106296cd0**\n\nThanks a lot for your help. I've spent a loooong time trying to fix this\n :cake: :cocktail:  :tada:  !\n\nHappy Sparking !\n @vherasme What did you do to make it work in the end? Thanks!\n I followed the steps @Carreau recommends above:\n\n.....\n1. Install apache-spark ($ brew install apache-spark)  _In my case I had\n   Spark installed already_\n2. install findspark ( pip install . after cloning\n   https://github.com/minrk/findspark, and cd findspark)\n3. install java (from here\n   http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)\n   _This must be java  1.8.0_60_\n4. fire a notebook (jupyter notebook)\n\nenter the following:\n\nimport findspark\nfindspark.init()\nimport pyspark\nsc = pyspark.SparkContext()\n\nI also had these two in .bash_profile:\n\nexport SPARK_HOME=\"/Users/victor/Downloads/spark-1.4.1\"\nexport PYSPARK_SUBMIT_ARGS=\"--master local[2] pyspark-shell\"\n\nOn 26 August 2015 at 20:16, Aaron Schumacher notifications@github.com\nwrote:\n\n> @vherasme https://github.com/vherasme What did you do to make it work\n> in the end? Thanks!\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/309#issuecomment-135128577.\n I hope this change of policy about profiles is mentioned (more explicitly?) in the docs. I tried to put up a server on an Amazon EC2 image but following the instructions on the ipython docs didn't work because with ipython==4.0 it no longer accepted the --profile option.\n > I hope this change of policy about profiles is mentioned (more explicitly?) in the docs. I tried to put up a server on an Amazon EC2 image but following the instructions on the ipython docs didn't work because with ipython==4.0 it no longer accepted the --profile option.\n\nIPython 4.0 still have profile, you are just mistaking `Notebook` for `IPython`.\n\nIf you want different configuration for the notebook, you need to set the jupyter config dir environement variable, if you want profile for your kernel, you can set it in your kernelspec. \n I tried both `ipython notebook --profile=xxx` and `jupyter notebook\n--profile=xxx` and both have the same error. (While the --help options for\nboth have the same erroneous suggestion that --profile still works)\n\nI think a separate tutorial for setting up jupyter remote server would\nhelp, since I'm sure currently people would just go look at the ipython doc\nand be confused like I was. At least note in the ipython doc that this is\nnow different for jupyter.\nOn Aug 31, 2015 7:33 AM, \"Matthias Bussonnier\" notifications@github.com\nwrote:\n\n> I hope this change of policy about profiles is mentioned (more\n> explicitly?) in the docs. I tried to put up a server on an Amazon EC2 image\n> but following the instructions on the ipython docs didn't work because with\n> ipython==4.0 it no longer accepted the --profile option.\n> \n> IPython 4.0 still have profile, you are just mistaking Notebook for\n> IPython.\n> \n> If you want different configuration for the notebook, you need to set the\n> jupyter config dir environement variable, if you want profile for your\n> kernel, you can set it in your kernelspec.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/309#issuecomment-136359708.\n How did you get help to give you hints about profile ?\n\nAnd again, --profile does not work with the notebook application, only with ipython/ipython kernel. \nIf you want profile for your kernel you need to modify your kernelspec. Use `jupyter kernelspec list --debug` to see where your kernelspec are. \n I did `ipython notebook --help` and `jupyter notebook --help` and both gave the same thing. The examples OP posted are listed at the end of the help output.\n\nRight I get it now that --profile no longer works with the notebook, but I'm saying the doc should be made clearer so that the in the future, people switching from lower versions of ipython shouldn't have to look far to get an answer.\n\nFor example, if I google 'set up remote server jupyter' the first result is http://ipython.org/ipython-doc/1/interactive/public_server.html, and nowhere in there does it say that --profile no longer works for ipython/jupyter 4. Indeed, one of the instructions is\n\n\"You can then start the notebook and access it later by pointing your browser to `https://your.host.com:9999` with `ipython notebook --profile=nbserver`.\"\n\nOther top results are about jupyter hub, which requires python3. I don't think I saw a single mention that the --profile option no longer works for ipython/jupyter 4 among them.\n\nMaybe you guys wrote a doc, but google is just being dumb for the moment. Nevertheless I never find it, and I searched for a long time before finding this issue posted here.\n > I did ipython notebook --help and jupyter notebook --help and both gave the same thing. The examples OP posted are listed at the end of the help output.\n\nO_o  do you have both IPython 4.x and notebook 4.x ?\n\n> Right I get it now that --profile no longer works with the notebook, but I'm saying the doc should be made clearer so that the in the future, people switching from lower versions of ipython shouldn't have to look far to get an answer.\n\nWell it's hard to bias google. For whatever reason people are still looking referencing docs for 1.0 and google put it on top.  We'll  try to find a solution. \n I had ipython 4 initially but that kept giving errors as I said, so I\ninstalled jupyter, but that didn't solve anything.\n\nOn Tue, Sep 1, 2015 at 3:43 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I did ipython notebook --help and jupyter notebook --help and both gave\n> the same thing. The examples OP posted are listed at the end of the help\n> output.\n> \n> O_o do you have both IPython 4.x and notebook 4.x ?\n> \n> Right I get it now that --profile no longer works with the notebook, but\n> I'm saying the doc should be made clearer so that the in the future, people\n> switching from lower versions of ipython shouldn't have to look far to get\n> an answer.\n> \n> Well it's hard to bias google. For whatever reason people are still\n> looking referencing docs for 1.0 and google put it on top. We'll try to\n> find a solution.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/309#issuecomment-136637812.\n Is there a way to avoid typing following code in each notebook:\nimport findspark\nfindspark.init()\nimport pyspark\nsc = pyspark.SparkContext()\n\nand just make sure whenever you launch notebook it already hooked up the spark?\n\nIt isn't too hard but it feels like a jury-rigging which i hate.\n You can add it to a startup file, e.g. `~/.ipython/profile_default/startup/initspark.py`\n I got the same issue, and the steps from @vherasme didn't work.\n\nPython 2.7.10\nSpark 1.4.1\njava version \"1.8.0_65\"\nJava(TM) SE Runtime Environment (build 1.8.0_65-b17)\nJava HotSpot(TM) 64-Bit Server VM (build 25.65-b01, mixed mode)\n\n<img width=\"1081\" alt=\"2015-11-21 12 09 58\" src=\"https://cloud.githubusercontent.com/assets/8994269/11316604/d2a2c500-9048-11e5-9607-435b09057cbc.png\">\n @wlsherica, I had that same issue.  For me, this was being caused by a bad spark configuration.\n\nSpecifically, I had:\n\nexport PYSPARK_SUBMIT_ARGS=\"--master local[2]\"\n\nSo I just removed that.\n @Carreau amazing work. thanks so much.\n\nCarreau commented on 25 Aug 2015\nOk, here is what I just did durring the last 1/2 h, for me on OS X\n\nInstall apache-spark ($ brew install apache-spark)\ninstall findspark ( pip install -e . after cloning https://github.com/minrk/findspark, and cd findspark)\ninstall java (from here)\nfire a notebook (jupyter notebook)\nenter the following:\n\nimport findspark\nimport os\nfindspark.init()\n\nimport pyspark\nsc = pyspark.SparkContext()\nlines = sc.textFile(os.path.exapnduser('~/dev/ipython/setup.py'))\nlines_nonempty = lines.filter( lambda x: len(x) > 0 )\nlines_nonempty.count()\nexecute :\n\n221\nYayyyyy !\n @Carreau thanks your answer\n Thanks @Carreau  for the step-by-step instructions! Stumbled upon this issue when following instructions for IPython 3.x\n\nIn case anyone want more detailed instruction and explanation, I have wrote http://flummox-engineering.blogspot.com/2016/01/how-to-configure-ipython4-for-apache-spark.html\n Using the findspark setup, are you able to use jars which are added via SparkConf `spark.jars`?\n\n```\nfrom pyspark import SparkConf, SparkContext\nfrom pyspark.sql import HiveContext\nconf = SparkConf().set(\"spark.jars\",\"/usr/local/opt/spark-csv_2.10-1.3.0.jar\")\nsc = SparkContext(conf=conf)\nsqlContext = HiveContext(sc)\n```\n\ngets loaded when SparkContext is started:\n\n> 16/02/03 11:03:47 INFO SparkContext: Added JAR /usr/local/opt/spark-csv_2.10-1.3.0.jar at http://1.2.3.4:49318/jars/spark-csv_2.10-1.3.0.jar with timestamp 1454526227905\n\nstill:\n\n```\ndf = sqlContext.read.format('com.databricks.spark.csv')\\\n.options(header='true', delimiter=',', inferschema=True)\\\n.load(csvpath)\n```\n\n> Py4JJavaError: An error occurred while calling o247.load.\n> : java.lang.ClassNotFoundException: Failed to load class for data source: com.databricks.spark.csv.\n>   at org.apache.spark.sql.execution.datasources.ResolvedDataSource$.lookupDataSource(ResolvedDataSource.scala:67)\n>   at org.apache.spark.sql.execution.datasources.ResolvedDataSource$.apply(ResolvedDataSource.scala:87)\n>   at org.apache.spark.sql.DataFrameReader.load(DataFrameReader.scala:114)\n>   at org.apache.spark.sql.DataFrameReader.load(DataFrameReader.scala:104)\n>   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n>   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n>   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n>   at java.lang.reflect.Method.invoke(Method.java:606)\n>   at py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:231)\n>   at py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:379)\n>   at py4j.Gateway.invoke(Gateway.java:259)\n>   at py4j.commands.AbstractCommand.invokeMethod(AbstractCommand.java:133)\n>   at py4j.commands.CallCommand.execute(CallCommand.java:79)\n>   at py4j.GatewayConnection.run(GatewayConnection.java:207)\n>   at java.lang.Thread.run(Thread.java:745)\n> Caused by: java.lang.ClassNotFoundException: com.databricks.spark.csv.DefaultSource\n>   at java.net.URLClassLoader$1.run(URLClassLoader.java:366)\n>   at java.net.URLClassLoader$1.run(URLClassLoader.java:355)\n>   at java.security.AccessController.doPrivileged(Native Method)\n>   at java.net.URLClassLoader.findClass(URLClassLoader.java:354)\n>   at java.lang.ClassLoader.loadClass(ClassLoader.java:425)\n>   at java.lang.ClassLoader.loadClass(ClassLoader.java:358)\n>   at org.apache.spark.sql.execution.datasources.ResolvedDataSource$$anonfun$4$$anonfun$apply$1.apply(ResolvedDataSource.scala:60)\n>   at org.apache.spark.sql.execution.datasources.ResolvedDataSource$$anonfun$4$$anonfun$apply$1.apply(ResolvedDataSource.scala:60)\n>   at scala.util.Try$.apply(Try.scala:161)\n>   at org.apache.spark.sql.execution.datasources.ResolvedDataSource$$anonfun$4.apply(ResolvedDataSource.scala:60)\n>   at org.apache.spark.sql.execution.datasources.ResolvedDataSource$$anonfun$4.apply(ResolvedDataSource.scala:60)\n>   at scala.util.Try.orElse(Try.scala:82)\n>   at org.apache.spark.sql.execution.datasources.ResolvedDataSource$.lookupDataSource(ResolvedDataSource.scal\n [using the shell](http://spark.apache.org/docs/latest/programming-guide.html#using-the-shell) in spark tutorial is also a good solution to the issue.\n","I see the plot when I open that file in the live notebook dev version.\n\nI wonder if some of the nbconvert code assumes that `text/plain` is always present? The Python kernel will always offer a plain text repr, and I think we expect that to always exist, though we may not have written that down.\n Actually, that can't be it, because you can use e.g. `display_png()` in IPython and that displays without a text/plain format.\n I think this is an nbconvert issue. I can reproduce it on master by doing `ipython nbconvert --to html plot_not_visible.ipynb`. There's no error message. \n Aha, I think I see it. `application/pdf` is given a higher priority in the HTML output than SVG or PNG for some reason, so it tries to display that, but there's no block in the template to display pdf data. I think reordering the display priority should fix it.\n See jupyter/jupyter_nbconvert#5\n Ok, that means the nbviewer one is dealt with (damn, I was actually writing the issue in that project but switched here before hitting submit). Thanks!\n\nAlso thanks for confirming that it is visible in the dev notebook and it's therefore not the formatting of the uuencoded data. Back to step one... :-/\n Update: it seems that I misunderstood \"print preview\" and the Jupyter \"File -> Print Preview\" uses nbconvert in the background -> so it seems that this is both fixed by jupyter/jupyter_nbconvert#5.\n\nThanks a lot!\n Yep, our own 'print preview' menu item uses nbconvert to convert to static HTML.\n","I'm confused of what you expect it  to do. `jupyter notebook some_notebook.ipynb` is ment to open `some_notebook.ipynb` in a browser, it would strictly do nothing otherwise... \n apparently i\u2019m the confused one. this makes sense of course!\n No problem. If it ever make sens again, feel free to reopen. \n","so, I should just repeat the pip install --upgrade jupyter? I did that but the Ipython notebook instance showing 3.1.0\n @dartdog to just upgrade IPython, do `pip install --upgrade ipython`. It should give 4.0.\n","This is directly related to #315 and build issues, I've informed the Anaconda folks on their google group of the issue.\n closed by #316, released as 4.0.3\n I did something a bit wrong, I'll cut 4.0.4 shortly with the right fix.\n","Running `npm install` works locally? What about `npm run bower`?\n Tracked down the issue, check_call needs to be run with shell=True on windows.\n\nhttps://github.com/jupyter/notebook/blob/47cced4ab94a46174731e72bd66281de9cd22fc5/setupbase.py#L298\n\nSwitching that line to:\n\n```\n    return check_call(cmd, shell=True, *args, **kwargs)\n```\n\n...results in a working build/setup. I'm not sure what effect it would have on other targets though, I'm not particularly familiar with setuptools.\n I think running with shell=True should be okay on any system.\n #321 should add shell=True. Can you verify that this works for you?\n Hello, I am facing an installation issue too and did not wish to create a new issue for my problem. I have been using ipynb for a long time now before I decided to update and got stuck. \n\n[Here](https://gist.github.com/darshanime/f94d2b8f4dbe1c49dc3e) is my stack. I am running Ubuntu 14.04 and the commands I ran prior to `pip install --pre -e .` one are : \n\n``` python\nsudo apt-get install nodejs-legacy npm python-virtualenv python-dev\npip install --upgrade setuptools pip\ngit clone https://github.com/jupyter/notebook.git\ncd notebook\n```\n Seem like github was unreachable at the time you installed :\n\n```\nbower font-awesome#~4.2.0      ECMDERR Failed to execute \"git ls-remote --tags --heads git://github.com/components/font-awesome.git\", exit code of #128 fatal: \nunable to connect to github.com: github.com[0: 192.30.252.128]: errno=Connection timed out\n\n```\n That's what I thought too initially. But I tried to run this many times and\neach time it failed; even when I could browse and surf fine.\nI'll retry though.\n\nOn Fri, Aug 21, 2015 at 7:31 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Seem like github was unreachable at the time you installed [image: :+1:]\n> \n> ```\n> bower font-awesome#~4.2.0      ECMDERR Failed to execute \"git ls-remote --tags --heads git://github.com/components/font-awesome.git\", exit code of #128 fatal: unable to connect to github.com: github.com[0: 192.30.252.128]: errno=Connection timed out\n> ```\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/315#issuecomment-133434578.\n hum, what if you `bower install font-awesome` manualy ?\n That seems like a good idea. Only, I have to run many times `pip install --pre -e .`, look for what I not get and run a separate command for the same; guess I can live with that as long as I get the notebook in the end !\n You can also drop the `--pre`. And once you get the python part installed we can try to get the JS by hand. which is : \n- npm \n- bower\n- then minify, and it should be ok. \n What can be the problem in your opinion ?\n\nAlso, running separate `git ls-remote --tags --heads git://github.com/components/underscore.git` gives me lines of `reference-tags?` : \n`\ne2072705f6e2acd303430d1525b6278ace4372b2    refs/tags/1.5.1\n38a139ff4aee2c57413aa4611137563474c45ac7    refs/tags/1.5.2\n`\nWhat exactly is this ?\n > On Aug 21, 2015, at 17:04, Darshan Chaudhary notifications@github.com wrote:\n> \n> What can be the problem in your opinion ?\n> \n> Also, running separate git ls-remote --tags --heads git://github.com/components/underscore.git gives me lines of reference-tags? : \n> \n> e2072705f6e2acd303430d1525b6278ace4372b2 refs/tags/1.5.1\n> 38a139ff4aee2c57413aa4611137563474c45ac7 refs/tags/1.5.2\n> \n> What exactly is this ?\n\nI would guess that this tells you that tag 1.5.1 link to commit e2072... and 1.5.2 to ....\ntags are mutable and hash are not, so this does not actually tell you anything except that if you install \n1.5.1 which specific commit you install. \n Working now ! Thanks \n Great, if you figured out what was wrong, feel free to add a comment here !\n It could be that firewall is blocking the git protocol. Replacing `git://...` with `https://...` fixed it for me.\n\nAlso, thank you for the notebook. I can't say I wasn't sulking when the notebook was gifted to people outside the Python community. For me, ipynb was like this special utility only developers loyal to Python got to enjoy !\n > On Aug 21, 2015, at 17:21, Darshan Chaudhary notifications@github.com wrote:\n> \n> It could be that the firewall is blocking the git protocol. Replacing git://... with 'https://...` fixed it for me.\n> \n> have a look at git insteadOf (would give you link but bad connexion, google is your friend)\n> you can tell git yo always use https:// instead of git:// or mirror.something.com http://mirror.something.com/ instead of git.github.com http://git.github.com/ ... etc.\n> it will save you a few headache. \n> Also, thank you for the notebook. I can't deny I wasn't sulking when the notebook was gifted to people outside the Python community. For me, ipynb was like this special utility only developers loyal to Python got to enjoy !\n\nAlway happy to get more non-python people. \nWhat kernel are you using ?\n\nAlways looking for feedback and help from other communities. \n @minrk The #321 change appears to work for me in jupter/notebook:master when I add it, but I couldn't get the fork you had to work - something about nbformat not matching the version required.\n","This doesn't appear to be the case with 4.0. Can you provide an exact snippet of the entire markdown cell that's not working, and what version of `nbconvert` you have (`pip list`)?\n Actually, I did upgrade to 4.0 recently. Unfortunately, I do not remember precisely which cells failed to render properly. It's possible that things improved since I filed the bug report. However, I did find one that still has the same problem. At least in this case, it seems that the minus sign at the beginning of the line triggers list rendering instead of MathJax in print view, while the live notebook gives priority to MathJax:\n\n```\nThis math fails:\n$$ A = B\n- C\n$$\n```\n\nUnfortunately, it looks like my pip is actually screwed up, `pip list` fails with an assertion error. \"About Jupyter\" says it's running server _4.0.2_.\n","Each time I go to run jupyter I end up with a hung jupyter-notebook.exe process for an extended period of time. On the command line the process will return to the command prompt right away, and I can see via process explorer that jupyter-notebook.exe is in fact running, but it doesn't appear to do anything. \n\nIf I run it again from the same command line I will then get the typical informational messages saying that the server is running - I do not know if this is from the first or second process - but it happens shortly after the second is run.\n\nI suspect this is what is causing the crash when exiting via Control-C, as both processes are stopped when that occurs (and python.exe crashes).\n\nIf I had to guess I'd say it has something to do with running the command appearing to execute disconnected from the cmd.exe process that launched it (i.e., it instantly returns to the command line) - that never used to be how ipython worked, it would remain connected and blocking the cmd.exe process (which in this case is \"C:\\Windows\\System32\\cmd.exe\" /k \"C:\\Anaconda3\\Scripts\\anaconda.bat\").\n that seem weird this is a C-level error, and i'm not experienced enough with windows to know why it would do that. Have you try pinging Continuum ?\n I think you're right - I tried standard cpython from python.org and didn't run into the issue, it also didn't drop back to the command line right after it was run. I've notified Continuum.\n","I think that one of the things we are trying to figure out. Using `declare()` and `require()` from require.js it should be possible to get the things on the page only once, though it is not always easy in the of how to allow installation on a per-kernel basis. \n\nIt is one of the area where we would need experience from people that use javascript more than we do for this kind of things.\n You're right, using `require` would be a nice way to do this. Or package's JS code can check for a specific global variable before loading this. This is not such a big deal as is #320\n That's where @jdfreder's potential spec from #116 should come into play, IMO.\n It should be noted, additional work, somewhat related is being done in #268 which allows npm packages and modules to be used in the core notebook code (not yet extended to extensions).\n","It shouldn't be possible for custom.js to be missing. This is a bug introduced by #16.\n Actually, this doesn't appear to be true. I ran master without any custom.js, and it loads fine.\n Well, I ran master and it didn't load, but when I commented out the `'custom/custom'` line in main.js, it worked. Maybe it was cached when you tried?\n I can't seem to make it 404. Did you restart your nbserver? #16 changed the URL for custom from `/static/custom` to `/custom` since it's handled specially. What do you see at `http://localhost:8888/custom/custom.js`?\n Ah, I must have pulled while I had a notebook server running. Sorry about that.\n","You are hitting one of the problem we have for a long time now. \nHow do you do that if server and kernel are on different machines ?\nHow do you deal with that on upgrade ?\nHow do you allow different kernel to expose differents file ?\n\nWe lack manpower to tackle these kind of issues, and actual people that have experience in javascript, and actual use case. We would be happy to discuss the need and constraint.\n > How do you do that if server and kernel are on different machines ?\n\nOh wow, I didn't know that's possible. What about just letting this work for the others who have kernel and server on the same machine and throwing a warning otherwise?\n\n> How do you deal with that on upgrade ?\n\nWhen the package registering the static directory upgrades, it can also serve new files right? Was that the question?\n\n> How do you allow different kernel to expose differents file ?\n\nThat's a good point. I think one could have a message where the kernel sends Jupyter a request to serve a directory / a file and Jupyter returns a URL of the form `/kernel_static/<UUID>` where the static files get served from.\n\n> We lack manpower to tackle these kind of issues, and actual people that have experience in javascript, and actual use case.\n\nWe do have an actual use case (see the IJulia issue referenced above). And I think between @rohitvarkey and I we can figure out how to do this if everyone agrees on a design.\n","This seem to actually break install on travis for whatever reason. \n Of course it does.\n This is working now.\n","hum, the missing `.min.map` files are ok, and are not errors, they are fetched y chrome that assume you want to debug the JS files when you open the dev tools. \n\nAlso the error you pasted seem to be the one from the terminal, not the chrome dev tools.\nIt look like something preventing websocket connexion, but not sur why. \n yes, you are right the error is from the terminal, sorry about that.  there dont seem to be any port conflicts with 8888.  I was getting this terminal error for a while:\n\n```\n[E 13:38:31.501 NotebookApp] Uncaught exception\n    Traceback (most recent call last):\n      File \"/usr/lib64/python2.7/site-packages/tornado/http1connection.py\", line 691, in _server_request_loop\n        ret = yield conn.read_response(request_delegate)\n      File \"/usr/lib64/python2.7/site-packages/tornado/gen.py\", line 807, in run\n        value = future.result()\n      File \"/usr/lib64/python2.7/site-packages/tornado/concurrent.py\", line 209, in result\n        raise_exc_info(self._exc_info)\n      File \"/usr/lib64/python2.7/site-packages/tornado/gen.py\", line 810, in run\n        yielded = self.gen.throw(*sys.exc_info())\n      File \"/usr/lib64/python2.7/site-packages/tornado/http1connection.py\", line 166, in _read_message\n        quiet_exceptions=iostream.StreamClosedError)\n      File \"/usr/lib64/python2.7/site-packages/tornado/gen.py\", line 807, in run\n        value = future.result()\n      File \"/usr/lib64/python2.7/site-packages/tornado/concurrent.py\", line 209, in result\n        raise_exc_info(self._exc_info)\n      File \"<string>\", line 3, in raise_exc_info\n    SSLError: [Errno 8] _ssl.c:504: EOF occurred in violation of protocol\n```\n\nHowever, that went away after I upgraded tornado. However, the websocket failure to connect is not going away.\n Just to update.  I ended up refreshing some libraries on the vm and that seems to have solved the issue.  unclear why it was caused in the first place but now it works again.  Thanks\n","Sorry if this is an obvious question, but how is it that I apply your solution? I've already updated ipython to the most recent version and continue with the problem. Thanks.\n You need to update **notebook** not IPython.\n Bingo! Thank you.\n","We don't have any plans to integrate PAM into the single-user notebook, though you can do it with external code and some custom authentication hooks. We should improve the documentation coverage of custom login logic.\n Hi Minrk, \n\nIs it possible to update the current cookie based authentication to a token based authentication mechanism? This way the problem of cross-domain authentication would be completely solved.\n\ncookie-based authentication is an out-dated authentication method, and this is one of the reasons why token-based auth is preferred in model applications.\n We could add it, sure. Of course we couldn't entirely replace cookie auth with token auth, except on API endpoints.\n Thanks @minrk! So you are saying that you would add token auth along side of cookie auth, and make this configurable? This  would be very useful for single users like us in a lab who has a long-lived server instance and want to connect to it via a third-party client.\n\nby the way I finished my real-time collaborative jupiter client! Right now I am making some demo videos to explain what you can do with it, since the design is very different from coLab and jupyter so it needs some explanation to go with it.\n\nWould you be interested in testing it out?\n Yes, I think we should add token auth to the notebook, and use it on API endpoints (perhaps exclusively). We still need cookie auth to get the pages to the browser, but I don't think we need it on the API endpoints.\n So with that I should be able to `POST` to `/api/kernels/:kernelId/`, `/api/sessions/` , and initiate the web socket connection on `/api/channels/:kernelId` right?\n yes.\n got it, Thanks!\n Approach for this is in #1831 by the way @episodeyang.\n #1831 was merged, I guess this one could be closed, thoughts?","Thanks! cherry-picked and manually merged as part of #363 !\n","Stop working in IPython. \n\nGo get a photon-break.\n\nEnvoy\u00e9 de mon iPhone\n\n> Le 24 ao\u00fbt 2015 \u00e0 20:43, Thomas Kluyver notifications@github.com a \u00e9crit :\n> \n> Using the examples from ipython/ipython#6896\n> \n> Closes ipython/ipython#8599\n> \n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/jupyter/notebook/pull/327\n> \n> Commit Summary\n> \n> Document pre/post save hooks\n> File Changes\n> \n> M docs/source/extending/index.rst (1)\n> A docs/source/extending/savehooks.rst (76)\n> Patch Links:\n> \n> https://github.com/jupyter/notebook/pull/327.patch\n> https://github.com/jupyter/notebook/pull/327.diff\n> \u2014\n> Reply to this email directly or view it on GitHub.\n :)\n\nOn Mon, Aug 24, 2015 at 11:46 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Stop working in IPython.\n> \n> Go get a photon-break.\n> \n> Envoy\u00e9 de mon iPhone\n> \n> > Le 24 ao\u00fbt 2015 \u00e0 20:43, Thomas Kluyver notifications@github.com a\n> > \u00e9crit :\n> > \n> > Using the examples from ipython/ipython#6896\n> > \n> > Closes ipython/ipython#8599\n> > \n> > You can view, comment on, or merge this pull request online at:\n> > \n> > https://github.com/jupyter/notebook/pull/327\n> > \n> > Commit Summary\n> > \n> > Document pre/post save hooks\n> > File Changes\n> > \n> > M docs/source/extending/index.rst (1)\n> > A docs/source/extending/savehooks.rst (76)\n> > Patch Links:\n> > \n> > https://github.com/jupyter/notebook/pull/327.patch\n> > https://github.com/jupyter/notebook/pull/327.diff\n> > \u2014\n> > Reply to this email directly or view it on GitHub.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/327#issuecomment-134335002.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","Hey !\n\nThanks a lot for that ! I still don't quite how the docs works in this area, let me ping someone who might remember !\n\nDoes someone (@jdfreder ? @takluyver ? @ellisonbg ?) remember why we have both `.rst` and `.ipynb` in the directory ?\nAnd if so if/how to regenerate one from the other ?If this is the case shouldn't the generated ones get a warning at the top 'Warning this is generated' ?\n\nThanks !\n Thanks @Carreau! Fyi, this is where I originally read the docs (http://jupyter-notebook.readthedocs.org/en/latest/examples/Notebook/JavaScript%20Notebook%20Extensions.html). If you want, just take my edits and you can update it on your end:) \n\n@takluyver @ellisonbg @jdfreder If you prefer another way for user contributions to docs, then please advise. Maybe just filing an issue? A useful resource is  the Pandas docs where they have a whole section on how users can contribute to the documentation.\n .rst gets generated by the .ipynb, so this will be overwritten on doc build.  \n\n@nymoorland no, this is great, as long as you can make the changes to the ipynb instead.  I believe the command to build the rst docs is then `make ipynb2rst` inside the docs subdir\n\nWe probably shouldn't be checking in the .rst files because it's confusing, but I think we needed to in order for things to work with readthedocs..\n Right!  readthedocs didn't have .ipynb in mind when they designed that \u201cedit on Github\u201d link. It would be a bit too magical if that actually worked. Alrightee, I just installed Sphinx last weekend so time to have some fun.\n If you don't want to re-do the change I can transpose what you did to .ipynb .\nIf we don't remove ipynb2rst should likely prepend a comment at top of RST file. \n Sure. That would be great and would make sense in this case. So, you can go ahead and do that. Cheers.\n Awesome. Thanks. :+1: \n Thanks! cherry-picked and manually merged as part of #363 !\n\nClosing !\n","Pinging @sccolbert and  @dwillmer on this. Chris and David - here is the work Matthias has been doing to start to use the existing action system in our menus.\n Note, this is a rewriting from scratch of https://github.com/ipython/ipython/pull/7285\nthere is no technical challenges here, it's just using one extra level of abstraction instead of direct callback binding, just to make sure all actions we use in menus exists. \n :+1: to this. I like using the actions stuff (except the help-index part). I'm happy to rebase #400 on this one after I test it a bit.\n Rebased, not tested.\n Manually tested, seem to work. \n\nPing @minrk who worked on these file recently\n Rebased. \n I noticed you left a few of the menu things as non-actions.  Would you want to go ahead and convert them all to actions in this PR?  Or in a later PR?\n > Or in a later PR?\n\nLater PR easier to test manually in an exaustive manner at every rebase. \n Rebased once more. @jdfreder ?\n This is looking great, after you address Min's comments - I think this is good to go!\n Done:\n\n``` diff\n-        for(var idx in id_actions_dict){\n+        var keys = Object.keys(id_actions_dict);\n+        for(var i in keys){\n+            var idx = keys[i];\n```\n ``` diff\n        for(var idx in id_actions_dict){\n+            if (!id_actions_dict.hasOwnProperty(idx)){\n+                continue;\n+            }\n             var id_act = id_actions_dict[idx];\n```\n\nBetter ?\n @Carreau yup. I apologize on behalf of Javascript.\n > I apologize on behalf of Javascript.\n\nNo need to. \n\nThanks !\n","has virtualenvwrapper been installed in /tmp/test-req? What do you get from `/tmp/test-req/bin/python -c import virtualenvwrapper`?\n closing for inactivity. \n","the system wide location should be `/usr/local/etc/jupyter/` or `/etc/jupyter/`, I guess if you use them instead of `/usr/etc/jupyter/nbconfig/` it should work... \nYou can probably make a quick test running the notebook with:\n `JUPTYER_CONFIG_DIR=/usr/etc/jupyter jupyter notebook`\n When I ask for `jupyter --paths`, it gives me `/etc/jupyter/`:\n\n```\nroot@snake:~# jupyter --paths\nconfig:\n    /users/j/jorvdnbo/.jupyter\n    /usr/etc/jupyter\n    /usr/local/etc/jupyter\n    /etc/jupyter\ndata:\n    /users/j/jorvdnbo/.local/share/jupyter\n    /usr/local/share/jupyter\n    /usr/share/jupyter\nruntime:\n    /users/j/jorvdnbo/.local/share/jupyter/runtime\nroot@snake:~# \n```\n\nFurther, if I tried to put in all locations, and keep getting the same error.\n\nIt also gives an error ('Failed to load extension: Array [ \"nbextensions/livereveal\" ]', see above). So it seems that it in some way finds the config, but cannot load the extension correctly when this is system config, but does correctly load it when specified in user config.\n ```\n(jupyter)damian-S400CA :: /media/data/devel :: \n$ jupyter --path\nconfig:\n    /home/damian/.jupyter\n    /home/damian/miniconda3/envs/jupyter/etc/jupyter\n    /usr/local/etc/jupyter\n    /etc/jupyter\ndata:\n    /home/damian/.local/share/jupyter\n    /home/damian/miniconda3/envs/jupyter/share/jupyter\n    /usr/local/share/jupyter\n    /usr/share/jupyter\nruntime:\n    /run/user/1000/jupyter\n\n(jupyter)damian-S400CA :: /media/data/devel :: \n$ ls -la /usr/local/share/jupyter/nbextensions/\ntotal 8\ndrwxr-xr-x 2 root root 4096 ago 26 21:16 .\ndrwxr-xr-x 4 root root 4096 ago 26 21:16 ..\nlrwxrwxrwx 1 root root   56 ago 26 21:16 livereveal -> /media/data/devel/jupyter_project/live_reveal/livereveal\n\n(jupyter)damian-S400CA :: /media/data/devel :: \n$ ls -la /usr/local/etc/jupyter/nbconfig/\ntotal 20\ndrwxr-xr-x 2 root root 4096 ago 26 21:38 .\ndrwxr-xr-x 4 root root 4096 ago 26 21:38 ..\n-rw-r--r-- 1 root root   81 ago 26 21:38 edit.json\n-rw-r--r-- 1 root root  138 ago 26 21:38 livereveal.json\n-rw-r--r-- 1 root root   58 ago 26 21:38 notebook.json\n\n(jupyter)damian-S400CA :: /media/data/devel :: \n$ JUPYTER_CONFIG_DIR=/usr/local/etc/jupyter jupyter notebook\n```\n\nand RISE loaded fine for me...\n @jorisvandenbossche what do you get from `env | grep JUPYTER`? and `python -c 'import sys; print(sys.prefix)'`\n `env | grep JUPYTER` returns nothing, and `python -c 'import sys; print(sys.prefix)'` returns `/usr`\n Sorry for the delay. I just re-read this, and the frontend-config (nbconfig, config.js) can only be loaded from the user location right now. It will not look in system-wide locations.\n Ah... I missed that... not it makes sense. Thanks for the info @minrk  \n @minrk aha, that could explain :-) Is this planned to be possible in the future? Or, what is the best way to enable an extension for all your users/students? (without copying nbconfig files) Is there a way to do this programmatically (eg in jupyter_notebook_config.py file? or is that also only loaded from user config?)\n\nFurther, the strange thing is that there is still some error in the web console about this extension, so in some way it does seem to do something with it (\"Failed to load extension: Array [ \"nbextensions/livereveal\" ] Error: Script error for: nbextensions/livereveal\", see initial post)\n @jorisvandenbossche yes, I think we do want to enable something like this, anyway. It's more complicated for the frontend config.\n > Is there a way to do this programmatically (eg in jupyter_notebook_config.py file? or is that also only loaded from user config?)\n\nYou could do something like I suggested before... \n\n```\nJUPYTER_CONFIG_DIR=/usr/etc/jupyter/ jupyter notebook\n```\n\nSo you \"force\" to look into that directory (or the one you choose...) for the nbconfig thing...\n @damianavila that's a good point. One of the reasons it's nicer that Jupyter separates config from runtime info is that it is possible to have read-only config (IPython does not work with a read-only profile). So if you wanted to exert control over the notebook config, you can specify this path and it will all work.\n How can you do this in a jupyterhub context? As you do not run the `jupyter notebook` command explicitly\n And something else, if you do `JUPYTER_CONFIG_DIR=/usr/etc/jupyter/ jupyter notebook`, does jupyter still also looks in the user config directory? As I would like to enable an extension on the jupyterhub for all users, but not prevent that people install and enable extensions in their user directories.\n @jorisvandenbossche you can specify environment variables and extra arguments to the server process via the Spawner. \n\n> does jupyter still also looks in the user config directory? \n\nNo, this would be taking strict control over the notebook server configuration. There is no current way to provide overridable system-wide _defaults_ for frontend-config (custom.js, nbconfig) at this time.\n @minrk is this a \"no action\" now? Close?\n @ellisonbg no, I think there's still a place for us to add support for an additional js file and/or frontend config that's system-wide that doesn't override user config if it exists.\n This should be solved by #879, I think...\n Indeed it is\n","This would be very useful in the classroom.\n +1 This would be great for those us of who use Jupyter for education and teaching.\n What do you think the right place for the templates directory should be. `~/.jupyter/templates`?\n If template there is, then it should not be a directory, but on a per file basis. \nThe question is if template file there is, we probably want to fork the file at opening time, but then where to put the new one ?\n\nI'm ok on API to do that, we can bikeshed on when to trigger it. But I think it's basically a \"make a copy\" dialog that should get enhanced with name and location of new copy. \n To clarify, my proposal was, on the one hand to have the handler for the new template file extension to behave in the following way: create a copy in the current working directory. So it would be a per-file basis as you proposed.\nOn the other hand, the second part of the proposal is to create a means (like a new tab in the current dashboard) to access installed templates, independently of the current working directory.\n The extension could be `name.tpl.ipynb` so that older versions of ipython, and GitHub would still render and open templates it as regular notebooks files.\n Besides it would be a very simple way to get people started on https://try.jupyter.org/ and all.\n Ah, my though was that any file on the system could be template. Not on a specific dir. That the case of debian docs in /usr/share/docs/.\n\nYou actually don't really need an extension you can just assume that any read-only file is a template. \n I think this goes under the much broader area of documentation. Really, any python, R, Julia project might want to ship notebooks that have documentation, examples, etc.\n @SylvainCorlay  We need something along these lines at BNL to distribute templates to visiting users. I implemented [nbexamples](https://github.com/danielballan/nbexamples) this weekend. Unfortunately I only found this GH issue after the fact; but fortunately, it is very much along the lines of your proposal, especially:\n\n> The second part of the proposal is to create a means (like a new tab in the current dashboard) to access installed templates, independently of the current working directory.\n\nTake a look. The code is rough, but I'd be interested in anyone's thoughts on the approach.\n I would love this feature. I want to use it because I use Jupyter notebooks to create experimental reports. The experiment is the same, and at the end of the experiment I have the same format of report. I use the notebook to create plots, charts, etc. specific to that experiment, and then export as an html document. \n\nRight now I have a notebook that serves as a template, which I copy each time. It would be more convenient if I could simply select File -> New -> [Some template I created]. \n\nThe other major use case in my workflow is to be able to create new notebooks with my typical imports already included. Right now I have a script I execute using a %run statement to set up my environment, but then I can't share the notebook without sharing the script. The alternative is to keep other notebooks open so I can paste in the import/setup code every time I start a new notebook. \n\nFor example, whenever I do machine learning stuff, I have the same setup code (import scipy, sklearn, etc.) It would be awesome to make a notebook called MachineLearning.ipynb with all the setup code, save that notebook as a template (i.e. File -> Save -> Save as Template). Then I can select File -> New -> MachineLearning and I get a new notebook in my working directory that is a copy of the template. \n\nIn such a design, I think it makes sense to have a designated location for notebook templates (call it notebook_templates to avoid confusion with Jinja templates, etc.). Any .ipynb in this directory would show up as an option in the New menu. Selecting a template from the New menu would create a copy of that template in the working directory, just as selecting a kernel creates an empty notebook in the working directory. \n\nThe Save menu would also include an option for \"Save as template\", which would copy the notebook (or move it from the working directory) to the notebook_templates directory. Perhaps nbconvert (or other programatic tool) could also have an options for converting an ipynb to a template (i.e. putting a copy in the directory).\n My use case is similar to Gordon. \n\nI want to be able create a notebook (PySpark/Python in my case) from a template with all the import statements. Currently, I have to copy and paste them into new notebooks. \n\n```\nfrom pyspark import SparkContext, SparkConf\nfrom pyspark.sql import SQLContext, HiveContext\nimport py4j\n\nconf = SparkConf().setAppName(\"Example\").setMaster(\"local[1]\")\nsc = SparkContext(conf=conf)\n\ntry:\n     # Try to access HiveConf, it will raise exception if Hive is not added\n    sc._jvm.org.apache.hadoop.hive.conf.HiveConf()\n    sqlContext = HiveContext(sc)\nexcept py4j.protocol.Py4JError:\n    sqlContext = SQLContext(sc)\nexcept TypeError:\n     sqlContext = SQLContext(sc)\n```\n More enthusiasm for this feature on Stack Overflow:\n\nhttps://stackoverflow.com/questions/34002326/default-template-for-ipython-notebook-using-jupyter\n I've been working on a very similar use case for a text analysis tool - the [InPhO Topic Explorer](http://github.com/inpho/topic-explorer). I did the following:\n1. Created a directory called [`ipynb`](https://github.com/inpho/topic-explorer/tree/master/ipynb) in my source which contains a default tutorial notebook without output. It also contains `corpus.tmpl.py` which contains all the setup code, similar to @tsailiming's example.\n2. The [`vsm notebook`](https://github.com/inpho/topic-explorer/blob/master/topicexplorer/notebook.py) command then copies the notebooks from the `ipynb` file to the working directory and populates the `corpus.tmpl.py` with values from a config file and copies it into the folder as `corpus.py`.\n3. In the sample notebooks I use `from corpus import *` to get all my variables in the global namespace.\n\nFor educational use, a quick-start scaffold is a great help - we were able to get a classroom of historians and philosophers using the text analysis tools very quickly.\n These templates would be a really nice feature. I currently use a somewhat hacky approach now (\n These templates would be a really nice feature. The approach I currently use (`cp path/to/my/template.ipynb path/to/my/analysis.ipynb`) works well enough, but being able to choose `New from Template` would be better. Also having a dedicated spot those these (`~/.jupyter/templates`, for example) would be nice.\n I don't think we need a distinct format or file extension for templates: the main thing is to provide ways to open a copy of a notebook that will be saved to a new file.\n\nAs Brian suggested, this concept goes beyond the standard notion of a 'template' because it can also be used to provide examples in documentation, so that when you open an example you get a fresh, editable and savable copy. This will likely use the same underlying mechanism as 'templates' but with a different UI.\n\nFor the template UI, would a practical approach be to save notebooks in a special folder (e.g. `~/.jupyter/templates`)? Then I imagine these would be presented in a separate section of the _New_ menu.\n I was looking for a feature like this all the time. Since I commonly use notebooks in two different ways,  either for data analysis or module debugging, I also need different setups for each task. Thus, some kind of template system would naturally support my workflow. \n > I don't think we need a distinct format or file extension for templates: the main thing is to provide ways to open a copy of a notebook that will be saved to a new file.\n\nAgreed. Besides ipynb is rendered by github and we probably want example notebooks to be rendered!\n\n> For the template UI, would a practical approach be to save notebooks in a special folder (e.g. ~/.jupyter/templates)? Then I imagine these would be presented in a separate section of the New menu.\n\n\ud83d\udc4d on the subdirectory of jupyter. In doing so we would have a possible path under sys-prefix... which would make example notebook installable as part of a wheel.\n\nRegarding the extension, we could still encode something into the filename, like `foobar.tmpl.ipynb` so that package authors can avoid having notebook files always modified in their repository...\n @takluyver how do you think we could distinguish the different paths in case of conflict (user, sys-prefix, global...)\n\nShould they be overloaded in the usual order?\n > Regarding the extension, we could still encode something into the filename, like foobar.tmpl.ipynb so that package authors can avoid having notebook files always modified in their repository...\n\nHmm, maybe, but they also want to be able to update the examples easily. I'd think more along the lines of using something like entrypoints to discover 'example' notebooks from installed packages. That needs a bit more thought, though, because it shouldn't be Python specific.\n\n> :+1: on the subdirectory of jupyter. In doing so we would have a possible path under sys-prefix... which would make example notebook installable as part of a wheel.\n\nI'm thinking of the `~/.jupyter/templates` directory being for notebooks the user thinks of as _templates_, distinct from 'example notebooks'. I imagine these will be relatively few, and I don't want to make it too easy for packages to install them - especially before we've worked out a proper system for example notebooks. E.g. 'templates' could be an additional section of the 'New' menu in the notebook interface - but this only works if there aren't too many.\n\nExample notebooks could be provided using the standard jupyter data files search path - so the precedence goes: explicit overrides, user, environment, systemwide. However, we'd need to think about how to organise them within those directories, and how to present them from the UI.\n > Example notebooks could be provided using the standard jupyter data files search path - so the precedence goes: explicit overrides, user, environment, systemwide. However, we'd need to think about how to organise them within those directories, and how to present them from the UI.\n\nYes that was my question. \n > E.g. 'templates' could be an additional section of the 'New' menu in the notebook interface - but this only works if there aren't too many.\n\nWhen I think of my use-case for notebook templates, I think of them as essentially _kernels that come with some notebook data pre-populated_. This concept lends itself to including templates in the \"New\" menu.\n\nPerhaps some heavy users will have so many kernels and templates that the New menu becomes unwieldy, but my intuition at this point says that this should be the exception, not the rule. \n\nWe also need to consider how to create templates. At first pass, it is probably fine to require the user (or package installer) to copy an .ipynb to the templates folder. Eventually, it may be nice to allow users to \"Save as template\", making it easy for someone to save the boiler-plate notebook code unique to their workflow.\n We at Eniram have a couple dozen people collaborating on notebooks on our JupyterHub based server. We would benefit from this feature as well.\r\n\r\nWe actually have two distinct use cases:\r\n1. every newly created notebook should have one Markdown cell with headings for metadata we use by convention (creator, description, instructions, history) \u2013 this is what I'd call a \"skeleton\"\r\n2. \"template\" report notebooks with pre-defined computations and plots \u2013 intended to be cloned, modified (filling in e.g. time intervals and data sources) and executed by users\r\n\r\nOne hack we've thought about would be to include in \"template\" notebooks an \"open as a copy\" widget with accompanying Python code. There would be a text field for the destination directory and notebook file name, and it would be pre-populated with a sane default (e.g. the user's home notebook directory and the current date as a prefix for the notebook name). Clicking on the submit button would simply run Python code which makes a copy of the notebook in the filesystem and renders an HTML link to the new notebook.\r\n\r\nI imagine the use cases for a template/skeleton notebook are so varied that a one-size-fits-all solution is difficult to come up with. Maybe providing the necessary building blocks, hooks and examples is a better approach? I think @akaihola's use case could be accomplished via a new-from-template approach. The \"skeleton\" example is just a notebook with a markdown cell - they could call that template \"Eniram Notebook\", i.e. New -> Eniram Notebook. While this doesn't force ALL new notebooks to have the markdown header, it does provide a straightforward way to get the desired behavior. Use-case # 2 are just notebook templates with more content. \r\n\r\nIf the \"New\" menu could support nested menus that reflect the file system, then organizing large numbers of templates would not be difficult (addressing one of my thoughts from earlier).\r\n\r\nI do agree with @akaihola that a good start would be providing the building blocks, etc.\r\n\r\n","Never mind, this is a problem with inline svg rendering:\nhttp://stackoverflow.com/questions/16123721/how-to-use-local-defs-in-svg\n TikzPictures.jl does some search and replace tricks of the svg in the `writemime` function [here](https://github.com/sisl/TikzPictures.jl/blob/master/src/TikzPictures.jl) to handle this issue in Jupyter notebooks.\n I ended up doing something similar:\nhttps://github.com/JuliaStats/RCall.jl/blob/74e5af3670ab0d51217bdba3e281d906602802af/src/IJulia.jl#L43-L44\n @simonbyrne, you might need to do something similar for clip, image, linear, etc. in addition to glyph, depending on what kinds of svgs you're generating.\n","Do you have any tracebacks or error messages ?\n The kernel crashes when I start a notebook.  There is not anything informative in jupyter's stdout, stderr.  Is there a log file I should be looking at?\n you can try to start with --debug to get more info on stdout. But I have little knowledge on how docker works. @rgbkrk @jhamrick ?\n Hmm, yeah, I don't know why it would be crashing -- I've never had an issue with that. A few thoughts, though not sure if any of these would actually be related:\n1. You probably don't want to run the container as root (i.e. you should probably define a user in it and then set the working directory to that user's home directory)\n2. You might want to have it listen to `0.0.0.0` rather than `*`\n\nI would have a look at how the `jupyter/singleuser` container is set up, which is used with JupyterHub (so you won't need e.g. the singleuser script, but the stuff it does in terms of creating a user and stuff might be relevant):\n\nhttps://github.com/jupyter/dockerspawner/blob/master/singleuser/Dockerfile\n\nI suppose though that docker container also uses `sh` to ultimately start the server so maybe that's why it works. Now that I think about it a bit more, I'm not actually sure I've tried to run the notebook directly from a container, it's always been from some script that did some additional setup first.\n That's definitely a known issue (https://github.com/ipython/ipython/issues/7062). We're not sure if the issue is in pexpect or elsewhere, but we only ever have this issue in Docker. PID reaping?\n\n/cc @parente \n The fact that calling iPython within bash or a simple bash script solves the problem certainly suggest that PID reaping is the issue.\n\nFor those unfamiliar, this is a pretty nice description of the problem ( https://blog.phusion.nl/2015/01/20/docker-and-the-pid-1-zombie-reaping-problem ).\n\nMaybe using their image ( https://hub.docker.com/r/phusion/baseimage ) or building some limited parts of it ( https://github.com/phusion/baseimage-docker ) would make for a more robust base image.\n I suspect the same. It's one of the reasons the https://github.com/jupyter/docker-stacks images all use supervisord as PID 1.\n\nIs the docker image in this repo meant to be used for working in a jupyter notebook server? Or is it meant to be a development image? I thought the latter, in which case this problem isn't really an issue if it doesn't affect development of the notebook project. But if that's true, something should probably get put in the README stating so and directing people to the stacks images instead.\n \"...[Supervisod] is not meant to be run as a substitute for init as \u201cprocess id 1\u201d\" ( http://supervisord.org )\n > \"...[Supervisod] is not meant to be run as a substitute for init as \u201cprocess id 1\u201d\" ( http://supervisord.org )\n\nIndeed it isn't meant for this use, but in practice with jupyter notebook, it does handle the cases where a kernel spawns a child process (e.g., a Python kernel spawning a py4jvm JVM instance for Spark).\n\n```\n2015-07-31 19:22:11,927 CRIT reaped unknown pid 77)\n2015-08-07 17:48:45,894 INFO stopped: notebook (exit status 0)\n2015-08-07 17:48:45,894 CRIT reaped unknown pid 1078)\n2015-08-07 17:48:45,894 CRIT reaped unknown pid 1136)\n2015-08-07 17:48:45,903 INFO spawned: 'notebook' with pid 1191\n2015-08-07 17:48:46,913 INFO success: notebook entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n2015-08-19 13:11:08,553 CRIT reaped unknown pid 1265)\n2015-08-19 17:30:40,718 CRIT reaped unknown pid 1297)\n```\n\nThat said, I'm all for switching to another more official solution over in docker-stacks and will open an issue over there. Need to consider the fact that those images are based on debian:jessie vs ubuntu and what a switch might mean for size. \n\nI can't speak for what's appropriate over here in jupyter/notebook, though.\n Don't get me wrong. Something doing the reaping is better than nothing doing the reaping. Also, the current solution is better than the best theoretical solution as it does already exist. That being said, having a proper init process would be nice.\n Sure. I documented some alternatives over in the docker-stacks issue I opened.\n I have tried out tini in my base image:\n\n  https://github.com/thewtex/jupyter-notebook-debian\n\nand it works well.  Adding this to the documentation in this pull request:\n\n  https://github.com/jupyter/notebook/pull/485\n\nshould prevent fewer people from tripping over this.\n jupyter/minimal-notebook now uses tini as well (ref https://github.com/jupyter/docker-stacks/pull/38 )\n closed by #530\n","Hi @limodou \n\nYou can either set a list in your `~/.jupyter/jupyter_notebook_config.py`, or you can pass the list by quoting it in the shell. The following should work :\n\n```\njupyter notebook --NotebookApp.server_extensions=\"['some_module']\"\n```\n\nI'll try to find the relevant part of the docs. \n Thanks a lot, the second way seems work, but I write some print statement in it, but I can't see the output, so I don't know if the extension is called. The extension seems like:\n\n```\ndef load_ipython_extension(ipython):\n    print '************'\n```\n You might want to use `logging` to print to console.\n\nSee [here](https://github.com/jupyter/scipy-advanced-tutorial/blob/master/Part1/extensions/server_ext_full.py) that also have in parent folder some instruction on how to set up. \n I tried, but it seems no work, my test code just like:\n\n```\ndef load_ipython_extension(ipython):\n    import logging\n    logging.basicConfig(level=logging.DEBUG)\n    logging.info('############')\n```\n\nBut I can't see the output which I expected. I don't know what I'm wrong.\n I found the answer, the function should be `load_jupyter_server_extension` but not `load_ipython_extension`\n","@gibiansky, your kernel.js seem to work for me, and you do not seem to access `Cell.cm_config` directly, so I don't see the warning. \n\nWhat you seem to do in `kernel.js` with cm_config seem to be unnecessary. IIRC closebracket is one by default, and you can set the codemirror mode in your kernel.json with the `\"codemirror_mode\":\"ihaskell\"` key. \n @Carreau Let me know if you need help on this. Happy to take a rough file or notes from you and put together a `.rst` file\n Think it can go with the [other doc update](https://github.com/Carreau/jupyter_notebook/commit/2b79f882a837fcd0e95130166ad0fc10127aa72a) about indent units which fix another issue I don't remember the number. I'm happy for you to take over, I'm planning my traveling for next week and the week after so my bandwidth is close to 0. \n","Though anyone can take over for an easy bug fix. \n","The scripts should be done by setup.py on [theses lines](https://github.com/jupyter/notebook/blob/656628cbe6ae9996b6fc30028322b85bcbb76137/setup.py#L182-L183) but maybe it make sens to ship the scripts in the sdist. \nI'm not sure. \n The scripts are not getting installed at all for me under 4.0.4.\n I've also run into this, both here and with qtconsole.\n\nEdit: acutally, even though qtconsole has a similar setup.py, the scripts directory does show up in that PyPI package, ignore that\n I can confirm this bug as well.\nWithout the `scripts` directory the bin scripts are not generated. In fact:\n\n```\n% jupyter notebook            \njupyter: 'notebook' is not a Jupyter command\n```\n\nThe GitHub version is not affetcted by this bug. Only the PyPI tarball.\nThanks in advance.\n @minrk could this have been fixed by one of your recent changes in setup.py ?\n Weeeird.... When I run sdist it includes them. I don't think this is fixed by a change in setup.py, but maybe something went wrong when building the last sdist. We have a bugfix release that we should be pushing out this week, I'll make sure it gets the scripts.\n\nInstalling with `pip` shouldn't need the scripts, since they aren't used when setuptools is involved.\n Released 4.0.5 and verified that scripts are in the sdist.\n From the PyPI upload [here](https://pypi.python.org/packages/source/n/notebook/notebook-4.0.5.tar.gz#md5=8d13252a5afaf07380d21cb408040d22) the scripts aren't in the package.\n WTF, I tested and verified that it was working, \n Ah, okay. I see that setuptools ruins upload. Fixing...\n @flacjacket sorry about that, and thanks for catching it again. Fixed sdists for 4.0.5 are now on PyPI.\n Great, thanks for the quick fix\n\nOn Tue, Sep 22, 2015, 13:15 Min RK notifications@github.com wrote:\n\n> @flacjacket https://github.com/flacjacket sorry about that, and thanks\n> for catching it again. Fixed sdists for 4.0.5 are now on PyPI.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/339#issuecomment-142369542.\n","Async rabbit for you!  :rabbit: \n This is ready for review/merge\n @minrk the last commit greatly simplifies the deprecation handler.\n I think I can still make it one handler... One second.\n @minrk I moved the handler class def out of the closure.  The problem causing the require js timeout was the import paths in /ipython_widgets/static/notebook/js/extension.js not matching the path(s) written by the deprecation warning.  I'm not satisfied with the current state of things, which requires a `/` prefix and `.js` suffix on the require import.  This is because using `nbextensions/...` gets interpreted as `/notebooks/CWD/nbextensions/...` - which doesn't make sense.  It's almost as if the page.html require config is just being ignored in this case.  I'm looking some more into this...\n\nTL;DR This warning is now working, but I want to tweak somethings before we think about merging.\n /me sighs\n\nI must have been tired last night - didn't notice the `.js` being appended to the path, which is why the `/` was required.  Everything is fixed now - ready for review or merge.\n I squashed the last 8 commits, which all related to the JS deprecation warning, making this PR more lean.\n @jdfreder sorry for the struggle. This is looking good, now.\n @jdfreder almost there. Can you remove `widget.less` from `ipython.less` so that building css works?\n Yes, that brings up a good point - after the new repository, and your history cleaning, I'll need to do something about the CSS...\n I suspect we'll want to add [require-css](https://github.com/guybedford/require-css) or similar.\n > Can you remove widget.less from ipython.less so that building css \n\n:heavy_check_mark: \n @jdfreder thanks. I've started the actual split to create the widgets repo, but I have somewhere I need to be this evening, so it probably won't finish before tomorrow.\n No rush, thanks for doing that! : )\n","+1 better fix than mine. \n Thanks Safia!\n\nOn Wed, Aug 26, 2015 at 7:28 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> +1 better fix than mine.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/340#issuecomment-135040464.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @Carreau \u2014 is this good to merge? It looks like there are some conflicts now...\n The conflicts are almost definitely related to us moving packaging around. If you're comfortable with a rebase, that's the best approach. I'd probably hold off for a little bit until we know for sure where to target this (we've changed the location of the JS in #268 which is why there's a conflict).\n Mmmm. Yes. I see. I'll keep my eye posted on that PR until it is resolved.\n I think this can be merged now that the revert has been executed.\n\ncc/ @Carreau @rgbkrk \n This looks good and you added a test. Not much else I could ask for. :+1: \n Thanks !\n","Ah drat! sorry. I started working on this and #342 but forgot about them. I'll work on them today and get PRs to you by 5pm PT.\n @Carreau \u2014 can you set me as assigned on both?\n I need some help with this as it is driving me a little insane. So, I add the following line under the `get_default_command_shortcuts` function on the `KeyboardManager` prototype. \n\n`'shift-f': 'ipython.search-and-replace-dialog'`\n\nBut when I start up a test notebook to try it out, the `ShortcutManager` throughs an error because the action hasn't bee loaded yet. This error, `Uncaught Error: does not know how to deal with`, corresponds with [this line of code](https://github.com/jupyter/notebook/blob/336b3b7db6c9f9f0b2cfa07d4a26907ac3146838/notebook/static/base/js/keyboard.js#L365). I assume the error occurs because the `KeyboardManager` is created before `searchandreplace.load` can be called, causing the error.\n\nThe only solution that I could think of was changing the `load` function so that it acts directly on an `ActionManager` object as opposed to a `KeyboardManager` so that the process would look like this.\n1. `ActionManager` object is created.\n2. `searchandreplace.load` is called on `ActionManager` from 1.\n3. `KeyboardManager` object is created.\n\nDoes that make sense? Let me know if I am making this too complicated.\n Or actually, I think this won't be an issue once #329 is merged.\n @captainsafia #329 has been merged, if you want to look at it again.\n The other solution is to register the shortcut at the same time than [the action](https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/js/searchandreplace.js#L381).\n","cc @parleur, @captainsafia, I think that @Achifaifa also might be looking for some easy fixes/features. \n( I try to tag easy fixes with sprint-friendly) \n I am +1 on that.\n\nOn Wed, Aug 26, 2015 at 8:07 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> cc @parleur https://github.com/parleur, @captainsafia\n> https://github.com/captainsafia, I think that @Achifaifa\n> https://github.com/Achifaifa also might be looking for some easy\n> fixes/features.\n> ( I try to tag easy fixes with sprint-friendly)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/343#issuecomment-135054175.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Sounds good. Feel free to cc me on any issues I should look into.\n\n@parleur, here is a Github search query you can use to find all sprint-friendly issues across the Jupyter ecosystem.\n\n`is:open is:issue is:sprint-friendly user:ipython user:jupyer user:phosphorjs user:nteract`\n Thanks for the ping :)\n\nI asusme this is a GUI issue? This looks like a very interesting thing to work on, but my design skills are next to null. \n\nMaybe I can find an open source icon that fits (Not sure if it's a good idea?), but I'd like to know where the current ones come from so I can find something similar or from the same place. \n There is no design skill needed.\nYou just have to pick an icon from\nhttps://fortawesome.github.io/Font-Awesome/icons/\n\nI think we could use\nhttp://fortawesome.github.io/Font-Awesome/icon/keyboard-o/ for Command\npalette, and use magnifying glass for search and replace.\n\nOn Wed, Aug 26, 2015 at 11:04 PM, Yuri Numerov notifications@github.com\nwrote:\n\n> Thanks for the ping :)\n> \n> I asusme this is a GUI issue? This looks like a very interesting thing to\n> work on, but my design skills are next to null.\n> \n> Maybe I can find an open source icon that fits (Not sure if it's a good\n> idea?), but I'd like to know where the current ones come from so I can find\n> something similar or from the same place.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/343#issuecomment-135170057.\n Oh, cool. I'll work on it.\n closed by #358\n","if you have jupyter-notebook, you should have IPython 4.0. \n\nhow did you install ?\n I had IPython 4.0 but I had to downgrade it because some of the Julia's libraries were not working. ipython notebook however opens up the Jupyter Notebook perfectly fine\n Well but if you have 3.2.x , `ipython notebook` will not open the same application than `jupyter notebook`.\n\nI'm not sure what in IPython can prevent julia from working...\n No in the ipython notebook Interact,jl works perfect but in jupyter notebook (Ipython 4.0.0) it doesn't.\n Ah yes, the require thing. Then stick with IPython notebook until Interact is fixed, there is not real new feature yet anyway. \n shucks. Thanks. @Carreau \n Sorry about that. Hope to get more people involved in notebook 5.x to have earlier fixes and less frustration for users like you !\n Commenting here rather than making a new issue, as it's related..\n\nI just installed jupyter in a python3 virtualenv with --use-system-sitepackages. The system has ipython 3.0 for python 3, but the jupyter install didn't think to install ipython 4.x, so when I ran `jupyter notebook` I got the above error.\n\nSeems to me something is wrong - ipython 4.x should have been a dependency and thus installed?\n Yes, [it should](https://github.com/ipython/ipykernel/blob/256cd3f6ac9fe35d6b438b5c497581121ee1b80f/setup.py#L83). Did ipykernel get installed?\n I believe so. Here's some snippets from the `pip install jupyter` output:\n\nInstalling collected packages: ptyprocess, backports-abc, MarkupSafe, jsonschema, decorator, pyzmq, mistune, pygments, ipython-genutils, jupyter-core, terminado, tornado, jinja2, \nnbformat, traitlets, jupyter-client, **ipykernel**, qtconsole, nbconvert, notebook, ipywidgets, jupyter-console, jupyter\n\n...\n\nSuccessfully installed MarkupSafe-0.23 backports-abc-0.4 decorator-4.0.6 **ipykernel-4.2.2** ipython-genutils-0.1.0 ipywidgets-4.1.1 jinja2-2.8 jsonschema-2.5.1 jupyter-1.0.0 jupyter-\nclient-4.1.1 jupyter-console-4.0.3 jupyter-core-4.0.6 mistune-0.7.1 nbconvert-4.1.0 nbformat-4.0.1 notebook-4.0.6 ptyprocess-0.5 pygments-2.0.2 pyzmq-15.1.0 qtconsole-4.1.1 termin\nado-0.6 tornado-4.3 traitlets-4.0.0\n\nNote that that's actually `pip3` as it's a python3 virtualenv.\n Looks to me like setuptools is getting confused? Both traitlets and jupyter-client (the other two dependencies alongside ipython>=4.0.0) are installed. Ipython 4.0 is not installed elsewhere on the system as far as I'm aware. Odd...\n ~~Not sure if this is relevant: I upgraded ipython in the virtalenv to fix the problem. When I run jupyter, however, my default python kernel is python2!? I find that surprising when the default python is python3..~~\n\nLooks like the browser tab had cached the kernel list - only python3 kernels are available, as expected.\n What version of pip do you have in your virtualenv?\n Yes, it was 6.0.8. Current is 7.1.2\nPerhaps the culprit.. \nIf it still seems odd, I can repeat the process, updating pip first, to see if it still happens.\n","If you `pip install -e .` (no need for the `--pre`), you can just restart the server, and it should work. No need to reinstall. If you touch the js or css, you might need to rebuild it.\n\nOn master and developpement install you can add the `--NotebookApp.ignore_minified_js=True` flag that avoid to rebuild some JS. \n\nWhere did you saw the `--pre` thing ?\n Thank you.\nI saw the `--pre` thing at \nhttps://github.com/jupyter/notebook/blob/master/README.md\n Ok, thanks ! Happy patching, looking forward to your pull requests. I'll update the readme \n","Ctrl-enter run in place and does not select next cell. Does that help ?\n It helps with that particular use case, but even then, whenever the next cell is huge, scrolling to the _bottom_ of it doesn't seem like the correct behavior for shift-enter. I still think that after shift-enter, for large cells, the top of the next cell (not the bottom, should be visible). \n\nIf the idea is to minimize the amount of scrolling one has to do (so that executing puts you where you would expect) maybe control-enter should make sure the output is visible? If the current cell is large, and I'm editing some settings at the top of it, then it similarly breaks the flow of the modify/run/check output cycle if I have to scroll to see the output plot. \n\nThe fact that with the current behavior there are cases where, no matter which execution method you use, you can't see the output without manually scrolling suggests to me that the alternative that I proposed would still improve user experience.\n\nI realize this is work so I can jump on it myself, but I'd like feedback on whether you guys agree that this would be a positive change first.\n I'm getting similar behavior. I've created a screen capture of it [here](http://dsh.re/18c22). For each interaction in the screen capture, I am using shift-enter. You can see that when I am in a \"long\" cell (i.e. one in which the output extends past the bottom of the screen), the browser view does not advance to the currently-selected cell. This makes using the notebook rather disorienting, making it difficult to move through a notebook, as it forces me to use the up-down arrow to advance the browser to the appropriate view. This isn't the intended behavior, is it?\n From what I see most of the scrolling behavior is the native one form the browser, and there is not much we can do against it. We'll try to find ways to improve though. \n\nthanks. \n use Crtl+enter I have the exact opposite problem. I want to go through the cells of a notebook (`Shift + Enter`) and jupyter always goes to the one beyond view. Only after I run that one too it shifts up the new one. Ideally, I'd like it to scroll such that the top of the cell is at the top of the page","does https://github.com/jupyter/notebook/pull/324 fix it ?\n Assuming closed by #324 as now we ship `newcommand.js`\n It looks like this post implies that `\\newcommand` doesn't work anymore. I think the documentation here needs to be updated:\nhttp://jupyter-notebook.readthedocs.org/en/latest/notebook.html#markdown-cells\n","Please update to 3.1.\n I should have checked first, sorry =)\n","No, not yet. We are thinking on how we could do it, but that's far from easy to do. \n Just using the link to the file in the file-browser may work, e.g. `http://localhost:8888/edit/some-file.txt`.  Although, this will not work on all setups, but should be ok for local notebooks.\n @mauro3 is it possible to pass the language type to open the file with using the `http://localhost:888/edit/somefile` method?","1) No for security reason, the notebook is chrooted on purpose where it is launched and will issue 404 on any hidden directory. \n\n2) Yes, but someone have to implement it. A dashboard overhaul in general would be nice. \n Hi Carreau,\n\nThanks for the reply. I can understand that. (1) would be much less cumbersome if (2) were implemented anyway. I don't know if I have the skills (or time) to help overhaul the dashboard. But if someone decides to push that, I'd be happy to help in any way I can.\n > Thanks for the reply. I can understand that. (1) would be much less cumbersome if (2) were implemented anyway. I don't know if I have the skills (or time) to help overhaul the dashboard. But if someone decides to push that, I'd be happy to help in any way I can.\n\nSure no problem, some IBM dev did a demo yesterday of search/indexing of notebook [on video](https://youtu.be/SJiezXPhVv8).\n\nWe are looking in bringing that into the core. \n\nThanks for your feedback !\n Would it be (or is it already?) possible to show the current path in the notebook dashboard? I tend to use multiple servers started from different directories, which then look all alike in the browser windows. It would be easier to distinguish the different notebook dashboards if their root directory was mentioned somewhere. I could open a separate feature request if it doesn't fit here.\n > Would it be (or is it already?) possible to show the current path in the notebook dashboard?\n\nThat's what the discussion in https://github.com/jupyter/notebook/issues/422 is for. But there are some security/implementation details to be discussed. \n","Already fixed by https://github.com/jupyter/notebook/pull/323 You though appear to have a blend of IPython 3.x and 4.0. how did yo install ?\n Arch Linux standard packages:\n\n```\n$ pacman -Q jupyter ipython\njupyter 4.0.4-2\nipython 4.0.0-2\n```\n Does the rest of the notebook works ?\nBecause mathjax should be bundled with all the other js libraries, so there is no reason of it being unavailable and not others.\n The rest works.  Maybe some packaging issues?  I'll let you check https://www.archlinux.org/packages/community/any/jupyter/ and https://projects.archlinux.org/svntogit/community.git/tree/trunk/PKGBUILD?h=packages/jupyter (which is used to build the package).\n Yep, mathjax seem optional:\n\nhttps://projects.archlinux.org/svntogit/community.git/tree/trunk/PKGBUILD?h=packages/jupyter#n97\n\nhttps://www.archlinux.org/packages/community/any/jupyter/ `mathjax (optional)`\n\nYou can propose a patch to arch, that is basically the opposite of #323 but give information on how to install it the arch way (with Yum, pacman, or I don't remember).\n I think this should be fixed on the distro's side (perhaps with a clear notice that if they strip out mathjax then mathjax should be installed by the package manager as a dep).  See https://bugs.archlinux.org/task/45999\n They already do what suggested in bugs, they symlink, but the deps  is just marked as optional. \nit should either be made non optional, or fix/reintroduce the warning on load but with the correct instructions. \n\nIt will also depends on #355 that I just open to see if we make things easier for distrib to unbundle matjax or not.\n That's why I am asking the packagers to make mathjax a required dep.  Sounds just simpler.  My parenthetical point was that the jupyter team may want to emphasize this to downstream packagers.\n Arch packager here.  I don't exactly see what the problem is.  Mathjax was always optional in the past.  Notebook 4.0.0 continues to work fine without Mathjax.\n\nUsing a non-official way of installing packages (`mathjax.install_mathjax()`) is not expected to work.  If you are using a linux distro you are expected to go through the package manager (`pacman -S mathjax`).  When you install Jupyter, mathjax comes up as a suggestion.\n\nIf you'd like I can patch the nag message for the Arch package.  Though it would be nice if Jupyter continued to use the old behavior where Mathjax was silently disabled if it is not detected.\n @keenerd thanks for the packaging perspective. From Jupyter, I think it makes sense to start calling MathJax a strict dependency of the jupyter-notebook package from 4.0. For the packages we build, that is the case - it is impossible to get the notebook without mathjax now, and getting it from distros should result in the same thing.\n But it appears that some features are not available.  At least on MacPorts, and if I understand correctly the answer from the maintainer there, the problem are probably coming from notebook itself.\n\nEDIT: Ah, ok, I've just found #324.\n\nSee this ticket: https://trac.macports.org/ticket/48750.  In short, I don't have `\\newcommand` support in MathJax since 4.0.  My browser claims that the following files are missing:\n\n```\n[Error] Failed to load resource: the server responded with a status of 404 (Not Found) (Latin1Supplement.js, line 0)\nhttp://localhost:8888/static/components/MathJax/jax/element/mml/optable/Latin1Supplement.js?rev=2.5.3\n[Error] Failed to load resource: the server responded with a status of 404 (Not Found) (GeneralPunctuation.js, line 0)\nhttp://localhost:8888/static/components/MathJax/jax/element/mml/optable/GeneralPunctuation.js?rev=2.5.3\n[Error] Failed to load resource: the server responded with a status of 404 (Not Found) (CombDiactForSymbols.js, line 0)\nhttp://localhost:8888/static/components/MathJax/jax/element/mml/optable/CombDiactForSymbols.js?rev=2.5.3\n[Error] Failed to load resource: the server responded with a status of 404 (Not Found) (backbone-min.map, line 0)\nhttp://localhost:8888/static/components/backbone/backbone-min.map\n[Error] Failed to load resource: the server responded with a status of 404 (Not Found) (jquery.min.map, line 0)\nhttp://localhost:8888/static/notebook/js/jquery.min.map\n```\n @akimd I think that's us (me) doing a bad job at slimming down the mathjax installation, removing some files that we shouldn't.\n Good to know that's it's scheduled to be fixed in the next releases :)  But do you happen to know when that would be?  I'm seriously hindered by this issue :(\n\nAlso, did you notice some of the files above:\n\n```\n[Error] Failed to load resource: the server responded with a status of 404 (Not Found) (backbone-min.map, line 0)\nhttp://localhost:8888/static/components/backbone/backbone-min.map\n[Error] Failed to load resource: the server responded with a status of 404 (Not Found) (jquery.min.map, line 0)\nhttp://localhost:8888/static/notebook/js/jquery.min.map\n```\n\nI don't know what it means concretely (i.e., I have not seen what would not be working because of this).  Indeed, when I look at the macport package, I have:\n\n```\n$ port contents py34-notebook | grep backbone\n  /opt/local/Library/Frameworks/Python.framework/Versions/3.4/lib/python3.4/site-packages/notebook/static/components/backbone/backbone-min.js\n$ port contents py34-notebook | grep js/jquery\n$\n```\n > But do you happen to know when that would be?\n\nSoon, but we have no schedule.\n\nThe .map files are not at all relevant. They only provide extra debug information, and are only loaded by the debug window. They are not loaded during normal use.\n Ah.  But then, wouldn't it be useful to ship these files too?  In my project, we have widgets, and I have seen people having to debug JS quite a few times.  Will that make things harder for them next time they have to fix a bug?\n\nI don't do JS myself, sorry if I'm not making any sense.\n @akimd they can be useful if you are fixing bugs in jquery itself, not your own code.\n","Ping @jdfreder @rgbkrk @ellisonbg. \n\nAlso ******_HUGE -1 on 4.1**_***\\* this will break how debian and other packager build the notebook. \n\nWe cannot just break the way all the things work in a 1 month later 4.1 release that potentially introduce incompatibility. \n\nPing @fperez \n Because this get's into fundamental questions of how we are going to do the JS refactoring, I have brought it up with the Steering Council. We welcome further discussion here in the meantime.\n Another option is for us to move straight to a 5.0 release with these changes and continue to bump the major versions as we release refactored JS code.\n\nBut I think the fundamental question is whether we consider the JS API to be public or not. Once we decide that, we can just follow the usual semver version bumping process.\n Ok. Let me put it another way.\n\n5.0 or not we need a 4.1 that does not break API with bug and security fixes. \nThere is no notion of following semver or not. NPM enforce it, there is no way around for example. \n\nThe question is: do we consider that \"not API breaking\", then it's ok in 4.1 or is it API breaking. Then it's not.\n\nIf it's not, either we revert, or we fork 4.x from before this merge. \n\nEnvoy\u00e9 de mon iPhone\n\n> Le 27 ao\u00fbt 2015 \u00e0 17:08, \"Brian E. Granger\" notifications@github.com a \u00e9crit :\n> \n> Another option is for us to move straight to a 5.0 release with these changes and continue to bump the major versions as we release refactored JS code.\n> \n> But I think the fundamental question is whether we consider the JS API to be public or not. Once we decide that, we can just follow the usual semver version bumping process.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Well put!\n\nOn Thu, Aug 27, 2015 at 9:02 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Ok. Let me put it another way.\n> \n> 5.0 or not we need a 4.1 that does not break API with bug and security\n> fixes.\n> There is no notion of following semver or not. NPM enforce it, there is no\n> way around for example.\n> \n> The question is: do we consider that \"not API breaking\", then it's ok in\n> 4.1 or is it API breaking. Then it's not.\n> \n> If it's not, either we revert, or we fork 4.x from before this merge.\n> \n> Envoy\u00e9 de mon iPhone\n> \n> > Le 27 ao\u00fbt 2015 \u00e0 17:08, \"Brian E. Granger\" notifications@github.com\n> > a \u00e9crit :\n> > \n> > Another option is for us to move straight to a 5.0 release with these\n> > changes and continue to bump the major versions as we release refactored JS\n> > code.\n> > \n> > But I think the fundamental question is whether we consider the JS API\n> > to be public or not. Once we decide that, we can just follow the usual\n> > semver version bumping process.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/353#issuecomment-135478642.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n The intention was for it to be backwards compatible - if it wasn't I would have removed require.js.  You should still be able to require.js things, which for the most part should be the same.  \n\nSorry for the command palette and searchandreplace breakage, they don't have tests and I wasn't able to test every feature of the notebook (there are too many).  I think it would be better to leave the code in place, and fix the things that are broken.  Also, package building shouldn't differ, if it does then that too should be fixed.\n I know the intension was/is to be backward compatible, I don't blame you.\nThe command palette if fine, I know it is not (yet) tested and it's fine\nthat it is broken.\nI'll fix it.\n\nI'm just extremely concern that we land a huge change only a few hours\n(minutes?)\nafter it finally works, and you almost throw away all consideration of how\nother could be affected by this change on a non JS api, like what is\npackaged ? Do people actually reuse our files and are suddently\ncompletly broke. How much work is it to update downstream from 4.x to 4.1.\n\nHow would for example IBM update that ? They probably go through a security\ncheck on their team, which lets say takes 4weeks. If the 4.0 to 4.1 patch\nis a few hundreds line then the security team can probably  check that 4.1\nis ok in a day or two.\n\nWith this they basically have to audit browserify too, because these tool\ncan generate vulnerability in code\njust by minification/optimisation.\n\nWhen you do a 4.0 to a 4.1 you have contract that are other than pure API,\nyou wouldn't change the language from python to perl, you would'nt change\nthe required compiler from GCC to LLVM,\nyou wouldn't drop support for IE8.\n\nRewriting all the module from AMD to common js is such a breakage IMHO. It\nmight work,\nit might not, but it will piss people off, and people that might not\ncomplain because they are\nusing that under NDA and will just think F&^% $#f and stop using the\nproject.\n\nAs a developper I am happy, and I would have merged and iterate on that\nearlier.\nMy community hat is just unhappy on the condition this was merged in.\n\nIt might just be yet another symptom of the lack of cmmunication,\nand sorry if it fell on one of your PRs, but someone have to speak up.\n\nOn Thu, Aug 27, 2015 at 7:13 PM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> The intention was for it to be backwards compatible - if it wasn't I would\n> have removed require.js. You should still be able to require.js things,\n> which for the most part should be the same.\n> \n> Sorry for the command palette and searchandreplace breakage, they don't\n> have tests and I wasn't able to test every feature of the notebook (there\n> are too many). I think it would be better to leave the code in place, and\n> fix the things that are broken. Also, package building shouldn't differ, if\n> it does then that too should be fixed.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/353#issuecomment-135511089.\n I give up, \n\nthe renaming of files and change in the source tree mean that packaging script like the one in arch, need to get extra logcis, and broke one more time the history of file in github that make it painful to see the last modification. \n\nDo whatever I don't care. \n PLEASE @Carreau reopen this one... I think you raised valid points, let's keep discussing this and revert if necessary... I know you care about this... Thanks!\n I'll reopen My PRs once I'm out of EuroSciPy, If I keep that open I'm going to get angry spend my time responding and not listen to talks. I'll reengage in the conversations/PRs on Monday. \n From talking with Jon, my impression is that this PR can have some fixes\napplied that truly makes it API compatible, even for packagers. I am fine\nif we want revert as part of the process to reaching that goal. But from\nwhat Matthias is saying it sound like API breakage can't be avoided? I\napologize as I don't know any of the technical details.\n\nDo we think this refactor can be done without _any_ API breakage?\n\nOn Fri, Aug 28, 2015 at 1:54 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I know the intension was/is to be backward compatible, I don't blame you.\n> The command palette if fine, I know it is not (yet) tested and it's fine\n> that it is broken.\n> I'll fix it.\n> \n> I'm just extremely concern that we land a huge change only a few hours\n> (minutes?)\n> after it finally works, and you almost throw away all consideration of how\n> other could be affected by this change on a non JS api, like what is\n> packaged ? Do people actually reuse our files and are suddently\n> completly broke. How much work is it to update downstream from 4.x to 4.1.\n> \n> How would for example IBM update that ? They probably go through a security\n> check on their team, which lets say takes 4weeks. If the 4.0 to 4.1 patch\n> is a few hundreds line then the security team can probably check that 4.1\n> is ok in a day or two.\n> \n> With this they basically have to audit browserify too, because these tool\n> can generate vulnerability in code\n> just by minification/optimisation.\n> \n> When you do a 4.0 to a 4.1 you have contract that are other than pure API,\n> you wouldn't change the language from python to perl, you would'nt change\n> the required compiler from GCC to LLVM,\n> you wouldn't drop support for IE8.\n> \n> Rewriting all the module from AMD to common js is such a breakage IMHO. It\n> might work,\n> it might not, but it will piss people off, and people that might not\n> complain because they are\n> using that under NDA and will just think F&^% $#f and stop using the\n> project.\n> \n> As a developper I am happy, and I would have merged and iterate on that\n> earlier.\n> My community hat is just unhappy on the condition this was merged in.\n> \n> It might just be yet another symptom of the lack of cmmunication,\n> and sorry if it fell on one of your PRs, but someone have to speak up.\n> \n> On Thu, Aug 27, 2015 at 7:13 PM, Jonathan Frederic <\n> notifications@github.com\n> \n> > wrote:\n> > \n> > The intention was for it to be backwards compatible - if it wasn't I\n> > would\n> > have removed require.js. You should still be able to require.js things,\n> > which for the most part should be the same.\n> > \n> > Sorry for the command palette and searchandreplace breakage, they don't\n> > have tests and I wasn't able to test every feature of the notebook (there\n> > are too many). I think it would be better to leave the code in place, and\n> > fix the things that are broken. Also, package building shouldn't differ,\n> > if\n> > it does then that too should be fixed.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/pull/353#issuecomment-135511089.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/353#issuecomment-135689947.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Again it depends what you consider API. \n\nIf you consider API that modules are CommonJS or AMD then there are no way to avoid that.  \n\nAnd if you care that people will have to go through 3 month a software validation to update from 4.0 to 4.1.\n @Carreau I wouldn't close this, there is an alternative we can investigate, which is to forever use requirejs and instead amdify npm things.\n > @Carreau I wouldn't close this, there is an alternative we can investigate, which is to forever use requirejs and instead amdify npm things.\n\nThis is not a question on how the PR does things. It's a question on when it was merged. \nThe code itself and how it does it is perfectly fine. It's the implication of the change in a minor release, \nespecially in between a X.0 and X.1 that bother me. \n I'm afraid I haven't had the bandwidth to dig into this one, but it seems indeed, if I understand the issue correctly, like a more serious regression/change than what we want to have in a .X series, especially when we say that we're using [semantic versioning](http://semver.org/).  \n\n@Carreau, I know you're traveling, so nobody expects you to be able to stay on top of this while at a conference, but maybe just leaving it open so we can at least explore how to make progress on it?  \n\nLet's try to identify:\n- what we need to do to keep a 4.X series that feels as such from a semantic version perspective.\n- what to do on a 5.x series if needed.\n\nIf we have to open both right away, then we need to consider the resource cost of having two such branches alive at the same time, though... We've always avoided having live development in two parallel branches because of how brutally costly that becomes in terms of cross-porting of code (backporting of bugfixes and security issues is bad enough, let alone real feature development).\n Basically, I think you (@Carreau) have identified an important issue we need to find a solution for here, not just close it.  \n\nBut we know you're traveling and this is also fairly complex, so by asking to leave it open we're not expecting that this is all on you, rather that we leave it for the whole team to find a way forward...\n We ended up reverting the original PR in #364.\n Ah, OK, I hadn't seen #364, tx!\n","Ah, this fixes it for your command palette.\n\nLet's talk this morning before we decide to revert the other PR or merge this one.\n\nAs it stands, I'd prefer to merge this one and then hand merge some PRs rather than making them rebase.\n I'm on Appear in / gitter if you like. \n\nThe point is not that we can apply manually, I know we can, but if we start applying we cannot revert easily.I think it was merged on a rush.\n","I think making it clearer that MathJax is now considered a true dependency (normal installation cannot succeed without it) is the way to go. There's no longer a very sensible reason to have the notebook without mathjax.\n @Carreau \u2014 I can give this one a go as well. Seems simple enough.\n Can you try to see if you can (even with read only permission) assign yourself ?\n I can't. :cry: \n Do you want to remove this from the 4.1 milestone?\n Yes\n Going through backlog for 5.0. I think the current situation makes the most sense to me:\r\n\r\n1. mathjax can still be disabled for deployments with mathjax security concerns\r\n2. The notebook cannot be *installed* without mathjax, so the removal in #323 was correct (distros installing without mathjax should be considered broken)\r\n\r\nBut if we do want to remove the ability to run without mathjax, I'm also fine with reopening and merging #436 as-is. That sounds OK. So is there anything left to do, or can this be closed? Ok, let's leave the --no-mathjax for one more release, we can make it an error when running `lab` or once the server separation has been done by @SylvainCorlay.\r\n\r\nBumping as \"JupyterLab\". I think Min's argument is that the `--no-mathjax` flag should be kept indefinitely, as people might want to disable it for security reasons. However, my priority in commenting was just to get it out of the 5.0 queue, which you've now done. :-)","Not in the UI, but if it has been specified in your config file, it should work.\n Thanks for the hint! Adding \n\n``` python\nc = get_config()\nc.LatexExporter.template_file = 'mytemplate'\n```\n\nto `ipython_config.py` works fine if the template is located at the same location as the notebook.\nHowever, I have some troubles with custom filters. Where do I have to place these modules so nbconvert can find it? I've added to the config file\n\n``` python\nc.LatexExporter.filters = {'htmlimage': 'myfilter.htmlimage'}\n```\n\nand placed `myfilter.py` with the method htmlimage in the same directory as `mytemplate.tplx` but I always get the error _Could not construct Exporter: No module named myfilter_.\n myfilter should be a globally importable python module. \n Thx, I finally found a solution with `sys.path`. Initially, it doesn't worked but now (with jupyter 4) it works fine. I just wondered why there is no option like `LatexExporter.filter_path`.\n Just a quick follow up... can I specify the config options (e.g. template) from within a notebook? This way I could assign the appropriate template to be used for a particular notebook directly in the notebook. It would be even more interesting to use metadata this issue.\n Not at the moment. There are security issues (_sigh_) with allowing the specification of certain nbconvert options as part of notebook metadata. But it could be done, and could be folded into the existing trust mechanism before being allowed.\n OK, thanks for the info!\n","SymPy 0.7.6.1 fixes this.\n","Awesome ! Thanks !\n Merged as #382.\n\nThanks ! I rebased and merge that as #382 (leaving you as the author of course). GitHub was refusing to merge this one through the UI for whatever reason !\n Oh cool, thanks. Is the command palette working? There are a few more issues related to search and replace on my to-do list but I need that working :)\n It should be working (I need to write tests though)\n","saw that now you should use \n\n```\nipython notebook --config=\"path\"\n```\n @episodeyang yup, sorry for the confusion. As of 4.0, `ipython notebook` is a deprecated alias for `jupyter notebook`. You can see more info about The Big Split on [the blog](https://blog.jupyter.org/2015/08/12/first-release-of-jupyter/), and the [jupyter docs](https://jupyter.readthedocs.org/en/latest/system.html#config-dir) about Jupyter's configuration directories.\n","Hum, that detailed for a specific platform seemed to be a slippery slope, but I'm fine with it. \n I'm okay with this for now.\n","Relaunched failing test !\n","Can you give the link where you got this tutorial. This is just the repository for the notebook App, so if there is an issue it's most likely a problem with the tutorial, not with the notebook itself. \n\nIt might be a problem in the notebook application itself, I would be happy to test. But without a link to the tutorial or the notebook itself, it next to impossible for me. \n\nGoogle does not seem to find out where this is. Do you have a hint of the author tutorial, we might be able to contact the person at IBM to sort that out. \n Hi Carreau -\n\nThanks for your response. The notebook tutorial is accessible after you set up an app within the Bluemix environment. You need to have a unique app URL to get to it. App access is password protected, so I can't give you access through here.\n\nI could run a video showing what I'm doing, if that would help. Just let me know. Otherwise, this may be an issue the IBM team needs to investigate.\n\nHutch\n Hum let me try to ping some IBM people first:\n\n@vinomaster, @lbustelo and @parente are IIRC working on IBM and with spark, one of them might be better suited to respond.  If they can't help you I'll try to take some time to create an account and see what i can do.\n Hi Carreau -\n\nUpdate this morning. I went to the notebook and tried some extra things before I made my first change. I clicked the Run All right at the outset. I then went into a couple different cells and clicked Run specifically for them. I was testing to see if the commands would break without any editing. They did not.\n\nI then made the change I've described in this issue. I changed the first() function to a count(function). I then clicked Run for that cell. This time, it worked. No NameError.\n\nThe biggest difference I've done this morning is that I specifically clicked the menu Cell > Run All, rather than the \"play\" arrow button which only runs the specific cell. My sense is that the notebook's set of commands are not Run on page load, but await my first time clicking Run All. It was that lack of the initial Run All that caused the NameError of the 'weather' file.\n\nIf so, I've learned a bit about the workings of the Jupyter notebook. Thanks so much for your time and attention.\n\nHutch\n Great !\n\nHappy coding !\n\nOn Sat, Aug 29, 2015 at 3:48 PM, bhc3 notifications@github.com wrote:\n\n> Closed #361 https://github.com/jupyter/notebook/issues/361.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/361#event-395757830.\n @bh3 Glad you figured it out. Yes, when the notebook first opens, it does not run top to bottom. Rather, it shows you the last saved state of the notebook document, but not what's currently in memory.\n","@rgbkrk @Carreau \n Want to bring in the commits from https://github.com/jupyter/notebook/pull/354?\n I'd love to merge this but have no idea whether we're reverting the other PR instead or making branches. :confounded: \n Sure, that shouldn't be hard.  I think I can just rebase back those commits, then they should show on GH.\n Let's try to get 4.1 out, and then we make a 4.x branch and this could go in master. \n Ok, I'll wait then - just to save myself rebasing twice ;)\n There only [27 issues for 4.1](https://github.com/jupyter/notebook/issues?utf8=%E2%9C%93&q=is%3Aissue+is%3Aopen+milestone%3A4.1), want to give a hand at squashing them ?\n Yeah, I can take a crack at them.\n We are starting to talk more about alternatives to this such as:\n\nhttps://github.com/systemjs/systemjs\nhttp://jspm.io/\n\nThe pure browerify approach has lots of problems with dynamically loading JS that is installed later after browserify has ben run. More on that on come separately.\n @jdfreder we are on 5.x branch, do you want to rebase ?\n I'm still very much interested in being able to pull npm packages into the existing notebook.  However rebasing this onto master would be insane.  A simpler approach would be to re-implement it.  I think using something like system.js would minimize the impact on the existing code base while allowing us to import npm packages.\n\nIf there's a shared interest to do this, I'm willing to give it another shot.\n I'm certainly interested. Also down to help.\n closing in favor of #1047\n","Rha... should integrate modif from https://github.com/jupyter/notebook/pull/328 too. \n Ok, this now should merge most of #326 and #328 by keeping commits of original authors !\n\nPing @minrk that have been working on the same file. \n The rst files are there on purpose. cc @ellisonbg \n @Carreau I'm fine closing #369 if you want to finish here, or wait for this to go in and rebase that. Either way is fine with me.\n Either are fine. @Jdfreder [said earlier](https://github.com/jupyter/notebook/pull/328#issuecomment-134745177) : \n\n> We probably shouldn't be checking in the .rst files because it's confusing, but I think we needed to in order for things to work with readthedocs.\n\nDo we need for RTD ? I thought it was just for the backlink.\n And mybad, I though #369 was merged, I would have rebased on top of yours also. \nI can merge the 3 together tomorrow. \n > Do we need them for RTD ?\n\nBackstory, if I remember correctly:\n- Committing rst was assumed necessary for RTD since we can't install pandoc via requirements.txt\n  - turns out, RTD environments have pandoc\n- RTD doesn't run Makefiles, it runs sphinx directly, so Make dependencies don't resolve\n  - we have a hack in conf.py to trigger nb\u2192rst even \n\nSo we definitely don't need the rst files for RTD. After realizing it wasn't needed, I think some folks wanted to try committing rst files, to see if they made reviewing prose changes easier. But if that's not the case, I think we are out of reasons to keep them.\n This is a combinaison of 3 PRs that make fixes to docs and on the same file, and I don't want o get yet another PR on it, so I'm going to merge, we can iterate later. \n Thanks, @Carreau!\n","With Jon's travels +1 to this revert. I would like us to continue to see if\nwe can get a stable version of this in 4.1 though (after Jon returns).\n\nOn Sat, Aug 29, 2015 at 3:59 PM, Kyle Kelley notifications@github.com\nwrote:\n\n> Reverts jupyter/notebook#268\n> https://github.com/jupyter/notebook/pull/268\n> \n> Since this did not get resolved before @jdfreder\n> https://github.com/jdfreder left and the only maintainer who will be\n> around in this coming week is likely to be @carreau\n> https://github.com/carreau, I say we revert. We can aim again for this\n> and provide feedback on how to address shortcomings of #268\n> https://github.com/jupyter/notebook/pull/268. If we have to create a\n> branching strategy, we'll do it _before_ we merge #268\n> \n> ## https://github.com/jupyter/notebook/pull/268 again.\n> \n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/jupyter/notebook/pull/364\n> Commit Summary\n> - Revert \"Use NPM, node ES5, and browserify.\"\n> \n> File Changes\n> - _M_ .gitignore\n>   https://github.com/jupyter/notebook/pull/364/files#diff-0 (14)\n> - _D_ .jshintrc\n>   https://github.com/jupyter/notebook/pull/364/files#diff-1 (6)\n> - _M_ README.md\n>   https://github.com/jupyter/notebook/pull/364/files#diff-2 (33)\n> - _M_ bower.json\n>   https://github.com/jupyter/notebook/pull/364/files#diff-3 (15)\n> - _D_ notebook/amd.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-4 (35)\n> - _M_ notebook/base/handlers.py\n>   https://github.com/jupyter/notebook/pull/364/files#diff-5 (4)\n> - _D_ notebook/build.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-6 (35)\n> - _D_ notebook/static-src/auth/js/loginmain.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-7 (14)\n> - _D_ notebook/static-src/auth/js/main.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-8 (5)\n> - _D_ notebook/static-src/base/js/globals.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-9 (94)\n> - _D_ notebook/static-src/base/js/namespace.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-10 (70)\n> - _A_ notebook/static/auth/js/loginmain.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-11 (14)\n> - _R_ notebook/static/auth/js/loginwidget.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-12 (9)\n> - _R_ notebook/static/auth/js/logoutmain.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-13 (10)\n> - _A_ notebook/static/auth/js/main.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-14 (9)\n> - _R_ notebook/static/base/js/dialog.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-15 (13)\n> - _R_ notebook/static/base/js/events.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-16 (18)\n> - _R_ notebook/static/base/js/keyboard.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-17 (20)\n> - _A_ notebook/static/base/js/namespace.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-18 (82)\n> - _R_ notebook/static/base/js/notificationarea.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-19 (9)\n> - _R_ notebook/static/base/js/notificationwidget.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-20 (8)\n> - _R_ notebook/static/base/js/page.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-21 (9)\n> - _R_ notebook/static/base/js/security.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-22 (25)\n> - _R_ notebook/static/base/js/utils.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-23 (63)\n> - _R_ notebook/static/edit/js/editor.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-24 (34)\n> - _R_ notebook/static/edit/js/main.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-25 (60)\n> - _R_ notebook/static/edit/js/menubar.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-26 (21)\n> - _R_ notebook/static/edit/js/notificationarea.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-27 (16)\n> - _R_ notebook/static/edit/js/savewidget.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-28 (21)\n> - _R_ notebook/static/notebook/js/about.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-29 (11)\n> - _R_ notebook/static/notebook/js/actions.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-30 (6)\n> - _R_ notebook/static/notebook/js/cell.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-31 (41)\n> - _R_ notebook/static/notebook/js/celltoolbar.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-32 (12)\n> - _R_ notebook/static/notebook/js/celltoolbarpresets/default.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-33 (12)\n> - _R_ notebook/static/notebook/js/celltoolbarpresets/example.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-34 (9)\n> - _R_ notebook/static/notebook/js/celltoolbarpresets/rawcell.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-35 (27)\n> - _R_ notebook/static/notebook/js/celltoolbarpresets/slideshow.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-36 (9)\n> - _R_ notebook/static/notebook/js/codecell.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-37 (48)\n> - _R_ notebook/static/notebook/js/codemirror-ipython.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-38 (0)\n> - _R_ notebook/static/notebook/js/codemirror-ipythongfm.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-39 (0)\n> - _R_ notebook/static/notebook/js/commandpalette.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-40 (7)\n> - _R_ notebook/static/notebook/js/completer.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-41 (15)\n> - _R_ notebook/static/notebook/js/contexthint.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-42 (4)\n> - _R_ notebook/static/notebook/js/kernelselector.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-43 (26)\n> - _R_ notebook/static/notebook/js/keyboardmanager.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-44 (15)\n> - _R_ notebook/static/notebook/js/main.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-45 (105)\n> - _R_ notebook/static/notebook/js/maintoolbar.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-46 (14)\n> - _R_ notebook/static/notebook/js/mathjaxutils.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-47 (14)\n> - _R_ notebook/static/notebook/js/menubar.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-48 (25)\n> - _R_ notebook/static/notebook/js/notebook.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-49 (45)\n> - _R_ notebook/static/notebook/js/notificationarea.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-50 (24)\n> - _R_ notebook/static/notebook/js/outputarea.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-51 (32)\n> - _R_ notebook/static/notebook/js/pager.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-52 (10)\n> - _R_ notebook/static/notebook/js/quickhelp.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-53 (17)\n> - _R_ notebook/static/notebook/js/savewidget.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-54 (21)\n> - _R_ notebook/static/notebook/js/scrollmanager.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-55 (4)\n> - _R_ notebook/static/notebook/js/searchandreplace.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-56 (4)\n> - _R_ notebook/static/notebook/js/textcell.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-57 (43)\n> - _R_ notebook/static/notebook/js/toolbar.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-58 (6)\n> - _R_ notebook/static/notebook/js/tooltip.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-59 (10)\n> - _R_ notebook/static/notebook/js/tour.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-60 (48)\n> - _R_ notebook/static/services/config.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-61 (36)\n> - _R_ notebook/static/services/contents.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-62 (12)\n> - _R_ notebook/static/services/kernels/comm.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-63 (57)\n> - _R_ notebook/static/services/kernels/kernel.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-64 (32)\n> - _R_ notebook/static/services/kernels/serialize.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-65 (18)\n> - _R_ notebook/static/services/sessions/session.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-66 (16)\n> - _R_ notebook/static/terminal/js/main.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-67 (40)\n> - _R_ notebook/static/terminal/js/terminado.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-68 (14)\n> - _R_ notebook/static/tree/js/kernellist.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-69 (16)\n> - _R_ notebook/static/tree/js/main.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-70 (68)\n> - _R_ notebook/static/tree/js/newnotebook.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-71 (26)\n> - _R_ notebook/static/tree/js/notebooklist.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-72 (20)\n> - _R_ notebook/static/tree/js/sessionlist.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-73 (12)\n> - _R_ notebook/static/tree/js/terminallist.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-74 (20)\n> - _M_ notebook/templates/edit.html\n>   https://github.com/jupyter/notebook/pull/364/files#diff-75 (2)\n> - _M_ notebook/templates/notebook.html\n>   https://github.com/jupyter/notebook/pull/364/files#diff-76 (6)\n> - _M_ notebook/templates/page.html\n>   https://github.com/jupyter/notebook/pull/364/files#diff-77 (7)\n> - _M_ notebook/templates/terminal.html\n>   https://github.com/jupyter/notebook/pull/364/files#diff-78 (2)\n> - _M_ notebook/templates/tree.html\n>   https://github.com/jupyter/notebook/pull/364/files#diff-79 (2)\n> - _M_ notebook/tests/base/utils.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-80 (11)\n> - _M_ notebook/tests/util.js\n>   https://github.com/jupyter/notebook/pull/364/files#diff-81 (4)\n> - _M_ package.json\n>   https://github.com/jupyter/notebook/pull/364/files#diff-82 (33)\n> - _M_ setup.py\n>   https://github.com/jupyter/notebook/pull/364/files#diff-83 (4)\n> - _M_ setupbase.py\n>   https://github.com/jupyter/notebook/pull/364/files#diff-84 (200)\n> \n> Patch Links:\n> - https://github.com/jupyter/notebook/pull/364.patch\n> - https://github.com/jupyter/notebook/pull/364.diff\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/364.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n OK to revert, we can take another stab later, when we have better tested the cases that were broken and figured out our branching plan.\n Going by @minrk, @ellisonbg's comments and @Carreau's feedback following #268's merge, I merged the revert.\n Thanks folks, this is in line with my (belated) comments in #353...\n","This is the result of the split between IPython and Jupyter. The notebook server is Jupyter, but the kernel you are using happens to be IPython (as opposed to IJulia, etc.). You should add the extension to your extensions to be loaded by IPython, which is most easily done via IPython configuration: In `~/.ipython/profile_default/ipython_kernel_config.py` add\n\n``` python\nc.IPKernelApp.extensions = ['mymodule.extension']\n```\n Oh, I see. But I want to know if where is a way to add extension dynamically, but not written in config file, just like `--ext` parameter or something else worked in IPython notebook 2.x version.\n There is not a way to specify kernel arguments on the notebook server command-line, because you can have many different kernels. You can, however, modify kernelspecs a little bit easier with [a2km](https://github.com/minrk/a2km), which means you can change the kernel args without ever restarting the notebook server.\n","I'm also having this issue on OS X 10.11, Python 2.7.10, IPython 4.0.0, Jupyter 1.0.0.\n duplicate of jupyter/notebook#10 fixed upstream. \n","o_O I suppose Ctrl-C does not stop the notebook ?\n That still works! :-) (although not very clear it would ..)\n\nAs I said, everything seems to work correctly, but is just very strange ..\n indeed. \n The reason is jupyter_core uses `execvp()` to launch subcommands. Replacing the call with `subprocess.call()`.\n\nThis makes `jupyter nbconvert` annyoing and `jupyter console` unusable under Windows.\n > The reason is jupyter_core uses execvp() to launch subcommands.\n\nThis is no longer true, the fix was merged: https://github.com/jupyter/jupyter_core/pull/54\n Great! Thanks.\n","@minrk @Carreau I think you forgot to merge the grammar and style improvements made in https://github.com/jupyter/notebook/pull/328. I'm not seeing them populated in http://jupyter-notebook.readthedocs.org/en/latest/examples/Notebook/JavaScript%20Notebook%20Extensions.html\n I'm merging them withmore changes in https://github.com/jupyter/notebook/pull/363\n Thanks! cherry-picked and manually merged as part of #363 !\n\nClosing !\n","@Carreau needs rebase.\n Painful rebase (just kidding).\n","Thanks! I'll have a look at this in just a bit.\n Can you let me know what the right fix for the nbgrader css is in conjunction with this? There's no change without it, so I can't really test this out otherwise.\n > Can you let me know what the right fix for the nbgrader css is in conjunction with this? There's no change without it, so I can't really test this out otherwise.\n\nThis shouldn't need any change on your side. \n\nI'll try to issue a PR against nbgrader that also fix it. \n","Thanks for your comment @nymoorland! Something like this has actually come to existence recently. You can head over to [jupyter/enhancement-proposals#2](https://github.com/jupyter/enhancement-proposals/pull/2) for more information on the new enhancement proposal process. Feel free to read through the document there.\n We should have a list of badges already available on all repos. Usually \"sprint-friendly\" for new contributors/easy fixes. We should advertise tag more. \n\nIf you don't have the right to tag an issue, you can just add a comment \"Can you tag as <...>\" and one of us will do it. \n If at the level of enhancement request, it can probably still be an issue with a tag. Looking above, it seems I need to cover my own corner on tmpnb. These requests should impact the proposals and implementaions put together\n @Carreau @rgbkrk Hey, thanks for the feedback and comments. Yeah, this sort of mechanism could be useful in parallel to the formal proposals for things that don't necessarily require a full-on and day to day stuff that pops up too.  Github calls these things \"labels\" while I was calling them tags. :octocat: \\0/\n\n> If you don't have the right to tag an issue, you can just add a comment \"Can you tag as <...>\" and one of us will do it.\n\n@Carreau Great idea.\n","Thanks!\n","Thanks, Ill merge that manually later as we have other fixes to same file in progress !\n Awesome thank you!\n Thanks! cherry-picked and manually merged as part of #363 !\n\nClosing !\n","Thanks !\n","Ouch, a coredump of python is bad. Any other error from the crashed kernel ?\n\nCan you try:\n\nUpdate libzmq/pyzmq though apt ?\nTry to force reinstall the python kernelspec ? (`$ ipython kernelspec install-self`)\n This looks eerily familiar to a Firefox on Linux bug.\n Interesting, I was using Firefox 40.0.3.\n\nNo other errors from the crashed kernel and I can't find the core dump.\n\nUpdated libzmq-dev and python-zmq through apt. Installed kernelspec using `ipython kernelspec install-self`.\n\nNow I don't get a core dump, but Firefox says \"Dead Kernel\" and the command line says\n\n``` bash\n[I 08:23:06.534 NotebookApp] Kernel started: 8ac639ac-afff-48c6-82bc-f9849b4b225c\n[I 08:23:09.537 NotebookApp] KernelRestarter: restarting kernel (1/5)\n[W 08:23:16.880 NotebookApp] Timeout waiting for kernel_info reply from 8ac639ac-afff-48c6-82bc-f9849b4b225c\n[I 08:23:18.542 NotebookApp] KernelRestarter: restarting kernel (1/5)\nWARNING:root:kernel 8ac639ac-afff-48c6-82bc-f9849b4b225c restarted\n```\n\n...and then just hangs.\n\nIf I go to http://localhost:8888 in google-chrome then I get a core dump.\n @slochower - @rgbkrk is correct, this is usually a 'firefox-on-ubuntu' bug, see here:\n\nhttps://groups.google.com/forum/#!topic/jupyter/b9yeX4zfefw\n\nif you're seeing a core dump when using chrome, then chances are that's a different error (although i can't tell from what you've written above) - could you please post the stack trace from the chrome error?\n\nif it's the same error, then are you using a custom linux kernel with jemalloc instead of the standard libc alloc?\n @dwillmer I assumed the `g_slice_set_config` output was unrelated after skimming this old thread where they said it was \"harmless\" https://bugzilla.mozilla.org/show_bug.cgi?id=672671#c21.\n\nIf I run `jupyter notebook --no-browser` so it doesn't open a tab in Firefox automatically and then open http://localhost:8888 in google-chrome, I get the same behavior after opening a notebook: automatic kernel restart and then core dump.\n\n``` bash\n[I 08:50:44.863 NotebookApp] 0 active kernels \n[I 08:50:44.863 NotebookApp] The IPython Notebook is running at: http://localhost:8888/\n[I 08:50:44.864 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[I 08:51:15.040 NotebookApp] 302 GET / (127.0.0.1) 0.78ms\n[I 08:51:20.461 NotebookApp] Kernel started: 971538c7-5307-4a4a-9163-19a9dba3670f\n[I 08:51:23.463 NotebookApp] KernelRestarter: restarting kernel (1/5)\n[W 08:51:30.511 NotebookApp] Timeout waiting for kernel_info reply from 971538c7-5307-4a4a-9163-19a9dba3670f\n[I 08:51:32.469 NotebookApp] KernelRestarter: restarting kernel (1/5)\nWARNING:root:kernel 971538c7-5307-4a4a-9163-19a9dba3670f restarted\n*** stack smashing detected ***: /usr/bin/python terminated\nAborted (core dumped)\n\n```\n ok, excellent, in which case you've confirmed the python core dump is definitely unrelated.\n\ncould you let us know which python version your kernel is running on? and do you have any custom modifications to any of the python libraries?\n Python version 2.7.9\n\nAs far as I know, no custom modifications. Any way to check? The only thing I can think of that would be atypical is that python (and its dependencies) were installed by apt and jupyter (and its dependencies) were installed by pip.\n Hmm... that shouldn't make a difference, but we can't rule it out yet.\n\nI'll try to reproduce here with 2.7.9, in the meantime, are you familiar enough with gdb to attach it to the process and find out where it's crashing?\n As a pyzmq dev, my first suspicion on this one is libzmq mismatch. What do you get from `python -c 'import zmq; print(zmq.zmq_version(), zmq.__version__)'` and `jupyter kernelspec list --json`\n @dwillmer I've run gdb on C processes before, but when I try to attach it to jupyter notebook it tells me jupyter is not in executable format: file format not recognized. \n\n@minrk Here is the output of the two commands:\n`('4.1.2', '14.7.0')`\nand\n\n``` bash\n{\n  \"kernelspecs\": {\n    \"python2\": {\n      \"resources_dir\": \"/usr/local/share/jupyter/kernels/python2\", \n      \"spec\": {\n        \"language\": \"python\", \n        \"display_name\": \"Python 2\", \n        \"env\": {}, \n        \"argv\": [\n          \"/usr/bin/python\", \n          \"-m\", \n          \"ipykernel\", \n          \"-f\", \n          \"{connection_file}\"\n        ]\n      }\n    }\n  }\n}\n\n```\n And `head -n 1 $(which jupyter-notebook)`?\n #!/usr/bin/python\n and `env | grep LIBRARY`?\n ...nothing. Apparently there's no LIBRARY in env.\n That's a good thing :) It's a common source of problems, which is why I asked.\n @dwillmer @minrk I didn't figure out how to attach gdb to the process, but I got the Ubuntu crash dialog to pop up and it looks like it's related to pyzmq. \n\n![screenshot from 2015-09-03 15 33 16](https://cloud.githubusercontent.com/assets/5393995/9672640/3168fb58-5251-11e5-9dc2-655596aaed06.png)\n @slochower does it help to uninstall and reinstall pyzmq?\n @minrk I used `dpkg -l | grep zmq` to find the zmq packages installed on my machine: libzmq-dev:amd64, libzmq1:amd64, libzmq3:amd64, python-zmq. I then purged and reinstalled them using apt. That had no effect.\n\nBut I also checked with `pip freeze | grep zmq` and I see `pyzmq==14.7.0` there. I uninstalled pyzmq from pip.\n\nNow the notebook works in Firefox! Excellent. So maybe there was an issue with having python-zmq installed via apt and pyzmq installed with pip. I'm not sure how that happened. Is it possible that installing jupyter notebook via pip pulled in pyzmq, even though it was already installed via apt?\n @slochower yes, it's definitely possible for there to be conflicts with different versions of pyzmq and libzmq on the system at the same time. Since pyzmq was installed with pip, one likely scenario:\n1. libzmq was installed via apt\n2. pyzmq installed with pip, linked libzmq\n3. libzmq upgraded out from under pyzmq\n\nThis can cause the symptoms you described.\n","I'm not quite sure why yon consider this a \"bug\" :-) The html magic allow you to inject arbitrary html/js/css on the page, so you can do whatever you like with the UI. And as you inject top level css it takes precedence.\n\nThat's how people [theme their notebooks](http://nbviewer.ipython.org/github/wrobstory/bearcart/blob/8a65684830f4f0d63b455120ae329c3ebb479572/examples/bearcart_examples.ipynb)\n\nI think what you want is to try wrapping all in the iframe to isolate the CSS :-) \n\nclosing, feel free to continue commenting if you have more questions/feedback.\n Ok. Maybe a safe mode could allow to avoid this kind of things.\n\n_Christophe BAL_\n_Enseignant de math\u00e9matiques en Lyc\u00e9e *_et d\u00e9veloppeur Python amateur*\n_---_\n_French math teacher in a \"Lyc\u00e9e\" *_and *_Python *_amateur developer*\n\n2015-09-02 9:23 GMT+02:00 Matthias Bussonnier notifications@github.com:\n\n> I'm not quite sure why yon consider this a \"bug\" :-) The html magic allow\n> you to inject arbitrary html/js/css on the page, so you can do whatever you\n> like with the UI. And as you inject top level css it takes precedence.\n> \n> That's how people theme their notebooks\n> http://nbviewer.ipython.org/github/wrobstory/bearcart/blob/8a65684830f4f0d63b455120ae329c3ebb479572/examples/bearcart_examples.ipynb\n> \n> I think what you want is to try wrapping all in the iframe to isolate the\n> CSS :-)\n> \n> closing, feel free to continue commenting if you have more\n> questions/feedback.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/379#issuecomment-136960362.\n Hello.\n\nI know that user can change CSS for all the Jupyter notebook even if I do\nnot know how to do that.\n\nI think that it could be very useful to have an easy way to set the theme\nof Jupyter. The screenshot below shows that some output can be confusing\nwhen using %%html for example, or other description language.\n\nBest regards.\n\n![screenshot.png](https://cloud.githubusercontent.com/assets/168373/9716963/ff49e7b0-556e-11e5-800a-665b37dc8c06.png)\n\n_Christophe BAL_\n_Enseignant de math\u00e9matiques en Lyc\u00e9e *_et d\u00e9veloppeur Python amateur*\n_---_\n_French math teacher in a \"Lyc\u00e9e\" *_and *_Python *_amateur developer*\n > The screenshot joined shows that some output can be confusing\n> when using %%html for example, or other description language.\n\nAttached images don't work by e=mail, you have to go through github UI to post screenshots. \n\n> I know that user can change CSS for all the Jupiter notebook even if I do\n> not know how to do that.\n\nYou \"just\" need to drop a file name `custom.css` in you `.jupyter/custom/` folder. \n Thanks for the custom.css\n\nI put the picture for the history...\n\nChristophe BAL\n Well, the issue you encounter here, is that having exactly the same rendering is expected in many case, and is what users want to have.  %%HTML  is a [minimal wrapper](https://github.com/ipython/ipython/blob/master/IPython/core/magics//display.py#L49-L52) around the display protocol. You can if you like redefine it to wrap your output in a div with a border to make it clear:\n\n```\nfrom IPython.display import HTML, display\nfrom IPython.core.magic import register_cell_magic\n\n@register_cell_magic\ndef html(line, cell):\n    display(HTML(\"<div style='border:thin solid red'>\"+cell+\"</div>\"))\n```\n Thanks a lot for this solution.\n\nThe problem in my case is that markdown is used to formate a document about\nHTML and the HTML output example is not expected to be the document output.\n\nI will play with the css you iodinate to me just to add some background\ncolor.\n\n_Christophe BAL_\n_Enseignant de math\u00e9matiques en Lyc\u00e9e *_et d\u00e9veloppeur Python amateur*\n_---_\n_French math teacher in a \"Lyc\u00e9e\" *_and *_Python *_amateur developer*\n\n2015-09-07 15:13 GMT+02:00 Matthias Bussonnier notifications@github.com:\n\n> Well, the issue you encounter here, is that having exactly the same\n> rendering is expected in many case, and is what users want to have. %%HTML\n> is a minimal wrapper\n> https://github.com/ipython/ipython/blob/master/IPython/core/magics//display.py#L49-L52\n> around the display protocol. You can if you like redefine it to wrap your\n> output in a div with a border to make it clear:\n> \n> from IPython.display import HTML, display\n> from IPython.core.magic import register_cell_magic\n> \n> @register_cell_magic\n> def html(line, cell):\n>     display(HTML(\"<div style='border:thin solid red'>\"+cell+\"</div>\"))\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/379#issuecomment-138294603.\n > The problem in my case is that markdown is used to formate a document about\n> HTML and the HTML output example is not expected to be the document output.\n\nI don't get this part. \n\n> I will play with the css you iodinate to me just to add some background\n> color.\n\n`iodinate` seem to be autocorrect being overzealous. \n In a cell, we can use Markdown so as to produce a \"standard\" formatted text, a very useful thing, whereas the magic command `%%html` acts like for programming language by giving both the code and its output. \n\nSo there is a possible confusion : is the formatted text that I am reading an HTML output or the \"standard\" text of my document\n\nPS: yes, autocorrection is more and more overzealous.\n well, `%%html` is really meant as a convenience to try things, it was not really design to teach, but more the try out what some html would do before writing some code. \n\nThe fact that the style of output, and markdown cell is the same is on purpose, as it is actually a feature most people want. \n\nWith css you should be able to style the notebook for your student for the distinction to be clearer.\n I understand. I will add and explain how the hack works to my student.\n","1. mistune is a dependency of nbconvert which is a dependency of the notebook, so I'm not sure how it's missing. How did you install?\n2. When I select 'download as .py', I get a .py file. How did you do your export to .py?\n closing for inactivity. \n","by default we will most likely not change the keyboard shortcut are they have been historically like that for too long.\n\nIf you like to swap these you can unbind/rebind your shortcut in shortcuts in custom.js, \nyou could even have execute in place which is only one key, or bound to a remote if you like. \n","closed 3 weeks ago by #277. \n\nThanks. \n So how is a custom profile passed in now?\n The notebook is now part of [Jupyter](http://jupyter.org/), which doesn't have profiles - though you can still switch to a different config directory by setting an environment variable.\n\nThe IPython kernel can still use profiles - you'd need to create a kernelspec for each profile and edit the arguments in kernel.json to tell it which profile to launch in.\n See [the docs](https://jupyter.readthedocs.org/), in particular how to [migrate](https://jupyter.readthedocs.org/en/latest/migrating.html), more especially [what hapend to `profile`](https://jupyter.readthedocs.org/en/latest/migrating.html#profiles)\n","Excuse the whitespace clean up masking the change. I have`(add-hook 'before-save-hook (lambda () (delete-trailing-whitespace)))` in my `.emacs`.\n LGTM\n @iiSeymour we generally prefer to avoid that, but it's okay this time.\n","This has already been fixed  by #324, it will be in 4.1.\n\nCf ipython/ipython#8754 also.\n","It was a mistake to merge the PR that put the YAML file on /api. I didn't realize that clobbered the existing endpoint. That should be considered a bug, and the experimental swagger stuff should be moved somewhere else.\n What's the current status of this? Is there a way to get the Jupyter API as a Swagger JSON spec?\n\nThat would be very cool -- I would potentially migrate IHaskell to be part autogenerated from Swagger if that were easily available...\n The version in master is in pretty good shape, I think. @blink1073 did most of it while writing jupyter-js-services, a JS client for the REST API.\n","Can you try a `ipython kernelspec install-self` ? you shouldn't have to worry about the 304 and 404 you see. \n Thanks for the quick response.  The outcome is:\n\n`[myenv] C:\\Apps\\Python27_Anaconda> ipython kernelspec install-self`\n`[InstallNativeKernelSpec] Installed kernelspec python2 in C:\\ProgramData\\jupyter\\kernels\\python2`\n`[myenv] C:\\Apps\\Python27_Anaconda>`\n And if you re-try to create a Python2 notebook now ?\n If it helps, I see different behavior depending on where I execute `ipython notebook`.  If in the default location for the Anaconda command prompt (`C:\\Apps\\Python_Anaconda`) I get the 404 page not found error - but Untitled.ipynb is created.  If I navigate to other locations a blank page launches and no Untitled.ipynb.\n Sorry, the `ipython kernelspec install-self` did not resolve the issue.\n Hum.... (thinking..)\n I misspoke earlier - Untitled.ipynb is created whenever I create a new notebook, I just can't access it (either 404 page not found or just a blank screen).\n\nAs I mentioned, the notebook is working fine on another Windows 7 machine (nominally the same setup) and works like a charm on any of my *nix machines.\n Carreau, we may have determined a problem.  IT had set the \"Start In\" location of the IPython Notebook launcher that comes as part of the Anaconda package to be an admin location for testing and then pushed it to users (without changing the \"Start In\" location).  Changing the \"Start In\" location to a path where users could write seems to have fixed things.  I'm still confused because \n- when creating a notebook from the dashboard (using the admin \"Start In\" location), the notebook was created but I could not open it\n- I could not open notebooks if I launched the dashboard from the command line in my Documents directory\n- using a virtual environment did not seem to help\n\nUnless the notebook is inheriting the \"Start In\" location in some way, I'm not sure why it would affect each use case described.\n\nI'm not sure if this is a user error, Anaconda, or notebook error.  Feel free to close this issue or do with it what you see fit.\n\nThanks for all the hard work!\n I have same problems now... Did you fix it? If you did.. Please let me know..\n I also have the same problem.\n I formated my computer and solved it..  \nIf you have installed another python or anaconda before and erase it not correctly.. you may have problems above.. I recommend to format your PC. That is fastest solution..\n Reformatting seems a bit drastic. Besides, I don't have admin priviledges on the computer.\n Sad.. Cheer up..\n","@rabernat I'm sorry that the installation instructions for notebook extensions has been frustrating. I also followed the documentation you linked and, like you, was unsuccessful in installing the codefolding extension. I am fairly confident that this is a documentation issue. Please bear with us on this holiday weekend in the US and have confidence that we wish to assist you.\n\n@minrk @Carreau @ellisonbg I'm game for writing an installation doc for notebook extensions when using an anaconda installation on the mac. In troubleshooting, I found that:\n- the standard Anaconda download for 3.4 defaults to `ipython-notebook version 3.2.0`\n- the PATH needs to be updated to include anaconda/bin\n- conda's default version is 3.14.1\n- After executing `conda update conda` and `conda update anaconda`, the versions are `conda 3.16.0`, `anaconda 2.3.0` and `ipython 3.2.0`.\n- After `conda install jupyter`, `jupyter 4.0.4`, `jupyter-notebook 4.0.4`, `ipython 4.0.0` and `ipython-notebook not found`. This is what I would expect.\n\nAs @rabernat, the remaining installation instructions were insufficient for successful activation of the extension:\n- I was able to have the check_nbextension return True after cloning the ipython-extensions repo, jupyter installing, and jupyter enabling the extension.\n- Alas, the extensions were not active.\n\nAny tips would be much appreciated and turned into a shiny document :penguin: :ocean: \n I have reorganized the `ipython-contrib` repository today. It now has a `setup.py`script for installing the extensions and a recipe to generate a conda package. Also, the Jupyter-related documentation of the [Wiki](https://github.com/ipython-contrib/IPython-notebook-extensions/wiki/Home_Jupyter) has been updated.\nThe nbconfig server extension will now be installed too, making activating/deactivating extensions much easier. I hope this will help you getting the extensions to work.\n @juhasch You are awesome! Thanks for sharing.\n @rabernat Thanks to the work by @juhasch I was able to get the extensions to work.\n\nHere's what I did:\n1. Cloned IPython-notebook-extensions\n2.  From the directory that contains IPython-notebook-extensions directory, `conda build IPython-notebook-extensions`\n3.  `conda install --use-local nbextensions`\n4.  I couldn't get `jupyter nbextension install` to work properly. May have been a path issue.\n5.  I did get working with `jupyter notebook`. Navigated to `http://localhost:8888/nbextensions/` and was able to activate extensions and use them.\n\nGood luck. Thanks again @juhasch :smile: \n Thanks a lot @willingc and @juhasch! I can see things are moving fast with this project.\n\nI also filed an issue over at the extensions repo (ipython-contrib/IPython-notebook-extensions#282) and got some help from @juhasch there. With those instructions, I was able to get codefolding working.\n\nI just tried the steps described by @willingc above, and it worked perfectly. IMO the /nbextensions/ tool is awesome and should be the recommended way to install extensions.\n\nI will leave it to the developers to decide whether this should be closed now or whether it should stay open until the [docs](https://github.com/ipython-contrib/IPython-notebook-extensions/wiki/Home_Jupyter) are updated.\n\nMany thanks to everyone for these amazing tools.\n Pointer to a non-conda set of instructions? (or advice?)\n If you are using Jupyter/IPython 4:\n1. Clone the repo\n2. Call `python setup.py install`\n3. Enjoy :-)\n I got that far and now this works:\n\n```\nimport notebook\nnotebook.nbextensions.check_nbextension('usability/codefolding', user=True)\nnotebook.nbextensions.check_nbextension('usability/codefolding/main.js', user=True)\nOut[15]:True\n```\n\nBut this does not:\n\n```\n%%javascript\n```\n\n\u200b\n    Jupyter.load_extensions('IPython-notebook-extensions/usability/codefolding/main');\n    Javascript error adding output!\n    TypeError: Jupyter.load_extensions is not a function\n    See your browser Javascript console for more details.\n\nThe only thing I see ind the JS console is :TypeError: Jupyter.load_extensions is not a function(\u2026)\n Use something like\n`Jupyter.notebook.config.update({\"load_extensions\":{\"my_ext\":true}})` to\nactivate extension, rather than relying on directly calling the methods\nwith a hack.\n\nOn Mon, Sep 7, 2015 at 9:44 AM, Tom Brander notifications@github.com\nwrote:\n\n> I got that far and now this works:\n> \n> import notebook\n> notebook.nbextensions.check_nbextension('usability/codefolding', user=True)\n> notebook.nbextensions.check_nbextension('usability/codefolding/main.js', user=True)\n> Out[15]:True\n> \n> But this does not:\n> \n> %%javascript\n> \n> \u200b\n> \n> Jupyter.load_extensions('IPython-notebook-extensions/usability/codefolding/main');\n> Javascript error adding output!\n> TypeError: Jupyter.load_extensions is not a function\n> See your browser Javascript console for more details.\n> \n> The only thing I see ind the JS console is :TypeError:\n> Jupyter.load_extensions is not a function(\u2026)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/389#issuecomment-138339105.\n Have you tried the nbconfig extension by calling `127.0.0.1:8888/nbextensions`? \n(adjust the hostname and port if you use another configuration)\n @Carreau:\nIf I Use Jupyter . prefix I get Jupyter not defined..\nDid not know %%Javascript was a \"hack\" it is all over the older docs..\n\n```\nnotebook.config.update({\"load_extensions\":{\"codefolding\":true}})\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-20-ddf8350cfe02> in <module>()\n----> 1 notebook.config.update({\"load_extensions\":{\"codefolding\":true}})\n\nAttributeError: 'module' object has no attribute 'config'\n```\n @juhasch when I access 127.0.0.1:8888/nbextensions I just get the Jupyter header saying notebook extension configuration, no body to configure with..\n Sorry I should have been more clear: Open the browser javascript console, and use `Jupyter.notebook.config.update({\"load_extensions\":{\"my_ext\":true}})` from the JS console. \n\nThat's what @juhasch should mostly do under the hood. \n @Carreau Seems to work, would it work with %%javascript from in notebook?\nit does not...\n bad typo sorry (deleted)\n You are bad at copy pasting. Juypter/Jupyter invert `y` and `p`.\n And when typed correctly this works\n%%javascript \nJupyter.notebook.config.update({\"load_extensions\":{\"codefolding\":true}})\n :-) now if you reload, the extension should hopefully work and you should see a message like `Extension codefolding loaded` in the JS console. \n so a big takeaway for me is the new syntax for loading from within notebook no more of this \"Jupyter.load_extensions\" which is lot of places??\n Ah yes so it get permanently added to the config\nhow does one now only add when wanted? and deactivate?\n The nbconfig extension should do that for you:\n![](https://github.com/ipython-contrib/IPython-notebook-extensions/raw/master/wiki-images/notebook-configuration.png)\n\nCan you post the pages source from the Browser when going to `127.0.0.1:8888/nbextensions`?\n Page source\nhttps://gist.github.com/dartdog/4748b75605c577e6925d\n I'm also not getting any function with \"codeFolding\" no gutter although I'm getting no error on loading it. Do I need to somehow install/configure \"code mirror\" separately? I don't see any obvious direction for that?\n There is no need to install anything beyond the extensions. They should work out of the box.\n\nIt looks like you have installed the extensions now twice, in \n`nbextensions/` and `nbextensions/IPython-notebook-extensions/`\n\nYou can check your configuration like this in a notebook:\n\n``` Python\nfrom traitlets.config.loader import Config, JSONFileConfigLoader\nfrom jupyter_core.paths import jupyter_config_dir\nimport os.path\nfname = os.path.join(jupyter_config_dir(), 'nbconfig/notebook.json')\ncl = JSONFileConfigLoader(fname)\ncl.load_config()\n```\n\nFor each notebook extension that is loaded, there will be an entry.\n\nYou might need to change `nbconfig/notebook.json` to `notebook.json', depending on the version of the notebook you use if the list is empty\n My main config appears to be;\nprint(jupyter_data_dir())\nprint(jupyter_path())\n/home/tom/.local/share/jupyter\n['/home/tom/.local/share/jupyter', '/home/tom/anaconda/share/jupyter', '/usr/local/share/jupyter', '/usr/share/jupyter']\nso I have one in the Jupyter directory which is the \"old\" one (/home/tom/.local/share/jupyter/nbextensions)  copied there during the Ipython to Jupyter process, I Imagine I should delete rename it? so that only the one under home (recently cloned from Github) directory remains? but of course the new one does not contain all that I'm using eg live reveal,which is working now...?\nusing your suggested commands shows:\ncl = JSONFileConfigLoader(fname)\ncl.load_config()\nOut[4]: {u'load_extensions': {u'codefolding': True, u'livereveal/main': True}}\n\nI'm out of my depth (clearly) on cleaning this mess up? and hopefully getting the new nbcofig page extension to work?\nAppreciate the help very much...\nI'd guess on renaming the nbextensions in the main Juypyter install directory?\n It looks like you now have mixed versions of the notebook extensions installed. The page source you sent me was from 3.x\n\nThe easy way would be to simply delete the `extensions`, `nbextensions`, and `templates`directories you have in `jupyter_data_dir()`, and then doing the `python setup.py install` thing again. \n Damn.. I renamed extensions, nbextensions and templates  in /home/tom/.local/share/jupyter I restarted the entire Jupyter session and reran all of the above stuff checked /home/tom/.local/share/jupyter and the directories were all back..(I guess due to the setup install) but still no configuration page accessible nor any codefolding gutter...\nThe js console on the config page shows all the extensions as found but the body content of the page is blank...\n wondering if my attempt to install Anaconda messed things up as I see that in the Jupyter path, which bothers me since I'm running my system python,,??  \n['/home/tom/.local/share/jupyter', '/home/tom/anaconda/share/jupyter', '/usr/local/share/jupyter', '/usr/share/jupyter']\n Then you should remove (or rename) the configuration files found in `jupyter_config_path()`.\nSee:\n\n```\nfrom __future__ import print_function\nfrom jupyter_core.paths import jupyter_config_dir, jupyter_config_path\nprint(jupyter_config_dir())\nprint(jupyter_config_path())\n```\n\nRerunning `python setup.py install` will recreate the configuration.\n Just look in all the directories you get from `jupyter_config_path()` and `jupyter_path()` and remove the old extensions and configuration files or move them away.\n where do I re run the setup py from?\n Just go where you have downloaded the current master version of this repository and type `python setup.py install`.\n Well still no joy... Removed all config files.. reran install from the nbextensions dir.. still just get the header on the config page and no gutter for folding.. I even went ahead and ran the anaconda install since my notebook is showing it is being run by the anaconda interpeter and my python command line seems to be invoking the Anaconda interpreter as well..... no change....\nCompletely flummoxed...\n Should I just uninstall all Jupyter and start over? How to best make sure I kill all the stuff? So a ghost config file does not mess me up...\n I'm getting this:\ntom@tom-sam:~$ which jupyter\n/home/tom/anaconda/bin/jupyter\nSo I'm guessing this is messing stuff up?\n For the record, on the off chance anyone else has similar issues: I removed the Anaconda reference in .bashrc, I then pip uninstalled all ipython and jupyter packages and manually deleted any other jupyter and Ipython config files, have been using this stuff for a few years there were numerous instances... Reinstalled via pip (requires sudo) and restarted the jupyter nb server and I have a extension config page and extensions work when enabled.... whew.. Now I'll have just a few add-ins to chase down... but at least starting on what I hope is a firm base...\n\nI really appreciate the patience here, you all helped point me into finally understanding just how screwed my config had gotten....\n\nAs far as I'm concerned ready to close!\n @dartdog I'm glad that you got your configuration sorted out.\n\n@minrk @Carreau @juhasch Let's go ahead and close this issue. Thanks.\n @willingc thanks! @dartdog sorry for the confusion.\n @ilanschnell @csoja @groutr: is there something we can do on the Anaconda or conda side to help avoid this situation in the future?\n @ijstokes, for me, it would be awesome to simply:\n\n``` bash\n$ conda install nbextensions\n```\n\nand voil\u00e0, dependencies are resolved and installed. Then, upon launching Jupyter notebook, a new tab appears in the across the top of launch page (e.g., https://0.0.0.0:8010/tree#nbextensions) for managing all.\n\nIf I had more knowledge of conda... :cry: \nOne day.\n @nehalecky, there is a conda package in the ipython-contrib repo that could help you to package your extension... and also some UI to manage the extensions as well: https://github.com/ipython-contrib/IPython-notebook-extensions#documentation\n @damianavila, thanks for the reply. \n\nAre you referring to [the conda install instructions in the ipython-contrib nbextensions repo README](https://github.com/ipython-contrib/IPython-notebook-extensions#installation)? If so, I've followed them and, alongside a few others, hit some bumps along the way (see https://github.com/ipython-contrib/IPython-notebook-extensions/issues/345). \n\nThat's why I think it would be nice to have an existing conda package that is available so one can simply install nbextensions from the command line like `conda install nbextensions`, with an added tab on the notebook launch so we don't have to remember the url to get to the nbextension management UI. Let me know if that make sense? :)\n We are working on making installation easier. We will most likely have conda packages and try a pip installable package. See https://github.com/ipython-contrib/IPython-notebook-extensions/issues/393\n Just want to share my journey here in detail too, which may help in follow the steps.\n- Windows 10 / Anaconda 2.3.0 Python2.7 64bit / all of Jupyter, IPython should be updated to the latest and greatest.\n\n## Summary\n- git cloned IPython-notebook-extensions\n  To: `C:\\arwa\\git\\IPython-notebook-extensions`\n- `conda update -n root conda-build`\n  Run from here: `C:\\arwa\\git`\n- `conda build IPython-notebook-extensions`\n  - Don't be irritated about all the \"The following NEW packages will be INSTALLED:\", it creates a new environment named `\"_build\"` with all dependencies to build the extension!)\n- Since from here on I wasn't able to follow @willingc steps 5./6., I had figured out this route, based on @juhasch repeated pointers to `python setup.py install` :)\n- Activated the build environment: \n  - `C:\\arwa\\git\\IPython-notebook-extensions> activate _build`\n- `[_build] C:\\arwa\\git\\IPython-notebook-extensions>python setup.py install`\n  - >> Cannot install while the Jupyter notebook server is running\n  - Stopped the jupyter notebook\n- `[_build] C:\\arwa\\git\\IPython-notebook-extensions>python setup.py install`\n\n```\nInstalling Jupyter notebook extensions\nConfiguration files directory: C:\\Users\\spex66\\.jupyter\nExtensions and templates path: C:\\Users\\spex66\\AppData\\Roaming\\jupyter\nInstall Python extensions to C:\\Users\\spex66\\AppData\\Roaming\\jupyter\\extensions\nInstall templates to C:\\Users\\spex66\\AppData\\Roaming\\jupyter\\templates\nInstall notebook extensions to C:\\Users\\spex66\\AppData\\Roaming\\jupyter\\nbextensions\nConfiguring C:\\Users\\spex66\\.jupyter\\jupyter_nbconvert_config.json\nConfiguring C:\\Users\\spex66\\.jupyter\\jupyter_nbconvert_config.py\nConfiguring C:\\Users\\spex66\\.jupyter\\jupyter_notebook_config.json\nConfiguring C:\\Users\\spex66\\.jupyter\\jupyter_notebook_config.py\n```\n- `[_build] C:\\arwa\\git\\IPython-notebook-extensions>deactivate`\n- Restarted the jupyter notebook\n- Access: http://127.0.0.1:8888/nbextensions/\n\nAnd here was all the glory and awesome simple access to nbextensions!\nThanks so much for working on this so hard, because some of this extensions are just brilliant for working all day long with Jupyter Notebooks!\n\nSOLVED!\nLooking forward for a simpler install procedure, for sharing this with my peers in the near future.\n I know that installing nbextensions is horrifically painful today. We are\ncurrently working to create a new system that is based on npm packages.\nThis work is being done in collaboration with Continuum and will include a\nsolution that works well with Conda. However, the new system will have a\ncompletely different API and put assets in completely different locations\non disk. The underlying JavaScript APIs in the notebook will change\nentirely as well. We are hoping to have initial releases of that in the\nnext few months, and hae things stable in 6 months (more details to follow).\n\nI have great regrets in releasing the existing nbextension system given how\ndifficult it is to work with and manage packaging and installation. I think\nit is worth trying to do small things to improve the existing system, but I\nwouldn't invest major work in that direction. I know this is a completely\nPITA, but we are confident the new system will be nice enough that people\nwill _want_ to use it and ditch the old system.\n\nCheers,\n\nBrian\n\nOn Thu, Nov 5, 2015 at 7:08 AM, spex66 notifications@github.com wrote:\n\n> Just want to share my journey here in detail too, which may help in follow\n> the steps.\n> - Windows 10 / Anaconda 2.3.0 Python2.7 64bit / all of Jupyter,\n>   IPython should be updated to the latest and greatest.\n> \n> Summary\n> \n>    -\n> \n>    git cloned IPython-notebook-extensions\n>    To: C:\\arwa\\git\\IPython-notebook-extensions\n>    -\n> \n>    conda update -n root conda-build\n>    Run from here: C:\\arwa\\git\n>    -\n> \n>    conda build IPython-notebook-extensions\n> - Don't be irritated about all the \"The following NEW packages will be\n>     INSTALLED:\", it creates a new environment named \"_build\" with all\n>   \n>   ##   dependencies to build the extension!)\n>   \n>   Since from here on I wasn't able to follow @willingc\n>   https://github.com/willingc steps 5./6., I had figured out this\n>   route, based on @juhasch https://github.com/juhasch repeated\n>   \n>   ## pointers to python setup.py install :)\n>   \n>   Activated the build environment:\n> - ## C:\\arwa\\git\\IPython-notebook-extensions> activate _build\n>   \n>   [_build] C:\\arwa\\git\\IPython-notebook-extensions>python setup.py\n>   install\n> - > > Cannot install while the Jupyter notebook server is running\n>   \n>   ##   - Stopped the jupyter notebook\n>   \n>   [_build] C:\\arwa\\git\\IPython-notebook-extensions>python setup.py\n>   install\n> \n> Installing Jupyter notebook extensions\n> Configuration files directory: C:\\Users\\spex66.jupyter\n> Extensions and templates path: C:\\Users\\spex66\\AppData\\Roaming\\jupyter\n> Install Python extensions to C:\\Users\\spex66\\AppData\\Roaming\\jupyter\\extensions\n> Install templates to C:\\Users\\spex66\\AppData\\Roaming\\jupyter\\templates\n> Install notebook extensions to C:\\Users\\spex66\\AppData\\Roaming\\jupyter\\nbextensions\n> Configuring C:\\Users\\spex66.jupyter\\jupyter_nbconvert_config.json\n> Configuring C:\\Users\\spex66.jupyter\\jupyter_nbconvert_config.py\n> Configuring C:\\Users\\spex66.jupyter\\jupyter_notebook_config.json\n> Configuring C:\\Users\\spex66.jupyter\\jupyter_notebook_config.py\n> - [_build] C:\\arwa\\git\\IPython-notebook-extensions>deactivate\n> - Restarted the jupyter notebook\n> - Access: http://127.0.0.1:8888/nbextensions/\n> \n> And here was all the glory and awesome simple access to nbextensions!\n> Thanks so much for working on this so hard, but some of this extensions\n> are just brilliant for working all day long with Jupyter Notebooks!\n> \n> SOLVED!\n> Looking forward for a simpler install procedure, for sharing this with my\n> peers in the near future.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/389#issuecomment-154042197.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg sounds interesting, is there anywhere I can read about that effort?\n Not yet, but soon...right now it is spread across many conversations on\ngitter, in person and work in many repos. We are working on a roadmap that\nwill provide a centralize outline of this and other work.\n\nOn Thu, Nov 5, 2015 at 7:04 PM, jcb91 notifications@github.com wrote:\n\n> @ellisonbg https://github.com/ellisonbg sounds interesting, is there\n> anywhere I can read about that effort?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/389#issuecomment-154238919.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Hi there, I attempted to build Ipython-notebook extensions as @willingc, however, I was not able to get through to step 2. And the result were generate below. I have checked and have Pyyaml version 3.11 installed.\n\n`Installed c:\\anaconda3\\envs_build\\lib\\site-packages\\python_contrib_nbextensions-alpha-py3.5.egg\nProcessing dependencies for Python-contrib-nbextensions===alpha\nSearching for pyyaml\nTraceback (most recent call last):\n  File \"setup.py\", line 92, in <module>\n    install_requires = ['ipython >=4','jupyter','psutil >=2.2.1','pyyaml'],\n  File \"C:\\Anaconda3\\envs_build\\lib\\distutils\\core.py\", line 148, in setup\n    dist.run_commands()\n  File \"C:\\Anaconda3\\envs_build\\lib\\distutils\\dist.py\", line 955, in run_commands\n    self.run_command(cmd)\n  File \"C:\\Anaconda3\\envs_build\\lib\\distutils\\dist.py\", line 974, in run_command\n    cmd_obj.run()\n  File \"C:\\Anaconda3\\envs_build\\lib\\site-packages\\setuptools-20.3-py3.5.egg\\setuptools\\command\\install.py\", line 67, in run\n\n  File \"C:\\Anaconda3\\envs_build\\lib\\site-packages\\setuptools-20.3-py3.5.egg\\setuptools\\command\\install.py\", line 117, in do_egg_install\n  File \"C:\\Anaconda3\\envs_build\\lib\\site-packages\\setuptools-20.3-py3.5.egg\\setuptools\\command\\easy_install.py\", line 391, in run\n  File \"C:\\Anaconda3\\envs_build\\lib\\site-packages\\setuptools-20.3-py3.5.egg\\setuptools\\command\\easy_install.py\", line 621, in easy_install\n  File \"C:\\Anaconda3\\envs_build\\lib\\site-packages\\setuptools-20.3-py3.5.egg\\setuptools\\command\\easy_install.py\", line 672, in install_item\n  File \"C:\\Anaconda3\\envs_build\\lib\\site-packages\\setuptools-20.3-py3.5.egg\\setuptools\\command\\easy_install.py\", line 717, in process_distribution\n  File \"C:\\Anaconda3\\envs_build\\lib\\site-packages\\setuptools-20.3-py3.5.egg\\pkg_resources__init__.py\", line 827, in resolve\n  File \"C:\\Anaconda3\\envs_build\\lib\\site-packages\\setuptools-20.3-py3.5.egg\\pkg_resources__init__.py\", line 1072, in best_match\n  File \"C:\\Anaconda3\\envs_build\\lib\\site-packages\\setuptools-20.3-py3.5.egg\\pkg_resources__init__.py\", line 1084, in obtain\n  File \"C:\\Anaconda3\\envs_build\\lib\\site-packages\\setuptools-20.3-py3.5.egg\\setuptools\\command\\easy_install.py\", line 628, in easy_install\n  File \"C:\\Anaconda3\\envs_build\\lib\\site-packages\\setuptools-20.3-py3.5.egg\\setuptools\\package_index.py\", line 608, in fetch_distribution\n  File \"C:\\Anaconda3\\envs_build\\lib\\site-packages\\setuptools-20.3-py3.5.egg\\setuptools\\package_index.py\", line 445, in find_packages\n  File \"C:\\Anaconda3\\envs_build\\lib\\site-packages\\setuptools-20.3-py3.5.egg\\setuptools\\package_index.py\", line 779, in scan_url\n  File \"C:\\Anaconda3\\envs_build\\lib\\site-packages\\setuptools-20.3-py3.5.egg\\setuptools\\package_index.py\", line 287, in process_url\nRuntimeError: Setuptools downloading is disabled in conda build. Be sure to add all dependencies in the meta.yaml  url=https://pypi.python.org/simple/pyyaml/r\nCommand failed: C:\\WINDOWS\\system32\\cmd.exe /c call bld.bat`\n I have installed in my Windows Anaconda installation:\n\n```\npyaml                     15.8.2                    <pip>\n```\n\nFeel free to open up an issue at [IPython-notebook-extension](https://github.com/ipython-contrib/IPython-notebook-extensions) as it is an issue with the installer from there.\n","While this is usefull,  why gist more than something else in the core ? \n\nYou can use extensions like [this one](https://github.com/minrk/ipython_extensions#gist) for that. \n More generally you have a bunch of extensions here : https://github.com/ipython-contrib/IPython-notebook-extensions\n I actually had no idea about the extensions, so thanks for pointing me in the right direction!\n The all point of IPython in general is to be a base layer, any \"extra\" should be built on top of it, like storing notebook, on google drive, PostgreSQL.... by digging a bit you can find hundreds of customisation. \n","+1\n","Do you want to send a PR ?\n Sure, submitted. I wasn't sure how to attach it to this issue, so it shows up as #393 \n","This is presumably a difference between mistune and marked's markdown rendering. We may be able to deal with it, though, in our custom handling of math in mistune.\n\nThis is definitely an nbconvert issue, though, and not a notebook one.\n Had the same issue today. Solved it conveniently by modifying the MathJax template file `mathjax.tpl` (should be located in `python3.5/site-packages/nbconvert/templates/html/`. Just look for the following snippet:\n\n```\ndisplayAlign: 'center',\n        \"HTML-CSS\": {\n            styles: {'.MathJax_Display': {\"margin\": 0}},\n            linebreaks: { automatic: true }\n        }\n```\n\nand change `{\"margin\": 0}` to `{\"margin-top\": \"10px\", \"margin-bottom\": \"10px\"}`.\n(FYI: `{\"margin\": \"10px\"}` would also increase the margin at the sides (left and right) which can bring you a horizontal scrolling bar in the HTML if your equations are too wide.\n\nI really wonder why `0` is the default here... It looks really ugly and un-LaTeX-ish...\n","can you try to do a `ipython kernelspec install-self` and retry ?possibly starting the notebook with `--debug` ?\n Closing for inactivity. \n I couldn't figure out what was going on and after trying for a few hours I simply reinstalled everything from scratch. For that reason I can't provide any more details. Sorry!\n > I couldn't figure out what was going on and after trying for a few hours I simply reinstalled everything from scratch. For that reason I can't provide any more details. Sorry!\n\nNo problem, I'm just cleaning up a bit the issue list. \nHappy this is working for you. \n `ipython kernelspec install-self` helped for me, thanks :-)\n I ran \npython2 -m ipykernel install --user\n\nand it worked for me\n trying to fix same problem after upgrading to never jupyter..\n I had clean up python installation and start from scratch.\n","works for me in 4.1.0 - time to close?\n","> In the case of notebooks in that list, it would also be nice to know the number of cells in notebooks\n\nThe number of cells will be a no-go, as it would require to actually parse the notebook, you cannot potentially read and parse several  Gb of .ipynb files to create a tree view. \n(unless notebooks are stored in DB, so we can think about it) \n\nBut for running notebook, it would be possible, as the kernel is already started.\n\nan overhaul of the Dashbaord is planed, but someone need to do it :-)\n","Is `sys.executable` what you expect?\n ```\nIn [2]: sys.executable\nOut[2]: '/home/user/anaconda/envs/jupyter-notebook/bin/python'\n```\n\nThat looks okay. I forgot to add that matplotlib and pandas are working from the ipython console, but the qtconsole and the notebook are having this same issue.\n\nUPDATE:\n\nI tried that in the console, which is giving the correct environment. However, running the same in the notebook actually gives the wrong environment. Why? The other environment is not active right now and doesn't have matplotlib or pandas listed as installed.\n And `sys.executable` is the same in IPython when matplotlib is working?\n Take a look at your kernelspec. The path for calling python will probably point to the wrong environment.\n @minrk When I run `sys.executable` in IPython outside of the jupyter-notebook environment, it gives `/home/user/anaconda/bin/python` and inside the other environment also gives the correct output. I just restarted and created a new environment but the problem persists.\n\n@juhasch Certainly points to the wrong environment. The interesting thing is that I don't have the jupyter notebook installed in the other environment. I installed jupyter_client there, though.\n Uhm... where is located the kernel for IPython? ~/.jupyter only shows \"migrated\" and ~/.ipython shows kernels for R and Julia.\n The location of the kernel spec depends on your system. Should be in one of these:\n\n```\nfrom jupyter_core.paths import jupyter_data_dir\nprint(jupyter_data_dir())\n```\n\nI am sure @minrk can explain this better.\n Yes, that explains it. I have this:\n\n{\n \"display_name\": \"Python 2\", \n \"language\": \"python\", \n \"argv\": [\n  \"/home/user/anaconda/envs/other-environment/bin/python\", \n  \"-m\", \n  \"ipykernel\", \n  \"-f\", \n  \"{connection_file}\"\n ]\n}\n\nIs there some way to share the kernel to be used in both environments?\n I changed my kernel spec to just `python` without the absolute path.\n That works great! Thank you. \n\nWhat was the cause of using a particular environment in the `kernels.json` file? Is that standard behavior?\n The full path of `sys.executable` of the Python used to install the kernel is written to kernel.json by default.\n Oh, okay. In any case, @juhasch's solution is working perfectly.\n I had this problem - it was due to /usr/local/bin/jupyter-kernelspec being read first by Jupyter before /opt/conda/bin/jupyter-kernelspec when /opt/conda/bin/jupyter had been run.. There is a path bug here.\n\nRemoving the previous install solved the problem. \n If `/usr/local/bin` is before `/opt/conda/bin` on your PATH, I think that's expected behaviour.\n\nIf the directory where `jupyter` exists is not on PATH, we add it, but we don't currently do anything to prioritise that location over the rest of PATH. Maybe we should - I can see arguments both ways. @minrk ?\n I might prefer the current behavior, that `jupyter kernelspec` always behaves the same as `jupyter-kernelspec`, which it would not if we forced the jupyter dir to the head of the PATH. Rather than what we do now, which is adding it to the end in the unlikely event that it wasn't already present.\n\nBut I don't feel strongly about it. We could give the reverse priority a try if we want to enforce that `/path/to/jupyter kernelspec` is identical to `/path/to/jupyter-kernelspec`. I don't see a good way to accomplish what @resurgo is trying to do without that. At the same time, using PATH to override/wrap commands would not be possible if we made that change. I'm not sure if that's something we want/need to allow, though.\n jupyter/jupyter_core#79 implements the described priority, if that's the way we want to go.\n @resurgo +1\n\n> I had this problem - it was due to /usr/local/bin/jupyter-kernelspec being read first by Jupyter before /opt/conda/bin/jupyter-kernelspec when /opt/conda/bin/jupyter had been run.. There is a path bug here.\n> Removing the previous install solved the problem.\n\nMany thanks! \n thanks for your answer @resurgo . But what do you mean by \"Removing the previous install\"? Should I remove `/usr/local/bin/jupyter-kernelspec` directly? But I have tried it and it doesn't solve my problem. Do you have any idea? Thanks!\r\n my environment is mac and python3\r\ni also on jupyter can not import matplotlib\r\n\r\non jupyter run sys.executable is '/Library/Frameworks/Python.framework/Versions/3.5/bin/python3'\r\non terminal run sys.executable is '/Users/abc/anaconda/bin/python3'  \r\n\r\nso what can i do to solve the problem ?\r\n\r\nand just rm jupyter-kernelspec seemed can not work If there's an old install of Jupyter/IPython/ipykernel on your system, try to get rid of that.\r\n\r\nRemoving the `jupyter-kernelspec` script is usually not the right thing to do; you probably want to run `jupyter kernelspec list` to see where it's finding kernels, and then install/remove kernelspecs to arrive at the situation you want. @takluyver  Can you explain how to install `kernelspecs `?  In general it's up to the kernel to provide a convenient way to install it. For instance, here are the instructions for the IPython kernel:\r\nhttp://ipython.readthedocs.io/en/stable/install/kernel_install.html","There are no such plans at the moment, but it shouldn't be too hard to add an extension point for it.\n This could also be a way to implement a shiny like dashboard with e.g. http://www-01.ibm.com/software/ebusiness/jstart/dynamicdash/\n\n-> Define a new fileformat (basically an ipynb with a different ending?) -> let the backend send all cells to the kernel and send the output to the frontend -> if it is a widget, they can communicate, otherwise only static stuff is send.\n This looks to be implemented (or implementable) in jupyterlab so can probable by closed.\n > This looks to be implemented (or implementable) in jupyterlab so can probable by closed.\n\nGood point. Thanks; and if/when you are going this route, please send us feedback on the API of lab !\nExtremely appreciated !\n","This can be reproduced with:\n\n```\nexport SHELL=\njupyter notebook\n```\n\nIt's unclear whether we should handle that case, since I'm not sure an empty but defined $SHELL makes a lot of sense, but it's easy to do, so might as well: #5\n For the record, the issue was that this particular user didn't have a default shell in `/etc/passwd`. Adding that using `chsh` fixed the issue. We may still want to do the fix in #5 to guard against this silliness.\n I think in general, empty environment vars are treated as undefined - I assume because in some context it's easier to set them to empty than to actually undefine them.\n","+1\n",":+1: \n +1, \n\nthat remind me that I had a close PR with more actions. \n +1 from me.\n the second possibility was to have a restart and run all button on the kernel-restart modal dialog. \n","This is needed on sys_info as well, which is also being corrupted by autoescape.\n Done. \n","@minrk I assigned you since it looked like you are helping with the PR already\n closed by #403\n",":+1: to the fix once the syntax errors are resolved.\n Apologies for the multiple amends, I had an additional / in the concat that caused a failure in the build tests / running locally. Last commit passes testing.\n @seanson if you want to squash your changes into one commit, you can use `git rebase -i master` and `squash` (or `fix`) all your commits together, e.g.\n\n``` git\npick 6ad8ea2 Replace...\ns fa02d0e Replace...\ns 88359c4 Replace...\n\n# Rebase 159b470..88359c4 onto 159b470 (3 command(s))\n#\n# Commands:\n# p, pick = use commit\n# r, reword = use commit, but edit the commit message\n# e, edit = use commit, but stop for amending\n# s, squash = use commit, but meld into previous commit\n# f, fixup = like \"squash\", but discard this commit's log message\n# x, exec = run command (the rest of the line) using shell\n#\n# These lines can be re-ordered; they are executed from top to bottom.\n#\n# If you remove a line here THAT COMMIT WILL BE LOST.\n#\n# However, if you remove everything, the rebase will be aborted.\n#\n# Note that empty commits are commented out\n```\n\nYou can also you `git commit --amend` to amend your latest commit when you are adding fixes. If you rewrite history, you will have to `git push -f` to confirm that the remote branch should be rewritten instead of added to.\n Thanks for the help! I'm still a bit new to the git workflow so the advice is definitely welcome! \n\nThere appears to have been some sort of Travis CI failure for a pip install among all the tests but they're passing locally.\n @seanson do you need a hand finishing this one up? I can do the rebase & merge, if you would prefer.\n Apologies for the delays, I will likely be able to attend this later tonight (GMT+10). I may close and re-open the PR with a proper implementation with the url join from utils as well.\n > Apologies for the delays, I will likely be able to attend this later tonight (GMT+10). I may close and re-open the PR with a proper implementation with the url join from utils as well.\n\nNo hurry. \n\nYou can just push on the same branch and this PR will update. \n\nThanks. \n @seanson plans to finish this up? I'm happy to take it over the finish line if you are busy.\n Thanks @minrk / @Carreau for the patience and the help with the git amending. I've redone the commit with the built-in utils calls and looks like tests are good!\n @seanson huzzah!\n","LGTM, I have seen this on slow connections and I can confirm that 30 second is a good compromise...\n I still run into issues if I open a particularly heavy notebook on a slow VPN connection.\n\nIs there any loss in increasing the timeout to even higher number (i.e. 300), or, even better, making it configurable?\n","Yes it is on purpose. The API/UI does support multiple checkpoints if the content manager implement one. \nThe default content manager does by design support only 1 checkpoint, as we do not want to reimplement a VCS, and we do not want to require git, mercurial or a DB to store notebooks/ \n > Yes it is on purpose. \n\nPlease consider this issue to be a request to not delete the checkpoint when deleting the file. I now have to involve the sysadmins whenever a student deletes a notebook by mistake, and it takes some time for them to restore from tape, or wherever. \n\n> The API/UI does support multiple checkpoints if the content manager implement one.  The default content manager does by design support only 1 checkpoint, as we do not want to reimplement a VCS, and we do not want to require git, mercurial or a DB to store notebooks/\n\nOne could have a multiple checkpoint scheme without much complexity and without having dependencies on anything else. Just keep copies of the last N saves of the notebook in the checkpoint directory. N == 0 would be no checkpoints; N is None would be no limit (eg, don't delete checkpoints). \n @Carreau @dsblank I've proposed elsewhere that `FileContentsManager` could support multiple checkpoints easily with a slight change to how checkpoints are stored.  \n\nRight now, the checkpoint for `foo/bar/buzz.ipynb` is stored at `foo/bar/.ipynb_checkpoints/buzz-checkpoint.ipynb`.  Supporting multiple checkpoints could be accomplished easily by changing the storage-schema so that we instead stored cps for each notebook in a subdirectory of `.ipynb_checkpoints`.  This would mean that `foo/bar/buzz.ipynb`'s checkpoints would be stored under `foo/bar/.ipynb_checkpoints/buzz/<uuid>.ipynb`.\n\nThis could be implemented either as a behavior change to the existing `FileCheckpointsManager`, or as a new `MultipleCheckpointsManager` or somesuch.\n Would it make sense to delete the checkpoint upon notebook deletion, but\nsave a copy under a separate name somewhere? Accidental notebook deletion\nis a pretty painful thing to deal with.\n\nOn Tue, Sep 8, 2015 at 8:57 AM, Scott Sanderson notifications@github.com\nwrote:\n\n> @Carreau https://github.com/Carreau @dsblank\n> https://github.com/dsblank I've proposed elsewhere that\n> FileContentsManager could support multiple checkpoints easily with a\n> slight change to how checkpoints are stored.\n> \n> Right now, the checkpoint for foo/bar/buzz.ipynb is stored at\n> foo/bar/.ipynb_checkpoints/buzz-checkpoint.ipynb. Supporting multiple\n> checkpoints could be accomplished easily by changing the storage-schema so\n> that we instead stored cps for each notebook in a subdirectory of\n> .ipynb_checkpoints. This would mean that foo/bar/buzz.ipynb's checkpoints\n> would be stored under foo/bar/.ipynb_checkpoints/buzz/<uuid>.ipynb.\n> \n> This could be implemented either as a behavior change to the existing\n> FileCheckpointsManager, or as a new MultipleCheckpointsManager or\n> somesuch.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/405#issuecomment-138608544.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg Yes, that would be better than nothing! You could have a .ipynb_trash folder for example where deleted things of all kinds could go. You can make it an option that wasn't on by default, if you were concerned that some wouldn't want it.\n\nIn general, Jupyter can do much more to make it so that we don't accidentally lose files. Even emacs doesn't delete the tilde file :)\n @ssanderson I think it will save many of us many headaches if users can have a richer checkpoint system. I encourage multiple checkpoints, and to not delete them when deleting a notebook. Thanks!\n I'm still -10 on supporting multiple checkpoints in the default manager. Then we are just reinventing VCS badly. Alternative checkpoint implementations can wrap git or database systems to provide it, but I strongly oppose implementing mini-git on the filesystem.\n\nI don't have a good answer for accidental deletion. Failing to delete the checkpoints on deletion of notebooks means that we are guaranteeing that we clutter the filesystem with hidden files with no intention of or mechanism for deleting them, which is no good. On the other hand, we could add to the contents manager our own version of trash, which is reimplementing yet another wheel. If we do this, I would propose that we do our best to actually call system APIs to put things in the system trash, rather than implementing our own trash folder.\n @minrk I think it already implements a \"checkpoint system\" badly: there is exactly one checkpoint, which goes away when you delete the file. What kind of a checkpoint system behaves like that? I am not suggesting any other git-like functionality.\n\nPerhaps you can rename the option to \"Backups\", and keep the last N backups, timestamped, in a round-robin queue.\n\nPerhaps you can clear the \"trash\" when single-user server shuts down. Or clear out files that older than M days on startup.\n\nI suspect that if you poll users, they would vote for \"cluttering the file system with backup files\" rather not having a single backup file. \n\nBut if you can hook into each system's trash API, go for it! Thanks!\n @dsblank we never had any intention of implementing a complete checkpoint system. All we want is the most basic protection from autosave. The form this took is ensuring that 'manual' saves are always preserved, and can never be clobbered by autosave. That is the complete scope of what we intend to provide with the default system.\n @minrk You succeeded in that. However, there is a a more basic requirement that this doesn't cover: recovery from accidental deletes. In my opinion, this should be part of the default system. How about a tilde file, like emacs, that is replaced with last save, and is not deleted when you delete the file? Could be a default setting on whether to delete tilde file or not when you delete a file. The editor should also leave a backup/tilde file, too. This would be independent of the so-called checkpoints.\n I think dealing with accidental deletes is a sensible problem to work on, I just don't think it has much to do with checkpoints. Replacing forceful delete with move-to-trash (however that's defined) would seem to be a decent solution.\n I agree with @minrk that the handling of deletes is separate from the\nmultiple checkpoint questions. Just focusing on the accidental delete\nquestion here - I agree it is a problem and that we should come up with a\nstrategy for tackling it. I like Min's idea of trying to move it to trash,\neither the OS level one or a special jupyter trash location.\n\nOn Mon, Sep 14, 2015 at 7:34 AM, Min RK notifications@github.com wrote:\n\n> I think dealing with accidental deletes is a sensible problem to work on,\n> I just don't think it has much to do with checkpoints. Replacing forceful\n> delete with move-to-trash (however that's defined) would seem to be a\n> decent solution.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/405#issuecomment-140100165.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Any solution to recovering an accidentally deleted notebook?\n If you've just deleted the notebook, e.g. via `rm`, its last checkpoint may be in `.ipynb_checkpoints/` in the same directory as the notebook. If you've gone through the confirmation dialogs of the notebook UI and confirmed that the notebook should be deleted, its checkpoint will be removed, as well.\n Isn't there a way to recover a Jupyter notebook deletes by the browser? I'm kind of desperate about it ... \n\n![captura de pantalla 2016-08-25 a las 19 27 30](https://cloud.githubusercontent.com/assets/8909006/17990373/b09c7a36-6afa-11e6-9ea2-26efbbe7ee56.png)\n\nI want to recover the `Construccion Tabla Enigh.ipynb` , but I can't find it anywhere... \n There are 'undelete' tools which scan 'empty' space on your hard drive for files, because deleting a file doesn't normally wipe the data. You may have some luck with that, but it only works if the space hasn't been used for another file.\n that is not user-friendly, accidentally delete my notebooks, instead of stoping them. And now trying to recover and there is no undo ","I think the should have been fixed by #324 \n If I have a few minutes, I'll try a dev version and check it out.  Thanks!\n I did try jupyter dev and the issue is fixed.\n","@captainsafia thanks! Can you add a short `long_description` as well? A very brief summary of what it is and a restructured-text link to https://jupyter-notebook.readthedocs.org should do it, I think.\n @minrk \u2014 check it out now!\n Perfect, merging!\n ![giphy-3](https://cloud.githubusercontent.com/assets/1857993/9778236/a349d870-5722-11e5-9cef-a8d7c322c758.gif)\n :-)\n\nOn Wed, Sep 9, 2015 at 6:43 PM, Safia Abdalla notifications@github.com\nwrote:\n\n> [image: giphy-3]\n> https://cloud.githubusercontent.com/assets/1857993/9778236/a349d870-5722-11e5-9cef-a8d7c322c758.gif\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/408#issuecomment-139091597.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","Looks good to me. \n",":+1: \n Hey @ivanov , nice to see you around the repo again :-)\n my first time here, actually.\n\nyou come here often? ;)\n","I think you can submit a PR. \n\n@rgbkrk you are our ssl expert, I assign you to the issue. \n","You shouldn't have any problem, but we could try fix it still. \n **shouldn't**, typed too fast.\n yeah, that is a minor problem. Thanks.\n rstrip `os.sep` on notebook_dir should do it.\n @Carreau \u2014 I'll take on this one for 4.1 Can you set me as assignee?\n > I'll take on this one for 4.1 Can you set me as assignee?\n\nWe cannot assign people without commit rights. Just dropping a line that you are working on it is sufficient. \n > We cannot assign people without commit rights. Just dropping a line that you are working on it is sufficient.\n\nActually I gave the \"student\" group, read access so that I can assign you. \n :smile: \n","It may have worked before, because we added the extension loading to every user's custom.js. We are on a new system now, with users perhaps already having their own custom.js. Is there a system wide custom.js that would be run every time? Or a js equivalent file?\n Actually, just putting this code in my own custom.js doesn't help... still have the 50% doesn't run problem.\n There isn't an equivalent js file, but adding one may be appropriate for contexts like JupyterHub deployments.\n Ok, then I can add it to all users' custom.js files (or blow away their ~/.ipython stuff).\n\nBut any idea why the code doesn't run reliably?\n I'm guessing it's a race on the HTTP requests, which can vary a lot.\n Ok, thanks for the quick feedback. I have rewritten the code a bit, running the `notebook_loaded.Notebook` callback also when the button gets added to the toolbar, and that seems to cover the late loading case too.\n If you can don't use custom.js to load extension use the configuration json with the extension name. \n\nI did push at some point that custom.js should actually be a module that define a function (load_custom), which is called at the right time (actually exactly as an extension), but it didn't get any tractions. \n\nI think it would avoid these kind of race conditions. \n On Fri, Sep 11, 2015 at 11:34 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> If you can don't use custom.js to load extension use the configuration\n> json with the extension name.\n\nCan you provide more details here about what you mean about the\nconfiguration json? Where is it/where does it go? If it matters, we're on\njupyterhub.\n\n> I did push at some point that custom.js should actually be a module that\n> define a function (load_custom), which is called at the right time\n> (actually exactly as an extension), but it didn't get any tractions.\n> \n> I think it would avoid these kind of race conditions.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/412#issuecomment-139577495.\n Yes I can: http://carreau.gitbooks.io/jupyter-book/content/Jsextensions.html (need update)\n\nThe js api from the notebook will update this file :\n\n```\n$ cat  ~/.jupyter/nbconfig/notebook.json\n{\n  \"load_extensions\": {\n    \"create_assignment/main\": true\n  }\n}\n```\n\nnbgrader activate its extension by modifying/creating this file from the Python side. \n @dsblank do you get correct extension loading order now ?\n I made two changes:\n1. used \"notebook_loaded.Notebook\" rather than \"app_initialized.NotebookApp\"\n2. made the code that goes through an opening notebook happen when we add to the toolbar.\n\nChange 2 might not be necessary with change 1. There was an issue with very large notebooks, but we are testing in the field this week. Looks good so far!\n Looks like we have worked around the issue. Thanks!\n just curious -- where is it documented to do this sort of thing? (I mean the `require()` function with the callback, and the `events.on()` function)\n\n```\n<script type=\"text/javascript\">\n    sys_info = {{sys_info}};\n    require(['base/js/namespace', 'base/js/events'], function (IPython, events) {\n    events.on(\"app_initialized.NotebookApp\", function () {\n            IPython.load_extensions(\"calico-publish\",\n                                    \"calico-submit\",\n                                    \"calico-spell-check\",\n                                    \"calico-document-tools\",\n                                    \"calico-cell-tools\");\n        });\n    });\n</script>\n```\n","This isn't normal behavior. Markdown rendering is the same as before. Do you see any errors in the js console?\n No, no error messages or warnings.\n\nIf it works for everyone else, could it be a missing dependency or something?\n OH, I found what's wrong. Using '#text' doesn't work, but using '# text' does. Maybe a parser issue?\nAlso the markdown doesn't work between html tags, with or without spacing.\n Ah, yes. That's a deliberate change in marked, and not something we control. See #276\n Is the HTML thing also intentional? And if not, is there a way around it?\n @Achifaifa I believe it is intentional. I am not aware of a workaround.\n Thanks, I'll have to find out another way :)\n","Migrated to jupyter/jupyter_core#52\n @ErunamoJAZZ sorry about this, it's a bug in jupyter-core. Moving over there.\n","@jg-you do you see any messages in the javascript console?\n Here is the content of the console:\n\n```\nDefault extension for cell metadata editing loaded.                                     main.min.js:23923\nRaw Cell Format toolbar preset loaded.                                                  main.min.js:24009 \nSlideshow extension for metadata editing loaded.                                        main.min.js:24057 \nUncaught TypeError: IPython.load_extensions is not a function                           :8888/custom/custom.js?v=20150911142454:52 \nLoaded extension: widgets/notebook/js/extension main.min.js:12065 loaded widgets        :8888/nbextensions/widgets/notebook/js/extension.js?v=20150911142454:81 \nGET http://localhost:8888/static/components/backbone/backbone-min.map 404 (Not Found)   backbone-min.map:1 \n```\n Just now realized that it's caused by an extension (toc) with the line\n\n```\n$([IPython.events]).on(\"app_initialized.NotebookApp\", function () {\n    IPython.load_extensions(\"toc\");\n});\n```\n\nin `custom/custom.js`. So it's fixed I guess hehe.\n Hm, bugs in custom.js really shouldn't cause everything to die like that.\n It could be that the syntax I used to include the extension is really out of date / does not work at all anymore? Not familiar with JS, I just copy pasted from the extension README back in the ipython notebook days.\n > s really out of date / does not work at all anymore?\n\nIt is outdated but I agree with @minrk that a bug there should not trigger all these problems...\n I have another issue similar to this one. I can't save any changes.\nError message:\n\n>  Load failed, save disabled\n\nversions:\nPython 3.4\nIPython 4.2.0\n\nmessage in terminal:\n`\n[W 17:29:54.971 NotebookApp] Unrecognized JSON config file version, assuming version 1\n[I 17:29:55.572 NotebookApp] [nb_conda_kernels] enabled, 3 kernels found\n[I 17:29:55.912 NotebookApp] \u2713 nbpresent HTML export ENABLED\n[W 17:29:55.912 NotebookApp] \u2717 nbpresent PDF export DISABLED: No module named 'nbbrowserpdf'\n[I 17:29:55.949 NotebookApp] [nb_anacondacloud] enabled\n[I 17:29:55.952 NotebookApp] [nb_conda] enabled\n[I 17:29:55.957 NotebookApp] Serving notebooks from local directory: /Users/yo/Documents/Books/Python_Programming/mastering_pandas_for_finance\n[I 17:29:55.957 NotebookApp] 0 active kernels \n[I 17:29:55.957 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/\n[I 17:29:55.957 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[W 17:29:57.471 NotebookApp] Notebook 06_Trading_Using_Google_Trends (1)-Copy1.ipynb is not trusted\n[W 17:29:57.540 NotebookApp] 404 GET /nbextensions/nbpresent/js/nbpresent.deps.min.js.js (::1) 7.65ms referer=http://localhost:8888/notebooks/06_Trading_Using_Google_Trends%20%281%29-Copy1.ipynb\n[I 17:29:58.236 NotebookApp] Kernel started: 923e3e48-e8f1-48cf-a6bc-6aa2d7090771\n[I 17:37:08.937 NotebookApp] 302 GET / (::1) 0.91ms\n`\n\nAny help would be appreciated. Thanks.\n","It seems that is a large number of environment variables. Maybe this isn't worthwhile even if there are some differences between the two versions.\n Appears that `GROUP=js/tree` sometimes hangs resulting in build errors. I am seeing the same build error with Python 3.4, as well. ( https://travis-ci.org/jakirkham/notebook/builds/79739648 ) So, I don't believe this problem is caused by adding Python 3.3 to the list of Python environments.\n > Seems everything else is being tested on Python 3.3 except for this. So, figured it should be added.\n\nSure, seem simple enough. I don't see any reason not to test on 3.3 if test passes. \n\n> Appears that GROUP=js/tree sometimes hangs resulting in build errors. I am seeing the same build error with Python 3.4, as well. ( https://travis-ci.org/jakirkham/notebook/builds/79739648 ) So, I don't believe this problem is caused by adding Python 3.3 to the list of Python environments.\n\nWe are aware that travis have random failure, if it happen on one other PR, you can just drop us line and ask one of us to restart the failing test without justification, we'll just do it. \n\nI relaunched the failing test to see if it passes. \n\nThanks !\n Thansk @Carreau. Glad to hear the random failure is a known issue. It looks like it is passing now.\n Thanks, @jakirkham!\n","/cc @natemurthy @minrk\n Thanks!\n","relaunched failing tests.\n Travis Happy !\n :+1: :heart_eyes: \n I can't seem to get paste working with the current master branch, with a clean install according to the README. The right click menu paste does nothing. \n Ah in chrome I can get it working with the paste button in the upper right hand menu (the paste option is not present in the right click menu).\n\nIn firefox it still doesn't work though\n","@fperez and I had talked about this being on the jupyter/jupyter main docs\nas some of the migration stuff spans multiple repos and projects.\n\nOn Fri, Sep 11, 2015 at 10:19 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Title pretty self explanatory.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/419.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Sure, in jupyter/jupyter is fine too.\n I'll try to spend some time this weekend drafting some transition docs that have come up in a few places. I've been spending much of the last day or two on Issue classification.\n > I've been spending much of the last day or two on Issue classification.\n\nYep, we saw a waterfall of PR notifications :wink: ... really great job and very appreciated!\n @minrk - I am also willing to help write the part of the migration on jupyter/jupyter, but I don't have it all in my head. If you want to jot down the main technical details somewhere I can iterate on the rest of it.\n @minrk Happy to help as well.\n @ellisonbg @willingc hopefully I'll have a draft up tomorrow covering the main points, and we can iterate from there. Thanks!\n cross link to https://github.com/ipython/ipython/issues/8769\n Link with [ML explanation](https://groups.google.com/forum/#!search/JUPYTER_CONFIG_DIR/jupyter/7q02jjksvFU/GI_rcYtQDQAJ).\n","Hey, someone could tell me what happened? I just don't know what's the error?\n Random failure, relaunched test. \n","Only the directory where the server was launched or, maybe, also \"relative\" to that directory if you go deeper in the hierarchy?\n You keep current behavior with clickable breadcrumbs for deeper in the hierarchy.\nThis was brought up yesterday with graphical launcher, where people still get multiple server, and are not\nsure in which directory the server is launched.\n I think this is a usability problem for people who have multiple of these\nrunning.\n\nMy concern with adding it the way you suggest makes the overall path\nsemantics confusing as the home icon and following non-clickable stuff\nencode the exact same information in two different ways, while suggesting\nthat the non-clickable portion is somehow nested in the home icon (which\nisn't the case).\n\nFrom a conceptual perspective, what we need is for a user to see what the\nhome icon refers to. Some options:\n1. Have a hover tooltip on the home icon that shows the launch_dir.\n2. Replace the home icon by a single clickable path segment that shows the\n   launch_dir as one unit (maybe without spaces between the \"/\" chars.\n3. When the home icon is hovered on replace it by the UI idea of 2\n4. Show it somewhere else on the page.\n\n@cameronoelsen can you prototype a few options for this tomorrow?\n\nOn Sat, Sep 12, 2015 at 6:43 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Small local user study : \"in which directory did I launched IPython\n> notebook?\"\n> \n> Proposal, add a non-clickable usercompress(launch_dir) to the breadcrumb\n> in the dashboard.\n> \n> [image: screen shot 2015-09-12 at 18 40 17]\n> https://cloud.githubusercontent.com/assets/335567/9834750/d0d330d6-597d-11e5-8cc9-59f72818b7aa.png\n> \n> Ping @ellisonbg https://github.com/ellisonbg\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/422.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n How does this work for contexts in which the filesystem of the notebook server isn't the same as the one displayed in the UI?  Showing the CWD of the notebook server is misleading when running with [PGContents](https://github.com/quantopian/pgcontents), for example.\n > My concern with adding it the way you suggest... \n\nI did not really though of the home icon before/after.\nI think if it is there it should be permanently visible. If was just a quick draft to explain the rough thought. \n\n> How does this work for contexts in which the filesystem of the notebook server isn't the same as the one displayed in the UI? Showing the CWD of the notebook server is misleading when running with PGContents, for example.\n\nOn PGContents or hosted solution we would keep current design. What I'm looking for is an explicit improvement for people that uses things like the anaconda launcher. \n What directory does the anaconda launcher use? How does the user pick it?\n\nOn Sun, Sep 13, 2015 at 2:24 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> My concern with adding it the way you suggest...\n> \n> I did not really though of the home icon before/after.\n> I think if it is there it should be permanently visible. If was just a\n> quick draft to explain the rough thought.\n> \n> How does this work for contexts in which the filesystem of the notebook\n> server isn't the same as the one displayed in the UI? Showing the CWD of\n> the notebook server is misleading when running with PGContents, for example.\n> \n> On PGContents or hosted solution we would keep current design. What I'm\n> looking for is an explicit improvement for people that uses things like the\n> anaconda launcher.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/422#issuecomment-139918887.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > What directory does the anaconda launcher use?\n\nGood question.\n\n> How does the user pick it?\n\nHe/She does not (yet). \nMatt Rocklin was suggesting that the launcher would actually pop up a dialog box \"where do you want your server to be launched from\", before actually starting the server. \nIssue is that then, user have no indication. New BIDS visitor have a Finder button that launch notebook in CWD shown by finder.\n It would be great if anaconda had that dialog - when working with students,\nI have found it very confusing that anaconda doesn't tell users where the\nserver has been opened - and traditionally, it choose different locations\non mac and windows :(\n\nOn Sun, Sep 13, 2015 at 2:34 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> What directory does the anaconda launcher use?\n> \n> Good question.\n> \n> How does the user pick it?\n> \n> He/She does not (yet).\n> Matt Rocklin was suggesting that the launcher would actually pop up a\n> dialog box \"where do you want your server to be launched from\", before\n> actually starting the server.\n> Issue is that then, user have no indication. New BIDS visitor have a\n> Finder button that launch notebook in CWD shown by finder.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/422#issuecomment-139919321.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","LGTM, failing test just hanged...\n","Hmm, travis looks grumpy with the js/tree tests on this...\n\nOn Mon, Sep 14, 2015 at 5:45 AM, Min RK notifications@github.com wrote:\n\n> avoids bad custom.js preventing initialization.\n> \n> ## closes #415 https://github.com/jupyter/notebook/issues/415\n> \n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/jupyter/notebook/pull/424\n> Commit Summary\n> - use events.on for notebook first-load\n> - catch errors in app_initialized callbacks\n> \n> File Changes\n> - _M_ notebook/static/notebook/js/main.js\n>   https://github.com/jupyter/notebook/pull/424/files#diff-0 (14)\n> \n> Patch Links:\n> - https://github.com/jupyter/notebook/pull/424.patch\n> - https://github.com/jupyter/notebook/pull/424.diff\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/424.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Grumpy travis seem to have missed his coffee this morning. \nRelaunching tests. \n ok, TravisCI took :coffee: ... and code seem OK to me.\n","I think you mean 1.0 of Jupyter ? (Notebook is 4.0, but details,  details) \n\nIn 4.0 (notebook) you can use Shift-J/K to select multiple cells and Shift-M will merge all the selected cells.\n\n![mergeme](https://cloud.githubusercontent.com/assets/335567/9855321/7abdc97c-5ac2-11e5-821f-31b9af55326d.gif)\n Good to know, I also though it was a bug. @Carreu is there any existing documentation for the notebook UI?\n @Carreau, as a user I totally missed this because I didn't realize the shortcut help dialog in the notebook has an hidden scrollbar showing more shortcuts.\n Is there a way we can make Shift-M still work like it used to? I don't see why disabling it completely unless the user presses Shift-J/K is a good interface. If there's only one cell selected, why not do what it always used to do (merge below)? \n\nThe reason I find it not intuitive is that the 'extend cell selection above/below' hotkey isn't really an option an user would look for if they didn't know what it did beforehand, especially since it's not part of any menu items either.\n @mirage007, this has been already proposed: https://github.com/jupyter/notebook/issues/509, please follow up there.\n","Looks good, feel free to merge after tests pass.\n This will affect `#header` on editor, and tree page. I checked it's ok manually, but can you think of any other places where it might have an effect ?\n I can't think of any others.\n","Sad Travis :(\n > Sad Travis :(\n\nYou know you can head to the travis page and restart just the failing test ?\n","@willingc that look that something you might be good at, want to have a look ?\n @Carreau Taking a look at this [public_server.rst](https://github.com/jupyter/notebook/blob/master/docs/source/public_server.rst). A couple of questions:\n- Is the goal to improve the docs on creating a self-signed cert and the gotchas that you may face when creating?\n- When using the notebook with a self-signed cert `--certfile=mycert.pem`, the browser will likely complain that it's an unsafe action and ask to return to safety. What is our typical response to the user on what to do?\n- Are both the `.rst` file or the `.ipynb` documents being used by users to create and use a cert? Or is one doc a legacy doc and the other the doc that will be used going forward?\n > Is the goal to improve the docs on creating a self-signed cert and the gotchas that you may face when creating?\n\nThat's one goal if possible but not obligatory. \n\n> When using the notebook with a self-signed cert --certfile=mycert.pem, the browser will likely complain that it's an unsafe action and ask to return to safety. What is our typical response to the user on what to do?\n\nThat we are aware, and even self signed is better than no certificate at all if you don't want people to snoop or modify what information on the wire.\n\n> Are both the .rst file or the .ipynb documents being used by users to create and use a cert? Or is one doc a legacy doc and the other the doc that will be used going forward?\n\nI think the rst is older. I think we can keep the `.ipynb` I just want to make sure all the info is on the one we keep whichever you think is fit. \n\n@rgbkrk, @minrk any other thoughts on that ? \n I think this doc makes more sense as plain rst, but I don't feel strongly about which one we keep. I suspect there's information in both that should be merged into whichever one.\n > When using the notebook with a self-signed cert --certfile=mycert.pem, the browser will likely complain that it's an unsafe action and ask to return to safety. What is our typical response to the user on what to do?\n\nWe should link people to a solid resource for adding their (trusted) self signed certs to their system. This applies for Firefox, Chrome, and IE. Safari on the other hand is pretty much a non-starter. IIRC, self signed certs with Safari don't work with websockets for some reason.\n > self signed certs with Safari don't work with websockets for some reason.\n\nSafari doesn't allow websocket connections to _untrusted_ certs (self-signed or otherwise). _Trusted_ self-signed certs work fine.\n I will merge the content from both docs and look for a solid resource or two on creating trusted self-signed certs. I will probably use rst for the doc. As for the ipynb, I will try to replicate the content of the rst in the notebook. I'll also add a note and link to the top of the notebook that the rst has the most up to date information.\n #443 was a first step toward that, I left 3 minor comments/questions in there to address. \n","unfortunately this looks like a chrome rendering bug. As soon as you trigger a redraw (open dev tools, or resize the window most of the time) the css computation is done correctly. So I doubt there is anything that we can do. \n\n@rgbkrk and @jdfreder you have played with webComponents. Ideas ?\n I haven't played with webComponents in the notebook specifically, and @rgbkrk has much more experience with webComponents, but my gut tells me your initial diagnosis is correct.  This seems like a chrome bug.  \n I'm not sure there is anything we can do, bump as 4.x\n What do you think about this one  @lbustelo?\n I can confirm the behavior that @deedubbu describes above. Here is a bit more information of what I noticed.\n\nI'm going to refer as the `link cell` the cell that contains the  `<link rel='import'>`\n1. Cells below the `the link cell` are affected. Cells above the `link cell` seem to render fine.\n2. It seems that chrome holds of rendering any cells after the `link cell`. I can see this by placing a breakpoint at `CodeCell.prototype.create_element`. When there is no `link cell`, you can see the browser rendering the cell after each iteration call to `create_element`. When there is a `link cell`, you can see the 'link cell' and any cell above render after completing the call to `create_element`, but the cells afters don't show up until later and without `min-height` set to the `CodeMirror-scroll` element.\n\nIt does seem like Chrome is making changes to its rendering when a `<link rel='import'>` is added. Any attempt to fix this would probably include experimenting with rendering each cell on separate event loop.\n Possibly related to this is [this notebook](http://nbviewer.jupyter.org/github/garth-wells/fenics-x3dom/blob/master/DOLFIN_X3DOM.ipynb) not properly displaying its output (the last should have color) in nbconvert output, but working in the live notebook.\n Reported here now:\nhttps://bugs.chromium.org/p/chromium/issues/detail?id=663288\n Chromium devs have looked into the dolfin x3dom notebook example (see post from @minrk above) which is a bug in the javascript. They state this issue is separate and request a new issue opened with an updated reproducible case if they are to look into it. Is there anything for us to fix on this? The notebook min posted above Apr 13 is not relevant here, that was a bug in x3dom which is now fixed. OK, then it sounds like there isn't an issue in notebook to be fixed here. If I'm wrong about this, we can reopen it. @takluyver I can still recreate on try.jupyter.org using Chrome 55. It may be that there is no way of fixing this in the Notebook.\r\n\r\n<img width=\"1235\" alt=\"screen shot 2017-02-03 at 3 58 20 pm\" src=\"https://cloud.githubusercontent.com/assets/2474841/22610161/bffebc6a-ea29-11e6-8b94-c8887670cb8b.png\">\r\n Right, my understanding of the consensus was that it's an issue in Chrome. Browsers are full of bugs! Not sure it is ok to close this even if the fix will eventually land on chrome. This is very prevalent when using declarative widgets and is related to how the notebook loads cells on refresh. \r\n\r\nWe should either keep open while waiting for chrome to fix or investigate how to remediate in notebook cell loading code.  Ok","grr, accidentally deleting my branches.\n","Do you see any error messages in the javascript console (View > Developer > Javascript Console in Chrome)?\n I run the notebook in Safari, is there any equivalent?\n In Safari it is 'Develop > Show Error Console' (Develop menu may be off, in which case check 'Preferences > Advanced > Show Develop menu'\n I am having the same issue. This is what I get from teh javascript console in Chrome:\n![ipython_notebook](https://cloud.githubusercontent.com/assets/452422/10107345/6cbf4ca0-6388-11e5-94cf-60ec601fb606.jpg)\n I click on the :88/custom/custom.js?[...] link I see my custom.js file from when I installed the TOC extension from minrk. Specifically these lines:\n\n// Load Table of Contents Extension \n// Found here: https://github.com/minrk/ipython_extensions\n$([IPython.events]).on(\"app_initialized.NotebookApp\", function () {\n    IPython.load_extensions(\"toc\");\n});\n\nHowever I have removed these lines from my current custom.js file. So why is chrome/ipython notebook still trying to load the old version?\n\nThank you\n So somehow those same lines:\n\n// Load Table of Contents Extension \n// Found here: https://github.com/minrk/ipython_extensions\n$([IPython.events]).on(\"app_initialized.NotebookApp\", function () {\nIPython.load_extensions(\"toc\");\n});\n\nAlso made it into ~/.jupyter/custom/custom.js\n\nSo when I deleted those lines from there it fixed the problem. \n Thank you. Sorry for the slow reply. Here is my error message:\n![ipython_error_message](https://cloud.githubusercontent.com/assets/8447235/10108750/b0fa6ff8-63ba-11e5-80a0-c88d5d3f94f3.png)\n I had different yet similar problems with safari. I suggest clearing your localhost/127.0.0.0 caches in Preferences > Privacy > Cookies and website data - Details \n Thank you! I tried that, but it didn't help. Will go back to running the earlier version of the notebook for now. If anyone needs any additional information from me please let me know.\n I've seen this 404 error a few times and in my case it was related to an extension installed before the migration (in particular the TOC extension).\n\n@Sjnjerak do you use any extension?\n I need to add that removing the extension code from the custom.js fixed the problem.\n @tritemio thanks, then I think this is fixed by #424\n","I wrote the WrappedError implementation.  I never display it to the user.  It's only ever logged to the console.  It maintains a nice stack, which is lost in complex promise operations.  In the widgets we use `catch` and `then` extensively.\n\nIf you need to display an error, I'd continue logging the error to the console with the stack but additionally display a human digestible error, depending on the context.\n Done. \n This looks good to me, I'm waiting to see what Mr. Travis thinks...\n Thanks @Carreau !\n Thanks for review on tips !\n","it runs good on my local laptop .\nipthon version 4.1.1\njupyter --version 4.0.6\n\nwhen I use jupyter  behind a Nginx Proxy I found( when i click to create a Terminal on the jupter web pages)  it does not work well, and here the exceptions log\n\nhow can i fix it \n\n```\n[E 07:15:01.635 NotebookApp] Uncaught exception GET /terminals/websocket/1 (10.131.16.58)\n    HTTPServerRequest(protocol='http', host='jupyter.hadoop.heracles.creditease.corp', method='GET', uri='/terminals/websocket/1', version='HTTP/1.0', remote_ip='10.131.16.58', headers={'Origin': 'http://jupyter.hadoop.heracles.creditease.corp', 'Accept-Language': 'en,zh-CN;q=0.8,zh;q=0.6,zh-TW;q=0.4', 'Accept-Encoding': 'gzip, deflate, sdch', 'X-Forwarded-For': '10.106.0.111', 'Sec-Websocket-Version': '13', 'Host': 'jupyter.hadoop.heracles.creditease.corp', 'Sec-Websocket-Key': 'XGLpJ5YvwOGFYnQfX6J5Vg==', 'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/48.0.2564.109 Safari/537.36', 'Connection': 'close', 'Cookie': 'lzstat_uv=12308132433337636819|3371939', 'Pragma': 'no-cache', 'Cache-Control': 'no-cache', 'X-Real-Ip': '10.106.0.111', 'Sec-Websocket-Extensions': 'permessage-deflate; client_max_window_bits'})\n    Traceback (most recent call last):\n      File \"/usr/local/anaconda2/lib/python2.7/site-packages/tornado/web.py\", line 1401, in _stack_context_handle_exception\n        raise_exc_info((type, value, traceback))\n      File \"/usr/local/anaconda2/lib/python2.7/site-packages/tornado/web.py\", line 1603, in wrapper\n        result = method(self, *args, **kwargs)\n      File \"/usr/local/anaconda2/lib/python2.7/site-packages/tornado/websocket.py\", line 148, in get\n        self.finish(log_msg)\n      File \"/usr/local/anaconda2/lib/python2.7/site-packages/tornado/websocket.py\", line 391, in _disallow_for_websocket\n        method(self, *args, **kwargs)\n      File \"/usr/local/anaconda2/lib/python2.7/site-packages/tornado/web.py\", line 934, in finish\n        self._log()\n    TypeError: 'Logger' object is not callable\n[E 07:15:01.636 NotebookApp] Cannot send error response after headers written\n[E 07:15:01.637 NotebookApp] Failed to flush partial response\n    Traceback (most recent call last):\n      File \"/usr/local/anaconda2/lib/python2.7/site-packages/tornado/web.py\", line 960, in send_error\n        self.finish()\n      File \"/usr/local/anaconda2/lib/python2.7/site-packages/tornado/websocket.py\", line 391, in _disallow_for_websocket\n        method(self, *args, **kwargs)\n      File \"/usr/local/anaconda2/lib/python2.7/site-packages/tornado/web.py\", line 934, in finish\n        self._log()\n    TypeError: 'Logger' object is not callable\n```\n What does `jupyter notebook --version` give you? If it's less than 4.1, upgrade.\n `jupyter notebook --version`  do returns 4.1, the problem occurs  when running a jupyter behind a nginx proxy  only.\nIt runs good on my local computer.\n cc @rgbkrk for nginx ideas. Can you think of any configuration that might be missing?\n\n@sunlizhe can you share your nginx version and relevant nginx config?\n ```\nuser  nginx nginx;\n\nworker_processes 4;\nworker_rlimit_nofile 65535; \nerror_log  /opt/yrd_logs/nginx/error.log notice;\npid        /var/run/nginx.pid;\nevents {\n    use epoll;\n    worker_connections  51200;\n}\nhttp {\n    include       /etc/nginx/mime.types;\n    default_type  application/octet-stream;\n    log_format main '[$time_local] $remote_addr $server_name \"$request\" $status $request_length $body_bytes_sent $request_time $upstream_response_time $upstream_addr $connection \"$http_user_agent\"';\n    access_log  /dev/null;\n    keepalive_timeout  600;\n    server_names_hash_bucket_size 128;\n    client_header_buffer_size 128k;\n    large_client_header_buffers 4 256k;\n    client_header_timeout  10m;\n    client_body_timeout    10m;\n    send_timeout           10m;\n    sendfile                on;\n    tcp_nopush     on;\n    tcp_nodelay    on;\n    client_max_body_size 50m;\n    client_body_buffer_size 50m;\n    proxy_connect_timeout 300;\n    proxy_send_timeout 300;\n    proxy_read_timeout 600;\n    proxy_buffer_size 4k;\n    proxy_buffers 8 32k;\n    proxy_busy_buffers_size 64k;\n    proxy_temp_file_write_size 64k;\n    proxy_temp_path  /dev/shm/proxy_temp;\n    fastcgi_temp_path  /dev/shm/fastcgi_temp;\n    client_body_temp_path  /dev/shm/client_body_temp;\n    gzip on;\n    gzip_min_length 1k;\n    gzip_buffers     4 16k;\n    gzip_comp_level 2;\n    gzip_http_version 1.1;\n    gzip_types text/plain application/x-javascript text/css application/xml;\n    gzip_vary on;\n    server {\n        listen *:80 default;\n        server_name _ \"\";\n        return 444;\n        access_log   off;\n    }\n    include /etc/nginx/conf.d/*.conf;\n}\n\nserver\n      {\n    listen  80;\n    server_name  jupyter.hadoop.heracles.creditease.corp;\n    charset utf-8;\n    access_log /opt/yrd_logs/nginx/jupyter_hadoop_heracles_creditease_access.log main;\n    error_log  /opt/yrd_logs/nginx/jupyter_hadoop_heracles_creditease_error.log;\n    root /opt/yrd_web;\n    index index.html;\n\n           location /  {\n                       proxy_pass        http://jupyter_hadoop_heracles;\n                       proxy_set_header   Host             $host;\n                       proxy_set_header   X-Real-IP        $remote_addr;\n                       proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;\n                       add_header Access-Control-Allow-Origin *;\n                       add_header Access-Control-Allow-Headers X-Requested-With;\n                       add_header Access-Control-Allow-Methods GET,POST,OPTIONS;\n\n                       client_max_body_size 100m;\n              }\n\n          error_page  500 502 503 504  /50x.html;\n          location = /50x.html {\n            root   html/err;\n          }\n      }\nupstream jupyter_hadoop_heracles {\n    server 10.130.81.183:8889;\n    }\n```\n\nnginx version: nginx/1.8.0\n on the website of jupter notebook I found the following description\n\n'To function correctly, the firewall on the computer running the jupyter notebook server must be configured to allow connections from client machines on the access port c.NotebookApp.port set in :file:jupyter_notebook_config.py port to allow connections to the web interface. The firewall must also allow connections from 127.0.0.1 (localhost) on ports from 49152 to 65535. These ports are used by the server to communicate with the notebook kernels. The kernel communication ports are chosen randomly by ZeroMQ, and may require multiple connections per kernel, so a large range of ports must be accessible'\n\ndoes it means  there is a ZeroMQ client (mybe base javascript ) need connect to the jupyter notebook server via posts from 49152 to 65535 when using 'New--- Terminal' function on the web page side ? so its may be the reason of this problem?\n No, by the time it gets to nginx, this is just http over a single port. The ZeroMQ stuff is between the server and its kernels.\n",":+1: once Travis says OK. `<pedant>` `/` is slash, `\\` is backslash `</pedant>`.\n Fixed that.\n Thanks!\n","#477\n","Travis happy. \n","if you'r superfast you can add a line into the [changelog](https://github.com/jupyter/notebook/blob/master/docs/source/changelog.rst)  for noticible features. \n @Carreau \u2014 you are correct! Both @willingc and this cute kitty agree with you.\n\n![8325_8_site](https://cloud.githubusercontent.com/assets/1857993/9892573/0ae21c6c-5bc5-11e5-8f73-647601e41035.jpeg)\n I don't think we are strictly allowed to remove things in minor releases. @Carreau does `--no-mathjax` not work in 4.0?\n PS @captainsafia issue cross-linking doesn't work in titles, so can you instead reference issues in the body in the future? That way, we get auto-closing/linking of issues on the GitHub pages.\n It's accepted i 4.0 but has in practice no effects and lead to the confusion/bug report of mathjax beeing made optional on Arch. \n > @captainsafia issue cross-linking doesn't work in titles\n\nAh yes, thank you for letting me know! I usually put it in the commit messages, but I forgot this time.\n So @minrk, do you think we should just leave the flag for now and just issue a DeprecationWarning ?\n The main reason I see for leaving `--no-mathjax` is that there could possibly be a deployment with security concerns about mathjax js, as there have been in the past. Re: #323, #352 I don't think it should be possible to _install_ the notebook without mathjax, and such an installation should rightly be considered broken and incomplete. But it is conceivable to allow it to be _used_ without mathjax. I don't feel too strongly about it, though, so if we want to remove the ability for it to run without mathjax, I'm okay with that proposal (in which case Deprecation is appropriate), though I would recommend bringing that up on the list in case there is anyone relying on it now.\n > But it is conceivable to allow it to be used without mathjax\n\nThis is a very valid point... I think we should left the option for these cases...\n > This is a very valid point... I think we should left the option for these cases...\n\nOk, fait enough. \n\nSo do we want to get rid of the flag at all ? If no let's change #355 title. \n (bumping this PR to 5.x if we decide to remove Mathjax anyway)\n > if we decide to remove Mathjax anyway\n\nDo you just mean the flag or Mathjax entirely? If the latter, what is the alternative for future reference? Thanks.\n > Do you just mean the flag or Mathjax entirely?\n\nNo just the flag. We wont' remove Mathjax, \n Yeah, this should wait until 5.0.\n Now that we are on our way to 5.x, can we rebase than and decide wether or not we want to keep the --no-mathjax  flag ?\n Still needs rebase.\n\nI'm going to go with: Go with deprecation cycle, leave the flag (that does nothing) but have it print a warning. If by 5.0 someone has complained we can re-add it.\n OK. That seems reasonable to me. I'll update tomorrow.\n\nOn Saturday, February 6, 2016, Matthias Bussonnier notifications@github.com\nwrote:\n\n> Still needs rebase.\n> \n> I'm going to go with: Go with deprecation cycle, leave the flag (that does\n> nothing) but have it print a warning. If by 5.0 nobody has complained we\n> can re-add it.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/436#issuecomment-180941289.\n > OK. That seems reasonable to me. I'll update tomorrow.\n\n@captainsafia want to take care of that once you get your new laptop? \nOr should we assign an undergrad ?\n Not sure when the new laptop would be coming so it might be better to give it to a new undergrad so they can learn a little bit too. \n\n> On Feb 22, 2016, at 1:52 PM, Matthias Bussonnier notifications@github.com wrote:\n> \n> OK. That seems reasonable to me. I'll update tomorrow.\n> \n> @captainsafia want to take care of that once you get your new laptop? \n> Or should we assign an undergrad ?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Tagging as `closed-PR`, and closing as this is seem to have stalled a bit. \nThis is just to keep the PR queue a bit shorter and focusing on what is actually worked on.\nFeel free to reopen, (or ask for reopening if you don't have enough right to do so). \nIf you were not the original author, and want to revive this, please feel free to do so. \n\nAlso, we are doing our best to enable people to learn how to contribute to the project, and get commits in. If you are missing time or have any other issues that prevent you to work on that, please feel free to tell us, we can try to build on top of what you did. \n\nThanks a lot and looking forward to see this moving forward again.\n","I would say a regression test would be nice, but I'll leave that up to you, seeing that our JS tests may slowly die when we start npm installing components like jupyter-js-services which are self tested.  Let me know if you want to merge without a unit test...\n Ok, I missunderstood the `one`.\n","Marking as 4.1 thanks for the report and detailed analysis. \n Thanks!\n\nOn Tue, Sep 15, 2015 at 8:02 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Marking as 4.1 thanks for the report and detailed analysis.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/438#issuecomment-140611305.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n And double-bonus, already fixed:\n\nIPython 3:\n\n![screen shot 2015-09-16 at 10 51 29](https://cloud.githubusercontent.com/assets/151929/9900424/01110eb8-5c61-11e5-8cac-c5f20549b44b.PNG)\n\nNotebook 4.1-dev:\n\n![screen shot 2015-09-16 at 10 51 51](https://cloud.githubusercontent.com/assets/151929/9900429/0981a6e8-5c61-11e5-9b87-121f17095ff9.PNG)\n Thanks for looking into this.\n","Could this also be backported to 3.X? Thanks!\n","I switched travis back to regular install, so if files are left out the tests should fail again.\n","This was me being lazy, sorry. Since it is a restart, I think it does need confirmation just like other restarts. Instead of skipping, I think alternative to making it a button is giving it its own dialog.\n Should be improved in #465\n",":sparkles: \n","> TODO: Update second half of public_server.rst. Migrate any content from ipynb file that may enhance the rst doc.\n\nin this PR or do you prefer to merge and iterate ?\n @Carreau I am cool with either approach. Merge and iterate might be easier for a reviewer. Your call :)\n Edited the second half of public_server.rst and migrated content from ipynb file to the rst doc.\n\nPlease double check the code example in lines 149-163 in the new rst file. In particular, the setting of the IP address and use of domain name.\n\nI'm going to add a line in the ipynb that refers to the rst file as the most up to date resource on securing notebook server and running a public notebook server.\n Fixes #428.\n\nReady for review and comments.\n 3 minor points. \nMerging, we can iterate on the merged version !\n\nThanks !\n","o_O\n\nThanks !\n","@Carreau \u2014 Yeah, that was one of those things that made sense in the moment (all the other `click` listeners invoke a function on the `Notebook` prototype, so should this one!), but the complexity is apparent in hindsight. \n > all the other click listeners invoke a function on the Notebook prototype, so should this one!\n\nthat's changing in jupyter/notebook#329 \n Thanks !\n","@fehiepsi What do you get from `conda list`?\n Here is my result of `conda list`\n\n```\n# packages in environment at /home/fehiepsi/miniconda3:\n#\ncertifi                   14.05.14                 py34_0  \nconda                     3.17.0                   py34_0  \nconda-env                 2.4.2                    py34_0  \ndecorator                 4.0.2                    py34_0  \nfontconfig                2.11.1                        4  \nfreetype                  2.5.2                         2  \nipykernel                 4.0.3                    py34_0  \nipython                   4.0.0                    py34_0  \nipython-genutils          0.1.0                     <pip>\nipython-notebook          4.0.4                    py34_0  \nipython_genutils          0.1.0                    py34_0  \nipywidgets                4.0.2                    py34_0  \njinja2                    2.8                      py34_0  \njsonschema                2.4.0                    py34_0  \njupyter                   1.0.0                    py34_0  \njupyter-client            4.0.0                     <pip>\njupyter-console           4.0.2                     <pip>\njupyter-core              4.0.4                     <pip>\njupyter_client            4.0.0                    py34_0  \njupyter_console           4.0.2                    py34_0  \njupyter_core              4.0.4                    py34_0  \nlibgfortran               1.0                           0  \nlibpng                    1.6.17                        0  \nlibsodium                 0.4.5                         0  \nlibxml2                   2.9.2                         0  \nmarkupsafe                0.23                     py34_0  \nmatplotlib                1.4.3                np19py34_2  \nmistune                   0.7.1                    py34_0  \nnbconvert                 4.0.0                    py34_0  \nnbformat                  4.0.0                    py34_0  \nnotebook                  4.0.4                    py34_0  \nnumpy                     1.9.2                    py34_1  \nopenblas                  0.2.14                        1  \nopenssl                   1.0.1k                        1  \npath.py                   7.6.1                    py34_0  \npexpect                   3.3                      py34_0  \npickleshare               0.5                      py34_0  \npip                       7.1.2                    py34_0  \nptyprocess                0.4                      py34_0  \npycosat                   0.6.1                    py34_0  \npygments                  2.0.2                    py34_0  \npyparsing                 2.0.3                    py34_0  \npyqt                      4.11.3                   py34_1  \npython                    3.4.3                         1  \npython-dateutil           2.4.2                    py34_0  \npytz                      2015.4                   py34_0  \npyyaml                    3.11                     py34_1  \npyzmq                     14.7.0                   py34_0  \nqt                        4.8.6                         3  \nqtconsole                 4.0.1                    py34_0  \nreadline                  6.2                           2  \nrequests                  2.7.0                    py34_0  \nsetuptools                18.1                     py34_0  \nsimplegeneric             0.8.1                    py34_0  \nsip                       4.16.5                   py34_0  \nsix                       1.9.0                    py34_0  \nsqlite                    3.8.4.1                       1  \nsystem                    5.8                           2  \nterminado                 0.5                      py34_0  \ntk                        8.5.18                        0  \ntornado                   4.2.1                    py34_0  \ntraitlets                 4.0.0                    py34_0  \nwheel                     0.24.0                   py34_0  \nxz                        5.0.5                         0  \nyaml                      0.1.6                         0  \nzeromq                    4.0.5                         0  \nzlib                      1.2.8                         0\n```\n\nThe result for `which jupyter` and `which ipython`:\n\n```\nfehiepsi@binhyen:~$ which jupyter\n/home/fehiepsi/miniconda3/bin/jupyter\nfehiepsi@binhyen:~$ which ipython\n/home/fehiepsi/miniconda3/bin/ipython\n```\n By the way, except the command `jupyter notebook` which gives the above error, the other commands such that `jupyter-notebook` or `ipython notebook` run fine. So I think that this is just a small issue and can be fixed.\n I bumped into this issue during a PR to IJulia. The issue can be reproduced by the following julia code\n\n``` julia\nPkg.clone(\"Conda\")\nPkg.build(\"Conda\")\nusing Conda\nConda.add(\"jupyter\")\nrun(`$(joinpath(Conda.SCRIPTDIR,\"jupyter\")) notebook`) # errors\nrun(`$(joinpath(Conda.SCRIPTDIR,\"jupyter\")) kernelspec --version`) # do also error\n```\n Some more info I can only reproduce it on Windows. But I have seen it on travis at this commit https://travis-ci.org/Luthaf/Conda.jl/builds/81279978\n @fehiepsi do you still get this if you upgrade jupyter_core to 4.0.6? @dhoegh I think I know what's up on Travis, it's probably that `jupyter-kernelspec` isn't on PATH, and we should be able to fix that by ensuring that the dir containing `jupyter` is on PATH when dispatching to subcommands.\n I ran into this issue using a private miniconda distribution in the `Conda` package for julia. `jupyter` or `jupyter-kernelspec` was not in PATH but `jupyter` was referenced to with an absolute path to the `jupyter` executable. See https://github.com/JuliaLang/IJulia.jl/blob/855235f2ec50de2e7c792474ac56780666135747/deps/build.jl#L36.  \n Yup, that should be fixable pretty easily. I've got a working fix right now, I just need to make sure it doesn't do the wrong thing when `python -m` is used.\n @dhoegh I opened jupyter/jupyter_core#62 which should fix that case. It's possible the Windows issue is the same.\n @minrk I have update jupyter_core to version 4.0.6 but still get the same issue. The command with full path fails in terminal:\n\n```\nfehiepsi@binhyen:~$ /home/fehiepsi/miniconda3/envs/notebook/bin/jupyter notebook\njupyter: 'notebook' is not a Jupyter command\n```\n @fehiepsi that looks like it's the same PATH issue @dhoegh is seeing and is fixed by jupyter/jupyter_core#62.\n @minrk - are you okay with closing this?\n On windows, using python 2.7, after installing jupyter via pip:\n- the jupyter dir is actually on the PATH\n- 'jupyter-notebook' works as expected\n- 'jupyter notebook' fails with \"jupyter: 'notebook' is not a Jupyter command\"\n @stephane-martin `pip list`?\n @stephane-martin : me too with the newest version of anaconda; please wait for jupyter 4.1 I think :)\n\n```\n# packages in environment at /home/fehiepsi/miniconda3/envs/notebook:\n#\ncertifi                   2015.9.6.2               py35_0  \ndecorator                 4.0.4                    py35_0  \nfontconfig                2.11.1                        5  \nfreetype                  2.5.5                         0  \nipykernel                 4.1.1                    py35_0  \nipython                   4.0.0                    py35_0  \nipython-genutils          0.1.0                     <pip>\nipython_genutils          0.1.0                    py35_0  \nipywidgets                4.1.0                    py35_0  \njinja2                    2.8                      py35_0  \njsonschema                2.4.0                    py35_0  \njupyter                   1.0.0                    py35_0  \njupyter-client            4.1.1                     <pip>\njupyter-console           4.0.3                     <pip>\njupyter-core              4.0.6                     <pip>\njupyter_client            4.1.1                    py35_0  \njupyter_console           4.0.3                    py35_0  \njupyter_core              4.0.6                    py35_0  \nlibgfortran               1.0                           0  \nlibpng                    1.6.17                        0  \nlibsodium                 1.0.3                         0  \nlibxml2                   2.9.2                         0  \nllvmlite                  0.8.0                    py35_0  \nmarkupsafe                0.23                     py35_0  \nmatplotlib                1.4.3               np110py35_2  \nmistune                   0.7.1                    py35_0  \nnbconvert                 4.0.0                    py35_0  \nnbformat                  4.0.1                    py35_0  \nnotebook                  4.0.6                    py35_0  \nnumba                     0.22.1              np110py35_0  \nnumpy                     1.10.1                   py35_0  \nopenblas                  0.2.14                        3  \nopenssl                   1.0.2d                        0  \npath.py                   8.1.2                    py35_0  \npexpect                   3.3                      py35_0  \npickleshare               0.5                      py35_0  \npip                       7.1.2                    py35_0  \nptyprocess                0.5                      py35_0  \npygments                  2.0.2                    py35_0  \npyparsing                 2.0.3                    py35_0  \npyqt                      4.11.4                   py35_0  \npython                    3.5.0                         1  \npython-dateutil           2.4.2                    py35_0  \npytz                      2015.7                   py35_0  \npyzmq                     14.7.0                   py35_1  \nqt                        4.8.7                         0  \nqtconsole                 4.1.0                    py35_0  \nreadline                  6.2                           2  \nsetuptools                18.4                     py35_0  \nsimplegeneric             0.8.1                    py35_0  \nsip                       4.16.9                   py35_0  \nsix                       1.10.0                   py35_0  \nsqlite                    3.8.4.1                       1  \nterminado                 0.5                      py35_1  \ntk                        8.5.18                        0  \ntornado                   4.2.1                    py35_1  \ntraitlets                 4.0.0                    py35_0  \nwheel                     0.26.0                   py35_1  \nxz                        5.0.5                         0  \nzeromq                    4.1.3                         0  \nzlib                      1.2.8                         0\n```\n I got the same issue. Python 2.7, Mac OSX, python27, iPython, jupyter, jupiter_core all installed from pip. iPython notebook command is fine. Python is installed from home-brew.\n\nI don't know why jupyter wants to dictate iPython so aggressively, since iPython notebook keeps giving me feedback saying \"this command is going to be dropped \" but the issue still existed and doesn't match what jupyter documentation. \n Does `jupyter-notebook` (with a hyphen instead of a space) work?\n @Hualin where do you find `jupyter-notebook`? What do you get from `pip list`?\n\nIf you are using Python from Python.org, make sure that you have `/Library/Frameworks/Python.framework/Versions/2.7/bin` on your PATH, since that's where pip will put executables if you are using that Python distribution.\n @minrk python27 is installed from home-brew, all other python package if possible are all installed from pip. iPython Notebook and all other cmds work fine, without any problem. Jupyter is installed from pip and I followed the docs exactly, not sure any thing I should do apart from follow the docs otherwise the docs is invalid in the first place. \n\nI am sure pip list get all the jupyter package I should have to fire jupyter notebook. jupyter-core and jupyter-notebook is indeed in the path you mentioned but not in the main path where I fire up all the cmd, which is in usr/local/bin, the routine I follow from Home-brew. \n\nthe problem is fixed by adding symbolic link from python frame path to usr/local/bin, which I am afraid I might have to do it every time I upgrade jupyter.\n\nmany thanks for your reply.\n while the problem is why `jupyter` is in usr/local/bin but not `jupiter-notebook`? very strange. it is however kind of confusing for me from the beginning of Jupyter, that I am not sure how many package I should install with prefix of Jupyter, like Jupyter-kernel, jupyter-XXX about 5 -10 packages in PyPI and the docs in early stage is very much brief.\n\nI think it is very personal feeling for me, that I am not a fan of Jupyter, from its early confusion, every time iPython pop up the message of saying the notebook is going to be dropped, and this tiny struggle. The project is very ambitious and progress very fast and sometimes aggressively which is the reason why I don't like it. not everybody appreciates to understand the glorious future vision of Jupyter and why not just keep iPython notebook unaffected? \n I'm equally puzzled why your `jupyter` command is installed in a different place from `jupyter-notebook`. As far as I know, they're both specified in the same way and installed by pip, so they should both end up in the same place.\n\nYou probably don't need to worry about the different jupyter- packages: installing the top level `jupyter` package should automatically get all the bits you need.\n > why not just keep iPython notebook unaffected?\n\nIf you want to keep IPython notebook unaffected, you can pin IPython to the last version with the notebook:\n\n```\npip install \"ipython<4\"\n```\n\nI'm sorry the transition is not going well for you. It is _extremely_ strange that the `jupyter-notebook` executable isn't in the same directory as the `jupyter` executable. The location of these files is up to pip, not the packages. Do you find a `jupyter-notebook` executable anywhere? Perhaps in `~/Library/Python/2.7/bin` or `~/.local`?\n\nI would expect reinstalling the notebook to fix this:\n\n```\npip uninstall notebook\npip install --upgrade notebook\n```\n\nBut I'm not sure how the file went missing in the first place.\n I am also having some odd issues as of a recent Jupyter install using pip3 on OS X 10.11. `jupyter` is not found anywhere in my path, although it is listed in the python 3.5 site-packages dir. \n\n`jupyter-notebook` seems to work fine on its own. As an aside, I cannot use it as an Apache PySpark driver. If I try to set `PYSPARK_DRIVER_PYTHON=jupyter-notebook`, I get an error :\n\n```\n[C 10:08:57.048 NotebookApp] No such file or directory: /Users/damien/work_folder/notebook\n```\n\nwhile the old setting `PYSPARK_DRIVER_PYTHON=ipython` with `PYSPARK_DRIVER_PYTHON_OPTS='notebook'` works perfectly.\n @damienstanton the `jupyter` command is provided by the package `jupyter_core`. Can you try uninstalling and reinstalling that to see if it fixes things?\n @takluyver Just to clarify, the uninstall/reinstall commands would be:\n\n```\npip3 uninstall jupyter\npip3 install jupyter\n```\n I was suggesting uninstalling and installing `jupyter_core`, not `jupyter`.\n\nThe `jupyter_core` package provides the `jupyter` command. All of the other Jupyter packages depend on this.\n\nThe `jupyter` package contains no code, but it depends on all of the jupyter pieces, so it's a quick way for people to install everything. However, I don't think uninstalling it with pip will affect anything else, so it probably won't fix a broken installation.\n @takluyver Thanks. Quick question: if one does `pip3 uninstall jupyter`, doesn't it uninstall everything, including `jupyter_core`? \n\nThen, `pip3 install --force-reinstall jupyter` would reinstall all including `jupyter_core`. Correct or not?\n I don't think pip uninstalls dependencies, so if you uninstall `jupyter`, I don't think that will remove anything else. I could be wrong, though.\n\n`--force-reinstall` may be enough to reinstall everything, so long as that works on dependencies as well.\n I also had the issue on osx with homebrew python installation, where `pip install jupyter` would not put `jupyter-notebook` in `/usr/local/bin` , while correctly installing other components. \n\nThe following, as recommended above, resolved the issue:\n`pip uninstall notebook`\n`pip install --upgrade notebook`\n I got mine working by deleting the `Library/Caches/pip/...` entries for Jupyter, then running `pip3 uninstall jupyter` followed by  `pip3 install --upgrade jupyter`.\n\nI believe the issue had something to do with a mismatched `jupyter_core` in my pip cache.\n I had the same problem on a Mac OSX el capitan using python3.5 installed from python.org. Reinstalling did not work. \nMy solution, which is not perfect, was to extend `PATH` to `/Library/Frameworks/Python.framework/Versions/3.5/bin/`. It seems that `jupyter notebook` requires the `jupyter-notebook` binary to be on the executables path. \n I am having the same issue on a fresh install on Arch Linux. I installed jupyter 4.1.0 from the repositories and the 'notebook' subcommand is not recognized.\n @juliohm can you do `which jupyter` and see if there is a `jupyter-notebook` in the same location?\n @takluyver there is no jupyter-notebook in the same location.\n I don't know how Arch installation works, but using pip or conda, there are three packages involved:\n- `jupyter`  is a ~empty package which depends on all the real Jupyter packages\n- `notebook` contains the `jupyter-notebook` script which launches the notebook application.\n- `jupyter_core` contains the `jupyter` script, which turns the subcommand `jupyter notebook` into a call to `jupyter-notebook`.\n\nIs it possible that you have only got the last of those installed instead of all three? \n @takluyver you were right, I needed to install another package `jupyter-notebook`. Everything is working now. Thank you.\n @mgrani I have a similar setup, but I moved jupyter-notebook to the `/usr/local/bin` directory.\n Can anyone help me debug this? I got the same error `jupyter: 'notebook' is not a Jupyter command`\n`which jupyter` I got `/usr/local/bin/jupyter`\n`which jupyter-notebook` I got `jupyter-notebook not found`\nI did `pip3 uninstall notebook` and `pip3 install --upgrade notebook`.\nThe last line after I did `pip3 install --upgrade notebook` is `Successfully installed notebook-4.2.3`, but I still got the error. \nThanks\n @coldray i'm guesting you have a mac? try moving the file `jupyter-notebook` to `/usr/local/bin/`. So that there is the `jupyter` and the `jupyter-notebook` files in that directory. I think the `jupyter` file needs the `jupyter-notebook` file to run the command `jupyter notebook`. I think the `pip3` command may have installed the `jupyter-notebook` in the wrong place. I use the command `pip3` as well.\n\nOr if that doesn't fix the problem try adding something like: `/Library/Frameworks/Python.framework/Versions/3.2/bin` to your `PATH`. Note that `3.2` is the python version I have.\n Had this issue on a Mac running Python 3 in a virtual env. Reinstalling notebook as recommended above resolved the issue. \r\n$ pip uninstall notebook\r\n$ pip install --upgrade notebook","Thanks. I'm still surprised this is failing, since all the variables should be unicode strings already. Can you add a debug statement that prints\n\n``` python\nprint(\"os_dir=%r, name=%r, os_path=%r\" % (os_dir, name, os_path))\n```\n\nand share the output for the failing directory?\n Here's what we print for the troublesome filename:\n\n```\nos_dir=u'/home/edd', name='.\\n    set document.color\\x1a\\xb0\\x7f\\xa6w', os_path=u'/home/edd/.systrace'\n```\n\nIs the problem that os.path.join expects to build an ascii string? If you look  at the types, `os_dir` is a unicode string, whereas name is not.\n\n```\nIn [25]: x\nOut[25]: '.\\n    set document.color\\x1a\\xb0\\x7f\\xa6w'\nIn [26]: os.path.join(\"\", x)\nOut[26]: '.\\n    set document.color\\x1a\\xb0\\x7f\\xa6w'\n\nIn [27]: os.path.join(u\"\", x)\n---------------------------------------------------------------------------\nUnicodeDecodeError                        Traceback (most recent call last)\n<ipython-input-27-239136892ae0> in <module>()\n----> 1 os.path.join(u\"\", x)\n\n/usr/local/lib/python2.7/posixpath.pyc in join(a, *p)\n     69             path = b\n     70         elif path == '' or path.endswith('/'):\n---> 71             path +=  b\n     72         else:\n     73             path += '/' + b\n\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xb0 in position 25: ordinal not in range(128)\n```\n What surprises me is that `name` is a str and not unicode, which it should be. What do you get from `os.listdir(u'.')`? And what is the full Python version? When I use Python 2.7.10, listdir returns the same type as its input.\n ```\n$ python2.7\nPython 2.7.10 (default, Sep  1 2015, 08:18:20) \n[GCC 4.2.1 20070719 ] on openbsd5\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import os\n>>> os.listdir(u'.')\n[u'.cvsrc', u'.Xdefaults', u'.cshrc', u'.ssh', ..., '.\\n    set document.color\\x1a\\xb0\\x7f\\xa6w', ...]\n>>> os.listdir('.')\n['.cvsrc', '.Xdefaults', '.cshrc', '.ssh', ..., '.\\n    set document.color\\x1a\\xb0\\x7f\\xa6w', ...]\n```\n\nIn the former case, all elements are unicode bar the problem element. Is it because the unicode codebases are invalid?\n @vext01 Thanks for investigating. In that case, I think this fix is fine as-is, but at least we know the affected case:\n- Python 2 + filenames that Python cannot decode from the filesystem (e.g. non-utf8).\n Thanks so much.\n","+1, and do we want to try the invert process @minrk was proposing, ie: \n\nCopy file to tempfile, keeping permsission, writing to old file new content, remove copy ? \n > Copy file to tempfile, keeping permission, writing to old file new content, remove copy ?\n\nI like the idea...\n  So if this were to fail mid operation, you'd be left with a corrupt .ipynb and a good .~ temp file?\n @jdfreder yes.\n Assuming the 'this' in question is #67, not this PR: it depends on the failure mode. If it fails in a way that raises an error in Python (such as running out of disk space), then the temp file should be renamed back to the regular .ipynb name - the save fails, and you're left with only the old copy. If it fails more dramatically, like the system suddenly dying mid-write, then yes, the .ipynb would be corrupt and the temp file should be a good copy of the previous save.\n Since it seems like #67 solved this, closing this PR.\n","Closing as duplicate of jupyter/nbconvert#99\n","Unfortunately, the way keyboard event works, it is difficult to get that right across browser/os/keyboard layout/user preference. Especially as this piece of code also handle multiple keypress for shortcuts.\n\nThe multiple undo stack is complex to implement, probably doable, but not that easy.\n\nCan you maybe change the repeat frequency of your keys to mitigate that ? The current refactor might allow to have bette undo at some point. \n","Sure, I would appreciate if this could be done after #329 that would conflict with such changes. \n (you can review/test #329 if you like)\n","Hello @rattrayalex, you can already configure the modes to be vim/emacs/sublime, see the different tips and receipes on the internet regarding custom.js and frontend config. \n\nThanks. \n Hi @Carreau , thanks for your note. This issue is in regards to enabling those options from the GUI (and/or by default), without needing to edit `custom.js`. I apologize for not being more clear. \n One of the problem with doing UI,  is that most of these config are from\nsublibraries, and there are literally an infinite amount of configuration\noption. So the UI will probably be a blank textfield.\n\nOn Thu, Sep 17, 2015 at 1:04 PM, Alex Rattray notifications@github.com\nwrote:\n\n> Hi @Carreau https://github.com/Carreau , thanks for your note. This\n> issue is in regards to enabling those options from the GUI, without needing\n> to edit custom.js.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/453#issuecomment-141210052.\n I'm just suggesting three buttons - Vim, Emacs, or Sublime. If that's too much clutter, maybe just making Sublime the default. \n\nDoes that make sense?\n > If that's too much clutter, maybe just making Sublime the default.\n\nThe problem is not that much the clutter but the slippery slope, if you add a UI element people assume it will switch live, which is more implementation, also you need to implement a dynamic module loading for keymap which is probably an afternoon of work + roughly 1h/week of support for questions and bug report. \n\nBut then why only keymap ? Why not indentUnits ? Indent with tabs instead of space ? visible tabs as now you want to know if you use tab ? if you have visible tabs, user request all visible characters to have a visible representation. \n\nOnly  looking at codemirror without plugin you get 20 configuration options which don't have more reason to not have an UI than another. Potentially with options that might differ in between code cell, and markdown cell. \n\nThat's only looking at codemirror. You can add notebook theme, folding/scrolling of output area, buttons in toolbar, etc...\n\nSo the line we define for now is: \"if you want to configure, you have to go through extension or write JSON/js by hand\". It is not definitive and if/when we have more manpower and people actually willing to write **and maintain** a genearal configuration panel we can reconsider. \n\nFor the time cost/benefit  ratio lean toward not doing it. \n Yeah, I definitely hear you on adding a UI element. The maintenance sounds like a pain. \n\nShould I open a separate issue to suggest making Sublime Text keybindings the default? I imagine it's a separate conversation. Here are some numbers though: http://stackoverflow.com/research/developer-survey-2015#tech-editor\n > Should I open a separate issue to suggest making Sublime Text keybindings the default?\n\nYou can try, but changing a default will \n\n1) Piss off people that now have the current keymap in their muscle memory and understand what we did. \n2) Confuse user that don't understand we can change keymap and why suddenly things don't work as before\n3) Force us to revise all potential conflict OS/Browser/Physical Layout to see if there is conflict. \n\nSo a change will most likely not happend soon if it happens.\n fair enough! oh well. \n","I think I can take a look at this as well. Feel free to assign me, @Carreau.\n @captainsafia I've unassigned you so that other people feel free to tackle this as well. If you want to take another look at it at some point, you're still welcome to.","Hmmm,  I see an error.  Was this fixed by #431 ?\n\n<img width=\"1265\" alt=\"screen shot 2015-09-29 at 4 06 20 pm\" src=\"https://cloud.githubusercontent.com/assets/3292874/10176695/3e3bd1b6-66c4-11e5-9db1-21f123989734.png\">\n @Carreau and @jdfreder any progress on this one?\n As for many other things, I will not have time to retry/investigate before next week (and still have a lot to catch up). \nYou can assign someone else to try and if they can't reproduce feel free to close. \n\nThough the above error seem to be caught directly by chrome tool (cf codemirror.js:5321 which is not ours.), so thet stack will be available only if the debugger tools are **already open** before the stack happens. So the message `See the error console for details` is useless. \n\nThe is a difference between **uncaught exception** that appear to console and **caught error** logged by **console.error**.\n >  so thet stack will be available only if the debugger tools are already open before the stack happens. \n\nDoesn't seem to be true with Chrome 45.  I checked the behavior, with my console NOT open, and it seems fine:\n\n![screenshot from 2015-10-07 14 12 15](https://cloud.githubusercontent.com/assets/3292874/10351331/d0aff772-6cfd-11e5-84e2-676b49763f65.png)\n\nPopping up the console yields\n\n![screenshot from 2015-10-07 14 13 12](https://cloud.githubusercontent.com/assets/3292874/10351345/ea769a30-6cfd-11e5-886d-910e34f487f3.png)\n\nClicking on the `(...)` causes the trace to show (in my previous screenshot).\n @jdfreder why did you close this issue?\n > @jdfreder why did you close this issue?\n\n@Carreau opened the issue because the error wasn't being logged:\n\n> Break the notebook loading (need to require sublime keymap I guess), but does not log the error to the console:\n\nIt is being logged.\n\nThe code he posted doesn't work and should not work, this is expected.\n I also get the error mentioned in the first post by @Carreau when opening my existing notebooks, but I didn't change the config as he did. BTW I don't get the error when creating a new notebook.\n\nI'm using the notebook package shipped with conda (4.0.5) .  Should I create a new issue or is there an easy fix/workaround ?\n Getting the error is good **IF** you've changed the config in the same manner as he did!\n\nSeeing as you haven't changed the config, it is a bad error.  You mention that you don't get the problem when opening a new notebook, is it one or more particular notebook(s) that is/are causing the problem?  If so, can you share them?  Chances are the notebook(s) have bad JavaScript in them which is causing the load failure.\n This error orrcurs only for some notebooks. If I open the notebook in an incognito window, I don't get this error. I guess it is a caching issue .. \n Here is a minmal notebook, where I always get this 'attach' error while opening it: https://gist.githubusercontent.com/anonymous/8c7515ce6af19286fd92/raw/13dd9a1f7f31aec5bee2ca23255dc2c9f156d5cb/attacherror.ipynb\n If you don't have the problem in incognito mode, you're right, it's probably a caching issue.  Try clearing your browser's cache.  That notebook looks fine to me.\n When I tested it last weak (with google chrome) clearing the cache worked\nfine. But today I always get this error even in incognito mode. This is\npeculiar. The github notebook render seems to have no problem with\nrendering the notebook.\n\nI have just tested it with firefox, where I don't get this error.\n\nEDIT: there are also notebooks where firefox raises this 'attach' error.\n\nOn Mon, Oct 12, 2015 at 4:41 PM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> If you don't have the problem in incognito mode, you're right, it's\n> probably a caching issue. Try clearing your browser's cache. That notebook\n> looks fine to me.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/455#issuecomment-147418008.\n Here is a screenshot of the javascript console in chrome. There are some suspicious errors\n![javascriptstuff](https://cloud.githubusercontent.com/assets/206581/10431267/79be6f88-7104-11e5-9fe1-e036e03509b6.png)\n Looks like your notebook is out of date - or your component versions are mismatched.  How did you install the notebook?  Can you update and then do a full cache clearing?\n It seems that clearing ~/.jupyter and ~/.local/share/jupyter seems to have\nfixed my problem. (Only clearing the browser cache didn't help). Can you\nexplain this?\n\nEdit: i installed the notebook with conda. I even tested it in a fresh conda environment with py3.5\n\nOn Mon, Oct 12, 2015 at 5:30 PM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> Looks like your notebook is out of date - or your component versions are\n> mismatched. How did you install the notebook? Can you update and then do a\n> full cache clearing?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/455#issuecomment-147438675.\n You must have had some stale Javascript in your config.  Did you run the code @Carreau pasted above? Or install any notebook extensions?\n Not that I know of. \n Custom.js?\n Or any kernels other than IPython?\n I had this in my `~/.ipython/profile_default/static/custom/custom.js` (don't know if ~/.ipython/profile_default/static/.. is still used after the big refactoring in ipython/jupyter 4.0)\n\n```\n$([IPython.events]).on('app_initialized.NotebookApp', function(){\nfunction to(mode) {\n    var mode = mode || 'vim'\n    // first let's apply vim mode to all current cells\n    function to_mode(c) { return c.code_mirror.setOption('keyMap', mode);};\n    IPython.notebook.get_cells().map(to_mode);\n    // apply the mode to future cells created\n    IPython.Cell.options_default.cm_config.keyMap = mode;\n}\n\nrequire([\"components/codemirror/keymap/emacs\"],\n     function (emacs) {\n         to('emacs');\n         console.log('emacs.js loaded');\n     });\n})\n```\n\nI have to admit that this looks similar to the code posted by @Carreau.\n That's it :)\n Sry, I was unaware that this code was still in my custom.js. Thx @jdfreder for helping me fix this issue.\n","Gotcha, so it's apparently a race condition and we were relying on everything being super slow to load. Would it be resolved if custom.js used `define`?\n Or if we put custom.js in a vanilla script tag?\n (BTW: async module loading is the dumbest thing ever)\n > Gotcha, so it's apparently a race condition and we were relying on everything being super slow to load. Would it be resolved if custom.js used define?\n\nIt might, I think we should still use a structure in the form :\n\n```\ndefine(function(){\n    return {load:function(){\n      /// user code\n    }};\n});\n```\n\nthen add that in the middle of `main.js`\n\n```\n(custom.load || function(){}))()\n```\n\nScript tag won't do it : custom should be executed after most of deps are loaded, but early enough, \nto have a change tohook to events. Basically just in the middle of main . \n And that's awesome, I cannot reproduce. \n I think I figured it out, \n\nI might have tried someone custom.js that uses `require([...], function(){})` instead of `define([...], function(){...})` still not quite sure why it would change order though. \n\nBumping to 4.x\n Do you want to look at this further, or should we just close until it shows up again?\n Ok, let's close. \n","@carreau Do you want me to write the doc on this and you can review?\n I started something yesterday:\n\nhttps://github.com/Carreau/jupyter_notebook/blob/2b79f882a837fcd0e95130166ad0fc10127aa72a/docs/source/notebook_frontend_configuration.rst\n\nWould that help you ? \n @carreau Ooh..shiny. Do you want to submit it as a PR and merge? I will iterate after that :bicyclist: \n I'm in a workshow, feel free to copy and past :-P\n\nOn Fri, Sep 18, 2015 at 10:15 AM, Carol Willing notifications@github.com\nwrote:\n\n> @carreau https://github.com/carreau Ooh..shiny. Do you want to submit\n> it as a PR and merge? I will iterate after that [image: :bicyclist:]\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/457#issuecomment-141510801.\n Will do. Enjoy the show. :performing_arts: \n @willingc looks like your PR was merged, closing this.\n","Removing the duplicates is good, thanks.\n","I wouldn't recommend trying to resize the terminal using css, the sizing is a complex topic. \n Thanks! I'm not trying to resize it dynamically. Is there a way to adjust ?\n you will have to play around the follwing in main.js:\n\n```\n    window.onresize = function() { \n      var geom = calculate_size();\n      terminal.term.resize(geom.cols, geom.rows);\n      terminal.socket.send(JSON.stringify([\"set_size\", geom.rows, geom.cols,\n                                    $(window).height(), $(window).width()]));\n    };\n```\n\nterminal il a local variable, so might be difficult to get access to. \n We should probably expose `terminal` globally so people can fiddle with it, as we do for `IPython`.\n See PR #48 \n","Does this help? Since custom.js can have require calls, which will run asynchronously, isn't the race condition still there? I hate this bug. I would there were a way to _execute some code_ in Javascript.\n > Does this help? Since custom.js can have require calls, which will run asynchronously, isn't the race condition still there? I hate this bug. I would there were a way to execute some code in Javascript.\n\nMy **guess** is that the minifying process detect that custom is not used and basically strip it out, move it later or whatever. So actually **using** custom might fix things. \n\nAlso I think it woudl be less brittle to actually define a `load` function in custom js which get call at a point in the code that we can control. Not Execute code at whatever point in time where custom.js is seen by the VM. \n @Carreau custom.js is deliberately excluded from minification, because minification happens before install, and cannot include the user's custom.js, which can be different every time. I suspect the issue is that minification changed the load times relevant to the race condition, since all the modules other than custom.js are immediately available as part of the single `main.min.js` request, and custom.js is the only one that requires later loading.\n closing that for now.\n","I tried to install the outdated package, but there is a conflict with python 3.4\n    conda install -c https://conda.binstar.org/ska pygtk \n    Fetching package metadata: ......\n    Solving package specifications: ..\n    Error: Unsatisfiable package specifications.\n    Generating hint: \n    [      COMPLETE          ]|############################################################################## ############################################################################################################################| 100%\n\n```\nHint: the following packages conflict with each other:\n  - pygtk\n  - python 3.4*\n\nUse 'conda info pygtk' etc. to see the dependencies for each package.\n\nNote that the following features are enabled:\n  - gtk\n```\n @lhk From the first pastebin, it looks as if the last error message indicates that pygobject should be installed. `ImportError: Gtk3 backend requires pygobject to be installed.`\n\nSearching at anaconda.org, it looks as if there is a third party option conda option for installing pygobject at https://anaconda.org/fallen/pygobject. To install, `conda install -c https://conda.anaconda.org/fallen pygobject`.\n\nYou may wish to `conda remove` the pygtk package that you installed to avoid a conflict.\n\nI hope this helps. I'm on OS X so I can't test the linux easily for you. Good luck.\n Well yes that seem to be (one of ) the correct way to install jupyter, which in itself works.\nThe issue is with the specific Gtk3 backend of matplotlib (which is not a jupyter issue). \n\nCan you re-try by starting your notebook with `%matplotlib inline` ? It might prevent matplotlib to try to import the gtk3 backend. \nlet see if that works. If it does we can also redirect you to the matplotlib and continuum developpers to see if they can help you to also have the gtk3 backend to works. \n Thank you very much\nFirst I tried inlining the output. That solves the problem\nThen I tried the pygobject package. Now I can import the library, but it doesn't seem to work.\n\nI tried this sample http://matplotlib.org/examples/shapes_and_collections/scatter_demo.html\n\nWith the inlining option, the scatterplot is drawn correctly.\nWith the pygobject package, a window opens to display the graph. But it stays empty.\n Can you contact the matplotlib devs about this?\n","There isn't a 'detach' mechanism per se, since the document state is computed in the browser, so without a browser the transform of messages to document won't happen. We do plan to come up with a way to move document state to the server-side, which would alleviate this. For now, there are two ways that you can do an offline run of a notebook, however:\n1. use `jupyter nbconvert --execute --to notebook MYNOTEBOOK`, which opens the notebook and runs it with a kernel, storing the output in a new notebook (add `--inplace` to overwrite the existing notebook instead of making a copy with the results). This isn't a perfect mirror of the in-browser run if there are javascript outputs or widgets that do certain things, but for more static outputs it should work fine.\n2. script with a browser emulator, such as phantomjs. I don't have an example for such a script, but it would better match the experience of running a notebook in a real browser.\n Thanks for the reply. I'll give the workaround a shot.\n Closing.\n Any updates when background jobs will be officially supported?\r\n","Can you describe more what this is trying to do. We already have support for moving cells up and down. Also, focus in the notebook is a _horrifically_ complicated matter and we find that it is nearly impossible to make any changes to how it is handled without breaking other things. Can you clarify what you changed about focus?\n > Can you describe more what this is trying to do.\n\nTitle: Support for moving **multiple** cells up and down.\n\nI don't see any focus behavior change in the code. \n Ahhh, that helps!\n\nOn Sun, Sep 20, 2015 at 11:06 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Can you describe more what this is trying to do.\n> \n> Title: Support for moving _multiple_ cells up and down.\n> \n> I don't see any focus behavior change in the code.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/464#issuecomment-141816265.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Haven't changed anything about the focus yet, working on it at the moment. I will give a detailed explanation of how things are done, it seems it's possible to do with only very mild modifications.\n As described in the full commit message:\n- Problem : the cell that has the focus (cursor) can be either at the top or at the bottom of the selection. For example if the cursor is at the top and we move cells down, then only the cursor will remain visible if the selection goes below the visible screen.\n- Solution : before moving cells down, possibly reverse the direction of the selection so that the cursor is necessarily the bottom cell of the selection.\n\nIn the end, I'm not messing around with focus but rather with the selection.\n Thanks to selection reversal, also fixed the following strange copy/paste behavior:\n- start with three cells A, B, C\n- select C, then B then A using shift+K\n- The result of `copy` and `paste below` is A, A, B, C, B, C (the cells are copied below the cursor, which is A)\n Thanks, will try to get some time to review in depth. \n\nI'm marking as 4.1, to try to get that in if we review test it enough, but we might bump it to later otherwise. \nI'm assigning @takluyver as he wrote the multi-selection originally, but he might be busy for the next 2 weeks, so if someone else can test/have a look. \n We are looking at changing how multiple-selection is done. See #597 \n\nLet's see how that pans out first before moving on this. That PR also enables discontinuous selections of cells, which could compilcate things like moving up/down.\n I think that with the ability to select more than one cell, cut/copy/paste is a more powerful, flexible and understandable metaphor for rearranging cells than moving the selection up and down. So I'd actually try to remove/deprecate the shortcuts to move cells up and down.\n Yeah, I mostly agree with this. The only place where multi-cell cut, copy,\npaste is still a little annoying is if you want to insert cells at the top\nof a notebook. But virtually no UIs that I know of offer move up/down for\nthings like this. It would also free up space in the toolbar.\n\nOn Tue, Dec 1, 2015 at 7:45 AM, Thomas Kluyver notifications@github.com\nwrote:\n\n> I think that with the ability to select more than one cell, cut/copy/paste\n> is a more powerful, flexible and understandable metaphor for rearranging\n> cells than moving the selection up and down. So I'd actually try to\n> remove/deprecate the shortcuts to move cells up and down.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/464#issuecomment-161005993.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Moving multiple cells up.down is now a simple side-effect of the continuous selection. \nAs then you \"just\" need to move the cell before the selection to just after to \"move the selection up\" and vice versa. \n\nSo unless I'm misunderstanding, I'm going to close this, \n\nThanks a lot though for the time you've put into that, and sorry these commit don't land into master. \n\nWaiting for your next PR !\n\n(closing, feel free to reopen if I missed something) \n","If we don't like the too-many-options case, we can pick _either_ the Run All dialog _or_ the Run All button in the existing dialog and remove Run All from the kernel menu.\n cc @ellisonbg @willingc for dialog text/button review.\n @minrk I'll do a bit of thinking on this.\n\nIn general, \"Restart & Run All\" is not feeling specific enough to me when placed under \"Kernel\" menu. Somehow would like it to reflect what is being run. \"Restart and run notebook\" is more accurate but longer (though I am not sure how much that matters when balancing clarity vs length on modern screens).\n\nPersonally, I would simplify the Restart dialog. Title: Restart kernel? I would opt for two buttons \"Continue\" and \"Restart\" instead of four. Perhaps a more specific warning: \"You will lose the contents of existing variables when restarting the kernel.\"\n\nI like the option to \"Restart & Run All\". Perhaps change dialog title: \"Restart kernel, reinitialize notebook, and run all cells?\" Perhaps two buttons: \"Cancel\" and \"Restart and run all cells\" or \"Restart and run all\".\n\nWhile clearing the cell content is a nice convenience, I think that I would not put it in the dialog but put in the menu if desired as \"Restart and clear notebook output\" or \"Restart and clear notebook\".\n I think we have to be really careful about presenting the user with too\nmany choices in dialogs that require them to read carefully. Especially\nwith destructive actions, it becomes more likely the user will\nmisunderstand the subtle differences and pick the wrong one.\n\nAlso, it is common for users to get into a workflow where they are doing\nthe different variants of restart often. We want these actions to be super\nfast and automatic. In a given notebook, it is also likely that a user will\nusing the same restart logic repeatedly.\n\nBased on these observations, here is a thought:\n- Offer a single restart menu item and button.\n- Bring up a modal dialog that has only two buttons (Restart, Cancel)\n- Expose the different restart options (Clear Output, Run All) as\n  checkboxes in the dialog.\n- And here is the _important_ part - for each notebook sessions, remember\n  the user's last selection of those checkboxes.\n\nBenefits:\n- Easy/quick to scan the checkbox options visually.\n- Those options are separate from the main choice to restart.\n- Once a user picks the right options, they can restart extremely fast with\n  \"00 return\".\n\nOn Sun, Sep 20, 2015 at 7:42 AM, Carol Willing notifications@github.com\nwrote:\n\n> @minrk https://github.com/minrk I'll do a bit of thinking on this.\n> \n> In general, \"Restart & Run All\" is not feeling specific enough to me when\n> placed under \"Kernel\" menu. Somehow would like it to reflect what is being\n> run. \"Restart and run notebook\" is more accurate but longer (though I am\n> not sure how much that matters when balancing clarity vs length on modern\n> screens).\n> \n> Personally, I would simplify the Restart dialog. Title: Restart kernel? I\n> would opt for two buttons \"Continue\" and \"Restart\" instead of four. Perhaps\n> a more specific warning: \"You will lose the contents of existing variables\n> when restarting the kernel.\"\n> \n> I like the option to \"Restart & Run All\". Perhaps change dialog title:\n> \"Restart kernel, reinitialize notebook, and run all cells?\" Perhaps two\n> buttons: \"Cancel\" and \"Restart and run all cells\" or \"Restart and run all\".\n> \n> While clearing the cell content is a nice convenience, I think that I\n> would not put it in the dialog but put in the menu if desired as \"Restart\n> and clear notebook output\" or \"Restart and clear notebook\".\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/465#issuecomment-141792942.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > And here is the _important_ part - for each notebook sessions, remember\n> the user's last selection of those checkboxes.\n\nNo no no no no....\n\nSame reasoning that the new notebook, you should't make user think. \nHaving `0,0`, `Enter` do different things based on what the user selection was before is bad. \n\nIf you are in front of a notebook and I ask you what `0,0`, `Enter` does, your response should not start with \"it depends of\".\n\nI work a lot by restarting quickly and clearing all once in while, it would annoying to have during the same session the same keyboard shortcut do different things and have me stop to think each time of what was the thing I did before. \n What a bout a drop down choice next to the restart button. Restart is default, the dropdown can have `& clear`, `& run all` (regardless  of their exact name)\n @minrk @Carreau @ellisonbg Quick question: If I have 4 notebooks open in the browser and I restart the kernel, does the kernel restart for all 4 notebooks or just the active notebook? If the former, run all and clear all could have unintended results for user.\n Restart only applies to the current notebook.\n\nAbout a dropdown. The problem is that the variants of restart (Clear\nOutput, Run All, are not mutually exclusive). Output can contain\nHTML/CSS/JS that modifies the page context. (Clear Output & Run All) is not\nthe same thing as (Run All).\n\nBecause of this a single dropdown makes it very difficult to express the 4\ndifferent combinations.\n\nOn Sun, Sep 20, 2015 at 10:56 AM, Carol Willing notifications@github.com\nwrote:\n\n> @minrk https://github.com/minrk @Carreau https://github.com/Carreau\n> @ellisonbg https://github.com/ellisonbg Quick question: If I have 4\n> notebooks open in the browser and I restart the kernel, does the kernel\n> restart for all 4 notebooks or just the active notebook? If the former, run\n> all and clear all could have unintended results for user.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/465#issuecomment-141815357.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Also about thinking - I am not following your statement about this. The\nuser _does_ have to think at some point about what options they want to\napply on restart. We can't get away from that. By remembering what they\npicked last time (and still allowing for changes) they only have to think\nonce.\n\nOn Sun, Sep 20, 2015 at 11:00 AM, Brian Granger ellisonbg@gmail.com wrote:\n\n> Restart only applies to the current notebook.\n> \n> About a dropdown. The problem is that the variants of restart (Clear\n> Output, Run All, are not mutually exclusive). Output can contain\n> HTML/CSS/JS that modifies the page context. (Clear Output & Run All) is not\n> the same thing as (Run All).\n> \n> Because of this a single dropdown makes it very difficult to express the 4\n> different combinations.\n> \n> On Sun, Sep 20, 2015 at 10:56 AM, Carol Willing notifications@github.com\n> wrote:\n> \n> > @minrk https://github.com/minrk @Carreau https://github.com/Carreau\n> > @ellisonbg https://github.com/ellisonbg Quick question: If I have 4\n> > notebooks open in the browser and I restart the kernel, does the kernel\n> > restart for all 4 notebooks or just the active notebook? If the former, run\n> > all and clear all could have unintended results for user.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/pull/465#issuecomment-141815357.\n> \n> ## \n> \n> Brian E. Granger\n> Associate Professor of Physics and Data Science\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I know we are still probably too understaffed to consider it, but this is a\nperfect case where targeted user testing on the options would be very\nhelpful.\n\nOn Sun, Sep 20, 2015 at 11:02 AM, Brian Granger ellisonbg@gmail.com wrote:\n\n> Also about thinking - I am not following your statement about this. The\n> user _does_ have to think at some point about what options they want to\n> apply on restart. We can't get away from that. By remembering what they\n> picked last time (and still allowing for changes) they only have to think\n> once.\n> \n> On Sun, Sep 20, 2015 at 11:00 AM, Brian Granger ellisonbg@gmail.com\n> wrote:\n> \n> > Restart only applies to the current notebook.\n> > \n> > About a dropdown. The problem is that the variants of restart (Clear\n> > Output, Run All, are not mutually exclusive). Output can contain\n> > HTML/CSS/JS that modifies the page context. (Clear Output & Run All) is not\n> > the same thing as (Run All).\n> > \n> > Because of this a single dropdown makes it very difficult to express the\n> > 4 different combinations.\n> > \n> > On Sun, Sep 20, 2015 at 10:56 AM, Carol Willing <notifications@github.com\n> > \n> > > wrote:\n> > > \n> > > @minrk https://github.com/minrk @Carreau https://github.com/Carreau\n> > > @ellisonbg https://github.com/ellisonbg Quick question: If I have 4\n> > > notebooks open in the browser and I restart the kernel, does the kernel\n> > > restart for all 4 notebooks or just the active notebook? If the former, run\n> > > all and clear all could have unintended results for user.\n> > > \n> > > \u2014\n> > > Reply to this email directly or view it on GitHub\n> > > https://github.com/jupyter/notebook/pull/465#issuecomment-141815357.\n> > \n> > ## \n> > \n> > Brian E. Granger\n> > Associate Professor of Physics and Data Science\n> > Cal Poly State University, San Luis Obispo\n> > @ellisonbg on Twitter and GitHub\n> > bgranger@calpoly.edu and ellisonbg@gmail.com\n> \n> ## \n> \n> Brian E. Granger\n> Associate Professor of Physics and Data Science\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Clear Output & Run All) is not\n> the same thing as (Run All).\n\nWrong, pushing in cell on the execution stack clear its output. \n\n> Also about thinking - I am not following your statement about this. The\n> user _does_ have to think at some point about what options they want to\n> apply on restart.\n\nPicture yourself in front of my computer, I'm working on a notebook. \nI give you the keyboard.\n\n> What does `0,0``Enter` do ?\n\nYou switch to another tab. \n\n> What does `0,0``Enter` do ?\n\nYou open the dialog, change the checkbox. You get interrupted by Fernando for a few minutes, get back take the computer back.\n\n> What does `0,0`, `Enter` do ?\n\n### Current behavior:\n\n> What does `0,0`, `Enter` do ?\n\nResponse: \"Restart the kernel\"\n\n> How do I restart and and clear all ?\n\nResponse: `0,0``Shift-Tab``Enter`.\n\n> What if I use Damian computer and want to resart and clear?\n\nResponse: `0,0``Shift-Tab``Enter`.\n\n> If I don't rember what action I did last time how do I just restart ?\n\nResponse: `0,0``Enter`.\n\n> If I don't rember what action I did last time how do I just restart and clear all ?\n\nResponse: `0,0``Shift-Tab``Enter`.\n\n> Frubularcruf fre[uhsjk kj;hsgb `Just Restart`, but :SDUghoihsdosh ?\n\nResponse: `0,0``Enter`.\n\n> Frubularcruf fre[uhsjk kj;hsgb `Just Restart, and Clear all` but :SDUghoihsdosh ?\n\nResponse: `0,0``Shift-Tab``Enter`.\n\n### we can have `0,0` `Tab` `Enter` run-all\n\nThen you **never** have to think. \n I always regret making PRs with UI. My slight inclination is to keep Restart & Run All as a distinct action, and remove '& Run All' from the base restart dialog. Possibly also removing '& clear output' as well.\n Just a note about my own experience as a user: I treat restart and restart + run all as very different actions. I restart a lot, and it's rare that I want to run all immediately afterwards, so I wouldn't expect remembering my preference for what I do after restart to be helpful. I use Restart & Run All as a verification process, to ensure my notebook is in a good state, but that's only when I'm in a final review process of a notebook that I am about to share. I don't do it other than that. To me, that points to them being completely separate actions\u2014separate dialogs, etc.\u2014but obviously I'm not necessarily a representative user, and @ellisonbg's definitely right that user testing would be helpful here.\n @minrk No regrets :D It's more information percolating up to the surface.\n\nTrue, @ellisonbg's suggestion that testing would be helpful. \n\nIt may also be helpful to identify the times that people would choose to reset the kernel. Also options after a restart. (I think the second is more complicated than the first).\n\n**Why reset/restart a kernel?**\n- [ ] Kernel hangs/fails/non-responsive (user feeling: may be annoyed)\n- [ ] \n\n**Kernel restarts, what would I like to next and why?**\n- [ ] Clear output cells  ---> Why? I want to start from scratch and run cells incrementally\n- [ ] Clear output context (js/html/css)\n- [ ] Clear output cells and run all\n- [ ] Clear output cells and context and run all\n- [ ]\n Great feedback everyone! @cameronoelsen is going to do some quick design mockups and users tests and get back to us on this. Should be done this week.\n My 2cents:\n\nI do Restart&Run-All a lot (and also Restart and Run-all-above) and I like the idea of @minrk of having two separate dialogs. Also, two buttons are better than 3 or 4.\n\nIn @minrk proposal, I would only modify the Restart dialog with only two button (Cancel, Restart) and one checkbox for clear output.\n\nFinally, I agree with @Carreau that shortcuts should be deterministic, one for only restart (no clear) and one for restart and run-all. In principle there can be a third shortcut for restart & clear but I would not use it much in my case.\n We can also have just 3 menu items, restart, restart clear, restart run all. Each opening a dialog. \nPeople can bind their own shortcuts if needed.\n Cameron started the user tests today - should have some results in the next\nday or so...\n\nOn Tue, Sep 22, 2015 at 9:49 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> We can also have just 3 menu items, restart, restart clear, restart run\n> all. Each opening a dialog.\n> People can bind their own shortcuts if needed.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/465#issuecomment-142346050.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n And one of the options he is trying is to have 3 menu items each with their\nown dialog.\n\nOn Wed, Sep 23, 2015 at 7:41 PM, Brian Granger ellisonbg@gmail.com wrote:\n\n> Cameron started the user tests today - should have some results in the\n> next day or so...\n> \n> On Tue, Sep 22, 2015 at 9:49 AM, Matthias Bussonnier <\n> notifications@github.com> wrote:\n> \n> > We can also have just 3 menu items, restart, restart clear, restart run\n> > all. Each opening a dialog.\n> > People can bind their own shortcuts if needed.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/pull/465#issuecomment-142346050.\n> \n> ## \n> \n> Brian E. Granger\n> Associate Professor of Physics and Data Science\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Carreau:\n\n> We can also have just 3 menu items, restart, restart clear, restart run all. Each opening a dialog.\n\nEllisonbg :\n\n> And one of the options he is trying is to have 3 menu items each with their own dialog.\n\nHum.... not sure if echo, or if mailserver deliver mail in the wrong order. :-P \n Haha, nope just confirming your idea is worth pursuing ;-)\n\nOn Wed, Sep 23, 2015 at 7:54 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Carreau:\n> \n> We can also have just 3 menu items, restart, restart clear, restart run\n> all. Each opening a dialog.\n> \n> Ellisonbg :\n> \n> And one of the options he is trying is to have 3 menu items each with\n> their own dialog.\n> \n> Hum.... not sure if echo, or if mailserver deliver mail in the wrong\n> order. :-P\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/465#issuecomment-142789130.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I just got back the UsabilityHub results regarding which way we should handle this dropdown. Check out the links below and you can see the heatmaps of how our users are interacting with the menus.\n\nKernel Restart w/ Checkbox\nhttps://usabilityhub.com/tests/b8afa0bb3c65/results/b1661cf58d\n\nFull Kernel Restart List\nhttps://usabilityhub.com/tests/4b222a1f9697/results/67b4615378b4\n\nI told both usability tests to restart the kernel and clear the output. For these tests, we needed to focus on one specific action to see which approach is better to use.\n Thanks. so checkbox is better. \n\nBut that still does not cover the remember your last choice of the checkbox case. \nFor which user testing will not help, as we target advance user that do all the things with the keybord. \n Cameron, thanks. I am trying to understand the results.\n\nOn the checkbox version 32% of users completed the overall task in an\naverage of 49 seconds.\n\nOn the non-checkbox (3 separate Menu Items) version 56% of users completed\nthe overall task in an avg of 34 seconds.\n\nLooks like the checkbox is _worse_, right?\n\nOn Fri, Sep 25, 2015 at 11:26 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Thanks. so checkbox is better.\n> \n> But that still does not cover the remember your last choice of the\n> checkbox case.\n> For which user testing will not help, as we target advance user that do\n> all the things with the keybord.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/465#issuecomment-143314895.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > On the checkbox version 32% of users completed the overall task in an\n> average of 49 seconds.\n> \n> On the non-checkbox (3 separate Menu Items) version 56% of users completed\n> the overall task in an avg of 34 seconds.\n> \n> Looks like the checkbox is _worse_, right?\n\nMy bad I miss-read. You are right the checkbox is worse. \n Thanks @cameronoelsen! I'll rewrite it so that it's a separate menu item for each entry, with only yes/no buttons and no checkboxes. Bonus: then there's nothing to remember!\n All three actions are in the Kernel menu:\n\n![screen shot 2015-09-28 at 12 47 47](https://cloud.githubusercontent.com/assets/151929/10133650/3639b75c-65df-11e5-8621-6dff7a7f48de.PNG)\n\nRestart & Run All:\n\n![screen shot 2015-09-28 at 12 47 57](https://cloud.githubusercontent.com/assets/151929/10133647/3638e188-65df-11e5-9a60-f47070e65120.PNG)\n\nRestart & Clear All:\n![screen shot 2015-09-28 at 12 48 05](https://cloud.githubusercontent.com/assets/151929/10133648/36391608-65df-11e5-8ed0-e37ffb83119a.PNG)\n\nRestart:\n![screen shot 2015-09-28 at 12 48 12](https://cloud.githubusercontent.com/assets/151929/10133649/363977c4-65df-11e5-94ea-0d220479c665.PNG)\n Maybe the menu item should be \"Restart and Clear Output\" to clarify what is\nbeing cleared?\n\nAlso, in the UI we are using the work \"run\" rather than \"execute\". Can you\nupdate the re-run dialog with execute->run in the text.\n\nAlso, I think that all of the \"confirm\" buttons should be red as all of\nthese actions have the same level of danger.\n\nOn Mon, Sep 28, 2015 at 6:49 AM, Min RK notifications@github.com wrote:\n\n> All three actions are in the Kernel menu:\n> \n> [image: screen shot 2015-09-28 at 12 47 47]\n> https://cloud.githubusercontent.com/assets/151929/10133650/3639b75c-65df-11e5-8621-6dff7a7f48de.PNG\n> \n> Restart & Run All:\n> \n> [image: screen shot 2015-09-28 at 12 47 57]\n> https://cloud.githubusercontent.com/assets/151929/10133647/3638e188-65df-11e5-9a60-f47070e65120.PNG\n> \n> Restart & Clear All:\n> [image: screen shot 2015-09-28 at 12 48 05]\n> https://cloud.githubusercontent.com/assets/151929/10133648/36391608-65df-11e5-8ed0-e37ffb83119a.PNG\n> \n> Restart:\n> [image: screen shot 2015-09-28 at 12 48 12]\n> https://cloud.githubusercontent.com/assets/151929/10133649/363977c4-65df-11e5-94ea-0d220479c665.PNG\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/465#issuecomment-143707391.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg that's better. done.\n Thanks! Looks good to me, merging.\n Ohh, wait, looks like tests are failing. I kicked Travis...\n Nice... I like the final outcome of this... makes things simple for the user.\n I would have made the `-no-confirm` default and have optional `-with-confirm-dialog`, but I'm not particularly opinionated on that. \n\nthe no-confirm-as-default is easier to use in an API. \n > the no-confirm-as-default is easier to use in an API.\n\nI agree... but this is mostly a UI issue... I would tend to keep it as is...\n Tests are passing, and I made the command-name changes suggested by @Carreau.\n Looks good, merging. Thanks!\n","Remove the space after your  `$\\alpha \\symeq $` (I think you have this twice). \n\nconvert to latex manually `jupyter nbconvert --to latex homework1.ipynb`\n\nAdd these for lines manually (without the plus) :\n\n```\n     \\newcommand{\\KeywordTok}[1]{\\textcolor[rgb]{0.00,0.44,0.13}{\\textbf{{#1}}}}\n+    \\newcommand{\\BuiltInTok}[1]{\\textcolor[rgb]{0.00,0.44,0.13}{\\textbf{{#1}}}}\n+    \\newcommand{\\OperatorTok}[1]{\\textcolor[rgb]{0.00,0.44,0.13}{\\textbf{{#1}}}}\n+    \\newcommand{\\ControlFlowTok}[1]{\\textcolor[rgb]{0.00,0.44,0.13}{\\textbf{{#1}}}}\n+    \\newcommand{\\ImportTok}[1]{\\textcolor[rgb]{0.00,0.44,0.13}{\\textbf{{#1}}}}\n     \\newcommand{\\DataTypeTok}[1]{\\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}\n```\n\nCompile with pdf latex manually. `pdflatex homeworks1.tex`\n\nFix in progress\n\nBon courage. \n Awesome, thanks a lot for the help and the very quick fix!\n The pull request will close the issue automatically at the right time. \n Ok, sorry.\n > Ok, sorry.\n\nNo problem, i\"ll put that on the fact that it's 2am in France. \n","@tritemio Thanks for reporting the broken link. The docs live http://jupyter-notebook.readthedocs.org/ which is the link that you have currently.\n\nI will take a look at the docs and see why the link is not working. Thanks for your patience and sorry for any inconvenience.\n\nGitHub now renders notebooks, and you may find this link to the notebook examples and its index helpful in the interim https://github.com/jupyter/notebook/blob/master/docs/source/examples/Notebook/Examples%20and%20Tutorials%20Index.ipynb\n","Thanks for the find!\n\nOn Mon, Sep 21, 2015 at 1:12 AM, zhangmm notifications@github.com wrote:\n\n> Hi, there is a small UI problem in login page that the height of <div\n> id=\"site\" style=\"display: block; height: 596px;\"> is not necessary and\n> it's cause the scrollbar displayed.\n> [image: qq 20150921160110]\n> https://cloud.githubusercontent.com/assets/5069316/9987521/33c91e7c-607b-11e5-8c01-2b23d49ea196.png\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/469.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Do you want to make a PR ?\n @Carreau Yes, but I didn't find the way to fix it. I didn't know where the height of the div come from? can you give me some help? thanks.\n Hum, guessing, I would say that is is set by the js in\n`notebook/static/base/js/page.js`, which is responsible from setting the\nheight when there is a header and/or a footer.\n\nWe should either deactivate that on the login page, or fix why it does the\ncalculation incorrectly.\n\nprobably in a resize_header method or something names alike.\n\nOn Mon, Sep 21, 2015 at 6:50 PM, zhangmm notifications@github.com wrote:\n\n> Yes, but I didn't find the way to fix it. I didn't know where the height\n> of the div come from? can you give me some help? thanks.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/469#issuecomment-142157398.\n","generally js-terminal are termjs issues, we use of from upstream almost unmodified. \n","I ran into this lately, also, but discovered a work-around (non-ideal, but usable when SSH is not an option or the notebook server is not local): rename the notebook from the UI, but put the desired directory path in front of the name. The notebook server will relocate the notebook into the directory. I also think it would be nice to have a UI element for moving a notebook, but for now you should be able to work around it using this.\n\n> On Sep 21, 2015, at 5:06 AM, Rares Mirica notifications@github.com wrote:\n> \n> This is a feature request, for usability reasons it would be beneficial if users could move files between Folders in the file view, allowing them to organise their notebooks after creation.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Yes, that is one very creative solution, I will use it as a workaround for now.\n I'm working on a pull request now to add moving files. :)\n I have another solution, which may not be ideal in terms of data security but is easy to implement:\nSimply link the root directory to Dropbox.\n\nThis is the current way I am running one server for my group in the university. Dropbox allows an easy way to manage multiple files using their website, however if your codes are very sensitive then you may not want them on Dropbox for unknown disclosure issue.\n","Marked WIP, since there's some fixes to do Python-side as well.\n Took some tracking down, and got waylaid by a phantomjs bug where it helpfully unescapes websocket URLs when it shouldn't, but I think this is good to go, assuming Travis agrees.\n Travis seem happy, will try to review post today's meeting. \n > waylaid\n\nWord of the day! cool\n\nReviewing...\n Awesome\n @jdfreder comments added\n Sweet, thanks Min!\n","Switching backends closes all open figures which does not really fit with the model of the notebook backend.  \n\nWhy are you doing this?  If you just hit the x (soon be be power button) the live figure will turn into a png.\n\nHave you tried this with mpl1.5.0rc1?\n @tacaswell, my use-case is an interactive session, for some heavy plots I'm still using the `inline` backend, then I switch to `notebook` when I need interactivity to explore a graph. The issue is that sometimes I execute a cell with a plot and instead of the interactive figure I get a blank space and a static image (see figure below). I'm not talking about the previous figures getting closed when I switch to `inline`. In principle, I could always use `notebook` adding a `close()` command to all the \"heavy\" plots, then remove it when I want interactivity. In this way I would avoid switching backend.\n\nI'm using matplotlib 1.5rc1, python 3.4, jupyter notebook 4.04 (I don't think this is a regression, I had this kind of hiccups for a long time and this issue slowed me down to switch to `notebook`).\n\nHere a screenshot:\n<img width=\"470\" alt=\"screen shot 2015-09-21 at 9 57 03 am\" src=\"https://cloud.githubusercontent.com/assets/4156237/9998678/41eeee34-6047-11e5-8926-5fa61c268c5f.png\">\n Seems like a weird race condition.  That is fun.\n\nAre you seeing performance issues between `inline` and `notebook`?  They are running identical rendering code (well, `notebook` uses a high default DPI so it might be a bit slower) and are both sending you a png over a comm.\n I think I have a more reproducible example: run `%matplotlib inline` twice in two separate cells then run  `%matplotlib notebook`. The next plot should show the issue like in the previous screenshot. On top of this there are 8-10 lines of `[IPKernelApp] ERROR | No such comm: ...`.\n- [Updated notebook showing the issue](https://gist.github.com/tritemio/a4554323fe0faca85c57)\n\n**EDIT**: typos\n In addition this exact bug happens also switching between `inline` and `qt` backends.\n\nThis is a bigger problem for me because:\n\na. I need to switch to QT for some fast visualization widgets (i.e. scrolling big timetraces, etc..)\nb. I cannot use the `notebook` backend in this case (only inline allows switching back and forth)\nc. It's easy to run `%matplotlib inline` twice in a row during an interactive session, thus triggering this bug.\n @tacaswell, can you reproduce the bug? Regarding generating static images with the notebook backend (i.e. close the figure but display the png) what is the right approach? Currently I'm adding:\n\n```\nfig = plt.gcf()\nplt.close('all')\ndisplay(fig)\n```\n\nto plot cells. This seems cumbersome and leaves al lot of empty space like in the previous screenshot.\n @tacaswell \n\n> Are you seeing performance issues between inline and notebook?\n\nThe performance issue is when a plot uses a lot of memory so I just want to create (and display) a PNG, without keeping the figure open. Also, since `notebook` uses PNG rendering, things like fast scrolling will not work and I still need to resort to `qt` backend.\n @tacaswell is there anything for us to do on this on our side?\n Hi all, this has been dormant for many moth now, what's the status ? \nOtherwise I suggest we close it to keep the list of issue we work on clean. Reopening if needed. \n\nThoughts ?\n @Carreau, it is still a bug for me. You can try to reproduce it yourself by running the previously linked notebook, pasted again here for your convenience:\n- [Updated notebook showing the issue](https://gist.github.com/tritemio/a4554323fe0faca85c57)\n If nobody can work on it at the moment you can tag it for a \"future\" release and also add a tag like `help-wanted`, or something.\n Marked as 5.0. It might be an IPython thing though as well. \n I thought I'd bring this up again. I too routinely switch between inline and qt4, and I find I need to run \n\n```\n%matplotlib\n%matplotlib qt4\n```\n\nin a cell a few times before it \"catches\", when switching away from inline. On mac, I haven't gotten the interactive `%matplotlib notebook` working yet, so I'm stuck using those two.\n Update: this bug is still present using pyqt and qt version 5 (QT5), the current version in anaconda.\nIf anything it got even worst. Now I can reproduce it on macOS and Windows using any plot function.\n I'm also having this problem, and someone reported a similar issue on Stack Overflow: http://stackoverflow.com/questions/41125690/matplotlib-notebook-showing-a-blank-histogram Just a temporary workaround. When switching from inline to notebook backend, you can run two cells with `%matplotlib notebook` and `plt.plot([])` respectively. Rerun the previous 2 cells (usually 3-4 times) until the figure appears. Once the figure appears, Matplotlib will work without issues for the rest of the session. Not a great solution, but better than nothing if you desperately need an interactive backend.\r\n @tritemio try just calling \r\n```python\r\n%matplotlib\r\n%matplotlib notebook\r\n```\r\na bunch of times in a cell, holding ctrl whilst pressing return. That should do the same as you suggest, but without having to wait for the plot.","This is a changed in the underlying library to fix a bug as in the markdown spec the **is** a space after the hash. \n duplicate of #276 and jupyter/jupyter#16\n Thanks for the info. I understand the principle, but it will be painful to update notebooks everywhere :-/.\n @Carreau, as you mention in the duplicated issue, a tool (extension adding a menu entry?) to automatically _fix_ notebooks would be quite useful.\n On 4.1 you will be able to select `search and replace`, enable reg-ex and search `^(#+)([^ ])` replace by `$1 $2`. \n Great, awesome! Worth adding it to the migrating to 4.x section of the docs.\n @Carreau, I would like to send a PR to add to the docs a section of UI changes in the notebook 4.x.\n\nFor now it will contain the info in this issue and the new shortcuts to select and merge multiple cells (I initially though the merge shortcut was broken).\n\nWhich repo should I target, notebook or the main jupyter docs at:\n\nhttp://jupyter.readthedocs.org/en/latest/migrating.html#migrating-from-ipython\n\nI would prefer adding only a link in the previous page and a new section in the notebook docs.\n I guess the regex to match should not be `^(#+)([^ ])` but `^(#+)([^ #])` (otherwise, in case of headings of level 2 and more, the last # will match the second group).\n","I'm going to take a crack at this one.\n","@Jeffiy I see you have a merge commit from upstream. Would it be possible for you to rebase this branch to remove that? If not, it's okay, but we would prefer to avoid the extra merge.\n Thanks!\n The way you rebase usually is the following:\n\n```\n$ git rebase -i origin/master\n```\n\nEditor open with the list of commits\n\n```\npick 1fb2288 Edit see also box in doc\npick 86b9b0b set dirty flag on kernelspec/language_info changes\npick c9a9b5b don't overwrite file\npick ac509bc fix login page UI problem\n```\n\nYou delete the lines of the commit you don't want, (follow the instructions)\nsave and quit editor.\n\n```\n$ git rebase -i origin/master\nRebasing  (9/15) # updates while rebasing\nSuccessfully rebased and updated <your branch>\n```\n\nIf there are conflicts it will tell you \"conflict in ....\", you edit the file(s) to resolve conflict, git add the files, and then `git rebase --continue` a conflict look like that\n\n```\n<<<<<<<< fix these -> this\nTHere is 2 conflicts in this sentence\n=======\nThere is 2 conflits in these sentence\n>>>>>>>> Lowercase H\n```\n\nAs a human you know how to merge the two, and delete the `<<<<<`,`>>>>>`,`======`. Anyway rebase might look scary, it is not, you can alway get back on your feet. \n @Carreau Thanks!\n","Thanks, we'll try to work on that !\n @tritemio Thanks.\n\n@carreau @minrk Would you mind checking if Read the Docs is getting our latest docs changes? Thanks.\n @willingc, you are right. The latest RTD version is e122f061d8441618136d486edf759e50bbfe40a6, which is a commit  from August 19. All the recent builds are failing:\n\nhttps://readthedocs.org/projects/jupyter-notebook/builds/\n\nRTD may have updated sphinx and other things that broke the docs building here.\n @jdfreder @minrk or @takluyver can you make me admin on rtd for this repo ?\n Also I think we could make @willingc admin on rtd too. \n I added @willingc and @Carreau : )  Let me know if you have trouble using it.\n @jdfreder Thanks :sunflower: \n I just added a PR #492 as a follow up to #488.\n Recommendation: refactor docs to use `nbgrader`'s model for autogenerating rst from ipynb. This would enhance maintainability of docs. See note #494\n @willingc good idea.\n","Let it be known that you have now documented it in an issue.\n","One test failed due to timeout.\n I relaunched the spurious failing test. \n Thanks !\n","@jdfreder Thanks for the review. Good catches. :ocean: \n\nI will loop back and correct this evening.\n Thanks, @willingc!\n","So I'll investigate more deeply, but IIRC, there are some issues, where indeed it might not be possible for he `magic_foo` mode to switch syntactic coloration at the end of the line, which probably screw up some modes. Someone will have to dive into Codemirror multiplexing. \n If it helps at all, I created a simple hack for one case where I simply added a firstLine flag to the state object for the mode. In the mode, if firstLine was true I set it to false and ate the line, returning in our case 'keyword' for the token type.\n\nPerhaps something like that with an overlay rather than a multiplexor may work.\n I was hoping that replacing that multiplexing mode that gets created in cell.js with this would work better:\n\n```\nCodeMirror.defineMode(magic_mode, function(config) {\n  var magicOverlay = {\n    startState: function() {\n      return {firstMatched : false}\n    },\n    token: function(stream, state) {\n      var matched = null;\n      if(!state.firstMatched) {\n        state.firstMatched = true;\n        if (stream.match(\"%%\")) {\n          matched = \"magic\"; // or whatever token you want the first line to match\n        }\n      }\n      stream.skipToEnd();\n      return matched;\n    }\n  };\n  return CodeMirror.overlayMode(CodeMirror.getMode(config, spec), magicOverlay);\n});\n```\n\nUnfortunately it looks like while this will work on the word following %% it won't work on tokens that come after it if the other mode styles them.\n Ah, I have a better version which seems to work. \n\n```\nCodeMirror.defineMode(magic_mode, function(config) {\n  var magicOverlay = {\n    startState: function() {\n      return {firstMatched : false, inMagicLine: false}\n    },\n    token: function(stream, state) {\n      if(!state.firstMatched) {\n        state.firstMatched = true;\n         if (stream.match(\"%%\", false)) {\n          state.inMagicLine = true;\n        }\n      }\n      if (state.inMagicLine) {\n        stream.eat(function any(ch) { return true; });\n        if (stream.eol()) {\n          state.inMagicLine = false;\n        }\n        return \"magic\";\n      }\n      stream.skipToEnd();\n      return null;\n    }\n  };\n  return CodeMirror.overlayMode(CodeMirror.getMode(config, spec), magicOverlay);\n});\n```\n @Carreau do you think there is anything for us to do on this for 4.1?\n Bah, that have been broken for [a long time](https://github.com/ipython/ipython/issues/4836#issuecomment-33897907). If someone make a working PR i'm all for it, but it's not blocker. \n closed by #498\n","> I\"m certain there are no other kernels or notebooks running\n\nCould there be something else accessing the file ? If you get this message it means that there is something else that have modified the file since last save. Could there be a dropbox syncing ? Or could the dates on the mounted filesystem be wrong ?\n The dates and times look in sync.  There is no dropbox syncing on this\nfolder. I also don't remember getting this while using ipython3\n(pre-jupyter).\n[image: Inline image 1]\n\nDominik Schneider\no 303.735.6296 | c 518.956.3978\n\nOn Tue, Sep 22, 2015 at 3:57 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I\"m certain there are no other kernels or notebooks running\n> \n> Could there be something else accessing the file ? If you get this message\n> it means that there is something else that have modified the file since\n> last save. Could there be a dropbox syncing ? Or could the dates on the\n> mounted filesystem be wrong ?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/484#issuecomment-142434001.\n Same situation.\n\nI am running ipython notebook in a Fedora 22 box. The box is running as a vmware guest hosted on M$ windows. \n\nThe ipynb file is stored in a directory mounted with vmhgfs in the guest machine, and the corresponding directory on the host Windows machine is a directory in NTFS.\n\nipython version is 4.0.0.\n\nThe issue does not exist if the ipynb file is stored in a naive ext4 partition.\n I see this sometime, but usually when the underlying notebook has changed because of git...\n This is also happening to me, running ipython notebook on a linux guest under VmWare Fusion, working on a filesystem mounted with vmhgfs.  I have suspected that the problem occurs when the OS X clock is slightly out of sync with the linux clock, owing to a suspend; but if so, it involves tiny offsets.  I'm using ntp on both OS X and the linux VM.\n\nAs a workaround, is there a way to disable this check?  It is seriously interfering with work.\n > As a workaround, is there a way to disable this check? It is seriously interfering with work.\n\nNot easily. You can modify `site-packages/notebook/static/notebook/js/main.min.js:26294`\n\n(or `notebook/js/notebook.js` if running from dev)\n\nand change:\n\n```\n        if (check_last_modified) {\n            return this.contents.get(this.notebook_path, {content: false}).then(\n                function (data) {\n```\n\nTo \n\n`if(false) {....`\n\nIt might be due to an clock offset, you might be right. \n this issue hasn't occurred since i switched to chrome from safari.\n\nDominik Schneider\no 303.735.6296 | c 518.956.3978\n\nOn Sat, Nov 7, 2015 at 5:09 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> As a workaround, is there a way to disable this check? It is seriously\n> interfering with work.\n> \n> Not easily. You can modify\n> site-packages/notebook/static/notebook/js/main.min.js:26294\n> \n> (or notebook/js/notebook.js if running from dev)\n> \n> and change:\n> \n> ```\n>     if (check_last_modified) {\n>         return this.contents.get(this.notebook_path, {content: false}).then(\n>             function (data) {\n> ```\n> \n> To\n> \n> if(false) {....\n> \n> It might be due to an clock offset, you might be right.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/484#issuecomment-154766677.\n We get sufficiently enough bug reports that I'll bump that to 4.1, maybe 4.2. \nI see if I can generate a UUID on client, or smth with a hash to do an extra-compare and prevent annoying report. \n #729 add some debug statements in Javascript, it might help us to debug. \nIf any of you can test, we would appreciate. It can give us more insight of why that's hapenning. \n Notes from 4.1 meeting:\n\nContinue with @Carreau 's debug information PR.\nInvestigate adding #739 for 4.2 \n I see this spurious message every few minutes, when the notebook file is on a server (Synology NAS Samba) accessed by OS X using Chrome. I did not occur with IPython notebook; it's new to Jupyter.\n Hi,\n\nI am seeing the same error messages. In our setup we are serving notebooks from a Samba share, and I am pretty sure that is the root cause of the error. (To be precise we are running Jupyter in a Docker container, based on the official Docker images but heavily customised, and the share is a [File Storage](https://azure.microsoft.com/en-us/services/storage/files/) on Azure, which is mounted using the SMB3 protocol on the Linux host, so it is quite complicated, but I think most of that is not related.)\n\nI have checked the developer tools in my browser and found the debug message recently added to Jupyter:\n\n```\nLast saving was done on `Mon Feb 15 2016 20:55:38 GMT+0100 (CET)`\n(save-success:2016-02-15T19:55:38.909885+00:00), \nwhile the current file seem to have been saved on \n`2016-02-15T19:55:38.977767+00:00`\n```\n\nAs you can see there is really only a very small difference, a fraction of a second, and it definitely seems to be a timestamp issue between the host and the SMB server.\n\nSimilar issues have been reported for numerous tools over the years, including [Eclipse](https://bugs.eclipse.org/bugs/show_bug.cgi?id=137011), [Gedit](https://bugs.launchpad.net/ubuntu/+source/gedit/+bug/34813), [Emacs](https://bugzilla.samba.org/show_bug.cgi?id=11078) and [Samba](https://bugzilla.samba.org/show_bug.cgi?id=4076) itself [multiple times](https://bugzilla.samba.org/show_bug.cgi?id=6925), and you can find references to Samba shares and also VirtualBox shares in the comments. \n\nAs far as I can see in the linked bug reports some tools are still unfixed, while others (most notably Eclipse) managed to work around this by changing how they check for changes. Is there a chance a similar change can be applied in Jupyter without breaking existing functionality for everyone else?\n\nThanks,\nAdam\n Possibly. I tried to work out from that link what Eclipse had done, but it looked like understanding it was going to require more digging into Eclipse stuff than I have time for.\n\nIf you're keen to see this happen, could you dig into those reports and try to summarise what the projects that have encountered this bug and fixed it (/worked around it) are doing? Then we can work out whether it makes sense to do something similar in Jupyter.\n I also have this problem on my Jupyterhub server with the user homes being mounted from a SMB server. Since it is a difference of milliseconds (always less than 1 second), i modified the check to:\n\n```\n--- main.min.js 2016-02-16 18:55:33.590396907 +0000\n+++ main.min.js.original    2016-02-16 18:53:53.965170130 +0000\n@@ -27373,7 +27373,7 @@\n@@ -27373,7 +27373,7 @@\n             return this.contents.get(this.notebook_path, {content: false}).then(\n                 function (data) {\n                     var last_modified = new Date(data.last_modified);\n-                    if (last_modified > that.last_modified) {\n+                    if ((last_modified - that.last_modified) > 1000) { // dsoares if (last_modified > that.last_modified) {\n                         console.warn(\"Last saving was done on `\"+that.last_modified+\"`(\"+that._last_modified+\"), \"+\n                                     \"while the current file seem to have been saved on `\"+data.last_modified+\"`\");\n                         dialog.modal({\n```\n\nDo you think this is a very bad solution?\n Well, it's a kludge. It's probably fine for personal use, but if we just made that the default check, I'm sure it would do the wrong thing for someone else.\n In my analysis of the bugs in other products, the reason that this issue is pervasive in many projects is not that there's an unresolved problem in Samba. It's pervasive because it's hard to get right, because of various levels of caching at the Samba and filesystem layers and multiple opportunities to pull clock information from sometimes asynchronous sources. I believe that's why it manifests in VMs as well.\n\nEclipse uses native platform APIs to track file changes, like inotify I suppose. They decided to automatically background refresh non-dirty editor windows.\n\nI don't know the codebase, but from snooping a bit, I can't find where the `FileContentsManager.save()` updates `model` with the last modified time after saving. It may be that this model returned from save() discarded and a new object is created with a subsequent call to get(), and maybe in the time between cals we see the issue.\n\nAnother possible approach that should be tolerant of clock skew and Samba bugs:\n-calculate a hash for the file while saving\n-if last modified timestamps indicate a change, and the time window is small, calculate the hash of the new file and compare to the hash of the last known saved file\n\nSince notification of a file changed in the background doesn't need to be immediate, the hashes can be calculated in a background thread/task/coroutine. The hash of the last saved file doesn't even need to be saved, if a copy is left in memory until needed.\n > -calculate a hash for the file while saving\n> -if last modified timestamps indicate a change, and the time window is small, calculate the hash of the new file and compare to the hash of the last known saved file\n\nThe problem with that approach, is that you actually need to read the hash which can be extremely huge, which can be a pain, especially on samba. And if you look at how the implementation is done, this specific case won't help, as the date/time is from last API call to save, which would require another round trip of the file to the server.\n We might be able to do the file watching strategy ([watchdog](https://pypi.python.org/pypi/watchdog) is supposed to be a cross-platform interface to the different inotify-like APIs), but it would probably be quite a bit of added complexity, and no doubt would introduce some new bugs. I also don't know how it would interact with the real-time collaboration work that @Carreau is doing.\n Once the real-time API is in, that should not have any impact on the Rt API,.\n > The problem with that approach, is that you actually need to read the hash which can be extremely huge, which can be a pain, especially on samba.\n\nNot sure how it can be \"really huge\", a notebook json file that is semi-large will break the notebook anyways.\n > Not sure how it can be \"really huge\", a notebook json file that is semi-large will break the notebook anyways.\n\nNo it breaks only if you append to the Dom. \nYou can have alternate repr that are not used and are still in the DOM. \n Ah gotcha!\n A workaround to prevent the annoying messages from regularly popping up is to **disable autosave** in your Jupyter notebooks (you can do this temporarily by executing %autosave 0 at the beginning of the notebook).\r\nThis way the pop up only comes up when you manually save the notebook.  I have the same problem, all in a sudden, this annoying message appeared. I uninstalled the Anaconda 2, and even changed the directory of Jupyter, but non of them worked.  I encountered the same warning using Docker for Windows and the [Jupyter Notebook Data Science Stack](https://github.com/jupyter/docker-stacks/tree/master/datascience-notebook).\r\nHowever, no problem when running the container on a Linux host.\r\n\r\nAs mentioned above, it could really be due to a clock offset, even though the time difference that we get from the Web console logs is super small (a few ms). I also have this problem using Docker for Windows, in this case with [spydock](https://github.com/spikewilliams/spydock), which stores Jupyter Notebook files on the local filesystem but accesses them through a docker container. In the past, problems related to timestamp-missmatches between Windows and the docker environment have been resolved by restarting Docker for Windows, but that did not help in this case. One work-around for me is to disable the autosave at the beginning. \r\n```pyrhon\r\n%autosave 0\r\n```\r\nIt's kinda annoying since I have to do this every time I reopen the docker container","Hey thank you!\n :+1: \n","Is `/` available as a shortcut? I think it's pretty common for search (cc @Carreau for non-English keyboard perspective)\n Or also why not plain f?\n Plain `f` is available so I changed it to that. I'm a little bit more in favor of it since it's on the home row.\n I probably prefer that. I know that `/` is used for search, but that tends\nto be in more unix command line tools that many notebook users are not\nfamiliar with.\n\nOn Wed, Sep 23, 2015 at 7:27 AM, Safia Abdalla notifications@github.com\nwrote:\n\n> Plain f is available so I changed it to that. I'm a little bit more in\n> favor of it since it's on the home row.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/486#issuecomment-142618226.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Makes sense to me. `f` it is.\n","Thanks!\n Thanks @KarrieK :sunflower: \n","@minrk @Carreau This PR will hopefully make RTD happier, and let it build the docs without failing. If you could review and merge to see if it builds cleanly, that would be great. If the build fails, RTD will just continue to deliver the old docs. Thanks.\n I should clarify that it builds cleanly locally. It would be interesting to see if RTD's build system will build cleanly.\n Thanks! Let's see how it goes...\n","@jfear can you test #491 and see if it fixes the issue?\n @minrk I was unable to get `self._copy()` to work, but if I used `shutil.copyfile()` everything works as expected. \n\nI am new to this so I want to be explicitly describe what I did.\n\nI had tried cloning your `minrk/notebook:copystat-can-fail` branch, but was getting errors with bootstrap.min.js. \n\nI ended up applying the patch myself using `jupyter/notebook:master`. Could this be why self._copy() was not working??\n The conclusion is not clear to me. I have the same problem: if I launch, locally, the ipynb server in a gfvs mounted directory, I'm unable to save any notebook.\nNote that this was NOT the case previously, it's an issue that I've seen only since I installed ipython3.\n","Based on our conversations about planned notebook refactors, using backbone for non-widget components seems likely in the future, so I probably wouldn't bother removing it. But if you think it's better to move it to widgets, that's fine with me.\n No that's okay, having it here is easier for now.\n","I believe this is fixed in master, and will be released with notebook-4.1 (`jupyter notebook --version`).\n I just hit this issue and it's a big problem for me.\n\nWill 4.1. be released soon? I am using conda for notebook and would prefer to keep it that way.\n We should confirm that this is fixed @SylvainCorlay is saying it isn't...\n Fixed and closing...\n > Will 4.1. be released soon?\n\nYes, we are getting it ready for release in the next week or so.\n I was having this bug also with ipython notebook, i fixed it reinstalling everything with conda, but installing the jupyter notebook directly from the repo, and everything is working nice, :).\n @juangil Thanks for the report verifying that installing Jupyter notebook from the repo has the LaTeX working nicely. We hope you are enjoying Jupyter notebook too. :book: :smile: \n it works in live notebook, but it fails with nbconvert:\n\nI'm using master branch (for both notebook and nbconvert)\n\nfor a simple macro define:\n\n$\\def\\RR{\\bf R}$ in a plain markdown cell\n\nthis generates the following log:\n\n\"\"\"\n    LaTeX Warning: No \\author given.\n\n```\n(/usr/local/texlive/2015/texmf-dist/tex/latex/base/omscmr.fd)\n! Undefined control sequence.\nl.252     \\textbackslash{}(\\RR\n                              \\textbackslash{})\n? \n! Emergency stop.\nl.252     \\textbackslash{}(\\RR\n                              \\textbackslash{})\n!  ==> Fatal error occurred, no output PDF file produced!\nTranscript written on notebook.log.\n```\n\n\"\"\"\n to let nbconvert generate pdf, we need to define using\n\\global\\def or use \\gdef instead of using \\def only\n\nhowever this requires enabling a mathjax extension:\n\nTeX: {\n  extensions: [\"begingroup.js\"]\n}\n","_copy_metadata is a strange thing, I did a check in master and I noticed it wasn't being used anywhere!  Anyways, this looks good.  Thanks Min!\n","Relaunched the tests. Mergin once green. \n @Carreau :green_book: : :green_apple: :green_heart:  Thanks for relaunching. It seems like that version 3.3/js is the one that likes to time out ;)\n @minrk @carreau Thanks. Partially fixed #479 with this PR. \n\n## Current Doc Status\n\nThe `latest` docs reflects the current docs (though examples/tutorials not ideal though accessible) with the doc updates on security, changelogs, etc.  https://jupyter-notebook.readthedocs.org/en/latest/\n\nThe `stable` docs reflect the old build which handles the examples/tutorials section better https://jupyter-notebook.readthedocs.org/en/stable/examples/Notebook/Examples%20and%20Tutorials%20Index.html\n\n## Actions on RTD\n\nThis PR along with clearing the Advanced Settings in RTD (the checkbox and the requirements which was before doc/requirements.txt). Clearing the setup.py install checkbox allowed the build to complete without running `setup.py install --force` which was what was failing.\n\n<img width=\"867\" alt=\"screen shot 2015-09-24 at 2 35 49 pm\" src=\"https://cloud.githubusercontent.com/assets/2680980/10087681/3e8e6cd0-62ca-11e5-8f80-8fc4f67903e1.png\">\n\n## Next step\n\nTry to update the latest build to fix the autogen of the notebooks on RTD without having to reenable the Advanced Setting checkbox.\n","This is explicitly reintroducing loads of XSS vulnerabilities, which I don't think we want.\n Even though it is only made available when `--NotebookApp.allow_origin=\"*\"`?  \n Ah, then maybe I misunderstand. If it only has an effect when allow_origin is already whitelisting, doesn't this do nothing at all?\n When you send a cross-origin PATCH or DELETE request, it also sends an OPTIONS request.  This allows that transaction to take place.\n I tested it on both this patch and on Kernel DELETE.\n Arg, I need to do more testing. I hate CORS more than just about anything.\n\nIf you want this to affect all API handlers, it should go on the base APIHandler class, rather than on every APIHandler subclass.\n But not all of them support the same methods\n But CORS restrictions shouldn't be relevant to that. Is there an 'allow-methods: *'?\n Sure, we could do that and then explicitly add OPTIONS to all of the SUPPORTED_METHODS\n By the way, I just checked and I can make cross-origin API requests with current master without this PR if I do `--allow-origin='*'`, so I'm not sure what this accomplishes.\n With PATCH and DELETE methods?\n It looks like `Access-Control-Allow-Methods` must be a comma separated, capitalized list.\n Aha! Now I understand, sorry. Default Access-Control-Allow-Methods is just get and post (of course, what I tried with). Adding all the verbs to APIHandler.options makes perfect sense. I understand now that this PR only makes the server behave exactly how I thought it already behaved.\n So, add a full set of `options` to `APIHandler`, and then OPTIONS to all of the SUPPORTED_METHODS?\n @blink1073 yup. I don't think any of the current `options` handlers need to exist, and a single `options` handler on the base APIHandler should be the right thing.\n @blink1073 I think you can actually delete the `SUPPORTED_METHODS` attribute on all of the handlers, but I'll check on that.\n I explicitly needed to add it to make it work.  We can add it to `APIHandler` instead.\n Yup, instead of adding it, you can remove SUPPORTED_METHODS from all the subclasses. The default value from RequestHandler should be fine.\n Okay, overhaul coming right up.\n Weird, the method doesn't get called if it is in the base class.  What kind of shenanigans is tornado pulling here?\n Nevermind, I'm just dumb as usual...\n Okay, this now passes my test suite that has DELETE and PATCH method calls.\n Do you ever sleep @minrk? \n :+1: I'd love a test for it, but I think testing cross-origin behavior should be a separate project.\n (and yes, I happen to be in bed right now!)\n good, you go to bed I'll go get dinner.  Thanks again, Min.\n @blink1073 thanks for fixing this! I just ran into this problem [here](https://github.com/ipython/ipython/issues/8849)\n The weird thing about this is the lack of `OPTIONS` should have broken Thebe (which always runs cross origin) long ago, but I'm only seeing it now.\n I think the only api method that needs this would be to halt the kernel. This is used in switching kernel types!\n The API call that @zischwartz ran into with the new version of the notebook + thebe (built from 4.x js) was the initial creation of the kernel.\n I see! @zischwartz what API call is that? (method and end point). I just want to know so that I can keep it in mind.\n Initial creation is POST, so should have been allowed without this patch.\n","Is there a reason to not reinstate building the rst docs on RTD? When did we stop doing that?\n @minrk The rst docs should be built on RTD. This PR makes the docs current for the end user while we troubleshoot why RTD was failing for the past month to build the docs correctly. \n\nI think that nbgrader has a good model for how to build the rst files. My recommendation would be to refactor the docs here to use that model. This PR just brings the docs to being current in the interim.\n @willingc fair enough\n Thanks @minrk. :boat: :sunrise: :ocean: \n",":+1: as one who was confused by this. \n","Line 185 of searchandreplace.js `.attr('id', 'search-and-replace')` should be `.attr('id', 'find-and-replace')`, and after doing that you'll need to update the less file - replace `#search-and-replace {` in `searchandreplace.less` with `#find_and_replace {`.  You can then rebuild the CSS by running `python setup.py css` in the notebook root IIRC\n (I would have left those as line comments, but I couldn't figure out how to do it since those lines don't show in your diff and GitHub seems to have disabled commenting on lines that don't show in the diff - lame!)\n @jdfreder \u2014 Solid!\n LGTM\n Sweet!  Thanks @captainsafia \n I think the file name `searchandreplace.js` `searchandreplace.less` should be also changed.\n","Thanks!\n","Oh, and if it helps any I tried refactoring this with `display.Javascript` using the `lib` keyword, and it didn't seem to make any difference.\n My guess is that it's not waiting for the js to load, so the plugin hasn't been set up yet. I'm not sure the exact right answer, though. Will investigate.\n Thanks @minrk - And FYI, I'm perfectly fine with the answer \"you need to write your javascript differently\" if that will make it work.  (Although in that case I guess this issue should be transmuted to _documenting_ how to do this.)\n Thanks, I'm pretty sure that will be the answer, I just don't know what the right version of differently is, yet.\n Have you figured this out yet? We agree that the plugin is probably not loaded yet.\n You'll need to remove the `<html>` and `<body>` tags, etc.  The html string you display should just be the script tag to load the js and the relevant data.\n @jasongrout - if I just remove the `<html>`/`</html>` and `<body>`/`</body>` tags and do the example in the original post, I see the exact same result.  I also tried with/without `<head>` and with/without the  `<style>` section or `<meta>`, and still the same: the script continues to profess no knowledge of a `dataTable` attribute.  Or did you mean something else?\n I tried for a long time to get this to be clean, but didn't come up with anything useful.\n\nIf the module were requirable, you should be able to do:\n\n``` javascript\nrequire(['dataTable-url'], function ($) {\n    $(\"#mytable\").dataTable()\n}\n```\n\nHowever, since that doesn't work, you have to load the extension with a script tag, and you get a race for whether the plugin has been loaded. The only way I've managed to deal with that is by checking if `.dataTable` is defined, and rescheduling the call if not (essentially polling for the plugin to be loaded).\n\n``` python\n# DataTable class modified from \n# http://blog.dornea.nu/2014/08/28/using-jquery-datatables-with-ipython/\n\nimport uuid\nfrom IPython.display import HTML\n\ndef DataTable(df):\n    \"\"\"Display a pandas.DataFrame as jQuery DataTables\"\"\"\n    # Generate random container name\n    id_container = uuid.uuid1()\n    output = \"\"\"\n<div id=\"datatable-container-{id_container}\">\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdn.datatables.net/u/dt/dt-1.10.12/datatables.min.css\"/>\n  <script type=\"text/javascript\" src=\"https://cdn.datatables.net/u/dt/dt-1.10.12/datatables.min.js\"></script>\n  <script type=\"text/javascript\">\n    (function () {{\n      var dt = 100;\n      function tablify() {{\n        if ( $().dataTable === undefined ) {{\n          console.log(\"no dataTable\");\n          dt = dt * 1.5; // slow-down checks for datatable as time goes on;\n          setTimeout(tablify, dt);\n          return;\n        }}\n      $('#datatable-container-{id_container} table.datatable').dataTable();\n      }}\n      $(document).ready(tablify)\n      // tablify();\n    }})();\n  </script>\n  <!-- Insert table below -->\n  {table}\n</div>\n    \"\"\".format(\n        id_container=id_container,\n        table=df.to_html(index=False, classes=\"datatable dataframe\"))\n    return HTML(output)\n```\n\nBizarrely, that only works in the notebook, and the plugin is never loaded on nbviewer, which makes absolutely zero sense to me, because I can prove the javascript is loaded, it just doesn't register the plugin with jQuery for some reason that I don't understand.\n I was not able to make it work as explained above, but I found a terrible hack of my own:\n- download https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js and save it as ~/.jupyter/custom/custom.js (or add to the end of that file)\n- download https://cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css and save it as ~/.jupyter/custom/custom.css (or add to the end of that file)\n\nand then simply\n\n```\nfrom IPython.display import HTML\noutput = \"\"\"\n<table id=\"example\" class=\"display\">\n<thead>\n<tr><th>Name</th><th>Position</th></tr></thead>\n<tbody><tr><td>John</td><td>Accountant</td></tr>\n<tr><td>Jane</td><td>Cashier</td></tr></tbody></table>\n<script type=\"text/javascript\">\n$(document).ready(function() {{\n  $('#example').DataTable();\n}})\n</script>\n\"\"\"\nHTML(output)\n```\n\nI was not able to add code to custom.js to actually load dataTables.min.js file, so I had to paste it verbatim.\n As I am running in the same trouble, I am interested in any update on a (cleaner) fix for this issue. Thanks\n Here's what I have been trying, based on [this Jupyter google groups discussion](https://groups.google.com/forum/#!msg/jupyter/G51xHzC_bW8/hPrdBbCrAAAJ) and [this dataTables example](https://datatables.net/examples/basic_init/zero_configuration.html) ; after having droped the dataTables folder in nbextensions\n\n``` javascript\n%%javascript\n\nrequire([\"jquery\", \"base/js/namespace\"], function($, Jupyter){\n  var url = Jupyter.notebook.base_url + \"nbextensions/dataTables/DataTables-1.10.9/media/js/\";\n    // one way to get css in there... or you can hard-inject it in, which will survive nbviewer!\n    $(\"#mypackage-css\").remove();\n    $(\"<link/>\", {id: \"mypackage-css\", rel: \"stylesheet\", href: url + \"../css/jquery.dataTables.min.css\"})\n        .appendTo(\"head\");\n  require([url + \"jquery.dataTables.min.js\"], function(datatables){\n    //element.append('<table id=\"example\" class=\"display\" width=\"100%\" cellspacing=\"0\"><tr><td>Test</td></tr></table>');\n    var html_table = `\n      <table id=\"example\" class=\"display\" width=\"100%\" cellspacing=\"0\">\n        <thead>\n            <tr>\n                <th>Name</th>\n                <th>Position</th>\n                <th>Office</th>\n                <th>Age</th>\n                <th>Start date</th>\n                <th>Salary</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr>\n                <td>Tiger Nixon</td>\n                <td>System Architect</td>\n                <td>Edinburgh</td>\n                <td>61</td>\n                <td>2011/04/25</td>\n                <td>$320,800</td>\n            </tr>\n        </tbody>\n    </table>\n            `\n    element.append(html_table);\n    $('#example').DataTable( {} );\n    element.append(\"works?\");\n  }, function(error){\n      alert(\"error\");\n    // handle an error\n  });\n\n});\n```\n\nThe alert(error) is never reached, which would mean that the module has been kindly loaded , however there is a requirejs error : \n\n```\njavascript error adding output!\nError: Mismatched anonymous define() module\n```\n\nAny clue ? I am using jupyter notebook v 4.2.2\n","I think this makes sense as a fix, but I would like to understand why I see this behavior _some_ of the time ...will keep looking...\n This looks good, merging.\n This looks good, actually merging ;-)\n","Ah, cool. Thanks @minrk.\n :+1: \n","Are you sure you are typing it correctly - the actual keystrokes are `d d` (no comma char).\n Feel like an idiot... I should have tried the dd (duh vim). The comma threw me off.\n Hmm. I got stuck on this too. But I don't feel like an idiot. I feel  like I've been misled by inadequate documentation. Are there any other characters in the shortcuts that shouldn't actually be typed?\n When you see e.g. 'Shift-M', the - shouldn't be typed.\n\nOn 29 March 2016 at 10:10, tnearey notifications@github.com wrote:\n\n> Hmm. I got stuck on this too. But I don't feel like an idiot. I feel like\n> I've been misled by inadequate documentation. Are there any other\n> characters in the shortcuts that shouldn't actually be typed?\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/500#issuecomment-203003575\n Fair enough. \nBut hyphenation is a pretty common convention with \u201cmode keys\u201d, meaning \u2018simultaneously pressing the two keys joined by -\u2019 ?\n(So common, I didn\u2019t even notice it was there.)\nCan the same be said for  comma (in the meaning 'sequentially pressing the keys separated by , \u2018) in any domain?\n\n> On Mar 29, 2016, at 11:47 AM, Thomas Kluyver notifications@github.com wrote:\n> \n> When you see e.g. 'Shift-M', the - shouldn't be typed.\n> \n> On 29 March 2016 at 10:10, tnearey notifications@github.com wrote:\n\nTerrance Nearey\nt.nearey@ualberta.ca\n I don't know of many applications that have shortcut sequences like that. Emacs appears to use spaces to separate consecutive parts of a shortcut. Maybe that would be a bit better, but I suspect someone is going to get confused whatever we put.\n","Let's avoid submodules. They were a source of constant problems when we used them in IPython. I think intersphinx should provide everything we need to link back and forth, and we just need to be more judicious about providing the links. Does that seem sufficient?\n @minrk The main issue with Intersphinx is that it can't be used in toctrees. \n\nSentry has a good approach to creating docs from multiple repos https://github.com/getsentry/sentry-docs\n Sentry uses submodules everywhere, and I think that would not be a good fit for us. Using submodules would mean that every PR against any repo with docs must also be a PR against the docs repo to update the ref for the submodule.\n @minrk Reasonable point. I think Sentry is using a doc sync hook to monitor changes in the individual repos to avoid the extra docs PR.\n\nEither way it is likely simpler to write a work around to the Sphinx/intersphinx toctree limitation and create/use something that wraps and bundles all of the docs with minimal need for manual changes as individual repos change.\n Yeah, I don't think we want to do down the submodules path for our docs. If\nwe got to the point where we wanted fully integrated docs, I think it would\nmake more sense to just put them all in one repo.\n\nI think we can get most of the integration we want with a very minimal work\n- possibly without mucking with the intersphinx/toc stuff. I think the\n  starting point should be a manually shared and well designed Subproject\n  landing page that each repo has in the same place. We could maintain the\n  master copy of that file in jupyter/jupyter and just copy it into place\n  whenever it changes (which should only be when new subprojects come and go).\n\nOn Mon, Sep 28, 2015 at 12:28 PM, Carol Willing notifications@github.com\nwrote:\n\n> @minrk https://github.com/minrk Reasonable point. I think Sentry is\n> using a doc sync hook to monitor changes in the individual repos to avoid\n> the extra docs PR.\n> \n> Either way it is likely simpler to write a work around to the\n> Sphinx/intersphinx toctree limitation and create/use something that wraps\n> and bundles all of the docs with minimal need for manual changes as\n> individual repos change.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/501#issuecomment-143850961.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n closed by #502\n","@minrk Thanks. :octopus: \n","Looks great !\n\nJust a thought - and if \"Untiltled.ipynb\" notebooks were created as\n\"Untitled_<kernel>.ipynb\" ?\n\nOn 28 September 2015 at 14:07, Julien Rebetez notifications@github.com\nwrote:\n\n> This adds the kernel name to the running notebooks list, as requested in\n> #395 https://github.com/jupyter/notebook/issues/395 .\n> \n> I had to change the parameters passed to the sessions_loaded.Dashboard\n> event to turn it from just the id to an object so it can store the id +\n> kernel name (and maybe other things in the future). It _seems_ like this\n> does not break things, but if someone familiar with the js side can review\n> this, that would be great.\n> \n> [image: jupyter_kernel_name]\n> \n> ## https://cloud.githubusercontent.com/assets/506602/10134824/25802a90-65e9-11e5-9596-702b048a8ce2.png\n> \n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/jupyter/notebook/pull/503\n> Commit Summary\n> - Adds kernel name to running notebooks list\n> \n> File Changes\n> - _M_ notebook/static/tree/js/kernellist.js\n>   https://github.com/jupyter/notebook/pull/503/files#diff-0 (9)\n> - _M_ notebook/static/tree/js/sessionlist.js\n>   https://github.com/jupyter/notebook/pull/503/files#diff-1 (5)\n> - _M_ notebook/static/tree/less/tree.less\n>   https://github.com/jupyter/notebook/pull/503/files#diff-2 (6)\n> \n> Patch Links:\n> - https://github.com/jupyter/notebook/pull/503.patch\n> - https://github.com/jupyter/notebook/pull/503.diff\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/503.\n Nice! It seems like it should be the display_name not the short kernel name, though. Can you make that change?\n\n@mjbright there are some technical reasons that would make the kernel name affecting the new notebook name not quite as simple as it sounds (the kernel name is not available when the notebook name is chosen), so I'd leave that for now.\n @minrk Changed that, looks better now :\n\n![jupyter_kernel_display_name](https://cloud.githubusercontent.com/assets/506602/10158290/5a9a09be-6691-11e5-9d3e-c08467d7ae35.png)\n @julienr thanks!\n","@tleeuwenburg The Hub most certainly does not need to run as root in general, and you can definitely do what you are asking for right now, without any extension of JuptyerHub at all. The _default_ configuration is the simplest, where it needs access to the PAM service and using setuid to switch users. But the design of JupyterHub is focused on making it easy to have custom Authenticators (handle authentication) and Spawners (spawning servers for users). Existing custom Authenticators include using GitHub OAuth, Bitbucket, CILogon, Google OAuth, a simple dictionary, etc. And it's pretty common to use docker to spawn user servers, but you can also use PBS or any other mechanism.\n","I'm running to a workshop so I might not be able to give you feedback before Thursday. \n\nMergeopt basically allow to merge the configuration with the default of the the parent class, so that if you set the option on `Cell`, it affects `MarkdownCell`, `CodeCell`, `RawCell`, but if you **also** set the config on `MarkdownCell` the config in MarkdownCell override the value set in `Cell`, the the option dict bubble down to `Cell`, which  set an attribute on the instance which is the use.\n\nThis is highly historical behavior has we had many more cell types before, like HtmlCell and header 1-6. \nSuch an abstraction layer might not be needed anymore. \n @Carreau, I think I get it. So should we also make sure that the config in `RawCell` is also a `ConfigSection` object?\n\nAlso, I think Travis needs to be kicked.\n Any updates on this @Carreau?\n I'm still in conference until Thursday. Haven't had time to site an code.\n\n> Le 6 oct. 2015 \u00e0 07:57, Safia Abdalla notifications@github.com a \u00e9crit :\n> \n> Any updates on this @Carreau?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n @takluyver \u2014 Thanks for the feedback! Greatly appreciated.\n\nI'll leave this here in case we decide to move forward with the config system.\n Tagging as `closed-PR`, and closing as this is seem to have stalled a bit. \nThis is just to keep the PR queue a bit shorter and focusing on what is actually worked on.\nFeel free to reopen, (or ask for reopening if you don't have enough right to do so). \nIf you were not the original author, and want to revive this, please feel free to do so. \n\nAlso, we are doing our best to enable people to learn how to contribute to the project, and get commits in. If you are missing time or have any other issues that prevent you to work on that, please feel free to tell us, we can try to build on top of what you did. \n\nThanks a lot and looking forward to see this moving forward again.\n","What does this do with messages that don't fit into the 60Hz limit?\n\nMy main concern with this is that the `Comm` layer (when used with Widgets) often ends up sending lots of small messages, possibly at higher rates that 60Hz.\n\nCan you clarify how this addresses https://github.com/ipython/ipython/issues/6516 ?\n @ellisonbg there are a few ways to bring down the notebook. By far, the primary cause of that is flooding the frontend with iopub messages. Typically, on the frontend the limiting factor is putting output on the page. The most expensive version of which is usually stream output, which has to be merged and processed into HTML. This limits the number of those messages to avoid both clogging the network and choking the CPU in the browser by churning message handlers. The secondary fix, and probably the more important one, is setting an upper limit to how much stream output should be considered for merging when there are consecutive stream outputs. Technically, the two are independent changes, so I can separate them into two PRs, if you prefer. But both mitigate the problem of output flooding.\n\nNote that from idle, it won't start buffering until the buffer is full, so you get 60 messages before any throttling begins. If you are sending messages at > 60 Hz _constantly_, something is probably wrong.\n OK that helps, but I still don't quite understand. Is the benefit that you\nare dropping all text output > 60/sec? Or does this PR still send all\noutput, just in a different temporal pattern?\n\nOn Tue, Sep 29, 2015 at 7:47 AM, Min RK notifications@github.com wrote:\n\n> @ellisonbg https://github.com/ellisonbg there are a few ways to bring\n> down the notebook. By far, the primary cause of that is flooding the\n> frontend with iopub messages. Typically, on the frontend the limiting\n> factor is putting output on the page. The most expensive version of which\n> is usually stream output, which has to be merged and processed into HTML.\n> This limits the number of those messages to avoid both clogging the network\n> and choking the CPU in the browser by churning message handlers. The\n> secondary fix, and probably the more important one, is setting an upper\n> limit to how much stream output should be considered for merging when there\n> are consecutive stream outputs. Technically, the two are independent\n> changes, so I can separate them into two PRs, if you prefer. But both\n> mitigate the problem of output flooding.\n> \n> Note that from idle, it won't start buffering until the buffer is full, so\n> you get 60 messages before any throttling begins. If you are sending\n> messages at > 60 Hz _constantly_, something is probably wrong.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/506#issuecomment-144035274.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Is the benefit that you\n> are dropping all text output > 60/sec?\n\nMin Never said he was dropping, he is queuing with and output rate of 60Hz max. \n I think this is actually too complicated and sensitive, and I no longer think we should put a hasty solution like this one in 4.1.\n\nThe more important fix here - splitting stream output - technically violates the ANSI escape state machine for long stream output.  I don't expect it to be a real issue, but I'm usually wrong about that sort of thing. We could fix this more robustly, but it's complicated and sensitive regex stuff.\n Oh, yeah, I hadn't thought about that state machine and its relation to the\noutput splitting.\n\nStill, this was very valuable in helping us to understand the possibilities.\n\nOn Fri, Oct 2, 2015 at 7:42 AM, Min RK notifications@github.com wrote:\n\n> I think this is actually too complicated and sensitive, and I no longer\n> think we should put a hasty solution like this one in 4.1.\n> \n> The more important fix here - splitting stream output - technically\n> violates the ANSI escape state machine for long stream output. I don't\n> expect it to be a real issue, but I'm usually wrong about that sort of\n> thing. We could fix this more robustly, but it's complicated and sensitive\n> regex stuff.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/506#issuecomment-144996447.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I should make it clear that limiting the size of stream output that we re-process has a _huge_ impact when there's lots of stream outputs. If we found a way to preserve the escape state machine and the end of the previous output, it would go a long way to limiting the impact of stream floods.\n @minrk should we close this one?\n Or retarget for 5.0?\n Sorry, I cant' read, it is targeted for 4.2. Leave at that....\n Once 4.1 is released this will need a rebase. \n If we're queueing outputs in the server, could the server process stream outputs as a stream, and have enough of the ANSI state machine implemented to tell where it's probably safe to split it into chunks to send to the frontend?\n In theory, sure. Just depends how much work we want the server to be doing.\n Related: putting more stream-related work in the server means that flooding output will increasingly be able swamp the server itself, which would cause even _killing_ this or any other kernel to become an unavailable action.\n I've rebased this on #931, so it is now only a js-side fix.\n Reviving this. I'm +1. is there any reason to add  a warning message of some sort ?\n I don't think there's anything to warn about.\n Thank you!\n at this point, accidentally printing a lot to stdout (just doubled checked with i in range(10000000): print i) still freezes the browser (and, it seems, the kernel as well judging from the fact that a new windows can't open localhost:8888 for a while). running notebook 4.2.1. \n\ni thought this issue is resolved, if not what needs to be done?\n - browser freezes when I have a large output for logging.info \n- logging only to a file seems improssible\n\nany way to go around this? (I'm using an external library that has  verbose logging, which I'd like to debug)\n > logging only to a file seems improssible\n\nWhy is that impossible? [Logging to a file](https://docs.python.org/3/howto/logging.html#logging-to-a-file) should be supported.\n\nOur logging machinery was causing some issues with logging; if your ipykernel is older than 4.4, please upgrade it.\n","Is this issue resolved? I get same error when starting jupyter notebook on a public hosting server, dreamhost.  Please share if there is a solution/workaround. \n\n(venv)[ps472256]$ pip list\nbackports.ssl-match-hostname (3.4.0.2)\nbokeh (0.10.0)\ncertifi (2015.9.6.2)\nchardet (2.3.0)\ncolorama (0.3.3)\nCython (0.23.2)\ndecorator (4.0.4)\ndiff-match-patch (20121119)\ndistribute (0.7.3)\nDjango (1.8.4)\ndjango-bootstrap3 (6.2.2)\ndjango-bower (5.0.4)\ndjango-csvimport (2.4)\ndjango-import-export (0.2.8)\ndjango-nvd3 (0.8.2)\ndjango-registration-redux (1.2)\ndjangorestframework (3.2.3)\nFlask (0.10.1)\nfunctools32 (3.2.3.post2)\ngreenlet (0.4.9)\nipykernel (4.0.3)\nipython (4.0.0)\nipython-genutils (0.1.0)\nipywidgets (4.0.3)\nitsdangerous (0.24)\nJinja2 (2.8)\njsonschema (2.5.1)\njupyter (1.0.0)\njupyter-client (4.0.0)\njupyter-console (4.0.2)\njupyter-core (4.0.6)\nMarkdown (2.6.2)\nMarkupSafe (0.23)\nmatplotlib (1.4.3)\nmistune (0.7.1)\nmock (1.3.0)\nMySQL-python (1.2.5)\nnbconvert (4.0.0)\nnbformat (4.0.0)\nnose (1.3.7)\nnotebook (4.0.5)\nnumpy (1.9.3)\npandas (0.16.2)\npath.py (8.1.1)\npatsy (0.4.0)\npbr (1.8.0)\npexpect (3.3)\npickleshare (0.5)\npip (7.1.2)\nptyprocess (0.5)\nPygments (2.0.2)\npyparsing (2.0.3)\npystache (0.5.4)\npython-dateutil (2.4.2)\npython-nvd3 (0.13.7)\npython-slugify (0.0.9)\npytz (2015.6)\nPyYAML (3.11)\npyzmq (14.7.0)\nqtconsole (4.0.1)\nrequests (2.7.0)\nrest-pandas (0.3.2)\nscipy (0.16.0)\nsetuptools (18.3.2)\nsimplegeneric (0.8.1)\nsix (1.9.0)\nstatsmodels (0.6.1)\ntablib (0.10.0)\nterminado (0.5)\ntornado (4.2.1)\ntraitlets (4.0.0)\nUnidecode (0.4.18)\nWerkzeug (0.10.4)\nThanks\n It  worked for me after making a slight change in the openssl parameters. i am saving both the key and certificate in the same file, 'mycert.pem'.  \n\noriginal: \n$sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout mycert.**key** -out mycert.pem\nmy version: \n$sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout mycert.**pem** -out mycert.pem\n I'm getting the same error as well trying to start a notebook server on a Ubuntu 14.04 instance on Digital Ocean.  Unfortunately, guy1nj's workaround doesn't work for me, although it changes the error from `SSLError: [SSL] PEM lib` to `ssl.SSLError: [SSL: WRONG_VERSION_NUMBER] wrong version number`\n @stahlous If possible, would you mind sharing the traceback here from the error message? It would be helpful to isolate if it is the same tornado source file that is causing the error. Thanks.\n\n@minrk Failing above at https://github.com/tornadoweb/tornado/blob/master/tornado/netutil.py#L468. Looks like this issue on the tornado site is related: https://github.com/tornadoweb/tornado/issues/1534 and may have a workaround for @stahlous\n Here's the traceback from making one request to the server. \n\n```\n$ jupyter notebook\n[I 13:06:32.165 NotebookApp] Writing notebook server cookie secret to /run/user/1000/jupyter/notebook_cookie_secret\n[I 13:06:32.240 NotebookApp] Serving notebooks from local directory: /home/<home_directory>\n[I 13:06:32.241 NotebookApp] 0 active kernels\n[I 13:06:32.241 NotebookApp] The IPython Notebook is running at: https://[all ip addresses on your system]:8888/\n[I 13:06:32.241 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[W 13:06:41.161 NotebookApp] SSL Error on 10 ('199.116.169.254', 42894): [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:600)\n[E 13:06:41.162 NotebookApp] Uncaught exception\n    Traceback (most recent call last):\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/http1connection.py\", line 693, in _server_request_loop\n        ret = yield conn.read_response(request_delegate)\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/gen.py\", line 870, in run\n        value = future.result()\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/concurrent.py\", line 215, in result\n        raise_exc_info(self._exc_info)\n      File \"<string>\", line 3, in raise_exc_info\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/gen.py\", line 876, in run\n        yielded = self.gen.throw(*exc_info)\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/http1connection.py\", line 168, in _read_message\n        quiet_exceptions=iostream.StreamClosedError)\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/gen.py\", line 870, in run\n        value = future.result()\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/concurrent.py\", line 215, in result\n        raise_exc_info(self._exc_info)\n      File \"<string>\", line 3, in raise_exc_info\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/iostream.py\", line 1243, in _do_ssl_handshake\n        self.socket.do_handshake()\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/ssl.py\", line 810, in do_handshake\n        self._sslobj.do_handshake()\n    ssl.SSLError: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:600)\n[W 13:06:41.237 NotebookApp] SSL Error on 10 ('134.134.139.77', 49400): [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:600)\n[E 13:06:41.238 NotebookApp] Uncaught exception\n    Traceback (most recent call last):\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/http1connection.py\", line 693, in _server_request_loop\n        ret = yield conn.read_response(request_delegate)\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/gen.py\", line 870, in run\n        value = future.result()\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/concurrent.py\", line 215, in result\n        raise_exc_info(self._exc_info)\n      File \"<string>\", line 3, in raise_exc_info\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/gen.py\", line 876, in run\n        yielded = self.gen.throw(*exc_info)\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/http1connection.py\", line 168, in _read_message\n        quiet_exceptions=iostream.StreamClosedError)\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/gen.py\", line 870, in run\n        value = future.result()\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/concurrent.py\", line 215, in result\n        raise_exc_info(self._exc_info)\n      File \"<string>\", line 3, in raise_exc_info\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/iostream.py\", line 1243, in _do_ssl_handshake\n        self.socket.do_handshake()\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/ssl.py\", line 810, in do_handshake\n        self._sslobj.do_handshake()\n    ssl.SSLError: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:600)\n[W 13:06:41.285 NotebookApp] SSL Error on 10 ('134.134.139.77', 62970): [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:600)\n[E 13:06:41.286 NotebookApp] Uncaught exception\n    Traceback (most recent call last):\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/http1connection.py\", line 693, in _server_request_loop\n        ret = yield conn.read_response(request_delegate)\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/gen.py\", line 870, in run\n        value = future.result()\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/concurrent.py\", line 215, in result\n        raise_exc_info(self._exc_info)\n      File \"<string>\", line 3, in raise_exc_info\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/gen.py\", line 876, in run\n        yielded = self.gen.throw(*exc_info)\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/http1connection.py\", line 168, in _read_message\n        quiet_exceptions=iostream.StreamClosedError)\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/gen.py\", line 870, in run\n        value = future.result()\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/concurrent.py\", line 215, in result\n        raise_exc_info(self._exc_info)\n      File \"<string>\", line 3, in raise_exc_info\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/iostream.py\", line 1243, in _do_ssl_handshake\n        self.socket.do_handshake()\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/ssl.py\", line 810, in do_handshake\n        self._sslobj.do_handshake()\n    ssl.SSLError: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:600)\n[W 13:06:41.815 NotebookApp] SSL Error on 10 ('134.134.139.72', 54779): [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:600)\n[E 13:06:41.815 NotebookApp] Uncaught exception\n    Traceback (most recent call last):\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/http1connection.py\", line 693, in _server_request_loop\n        ret = yield conn.read_response(request_delegate)\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/gen.py\", line 870, in run\n        value = future.result()\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/concurrent.py\", line 215, in result\n        raise_exc_info(self._exc_info)\n      File \"<string>\", line 3, in raise_exc_info\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/gen.py\", line 876, in run\n        yielded = self.gen.throw(*exc_info)\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/http1connection.py\", line 168, in _read_message\n        quiet_exceptions=iostream.StreamClosedError)\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/gen.py\", line 870, in run\n        value = future.result()\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/concurrent.py\", line 215, in result\n        raise_exc_info(self._exc_info)\n      File \"<string>\", line 3, in raise_exc_info\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/iostream.py\", line 1243, in _do_ssl_handshake\n        self.socket.do_handshake()\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/ssl.py\", line 810, in do_handshake\n        self._sslobj.do_handshake()\n    ssl.SSLError: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:600)\n[W 13:06:41.863 NotebookApp] SSL Error on 10 ('134.134.139.72', 58004): [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:600)\n[E 13:06:41.863 NotebookApp] Uncaught exception\n    Traceback (most recent call last):\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/http1connection.py\", line 693, in _server_request_loop\n        ret = yield conn.read_response(request_delegate)\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/gen.py\", line 870, in run\n        value = future.result()\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/concurrent.py\", line 215, in result\n        raise_exc_info(self._exc_info)\n      File \"<string>\", line 3, in raise_exc_info\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/gen.py\", line 876, in run\n        yielded = self.gen.throw(*exc_info)\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/http1connection.py\", line 168, in _read_message\n        quiet_exceptions=iostream.StreamClosedError)\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/gen.py\", line 870, in run\n        value = future.result()\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/concurrent.py\", line 215, in result\n        raise_exc_info(self._exc_info)\n      File \"<string>\", line 3, in raise_exc_info\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/site-packages/tornado/iostream.py\", line 1243, in _do_ssl_handshake\n        self.socket.do_handshake()\n      File \"/home/<home_directory>/anaconda3/lib/python3.4/ssl.py\", line 810, in do_handshake\n        self._sslobj.do_handshake()\n    ssl.SSLError: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:600)\n```\n I don't know why but @guy1nj trick works for me !\n\n``` sh\n$ conda info\nCurrent conda install:\n\n             platform : linux-64\n        conda version : 3.18.2\n  conda-build version : 1.18.0\n       python version : 3.4.3.final.0\n     requests version : 2.8.0\n```\n @hadim Thanks for sharing.\n Encountering this same issue.  Logs:\n\n```\n[E 23:29:52.181 NotebookApp] Uncaught exception\nTraceback (most recent call last):\n  File \"/usr/bin/anaconda/lib/python2.7/site-packages/tornado/http1connection.py\", line 693, in _server_request_loop\n    ret = yield conn.read_response(request_delegate)\n  File \"/usr/bin/anaconda/lib/python2.7/site-packages/tornado/gen.py\", line 870, in run\n    value = future.result()\n  File \"/usr/bin/anaconda/lib/python2.7/site-packages/tornado/concurrent.py\", line 215, in result\n    raise_exc_info(self._exc_info)\n  File \"/usr/bin/anaconda/lib/python2.7/site-packages/tornado/gen.py\", line 876, in run\n    yielded = self.gen.throw(*exc_info)\n  File \"/usr/bin/anaconda/lib/python2.7/site-packages/tornado/http1connection.py\", line 168, in _read_message\n    quiet_exceptions=iostream.StreamClosedError)\n  File \"/usr/bin/anaconda/lib/python2.7/site-packages/tornado/gen.py\", line 870, in run\n    value = future.result()\n  File \"/usr/bin/anaconda/lib/python2.7/site-packages/tornado/concurrent.py\", line 215, in result\n    raise_exc_info(self._exc_info)\n  File \"<string>\", line 3, in raise_exc_info\nSSLError: [SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:590)\n```\n\nGenerating cert with: \n    openssl req -x509 -nodes -days 1000 -newkey rsa:2048 -keyout mycert.pem -out mycert.pem\n Same issue here, I was following all the instruction exactly on \nhttp://jupyter-notebook.readthedocs.org/en/latest/public_server.html \nThe issue is solved with the trick @guy1nj provided\nThanks!\n Thanks all for sharing what is working in your environments. It helps others that may have similar environments. \n\nTo assist and better cover different deployment environments, we'll be adding references to the OpenSSL documentation (https://www.openssl.org/ and https://www.openssl.org/docs/) as well as OpenSSL Cookbook (https://www.feistyduck.com/books/openssl-cookbook/) to the Jupyter documentation. These resources should assist folks find the certificate creation parameters that work best in their environment.\n\n@ellisonbg @Carreau @minrk \n Can't get this to work. Getting `[SSL: WRONG_VERSION_NUMBER] wrong version number (_ssl.c:600)` like most.\n @cavaunpeu using https instead of http may solve it\n @vinc30 in what sense? where would I make this change? I'm trying to set up a remote notebook on a server that doesn't allow (to my knowledge) incoming http requests. so, trying access the port via ssh instead.\n Reporting that @guy1nj trick worked like a charm. Thanks\n Fixed by #507. The openssl call and jupyter call had fallen out of sync, so there was a missing `--keyfile mycert.key` arg.\n Had this issue, fixed using https instead of http as suggested by @cavaunpeu\n @djakubosky Thanks - this helped me\n For me, using https explicitly in the URL solved the problem.\n is there a way to have the server automagically redirect http:// to https://\n @dansteingart it's possible if http is on port 80 and https is on 443. Tornado doesn't allow redirecting an http request _already on the correct port_ to https.\n I have this error when launch ipython notebook in ubuntu, i tried the command above, it doesnt work\n\nTraceback (most recent call last):\n  File \"/usr/local/bin/jupyter-notebook\", line 7, in <module>\n    from notebook.notebookapp import main\n  File \"/usr/local/lib/python2.7/dist-packages/notebook/notebookapp.py\", line 61, in <module>\n    from .services.contents.manager import ContentsManager\n  File \"/usr/local/lib/python2.7/dist-packages/notebook/services/contents/manager.py\", line 16, in <module>\n    from nbformat import sign, validate, ValidationError\n  File \"/usr/local/lib/python2.7/dist-packages/nbformat/**init**.py\", line 33, in <module>\n    from .validator import validate, ValidationError\n  File \"/usr/local/lib/python2.7/dist-packages/nbformat/validator.py\", line 10, in <module>\n    from jsonschema import ValidationError\n  File \"/usr/local/lib/python2.7/dist-packages/jsonschema/**init**.py\", line 18, in <module>\n    from jsonschema.validators import (\n  File \"/usr/local/lib/python2.7/dist-packages/jsonschema/validators.py\", line 8, in <module>\n    import requests\n  File \"/usr/local/lib/python2.7/dist-packages/requests/**init**.py\", line 53, in <module>\n    from .packages.urllib3.contrib import pyopenssl\n  File \"/usr/local/lib/python2.7/dist-packages/requests/packages/urllib3/contrib/pyopenssl.py\", line 70, in <module>\n    ssl.PROTOCOL_SSLv3: OpenSSL.SSL.SSLv3_METHOD,\nAttributeError: 'module' object has no attribute 'PROTOCOL_SSLv3'\n\nanyone can help ?\n Make sure your port is 443 when enabling ssl. That was all I had to change. https://example.com just worked after changing port.\n How do I get the IDLCR pem module? Port : 443\n","@parente and @Carreau I'm using a lot of the code from each of your resources on the topic.  I put some references to your respective sources (links at the bottom), let me know if this is okay or if you'd like me to remove the references.  \n If we can move content from my side to jupyter docs I'm fine with it. So don't feel obliged to reference me.\n Oh, hey, cool. Glad to see the blog post was worth something. Pull whatever you want from it. The ref is fine. I'll update my post to point to the official docs on the topic too.\n LGTM\n","Not quite following what you mean. Can you clarify?\n When a cell is selected and Shift +m is clicked nothing happens. It would be mora natural that the selected cell and the cell below are merged. \n\nNow this is executed as @ruoyu0088 described (selecting two cells and then merging with Shift + m).\n I totally agree with @ruoyu0088. I think the old shortcut (SHIFT+M) of merging two cells it too convenient to be abandoned. The new multi-cell merging is great but merging just two cells became much more cumbersome, defeating the purpose of a \"shortcut\". In fact, I find it easier now to use the mouse and select the menu _Edit -> Merge cell below_.\n\nGiven that we have a menu entry for this action, I don't see any reason of removing the old shortcut. \n @ellisonbg please consider removing the needs-info tag, I think the additional comments made clear what the issue is (if not please ask).\n Ahh, I now understand the actual request. I don't remember exactly, but in latest stable shift+M doesn't merge below when a single cell is selected. Is this behavior from an older ipython version (sorry my memory is foggy)...\n\nBut I will mark this as 4.1 and have a look at making sure that there is a good workflow for simple cell merges.\n @ellisonbg thanks! I'm quite sure the shortcut disappeared on notebook v4.0, but was there before.\n Pinging myself so we look at this tomorrow. No idea if it's realistic to put it into 4.1 or not, but since  the UX is part of the select conversation, at least worth keeping in mind, even if the specific question ends up post-4.1\n closed by #822\n","I don't know if this is possible for us to do. You may need to change you browser shortcuts\n\nSent from my iPhone\n\n> On Sep 30, 2015, at 2:30 AM, eulerreich notifications@github.com wrote:\n> \n> Currently, in chrome, if I want to recall the previous command in the terminal via Ctrl+N, I just get a new window. Also, in a terminal vim setup, I cannot use Ctrl+W to move cursor between windows because that would just close the chrome tab.\n> \n> I'd appreciate if there's an option to disable the native browser shortcuts when the terminal is open.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Chrome doesn't have an option to change shortcuts.\n\nOn Wed, Sep 30, 2015 at 9:17 AM, Brian E. Granger notifications@github.com\nwrote:\n\n> I don't know if this is possible for us to do. You may need to change you\n> browser shortcuts\n> \n> Sent from my iPhone\n> \n> > On Sep 30, 2015, at 2:30 AM, eulerreich notifications@github.com\n> > wrote:\n> > \n> > Currently, in chrome, if I want to recall the previous command in the\n> > terminal via Ctrl+N, I just get a new window. Also, in a terminal vim\n> > setup, I cannot use Ctrl+W to move cursor between windows because that\n> > would just close the chrome tab.\n> > \n> > I'd appreciate if there's an option to disable the native browser\n> > shortcuts when the terminal is open.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/510#issuecomment-144424837.\n","If Travis passes, I'll merge this so that master is back to working order. If need be, we can make any further changes in a new PR.\n","Yeah, we're in _real_ trouble if that becomes a concern...\n > Yeah, we're in real trouble if that becomes a concern...\n\n:stuck_out_tongue_winking_eye: \n","This is a known bug that we have long term plans to fix. @sccolbert or @blink1073 could hopefully look at this...\n Do you have a good example notebook (gist?) that you could share that shows this?\n I made a public gist, \"jitter_example.ipynb\" but I'm having issues with it. Please tell me if you can't see it and I'll try again.\n @bitworm what's the link to the gist?\n ah! here: https://gist.github.com/bitworm/a9103913530b421b4ca6\n Might it make sense intercept the scroll event and zero-out the horizontal scroll if it is less than some ratio of the vertical scroll component?\n I'm looking into it now. CodeMirror is doing some suspect things when it gets scroll events.\n Thanks for looking at  this!\n\nOn Tue, Oct 6, 2015 at 4:02 PM, S. Chris Colbert notifications@github.com\nwrote:\n\n> I'm looking into it now. CodeMirror is doing some suspect things when it\n> gets scroll events.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/513#issuecomment-145981462.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n What's happening here is a result of [this line](https://github.com/codemirror/CodeMirror/blob/52e48afa6d3d508c83115c142c3f8fd0dc477108/lib/codemirror.js#L4002) in CodeMirror. The logic is a bit subtle, but I will try to explain as best I can.\n\nWhen you scroll using the trackpad or the mouse wheel, the browser delivers `'wheel'` events to the DOM element under the cursor. These events bubble up the DOM like most other mouse events, and if `preventDefault()` is not called on the event, the default action will be to scroll the element/page. For kinetic (momentum) scrolling, the browser continues to generate `'wheel'` events until the scrolling comes to rest. As the page is scrolled, the element under the cursor will change and hence the element receiving the `'wheel'` events will change.\n\nThis explains the immediate observation that the jitter (slow scrolling) only occurs when the cursor is over a CodeMirror cell. When the cursor is in the left margin of the notebook, or in-between CodeMirror cells, the CodeMirror `'wheel'` event handler is not invoked.\n\nThe line of code linked above prevents the event default action, which means the browser **will not** scroll the page when that code path is taken. So, why do we get _some_ vertical scrolling during jitter, instead of _none_? The answer is that a wheel event can contain both `deltaX` and `deltaY` values simultaneously. When using an actual mouse wheel, the `deltaX` will be zero. But when using a trackpad, `deltaX` will only sometimes be zero (because humans are imprecise).\n\nWhen CodeMirror encounters any non-zero `deltaX` value, it will take the code path linked above, which will unconditionally prevent the default scroll action. Presumably, this is done so that horizontally scrolling the editor does not _also_ horizontally scroll the page. This is a reasonable behavior, but leads to the unfortunate issue we are seeing here where it falsely prevents the vertical scroll of the page. When scrolling with a trackpad, what we end up with is a stream of `'wheel'` events with small `deltaX` values, some of which are zero. As those events are processed by CodeMirror, it prevents the default scroll action on all except the ones with a zero `deltaX`. It is _these_ events which actually get handled by the browser and cause the vertical scroll. But since they are only processed sporadically, the result is jitter.\n\nThere is [a clause](https://github.com/codemirror/CodeMirror/blob/52e48afa6d3d508c83115c142c3f8fd0dc477108/lib/codemirror.js#L3974) near the top of CodeMirror's `'wheel'` event handler, which bails early if there is no content to scroll. This explains why the jitter is only observed for CodeMirror cells which have overflowing content (i.e. visible scrollbars).\n\nI can see a few solutions for this problem:\n1. Comment out the line which prevents the event default in the version of CodeMirror we ship. I tested this locally and it works fine. The downside is possible horizontal scrolling of the page when horizontally scrolling the cell contents. This probably won't actually be a problem since the notebook itself rarely has horizontal scrollbars. It could be a problem in a larger app though. This is the simplest \"solution\".\n2. Apply some form of thresholding to the `deltaX` value in the version of CodeMirror we ship, so that only significant `deltaX` values are actually handled by CodeMirror. This is also reasonably simple.\n3. Update the code cell so that only the active editing cell is actually a live CodeMirror instance. At all other times, the code cell should just be a static rendering of the code mirror content. [CodeMirror.runMode](https://codemirror.net/demo/runmode.html) can be used for this. This is a bit of work, but is the cleanest solution and would also likely solve some other performance concerns we have. IMHO this is the \"right\" way to solve the problem.\n\nA few other random thoughts:\n- This issue probably only affects OSX users using trackpads. These pads allow simultaneous X and Y scrolling. My experience with other trackpads is that they will \"lock\" so that only a single axis is scrolled at a time. [Relevant Stack Exchange](http://apple.stackexchange.com/questions/106935/fix-mavericks-vertical-scrolling-lock-jerky-scrolling-accidental-safari-back).\n- CodeMirror is using deprecated APIs on `'wheel'` event (`'wheelDeltaX'` vs `'deltaX'`, etc.) which generate very different numbers from the standard APIs. This may exacerbate the situation. The standard APIs are support by all major browsers back to IE9.\n- I think it may be worth pinging Marijn to get a bit more insight into his intentions behind preventing the default scroll action, and the use of the deprecated event APIs.\n @sccolbert thanks for digging into the details! I'm okay with disabling the prevent-default, as long as we take a little time to check why it's there, and verify that its reason for being there is no longer (if ever) relevant.\n\nWe can bring up the API usage with CodeMirror in the meantime as a longer-term solution.\n @minrk  I'll make a PR for this for now. Have you interacted with Marijn before, or would you like me to ping him?\n I PR'd against CodeMirror, since the notebook installs it as a bower component. Keeping around a separately patched version would be a bit of overhead.\n @sccolbert - would this also come up on mobile devices?  Do touch scrolling events come across as wheel events?\n It will affect any device which generates simultaneous `X` and `Y` deltas. I believe `'wheel'` events are used on mobile as well.\n CodeMirror fix merged. w00t!\n Any idea of when they will release with the fix?\n\nSent from my iPhone\n\n> On Oct 7, 2015, at 3:09 PM, S. Chris Colbert notifications@github.com wrote:\n> \n> CodeMirror fix merged. w00t!\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Also, great news!!!\n\nSent from my iPhone\n\n> On Oct 7, 2015, at 3:09 PM, S. Chris Colbert notifications@github.com wrote:\n> \n> CodeMirror fix merged. w00t!\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Don't know when the next release will be, but we can update the bower dependency to point to a commit hash in the meantime (if we really want to push it out quick).\n Great, I think it makes sense to point to the commit hash in the meantime.\n\nOn Wed, Oct 7, 2015 at 3:21 PM, S. Chris Colbert notifications@github.com\nwrote:\n\n> Don't know when the next release will be, but we can update the bower\n> dependency to point to a commit hash in the meantime.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/513#issuecomment-146301696.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n The release cadence indicates it will be released Oct 20: http://codemirror.net/doc/releases.html\n Awesome response guys - looking forward to checking this out!\n","We are working on some things that will provide this type of UI.\n Great to hear!  Any suggestions on timescale / what to look out for? \n Probably in the Jan 2016 range.\n\nOn Tue, Oct 6, 2015 at 1:52 PM, bitworm notifications@github.com wrote:\n\n> Great to hear! Any suggestions on timescale / what to look out for?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/514#issuecomment-145944958.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","We will investigate this - thanks for the example.\n I just tested this with the code sample, but I don't know if the problem reported still exists. The output updated less smoothly than in Chromium, but it didn't slow things down problematically. On the other hand, I'm running this on a relatively fast computer, so it may be worse on other machines.\r\n\r\nIf there is anything to improve, I'd guess it's in our stream concatenation and ansi processing machinery. If I insert a 0.01s sleep in the loop, it updates smoothly.\r\n\r\nThe jankiness that I saw is not tied to the logging framework: I could see the same with a plain print():\r\n\r\n```python\r\nimport time\r\nfrom IPython.display import clear_output\r\n\r\nfor num, i in enumerate(range(1000)):\r\n    square = i**2\r\n    clear_output(wait=True)\r\n    print(\"The square of element %d is %d\" %(num, square))\r\n    #time.sleep(0.01)\r\n``` Just to follow up. I tried the code from takluyver in the notebook 4.2.1 and it was still causing sluggishness in Firefox but was perfectly fine in Chrome. Adding the 0.01s sleep did help Firefox remain usable but was still sluggish.\r\n\r\nNext I tried updating my packages so now I am running notebook 4.3.1. Trying once again takluyver's code in a notebook I found that using the new version 4.3.1 that I have much improved performance in Firefox when using a 0.01s sleep. However, if I remove the 0.01s sleep Firefox becomes just as sluggish as version 4.2.1 without the 0.01 sleep, typically there is a long delay before scrolling and switching tabs.\r\n\r\nI tried playing around with it some more and tried increasing the number of loops from 1000 to 10000.  For Firefox, increasing the number of loops increases the amount of time Firefox is sluggish for when there is no 0.01s sleep. However, when using Chrome for 10000 loops and no 0.01s sleep the kernel would sometimes stop and return the following error:\r\n```python \r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-6-e1fa7ddf5af9> in <module>()\r\n      5     square = i**2\r\n      6     clear_output(wait=True)\r\n----> 7     print(\"The square of element %d is %d\" %(num, square))\r\n      8 #     time.sleep(0.01)\r\n\r\nC:\\Users\\Scherer Lab E\\Anaconda2\\lib\\site-packages\\ipykernel\\iostream.pyc in write(self, string)\r\n    315 \r\n    316             is_child = (not self._is_master_process())\r\n--> 317             self._buffer.write(string)\r\n    318             if is_child:\r\n    319                 # newlines imply flush in subprocesses\r\n\r\nValueError: I/O operation on closed file\r\n```\r\nSometimes I can get this error in Firefox too when I am not using 0.01s sleep and trying to scroll the browser a lot while it is running.\r\n\r\nI have summarized my results below for the two browsers running 10000 loops of the code from takluyver on notebook version 4.3.1.\r\n\r\nBrowser | With `time.sleep(0.01)` | Without `time.sleep(0.01)`\r\n---------|------------------------|----------------------------------\r\nFirefox | Runs fine, No slowdown | Massive slowdown, sometimes `ValueError`\r\nChrome | Runs fine, No slowdown | No slowdown, Sometimes `ValueError`\r\n Thanks for the detailed analysis! If you've got time, could you try it with master too (see [setting up a development environment](http://jupyter-notebook.readthedocs.io/en/latest/contributing.html#setting-up-a-development-environment))? I've tried this with master and 10000 loops and Firefox 51.0.1. I do see the application get a little slower, but still responsive, and occasional 'IOPub message rate exceeded' messages suggesting that the new rate limiting is indeed helping. I think we can tentatively call this improved (if not solved) in 5.0. Thanks Min. Bumped to 5.1 in case we get any new info.","@Phyks can you try it in a private browsing tab with no extensions enabled and see if it still does this?\n Same problem for me in private browsing without any extensions enabled. No problem in Chromium though\u2026\n We will try to reproduce this. More info though:\n- Firefox version?\n- OS\n- Extensions?\n We have tested that this works on Firefox 41 on OS X 10.10.5\n Cannot reproduce after a system upgrade (firefox 41.0.1). I think we can close it for now. If I manage to reproduce, I will post more details.\n Great, thanks! Closing!\n","You might already find custom key bindings for IPython, to use or get inspiration to make your own:\n\nhttps://mail.scipy.org/pipermail/ipython-dev/2012-January/008666.html\nhttp://undefd.kaihola.fi/2013/10/25/emacs-keybindings-for-ipython-notebook-and-firefox.html\n\nAs the last link says, IPython uses CodeMirror, so you can look for CodeMirror related stuff too.\n\nPS: So bad you don't use emacs: https://github.com/tkf/emacs-ipython-notebook\n I believe there exist browser extensions to hook up vim for any text area on any webpage, which ought to work in notebooks. I haven't used any, though.\n This JavaScript snippet might be what you're looking for:\nhttp://stackoverflow.com/questions/28309430/edit-ipython-cell-in-an-external-editor\n @davidbrochart Thanks for the link!\n","This is a known issue in the IPython kernel that it tracks the parent header as global state, so async output shows up in the most recently executed cell, rather than the 'origin' cell. Tracking the origin is hard to do in general for Python, since you can pass events back and forth between threads, and then it's ambiguous who 'owns' a thread's output. The current behavior is most similar to async output from threads in the terminal, where it just keeps writing, wherever the current 'cursor' output is.\n\nFor kernels that actually do keep track of parents associated with threaded output, they should not send the `status: idle` message until _all threads_ associated with that execution have completed, and the output is fully resolved. IPython specifically chooses to not do this, but that is a choice IPython makes, not Jupyter.\n Ok thanks - good to know. For the Spark kernel we'll look into sending the `idle` message later, or changing it to behave like the Python kernel\n","lgtm. I can't merge though.\n Thanks.\n","cc @rgbkrk do you know what's up here?\n That's so weird that `/srv/ipython` is mentioned in the log, when `ipython` itself comes straight from `pip` as part of the `ipykernel` install. I just tried building locally and ran into issues as well.\n\nLet me see if I can get this working again.\n\n/cc @parente \n Sorry. Late to the party on this one. @rgbkrk was there an explanation for the weirdness? Stable ipykernel packaging just fixed it?\n Yeah we were mid migration when this issue was opened. Pretty simple now.\n","Migrated to ipython/ipython#8858\n",":+1: \n","It's showing 200 OK for me. Are you sure your Python 3 is running master?\n I think I've figured it out, at least partially.\n\nBuilding from master in this repo, everything works. The problem occurs when I also install [ipywidgets](https://github.com/ipython/ipywidgets). Then I get the 405 on the OPTIONS preflight to the kernel endpoint, as seen here.\n\n![screen shot 2015-10-05 at 1 03 31 pm](https://cloud.githubusercontent.com/assets/77472/10288340/4e8f231e-6b66-11e5-9cdc-ccb53a38e533.png)\n Aha! Using the `--no-deps` option when pip installing ipywidgets, doesn't cause this issue.\n What do you have for `pip list` after installing the widgets?\n After installing **with** `--no-deps`\n\n```\nroot@ecd6c216754b:/srv/notebook# pip list\nchardet (2.0.1)\ncolorama (0.2.5)\ndecorator (4.0.4)\ndocutils (0.11)\ngyp (0.1)\nhtml5lib (0.999)\nipykernel (4.0.3)\nipython (4.0.0)\nipython-genutils (0.1.0)\nipywidgets (4.0.3)\nJinja2 (2.7.2)\njupyter-client (4.0.0)\njupyter-core (4.0.6)\nMarkupSafe (0.18)\npath.py (8.1.1)\npexpect (3.3)\npickleshare (0.5)\nPillow (2.3.0)\npip (7.1.2)\nPygments (1.6)\npyzmq (14.7.0)\nrequests (2.2.1)\nroman (2.0.0)\nsetuptools (18.3.2)\nsimplegeneric (0.8.1)\nsix (1.5.2)\nSphinx (1.2.2)\ntraitlets (4.0.0)\nurllib3 (1.7.1)\nwheel (0.24.0)\n```\n\nAfter installing the widgets **without** `--no-deps`:\n\n```\nbackports.ssl-match-hostname (3.4.0.2)\ncertifi (2015.9.6.2)\nchardet (2.0.1)\ncolorama (0.2.5)\ndecorator (4.0.4)\ndocutils (0.11)\nfunctools32 (3.2.3.post2)\ngyp (0.1)\nhtml5lib (0.999)\nipykernel (4.0.3)\nipython (4.0.0)\nipython-genutils (0.1.0)\nipywidgets (4.0.3)\nJinja2 (2.7.2)\njsonschema (2.5.1)\njupyter-client (4.0.0)\njupyter-core (4.0.6)\nMarkupSafe (0.18)\nmistune (0.7.1)\nnbconvert (4.0.0)\nnbformat (4.0.1)\nnotebook (4.0.5)\npath.py (8.1.1)\npexpect (3.3)\npickleshare (0.5)\nPillow (2.3.0)\npip (7.1.2)\nptyprocess (0.5)\nPygments (1.6)\npyzmq (14.7.0)\nrequests (2.2.1)\nroman (2.0.0)\nsetuptools (18.3.2)\nsimplegeneric (0.8.1)\nsix (1.5.2)\nSphinx (1.2.2)\nterminado (0.5)\ntornado (4.2.1)\ntraitlets (4.0.0)\nurllib3 (1.7.1)\nwheel (0.24.0)\n```\n I'm not sure how it's working when you use `--no-deps`, since it shows that you don't have the notebook package at all. When you install with dependencies, you do have the notebook and it is 4.0.5, which is current stable and doesn't have the fix referred to here. Perhaps you have notebook master installed in a different env?\n Well I think the notebook is being installed by [this line in the Dockerfile](https://github.com/jupyter/notebook/blob/master/Dockerfile#L54):\n\n```\nRUN pip3 install --pre -e .\n```\n\nWhich I guess doesn't make it into `pip list`. \n @zischwartz `pip install -e` will indeed show up in `pip list`. Do you have your own Dockerfile that's exhibiting this problem?\n I just realized: if you are using that Dockerfile, `pip` is `pip2`, and the notebook is only installed with pip3. What do you see for `pip3 list`?\n Aside: I should have mentioned, I opened this issue for @zischwartz when I was visiting last Thur/Fri.\n Here's what I suspect is happening:\n- jupyter-notebook master is installed with pip3\n- installing ipywidgets with pip installs with Python 2, depends on the notebook, and installs `jupyter-notebook` for Python 2.\n- now `jupyter-notebook` is pointing to the Python 2 version, which is current stable, instead of dev.\n\nIf we were installing Python 2 in an env, instead of the default, this wouldn't be an issue. Similarly, this wouldn't be an issue if the command were `python3 -m notebook` instead of `jupyter notebook`.\n Hmm ok, I was installing the widgets with both `pip2` and `pip3`. And yeah here's my [Dockerfile](https://github.com/zischwartz/notebook/blob/master/Dockerfile#L60-L61).\n\nWith `--no-deps`\n\n```\nroot@edc33e53a4d9:/srv/notebook# pip3 list\nchardet (2.2.1)\ncolorama (0.2.5)\ndecorator (4.0.4)\ndocutils (0.11)\nhtml5lib (0.999)\nipykernel (4.0.3)\nipython (4.0.0)\nipython-genutils (0.1.0)\nipywidgets (4.0.3)\nJinja2 (2.7.2)\njsonschema (2.5.1)\njupyter-client (4.0.0)\njupyter-core (4.0.6)\nMarkupSafe (0.18)\nmistune (0.7.1)\nnbconvert (4.0.0)\nnbformat (4.0.1)\nnotebook (4.1.0.dev0, /srv/notebook)\npath.py (8.1.1)\npexpect (3.3)\npickleshare (0.5)\nPillow (2.3.0)\npip (7.1.2)\nptyprocess (0.5)\nPygments (1.6)\npyzmq (14.7.0)\nrequests (2.2.1)\nroman (2.0.0)\nsetuptools (18.3.2)\nsimplegeneric (0.8.1)\nsix (1.5.2)\nSphinx (1.2.2)\nterminado (0.5)\ntornado (4.2.1)\ntraitlets (4.0.0)\nurllib3 (1.7.1)\nwheel (0.24.0)\n```\n\nWithout `--no-deps`:\n\n```\nroot@fb072da9ecb2:/srv/notebook# pip3 list\nchardet (2.2.1)\ncolorama (0.2.5)\ndecorator (4.0.4)\ndocutils (0.11)\nhtml5lib (0.999)\nipykernel (4.0.3)\nipython (4.0.0)\nipython-genutils (0.1.0)\nipywidgets (4.0.3)\nJinja2 (2.7.2)\njsonschema (2.5.1)\njupyter-client (4.0.0)\njupyter-core (4.0.6)\nMarkupSafe (0.18)\nmistune (0.7.1)\nnbconvert (4.0.0)\nnbformat (4.0.1)\nnotebook (4.1.0.dev0, /srv/notebook)\npath.py (8.1.1)\npexpect (3.3)\npickleshare (0.5)\nPillow (2.3.0)\npip (7.1.2)\nptyprocess (0.5)\nPygments (1.6)\npyzmq (14.7.0)\nrequests (2.2.1)\nroman (2.0.0)\nsetuptools (18.3.2)\nsimplegeneric (0.8.1)\nsix (1.5.2)\nSphinx (1.2.2)\nterminado (0.5)\ntornado (4.2.1)\ntraitlets (4.0.0)\nurllib3 (1.7.1)\nwheel (0.24.0)\n```\n\nSeems identical.\n Yup, then what I described above is what's happening. Since `ipywidgets` depends on the notebook package, when you install it for Python 2, it's installing `jupyter-notebook` for Python 2, overwriting the version previously installed with Python 3. Python 3 still has the latest version of the notebook, it's just not what's getting launched when `jupyter notebook` is called. If we change the command to be `python3 -m notebook` instead of `jupyter notebook` there would be no problem.\n I'm getting this using both a python2 and python3 notebook server, trying to run thebe. I set up IPython using a python3 virtualenv on Ubuntu 14.04. In this context pip is always referring to python3's pip.\n\nAny idea how I can work around this?\n Here's my `pip list` if it helps:\n\n```\nCython (0.23.3)\ndecorator (4.0.4)\nipykernel (4.1.0)\nipython (4.0.0)\nipython-genutils (0.1.0)\nipywidgets (4.0.3)\nJinja2 (2.8)\njsonschema (2.5.1)\njupyter (1.0.0)\njupyter-client (4.0.0)\njupyter-console (4.0.3)\njupyter-core (4.0.6)\nMarkupSafe (0.23)\nmatplotlib (1.4.3)\nmistune (0.7.1)\nnbconvert (4.0.0)\nnbformat (4.0.1)\nnose (1.3.7)\nnotebook (4.0.5)\nnumpy (1.10.0.post2)\npath.py (8.1.2)\npexpect (4.0.1)\npickleshare (0.5)\npip (7.1.2)\nptyprocess (0.5)\nPygments (2.0.2)\npyparsing (2.0.3)\npython-dateutil (2.4.2)\npytz (2015.6)\npyzmq (14.7.0)\nqtconsole (4.0.1)\nsetuptools (18.2)\nsimplegeneric (0.8.1)\nsix (1.10.0)\nsympy (0.7.6.1)\nterminado (0.5)\ntornado (4.2.1)\ntraitlets (4.0.0)\nwheel (0.24.0)\nyt (3.2.1)\n```\n @ngoldbaum this is fixed in master, so installing notebook from master should do it.\n @minrk thanks for pointing out the obvious to me, sometimes I need that :)\n\nSwitching to notebook master lets me get past the 405 error.\n @ngoldbaum thanks!\n Hey, if this is still a problem for anyone else, it turns out we can address this from the clientside. Taking [this one line](https://github.com/oreillymedia/thebe/blob/master/static/services/kernels/kernel.js#L205) out of Thebe, seems to prevent the `OPTIONS` preflight altogether, and the backend deals with it fine. That's merged in Thebe on master now.\n Oh awesome.\n Thanks for sharing that @zischwartz \n","We need to try and replicate this...\n Not positive but I think it is related to the fact that I installed jupyter\nwith pip and not conda.  I am using conda but installed jupyter with pip\nbecause I was having trouble getting notebook entensions to work with the\nversion that was in conda distribution.  I guess my extensions problem was\nfixed when jupyter was upgraded to 4.0.6., but then realized I have this\nproblem with not being able to shutdown notebooks.  Then I wondered if\njupyter got updated in conda so I re-made my conda environment and\ninstalled jupyter with conda instead of pip.  Now, everything's good!\nOn Oct 6, 2015 12:08 PM, \"Brian E. Granger\" notifications@github.com\nwrote:\n\n> We need to try and replicate this...\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/523#issuecomment-145913427.\n Thanks closing.\n","Thanks @minrk.\n","This should do it:\n\n```\npip install path.py\n```\n","cc @ellisonbg since it's a UI change, and @jhamrick and @damianavila as users of cell toolbars.\n +1 from this user :+1:  I was even thinking that if you renamed \"Raw NBConvert\" to just \"Raw\" we could save some pixels. Need more room for extension buttons.\n I think it used to be `Raw`, but people are consistently confused when we call it just `raw`, since they don't understand that `raw` refers specifically to \"raw nbconvert output\". In the Menu, the pixels are no longer so precious, so I think it's okay to be a bit more verbose.\n +1 from me\n\nI don't think it is used enough to be in the toolbar.\n\nSent from my iPhone\n\n> On Oct 5, 2015, at 9:04 AM, Min RK notifications@github.com wrote:\n> \n> It's not used enough to justify taking up a huge amount of space in the toolbar.\n> \n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/jupyter/notebook/pull/527\n> \n> Commit Summary\n> \n> Move cell toolbar selection to View menu\n> File Changes\n> \n> M notebook/static/notebook/js/maintoolbar.js (52)\n> M notebook/static/notebook/js/menubar.js (52)\n> M notebook/templates/notebook.html (4)\n> Patch Links:\n> \n> https://github.com/jupyter/notebook/pull/527.patch\n> https://github.com/jupyter/notebook/pull/527.diff\n> \u2014\n> Reply to this email directly or view it on GitHub.\n I think this will break some of the tests in nbgrader, but that's fine, I can fix them.\n\nA more important comment though -- does this mean the event `preset_activated.CellToolbar` is going away? I definitely use that event in my extension, and so having that go away will break things there unless there is an alternative I'm forgetting about.\n > I don't think it is used enough to be in the toolbar.\n\nI think it is used... a lot of people are using slides and need this... but I am OK to have it in the menu... it is not a big deal for slides users to go to the menu instead of the toolbar and I agree that we need to clean the space and save pixel in the toolbar...\n This behaves well in simple usability testing. But it sounds like we still need to understand its affect on the `preset_activated.CellToolbar` event.\n Sorry, I didn't notice the question the first time around. This has no effect on the preset_activated event. The only change is that I removed a _listener_ from the preset_activated event because I didn't add an indicator for the currently selected item, since it's a bit harder to do in a menu than a select control, which always has a clearly indicated current selection.\n Seems like this is ready for merge then?\n\nSent from my iPhone\n\n> On Oct 13, 2015, at 10:13 AM, Min RK notifications@github.com wrote:\n> \n> Sorry, I didn't notice the question the first time around. This has no effect on the preset_activated action. The only change is that I removed a listener from the preset_activated event because I didn't add an indicator for the currently selected item, since it's a bit harder to do in a menu than a select control, which always has a clearly indicated current selection.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n @minrk Oh, you're right, so you did. My mistake. Looks good then!\n","re: https://github.com/jupyter/notebook/pull/528#discussion_r41237181\n\n> All these && making the entire dockerfile one or two big steps makes building and debugging a whole lot more annoying. Can you quantify the savings of joining these lines, since the experience is so much worse?\n\nyes, this is certainly annoying while testing. but for this, you can change to one layer per command. (regex substitution)\n\nthe guide on [Dockerfile best practices](https://docs.docker.com/articles/dockerfile_best-practices/#minimize-the-number-of-layers) doesn't actually give any explanation why it is a good practice. but you'll find it in every official image. ([example](https://github.com/docker-library/python/blob/15798abb6cfb145344462a345db4b572227fb859/3.4/Dockerfile))\n\nthe savings is less network-traffic and that depends on the connection. i guess Docker's overhead is slightly reduced when dealing with less layers.\n\nalltogether the amount of layers is halfed, and that includes new layers like `VOLUME`. i haven't compared the layer's sizes.\n\ni did this change from a user's perspective, seeking as few overhead when pulling and running on this image. and that should be achieved with images that are supposed to be used by the public.\n @funkyfuture if building it in one big step is really preferable, it seems a one-line Dockerfile that's just `bash build.sh` and then a less mangled `build.sh` script would be cleaner.\n @minrk @funkyfuture I don't believe the intent of the Dockerfile is to put all on one-line. It's to minimize issues with user introduced configuration errors (related to cache, updating/installing in same command line to avoid silent fails, and configuration maintainability)  see: [RUN documentation](https://docs.docker.com/reference/builder/#run) and RUN section of best practices (https://docs.docker.com/articles/dockerfile_best-practices/) .\n\nHere's a file from one of the Docker devs as best practice: https://github.com/jfrazelle/docker/blob/master/Dockerfile\n @funkyfuture thanks for the PR and explanation! This does seem like an improvement, and we can iterate to find that balance discussed in the best practices.\n @minrk :surfer: :ocean: :octopus: Good decision. My explanation is feeling unloved. Just kidding :P :cake:\n @willingc thanks for your explanation as well!\n sure, there is always a degree of gusto when it comes to optimizations.\n\nespecially the notebook installation should be kept in on `RUN` line as it keeps the build- and test-dependencies out of the image. they are removed from the fs before that layer gets commited.\n","Closed because issue solved by #535.\n","Is `sys.prefix` within the portable install directory? You should be able to put kernel specs in `sys.prefix + '/share/jupyter/kernels/'` and it will find them.\n Yes, that works nicely. Thank you!\nFurthermore, If I put the portable R folder within the directory specified by sys.prefix, this kernel appears to works fine:\n\n`\n{\"argv\": [\"R/R-Portable/App/R-Portable/bin/i386/R.exe\",\"-e\",\"IRkernel::main()\",\n\"--args\",\"{connection_file}\"],\n \"display_name\":\"Portable R\"\n}\n`\n\nI'm going to test the portability by moving between machines but things are looking good!\nThank's for the swift and useful reply! \n Great. I'll leave this open because I think specifying a relative path in argv works by happy coincidence rather than deliberate design, and we might want to formalise a way to do that.\n Thanks. For info, here are the steps I took to get everything working using Portable Python and Portable R\n\nhttp://www.walkingrandomly.com/?p=5734\n Great, thanks for writing that up. It looks like portable builds of Python will be an official thing when Python 3.5 comes out, so we won't have to rely on a not-very-maintained third party build. I quite like the idea of making 'Jupyter on a stick' - a USB stick with Jupyter, IPython, R and whatever else makes sense.\n jupyter/jupyter_client#8 would make it possible to specify an executable with a relative path from sys.prefix, like `['{prefix}/bin/R', ...]`.\n","Needs rebase. Can you do that, and remove `scripts/lxc-launch.sh`?\n Sure, in progress. Can I ask why we are running `apt-get update` twice? Is it needed for some reason?\n Ok, ready for more feedback.\n Sorting out a few more things.\n Sorry for all the noise. I think this is good to go.\n","Hmm, there might be a different event to trigger this on.\n Hey Brian. Where can I find a list of events? It seems like it's triggering before the code cells are created. I am seriously JS deficient, but it seems like a lot of code cell set up happens in extensions.js\n Here's the list.\n\nhttps://github.com/ipython/ipython/wiki/Dev:-Javascript-Events#notebook_loadednotebook\n\nand the new _working_ version of my script...\n\n`$([IPython.events]).on('kernel_ready.Kernel', function () {\n    $('div.input').hide();  \n});`\n\nThanks for having this documented. The problem was not knowing enough about js to even know what to search. \n","Pinging @sccolbert @dwillmer \n Brian, can we close this one ?\n Yep, closing...\n","This and the related issue #558 are the last two things open for 4.1.\n\nDo you know what the time frame is for this?  Maybe anyone not participating in the usability review in person (@minrk @Carreau and I) can have a use-the-notebook part-day on Monday to make sure nothing critical is broken.\n One thing, I think we moved the celltoolbar selector from toolbar to menu. Is that API change ?\n The DOM className ?  if so, yeah I'd consider that an API change - it will break peoples custom css\n I don't consider our DOM class names like the celltoolbar to be public API.\nTo me our public DOM API right now is the stuff that ends up in nbconvert's\nHTML output.\n\nPart of releasing new features is taking the time to get them as right as\npossible before release. We have enough usability problems as it is and\ncan't afford to pile on new usability and design debt. I am not saying we\nneed to bike shed and or get things perfect.\n\nI should be able to spend time on this over the weekend and early next week.\n\nOn Fri, Oct 23, 2015 at 7:06 PM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> The DOM className ? if so, yeah I'd consider that an API change - it will\n> break peoples custom css\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/533#issuecomment-150712665.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n No I mean the actual UI element is now gone.\nI was like WTF, where is it:\n\n<img width=\"539\" alt=\"screen shot 2015-10-23 at 17 22 13\" src=\"https://cloud.githubusercontent.com/assets/335567/10707687/48f09782-79ab-11e5-811c-4a27c18fcc38.png\">\n\n<img width=\"502\" alt=\"screen shot 2015-10-23 at 17 22 35\" src=\"https://cloud.githubusercontent.com/assets/335567/10707665/c26eabb8-79aa-11e5-8c0d-007d927aa40d.png\">\n\nI I found it because I knew there was a PR for that, and I knew what to look for.\nThis is actually changing user UI in between minor releases.\n\nI'm not against the new location in the menu, I just think that a `CellToolbar` button which tells you where the new menu is would be nice, otherwise user will WTF when they **need** to use it at the worst moment.\n Ahh, got it. Any ideas on how to transition users to the new location more\neasily? Want to give a button a go?\n\nOn Fri, Oct 23, 2015 at 8:27 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> No I mean the actual UI element is now gone.\n> I was like WTF, where is it:\n> \n> [image: screen shot 2015-10-23 at 17 22 13]\n> https://cloud.githubusercontent.com/assets/335567/10707687/48f09782-79ab-11e5-811c-4a27c18fcc38.png\n> \n> [image: screen shot 2015-10-23 at 17 22 35]\n> https://cloud.githubusercontent.com/assets/335567/10707665/c26eabb8-79aa-11e5-8c0d-007d927aa40d.png\n> \n> I I found it because I knew there was a PR for that, and I knew what to\n> look for.\n> This is actually changing user UI in between minor releases.\n> \n> I'm not against the new location in the menu, I just think that a\n> CellToolbar button which tells you where the new menu is would be nice,\n> otherwise user will WTF when they _need_ to use it at the worst moment.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/533#issuecomment-150727332.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I can display and highlight the location in the menu (with animation)through JS:\n<img width=\"492\" alt=\"screen shot 2015-10-23 at 22 42 20\" src=\"https://cloud.githubusercontent.com/assets/335567/10709178/5ff189e2-79d7-11e5-8a78-7ce670393e05.png\">\n\nI can tackle that on monday.\n @jhamrick Any usability thoughts on the changes to Cell Toolbar -> Create Assignment and nbgrader?\n Thanks for the ping. I like something like Matthias' suggestion, though\nI am away this weekend do will have a closer look on Monday.\n\nOn Saturday, October 24, 2015, Carol Willing notifications@github.com\nwrote:\n\n> @jhamrick https://github.com/jhamrick Any usability thoughts on the\n> changes to Cell Toolbar -> Create Assignment and nbgrader?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/533#issuecomment-150828165.\n @ellisonbg how's the usability study coming along?  Any issues arise yet that we can start to address?\n Been working on it this morning.\n\nFound one just now - when you are using the command palette and I have\ntyped enough that there is only a single option left, if I press return it\ndoesn't do anything - I have to do arrow down to pick that single option.\nIn that case a simple return should \"just work\"\n\nMore to come soon...\n\nOn Mon, Oct 26, 2015 at 11:23 AM, Jonathan Frederic <\nnotifications@github.com> wrote:\n\n> @ellisonbg https://github.com/ellisonbg how's the usability study\n> coming along? Any issues arise yet that we can start to address?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/533#issuecomment-151172569.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Found one just now - when you are using the command palette and I have\n> typed enough that there is only a single option left, if I press return it\n> doesn't do anything - I have to do arrow down to pick that single option.\n> In that case a simple return should \"just work\"\n\nI'm aware of this one there is already an issue open somewhere, \nit is one of the first thing I though about.\nIt is though technically really annoying to do for now, as for fuzzy searching. \nOtherwise it would already be in. It might need some refactor upstream.\n Just had a look at this. I love the UI deprecation for the celltoolbar -- nice job @Carreau ! Seems like everything still works fine with nbgrader (I think the tests will break, but the actual functionality seems to be ok).\n\nOne note on the help for the keyboard shortcuts which might be potentially confusing -- the closeness of the description of \"command mode\" and the command key implies that they have something to do with each other (which they don't):\n\n![image](https://cloud.githubusercontent.com/assets/83444/10738003/7377ef54-7bd2-11e5-992f-964d8ef3cadb.png)\n\nI would suggest moving the section about the key names into a different box (maybe yellow or green or something) and out of the one that describes the different modes. Initially I was confused because I thought maybe the key bindings had changed and command had something to do with command mode now -- and I'm _used_ to using the notebook :smile: \n I had the same experience as Jess with that. I think using a separate box\nmakes sense. Although, I think the color could be the same as both are\ngeneral informative.\n\nOn Mon, Oct 26, 2015 at 2:14 PM, Jessica B. Hamrick <\nnotifications@github.com> wrote:\n\n> Just had a look at this. I love the UI deprecation for the celltoolbar --\n> nice job @Carreau https://github.com/Carreau ! Seems like everything\n> still works fine with nbgrader (I think the tests will break, but the\n> actual functionality seems to be ok).\n> \n> One note on the help for the keyboard shortcuts which might be potentially\n> confusing -- the closeness of the description of \"command mode\" and the\n> command key implies that they have something to do with each other (which\n> they don't):\n> \n> [image: image]\n> https://cloud.githubusercontent.com/assets/83444/10738003/7377ef54-7bd2-11e5-992f-964d8ef3cadb.png\n> \n> I would suggest moving the section about the key names into a different\n> box (maybe yellow or green or something) and out of the one that describes\n> the different modes. Initially I was confused because I thought maybe the\n> key bindings had changed and command had something to do with command mode\n> now -- and I'm _used_ to using the notebook [image: :smile:]\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/533#issuecomment-151233528.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Some more things:\n- I like the blue bar that shows which cells are selected. However, it doesn't go away after merging cells and thus if I want to merge other cells it will merge _all_ the cells including the one that was selected from before, and I can't seem to find a way to un-select it.\n- Undoing the merging of cells is broken. It will un-delete the cell that was originally deleted, but it doesn't remove the source from the first cell that was merged in.\n\nEdit: see #665\n You can unmark individual cells with ctrl-shift or do the \"unmark-all-cell\"\naction in the command palette.\n\nBut we should probably start to create separate issues for the things we\nfind related to this.\n\nOn Mon, Oct 26, 2015 at 2:19 PM, Jessica B. Hamrick <\nnotifications@github.com> wrote:\n\n> Some more things:\n> \n>    -\n> \n>    I like the blue bar that shows which cells are selected. However, it\n>    doesn't go away after merging cells and thus if I want to merge other cells\n>    it will merge _all_ the cells including the one that was selected from\n>    before, and I can't seem to find a way to un-select it.\n>    -\n> \n>    Undoing the merging of cells is broken. It will un-delete the cell\n>    that was originally deleted, but it doesn't remove the source from the\n>    first cell that was merged in.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/533#issuecomment-151235775.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Ok, I will open a new issue then.\n > I like the blue bar that shows which cells are selected. However, it doesn't go away after merging cells and thus if I want to merge other cells it will merge all the cells including the one that was selected from before, and I can't seem to find a way to un-select it.\n\nEscape will deselect once https://github.com/jupyter/notebook/pull/657 will be merged.  \n How do you \"undo merge\" ? With undo delete ?\n (and Brian meant unselect with Ctrl-Space not shift) \n Ok, I think having stuff be deselected with \"escape\" would make that less surprising for me. I was looking for a menu option and found none. The problem with relying on the command palette there is because users won't necessarily know the correct terminology -- e.g. I didn't know it was called \"marked\" (I would have thought to look for \"selected\"). Having unmarking being bound to escape seems intuitive, though.\n Jess makes a good point - do you think we should also have an edit menu\nitem for unmarking all cells as well?\n\nOn Mon, Oct 26, 2015 at 2:33 PM, Jessica B. Hamrick <\nnotifications@github.com> wrote:\n\n> Ok, I think having stuff be deselected with \"escape\" would make that less\n> surprising for me. I was looking for a menu option and found none. The\n> problem with relying on the command palette there is because users won't\n> necessarily know the correct terminology -- e.g. I didn't know it was\n> called \"marked\" (I would have thought to look for \"selected\"). Having\n> unmarking being bound to escape seems intuitive, though.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/533#issuecomment-151240742.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Ok, all the various PRs I opened today should address I think all my usability concerns about the cell marking.\n","Woot! \n\nBTW, I like our variation of making a Tabbed Input/Output cell [1] such that you can see the code in the Input tab, but defaults to showing the Output tab initially. Also can display the input next to output.\n\n[1] - https://www.youtube.com/watch?t=19&v=WwoTzvOkEJQ\n I can imagine that this view would be useful sometimes. But initially this\nwill be as simple as possible - possibly without UI (just in the command\npalette).\n\nOn Tue, Oct 6, 2015 at 4:02 PM, Doug Blank notifications@github.com wrote:\n\n> Woot!\n> \n> BTW, I like our variation of making a Tabbed Input/Output cell [1] such\n> that you can see the code in the Input tab, but defaults to showing the\n> Output tab initially. Also can display the input next to output.\n> \n> [1] - https://www.youtube.com/watch?t=19&v=WwoTzvOkEJQ\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/534#issuecomment-145981594.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Would it be possible to expose the JS so that it survives nbconvert? Otherwise any derived materials would need to re-implement show/hide machinery.\n\nI'm also :+1: on the possibility of switching input on one cell only, imagine publishing lecture materials in a non-programming course, where you only might want to check how a particular thing is produced.\n Here's a snipped that works for me if I run as HTML in the 1st cell.\n\n``` javascript\n<script>\n    var code_show=true; //true -> hide code at first\n\n    function code_toggle() {\n        $('div.prompt').hide(); // always hide prompt\n\n        if (code_show){\n            $('div.input').hide();\n        } else {\n            $('div.input').show();\n        }\n        code_show = !code_show\n    }\n    $( document ).ready(code_toggle);\n</script>\n```\n\nHere's the button.\n\n``` html\n<a href=\"javascript:code_toggle()\">[Toggle Code]</a>\n```\n I just signed in to thank @Saynah for that great hack. I don't use Jupyter specifically because it doesn't have cell folding, but this is the closest I've found so far. \n @Saynah, @ecollins, I created a code hiding plugin for Jupyter a couple of months ago. If you're interested in check out [hide_code](https://github.com/kirbs-/hide_code).\n\nEdit: fixed a typo.\n Thanks @kirbs- , had some [issue](https://github.com/kirbs-/hide_code/issues/6) the first time around the install. It'd definitely be nice to see this feature upstream.\n It seems like this would be nice done a cell magic, then it's easy to selectively hide cells, not sure though. still learning the system. Plus I seem to be running an ancient version\n I don't think a cell magic is the right thing for this:\n- Hiding cells should work the same way for any kernel, and magics are not general.\n- Cell magics usually affect what the kernel does with code, whereas here we don't want that to change\n\nIf you're on an old version, have a look at the upgrade instructions here:\nhttp://jupyter.readthedocs.org/en/latest/install.html#upgrading\n Hiding input cells for HTML output would be greatly appreciated!\n I second that!\n I have cell hiding on HTML export figured out with a helpful piece of code to trigger upon export; but now that I'm moving to deploying Jupyterhub in my organization I really would appreciate the ability to hide live input cells so users don't see them when they run their notebooks. \n The `hide_code` notebook extension is nice, but it doesn't hide the code when exporting. Can an nbextension register preprocessors? As `hide_code` adds a variable to the meta-data, that should be trivial to implement.\n You can hide the code in nbconvert using a custom template.\nLike this template [hide_input_output.tpl](https://github.com/ipython-contrib/IPython-notebook-extensions/blob/master/templates/hide_input_output.tpl) for conversion to HTML. You have to change the metadata variable name in the template, because it was made for another notebook extension.\n\nFor conversion to TeX or PDF you can take a look at this template [printviewlatex.tplx](https://github.com/ipython-contrib/IPython-notebook-extensions/blob/master/templates/printviewlatex.tplx) and modify it accordingly.\n I think it would be cleaner to do this with a preprocessor (which I just did locally). I fell the hiding of cells should be independent of the template.\n It would be neat if in addition to the feature we could allow to export to pdf/html removing/hiding input cell code and prompt so we could have a clean pdf/html output without any code but with the beautiful graphs, markdown and results. \nA man can dream. \n @BreitA that's super easy. The hard part is getting rid of the prompt for the output. Lemme send a PR.\n Hm actually I realized that I was doing the wrong thing and also removed the output of the cell. That was simple.\n Oops, ping @jamiesHQ\n I actually already do all of that with a mix of workarounds like theses one \nhttp://stackoverflow.com/questions/27934885/how-to-hide-code-from-cells-in-ipython-notebook-visualized-with-nbviewer\n\n```\n\nfrom IPython.display import HTML\nHTML(\"\"\"\n<script>\n  $(document).ready(function(){\n    $('div.prompt').hide();\n    $('div.back-to-top').hide();\n    $('nav#menubar').hide();\n    $('.breadcrumb').hide();\n    $('.hidden-print').hide();\n  });\n</script>\n\"\"\")\n```\n\nand use http://wkhtmltopdf.org/ to convert the rendered HTML into pdf but with this the layout is atrocious as expected. \n\nIf you guys provide an embeded good solution on jupyter for this it would be perfect! \n ```\nfrom IPython.display import display\nfrom IPython.display import HTML\nimport IPython.core.display as di\n\n# This line will hide code by default when the notebook is exported as HTML\ndi.display_html('<script>jQuery(function() {if (jQuery(\"body.notebook_app\").length == 0) { jQuery(\".input_area\").toggle(); jQuery(\".prompt\").toggle();}});</script>', raw=True)\n\n# This line will add a button to toggle visibility of code blocks, for use with the HTML export version\ndi.display_html('''<button onclick=\"jQuery('.input_area').toggle(); jQuery('.prompt').toggle();\">Toggle code</button>''', raw=True)\n```\n This is good to have, though I believe the initial discussion was about\nhide/fold functionality within Jupyter\nOn May 19, 2016 12:54 AM, \"Joel Bondurant\" notifications@github.com wrote:\n\n> from IPython.display import display\n> from IPython.display import HTML\n> import IPython.core.display as di # Example: di.display_html('\n> %s:' % str, raw=True)\n> \n> This line will hide code by default when the notebook is exported as HTML\n> \n> di.display_html('', raw=True)\n> This line will add a button to toggle visibility of code blocks, for use\n> with the HTML export version\n> \n> di.display_html('''Toggle code''', raw=True)\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/534#issuecomment-220252937\n I was just trying to hack something like this together.\nMy idea was a bit different. I try to use @damianavila  RISE plugin to create lecture notes. I would like to see code blocks within the notebook, but mark them \"hide\" during the presentation. Hence, I can easily read and follow what is done, but the presentation stays clean.\nI am trying to merge the hide plugin from @kirbs-  by adding a Boolean expression to the if-clause:\n\n```\nvar toggle_selected_input = function () {                                                                                                        \n        // Find the selected cell                                                                                                                    \n        var cell = Jupyter.notebook.get_selected_cell();                                                                                             \n        // Toggle visibility of the input div                                                                                    \n        if (cell.metadata.hide_input && $('#maintoolbar').hasClass('reveal_tagging'))  {                          \n            cell.element.find(\"div.input\").toggle('slow');                                                                                           \n        }                                                                                                                                            \n        cell.metadata.hide_input = ! cell.metadata.hide_input;                                                                                       \n    };                                                    \n```\n\nwhereas, $('#maintoolbar').hasClass('reveal_tagging')) is set by RISE to identify whether the presentation mode is on or off (as far as I understood).\n\nHowever, it seems that the above function as well as update_input_visibility is not called anymore after the switching to the presentation (which seems somehow logical). Thus, now I need to find the place to call update_input_visibility() after starting the presentation mode. What a pitty that this is my first contact with JS ;)\n\nEDIT: Just to get this again more on topic. Implementing this directly into Jupyter sounds great but please make sure, that different plugins or exports can easily utilise resp. customize the hide code functionality.\n Just wanted to call out that the hiding of the output prompt (e.g. \"Out [32]\") should be included in this feature. I think the majority of use cases that want to hide the input cell want to hide all references to the code, which includes the prompts. \n\nStill eager to see this feature integrated into Jupyter. :) \n I remember to read months/year ago that Jupyter (at that time IPython Notebook) would not allow to hide input cells for security reasons. Can anyone point me to that discussion?\n Any update as to the hiding of input cells? Would love to be able to use Jupyter to create the equivalent of RMarkdown reports. Thanks overall for this wonderful Jupyter project!\n I'm wanting to do the same. Is creating Rmarkdown style reports on the\nJupyter roadmap?\n\nOn Tue, 19 Jul 2016 at 14:24 Levi Thatcher notifications@github.com wrote:\n\n> Any update as to the hiding of input cells? Would love to be able to use\n> Jupyter to create the equivalent of RMarkdown reports.\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/534#issuecomment-233630850,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/ADXIc6qUO8LIH7F2HxhPmvYYKxrxrqFzks5qXM_zgaJpZM4GKAxO\n> .\n Thanks for the reminder on this one...will try to get some time back on it...\n\nCould you give an examples of the Rmarkdown reports?\n No problem; the package [pweave](http://mpastell.com/pweave/) is currently\nmy go to package for generating reports with python - though it's a long\nway off R's [KnitR](http://yihui.name/knitr/) in terms of functionality;\nhave a look at the pweave examples [here](http://mpastell.com/pweave/examples/) and KnitR examples [here](https://github.com/yihui/knitr-examples).\n\nThe philosophy is admittedly slightly different from a notebook - your goal\nfrom the start is to write code chronologically such that you 'Restart &\nRun All' at the end to generate your document. However, enabling this\nfunctionality could be quite simple: adding '[chunk](http://rmarkdown.rstudio.com/authoring_rcodechunks.html) [options](http://mpastell.com/pweave/chunks.html)' to all code cells should allow\njupyter notebooks to be used for this purpose without any other changes.\n\nFrom my perspective, the reason why this style of working is important is\ntwofold:\n- Make creating reports easier\n  - no faffing with latex (though you can use latex within the document\n    when you want - already implemented in jupyter markdown cells)\n  - write the report as you code\n  - allow inline references to the data and results e.g. instead of\n    writing 'The mean of the column was 2.6' you would write 'The mean of the\n    column was `np.mean(some_array)`', such that, if and when your data\n    changes, you simply regenerate your report, safe in the knowledge the text\n    is still correct\n  - 1000s of researchers worldwide would benefit from the time saved\n- Make reports reproducible\n  - You know exactly what code you executed to create all the figures,\n    tables, and text\n  - Reproducibility in academic research is currently pretty poor -\n    creating tools to make this easier will have widespread benefits to the\n    academic community\n\nI think a good first step would be a markdown cell toolbar that controls\nsimple cell options like hiding (like the 'edit metadata' cell toolbar but\nhigher level). Most of the back end work appears to already be done - I\ndetail a solution [here](http://stackoverflow.com/questions/31517194/how-to-hide-one-specific-cell-input-or-output-in-ipython-notebook/38040507#38040507)\nthat uses an nbextension - but an easy user interface that doesn't require\nfaffing with the cell metadata would be useful such that the user can see\nat a glance what to expect the generated report to look like.\n\nA more difficult next step, I imagine, would be thinking about how to\nimplement caching and whether that idea is compatible with the notebook\nphilosophy.\n\nI'm keen to contribute if I can so do let me know if I can help in some way.\n I haven't seen it expressly mentioned yet, and it is similar enough to many of the requests being made to deserve a mention:\n\nThe [Python Markdown ](https://github.com/ipython-contrib/IPython-notebook-extensions/tree/master/nbextensions/usability/python-markdown) notebook extension provides some of the functionality users need. \n\nI use this extension in combination with a few other tricks to achieve a result _similar_ to Sweave, Pweave, Rmarkdown, etc. See [my example gist](https://gist.github.com/brazilbean/1095e0af3ff2b5f37faeb0f63f0fb917).\n I just want to point out that this thread has conflated two different\nfunctionalities.\n\nThe one Levi and James seem to want is to configure Jupyter to export\noutput cells but not code cells to pdf/html/latex.\nThe other (which I thought was the original one under discussion) was to\nhide or fold input cells within the Jupyter notebook itself.\n\nOn Fri, Jul 22, 2016 at 10:10 AM, Gordon Bean notifications@github.com\nwrote:\n\n> I haven't seen it expressly mentioned yet, and it is similar enough to\n> many of the requests being made to deserve a mention:\n> \n> The Python Markdown\n> https://github.com/ipython-contrib/IPython-notebook-extensions/tree/master/nbextensions/usability/python-markdown\n> notebook extension provides some of the functionality users need.\n> \n> I use this extension in combination with a few other tricks to achieve a\n> result _similar_ to Sweave, Pweave, Rmarkdown, etc. See my example gist\n> https://gist.github.com/brazilbean/1095e0af3ff2b5f37faeb0f63f0fb917.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/jupyter/notebook/issues/534#issuecomment-234600580,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/AA8HIoHaJzt2JTnV9j9P2roZqjUvP9crks5qYPmBgaJpZM4GKAxO\n> .\n @brazilbean Oh nice! I didn't know about the `<!-- hide code` and `end hide code -->` Raw NBConvert cells. Thanks.\n\n@ecollins You're quite right. Sorry for this.\n My interest in this feature aligns with @kungfujam. A critical feature and advantage of R is its ability to link code directly to reports without manual intervention. While I like the convenience that affords, the reproducibility of entirely code generated reports is my primary concern. That said showing all code in a report becomes unreadable particularly when doing all the plot formatting. We\n While I do think we can improve the notebook's ability to handle the report usage case, it may make sense to build other tools for those usages cases. For example, we should be able to build support for knitr (and a python variant) into juptyerlab itself. That is one of the big underlying ideas of jupyterlab - that the same building block may be better assembled in different wants for different purposes.\n > For example, we should be able to build support for knitr (and a python variant) into juptyerlab itself.\n\nAgreed. Brian, do you know if there's an issue in Jupyterlab for connecting kernels to text files? https://github.com/jupyter/jupyterlab/issues/450 discusses it, but only tangentially. Perhaps we can move further discussion of \"report generation\" issue there, and limit this issue to the original \"hide input in the notebook\".\n To separate out the requests a bit, having the ability to hide input cells (ie, code) would be a fantastic first step and would get us functionality that's akin to RMarkdown reports (since we can export a Jupyter notebook to html/pdf). Whatever you decide, thanks for a fantastic product overall!\n > Agreed. Brian, do you know if there's an issue in Jupyterlab for connecting kernels to text files?\n\nFor now we are trying to reach feature parity with current notebook, which is already a lot of work, and yes we will discuss attaching kernel to \"classic\" text files, though it is a complex question as soon as you want to enable real-time collaboration as well, as there are security implications. \n\n> To separate out the requests a bit, having the ability to hide input cells (ie, code) would be a fantastic first step and would get us functionality that's akin to RMarkdown reports (since we can export a Jupyter notebook to html/pdf).\n\nYou can already tag cell with metadata and drop them when using nbconvert exporters, @michaelpacer is going to work in making that more straightforward, and improve the documentation.  \n @Carreau Thanks for the info!\n @amueller \n\n> @BreitA that's super easy. The hard part is getting rid of the prompt for the output. Lemme send a PR.\n\nCould you tell me how to do supress all input in the exported pdf?\n\nthanks\n @vavachan If you look at https://github.com/michaelpacer/hiding_tags_nbconvert/blob/master/kill_hidden.tplx that should give you a good idea of how to do this while hard hiding (killing) cells, inputs or outputs on the basis of the tags that you've applied to individual cells (in case you don't want to make it universal). \n\nIf you want to get rid of _all_ input you could modify that template and get rid of the `if` statement that limits the application of the hiding to only those cells you have tagged as such. \n +1 for being able to selectively hide input cells -- any progress on this? @dpsanders do you mean in the notebook or in a converted notebook? If after conversion, then https://github.com/michaelpacer/hiding_tags_nbconvert might be what you're looking for. If you want it to be in nbconvert itself, please comment on https://github.com/jupyter/nbconvert/issues/445. \r\n\r\nI'm not sure if there's been any forward motion on either how to apply tags in a more user-friendly manner or actually hiding input from within an active notebook.  I meant in an active notebook. Another request for this today- will this for sure be in 5.1? We are working on the design for this in JupyterLab right now. I would\nrather focus on implementing new features first in JupyterLab and the back\nporting as time allows. Getting the design right for this is challenging,\nbut we are making progress (even in the last week :-). Because of these\nthings I don't want to commit to it being in any particular release of\nclassic notebook. This brings up another issue and that is how/when do we\nback off on new features in classic notebook. My own personal preference\nwould be to start dramatically scale back new features in classic notebook,\nand if they do get added, make sure they are in lab first.\n\nAlso, keep in mind, this is the longest standing feature request we have\nhad since 2011...we have implemented it multiple times in different\nways...the bottleneck is design...\n\nOn Thu, Mar 16, 2017 at 11:37 AM, JamieW <notifications@github.com> wrote:\n\n> Another request for this today- will this for sure be in 5.1?\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/534#issuecomment-287152502>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0NYxIkr63dNXx3K4fL_sTBT8x8-Sks5rmYF_gaJpZM4GKAxO>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I always wanted to hide code because 99% of people will shut down emotionally if they see code. The big workflow gulf in Jupyter for me is between analysis and presentation. The dashboarding widgets might offer a nice context in which to frame design considerations on making notebooks more presentable. @JoelBondurant If you are presenting code and don't need to actually execute it (which is presumably what you would be doing if you're hiding the code) you can use `nbconvert`.  \r\n\r\nHow exactly you would use it would depend on what exactly you want. \r\n\r\nFor example, if you wanted to explore a notebook as though you were going through the notebook but without having to see or execute any of the code, you could export to html and use something like @parente's solution to hide all of the input cells (as an nbviewer PR https://github.com/jupyter/nbviewer/pull/681 and as a [blogpost](http://mindtrove.info/code-hiding-on-nbviewer/)). \r\n\r\nIf you want a bit more flexibility (e.g., showing some inputs, but not all; or being able to toggle the visibility of individual cells' input), you could use the approach I took in https://github.com/mpacer/hiding_tags_nbconvert. In that case, you would tag all the cells that for which the input would be eliminated with `kill_input` (and you would use the `kill_hidden.tpl` template). That would solve your problem in the same way as above, but on a per cell basis. \r\n\r\nHowever, suppose someone asked a question specifically about the code, you might want to make it accessible; that wouldn't be possible if the cells were actually not present(which is what the `kill_hidden.tpl` does\u2026 thus the ominous moniker of `kill`). However, you might want to only apply this to some cells, and you might not want to have to toggle all the cells at once in order to show just one (which may cause scrolling issues for that one cell). Then you want the `toggle_hidden.tpl` template, which creates per-cell visibility that is controlled by a toggle control (e.g., see the checkbox next to `{%- block any_cell -%}` at [this example site](https://mpacer.github.io/hiding_tags_nbconvert/hide_cells_based_on_tags.html) for to see what I mean). In that case, you would tag code cells with `hide_input` and would use the `toggle_hidden.tpl`. \r\n\r\nIf you wanted to have a blending of the two, that's just a matter of me writing a new template which wouldn't be hard, but won't a priority for me unless someone specifically asks for it.\r\n\r\nLet me know if I can be of any other help! Thanks Min!\n\nOn Thu, Mar 16, 2017 at 3:59 PM, M Pacer <notifications@github.com> wrote:\n\n> @JoelBondurant <https://github.com/JoelBondurant> If you are presenting\n> code and don't need to actually execute it (which is presumably what you\n> would be doing if you're hiding the code) you can use nbconvert.\n>\n> How exactly you would use it would depend on what exactly you want.\n>\n> For example, if you wanted to explore a notebook as though you were going\n> through the notebook but without having to see or execute any of the code,\n> you could export to html and use something like @parente\n> <https://github.com/parente>'s solution to hide all of the input cells\n> (as a PR jupyter/nbviewer#681\n> <https://github.com/jupyter/nbviewer/pull/681> and as a blogpost\n> <http://mindtrove.info/code-hiding-on-nbviewer/>.\n>\n> If you want a bit more flexibility (e.g., showing some inputs, but not\n> all; or being able to toggle the visibility of individual cells' input),\n> you could use the approach I took in https://github.com/mpacer/\n> hiding_tags_nbconvert. In that case, you would tag all the cells that for\n> which the input would be eliminated with kill_input (and you would use\n> the kill_hidden.tpl template). That would solve your problem in the same\n> way as above, but on a per cell basis.\n>\n> However, suppose someone asked a question specifically about the code, you\n> might want to make it accessible; that wouldn't be possible if the cells\n> were actually not present(which is what the kill_hidden.tpl does\u2026 thus\n> the ominous moniker of kill). However, you might want to only apply this\n> to some cells, and you might not want to have to toggle all the cells at\n> once in order to show just one (which may cause scrolling issues for that\n> one cell). Then you want the toggle_hidden.tpl template, which creates\n> per-cell visibility that is controlled by a toggle control (e.g., see the\n> checkbox next to {%- block any_cell -%} at this example site\n> <https://mpacer.github.io/hiding_tags_nbconvert/hide_cells_based_on_tags.html>\n> for to see what I mean). In that case, you would tag code cells with\n> hide_input and would use the toggle_hidden.tpl.\n>\n> If you wanted to have a blending of the two, that's just a matter of me\n> writing a new template which wouldn't be hard, but won't a priority for me\n> unless someone specifically asks for it.\n>\n> Let me know if I can be of any other help!\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/534#issuecomment-287217610>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0Cx7Y1FE3d-XbVBWolJN7Ios77pCks5rmb7YgaJpZM4GKAxO>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg if you meant me, I am flattered to be mistaken for @minrk \u2014 if that's happening, I'm clearly doing something right :). LOL, after over 10 years of reading emails from MinRK, my brain is\nhardwired to greedily autocomplete \"M...\" to MinRK. Many apologies, and\nthank you for the detailed reply and gentle correction. Cheers, Brian.\n\nOn Thu, Mar 16, 2017 at 6:26 PM, M Pacer <notifications@github.com> wrote:\n\n> @ellisonbg <https://github.com/ellisonbg> if you meant me, I am flattered\n> being mistaken for @minrk <https://github.com/minrk> \u2014 if that's\n> happening, I'm clearly doing something right :).\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/jupyter/notebook/issues/534#issuecomment-287241300>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABr0N-rgNvYefbFsVUx3BWuOnxRCr7Tks5rmeFZgaJpZM4GKAxO>\n> .\n>\n\n\n\n-- \nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","Confirmed on Safari 9, Firefox 41, and Chrome 42 on my Mac. Also, nicer fix than mine. :+1:\n","Well, almost works, the files are corrupted, I'll try again tomorrow...\n This solves the upload portion, but not the download back to the server portion.  We need to support a similar chunked protocol on the XHR end.\n When we `save()` a file, we could send the size as part of the first call to `/api/contents/ PUT`, then send the blobs after.\n A similar protocol would be needed for `get()` to support large file download.\n @blink1073 do you think this is stable enough to consider for 4.1?\n Verbally \"no\" so marking as 4.2\n This is an important feature for me. I'm using the upload for an online demo to convert data files to a standard format.\n\nIf there is something I can do to help to speed up the inclusion of this feature I'd be glad to help.\n I think the simplest way would be to add an optional `chunks_remaining` field to the REST API model and use the existing base64 encoding.  Then you would call `save` with each chunk from `notebooklist.js`.  The server would have to be updated to detect the presence of `chunks_remaining`, and keep a file handle open until `chunks_remaining` is zero.  Thoughts?  \n Is it worth looking for existing solutions? Uploading a large file over HTTP isn't that unusual, is it?\n From what I've gathered in searching, the consensus is to use the HTML5 FileReader API using binary chunks.  There are _uploader_ libraries that handle the chunking/resuming, but we also need to stream downloads from the server.  Either way, we'd have to implement the logic on the server to handle streaming. \n That has gone stale, I'm going to close to keep the active PR queue short, and tag with \"Closed PR\" so that we can reopen when needed. Thanks a lot @blink1073 for getting that started .\n","What are your thoughts on running the container in interactive mode `-d` --> `-it`? This makes it very similar to running `ipython notebook` from the command line. This can be combined with `--rm` to ensure the container is removed after it is stopped (nice for beginners). With this sort of change, `--name` is less useful, but could still be used.\n\nAlso, what are your thought on publishing all exposed ports instead of providing the explicit mapping `-p 8888:8888` --> `-P`? As the `EXPOSE 8888` is already present, `-P` will do this mapping for us.\n\nIn short, I wonder if it wouldn't be nice to show a usage like this `docker run --rm -itP -v \"$(pwd):/notebooks\" jupyter/notebook` for local use. It is a nice analogue to `ipython notebook` (minus opening the browser for you).\n\nCertainly there are use cases for all options already mentioned. I guess I am wondering about this as this is the notebook repo and for users wanting to get started with the notebook (missing needed dependencies) using `docker` like this allows for short startup time while avoiding many of the nitty gritty details about how `docker` works.\n","Some cosmetic changes to the code documentation in the modest hope to increase clarity were made in the pull request but if this is creating too much noise I'm more than willing to resubmit removing those changes.  The only relevant change is to line 130 of notebook/static/notebook/js/quickhelp.js:\n\nhttps://github.com/jupyter/notebook/compare/master...8leggedunicorn:master#diff-486449eeb1854839612d5c1a8590fea6L130\n It's totally fine to make improvements to if you see them. cc @ellisonbg, @willingc for UI help change.\n @minrk I'm glad you raised the point regarding consistency.  My immediate thought on using lowercase was not fully threshed out.  The consistency I think best suited is to mirror the actual values.\n\n@ellisonbg @willingc I'm requesting a small UI change in this pull request that the keyboard shortcuts help dialogue use the case of the actual assigned value, to be consistent with the actual values, please see above.  That is at this time as far as I'm aware all shortcuts are lower case, \n\n``` sh\n\u279c  notebook git:(master) sed -n '/KeyboardManager.prototype.get_default_command_shortcuts/,/}/p' notebook/static/notebook/js/keyboardmanager.js                                     \n    KeyboardManager.prototype.get_default_command_shortcuts = function() {\n        return {\n            'cmdtrl-shift-p': 'ipython.command-palette',\n            'shift-space': 'ipython.scroll-up',\n            'shift-v' : 'ipython.paste-cell-before',\n            'shift-m' : 'ipython.merge-selected-cells',\n            'shift-o' : 'ipython.toggle-output-scrolling-selected-cell',\n            'enter' : 'ipython.enter-edit-mode',\n            'space' : 'ipython.scroll-down',\n            'down' : 'ipython.select-next-cell',\n            'i,i' : 'ipython.interrupt-kernel',\n            '0,0' : 'ipython.restart-kernel',\n            'd,d' : 'ipython.delete-cell',\n            'esc': 'ipython.close-pager',\n            'up' : 'ipython.select-previous-cell',\n            'k' : 'ipython.select-previous-cell',\n            'j' : 'ipython.select-next-cell',\n            'shift-k': 'ipython.extend-selection-previous',\n            'shift-j': 'ipython.extend-selection-next',\n            'x' : 'ipython.cut-selected-cell',\n            'c' : 'ipython.copy-selected-cell',\n            'v' : 'ipython.paste-cell-after',\n            'a' : 'ipython.insert-cell-before',\n            'b' : 'ipython.insert-cell-after',\n            'y' : 'ipython.change-selected-cell-to-code-cell',\n            'm' : 'ipython.change-selected-cell-to-markdown-cell',\n            'r' : 'ipython.change-selected-cell-to-raw-cell',\n            '1' : 'ipython.change-selected-cell-to-heading-1',\n            '2' : 'ipython.change-selected-cell-to-heading-2',\n            '3' : 'ipython.change-selected-cell-to-heading-3',\n            '4' : 'ipython.change-selected-cell-to-heading-4',\n            '5' : 'ipython.change-selected-cell-to-heading-5',\n            '6' : 'ipython.change-selected-cell-to-heading-6',\n            'o' : 'ipython.toggle-output-visibility-selected-cell',\n            's' : 'ipython.save-notebook',\n            'l' : 'ipython.toggle-line-number-selected-cell',\n            'h' : 'ipython.show-keyboard-shortcut-help-dialog',\n            'z' : 'ipython.undo-last-cell-deletion',\n            'q' : 'ipython.close-pager',\n        };\n\u279c  notebook git:(master) sed -n '/KeyboardManager.prototype.get_default_command_shortcuts/,/}/{//!p}' notebook/static/notebook/js/keyboardmanager.js | egrep '[A-Z]'\n\u279c  notebook git:(master)\n```\n\nhowever this may not always be the case, and it stands to reason that at some point be it by adding additional global or user custom shortcuts there will indeed be a need for the use of both upper and lower case letter bindings. If it makes sense please commit, and if modifications are required just let me know.  Cheers.\n IMHO bindings should be (have to be) case-insentive. \n\nFor example, there is no way to type capital letter `A` with a single unmodified keystroke. What you do is type `shift-a`. That is to say, the case of a letter is a product of its numeric key code and a modifier. \n\nThis means that the key binding `shift-+` is invalid because there is no way to type the `+` key without a modifier. That binding (on a US keyboard) would be expressed as `shift-=`. \n\nThe [phosphor-keymap](https://github.com/phosphorjs/phosphor-keymap) repo went live at the end of last week, and @blink1073 is working towards a PR which uses that to implement these shortcuts. It supports arbitrary length chords as well as scoping via CSS selectors (ala Atom). It treats bindings in a case-insensitive manner. It uses `+` as the separator though, since `+` is not a valid key character like `-` is.\n\nWith that technical stuff out of the way, I definitely think they should be presented to the user in the UI in a readable form. My personal preference for this is cap-cased modifiers with capitalized primary keys:\n\n`Ctrl-Shift-A`, `Alt-3`, `D D`, `Ctrl-Alt-F5`, etc...\n @sccolbert I suspect one can use a caps lock key for what you were describing, although tbh I haven't used one of those in years.  You are right however that using the `Shift` modifier makes the case usage in the help dialogue irrelevant.  I'll close this PR.\n (Un)fortunately, caps lock does not effect the [keyCode](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode) which is used to determine what key was actually pressed*. But even if it did, it would then be impossible to distinguish `shift+a` from `shift+A`; one of those would have to be an invalid binding.\n\n\\* That's a deprecated API, but it's the only one which currently works across all browsers. The keyboard API is probably the worst area for browser compatibility at the moment. The [DOM 3 standard](http://www.w3.org/TR/DOM-Level-3-Events/#widl-KeyboardEvent-key) (which fixes most of the issues) is not yet supported by Chrome.\n On the first part I absolutely agreed which is why I closed the PR.   I'm really not too well versed in UI/UX but it's interesting.  I know how to change the code and I know if something initially rubs me the wrong way - I was too case sensitive this time, pun intended.  I expected there was a likely reason and there certainly is for using a consistent case, and agreed the `Shift` is and should be viewed as a modifier.\n\nI remember wrestling with keyboard scancodes and what not in Linux (other *nix) and from that experience I'm certainly glad to leave it to others to work out the details for modern day browsers, the DOM 3 standard sounds promising.  Working on the computer has mostly meant the command line for me, but well adopting Jupyter into my workflow is and likely will continue to be a unique and beneficial experience.\n","I don't think those attributes, that are shown in the stack overflow post you've shared, map one to one with CodeMirror (the component we use to render the code field).  CodeMirror may not support this, but it's worth looking into.\n\nI should also note, we don't \"officially\" support Safari mobile nor any other mobile platform.  That's not to say we shouldn't try though!\n Thanks but it seems that CodeMirror should already do this: https://groups.google.com/forum/m/#!topic/codemirror/n6CRZ3CUO3s\n\nNot sure why it apparently isn't the case. \n I was going to post that we had the same discussion with CodeMirror years ago for Sage, but @roger beat me to it.  That was a previous version of codemirror, though, and its design was completely different and it's seen at least two major rewrites since then.\n @jdfreder @jasongrout @roger- I looked at the current state of the code and it appears there are explicit declarations in Jupyter notebook turning off auto-capitalization:\n\n``` bash\n\u279c  notebook git:(master) egrep -rl 'autocapitalize.*off' * | egrep -v '\\.js\\.map' | while read file ; do egrep -Hn 'autocapitalize.*off' $file ; done\nnotebook/static/tree/js/main.min.js:1270:    field.setAttribute(\"autocapitalize\", \"off\");\nnotebook/static/edit/js/main.min.js:1270:    field.setAttribute(\"autocapitalize\", \"off\");\nnotebook/static/notebook/js/main.min.js:1270:    field.setAttribute(\"autocapitalize\", \"off\");\nnotebook/static/components/codemirror/lib/codemirror.js:1180:    field.setAttribute(\"autocapitalize\", \"off\");\nnotebook/static/terminal/js/main.min.js:7163:    field.setAttribute(\"autocapitalize\", \"off\");\n```\n\nAll of which are using the same function, `disableBrowserMagic` with this value.\n\nA notable caveat is that some of the code, all tokens of this case are shown above, are being used right now has the value 'off' for `autocapitalize`, however looking at the [developer manual for Safari Apple](https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/Attributes.html) this is deprecated in favor of using the value 'none' since iOS 5.0.  The [equivalent state](https://developers.google.com/web/updates/2015/04/autocapitalize?hl=en) appears to be in recent versions of Android Chrome. I don't know enough about this but a simple PR changing 'off' to 'none' maybe all that's necessary to rectify this issue, but well as you know many of those JavaScript files are thousands of loc so who knows, but it might be worth a try.\n\n@roger- This being the case note the mobile support is still at this time experimental in CodeMirror, and was only officially experimentally supported February of this year, note the [release history](http://codemirror.net/doc/releases.html) for version 5.0.  [This](http://codemirror.net/#browsersupport) is the list of their officially supported browsers, all desktop versions. \n\nSecondly if one does a [search on the GitHub repository of CodeMirror for 'keyboard'](https://github.com/codemirror/CodeMirror/issues?utf8=%E2%9C%93&q=is%3Aissue+is%3Aopen+keyboard) there are currently 7 open issues 5 of which are mobile platform related. \n\nThe project appears to be actively working on becoming more compatible with mobile browsers, and I will certainly benefit as my portable device of choice is an Android tablet. Note at least on my Android tablet the hardware (bluetooth) keyboard I use with it doesn't auto-capitalize the first inputted letter like the virtual keyboard does.  For my and potentially your workflow using a hardware keyboard is a reasonable stopgap, but of course what mobile OS, what OS version, as well as browser used on each may radically change the actual behavior observed between different mobile setups.\n\nEdit: Ah these JavaScript files are being generated in the build process.  Someone more knowledgeable than I will likely need to find where.\n > Edit: Ah these JavaScript files are being generated in the build process. Someone more knowledgeable than I will likely need to find where.\n\nThe main.min.js files contain a bundle of all of the Javascript dependencies for the given page.  We use r.js to traverse the dependency tree and do the bundling.  The code that you point to probably lives in CodeMirror's source, because searching the notebook repository for it yields no results.\n Yes, the line is here in codemirror: https://github.com/codemirror/CodeMirror/blob/5fafcf837480430b614085d62d884098ccd53297/lib/codemirror.js#L1182\n CodeMirror currently displays code in a `div` with `contentEditable='true'`. The fixes on Stackoverflow from the original poster don't work in this context. CodeMirror acknowledges this:\n\nhttps://github.com/codemirror/CodeMirror/issues/3087\n\nI had hoped to find a way to fix this for SageMathCell, but no go.\n\nOne can always turn off autocapitalization completely on the mobile device.\n","Looking good to me.\n\nWe need to have alternate origin/host tests for other bits as well, this may be the right area to start.\n","Fixed by #550\n","I'm not familiar with Anaconda, because I do not use it.  However, try `python -m IPython kernelspec install-self --user`, but replace `python` with the python from the conda env.  I _think_ this will make the IPython kernel launch in that env's Python, but when you remove the conda env, it may go bonkers.  You may even get an error regarding \"IPython\" not existing, which would suggest conda wasn't copying IPython into the new env.\n +1 to the `defaultkernel` idea\n @jdfreder - I'm not sure your idea will work with Conda.  Basically, to switch conda environments, you need to add the appropriate directory to your path. The thing about just invoking the python in the correct location is that anything else may use the wrong scripts since the path isn't set correctly.\n\nBy the way, I think `defaultkernel` is a terrible name, but I do think that making it very easy to have a user start up a notebook in an environment with the assumption that the python running the notebook will also run the kernel will lower the barrier a lot.\n First of all:\n\n```\ndamian-S400CA :: ~ :: \n$ conda create -n test python=3.4 ipython-notebook --yes\nFetching package metadata: ......\nSolving package specifications: .\nPackage plan for installation in environment /home/damian/miniconda3/envs/test:\n\nThe following NEW packages will be INSTALLED:\n\n    certifi:          14.05.14-py34_0\n    decorator:        4.0.4-py34_0   \n    ipykernel:        4.0.3-py34_0   \n    ipython:          4.0.0-py34_0   \n    ipython-notebook: 4.0.4-py34_0   \n    ipython_genutils: 0.1.0-py34_0   \n    jinja2:           2.8-py34_0     \n    jsonschema:       2.4.0-py34_0   \n    jupyter_client:   4.0.0-py34_0   \n    jupyter_core:     4.0.6-py34_0   \n    libsodium:        0.4.5-0        \n    markupsafe:       0.23-py34_0    \n    mistune:          0.7.1-py34_0   \n    nbconvert:        4.0.0-py34_0   \n    nbformat:         4.0.0-py34_0   \n    notebook:         4.0.5-py34_0   \n    openssl:          1.0.1k-1       \n    path.py:          8.1.2-py34_0   \n    pexpect:          3.3-py34_0     \n    pickleshare:      0.5-py34_0     \n    pip:              7.1.2-py34_0   \n    ptyprocess:       0.4-py34_0     \n    pygments:         2.0.2-py34_0   \n    python:           3.4.3-1        \n    pyzmq:            14.7.0-py34_0  \n    readline:         6.2-2          \n    setuptools:       18.3.2-py34_0  \n    simplegeneric:    0.8.1-py34_0   \n    sqlite:           3.8.4.1-1      \n    system:           5.8-2          \n    terminado:        0.5-py34_0     \n    tk:               8.5.18-0       \n    tornado:          4.2.1-py34_0   \n    traitlets:        4.0.0-py34_0   \n    wheel:            0.26.0-py34_1  \n    xz:               5.0.5-0        \n    zeromq:           4.0.5-0        \n    zlib:             1.2.8-0        \n\nLinking packages ...\n[      COMPLETE      ]|###################################################| 100%\n#\n# To activate this environment, use:\n# $ source activate test\n#\n# To deactivate this environment, use:\n# $ source deactivate\n#\ndamian-S400CA :: ~ :: \n$ source activate test\ndiscarding /home/damian/miniconda3/bin from PATH\nprepending /home/damian/miniconda3/envs/test/bin to PATH\n(test)damian-S400CA :: ~ :: \n$ ipython notebook\n[W 18:50:16.003 NotebookApp] ipywidgets package not installed.  Widgets are unavailable.\n[I 18:50:16.014 NotebookApp] The port 8888 is already in use, trying another random port.\n[I 18:50:16.023 NotebookApp] Serving notebooks from local directory: /home/damian\n[I 18:50:16.023 NotebookApp] 0 active kernels \n[I 18:50:16.023 NotebookApp] The IPython Notebook is running at: http://localhost:8889/\n[I 18:50:16.024 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\nCreated new window in existing browser session.\n[I 18:50:28.001 NotebookApp] Creating new notebook in \n[W 18:50:29.476 NotebookApp] 404 GET /nbextensions/widgets/notebook/js/extension.js?v=20151007185015 (127.0.0.1) 30.10ms referer=http://localhost:8889/notebooks/Untitled.ipynb?kernel_name=python3\n[I 18:50:29.743 NotebookApp] Kernel started: 86bee2e1-171f-452f-9ba2-97f34e11f209\n[I 18:52:29.719 NotebookApp] Saving file at /Untitled.ipynb\n```\n\nand in the notebook:\n\n```\nimport sys\nsys.executable\nOut[1]:\n'/home/damian/miniconda3/envs/test/bin/python3'\n```\n\nwhich is reasonable becuase the native kernel lives in the environment...\n\nSo... it is weird that your kernel is pointing to the root environment...\n\nDo you have any kernels in the JUPYTER_DATA_DIR directory?\n\nAlso: \n\n> try python -m IPython kernelspec install-self --user, but replace python with the python from the conda env\n\nHere @minrk explained a little bit more if you need more insight: https://github.com/ipython/ipython/pull/8877\n Yes.  I do have three kernels in the `JUPYTER_DATA_DIR`.  \n\n``` Bash\nls /Users/jhamman/Library/Jupyter/kernels/\nbash/    python2/ python3/\n```\n\nso the `python -m IPython kernelspec install-self --user` \"works\" except it means I will have to continually be creating new kernels, each time I create a new conda environment.\n And I guess the `kernel.json` inside the python2 and python3 folders are pointing to root (can you post the content?)... try removing those folders (python2 and python3) and the native kernels should take place...\n The notebook no longer relies on IPython, which provides one of many kernels. For convenience the notebook does, however, add the IPython kernel for the notebook server's env _if no Python kernel is already registered_. That IF is the source of frustration, if you want to be doing it all the time, though. The idea being that changing the env of the notebook server _should not_ change the env of your kernels. Similarly, making an env with a kernel doesn't require installing the notebook in that env, just the kernel. This is my habit - I frequently make envs and install IPython in them, and register a kernelspec for the env. What I don't do is install the notebook server multiple times.\n\nWe could also make the in-env kernel available unconditionally with a _different_ name, though. It's more special treatment of IPython than we wanted, but it may be appropriate to put this behavior back.\n\nThere's another hack you can do, and I'm not sure if/how we can make it more convenient to do so: Change the absolute path for Python in the kernel.json to just `python` instead of `/path/to/bin/python3`. If you do this, the kernel will always use the first `python` on PATH in the notebook server's process, which is generally the env's Python.\n @minrk - This is making sense to me now. I'm going to try a few things out and I will let you all know how it goes.\n\ncc @jgaski @orianac\n @minrk Are you using conda? Does that mean you have a notebook server installed in conda root and not elsewhere? If so, how do you get the PATHs right when you are working in an env? Pity this has become so brain-braking...\n @michaelaye yes, I'm using conda, and the notebook (latest master) is in the root env. I also have an env called `stable`, which has stable versions of everything, and various others. I also have kernels in several conda and virtualenvs. If you do the na\u00efve approach above, which just hardcodes sys.executable, the PATH env will not be modified. I have, however, been playing with [a2km](https://github.com/minrk/a2km) which fully activates envs, rather than just specifying the executable.\n So, the kernel text is so simple, I just added what I needed into my `jupyter --data-dir`/kernels. Just one piece missing: You had to add the conda root into your general PATH env so that its Jupyter notebook is always findable, despite working in some conda env, correct?\n +1\n as an update for anybody who struggles with this, it seems that the conda package `nb_conda_kernels` has established a quasi-default status, it automatically finds kernels in conda environments and offers them via the kernel menu in the jupyter notebook, so i'm not struggling with this anymore.\n Thanks @michaelaye for the update; it's true that `nb_conda_kernels` help a lot with this.\n\nDo you think the issue can be closed ?\n for me yes, but @jhamman should decide.\n > for me yes, but @jhamman should decide.\n\nYes, I was imprecise in my question, I was addressing to everyone  but it was unclear. \nThanks for pointing that out.\n","This is ready to go and could be included in a minor release, if desired.\n > Break out installation of pip into a separate layer.\n> \n> Breaks up installation and testing layers.\n\nwhat's the motivation for this?\n\n> Clean up after the first use of apt-get update to, hopefully, cut down layer size.\n\nthis has no effect\n > > Break out installation of pip into a separate layer.\n> > Breaks up installation and testing layers.\n> \n> what's the motivation for this?\n\nNot to be mean, but I had a hard time figuring out what we were trying to do when first looking at the `Dockerfile`. I thought it would be better to have a couple more layers that are a bit clearer in their intent just so it could be understood more easily. Additionally, this should make diagnosing failure at a step a bit simpler. As the total image size ended up being the same and the build time improved, this doesn't seem to hurt.\n\nAlso, each layer is a point that someone could start a container from. If testing failed, one could try using the post-installation layer to startup and play around in the image to figure out what is causing the failure.\n\n> > Clean up after the first use of apt-get update to, hopefully, cut down layer size.\n> \n> this has no effect\n\nYou're right. I hoped it would help the layer size. It didn't end up mattering.\n then again, [i propose](https://github.com/jupyter/notebook/pull/537#issue-110129811) to maintain an extra repository for 'consumer' images. shall i give it a try?\n\nmeaning: i get your point, but it's not mine as a casual user.\n When you are referring to consumer images, do you mean like these ( https://github.com/jupyter/docker-stacks ) or something different? How else would you like to parameterize them?\n\nAlso, you had mentioned versioning. I suppose builds could be done for each tagged release on Docker Hub, as well. This would let one do `docker pull jupyter/notebook:4.0.0`, which does seem nice. The setup of this feature is less automated than we might like, but it may improve in the future. ( https://github.com/docker/hub-feedback/issues/165 )\n oh, i wasn't aware of them. (initially i just went for `ipython/ipython` on the Docker hub and was then directed to `jupyter/notebook`.)\n\nyes, that's conceptually what i mean. but these are not suited for me. i would just need pip and do the rest in a derived image.\n","pinging @minrk @ellisonbg \n","Awesome, it always helps to have better debugging capabilities.\n\nToo bad we can't set custom traces in the Error, then we could get rid of the WrappedError class.\n -- is for aesthetics\n\nOn Wed, Oct 7, 2015, 17:27 Jonathan Frederic notifications@github.com\nwrote:\n\n> Awesome, it always helps to have better debugging capabilities.\n> \n> Too bad we can't set custom traces in the Error, then we could get rid of\n> the WrappedError class.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/544#issuecomment-146335053.\n Tested this, it seems good.  Merging\n","I would like to comment that bookmarks is in some sense normalizing the usecases created by the users in\n\nhttp://stackoverflow.com/questions/15680463/change-ipython-working-directory\n\n(e.g. creating a desktop shortcut that switch directories before launching an ipython notebook server)\n It's also worth noting that you can use your browser's native bookmarking capabilities for much of this.  While having it natively implemented in Jupyter might allow for smarter functionality (exposing these bookmarks in more relevant locations, or having them be smarter about relative paths and ports, etc), at least if you assume that your server always runs on `localhost:8888://home/you/default/path/`, then your bookmarks can be fairly stable, and you can use your browser's bookmarks tab to get much of this job done.\n\nNot the perfect solution, but I just want to point out a potential way out for some cases...\n I feel like browsers already provide sufficient bookmark functionality, and we shouldn't be reimplementing bookmarks inside of a UI that already has bookmarks.\n I still feel in general it is difficult to locate notebook files with the current Files UI. Especially if directories contain ~ 100 of files.\n\nIf bookmarks are not the way to go, I would suggest these following features that enhance locating notebooks and files, and are difficult to relay to the browser UI. \n\n(more or less like http://linux.about.com/library/gnome/blgnome6n3c.htm)\n- adding an edit button to the location bar\n- add search (even just by file names for now) can also be useful. \n- tagging notebooks and searching tags.\n\nThese features are more or less supported in most of OS file browsers, probably because they do solve real issues for real users.\n @rainwoodman I didn't say that bookmarks aren't the way to go, just that there are already bookmarks provided by the browser because every notebook and directory has a URL.\n\nI think typing in the location is a good idea, and we've had it for a long time, but nobody has been able to implement it yet.\n\nI think a better answer to the full features of a file browser is to provide a better API ([nbopen](https://github.com/takluyver/nbopen)) for opening notebooks from the real file browser. _Using_ a real file browser will always be better than reimplementing one in a browser.\n","I enjoy that it's outside the normal build matrix. That's the other reason we have the webhooks to docker in place, as well as running iptest (though those have since been taken out of the image itself).\n","Makes sense to test these things. @rgbkrk can you look at this one?\n Seems fine. I've started using circleCI in other projects, it's pretty good. Do you have a link to your current builds? \n Sure, here is the most recent build ( https://circleci.com/gh/jakirkham/notebook/9 ).\n\nHere is the relevant error snippet. Looking at the test, what it does makes sense. This failure is on python2.\n\n```\nTest group: utils\n...............................................................................S........SSS...S.....S.S..S.E........S..S...............................\n======================================================================\nERROR: IPython.utils.tests.test_path.test_ensure_dir_exists\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.7/dist-packages/nose/case.py\", line 197, in runTest\n    self.test(*self.arg)\n  File \"/usr/local/lib/python2.7/dist-packages/IPython/utils/tests/test_path.py\", line 434, in test_ensure_dir_exists\n    path.ensure_dir_exists(d) # create it\n  File \"/usr/local/lib/python2.7/dist-packages/IPython/utils/path.py\", line 440, in ensure_dir_exists\n    if not os.path.exists(path):\n  File \"/usr/lib/python2.7/genericpath.py\", line 18, in exists\n    os.stat(path)\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\u2202' in position 25: ordinal not in range(128)\n```\n There use to be more of these issues, but I added this line ( https://github.com/jupyter/notebook/blob/master/Dockerfile#L14 ), which sets `$PYTHONIOENCODING` to `UTF-8` and that removed all but this issue.\n I'm a fan of merging once it passes, otherwise this will sit in error for a long time. We should only be testing the notebook here and I'm not sure why Python2 is being tested here as well.\n That sounds reasonable. If anybody is able to reproduce this failure outside of CircleCI, please let me know. At present, I can't seem to reproduce it.\n @rgbkrk, just so I follow, are you suggesting we drop Python 2 testing entirely?\n\nI'd be ok with keeping it, but maybe we could just skip this test, at present. It doesn't seem to affect building locally or on Docker Hub. It also completes successfully in a running container. Further, all the other python2 tests pass on Circle CI. We can always come back and see if we can get it to pass later.\n\nEdit: Turns out this issue showed up in python3 tests, as well. So, as the fix was relatively minor. It was worth making now.\n Ha! I think I fixed it. ( https://circleci.com/gh/jakirkham/notebook/30 )\n\nWe will need to update iPython eventually though ( https://github.com/ipython/ipython/pull/8886 ).\n\nI have included a patch in this PR, which is applied in the container for the interim. If we need to keep the patch, it probably should be moved and renamed somehow.\n If you rebase and rekick your build, does it bring in the freshly merged patch instead?\n I will try and see what happens.\n It failed without the patch.\n\nSo, at present I believe it is `pip` installing `ipython`. I could try `pip` installing using `master` from `ipython` instead or perhaps even this commit ( https://github.com/ipython/ipython/commit/a58ab37122285adf8f79bd76ded718a777ae3a7c ).\n\nWhat would you like me to do?\n So, `pip` installing was working. However, I am having some issues installing packages on Circle CI now.\n\nFor those curious about size of layers, this did not make a noticeable difference.\n I suspect something is broken with the docker image `ubuntu:14.04`. There was a push about an hour ago.\n\nTurns out I was not able to reproduce this issue as I did not have the most recent image of `ubuntu:14.04`. After pulling the most recent, I am able to reproduce it locally.\n\nAdded an issue here ( https://github.com/docker-library/official-images/issues/1110 ).\n It turns out the there was a minimal (non-development) python installed. As a consequence, we were unable install the development dependencies that are required. I added a step that removes this development version of python first, which seems to resolve this issue.\n\nThis surprisingly results in a ~0.5MB layer, but it is not a big deal.\n Build now passes ( https://circleci.com/gh/jakirkham/notebook/60 ).\n Based on feedback from @minrk, I have come up with an alternate fix for `ipython` in this PR ( https://github.com/ipython/ipython/pull/8887 ).\n Side note: I'm not sure whether you were aware of this, but repositories can be linked on Docker Hub (under Build Settings). This allows one to link it to the repository they are using as `FROM`. That way, when the upstream repository is pushed to or rebuilt it will trigger a rebuild of yours. This can be very handy in quickly diagnosing issues like the one I ran into last night. As the build errors, there will not be an image available to pull so you don't need to worry about somebody getting a broken image.\n I'd like to try and explain what is going on with the encoding issues.\n\nOn a working build, we are able to easily change the locale with environment variables and see the following.\n\n```\nRUN python3 -c \"import sys; print(sys.getfilesystemencoding())\"\nutf-8\n```\n\nHowever, on Circle CI we are running into this bug ( https://bugs.launchpad.net/ubuntu/+source/langpack-locales/+bug/931717 ). As a result, we see this.\n\n```\nRUN python3 -c \"import sys; print(sys.getfilesystemencoding())\"\nascii\n```\n\nThere is a workaround proposed here ( https://bugs.launchpad.net/ubuntu/+source/apparmor/+bug/969299/comments/6 ). Though, I don't believe we can take advantage of this. When talking with someone from Circle CI, they stated that the best thing to do would be to have an image with the locale settings workaround done. I went ahead and did that and put it in the image here ( https://github.com/jakirkham/docker_ubuntu_14_04_locale_fix ). This fixes the problem and makes the patch unnecessary.\n\nWith these changes the build will pass. ( https://circleci.com/gh/jakirkham/notebook/75 )\n\nIf you wish to take this repo and license it as you see fit, I have no problem. I only have the two constraints. It needs to be open sourced (I don't care BSD or whatever) and I would like credit for the work I did. Once the logistics of how this should be setup are addressed, I will cobble these changes back together in this PR.\n Sorry to totally siderail, but does any of this issue come up with Ubuntu 15.04?\n I think I did a poor job of explaining. Sorry about that. Here's the TLDR:\n\nThe problem is an LXC AppArmor configuration issue on Circle CI, which blocks this encoding change.\n\nThe workaround is to do that step not on Circle CI (e.g. Docker Hub) and use it as our new base image.\n\nAlternatively, if you have another CI that you like with Docker support, we could try that.\n I should add building locally and on docker still result in working builds. This was built from my branch `docker_ci_3` ( https://hub.docker.com/r/jakirkham/notebook ).\n Maybe it would be ok if I merged this ( https://github.com/jakirkham/docker_ubuntu_14_04_locale_fix ) into ( https://github.com/jupyter/docker-stacks ). Thoughts @parente?\n @jakirkham Sure. Can you send it as a PR against docker-stacks?\n Sorry for the long delay. I have added this PR ( https://github.com/jupyter/docker-stacks/pull/108 ). So that we can have a base image to use for CI here.\n Ok cool. Now I see why we should just merge the other PR.\n Yeah, I think we couldn't think of anywhere else to put it. Unfortunately, we really need the locale to be UTF8, but CircleCI wasn't having it. So, setting it in a base image did the trick and allowed this image to behave the same with the added bonus of CI.\n Still needs the base image. Though, should we switch the base image to debian since this is already scheduled for 5.0? That way it can be the same as the other docker images. Maybe that should be another PR though as there is already a bit to keep track of here.\n Tests run for this branch ( https://circleci.com/gh/jakirkham/notebook/179 ) using the new base image in docker-stack.\n\nAppears to be failing on one test ( `IPython.lib.tests.test_lexers.TestLexers:testIPythonLexer` ). Can reproduce this locally. Is this just a `pygments` issue?\n It's just because this isn't based on master. The IPython tests aren't run in this Dockerfile, but yes it's a probably inconsequential change in pygments causing an IPython lexer test to fail.\n Ah right, I forgot the tests got removed from the Dockerfile in master. Great. Thanks everyone.\n Thanks for your patience on this one.\n :smile: :tada:\n Of course. Hope this helps. Sorry it took a bit on the last part. Probably should come up with something similar for docker stacks.\n","Added to the seemingly never-ending trail of bugs like this. Can you include your browser version and OS? Do you see the same thing in any other browsers?\n browser: chrome 45.0.2454.101 m\nOS: windows 8.1\nThe notebook is served from a Ubuntu 14.04\n OK thanks, we will try to reproduce.\n @ellisonbg any luck in your efforts to reproduce this?\n We are going to look at this, but could you post (as a gist) a simple notebook that shows the problem?\n @sccolbert you fixed this, right?  It was fixed by the CodeMirror commit you pinned, no?\n @jdfreder Correct.\n closed by https://github.com/jupyter/notebook/pull/543\n No this one was different and hasn't been reproduced yet.\n Ah. right. sorry.\n I saw this message and switched to one of my open notebooks and it had this glitch. I opened up a fresh new notebook to try to reproduce this but can't. Then switching back to the problem notebook, I can't get it to do the glitch any more either.\n It may have been resolved and your cache was out of date.  I'll close the issue for now, but please let us know if you encounter the problem again, thanks!\n","There's a codefolding extension here: https://github.com/ipython-contrib/IPython-notebook-extensions/wiki/Codefolding_v3\n\nDepending on how you're using them, you could also use nbconvert to render notebooks to HTML. By supplying a custom template, you can format the result however you want.\n Thanks a lot! I think my idea is a bit like gmail - only expand when editing. People want to read the output figures at first glance.\n you can extend [this template](https://github.com/jupyter/jupyter_nbconvert/blob/master/jupyter_nbconvert/templates/html/full.tpl), and in it override a block in the [\u201cbasic\u201d template](https://github.com/jupyter/jupyter_nbconvert/blob/master/jupyter_nbconvert/templates/html/basic.tpl) it inherits from to do nothing:\n\n``` jinja\n{%- extends 'full.tpl' -%}\n{%- block input_group -%}{%- endblock input_group -%}\n```\n Closing as there is no plan to do anything. \n","Someone else on Windows want to test this?\n I can try, one sec, need to reboot\n /me begins process of setting up a dev env on Windows\n Took a while, but I was finally able to reproduce the error:\n\n![capture](https://cloud.githubusercontent.com/assets/3292874/10438876/300f2120-70eb-11e5-9fac-7cb4db186e0d.PNG)\n\n(note, the details are hidden by jupyter-devinstall)\n\nNow I'm going to checkout this branch...\n Success!  Thanks @minrk !\n Success == ready to merge ?\n\nOn Mon, Oct 12, 2015 at 5:17 PM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> Success! Thanks @minrk https://github.com/minrk !\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/550#issuecomment-147525324.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Thanks!\n\nOn Mon, Oct 12, 2015 at 5:17 PM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> Merged #550 https://github.com/jupyter/notebook/pull/550.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/550#event-433377584.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","Fixed in jupyter-client 4.1.1\n","@kangxin are you in edit mode when you hit this shortcut, or command mode (i.e. do you have a blinking cursor and green border)? This shortcut only works in edit more (cursor active)\n Thank you for responding. I am in edit mode (there is a blinking cursor and green border) when I try to split the cell. Since my keyboard is for Japanese Language (the subtract is under the equal sign on the same button), I am not sure if that causes the problem.\n @kangxin that's almost certainly the problem, yes! You can register an alternate shortcut for your keyboard. I suspect it will be the `=` key. Our shortcuts use the keyDown instead of keyPress events, which can be sensitive to localization issues. I think it's really the wrong event to be looking for, but there are various problems with switching to keyPress that we haven't been able to figure out yet.\n Thank you for this quick explanation. I just hope this problem could be solved in the future. I could not find the reregistration of alternate shortcut for \"=\" in OSX, though. Thank you again for developing this amazing software. \n I there,\r\nThis isn't solved. It has happened to me on most of my latest Jupyter installations. The tooltip (Shift-Tab) does not work either (the code completion does, though; and I wonder if it is the tooltip that appears when I hit Tab (only) outside from completion-context (still edit-mode)).\r\n\r\n## My setup\r\n### System\r\nLinux Mint 18, kernel 4.4.0-57-generic, x86_64 architecture\r\n\r\n### Python-related\r\nPython 3.5.2 (default, Nov 17 2016, 17:05:23) \r\nIPython 5.1.0\r\njupyter-core 4.2.0\r\njupyter 1.0.0\r\njupyter-client 4.4.0\r\njupyter-console 5.0.0\r\n\r\n### Browser\r\nFirefox 50.1.0\r\nLots of plugins too, but I tried disabling them: it does not change the behaviour.","@funkyfuture, bringing to your attention.\n > They are saved in that directory.\n\nyes, that's the path inside the container. but with the example with a host-path mounted, in 'reality' the nbs are saved in that host-path. or, if no mounted volumes is given, they will be saved in an extra data volume, that is not in the container, but used by it.\n\ni will provide a proposal for a wording after a nap.\n @jakirkham @funkyfuture Thank you both for sharing your thoughts. Let's please remember that all documentation is about the end user. Those end users are going to vary in skill and use cases.\n\nClarity and concrete points are most helpful in the README. I recommend that we work toward the 80/20 rule. Try to cover 80% of the typical users in the README and link the other 20% to more detailed information in the project documentation. Thank you. :penguin: \n Sorry this got really noisy. I had only meant to be helpful since I was already submitting a small patch and @funkyfuture made a good point. However, I think this was the wrong move in retrospect as I am clearly missing the mark as to what he is after and that isn't helping anyone. I would like to ask @funkyfuture to supply his own patch.\n @jakirkham Oh no worries. I think that both you and @funkyfuture have helpful views here. I've opened an issue #571 since I believe that folks could benefit from the detail. :cake:\n hm, i'd just undo cb080df55657fed2bb3f23df0c95464dfa2b8d4f.\n\nbut again, that is targeted only to users who read [here](https://hub.docker.com/r/jupyter/notebook/) and links the relevant docs about volumes in Docker. in developing it's absolutely reasonable to use `--rm`.\n","@sccolbert do you know of a better way to force Firefox's resize handler?  Here I change a DOM attribute, wait for a redraw, then change it back.  I've found that the wait for a redraw is important.\n @jdfreder do you mean force a reflow so you can measure geometry? You can read the `offsetWidth` or `offsetHeight` to do that: https://github.com/phosphorjs/phosphor-dockpanel/blob/549c8c8a37057657467184d2e2e1aba4f1e58bbf/src/index.ts#L1131\n\nOr do you mean something different?\n No, I mean to fool the browser into thinking the page was resized so that it renders scrollbars etc.  What I've done here seems to work, but may not be the best way. \n Found a short way to do it, just resetting html to the current html.\n That will blow-away and re-render all the content. If it's a lot of stuff, that will be expensive. \n\nThat said, you should have to do any trickery to get Firefox to show scroll bars, it should happen automatically when the content changes.  Do you have a small repro?\n > Do you have a small repro?\n\nNo I don't, the code is fairly complicated and uses jquery ui animate and resize.  I'm not sure where the problem lies,  but I think it's somewhere in the triangle of getting animate and resize to work well, and the tweaks that accomplish that.\n\n> That will blow-away and re-render all the content. If it's a lot of stuff, that will be expensive.\n\nI'm not worried about the expense of rerending the content in the pager (mostly plain text).  It's the kind of thing that will disappear as we move to the new componentized notebook and it happens at a point in time where it won't affect the user experience.\n The pager doesn't have lots of data usually and we will be able to do this type of layout much better with phosphor. I am fine with this hack for now and it is documented.\n\nMerging.\n","@minrk, I made a small mistake here ( https://github.com/jupyter/notebook/pull/530 ). I have verified this does work as expected via the command line. Do you mind if we merge this?\n","+1 on all these ideas - Jason and I did an in person UI/UX review of this.\n\nOn Thu, Oct 8, 2015 at 1:22 PM, Jason Grout notifications@github.com\nwrote:\n\n> First, the search and replace is _very_ nice! I love the immediate\n> feedback, especially.\n> In reviewing the search and replace, here are some issues I'm seeing:\n> - The joke in the regexp tooltip (\"Now you have N+1 Problems\") is\n>   funny to me, but not appropriate for this interface, I think. On the other\n>   hand, it would be extremely helpful if the regexp tooltip said it was using\n>   javascript regexp syntax\n> - selecting multiple cells, and then clicking Edit | Find and Replace\n>   deselects all but one cell. Thus the \"Replace in selected cells\" is much\n>   less useful\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/558.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I added #566 which is the underlying problem of your second bullet- so I went ahead and checked it off the list here.  I also checked off the two points addressed by #567 .\n On second thought, I'm not convinced that moving the number of matches down next to the replace all is better than at the top.  I like knowing how many matches I have as a summary of the scope of my replacements.  @ellisonbg?\n I'd also -1 that because it can't be done with our utils dialog function as is.  We'd need to modify it to allow non-button content in the footer.  And like Jason says, I think it makes sense for it to live where it does.\n Ok\n\nSent from my iPhone\n\n> On Oct 9, 2015, at 1:30 PM, Jonathan Frederic notifications@github.com wrote:\n> \n> I'd also -1 that because it can't be done with our utils dialog function as is. We'd need to modify it to allow non-button content in the footer. And like Jason says, I think it makes sense for it to live where it does.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n > I think it would be really useful to have filters for replacing only in code cells or only in markdown cells.\n\nThis should probably integrate into the tagging system we designed together a while back.\n #567 was only partially closing this, reopening. \n I\"m not sure any of the remaining feature are blocking for 4.1\n I will try to look over things again.\n\nOn Thu, Oct 22, 2015 at 1:33 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I\"m not sure any of the remaining feature are blocking for 4.1\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/558#issuecomment-150298962.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n The all look like they can be bumped to 4.2 (or 5.0, whichever is our next target).\n Let's leave this as 4.1 to remind me about things to look at in final usability reviews before the release. But I am guessing we will close at the release.\n It would be nice to be able to apply replacements not on all cells, but in each instance separately. Perhaps adding a replace button to every line, like below would be an option?\n\n![replace_one_cell](https://cloud.githubusercontent.com/assets/2069677/11759896/f041630e-a0c0-11e5-8cfd-6c5d7d117ba4.png)\n\n(Obviously with a better styling than this quick mock-up)\n The 3rd button (that have a weird symbol with look like align left) apply the replace only to cells selection. \n\nReplace on each preview is relatively complex to implement, though it is one of the things we were thinking about. \n Yes, I saw the 'apply to selection', but it means planning before seeing the result, and so has a different functionality.\n I am opposed to trying implement that in our current UI - it doesn't have\nthe needed abstractions to do that well. In the new JupyterLab/Workbench it\nwill be quite easy to build a find/replace UI in a separate panel that\nallows us to toggle the individual replacements while still showing the\nnotebook (in a non-model way).\n\nOn Sat, Dec 12, 2015 at 5:38 AM, Anton Akhmerov notifications@github.com\nwrote:\n\n> Yes, I saw the 'apply to selection', but it means planning before seeing\n> the result, and so has a different functionality.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/558#issuecomment-164151099.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","this has been implemented for IRkernel via [kernel.js](https://github.com/IRkernel/IRkernel/blob/bee3dc57f3ace78077eafe40bf58f54b06f1b25b/inst/kernelspec/kernel.js)\r\n\r\nbut I think it\u2019s more discoverable and useful as cross-language kernel request Isn't this what shift-tab and the [inspect_request](http://jupyter-client.readthedocs.io/en/latest/messaging.html#introspection) are for? The inspect request only shows a little popup for parameters and a plain text 1-sentence description for the function.\r\n\r\nR has bigger manpages that need to be read fully.\r\n\r\nPopping up the pager in addition to the param popup is probably not what people would expect. We can look into different ways to present the information returned, but that's the machinery for inspecting the item at the cursor.\r\n\r\nMaybe the kernel could provide some metadata in the inspect_reply indicating whether it's suitable for a small popup or a larger pager. Or maybe the frontend could use some heuristic for how long the content is to decide how to display it.","You can use CSS to show/hide each of the different output _types_ (result, display, stdout, stderr). Each output type has a different css class, so you can use `display: none` on these classes to hide what you want. The notebook does _not_ have semantic information about things like warnings, though, so 'intention' is not available information. That would have to be done in the kernel, e.g. by using Python's warning filter system in the case of IPython.\n\nI don't think you can generally distinguish between _types_ of output for what's used for development and what's used for presentation. I have done plenty of presentations were I use every single output type Jupyter understands. You may, at the library level, be able to distinguish between what is 'presentation output' and what is 'debugging output', but Jupyter cannot, and probably most Kernels cannot, either.\n I'm going to close as this is really not likely to be implemented. \n","Regarding the sublime style keybindings, put the following in your `custom.js` :\n\n``` js\nrequire([\"codemirror/keymap/sublime\", \"notebook/js/cell\"], function(sublime_keymap, cell) {\n    cell.Cell.options_default.cm_config.keyMap = 'sublime';\n});\n```\n\nAs far as additional shortcuts are concerned, the one you mentioned is specific to the component we use for code editting, CodeMirror.  There may be a way to programmatically enumerate all shortcuts currently available in CodeMirror, but there may not.  It's worth investigating.\n","@Jeffiy what version of the notebook?\n @minrk \npip list\n\n```\ndecorator (4.0.4)\nipykernel (4.1.0)\nipyparallel (4.0.2)\nipython (4.0.0)\nipython-genutils (0.1.0)\nipywidgets (4.0.3)\nJinja2 (2.8)\njsonschema (2.5.1)\njupyter-client (4.0.0)\njupyter-core (4.0.6)\nMarkupSafe (0.23)\nmistune (0.7.1)\nnbconvert (4.0.0)\nnbformat (4.0.1)\nnotebook (4.1.0.dev0, /home/jeffiy/Documents/py/notebook)\npath.py (8.1.2)\npexpect (4.0.1)\npickleshare (0.5)\npip (7.1.2)\nptyprocess (0.5)\nPygments (2.0.2)\npyzmq (14.7.0)\nsetuptools (18.2)\nsimplegeneric (0.8.1)\nterminado (0.5)\ntornado (4.2.1)\ntraitlets (4.0.0)\nwheel (0.24.0)\n```\n\nand python3.5\n Since this is a dev install, can you verify that you are on latest master and run `python setup.py js css`?\n @Jeffiy should be fixed in master by #579\n","Thanks min!\n","I should mention, the machine is a Linux, Ubunutu variant with Chrome 45.\n _grumbles_,  these are crappy default shortcuts: \n\n```\n'shift-k': 'ipython.extend-selection-previous',\n'shift-j': 'ipython.extend-selection-next',\n```\n\nWhy not (additionally)\n\n```\n'shift-up': 'ipython.extend-selection-previous',\n'shift-down': 'ipython.extend-selection-next',\n```\n Yes, Jason and I were saying the say thing yesterday!\n\nAlso, there are many other bugs with multiple-selection we are finding -\nwill be opening issues on those separately.\n\nOn Fri, Oct 9, 2015 at 10:48 AM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> _grumbles_ these are crappy default shortcuts:\n> \n> 'shift-k': 'ipython.extend-selection-previous',\n> 'shift-j': 'ipython.extend-selection-next',\n> \n> Why not (additionally)\n> \n> 'shift-up': 'ipython.extend-selection-previous',\n> 'shift-down': 'ipython.extend-selection-next',\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/565#issuecomment-146893075.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","Yep, this is the second one that @jasongrout and I saw!\n Is this fixed by #597?\n Yep\n\nOn Tue, Oct 20, 2015 at 4:44 AM, Min RK notifications@github.com wrote:\n\n> Is this fixed by #597 https://github.com/jupyter/notebook/pull/597?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/566#issuecomment-149479509.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","This is a good start to that. A few points:\n\nAfter playing with it for a while, I find a couple of borders are missing. Here is a screenshot:\n\n<img width=\"159\" alt=\"screen shot 2015-10-12 at 6 03 33 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/10439990/aeec624e-710b-11e5-974f-f3652315779e.png\">\n\nThe left border of the \"Replace\" text area and the right border of the selection checkbox.\n @jdfreder - I put in a PR to your PR.\n\n@ellisonbg - I also saw that and I fixed that in my PR to @jdfreder.\n @jdfreder, I'm also seeing a 1-2 pixel difference between the buttons and the input area.  The buttons I think are sized to 32px, but the input area isn't, so there's a dissonance between the two.\n @jasongrout ah, that missing border is what I thought was a consequence of simplifying the border.  I didn't notice it was gone even with the code as is.  I merged your PR\n -1 to move the checkbox. The re and case sensitive change the meaning of the text which is in the search field. The check box apply only to where it will apply. After using the SnR for some time, especially with the keyboard, I find out that I was selecting the \"replace only in selected\" only **after** entering the replace text. and having **after** the replace filed made it much more convenient to reach with tab. \n\nI was at the beginning with the other 2 button, and it was annoying. I moved it after **on purpose**. \n Shouldn't the checkbox also affect which cells the search is done in. If\nyou want to do a replace, why would you search more widely that you know\nyou will replace on. Also, I think it would be very useful to be able to\n\"just search\" on selected cells.\n\nOn Wed, Oct 14, 2015 at 2:39 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> -1 to move the checkbox. The re and case sensitive change the meaning of\n> the text which is in the search field. The check box apply only to where it\n> will apply. After using the SnR for some time, especially with the\n> keyboard, I find out that I was selecting the \"replace only in selected\"\n> only _after_ entering the replace text. and having _after_ the replace\n> filed made it much more convenient to reach with tab.\n> \n> I was at the beginning with the other 2 button, and it was annoying. I\n> moved it after _on purpose_.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/567#issuecomment-148151120.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Yes for \"Just search\", though harder to do that SnR, not sure about the UI for that. \n\nI think the browser Search is better for just search. \n\nFrom my personal use, I know I want to search and replace, it just append to replace in places where I am not expecting to find what I am searching so my workflow is the following: \n- search for `Foo`\n- replace by `Bar`\n- oh it also replace in place I am not expecting. \n- deselect where I do not want it to replace. \n\nTechnically I would like a checkbox next to each preview, and be able to individually deselect some results (\u00e0 la textmate). \n\nHence why I placed the checkbox after as it is the last action I before validating. \n I should clarify my feelings about the select button:\n- First, let's make it a real checkbox rather than a\n  faux-checkbox-button--pretending-to-be-a-checkbox.\n- Second, make sure it has a tolltip (probably does)\n- Possibly move to the beginning of the replace so it has symmetry with the\n  other buttons being on the left.\n- With these changes and your description, I think it would be fine to\n  leave below with replace.\n\nOn Wed, Oct 14, 2015 at 3:03 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Yes for \"Just search\", though harder to do that SnR, not sure about the UI\n> for that.\n> \n> I think the browser Search is better for just search.\n> \n> From my personal use, I know I want to search and replace, it just append\n> to replace in places where I am not expecting to find what I am searching\n> so my workflow is the following:\n> - search for Foo\n> - replace by Bar\n> - oh it also replace in place I am not expecting.\n> - deselect where I do not want it to replace.\n> \n> Technically I would like a checkbox next to each preview, and be able to\n> individually deselect some results (\u00e0 la textmate).\n> \n> Hence why I placed the checkbox after as it is the last action I before\n> validating.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/567#issuecomment-148158592.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > - First, let's make it a real checkbox rather than a\n>   faux-checkbox-button--pretending-to-be-a-checkbox.\n\nNo objection. Design-wise, it might be less pretty, but fair enough. \n\n> - Possibly move to the beginning of the replace so it has symmetry with the\n>   other buttons being on the left.\n\nit make keyboad usage a bit harder. I would prefer `tab`/`shift tab` to move quickly between `search` and `replace` field, if we put it before, it will be 2 press. We can change the tabindex, but then the tab selection order might be confusing. \n\nNo objection to **try**, though I want to keep the keyboard usability in mind. \n > - First, let's make it a real checkbox rather than a\n>   faux-checkbox-button--pretending-to-be-a-checkbox.\n\nI'm still slightly minus one on this for the reasons I stated above, which you may have missed:\n\nBecause the button is already a toggle button, I don't think it makes sense to add a checkbox too. I'd either need to sync the check state with the button state or keep the checkbox static. Not to mention, on some operating systems/browsers, check boxes aren't that pretty.\n Merging to test it. \n",":+1: \n","Hi @amjames ,\n\nWe only support a subset of latex in the live notebook because the component we use to render the latex, MathJax, only supports a subset.\n\nYou're right though, this should be better documented.\n @jdfreder thanks for getting back to me.  \n\nThat is a shame, but understandable due to the limitations of MathJax. \n\nIs there any plan to include more widespread latex support in the live notebook? \n\nThanks!\n @minrk I'm curious, did this autoclose from the PR merge in ipython/ipython?\n @jdfreder I think so. Likely because @minrk has sufficient privileges on both repos. https://github.com/blog/1439-closing-issues-across-repositories\n @jdfreder yup, as @willingc explains, we can auto-close cross-linked issues as long as we have permission on the target repo.\n > Is there any plan to include more widespread latex support in the live notebook?\n\n@amjames not currently, unless MathJax decides to support more.\n","Ah, cell are overflowing on the right...\n Yes, sorry. I thought it was clear from the images. This has been happening for a while. \n\nBy the way, the small width of the cells is not related to the grid, though. That is a bug in CodeMirror reported [here](https://github.com/codemirror/CodeMirror/issues/3123).\n","Closing in favor of #577 .  This code is too touchy, #577 is a more targeted approach.\n","i don't think that would be the proper place for the usage instructions regarding Docker, it's expected to appear [on the Docker hub](https://hub.docker.com/r/jupyter/notebook/).\n\nother discussions about the Docker image have also shown that there are enough differences between users' and developer's needs. therefore i cite myself. \n\nhttps://github.com/jupyter/notebook/pull/537#issue-110129811:\n\n> i would also suggest that the docker registry repo is bound to another source repo as it is expected there to provide only stable releases or at least a stable release as default. atm only a reflection of the master's tip is available.\n> it would also allow to design the Dockerfile here for development purposes and to add image variants (i could make use of an onbuild-variant to include packages).\n> disclaimer: if this didn't change recently, the docker registry repo must be deleted and be created again to link it to another source repo. as a sideeffect all repo statistics go to void.\n There are often many ways one could want to launch an image. Not to mention, it is worth noting how to build them. I can understand wanting to move them out of the README. Especially, considering the breadth of `jupyter`.\n\nCan we make sure there is a link included in the README to the relevant section in the developer documentation? This way it will be easy to get more details for the GitHub and Docker Hub main pages.\n @funkyfuture I don't see this section in the developer documentation as a place for usage instructions. I see it as a high level technical explanation of how the notebook interacts with the Docker daemon.\n\nUsage and configuration documentation that is specific to individual operating systems using Jupyter  and Docker would be in their own documents in another section, linking to Docker specific documents as needed. Generic documentation would not cover the use cases with OS X and Windows adequately due to legacy use of boot2docker, more recent use of docker-machine, security permissions, and operating system versions.\n\n@jakirkham Absolutely there should be a link from the README to any relevant sections in the Developer documentation or User documentation.\n I think we do want to have an explanation about the relationship between the notebook and docker. And because it spans multiple repos, I think the developer section of the jupyter/jupyter docs makes sense.\n Going to label as 4.2 for now - could be 4.1 or 5.0 depending on when it gets done.\n Anybody want to have a go at this for 5.0?","Verified building locally fixes the problem.\n attn: @minrk @rgbkrk\n Thoughts on merging this?\n\nIt's pretty straightforward. This does the bare minimum to fix the build on Docker Hub.\n It looks like the issue, which required this workaround has been resolved. I'll look into reverting this and see if the build still works.\n","I think this just needs a Travis-kick.\n Kicked; will merge when Travis says OK.\n","What is the goal of writing an empty, unused config file here?\n I was going to add the `ip` argument to the profile. I have a `sed` command that does that in another branch ( https://github.com/jupyter/notebook/pull/576 ). Is there a better way to do this? Also, what are your thoughts about adding this argument to the profile?\n `--generate-config` shouldn't be used in the Dockerfile. If we want a config file, we can write it directly.\n","I think I have addressed the criticism I got here. Please let me know if I haven't.\n Travis failure is unrelated.\n `jupyter notebook --generate-config` should not appear in the Dockerfile. If you want to write the file directly, do so. There is no need to generate a config file and then delete it.\n You can use\n\n```\nmkdir -p ~/.jupyter && echo 'line' >> ~/.jupyter/jupyter_notebook_config.py\n```\n\nwithout generating and truncating unused files.\n Ok, I think that fixes it then. Please let me know if there are more issues.\n @jakirkham can you squash the commits in this PR, perhaps?\n Sure, done. Anything else?\n Nope, that should do it. Thanks.\n","With the new cell marking API in #597 I don't think we should do this. That PR already fixes these issues.\n @jdfreder can I close this?\n When #597 is merged, I think it's okay to close this.\n","This appears to have been done at some point; the example notebook now starts with the section about the dashboard.","See jupyter/notebook#431 PR that try to fix it. \n It's hard to test this if the bug doesn't exist in irkernel anymore.  @Carreau , were you able to test your merged PR against this?\n ```\nKernel.prototype._handle_ws_message = function (e) {\n        var that = this;\n        this._msg_queue = this._msg_queue.then(function() {\n            return serialize.deserialize(e.data);\n        }).then(function(msg) {\n+            if(msg.msg_type == \"execute_reply\" && (msg.content.payload[0]||{}).source == 'page'){\n+                throw new Error(\"gnnnnaaa\")\n+            }\n            return that._finish_ws_message(msg);\n        })\n        .catch(function(error) {console.error(\"Couldn't process kernel message\", error) });\n    };\n```\n\nManually. Still searching how to test that. \n Do you think monkey patching `_finish_ws_message` ? executing a `something?` and un-patching ? Seem brittle. \n And not sure worth it. \n No, it's probably not worth it.  I just wasn't sure what steps were required to reproduce the error manually.  Thanks for posting the above though.  I'll test that here and close the issue if it works in master.\n closed by #431 @jdfreder ?\n Closed!\n","You don't :worried:\n\nRelated to #565\n\nWe definitely should add this capability.  However, I'm unsure of the level of effort involved, optimistically marking as 4.1, but should be non-blocking.\n Hm. I will take a look at this.\n @ellisonbg \n @jdfreder is looking at a slightly different way of managing\nmultiple-selection that will separate out the \"selected\" cell abstraction\n(which is really like a cursor) from the \"marking\" of cells. As part of\nthat, there will be a new keyboard shortcut for marking a cell - in\naddition to the existing cell selection extending shortcuts. Let's wait to\nfigure that stuff out before we dive into mouse based multiple cell\nselection.\n\nOn Mon, Oct 12, 2015 at 12:44 PM, Jonathan Frederic <\nnotifications@github.com> wrote:\n\n> @ellisonbg https://github.com/ellisonbg\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/580#issuecomment-147457855.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Got it! @jdfreder, is there a PR where you are working on that that I can keep track of the changes in?\n @captainsafia sure!  I just opened the PR and pinged you in it, it's ready for review.\n Any chance that extension of cell selection of multiple cells could be with `Shift` and arrow keys as well as the current `Shift-K` and `Shift-J`?\n @dpsanders https://github.com/jupyter/notebook/pull/568\n Great, thanks ! (and sorry, guess I did a checkout slightly more than a week ago). \n Closed by https://github.com/jupyter/notebook/pull/597\n","I suspect this is UI for markdown cells, where double-click is meant to enter edit mode, leaking into code cells.\n","attn: @minrk @rgbkrk @parente\n I prefer debian:jessie. We ended up not switching these over for a few backwards incompatibility decisions, as well as some other encoding issues IIRC. Totally fine by me if we change it moving forward. :+1: \n +1, though I'm increasingly wondering how much the `jupyter/notebook` base image even makes sense at all.\n Cool, I'll start working on the changes then so we can discuss.\n\n> We ended up not switching these over for a few backwards incompatibility decisions, as well as some other encoding issues IIRC.\n\nDo you recall what the cause backwards incompatibility was? Is it missing functionality issue or just the fact that base image would be different. I think I have seen the encoding issues, but believe I have a way to resolve them.\n\n> though I'm increasingly wondering how much the `jupyter/notebook` base image even makes sense at all.\n\nFrom my perspective, it is nice because it includes the latest build of the `notebook` codebase. This will be very handling combined with CI ( https://github.com/jupyter/notebook/pull/547 ) to verify that this medium of distribution still works. It also allows for others to base their image off this one and take advantage of the latest changes by using repository links ( https://docs.docker.com/docker-hub/builds/ ). Taking advantage of Docker Hub's ability to build tags ( https://github.com/jupyter/notebook/issues/593 ) will allow proper versions to be built and released from here. Having the latest release of code in a working environment could also be used to provide others a simple working test/development environment.\n\nFinally, as this image becomes more robust and compatible, it only makes sense that it will take the place of the minimal notebook ( https://github.com/jupyter/docker-stacks/blob/master/minimal-notebook/Dockerfile ) by eliminating all, or at least most, of its need. This will become the base image and allow for the latest changes to be propagated downstream to other configurations ( https://github.com/jupyter/docker-stacks ). Pinning the version of `notebook` by using tags of this build will also be an option.\n > Finally, as this image becomes more robust and compatible, it only makes sense that it will take the place of the minimal notebook ( https://github.com/jupyter/docker-stacks/blob/master/minimal-notebook/Dockerfile ) by eliminating all, or at least most, of its need.\n\nI always assumed the Dockerfile in this repository was there for dev and test purposes, and why it installed from source. On the other hand, I saw docker-stacks/minimal-notebook as a baseline environment for actually using Jupyter Notebook for work, hence the conda environment.\n\nIs it desirable to mix the two or replace one with the other?\n @parente good point. We need to decide what exactly this Dockerfile is meant to be. To me, it's primarily a source of documentation for a simple install and/or the simplest example deployment. I would specifically _not_ use it as a general base image, where I would always want to be using conda, install more packages, etc. This seems to what we are accomplishing with docker-stacks, so I wouldn't do it here. Perhaps this file should be removed entirely, and we ensure we have a sensible minimal base image in jupyter/docker-stacks that we point `jupyter/notebook` to on Docker Hub.\n I agree with putting a stake in the ground one way or the other and making it very clear what each image should be.\n\nMy 2 cents: If there's an interest in having a dockerized dev setup that puts all the tools (python, node, etc) in one container image, then I think the Dockerfile in this repo should satisfy that desire. If there's currently no interest in that kind of dev environment, then I agree that this repo should drop the Dockerfile in the interest of keeping all the docker image definitions together over in docker-stacks.\n Perhaps I have gotten the wrong idea (to some extent) about this image. Given that it is called `jupyter/notebook` on Docker Hub, I figured that this was an authoritative image in some regards. Also seeing optimizations of this sort ( https://github.com/jupyter/notebook/pull/528 ) made me think we really did want this to be a performant image. I apologize if I have overstepped here.\n\nIf we are leaning towards removing this from here, I would like to suggest that it gets moved over to ( https://github.com/jupyter/docker-stacks ) so that we can have some time to see what can be saved and coalesced into a singular form with `jupyter/minimal-notebook`. It would be unfortunate to see the work that went into this go to waste.\n @jakirkham Certainly don't want to see any improvements you or others have made go to waste. Not at all!\n\nAt the moment, I'm just looking for consensus on:\n1. Should jupyter/notebook have its own Dockerfile? \n2. If so, what's its purpose in comparison with jupyter/docker-stacks/minimal-notebook?\n3. If not, what is jupyter/docker-stacks/minimal-notebook lacking that should be ported from here?\n\n@minrk , @rgbkrk can we decide it here? Take it to the google group?\n We should take this one to the google group.\n\nWhere I stand now, as a user of the notebook in containers, I don't rely on the jupyter/notebook image anymore. When tmpnb always had latest master, continuously, I used it then. Nowadays I use one cacheable image which uses assets from a CDN. That's reliant on the minimal-notebook as well.\n @jakirkham I definitely don't want to waste the work - it's precisely the fact that you are doing helpful work that makes me think that perhaps this repo isn't the right place for the Dockerfile. Moving it, or applying the same work, to docker-stacks makes sense, if we go that way.\n Ok, please let me know what you decide and I will try to help out where I can.\n Will do, thanks for all your help already, @jakirkham!\n Posted here for discussion and raised the issue up a bit too: https://groups.google.com/forum/#!topic/jupyter/tfVaVCQaNXM\n There is no longer a Docker image here so there is no longer a need for this discussion. \ud83d\ude04\n","Travis failure is unrelated.\n @minrk, would you mind if we merge this one? I accidentally left this line in twice. It doesn't actually do anything productive here.\n Thanks.\n","Hi @quartox, we are testing `jupyter-js-services` using Karma, launching a separate notebook server with cross-origin enabled:  https://github.com/jupyter/jupyter-js-services/blob/master/test/run_test.py \n Thanks, that is exactly what I was looking for. \n\nI don't know if this is the appropriate place to ask questions but I am getting an error trying to run the jupyter-js-services tests (using the source build, running 'npm test' gives a 'WeakMap is not defined' error, presumably because something on my system isn't using ES6). Can you direct me to the right place to ask these kinds of questions?\n Hi @quartox, Happy that @blink1073 answered your initial question. :penguin: \n\nThanks for asking about where to ask questions. That's something we're in the process of documenting :book: across all the subprojects. \n\nUsage questions and questions that span multiple projects are probably best asked at jupyter@googlegroups.com. If you are not yet subscribed to that Google Group, you may find that helpful.\n\nIf the question is isolated to errors in a specific project (for example, jupyter-js-services) where it's possible that it may be an issue or something that needs better documentation, I suggest opening an issue in the particular project's repo (in this case, jupyter-js-services).\n\nI hope that helps :smile:\n Hi @quartox, can you try running `npm run build` and then `npm test`?\n Hey @blink1073 , `npm run clean` and `npm run build` did not fix the problem, but I figured out that it was my version of nodejs (0.10) which did not support ES6. I updated to nodejs 0.12 and it works now.\n Thanks for the feedback @quartox, see https://github.com/jupyter/jupyter-js-services/pull/41.\n Hey there, I'm going through old issues and it seems to me that it makes sense to close this one.\r\n\r\nGlad @quartox was able to figure the issue at hand (an old node.js)\r\n\r\nThanks everyone and happy hacking! :bowtie:","@jakirkham I'm having trouble tracking your PRs - this seems to just be a merge of several other PRs. Do you mean to close all the others and replace with this one?\n Initially this was a PR with most (not all) of these changes. However, I realized I did not want to force your hand into accepting changes that you did not want. So, I broke it up into smaller PRs that you could take or leave and left this one as a combined form that you could take instead.\n\nAs most of the PRs are already merged, maybe it doesn't make sense to keep this any more. Especially, if it is the source of confusion.\n","Fixed. Please let me know if you need anything else. Builds through locally. Still resolves the issue.\n","Sheesh, all this tempfile-optimizations really turns the dockerfile into a nightmare.\n Yeah, it's a bit gross. It is cutting down ~12% of the image's size though. What would you like me to do?\n Travis failure is unrelated.\n I'm not sure. At this point, I'm starting to lean toward it being a mistake to have added a Dockerfile to this repo in the first place.\n Also: merge conflict, needs rebase.\n To me, the primary value of the Dockerfile in this repo was to provide a basic, illustrative example of installing the notebook. With all of this size-optimization, this is no longer the case, it seems to be optimizing for use as a base image, and I don't think it's a good candidate for a base image, so this seems misguided.\n The merge conflicts have been resolved. The other issues that you have raised are obviously still outstanding.\n FWIW, I do agree that cleaning is a mess.\n\nNormally, this ends up being worse after any sort of testing stage as there really is no interest in keeping such a layer. Instead one is only interested in validating the previously layer works as expected and then continuin/finishing the build without any changes to the final layer caused by testing.\n\nThis is certainly not the first time I have seen this issue and felt I should raise it after our discussion here with particular regards to testing. I created an issue here ( https://github.com/docker/docker/issues/16993 ) if you are interested. There are some workarounds proposed relating to local builds and builds on Docker Hub. The real solution will likely rely on some sort of nested build implementation. There are many proposals the most notable being this one ( https://github.com/docker/docker/issues/7115 ). In addition to helping with testing, it seems this proposal might make it easier to avoid clean up at almost any `RUN` step by doing a nested build and only including the needed build artifacts.\n\nHowever, as it is very versatile it will take some honing before it makes it into `master` or a release for that matter. Whether or not the final implementation uses something like [`dind`](https://hub.docker.com/r/_/docker/) would determine how versatile this solution would be. Currently, this sort of syntax change is blocked by the freezing of the `Dockerfile` syntax ( https://github.com/docker/docker/blob/master/ROADMAP.md#22-dockerfile-syntax ). FWICT, it is unclear when the `Dockerfile` syntax will be unfrozen.\n\nIn short, given the interest and people behind this change we can be fairly certain we will see something to alleviate this problem, but given the current blockers it won't be soon.\n So, I guess you changed your mind on this one, @minrk. :)\n Not really, I just didn't like the PR sitting there, and din't want to make you rebase, since it would conflict with more recent changes.\n\nIf we decide this should be a more illustrative example, we will probably remove a lot of the scrubbing in a later PR.\n Well, I still would like to port the useful changes to the Dockerfile collection at some point, but I'm not sure when that will happen. Did anything ever come out of that discussion about how to manage this and the Dockerfiles going forward?\n","I don't think `%edit` will make sense with servers and kernels in separate locations, and it is appropriate to assume that they contents and kernels are on the same filesystem for something like this, and call it unsupported in other contexts.\n The hackish version is to publish output JS that opens the file in a separate panel (single pane app will help).\n We did something like this in the demo app: https://github.com/blink1073/jupyter_demo/blob/master/src/index.ts#L807.\nClicking on a file in the file browser opens a new editor pane with the file contents, using the Contents API.\n","On the jupyter/jupyter docs, then? Maybe even linked from top-level Jupyter.org as well?\n @minrk I opened as a placeholder for me to remember. Since this project has pretty high velocity of issues and PRs, I've parked the idea here for now. I will loop back to this after Grace Hopper :+1: \n @willingc I think this issue can be closed?\n Going through old issues. Looks like this was addressed some time ago on the main jupyter docs.","Thanks @krysros for reporting the issue, @captainsafia for the timely fix, and @minrk for merging. :cake:  :sunglasses: \n","@minrk @rgbkrk Could either of you kick Travis to rebuild and check? I would like to see this get merged before Safia's talk. It looks like [PR 587 Travis build 997](https://travis-ci.org/jupyter/notebook/jobs/84794595) hung for 5+ hours. I canceled that build but couldn't restart it or this PR's build. Thanks :cat:\n\nThere was also another Travis job related to the same PR 587 that was running for 24+ hours. I canceled that job too.\n","Yup, we meant to do this when we cut 4.0, but forgot. Tags building now.\n","I built this a long time ago:\n\nhttps://github.com/bollwyvl/ipython-notebook-navigator\n\nIt actually worked pretty well, but likely needs to be overhauled.\n :+1: this will be major UX improvement\n","@kylekyle should be fixed by #596\n","Travis hung, restarted it\n Tests are passing, ready for merge?\n If you think it's a good idea :)\n","`cmdtrl-space` and `clt-click` conflict with Spotlight and right-click on OS X respectively. Perhaps use other shortcuts?\n\nAlso that old boy Travis needs a kick.\n The vote here (NYC) is just plain space.\n\nOn Mon, Oct 12, 2015 at 3:38 PM, Safia Abdalla notifications@github.com\nwrote:\n\n> cmdtrl-space and 'clt-click` conflict with Spotlight and right-click on\n> OS X respectively. Perhaps use other shortcuts?\n> \n> Also that old boy Travis needs a kick.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/597#issuecomment-147500167.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n That's an option. I'm also a fan of `x`, which is what Gmail uses for message selection and also has a nice visual cue to it.\n `x` is already 'cut selected cell', right?\n @jasongrout \u2014 Ah drat! Yep. `space` it is.\n > The vote here (NYC) is just plain space.\n\nPlain space is already taken, by scroll down.\n > cmdtrl-space and clt-click conflict with Spotlight and right-click on OS X respectively. Perhaps use other shortcuts?\n\nHow does `cmdtrl-click` sound?\n and `ctrl-space` for the kb\n > > How does cmdtrl-click sound?\n\nThat sounds great.\n\n> > and ctrl-space for the kb\n\nAlso great.\n Updated with the new hotkeys\n I think the keyboard and mouse shortcuts are fine.\n Because this PR allows for discontiguous selections of cells, we might want to have a method that allows testing is the marked cells are contiguous or not.\n That's new feature. That's not 4.1\n @Carreau not following what you are talking about.\n\nWhat is a new feature?\n\nWhy can't 4.1 have new features - it already does :)\n It's fine to get this in 4.1, but tagging 4.1 mean blocker 4.1, I can tag 4.2 also, but if we tag everything next minor revision we will never finish. \n\nWe should discuss and write what tagging actually mean. \n Thanks for you mail on the ML about milestone, copying here for as it is relevant: \n\n> We do have a document describing our approach to issues:\n> \n> https://github.com/ipython/ipython/wiki/Dev%3A-GitHub-workflow\n> \n> Although it is a bit burried and repo specific. Would be nice to move\n> that type of content to the dev docs (and simplify a bit).\n> \n> It would be nice to find a better way of dealing with wishlist items that:\n> - Encouraged discussions.\n> - Allowed the community to upvote them to help us see which things are\n>   worth considering.\n> - Are separate from our active work queue of issues/PRs.\n> \n> I have been playing with ZenHub a bit:\n> \n> https://www.zenhub.io/\n> \n> Allows up voting of issues and has multi-repo boards.\n\nAs we have not forked 5.0 from 4.1, I see why you would have classified this as 4.1, but I would have classified that as \"next major release: This should be the default milestone of all issues\".\n\nSorry for the confusion. Feel free to switch back to 4.1 if you like, or let me know if you think that this is something you believe is **necessary** for 4.1 and I missunderstood. \n Since we don't want to block for 4.1, I suggest we merge https://github.com/jupyter/notebook/pull/577 which is a bug fix, not a new feature.\n I think we do want to block 4.1 on this. There are a number of other thing that need to be finished for 4.1 and I imagine this will be in before those other things \n\nSent from my iPhone\n\n> On Oct 13, 2015, at 11:01 AM, Jonathan Frederic notifications@github.com wrote:\n> \n> Since we don't want to block for 4.1, I suggest we merge #577 which is a bug fix, not a new feature.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n @ellisonbg & @jdfreder: I went through some colors and I think these two work best for both the input text as well as the selected cell color. Not sure if we wanted to change the \"In [ ]\" color, but the blue (#2F97C1) I paired with the selected cell color (#009AF5) looked pretty nice together. \n\n![sample](https://cloud.githubusercontent.com/assets/6437976/10461954/bbba33cc-7190-11e5-9d2e-301118a5bec1.png)\n All comments addressed\n\nUpdated action shot:\n![demo](https://cloud.githubusercontent.com/assets/3292874/10464945/389eef94-71a1-11e5-8f3b-407110df8677.gif)\n Looks great!\n\n@jdfreder Would it be possible for you compile a list of the colors that are recognized within the notebook (like the green \"from\" in the first In cell)? I can make all of them apart of one color scheme :) Might as well do that while we are worrying about color within the notebook. If not, the blue colors can most likely work well with the current colors we are using!\n > @jdfreder Would it be possible for you compile a list of the colors that are recognized within the notebook (like the green \"from\" in the first In cell)? I can make all of them apart of one color scheme :) Might as well do that while we are worrying about color within the notebook. If not, the blue colors can most likely work well with the current colors we are using!\n\nYeah, it will take me a while though...  The colors are hidden everywhere in our codebase.  In fact, the green you asked me about isn't even set by us.  It's a part of CodeMirror's theme.  That's not to say we can't or shouldn't set it, just clarifying the scope of all the notebook's many colors.  \n\nI'll do a color survey and get back to you in a new GitHub issue via a ping.\n An easier approach would be to take the jupyter orange and come up with\nsome blues and greys that work with it - very similar to what you have done\nwith the single page app design. I would jut do something quick for this...\n\nOn Tue, Oct 13, 2015 at 3:28 PM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> @jdfreder https://github.com/jdfreder Would it be possible for you\n> compile a list of the colors that are recognized within the notebook (like\n> the green \"from\" in the first In cell)? I can make all of them apart of one\n> color scheme :) Might as well do that while we are worrying about color\n> within the notebook. If not, the blue colors can most likely work well with\n> the current colors we are using!\n> \n> Yeah, it will take me a while though... The colors are hidden everywhere\n> in our codebase. In fact, the green you asked me about isn't even set by\n> us. It's a part of CodeMirror's theme. That's not to say we can't or\n> shouldn't set it, just clarifying the scope of all the notebook's many\n> colors.\n> \n> I'll do a color survey and get back to you in a new GitHub issue via a\n> ping.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/597#issuecomment-147823938.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @jdfreder would you mind pushing a dummy commit to resync with travis which test actually pass ?\n travis why u make me look bad bro?\n @Carreau looks like my dummy commit corrected Travis'es wrong doings.\n Let's go ahead and merge this, because I want you to be able to start on the actual business logic of using this stuff.\n\nI think we need to look at the `Out[]` prompt color as well and will open an issue for that.\n\nAlso, not sure I like the keyboard shortcut and will use it for a while.\n Just a data point: `ctrl-space` is the default shortcut for some common spotlight-alternatives, such as Quicksilver, etc., which means it's unavailable to me (intercepted before the browser sees the event). I also think marking is a significant/light/frequent enough action to merit not having a modifier key at all. I don't have a good answer for that, though. I set mine to `.`.\n Yeah I would love to find a default shortcut with no modifiers - other ideas?\n\nSent from my iPhone\n\n> On Oct 29, 2015, at 10:22 AM, Min RK notifications@github.com wrote:\n> \n> Just a data point: ctrl-space is the default shortcut for some common spotlight-alternatives, such as Quicksilver, etc., which means it's unavailable to me (intercepted before the browser sees the event). I also think marking is a significant/light/frequent enough action to merit not having a modifier key at all. I don't have a good answer for that, though. I set mine to ..\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n I was just thinking about this the other day - if you hold shift while moving you can mark things, so why not make tapping shift (alone) toggle mark states?\n That will mess up any other keyboard shortcut with shift?\n\nOn Thu, Oct 29, 2015 at 10:56 AM, Jonathan Frederic <\nnotifications@github.com> wrote:\n\n> I was just thinking about this the other day - if you hold shift while\n> moving you can mark things, so why not make tapping shift (alone) toggle\n> mark states?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/597#issuecomment-152205651.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Oh, true...\n Yeah, `ctrl-space` also interferes with other keyboard shortcuts I have (not a big deal for me, as I just changed my other ones, but does mean others may run into this as well). `.` might work...\n Shift J and K already select contiguous, it it common for UI to  not expose shortcut for non-contiguous.\n\nSo we can just unbind Ctrl-Space, and leave Cmd+click for non contiguous. \n The problem is that shift-J and shift-K don't give you any way of\ndeselecting some of your selection. What if you select one too many cells.\nAlso, non-continguous selection works really well and I am already using it\na lot. Let's not essentially remove a feature just because we don't like\nthe current keyboard shortcut. There are a number of open shortcuts (with\nno modifiers) - lets' pick one.\n\nOn Thu, Oct 29, 2015 at 1:26 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Shift J and K already select contiguous, it it common for UI to not expose\n> shortcut for non-contiguous.\n> \n> So we can just unbind Ctrl-Space, and leave Cmd+click for non contiguous.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/597#issuecomment-152257015.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n +1 to @minrk's suggestion of `.`\n ...  Although I suggest for our next backwards incompatible release we look into replace the scroll shortcuts space and shift-space, then we could use space as select.\n I would prefer to find something that isn't awkwardly underneath j/k...\n\nOn Thu, Oct 29, 2015 at 1:47 PM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> ... Although may I suggest for our next backwards incompatible release we\n> look into replace the scroll shortcuts space and shift-space, then we could\n> use space as select.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/597#issuecomment-152262970.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > I would prefer to find something that isn't awkwardly underneath j/k...\n\n+1\n\nbacktick was mentioned by @michaelpacer but might be highly unavaillable on non-qwerty keyboard. \n Here are open chars in command mode on the left hand:\n\nQ\nW\nE -\nT - toggle ?\nG - group ?\n`\n\nI probably prefer G\n\nOn Thu, Oct 29, 2015 at 2:05 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I would prefer to find something that isn't awkwardly underneath j/k...\n> \n> +1\n> \n> backtick was mentioned by @michaelpacer https://github.com/michaelpacer\n> but might be highly unavaillable on non-qwerty keyboard.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/597#issuecomment-152268540.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n sElect is a silly mnemonic for E...\n sounds like a quick bike-shedding poll on the mailing list might be good.\n You could do that for all of them I think:\n\nQ - Que\nW - Winnowed\nE - Elect\nT - Toggle\nG - Group\n I think this bikeshedding is probably sufficient. Although I am fine with E\n= I elect this cell as well as G\n\nOn Thu, Oct 29, 2015 at 2:30 PM, Jason Grout notifications@github.com\nwrote:\n\n> sounds like a quick bike-shedding poll on the mailing list might be good.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/597#issuecomment-152277207.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n If we bind all of these users can bang on their keyboards\n\nOn Thu, Oct 29, 2015 at 2:33 PM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> You could do that for all of them I think:\n> \n> Q - Que\n> W - Winnow\n> E - Elect\n> T - Toggle\n> G - Group\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/597#issuecomment-152278113.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I like any of those, except for maybe Q.\n Queue (though I thought we could also just say [Q](https://en.wikipedia.org/wiki/Q_%28Star_Trek%29), as in \"I'm all-powerful and I am selecting YOU.\")\n QWik, sElect This Group!\n Q already close pager. \n > Q already close pager.\n\nI thought `esc` closes the pager??  We really need to audit our default keyboard shortcuts for 5.0 - they are crazy.\n Both work. \n\n`Q` is the same as terminal pager. \n I do think we should remove the Q=close pager later. But maybe we shouldn't\nuse it. Should I run a quick poll on survey monkey between those options\n(WETG)\n\nOn Thu, Oct 29, 2015 at 2:53 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Both work.\n> \n> Q is the same as terminal pager.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/597#issuecomment-152285846.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n No combined shortcut  with shift ? `!@#~` and backtick ?\n\nI doubt a poll will beat a usability testing. \n",":+1: for having a consistent naming-style guide on these.\n\n> - Use above/below or previous/next to indicate spacial and sequential relationships.\n\nThis sentence is a bit ambiguous to me.  Is the intent here equivalent to \"Use above/below to indicate spacial relationships.  Use previous/next to indicate sequential relationships.\"?  Is sequential indended as a synonym for \"temporally-sequential\" here?\n Yeah, when to use above/below or previous/next can be a bit sutble and that difficulty is reflected in the sentence structure.\n > Omit terms like \"selected\" and \"active\" by default, so \"delete-cell\", rather than \"delete-selected-cell\". Only provide a scope like \"-all-\" if it is other than the default \"selected\" or \"active\" scope.\n\nWhy that ? Especially since we have multiple selection and anchor ? I fel a lot confused when searching for an action if there is not the \"selected\", or \"all\"  \n @Carreau as to why omit the \"selected\". Initially we started with that, but it felt one-step-too-verbose, when a significant fraction of the time, the user will be applying actions to the active object.\n\nAnother thing that we talked about today. For actions that make sense on multiple (marked) cells, the simple versions of commands should apply to:\n- All marked cells if any are marked (multiple selection). In this case, _not_ the selected cell - it acts like a cursor.\n- The selected cell if none are marked.\n\nThe alternative is to have 3 versions of all actions on cells:\n1. `-selected-`\n2. `-marked-`\n3. `-all-`\n\nThat seems overly verbose. he approach implemented in this PR automatically provides a natural way of have actions that either the selected of mulitple marked cells.\n The verbosity will not be annoying for user to type once we have fuzzy-matching, but I understand your point. Though I dont' think verbosity should be scarified on action that will almost never be used through the command palette (run current cell, move cursor up or previous cell). \nThese are mostly for user to do write compound actions, so are probably better explicit IMHO. \n\nI see you point though, but keep in mind that many user are **not** native english, and that they will be exposed to english UI, and that while english user will find some action name obvious, it will not be the case for non-english. \n @Carreau yes, I get your point about english versus non-english users. It was actually very helpful to have @SylvainCorlay doing this work with us as he had  similar feedback as you. One suggestion was to use German for all of these as it is a quite formal language with more rigid and structured grammar rules. But I think `paste-zelle unterhalb` might be difficult to sell to our users.\n @Carreau yes, I like your idea of being able to hide some actions from the command pallete. We are pretty sure that some of them won't ever be run that way. Pinging @sccolbert @blink1073 on that idea.\n > @Carreau yes, I like your idea of being able to hide some actions from the command pallete. We are pretty sure that some of them won't ever be run that way. Pinging @sccolbert @blink1073 on that idea.\n\nWe are all consenting adults. Hide by default action stat start with `_` and show them only if user search pattern that start with  `_` ? (like private method completion in Python) \n +1 on having a prefix to distinguish advanced commands from every-day commands. I might choose `$` over `_` as the prefix though, to prevent any misunderstanding that the commands are private.\n +1 to most of this, I think it's a great improvement. Thanks for doing a thoughtful pass on the names. Only a couple of questions:\n- inline comment about `jupyter-notebook`. Seems like `notebook` is enough, or possibly `jupyter`, but `jupyter-notebook` seems redundant at least once.\n- is there any reasoning behind the switch from `.` to `:` that I missed? I don't care much, but have a slight preference for `.`.\n The choice for `:` is because that's what Phosphor is planning to use. It's also what Atom uses to denote a package namespace.\n +1 for a prefix other than `_`, I'm fine with `$`.\n Following existing convention is a good reason, thanks.\n I'm fine with either $ or _ , the old hackpad notes for commands is [here](https://jupyter.hackpad.com/Jupyter-Commands-sDnigMnVaLr) \n Seem to need rebase (sorry about that) \n No problem, I figure I would have to rebase.\n\nOn Wed, Oct 14, 2015 at 2:13 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Assigned #598 https://github.com/jupyter/notebook/pull/598 to @ellisonbg\n> https://github.com/ellisonbg.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/598#event-435531977.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Rebased\n\n@minrk On the verbose `jupyter-notebook` namespace. A few reasons why more verbose. First, users should eventually never see this unlike the Python package which uses conda/pip install. Second, because the browser doesn't have any way to enforce global name uniqueness, we have to worry about someone, somewhere, someday calling something `notebook` other than us.\n\nBut maybe a bigger question. I would like us to start using a unique prefix approach for CSS, etc. Alot of this will start to be scoped at the level of our JS npm packages. For example, it would be great if the command and CSS namespace for the notebook component could be something like `j-notebook` or `jupyter-notebook`, etc.\n\nWhat global name prefix to people like? `jp`? `jpy`?\n\n@sccolbert @blink1073 @minrk @Carreau @jdfreder @dwillmer @jasongrout @SylvainCorlay \n I prefer `jpy-`\n And a notebook file format would be `.jpynb` ?\n OK I have rebased, and I think fixed the tests. I think we should wait to add the command hiding in a separate PR. I like the idea of using `$`, but also want to make sure we don't want to express that as a separate key in the command structure.\n\nRemaining things to solve for this:\n- [ ] Which command prefix to use?\n- [ ] Any other command name changes?\n > First, users should eventually never see this unlike the Python package which uses conda/pip install\n\nHow is that possible, when the key is a public API and in the UI for executing commands?\n\n> What global name prefix to people like? jp? jpy?\n\n`jpy` seems reasonable, though I have some preference for `jp`, since I would like to avoid `py` in abbreviations as it looks like it's another `foopy` Python reference.\n\n> And a notebook file format would be .jpynb?\n\nHa, no.\n On Thu, Oct 15, 2015 at 10:57 AM, Min RK notifications@github.com wrote:\n\n> First, users should eventually never see this unlike the Python package\n> which uses conda/pip install\n> \n> How is that possible, when the key is a public API and in the UI for\n> executing commands?\n> \n> Sorry I wasn't clear. Yes, when people are writing code or keyboard\n> shortcuts against the API, they will see those. But in the UI, I would like\n> to have each command namespace also have a human readable form that\n> non-customizing users will see.\n> \n> What global name prefix to people like? jp? jpy?\n> \n> jpy seems reasonable, though I have some preference for jp, since I would\n> like to avoid py in abbreviations as it looks like it's another foopy\n> Python reference.\n\nYeah, I am with you on this. I think `jp` is probably best favorite so far.\nI will update that in this PR unless there are other ideas.\n\n> And a notebook file format would be .jpynb?\n> \n> Ha, no.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/598#issuecomment-148411961.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n jp is a-o-k with me\n Still need rebase after Jon's PR was merged. \n\nand technically the prefix in **this** case is shown in user UI. The command palette **does** classify action in groups, and these groups are named based on the prefix. \n\nUnless you had yet another API to have a prefix/group name mapping.\n\nand wether or not we prefix with `notebook` or `jupyter-notebook` nothing prevent extension to register under the same name.\n\n![screen shot 2015-10-15 at 09 57 21](https://cloud.githubusercontent.com/assets/335567/10521176/2b975f24-7323-11e5-9db4-500bac3b1e4e.png)\n And for the record for the **actions** I would prefer `jupyter-notebook` -> `notebook`. For the non-user visible prefixes I have no opinion on `jp` vs `jpy` vs something else.\n jupyter-notebook, jp, then? Works for me.\n > jupyter-notebook, jp,\n\n+1\n @ellisonbg I added a few more comments inline (some appended to existing threads) and this needs a rebase.  I think we should try to get this in so it doesn't grow stale again.\n OK I have addressed most comments. I talked more with Chris, Jason and Sylvain about the action name prefix naming.\n- In the long run, if needed, we can provide a end-user-human-readable version of the command namespace for usage in UI elements.\n- For this PR, I mostly want to get the programmatic one right.\n- The feeling here is that the command namespaces should roughly follow JS package names. From this perspective, the notebook package will be `jupyter-js-notebook` so the command prefix would make sense as `jupyter-notebook`.\n- Also feeling here like they should be verbose (more verbose than CSS) and developer-human-readable, so `jp-notebook` is too opaque.\n- These will be scoped at the level of major components in the UI (what we are calling plugins on the phosphor side of things). When all is said and done, there will tons of plugins, many of which we don't develop. Because of this, I think it will be very useful to have the extra `jupyter-` in the namespace to group our components together:\n\n`jupyter-texteditor`\n`jupyter-terminal`\n`jupyter-debugger`\n`jupyter-filebrowser`\netc.\n\nBased on these discussions, the current state of the PR is to use `jupyter-notebook`.\n\nAs an aside, I think it would be helpful to use a different name (maybe the shorter `jp-notebook`) for our CSS prefix to more easily allow searching through our codebase for developers.\n\nThoughts?\n > `jupyter-js-notebook` \n\nI'm still unconvinced about `-js-` in the name.\n-  Because it is/will be written in TS,\n- because no other package in JS world do. \n- we don't have jupyter-py-notebook.\n  (- I want to punch TS in the face even more each time I have a package with - or _ in it and it fails in even weirder way than usual, but that's unrelated. ) \n\nThe fact that the toolbar is not in env is weird, and yes `env` =! of `Jupyter` because env is not and should not be global.\n Yeah, I am not thrilled about the `-js-` in the middle of all our JS repo names. But the only way I see around this would be for us to start a new `jupyterjs` GitHub org for all of our JS packages. Also, because everything gets compiled down to JS and people use the libraries from JS, I think it should be JS (it is pohsphorjs, not phosphorts).\n Maybe fair enough for notebook, but really why not just `jupyter-input-area`, `jupyter-output-are`, `jupyter-services`, `jupyter-cell` ?\n We could, but in the long run we are going to end up with separate JS and\nPython packages for the same thing. That gets tough to avoid our own name\ncollisions or even name confusions. It gets tough for folks to navigate and\nunderstand the difference between \"notebook\" and \"jupyter-notebook\" and\n\"jupyter-notebook-plugin\"...\n\nIt might not be so bad though...\n\nOn Tue, Oct 20, 2015 at 11:42 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Maybe fair enough for notebook, but really why not just jupyter-input-area,\n> jupyter-output-are, jupyter-services, jupyter-cell ?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/598#issuecomment-149608839.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Can you check the pager, click on `x` does not close the pager for me anymore. \n And let's merge once the jp-notebook is fixed, and iterate. \n OK, after Travis is happy, this is ready to merge. I have also figured out why the pager is broken, but it is also broken in master so I will submit another PR to fix...\n > I have also figured out why the pager is broken, but it is also broken in master so I will submit another PR to fix...\n\nSeem fair enough. \n\nTraavis is happy, rereading one last time and I'll press the GB. \n","Already fixed https://github.com/ipython/ipython/issues/8864\n","This is great! I think we should start simple and not try to get the unminimized JS to work in dev mode. If it drives us crazy we can always add that later. \n\nA few other comments:\n- We should at least keep in mind the possibility of building minimized JS that includes code from a number of different repos (widgets, etc.).\n- It isn't obvious to me if we want to do this once for each page or once for the entire app. I would pick the simplest thing for now and see how it goes.\n @ellisonbg the js shouldn't include the widget js, since they will be installed separately. I think separating packages necessarily means having at least one .js and .css per package.\n > I would pick the simplest thing for now and see how it goes.\n\nSimplest for now is per-app, since it means we don't need to touch the js at all. We can investigate combining to a single `jupyter-notebook.min.js` at a later point.\n How does that affect custom.js/kernel.js that requires things ? \n @Carreau I believe it should still work, but I need to test it to make sure.\n Also have you tried https://github.com/jlouns/gulp-requirejs-optimize? \n I tried a few gulp-rjs/amd plugins (there are several), and none of them really worked, but I didn't try that one. After using it for a few things, I confess that I really don't like gulp so far.\n @Carreau thanks for that plugin, it does seem to work, unlike the ones I had found and tried. Unfortunately, with that plugin it takes about 1:45 to run the minification, whereas it's more like 45 seconds with the parallel approach I did here.\n\nIf we go with a single .js file containing all the main.js as exported functions, it should be fine to use the gulp plugin, though it doesn't seem to offer any benefits over calling rjs manually.\n You don't seem to like javascript in general :-)\n\nOn Thu, Apr 30, 2015 at 9:04 PM, Min RK notifications@github.com wrote:\n\n> I tried a few gulp-rjs/amd plugins (there are several), and none of them\n> really worked, but I didn't try that one. After using it for a few things,\n> I confess that I really don't like gulp so far.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/jupyter_notebook/pull/60#issuecomment-98039000\n> .\n @Carreau @jdfreder I think this is good to go as a starting point, if you want to look it over again.\n\nThings I think we should consider after this PR, but I'd rather not do here:\n- build a _single_ Jupyter js that exports all the main scripts as functions, so we can have one big js for all pages\n- strip unneeded requirejs config from page.html. Much of it is unused and commenting it out seems fine when I test, but I don't know exactly what can be safely removed and what can't.\n This should be ready to go.\n Couple comments inline, other than that, looking good.\n Comments addressed, I think.\n Awesome, thanks for clarifying the gulp bit with those comments.  I'm easily confused by what is or isn't in the stream at any given point.  :+1: \n","Once we have the migrating script working we should move that to jupyter/nbconvert I guess. \n","Or maybe it would be better for the tabs to be below the `In` line:\n![image](https://cloud.githubusercontent.com/assets/2913679/10458033/dbc7fe14-7196-11e5-9978-234fb81a8302.png)\nThis would be better for e.g. Markdown cells, since they don't have the grey background and tabs above the text might be distracting.\n cc @jdfreder, who I believe has written a version of this before. I'm not sure where that went. Also @ellisonbg, UI overlord.\n It never got merged, I'd be happy to rewrite && reopen as a PR against jupyter/notebook master if everyone agrees to it. https://github.com/ipython/ipython/pull/6638\n\n(I never created a plugin as stated at the bottom of the PR)\n @jdfreder, some version of that looks great to me!\n\nI don't mind re-typing the tag each time if there is a keyboard shortcut (e.g. `C-m C-t`) and tab completion.\n It would be great to see this revived - it would be really useful to have.\n\nOn Tue, Oct 13, 2015 at 3:04 PM, Steven G. Johnson <notifications@github.com\n\n> wrote:\n> \n> @jdfreder https://github.com/jdfreder, some version of that looks great\n> to me!\n> \n> I don't mind re-typing the tag each time if there is a keyboard shortcut\n> (e.g. C-m C-t) and tab completion.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/601#issuecomment-147815487.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > It would be great to see this revived - it would be really useful to have.\n\nI agree...\n Content-less string tags are so last decade. :) Might i recommend if we re-visit this and start opening up the ui to more use of metadata, that we strongly consider using a robust, URI-based approach for defining cell metadata, such as json-ld? Pay no attention to the rdf part, all we really need is @id, @type and @context: what is it, what type is it, according to whom?\n I'm sure there's a use for JSON-LD, but I think we want a way for people to quickly add simple, arbitrary tags to cells, without having to think about semantic web concepts. I think simple string tags will do nicely for this.\n\njson-ld is so next decade, and I suspect it still will be in 10 years time ;-)\n See also jupyter-incubator/contentmanagement#18\n A basic UI was added in #2048 for 5.0; I expect that as people start to use it we'll get a fancier UI.","What do you get from `pip list`?\n I believe this is caused by MathJax when the browser sends an incorrect user agent string (see mathjax/MathJax#1155).  For example, in Firefox, changing the `about:config` preference entry `general.useragent.override` to the user agent string of a WebKit browser (e.g., `Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36`) reproduces this error.\n closing as apparent MathJax issue\n Is there a way for me to mark this to be reopened? While it may be a MathJax issue, the Jupyter response to it is actually catastrophic. In my hands, triggering this bug actually causes the affected notebook to be wiped completely blank. Of course, nobody likes catastrophic data loss.\n\nOn my laptop, setting general.useragent.override to \n\n```\nMozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36\n```\n\n in Firefox and opening any notebook will trigger this error and the subsequent irrecoverable deletion of the notebook's contents.\n @brunobeltran what version of the notebook? How did it delete content? Recent versions of the notebook disable saving if load doesn't succeed, exactly to prevent this kind of issue.\n Hmmm, then the notebook must have _thought_ it loaded correctly? Or my version is too old.\n\nThe offending server has Jupyter 4.0.6 installed, and I was connected remotely via ssh tunnel from a computer running Jupyter 4.1.0. I think I later tried again with Jupyterhub (0.5.0?) and got the same result.\n\nI have the extensions \"collapsible-headings\" and \"toc2\" enabled. The bug manifested as, on load, the notebook looked blank except for one (unexecuted) markdown, presumedly auto-regenerated by the TOC extension, and one output cell (unrelated to the former markdown cell) containing something like \"type here to enter $\\latex$ math, $\\alpha$, and markdown\", which often appears spontaneously. \n\nThe notebook then did the usual autosave after being open for 30sec, presumedly per my configuration, overwriting the previous contents with the (almost) empty new notebook. \n\nIf these versions of Jupyter are new enough for this to be surprising, I can spend some time this evening to get a minimal reproducible test case, since the notebooks in question contain sensitive data.\n","cc @ellisonbg @captainsafia @willingc for user-facing help.\n\nThe case issue will likely change, as we are going to switch to a different system where the label will be the actual text typed, instead of the key cap ('A \u2260 a', etc.).\n @pkgw I'm sorry that you ran into these. Thank you for reporting them and your use of the word \"papercuts\" is brilliant.\n\n@minrk If you can label this issue for docs, sprint friendly, I will try to have a contributor at Grace Hopper work on improving the docs. No more \"papercuts\". :+1: \n Yes, I agree that it's great terminology! I learned it [from Ubuntu](http://www.jorgecastro.org/2009/06/10/papercut-time/).\n As @minrk mentioned, we are working on a new keyboard shortcut that will\naddress both of these points. Will be a few months before it is live,\nhopefully you can be patient with us :)\n\nOn Wed, Oct 14, 2015 at 8:37 AM, Peter Williams notifications@github.com\nwrote:\n\n> Yes, I agree that it's great terminology! I learned it from Ubuntu\n> http://www.jorgecastro.org/2009/06/10/papercut-time/.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/603#issuecomment-148036515.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n It's uppercase  at least on OS X because that's the convention there: \n![screen shot 2015-10-14 at 10 58 37](https://cloud.githubusercontent.com/assets/335567/10492760/9457cd1c-7262-11e5-9c3d-3d040744790e.png)\n\nI think that being consistent with platform would be a nice thing. \n","How are you starting the notebook? What variables are different?\n starting with sudo ipython notebook (don't work without sudo, writes IOError: [Errno 13] Permission denied: '/Users/casy/Library/Jupyter/runtime/notebook_cookie_secret'\n\nI dont have any of my preconfigured variables, but all generic ones: LOGNAME\nUSER\nPATH\nHOME\nDISPLAY\nLANG\nTERM\nSHELL\nSHLVL\nEDITOR\nSUDO_USER\nUSERNAME\nJPY_PARENT_PID\nSSH_AUTH_SOCK\nSUDO_UID\nGIT_PAGER\nLC_ALL\n_\nSUDO_COMMAND\nSUDO_GID\nCLICOLOR\n__CF_USER_TEXT_ENCODING\nPWD\nMAIL\nPAGER\n sudo's probably the reason. That switches user and changes the environment. Try fixing the permissions on your files and relaunching without sudo:\n\n```\nsudo chown -R `whoami`:staff ~/Library/Jupyter\njupyter notebook\n```\n Thanks, that works fine\n Thanks!\n\nyet now Ipython works in read-only and don't have rights to write anything when notebook is not in my home directory (((:\nIOError: [Errno 13] Permission denied: '/Users/cas...\n Can you expand on `not in my home directory` , do you mean like system wide, like `/Library` or actual subfolder of your home directory ?\n @Casyfill the fix is probably the same - whatever file you don't have read access to was probably created when you started IPython and/or the notebook with `sudo`. You can use the same\n\n``` bash\nchown -R `whoami`:staff PATH\n```\n\nfix to resolve any permissions on files that were created in this way.\n Yes thank you I did exactly that. Probably easier way for me is to chow -R for my home root\n\n\u2014\nSent from Mailbox\n\nOn Thu, Oct 15, 2015 at 4:54 AM, Min RK notifications@github.com wrote:\n\n> @Casyfill the fix is probably the same - whatever file you don't have read access to was probably created when you started IPython and/or the notebook with `sudo`. You can use the same\n> \n> ``` bash\n> chown -R `whoami`:staff PATH\n> ```\n> \n> ## fix to resolve any permissions on files that were created in this way.\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/jupyter/notebook/issues/604#issuecomment-148322210\n","Working now. It seems running the 4.0 server under `pyenv` does not have permission to `/mnt` NASes. Running it in my home folder works fine.\n\nBut why system python has no problem?\n Can you compare the uid, gid, and environment variables between the two sessions where one works and one doesn't? Also, what are the permissions (owner, group, and mask) of the place where accessing fails?\n Thanks for your reply, Minrk!\n\nI ran `ps axjf`. The two processes have same uid `1005`:\n\nOne works:\n\n```\nPPID   PID  PGID   SID TTY      TPGID STAT   UID   TIME COMMAND\n11781 15838 15838 11781 pts/4    15838 S+    1005   0:00  |           \\_ /opt/anaconda/bin/python /opt/anaconda/bin/ipython notebook --profile=nbserver\n```\n\nDoesn't work:\n\n```\n11781 16221 16221 11781 pts/4    16221 S+    1005   0:00  |           \\_ /home/yi/.pyenv/versions/miniconda-3.16.0/bin/python /home/yi/.pyenv/versions/miniconda-3.16.0/bin/jupyter-n\n```\n\npermission:\nHome folder works:\n`drwxr-xr-x 1 yi yi  32 Apr 13  2015 scripts/`\n\n`1005` is `yi`'s uid, gid mask\n\nNAS /mnt fails:\n`drwxrwxrwx  3 1000010 1000001    0 Oct 13 18:56 20151012-geno/`\n Does it work if you run the code in regular Python in the pyvenv?\n Unfortunately, I don't have root privilege to install `sqlite3-lib` on the machine. It is required to compile regular python in `pyenv`. Thanks for your reply all the same.\n","Test fixed - we were setting the Location header on restart requests, which I think was an artifact of the very early days when restarting a kernel didn't actually use the restart mechanism, but instead created a whole new kernel. Now it doesn't make a lot of sense to set the Location header, since the Location is guaranteed not to change.\n :+1: from me for merging.\n @minrk can this be merged? I didn't follow the review, but @blink1073 is +1 on merging.\n Yes, ready as far as I am concerned.\n","that does not seem like the correct way to do it. \nWe already have extension that can be required with require.js and configured in the notebook front-end config. I guess that's what you are tying to do. \n For notebooks in particular, yes. For the other pages that are served by the server, such as the `/tree` listing, I do not believe there's a way to include extra JavaScript.\n Yes there is, [nbgrader](https://github.com/jupyter/nbgrader) and ipyparallel  areusing these hooks to add custom assignment tab for example:\n<img width=\"820\" alt=\"screen shot 2015-10-14 at 11 16 23\" src=\"https://cloud.githubusercontent.com/assets/335567/10493260/0c1ef6c0-7265-11e5-8aef-b21aacc84b7e.png\">\n\nIt might be badly documented though. \n Ah, now I see how this is supposed to work. I think there is a strong lack of documentation in this department, but I agree that this patch is not necessary.\n > Ah, now I see how this is supposed to work. I think there is a strong lack of documentation in this department, but I agree that this patch is not necessary.\n\nYeah, we are a little short on hands for documentation, and the API is still in motion, so we don't want to advertise it too much. \n\nIf you have fix to send to the docs they would be greatly appreciated. \n","I've rebased this to a different branch, so I'm closing this PR, to open a different one.\n replaced by #631\n","Just a note that the circular dependency described in jupyter/jupyter_nbconvert#12 is what forces us to install everything in one command, otherwise the circular dependency goes unresolved.\n","I talking to @Carreau we may want to keep the visual style of existing things the same over the 4.x releases. Need to discuss with everyone.\n I have been looking and playing with the notebook and really don't like the blue anymore. Took your advice @ellisonbg and mocked up the notebook with less color variations like the landing page.\n\nOr should I just go with the blue and the above suggestions. Just thought this was worth trying out!\n\n![preview1](https://cloud.githubusercontent.com/assets/6437976/10528572/d521b79c-734b-11e5-811d-2b0dad88ac3e.png)\n![preview2](https://cloud.githubusercontent.com/assets/6437976/10528574/d81ab99e-734b-11e5-83d4-2aaaf18dad3b.png)\n orange and red don't have enough contrast between them for input/output, for me.\n Agree with @minrk on that point. In the long run we may end  up doing more\nsignificant design changes to how cells are styled. @Carreau and I were\ntalking yesterday that we probably shouldn't change UI in minor releases. I\nam going to send an email to the list about this and some other versioning\nquestions.\n\nFor the 4.1 release, we should probably keep the prompts the same as in 4.0.\n\nBut let's wait until the larger discussion about versioning finishes before\ndoing anything with this.\n\nOn Fri, Oct 16, 2015 at 6:03 AM, Min RK notifications@github.com wrote:\n\n> orange and red don't have enough contrast between them for input/output,\n> for me.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/610#issuecomment-148673455.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Visual style has been reverted (except for marked cell which is \"new\". \n\nCan we bump that to 5.0 ?\n Yep, bump...\n\nOn Thu, Oct 22, 2015 at 1:39 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Assigned #610 https://github.com/jupyter/notebook/issues/610 to\n> @ellisonbg https://github.com/ellisonbg.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/610#event-442922812.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","I prefer the second, but should point out space and shift-space are browser defaults for scrolling.\n Shortcut feel like API to me, I would prefer not to change in between minor revisions.\n > Shortcut feel like API to me\n\nTrue, especially if the user is automating things.\n OK I will look for another shortcut...\n But we should not break keyboard shortcuts in the 4.x series.\n Yeah, I am going to close this ...\n All of the shortcuts could use an audit for 5.0.\n","@ellisonbg @Carreau \n Great, will review soon. There are also a few other actions we should enable on marked cells such as run.\n No objection. It might just conflict with @ellisonbg action renaming. \n I have just played with it and overall and really liking it. I do think we should add the marked cell capability for running cells. But I think if there are multiple marked cells the default action should be an inplace run, rather than run and select next. That may change how the keyboard shortcuts and actions for run are desiged. Because of that, let's merge this first without run cell for marked, then merge my command stuff (I will have to rebase) and then submit a final PR to add the marked cell running with the new action names.\n\nBut there are a few other things above to fix before this can be merged.\n Also, I don't mind doing a rebase of my action renaming PR on top of this in its roughly current state.\n @ellisonbg comments addressed\n OK great, once tests pass I will merge and rebase my action-names PR. Thanks! This is looking really good!\n Hmmm kicking Travis...\n @ellisonbg Travis passed\n :)\n\nOn Fri, Oct 16, 2015 at 2:51 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Merged #612 https://github.com/jupyter/notebook/pull/612.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/612#event-437854750.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","While I like this idea I don't see a way to support it that doesn't break\nsome fundamental abstractions in the notebook:\n- If we put it into output, the next time that cell runs, the output gets\n  replaced and the image goes away.\n- If we put the base64 encoded image direction into a markdown cell, that\n  markdown cell becomes difficult to manage and edit.\n\nWe have added a \"restart-kernel-and-run-all-cells\" action in 4.1 as we want\nto encourage more folks to rerun their notebooks to make sure they are\nreproducible.\n\nObviously, we could upload the image to the direction where the notebook\nsits and insert a link to a markdown cell. Would that satisfy this usage\ncase?\n\nOn Fri, Oct 16, 2015 at 2:41 PM, Steven G. Johnson <notifications@github.com\n\n> wrote:\n> \n> The notebook format can already include images etc. via \"output_type\" :\n> \"display_data\" cells. However, there is currently no UI to add such cells\n> to a notebook. As a result, if you want an image in a notebook then you\n> need to either (a) write a code cell to read and display it (b) link to an\n> external image file that you carry around the notebook, or (c) insert an <img\n> src=\"data:image/png;base64,...> tag with the base64-encoded image data\n> (although this no longer seems to work in Jupyter 4?).\n> \n> It would be much nicer to have:\n> \n>    -\n> \n>    A menu item _Insert image file_ or similar that prompted you for a\n>    file name, then uploaded the file, base64-encoded it, and stuck the\n>    resulting data as a display_data cell in the notebook after the\n>    current cell.\n>    -\n> \n>    The ability to copy-paste and drag-and-drop images into the notebook,\n>    using the same display_data mechanism.\n> \n> Note that questions about including images in notebooks come up\n> frequently, e.g. here\n> http://stackoverflow.com/questions/10628262/inserting-image-into-ipython-notebook-markdown,\n> here\n> https://mail.scipy.org/pipermail/ipython-dev/2014-February/013162.html,\n> here\n> https://groups.google.com/d/msg/julia-users/gQxbpWXpTXk/mzYUoCgSldcJ,\n> here\n> http://stackoverflow.com/questions/32370281/how-to-include-image-or-picture-in-jupyter-notebook,\n> and in ipython/ipython#4111\n> https://github.com/ipython/ipython/issues/4111. Using an external file\n> seems like the best option at the moment, but it defeats the goal of having\n> the notebook be a stand-alone file that contains everything.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/613.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n What about adding a new cell type that would act like markdown but could only contain inline media (base64 images, videos? and maybe others).\n That is a possibility, but adding new cell types is something we are _very_\nconservative about.\n\nOn Sun, Oct 18, 2015 at 2:47 PM, Julien Rebetez notifications@github.com\nwrote:\n\n> What about adding a new cell type that would act like markdown but could\n> only contain inline media (base64 images, videos? and maybe others).\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/613#issuecomment-149037925.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg, I understand that, but it seems like supporting embedded media that are not code outputs is something you will eventually want to support.  That is, some kind of cell or notebook item that can contain an arbitrary mimebundle, but which is inserted/deleted independent of code.\n\nInstead  of creating a new cell type, how about adding a flag to `display_data` cells that prevents them from being cleared with other output?  (Of course, you would still need a UI for deleting them, e.g. selecting them and pressing \"delete\" or hitting a close box or something.)   But it really seems cleaner just to have a new cell type.\n Uploading the image to a notebook site does not satisfy this need.   There are lots of ways to share notebooks besides nbviewer.  I want to just be able to email someone a file, or copy it from one place to another, without worrying that I'm forgetting some file that I need to send along with the notebook.\n\n(Especially since the only way to know what files I need is to open the notebook and look through the source of every single markdown cell.  Of course, one could write a tool for this, but it still seems pre-historic.  When I email someone a word-processor document, I don't need to send separate files for every image in the document.)\n OK, what about the notebook having a a section for mime type data that is\nseparate from the main cells that allows the storage of different mime\ntypes by key. Then the Markdown cells could just refer to those by those\nkeys. It would keep the Markdown cells free of that actual data and still\nembed the data into the notebook.\n\nOn Sun, Oct 18, 2015 at 7:27 PM, Steven G. Johnson <notifications@github.com\n\n> wrote:\n> \n> Uploading the image to a notebook site does not satisfy this need. There\n> are lots of ways to share notebooks besides nbviewer. I want to just be\n> able to email someone a file, or copy it from one place to another, without\n> worrying that I'm forgetting some file that I need to send along with the\n> notebook.\n> \n> (Especially since the only way to know what files I need is to open the\n> notebook and look through the source of every single markdown cell. Of\n> course, one could write a tool for this, but it still seems pre-historic.\n> When I email someone a word-processor document, I don't need to send\n> separate files for every image in the document.)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/613#issuecomment-149064196.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg, even simpler, you could just have a string-keyed dictionary of mime-typed data in the Markdown cell data itself, and each markdown cell could only refer to data in its own cell by key.  This avoids the need to introduce a new cell type, and I don't think it would be common to need the same image in multiple markdown cells (and in the rare case that this is needed, you could always include multiple copies of the image, the same as if you wanted to paste the same image more than once into a word-processor document).\n I like that idea. Marking this as 4.2.\n > I don't think it would be common to need the same image in multiple markdown cells\n\nI find myself wanting this functionality frequently but in a slightly different context.  I have a notebook with some technical analysis that generates some plots.  Then I want to write a summary up top that describes key results and includes a couple of the generated plots.  \n\nIs there currently any way to include an image which is a cell output into other cells, or might this new functionality being discussed handle this case?\n @taldcroft, I think that would be different functionality from what is being discussed here.\n Closed by jupyter/notebook#621?\n @stevengj Yes, I think so.\n Yup, thanks!\n","I think it would make more sense to move the logic into text_cell, because it probably shouldn't fire for raw_cell either.\n\n@ellisonbg @Carreau @minrk was this an intentional behavior for the code cell?  I agree with @thachmai and prefer it without this behavior.\n I submitted another pull request that implemented this behavior explicitly in MarkdownCell instead: https://github.com/jupyter/notebook/pull/616\n Closing in favor of #616\n","Not super easily. You could use a custom KernelManager that refuses to start new kernels if more than a certain number are already open. I don't think you will have a particularly good experience with error messages if you do that, though.\n @minrk I'm new to Jupyter or Ipython but how do you control how much memory and CPU a user can use? For instance, a mad scientist can create thousand of notebooks in jupyter :) \n @jlamcanopy you can use JupyterHub + your operating system's features for managing user accounts to limit the amount of memory per user.  JupyterHub will simply make sure the server process is launched using the user's token.\n\nhttps://github.com/jupyter/jupyterhub\n @jdfreder Thanks for confirming this and your advice on how it could be done. Do you think it is useful to have a feature to have a configuration for limiting the number of notebooks running in jupyter?\n I suppose in conjuncture with something like JupyterHub, it could be useful.  But I do think if you are trying to control memory and cpu usage, it's best to do that directly.  I'll mark this as wish list, and others can weigh in - or someone can come along and implement it ;)\n I think this is probably one of those things like custom auth that probably shouldn't be implemented so much in the single-user notebook, but some code could be added to the single-user notebook to make it easier for managed deployments like JupyterHub to configure. We might already be at that point, though\u2014registering a custom KernelManager that refuses to start new kernels is already available via existing config. But I'm pretty sure that failing to start kernels is not an error we handle well.\n Hi, @jlamcanopy \r\nDid you get process of implementing this requirement? We are in a need to implement this feature too, if any information you would like to share with us?","I think I prefer the dblclick to be in MarkdownCell only. Someone should test the behavior of this PR on all cell types before this is merged though.\n Tested, this works great.  Thanks @thachmai for looking into this!\n","Solved, I installed with \"pip\" and I used Python3. I installed with \"pip3\" and now it works!\n","tnx for the quick fix!\n","Looks good.\n","Do you know how to check that attribute from Python? None of the core devs are regular Windows users.\n To check FILE_ATTRIBUTE_HIDDEN on Windows: `GetFileAttributesW(u'abspath') & 0x02`. See #63\n","Thanks!  You have a couple weird commits as a result of your git workflow, can you squash those?\n OK, the commits are fixed....\n Kicked travis\n","Great, thanks so much for working on this!\n- Shouldn't it use [markdown image syntax](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#images) rather than `<img ../>`?\n- Maybe it should use the notebook's generic \"mime bundle\" format, i.e. `\"test.png\" : { \"image/png\" : [\"base64-encoded-png-data\"] }`\n- Would be good to support pasted images as well as drag-and-drop, and a menu item to insert an image from a file-picker menu.\n- Might be nice to use `attachment:test.png` rathe than `nbdata` (or in any case the same keyword that is used for the cell data item).\n This is awesome!  Great work!\n\n> Shouldn't it use markdown image syntax rather than <img ../>?\n\n+1\n\n> Would be good to support pasted images as well as drag-and-drop, and a menu item to insert an image from a file-picker menu.\n\n+2\n\n> Maybe it should use the notebook's generic \"mime bundle\" format, i.e. \"test.png\" : { \"image/png\" : [\"base64-encoded-png-data\"] }\n\nIt's not clear to me how this would work- where would the mime bundle be stored in the document and how would it be referenced inline in the markdown?\n @jdfreder, the [mime bundle](https://nbformat.readthedocs.org/en/latest/format_description.html#display-data) would be stored in the cell data, exactly as above.  i.e.\n\n```\n{\n   \"collapsed\": true,\n    ....\n    \"attachments\": {\n        \"test.png\" : { \"image/png\": [...base64-encoded-data...] }\n    }\n}\n```\n\nThe point is, the notebook format has already defined a way to store arbitrary MIME data; you should re-use it here rather than inventing a new method.\n\nRe-using the existing mime-bundle structure has lots of advantages, e.g. it simplifies processing by external tools.  (MIME bundles also open the door to attachments that are stored in multiple formats, which might be useful in the future.)\n Ah I didn't realize this was already being stored in the notebook metadata, I thought he was inlining the b64 content in the markdown.  I don't think we should be storing this data in notebook metadata, which is meant for users and extensions.  Instead I think it should have it's own key in [nbformat](https://github.com/jupyter/nbformat).\n @jdfreder, it's not being stored in the _notebook_ metadata (i.e. the metadata for the whole file), it's being stored as an extra key/value pair in the markdown _cell_ data.   See the discussion in #613 \u2014 neither storing the data inline in the markdown nor storing it in a separate file are really acceptable long-term solutions, and @ellisonbg does not want to add a new cell type.\n > it's being stored as an extra key/value pair in the markdown cell data\n\nIt's being stored in `that.metadata.attachments` which is metadata - yes you're right, not notebook level.  All I'm trying to say that I think this needs another PR to https://github.com/jupyter/nbformat to change nbformat.  _Not to add another cell type_, but to add an `attachments` key to the cell.  \n\nMetadata is not something we want to use inside Jupyter/notebook in an attempt to avoid making changes to nbformat.  If we are going to add keys to the notebook file, they need to be documented, and nbformat is how we document them.\n Thanks for the comments !\n\nI added [a nbformat PR](https://github.com/jupyter/nbformat/pull/21) for a new 'attachments' cell property. \n\nI also added a todo list to my first comment on this issue to track progress.\n A few points:\n- +1 on using mime bundles for this\n- +1 on adding the attachment field to the nbformat rather than metadata\n- +1 on getting this to work both in img tags and markdown image syntax.\n  While the markdown image syntax is nice, I often need more control and use\n  igm tags.\n\nOn Tue, Oct 20, 2015 at 5:21 AM, Julien Rebetez notifications@github.com\nwrote:\n\n> Thanks for the comments !\n> \n> I added a nbformat PR https://github.com/jupyter/nbformat/pull/21 for a\n> new 'attachments' cell property.\n> \n> I also added a todo list to my first comment on this issue to track\n> progress.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/621#issuecomment-149489680.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @jdfreder, I see.  Yes, I completely agree; `attachments` should be a documented cell field.\n As suggested by @stevengj, I think it would be great to have an \"insert image\" menu item. This would be active only when the user is editing a markdown cell. I am not sure where to put it as it seems the current menu items apply to all cells and do not require one to be in edit mode. Do you have UI guidelines for that ?\n I would find a suitable place in the \"Edit\" menu.\n\nOn Wed, Oct 21, 2015 at 3:09 AM, Julien Rebetez notifications@github.com\nwrote:\n\n> As suggested by @stevengj https://github.com/stevengj, I think it would\n> be great to have an \"insert image\" menu item. This would be active only\n> when the user is editing a markdown cell. I am not sure where to put it as\n> it seems the current menu items apply to all cells and do not require one\n> to be in edit mode. Do you have UI guidelines for that ?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/621#issuecomment-149800587.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n This wouldn't need any custom markdown processing at all, nor any change to the notebook format if drag&drop onto a markdown cell uploaded the file via contents API and then wrote a normal, relative URL in the markdown.\n The more I think about it, the more I think this should be uploading to contents, rather than writing binary data to the notebook. Doing so has many advantages:\n- faster notebook load\n- smaller storage size\n- use existing tools to interact with images/data\n- better version control behavior\n- avoid need to parse special URLs in nbconvert\n- avoid custom markdown processing\n- easier to make attachments available to kernel by _not_ embedding them in the notebook\n\nI can't think of any benefits to the data being in the JSON in particular, just making it easier to put images into the notebook - the storage details of putting it into the JSON don't seem specifically valuable, or am I missing something?\n @minrk The advantage of having attachments in the JSON is that you have a single .ipynb file to deal with, for example when sharing your notebook via email. And you cannot \"break\" your notebook by moving files around. \n\nThat is one advantage against the many advantages of the upload approach you listed though :-)\n That's a good point, it is a trade-off. We just have to decide which side we want to fall on. I suspect, given the consistent pressure we get that we already put too much in the JSON, that making it easier to work with external files (e.g. completion of filenames in markdown URLs) will be the preferable to yet-more-files in JSON. The drag&drop UI shouldn't be significantly different between the two storage schemes, though.\n @minrk, having a single file to deal with is the whole point here.   I don't think we need a UI to help with linking external files \u2014 that is easy already: you just drag and drop the file into the same directory and add an image link to markdown.\n\nWhereas right now it is insanely hard to embed an image in the notebook file itself unless the image is the result of code execution, and this makes it extremely unreliable to share (email, upload, copy to dropbox...) notebooks with markdown images without breaking them.\n\nMoreover, when someone drags-and-drops or pastes an image into a notebook, what they will expect is that it is stored in the notebook.  This is the behavior people are familiar with from other contexts like word processors.  It is especially true for copy/paste or drag-and-drop of images that don't come from a file (e.g. pasting/dragging a selection from an image-editor program or from another web page).\n @minrk, note also that 5 out of the 7 items in your list of \"advantages of separate files\" would also apply to images produce by code execution, i.e. to storing `display_data` messages.   And yet I think everyone can agree that the disadvantage of having to carry around separate image files for every graphical output would almost always vastly outweigh the advantages.   The same applies to images in Markdown cells.\n\n(Right now, in my experience, people simply avoid using images in markdown cells as much as possible because of this inconvenience.  If you make it easier to embed images, I suspect that you'll start seeing many more notebooks filled with technical illustrations and other graphical aids.)\n The drag&drop notebook extension in IPython-contrib actually already uploads images to the server using the contents service. My experience is that for small images it sometimes would be nice to have them in the notebook, however I think it is better to store most images separately. \nI don't think JSON files make a good file system. The same is true for any local data that is being processed by a notebook.\n\nSo the discussions should probably be where to put local data that belongs to a notebook. \nFor example, I have a lot of notebooks containing code, markdown, images. plots, external data.\nTherefore I have only one or a few notebooks in a directory, together with graphics and data.\n @juhasch, uploading things to the server does not help one bit with the problem of sharing the notebook with someone who does not share the same server.   And again, the same arguments would apply to storing plots and other code-generated images in the notebook vs. separate files.\n Yes, I understand what you want and I would sometimes find that capability nice, too. \nThe question is if JSON is a good format to be used as a container to store binary data, and  what kind of data  belongs into that container. I would argue we need a better container and not extend what is stored in the JSON file.\n > I think everyone can agree that the disadvantage of having to carry around separate image files for every graphical output would vastly outweigh the advantages\n\nI certainly agree, but it's not everyone. We get regular complaints about putting output into the JSON.\n\n> Right now, in my experience, people simply avoid using images in markdown cells as much as possible because of this inconvenience\n\nAnd my experience is the opposite\u2014since it's so convenient to use regular files in markdown and the behavior is so much better, I use relatively linked images in markdown all the time. For this reason, I thought that the convenience of upload was the only aspect this was meant to address, e.g. matching what GitHub image upload does.\n\n> the same argument would apply to storing plots and other code-generated images in the notebook vs. separate files.\n\nI don't agree, or at least I think the tradeoffs end up being different. Generated outputs and uploaded files are different in many ways. Outputs change on every execution of the notebook, and are reasonably discarded by users who do not want to track non-input content.\n We're already using JSON as a container to store binary data.   I just want to be able to paste a few kB more in when I need a simple figure, without losing the self-contained nature of the file.\n\n@minrk, I agree that the tradeoffs are even worse for code-generated images, but I wanted to point out that the arguments that you and @juhasch are making would largely apply to them as well.   That should give you pause \u2014 we have an existence proof that these arguments can be outweighed by the convenience of having a self-contained file.\n I can see both sides here.\n\nI see Min's point that almost everything is accomplished by uploading to\nthe server next to the notebook using the Content API.\n\nI also see that we are already putting binary data in the notebook and\nadding more won't causes too many problems.\n\nFrom a usability perspective, I do think the main point is is allowing easy\nuploading.\n\nBut the secondary point is to have a self contained file.\n\nOn Wed, Oct 21, 2015 at 12:42 PM, Steven G. Johnson <\nnotifications@github.com> wrote:\n\n> We're already using JSON as a container to store binary data. I just want\n> to be able to paste a few kB more in when I need a simple figure, without\n> losing the self-contained nature of the file.\n> \n> @minrk https://github.com/minrk, I agree that the tradeoffs are even\n> worse for code-generated images, but I wanted to point out that the\n> arguments that you and @juhasch https://github.com/juhasch are making\n> would largely apply to them as well. That should give you pause \u2014 we have\n> an existence proof that these arguments can be outweighed by the\n> convenience of having a self-contained file.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/621#issuecomment-149956443.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @jasongrout is probably in favor of embedding (next to me) - \"I think the\ncall has already been made by how we handle output\"\n\nOn Wed, Oct 21, 2015 at 12:59 PM, Brian Granger ellisonbg@gmail.com wrote:\n\n> I can see both sides here.\n> \n> I see Min's point that almost everything is accomplished by uploading to\n> the server next to the notebook using the Content API.\n> \n> I also see that we are already putting binary data in the notebook and\n> adding more won't causes too many problems.\n> \n> From a usability perspective, I do think the main point is is allowing\n> easy uploading.\n> \n> But the secondary point is to have a self contained file.\n> \n> On Wed, Oct 21, 2015 at 12:42 PM, Steven G. Johnson <\n> notifications@github.com> wrote:\n> \n> > We're already using JSON as a container to store binary data. I just want\n> > to be able to paste a few kB more in when I need a simple figure, without\n> > losing the self-contained nature of the file.\n> > \n> > @minrk https://github.com/minrk, I agree that the tradeoffs are even\n> > worse for code-generated images, but I wanted to point out that the\n> > arguments that you and @juhasch https://github.com/juhasch are making\n> > would largely apply to them as well. That should give you pause \u2014 we have\n> > an existence proof that these arguments can be outweighed by the\n> > convenience of having a self-contained file.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/pull/621#issuecomment-149956443.\n> \n> ## \n> \n> Brian E. Granger\n> Associate Professor of Physics and Data Science\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I would say that there are usecases for both approaches, and right now only one approach is (easily) possible - the uploading and linking approach.  This makes it very easy to do the other approach too.\n If there is consensus that the trade offs are in favor of embedding in the JSON, that's fine by me. Sorry for the diversion.\n I would like to discuss how to handle attachments deletion. I see two possibilities :\n1. We either automatically remove attachments that are not referenced in the markdown (at render time).\n2. We let the user delete attachments manually using the \"Edit Attachments\" dialog (which should be improved).\n\nOption 1 is easier for the user; he doesn't event need to know what an attachment is to use the feature. With this option, I am not sure an \"Edit Attachments\" dialog is still useful, although it could be used to view an attachments' size.\n\nAny thoughts ?\n Option 1 seems more intuitive to me.\n What if you want to copy and paste an image from one markdown cell to another?\n I would require explicit removal. It would be pretty easy to accidentally\nrender a cell when it temporarily didn't have a reference to the image. I\ndo this type of thing all the time when moving content around between\ndifferent cells.\n\nTo implement cut/copy/paste, I would create a subsection in the \"Edit\" menu\nfor these actions so folks don't have to monkey around with editing the\nJSON metadata:\n\nEdit : Cut Cell Attachments\nEdit : Copy Cell Attachments\nEdit : Paste Cell Attachments\n\nOn Thu, Oct 22, 2015 at 7:41 AM, Steven G. Johnson <notifications@github.com\n\n> wrote:\n> \n> What if you want to copy and paste an image from one markdown cell to\n> another?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/621#issuecomment-150194343.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg Good idea regarding the copy/paste.\n\nA third option would be to require explicit removal, but show some kind of visual warning if there is an unreferenced attachment when rendering a markdown cell. So we get the intuitiveness of option 1 with the security (in term of you don't loose your content if you temporarily mess up your markdown) of option 2.\n Any updates on this?\n @parleur you said you wanted to have  a look at that yesterday.\n Sorry about the long delay, got busy with other things...\nI'll find some time next week to rebase this against master and get it into a state suitable for a UI review.\n Hi. Wow it's an impressive work.\n\nWhat can be done right now to push this feature forward?\n > What can be done right now to push this feature forward?\n\nHelp @julienr to rebase (at least see the conflict there is), and the open points in firs message of this thread. \n\nlikely but this can be separate: have nbconvert understand the attached images.\n I've started rebasing and will finish tomorrow. Then, I think some UI/UX review would be useful.\n I think I'm reaching a usable state with this PR. I'll try to add some JS tests for the attachment copy/paste feature.\n\nI could use some feedback on the UI and the general usability of this. I'll also try to get some colleagues to test it next week. If you want to test it, you'll also need my [attachments branch](https://github.com/julienr/nbformat/tree/attachments) of nbformat.\n\nThere is one remaining bullet point which is to decide if users should be warned about unused attachments. For now, if you drag'n'drop a bunch of images in your markdown and then delete all the markdown, the attachments will stay unless you remove them with the attachment toolbar. I think it would be better to notify the user in some way. I see at least three solutions :\n- Check for unused attachments when rendering a cell and display a visual markers on cells with unused attachments\n- Check for unused attachments when saving the notebook and display a dialog warning the user\n- Automatically garbage collect unused attachments when saving the notebook (I think this is dangerous because maybe the user has a good reason to have unused attachments)\n\nWhat do you think ?\n Warning about unused attachments only when saving the notebook seems good to me.  If the user has a good reason to have unused attachments, saving every time the cell is rendered seems too chatty.\n I have some remarks about unused cell attachment:\n- you told about good reason to have unused cell attachment? Except as a transitive state which is perfectly valid I cannot figure out why would a user save a notebook with it. At least as long as there is no way to know a cell have an attachment. \n- Currently there are auto-save and manual save features. I think, checking, warning and or cleaning should only append when manual saved are performed. As embed arbitrary data in JSON is a hot point of debate, automatically remove unused cell attachment is a way to keep users safe from dirty uses (I can imagine a lot of it ).\n\nI tested the UI, it seems quite clear for me and I havn't find any bug.\n @parleur I think you are right regarding unused cell attachments. If the user doesn't know the inner workings of cell attachments, there is no reason to except them to be saved if not used. I'll work on automatic removal on manual save.\n\nGlad that the UI seems to work !\n I've added garbage collection on manual save. I think this is ready for a code review.\n I have some trouble understanding the failed travis tests. This seems to be related to the new `deprecated-require-paths.js` and I can reproduce the failure locally if I rebase my changes on master, but I am at a loss to understand what's causing the errors. Especially since I don't think I touched anything to do with requirejs...\n\nFor example in the following session, how can I debug what's causing the `Script error for \"notebook\"` ?\n\n```\n(jupydev)notebook|inline_images!=> python -m notebook.jstest  base/deprecated-require-paths.js\n\nTest group: base/deprecated-require-paths.js\nRunning tests with notebook directory '/var/folders/x3/5y72x0994c7b32kr_kj8yg6w0000gn/T/tmphkDI2\ny'\nTest file: notebook/tests/base/deprecated-require-paths.js\nPage Error\n  Message:   Error: Script error for \"notebook\"\n             http://requirejs.org/docs/errors.html#scripterror\n  Call stack:\n    line 140 of static/components/requirejs/require.js in defaultOnError\n    line 544 of static/components/requirejs/require.js in onError\n    line 1735 of static/components/requirejs/require.js\nTimeout for http://localhost:8888/a@b/\nIs the notebook server running?\nFAIL \"function () {\n            return this.evaluate(function(guid) {\n                return window[guid] !== undefined;\n            }, {guid: guid});\n        }\" did not evaluate to something truthy in 10000ms\n#    type: uncaughtError\n#    file: notebook/tests/base/deprecated-require-paths.js\n#    error: \"function () {\n            return this.evaluate(function(guid) {\n                return window[guid] !== undefined;\n            }, {guid: guid});\n        }\" did not evaluate to something truthy in 10000ms\n\n#    stack: not provided\n```\n Oh yes, the mysterious 'Script error'...\n\n@jdfreder should be able to give you some pointers on what's needed - we just landed his big PR that changes how the JS is built.\n Webpack is a little more strict about dependencies, try removing the jquery imports I mention, although I'm surprised they'd cause it to fail, that's an issue I'll need to investigate...\n\nThe error you see is because `notebook/static/notebook/js/celltoolbarpresets/attachments.js` cannot load.\n @jdfreder Thanks for your help. Removing the jquery dependencies seem to have solved the travis failure. The \"script error\" I got locally was due to my build directory containing some old js code.\n I have a travis failure on `js/services` which I think is just some weird timeout. Can someone restart this test ?\n Thanks to whoever relaunched the test :) I've added the two tests (attachments and garbage collection) I wanted, I think this can be considered ready. \n Awesome, thanks @julienr!\n I'm really excited about this!\n Thanks to everybody involved in this discussion and thanks for merging this !\n :tada: :cake: This is awesome!!\n Ha ! Found a bug already ! But awesome !\n","I'm almost wondering is input shoudl be an attribute on cell: \n\n`cell.input.hidden=true` Seem more readable, and guess we will have request for more attributes. \n When the input area is a separate view/model, that might make sense. But\nfor now I think this is sufficient.\n\nOn Mon, Oct 19, 2015 at 7:33 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I'm almost wondering is input shoudl be an attribute on cell:\n> \n> cell.input.hidden=true Seem more readable, and guess we will have request\n> for more attributes.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/622#issuecomment-149376331.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Trying to revive this, \nand I will also push again forward the idea that the UI should be 3 state.\n`hidden`/`scroll`/`expanded`\nThis could even be an `int`: \n- 0: collapsed\n- N: scroll N lines.\n- inf (that we can encode as -1) expanded.\n I think the main thing that needs to happen for this to move forward is to\nwork with Cameron on the UI/UX design of it. All of the implementation\nquestions should follow from that.\n\nOn Sat, Feb 6, 2016 at 10:02 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Trying to revive this,\n> and I will also push again forward the idea that the UI should be 3 state.\n> hidden/scroll/expanded\n> This could even be an int:\n> - 0: collapsed\n> - N: scroll N lines.\n> - inf (that we can encode as -1) expanded.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/622#issuecomment-180958503.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Oops, ping @jamiesHQ with an S\n Tagging as `closed-PR`, and closing as this is seem to have stalled a bit. \nThis is just to keep the PR queue a bit shorter and focusing on what is actually worked on.\nFeel free to reopen, (or ask for reopening if you don't have enough right to do so). \nIf you were not the original author, and want to revive this, please feel free to do so. \n\nAlso, we are doing our best to enable people to learn how to contribute to the project, and get commits in. If you are missing time or have any other issues that prevent you to work on that, please feel free to tell us, we can try to build on top of what you did. \n\nThanks a lot and looking forward to see this moving forward again.\n\n---\n\nBrian, looking forward to your UI prototype with @cameronoelsen and see that revived. \n\nAlso will need rebase.  Thanks !\n Totally fine closing this - do we have an issue to track the feature though?\n\nOn Thu, Apr 7, 2016 at 2:23 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Tagging as closed-PR, and closing as this is seem to have stalled a bit.\n> This is just to keep the PR queue a bit shorter and focusing on what is\n> actually worked on.\n> Feel free to reopen, (or ask for reopening if you don't have enough right\n> to do so).\n> If you were not the original author, and want to revive this, please feel\n> free to do so.\n> \n> Also, we are doing our best to enable people to learn how to contribute to\n> the project, and get commits in. If you are missing time or have any other\n> issues that prevent you to work on that, please feel free to tell us, we\n> can try to build on top of what you did.\n> \n> ## Thanks a lot and looking forward to see this moving forward again.\n> \n> Brian, looking forward to your UI prototype with @cameronoelsen\n> https://github.com/cameronoelsen and see that revived.\n> \n> Also will need rebase. Thanks !\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/622#issuecomment-207093096\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","+1, \n\nI would just reword it as it does not \"fail\" to upload, but we actively prevent it. \n Better?\n Yep. I relaunched the failing test. \n Nice. Thanks, guys.\n ping @adzuci @richafrank.  We probably care about getting this in our next upgrade.\n Why the limit is 15MB? I can upload up to 35MB without issues.\n\nI recently setup a demo service for [converting data files](http://photon-hdf5.github.io/Photon-HDF5-Converter/) using mybinder.org. The demo can still be useful with the limitation of 35MB, but it would become severely limited with an hard limit of 15MB.\n\nWould it be possibile to lift this limit to 35MB as it is now? Thanks.\n @tritemio, I chose 15MB to be conservative, since cannot know for sure what the crash limit is ahead of time.  \n Gmail uses 25MB as the limit. I would probably go with that.\n\nOn Wed, Oct 21, 2015 at 9:16 AM, Steven Silvester notifications@github.com\nwrote:\n\n> @tritemio https://github.com/tritemio, I chose 15MB to be conservative,\n> since cannot know for sure what the crash limit is ahead of time.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/623#issuecomment-149890586.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","There is no migration to do regarding IPython startup files. The key point that appears to be missing is that IPython continues to have profiles, which have not changed. The migration docs are to convey the fact that that IPython profiles no longer affect Jupyter projects. That is, the Jupyter notebook config file has moved from the IPython profile to ~/.jupyter/jupyter_notebook_config.py. The IPython profile and its startup files continue to affect the IPython kernel, and have not changed.\n Thanks @minrk! I think where my confusion is now is in how to create a new IPython-based Kernel for Jupyter that runs with a specified IPython profile.\n If the kernel should _always_ run with a specific profile, you can hardcode that in your Application code, rather than allowing it to be configurable. Otherwise, you can add the `--profile foo` to the argv in the kernelspec. This is how you would specify a profile for the existing IPython kernel.\n To provide a concrete example to @minrk's instructions for anyone struggling with this like I was.\n\nIPython searches for kernel specifications in one of three spots:\n\nUnix:\n- `/usr/share/jupyter/kernels`\n- `/usr/local/share/jupyter/kernels`\n- `~/.ipython/kernels`\n\nWindows:\n- `%PROGRAMDATA%\\jupyter\\kernels`\n\nA kernel spec is nothing more than a folder with a `kernel.json` file that specifies how to launch that kernel. If I wanted to use a specific IPython profile (named `my-profile`), I could do something like:\n\n``` bash\nmkdir -p ~/.ipython/kernels/my-custom-kernel\ncat > ~/.ipython/kernels/my-custom-kernel/kernel.json <<EOF\n{\n    \"display_name\": \"My Custom Python Kernel\",\n    \"language\": \"python\",\n    \"argv\": [\n        \"python\",\n        \"-m\", \"ipykernel\",\n        \"--profile=my-profile\",\n        \"-f\", \"{connection_file}\"\n    ],\n    \"env\": {\n    }\n}\nEOF\n```\n\nWhen launching a Jupyter notebook server, you'll now have the choice of launching either a `Python 2` kernel or a `My Custom Python Kernel` kernel.\n @minrk wrote:\n\n> ...that IPython profiles no longer affect Jupyter projects.\n\nBut they do. For example, adding exec lines to c.InteractiveShellApp runs them in the notebook.\n For Python notebooks, Jupyter is running an IPython kernel, which still uses the IPython config and startup files. Jupyter applications, like the notebook user interface, do not use the IPython config files.\n Closing this as I don't see anything concrete to do. Can I request to reopen this and actually make an addition to the documentation as the original post asked?\r\n\r\nSee, I totally understand that Jupyter does not do profiles anymore. That is fine, no problem.  However, IPython *does* still use profiles (http://ipython.readthedocs.io/en/stable/config/intro.html), and I use them when working both in a standard console (not a Qtconsole) and in a Jupyter notebook (running an IPython kernel), and I would like to use them in the *IPython kernel* that Jupyter runs.\r\n\r\nI get that Jupyter doesn't use profiles for any of its own configuration, but what msukmanowsky posted above is the only place I've been able to find after **lots** of searching that tells me how to make Jupyter *tell IPython* to use a particular profile instead of just the default profile.\r\n\r\nIt would be nice if this could be documented in the Jupyter documentation, somehow. Even if not the exact example above, make it clear that in order to tell IPython to use a profile, you have to construct another kernelspec.  I don't think this is obvious.","@rgbkrk ideas? @jsalva have you tried switch from 'localhost' to '127.0.0.1' explicitly?\n I just tried updating every occurrence of localhost to 127.0.0.1 in `~/.jupyter/jupyter_notebook_config.py`, as well as in `/etc/nginx/conf.d/configuration.conf`, to no avail\n @jsalva did you get anywhere with this? I'm doing something similar with apache and running into the same problem.\n I wish I could have some helpful updates, but nope, gave up and moved on.\n I run mine behind a reverse proxy on Apache, and it took me a full evening of googling and editing my configuration and restarting, but I was able to get it with these directives:\n\n```\n<Location /notebook>\n    RequestHeader unset Accept-Encoding\n    ProxyPass        http://notebook:8888/notebook\n    ProxyPassReverse http://notebook:8888/notebook\n    ProxyPreserveHost on\n    Order allow,deny\n    Allow from all\n</Location>\n<Location /notebook/api/kernels/>\n    ProxyPass        ws://notebook:8888/notebook/api/kernels/\n    ProxyPassReverse ws://notebook:8888/notebook/api/kernels/\n</Location>\n```\n\nHad to enable some additional modules for Apache for this to work (on Ubuntu 14.04 LTS):\n\n```\nsudo a2enmod proxy\nsudo a2enmod proxy_http\nsudo a2enmod proxy_https\nsudo a2enmod proxy_wstunnel\nsudo a2enmod headers\n```\n\nAlso, in my .jupyter/jupyter_notebook_config.py I changed the base URL for the notebook (since it's being hosted as a virtual folder this makes the reverse proxying easier):\n\n```\nc.NotebookApp.base_url = '/notebook'\n```\n\n@ianabc @jsalva Feel free to ping me for discussion. I am not 100% sure what your situations are, or if this helps, and I am hardly an Apache guy, but I did manage to make it work.\n @hosemn I was missing the proxy_wstunnel module, when turned on debugging I could see the protocol error. Thanks for your help!\n Glad it worked for you, and I hope it helps other Apache users. As for nginx, I am not sure where to start.\n Hmm, I also cannot get nginx proxy or a caddyserver proxy working.  I can get pretty close, can log in and create and delete files, but cannot connect to a python kernel (or launch a terminal).  Must have something to do with the websockets proxy, but it's beyond me.  The Jupyter logs just show 400 errors like:\n`[W 01:51:26.202 NotebookApp] 400 GET /api/kernels/aa45474d-7fb8-4685-98dc-5ebeba378f41/channels?session_id=1A9BFB019EE0472486650C81705BCC73 (172.17.0.1) 5.77ms referer=None`\n\nMy nginx conf is here: https://gist.github.com/cboettig/8643341bd3c93b62b5c2 (simple variations, e.g. serving from root instead of a subdomain, or serving without the ssl parts still give me the same issue).  Any suggestions?\n Don't know if it will help, but here is a working nginx config file for\njupyterhub:\n\nhttps://github.com/calpolydatascience/jupyterhub-deploy-data301/blob/master/roles/nginx/templates/nginx.conf.j2\n\nOn Wed, Dec 30, 2015 at 6:01 PM, Carl Boettiger notifications@github.com\nwrote:\n\n> Hmm, I also cannot get nginx proxy or a caddyserver proxy working. I can\n> get pretty close, can log in and create and delete files, but cannot\n> connect to a python kernel (or launch a terminal). Must have something to\n> do with the websockets proxy, but it's beyond me. The Jupyter logs just\n> show 400 errors like:\n> [W 01:51:26.202 NotebookApp] 400 GET\n> /api/kernels/aa45474d-7fb8-4685-98dc-5ebeba378f41/channels?session_id=1A9BFB019EE0472486650C81705BCC73\n> (172.17.0.1) 5.77ms referer=None\n> \n> My nginx conf is here:\n> https://gist.github.com/cboettig/8643341bd3c93b62b5c2 (simple variations,\n> e.g. serving from root instead of a subdomain, or serving without the ssl\n> parts still give me the same issue). Any suggestions?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/625#issuecomment-168110162.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg Thanks for the suggestion, I've actually tried that config as well (after putting in the appropriate values for the ansible-template chunks), and I get the exact same issue -- nginx shows 400 errors trying to connect to the kernel, and Jupyter opens but cannot reach a python kernel...\n\nI'm running the jupyter instance via a docker container from [jupyter/docker-stacks](https://github.com/jupyter/docker-stacks); but don't see why that should be messing up the connection to the kernel when behind a proxy...\n @cboettig Exact same issue here (using nginx in front of https://hub.docker.com/r/jupyter/jupyterhub/~/dockerfile/ ). No idea what could be wrong.\n\nnginx tells me \"client closed connection while waiting for request\"\n\nUpdate: Turns out my issue was that my nginx server was behind an aws ELB (for https). ELBs need special configs for websockets. I ended up just bypassing the ELB. \n @rcompton Thanks, turned out my issue was also websockets related (and had `hub`-style redirects with `user` bit in my previous file).  Here's the tweaked nginx working for me now: https://gist.github.com/cboettig/8643341bd3c93b62b5c2\n It works for me using [jsalva's](https://github.com/jupyter/notebook/issues/625#issue-112465411) config with one small change:\n\n```\nlocation ~ /api/kernels/ {\n```\n @nicerobot's suggestion worked for me. Thanks!\n This worked for me, based on jsalva's post (behind VPN so no SSL):\r\n\r\n```\r\nserver {\r\n    listen 80 default_server;\r\n\r\n    location / {\r\n        proxy_pass            http://localhost:{{ jupyter_server_port }};\r\n        proxy_set_header      Host $host;\r\n    }\r\n\r\n    location /api/kernels/ {\r\n        proxy_pass            http://localhost:{{ jupyter_server_port }};\r\n        proxy_set_header      Host $host;\r\n        # websocket support\r\n        proxy_http_version    1.1;\r\n        proxy_set_header      Upgrade \"websocket\";\r\n        proxy_set_header      Connection \"Upgrade\";\r\n        proxy_read_timeout    86400;\r\n    }\r\n}\r\n```","@freeman-lab FYI, this is the issue I was having with require.config and binder.\n `nbextensions/foobar` should work (and does when I try it with a prefix) because `nbextensions` is configured as a path to map to the correct prefix. `/nbextensions` should never be used. If `nbextensions` didn't map to the prefix, it would never work even with an empty prefix, since that's how we use it in load_extensions.\n\nCan you provide a failing example? Everything I test works as intended with a base_url.\n @minrk indeed, a requirejs statement like \n\n``` JavaScript\ndefine([\"nbextensions/widgets/widgets/js/widget\", \"nbextensions/foo/bar\"], function(widget, foobar) { });\n```\n\nworks. But the following : \n\n``` JavaScript\nrequire.config({\n    path: {\n        \"foo\": \"/nbextensions/foo\",   // bad practice, removes the URL prefix\n        \"bar\": \"nbextensions/bar\",    // bug: it points to [BaseUrl]/static/nbextensions/bar\n                                      // instead of [BaseUrl]/nbextensions/bar\n    }\n});\n```\n\ndoes not what is expected.\n @jasongrout this is impacting pythreejs. For the flight simulator binder, I require a branch in my fork changing the require config paths.\n Hm. I guess require.config doesn't take existing paths into account. I wonder if there's another way to do the same thing, or a way to ask require what the path for `nbextensions` is.\n `require.toUrl('');` will get the prefix `require.toUrl('nbextension');` will give you `/static/nbextension` if it's what you ask. \n @minrk @Carreau do you think we should do anything about this? (not sure the needs-info tag applies btw)\n\npythreejs makes such requirejs configurations and will not work with URL prefixes.\n FYI, I just opened a PR in pythreejs that is a workaround for this issue. https://github.com/jovyan/pythreejs/pull/35\n I'm not sure what we can or should do about it. It seems like we just need answer to the question:\n\n> How do we specify that one nbextension should load another?\n\nIt's possible that there's something we should change in our require config to make that work, and it's also possible that using `paths` is just the wrong way to do it, and `map` is the right thing to use.\n","+1\n Should this limit be configurable? I could imagine that one might want to make the value larger, or smaller, for a set of users.\n This is a temporary work-around until we implement streaming binary uploads.\n Ok. But even in the future (Oh, it is Back to the Future just now!), I could imagine that the system has no set limit, but it could be configured so that there were one. \n @blink1073 could you put the constant as a class-level private attribute, just so that it's a bit more easily overridable in a pinch?\n Better?\n :+1: thanks!\n Cool! Thanks for this!\n","One more thing that might be helpful. When I click the output to fold it the bars appear:\n![zrzut_ekranu-1](https://cloud.githubusercontent.com/assets/7634398/10639729/fad3b56a-7811-11e5-9903-8d4249e91894.png)\n\nSo I can make it appear and disappear just by clicking the fold-output \"button\".\n Thanks for opening an issue!\n\nThis was previously reported in #254 and was (maybe) fixed in #535. Can you see if this issue persists when you work off master?\n I'm still having this problem (or something related), and it's seriously disrupting my work, so I guess I should try pulling the latest dev version-? Is there any other workaround you can recommend? I've just tested in master, and the horizontal scrollbars appear to be back.","Looks OK.\n","Closed by #631 \n","This is okay for a minor release since the function wasn't returning anything anyways, @Carreau @minrk any object to merging this for 4.1?  Marking as 4.2 until I hear +1 from someone else.\n No objection for 4.1.\n No objection for 4.1 either. \nI was just not looking at thing tagged 4.2 or later. \n Thanks @jcb91 !\n welcome ^_^\n","Hi Sorry for not looking into this, this got lost in the high number of PR next to the end of the queue. I suppose that @ellisonbg and @cameronoelsen want to have some look at the design, but I can perfectly see a usecase for an always visible version of the help panel with available shortcuts. \n @ellisonbg and @cameronoelsen you seem to have never seen the mention here.  Sorry about that @jcb91. @ellisonbg Maybe some of your current student can have a look at that ? \n @jcb91 Thanks for PR 10 months ago (I'm sorry this hasn't been addressed sooner). I just [merged](https://github.com/gnestor/notebook/tree/pr/633) the master into your PR and resolved conflicts. I tested your PR by:\n1. Click Help > Keyboard Shortcuts\n2. Click \"Printable view\"\n\nAfter which I run into the following error:\n\n```\nUncaught TypeError: this.build_side_panel is not a function\n    QuickHelp.show_keyboard_shortcuts @ quickhelp.js:191\n    (anonymous function) @ menubar.js:267\n    dispatch @ jquery.min.js?v=ccd0edd\u2026:5\n     y.handle @ jquery.min.js?v=ccd0edd\u2026:5\n```\n\nDoes `this.build_side_panel` depend on an nbextension that I may not have installed?\n @jcb91 I see that this depends on [help_panel extension](https://github.com/ipython-contrib/jupyter_contrib_nbextensions/blob/master/src/jupyter_contrib_nbextensions/nbextensions/help_panel/readme.md). I enabled it and verified that it was loaded in the notebook (`Loading extension: help_panel/help_panel`) but I'm still running into the same error.\n Thanks a lot @gnestor for helping go through all these PR backlogs.\n\nI wondering wether targeting this directly for JupyterLab would be easier ?\nJupyterLab have already the concept of panels, so it might be simpler to implement there, \nand make use of all the nice features of JupyterLab.\n @Carreau Please loop in people who can help make that call. \n\n@jcb91 In order to merge this with notebook (vs. merging it with the help_desk extension), it would need to conditionally display the \"Printable view\" button based on whether the required extension is enabled. \n > > I wondering wether targeting this directly for JupyterLab would be easier ?\n> >  JupyterLab have already the concept of panels, so it might be simpler to implement there, \n> > and make use of all the nice features of JupyterLab.\n> \n> @Carreau Please loop in people who can help make that call.\n\nI guess that would be me, @ellisonbg and @jasongrout if final decision there need to be. \n Thanks @Carreau for pinging us directly to make sure we saw this. I think it would be a good idea to have a help page in JupyterLab with the keymap configuration (first we'd have to write a plugin to expose the keymaps, and then it would automatically be printable, I think, as a normal tab).\n\nI'll let you guys make the call on whether it is feasible to get this working in the current notebook, but exposing a list of the keybindings in JupyterLab is definitely in the plans. See https://github.com/jupyter/jupyterlab/issues/695\n I don't think we should implement this in the classic notebook. And honestly, I think if we want something is print friendly, we should just create a PDF that we can ship. RStudio has done a spectacular job with those:\n\nhttps://www.rstudio.com/resources/cheatsheets/\n\nCan someone open an issue on jupyter/jupyterlab with the cheatsheet idea? Closing this one.\n @gnestor apologies for the delay replying here, I've been a little tied up this week. Anyway, looks like this is already receiving attention elsewhere...\n","Fixed by https://github.com/jupyter/notebook/pull/643\n","Seem to be a problem with zmq. \n\nHave you tried to reinstall it ? Have you try updating python to a more recent version  like 3.4 or 3.5 ?\n I don't know. I tried updating zmq and pyzmq and friends both thru pkg mgr and pip.  Everything was working fine few months ago. Jupyter(via zmq) is not working but hadn't used it in a while so maybe some unrelated software install in the meanwhile changed something with zmq? Who knows but I will try re-installing from scratch.\n Okay, I just spent two hours trying to fix this annoying issue. I built zeromq from source and it tells me something about libsodium so I installed that. Then, zeromq built succesfully. Great. Then, I fire up my jupyter notebook and still same message.\n\nThen, I commented out: export PYTHONPATH=/usr/local/lib/python2.7/dist packages:$PYTHONPATH and I get the following message:\n\n```\nThe Jupyter HTML Notebook.\n\nThis launches a Tornado based HTML Notebook Server that serves up an\nHTML5/Javascript Notebook client.\n\nSubcommands\n-----------\n\nSubcommands are launched as `jupyter-notebook cmd [args]`. For information on\nusing subcommand 'cmd', do: `jupyter-notebook cmd -h`.\n\nlist\n    List currently running notebook servers in this profile.\n\nOptions\n-------\n\nArguments that take values are actually convenience aliases to full\nConfigurables, whose aliases are listed on the help line. For more information\non full configurables, see '--help-all'.\n\n-y\n    Answer yes to any questions instead of prompting.\n--pylab\n    DISABLED: use %pylab or %matplotlib in the notebook to enable matplotlib.\n--no-browser\n    Don't open the notebook in a browser after startup.\n--no-script\n    DEPRECATED, IGNORED\n--debug\n    set log level to logging.DEBUG (maximize logging output)\n--script\n    DEPRECATED, IGNORED\n--generate-config\n    generate default config file\n--no-mathjax\n    Disable MathJax\n\n    MathJax is the javascript library IPython uses to render math/LaTeX. It is\n    very large, so you may want to disable it if you have a slow internet\n    connection, or for offline use of the notebook.\n\n    When disabled, equations etc. will appear as their untransformed TeX source.\n--port-retries=<Int> (NotebookApp.port_retries)\n    Default: 50\n    The number of additional ports to try if the specified port is not\n    available.\n--certfile=<Unicode> (NotebookApp.certfile)\n    Default: ''\n    The full path to an SSL/TLS certificate file.\n--pylab=<Unicode> (NotebookApp.pylab)\n    Default: 'disabled'\n    DISABLED: use %pylab or %matplotlib in the notebook to enable matplotlib.\n--ip=<Unicode> (NotebookApp.ip)\n    Default: 'localhost'\n    The IP address the notebook server will listen on.\n--config=<Unicode> (JupyterApp.config_file)\n    Default: ''\n    Full path of a config file.\n--log-level=<Enum> (Application.log_level)\n    Default: 30\n    Choices: (0, 10, 20, 30, 40, 50, 'DEBUG', 'INFO', 'WARN', 'ERROR', 'CRITICAL')\n    Set the log level by value or name.\n--browser=<Unicode> (NotebookApp.browser)\n    Default: ''\n    Specify what command to use to invoke a web browser when opening the\n    notebook. If not specified, the default browser will be determined by the\n    `webbrowser` standard library module, which allows setting of the BROWSER\n    environment variable to override it.\n--notebook-dir=<Unicode> (NotebookApp.notebook_dir)\n    Default: ''\n    The directory to use for notebooks and kernels.\n--transport=<CaselessStrEnum> (KernelManager.transport)\n    Default: 'tcp'\n    Choices: ['tcp', 'ipc']\n--keyfile=<Unicode> (NotebookApp.keyfile)\n    Default: ''\n    The full path to a private key file for usage with SSL/TLS.\n--port=<Int> (NotebookApp.port)\n    Default: 8888\n    The port the notebook server will listen on.\n\nTo see all available configurables, use `--help-all`\n\nExamples\n--------\n\n    ipython notebook                       # start the notebook\n    ipython notebook --profile=sympy       # use the sympy profile\n    ipython notebook --certfile=mycert.pem # use SSL/TLS certificate\n\n[C 21:53:35.843 NotebookApp] Bad config encountered during initialization:\n[C 21:53:35.843 NotebookApp] The 'contents_manager_class' trait of <notebook.notebookapp.NotebookApp object at 0x7fca5ad369b0> instance must be a type, but 'ipymd.IPymdContentsManager' could not be imported\n```\n\nBy this time, I am just done with this so decide to use anaconda for python 3. And, I get the same message as posted above! If anaconda is supposed to be isolated environment and it installed successfully and path was set to it then I would expect it to work. Now, I will go back to my distro. Note that I have both Python 2 and 3. What info do you need?\n Oh, you seem to be in a weird corner case/ have bad luck:\n\nI see in one message that you are missing one package that you probably configured manually ([ipymd](https://github.com/rossant/ipymd)), check in your config if you have `c.NotebookApp.contents_manager_class = 'ipymd.IPymdContentsManager'`, if so comment it, we can reinstall it later and retry. The part of the error:\n\n```\n[C 21:53:35.843 NotebookApp] The 'contents_manager_class' trait of <notebook.notebookapp.NotebookApp object at 0x7fca5ad369b0> instance must be a type, but 'ipymd.IPymdContentsManager' could not be imported\n```\n\nLike ly the config file will be in `~/.jupyter/jupyter_notebook_config.py` (you can check with `jupyter --config-dir`)\n\n> And, I get the same message as posted above! If anaconda is supposed to be isolated environment and it installed successfully and path was set to it then I would expect it to work.\n\nThe only difference is that the Jupyter/IPython config is global, so if you have a issue in your config this might happen. This is needed as users might want to run only on server with various conda env\n\nAnaconda will also only provide isolation if you are using bash, and don't mess with $PATH in a way that anaconda can't prevent. Typically it needs to shell-out to some external programs. And if $PATH is not correct, it can't know. \n\nAnyway, if it works by commenting the config, we can try to reinstall `ipymd` in the right environment to get you set up again. \n\nSorry for the trouble you are encountering. \n That worked, thanks for your help with debugging. Now, I can start Jupyter Notebook. But immediately upon creating a new notebook, the kernel dies for all my language kernels including Python 2, 3, and my three other language kernels. Here is some output. Any idea?\n\n[I 12:27:21.863 NotebookApp] KernelRestarter: restarting kernel (3/5)\n/usr/local/lib/python2.7/dist-packages/IPython/kernel/**init**.py:13: ShimWarning: The `IPython.kernel` package has been deprecated. You should import from ipykernel or jupyter_client instead.\n  \"You should import from ipykernel or jupyter_client instead.\", ShimWarning)\n/usr/bin/python: libzmq.so.3: cannot open shared object file: No such file or directory; 'IPython.kernel' is a package and cannot be directly executed\n[W 12:27:23.379 NotebookApp] Timeout waiting for kernel_info reply from bbbeb806-3642-4d2f-b6da-975bc94f05bf\n[I 12:27:23.469 NotebookApp] Kernel started: 41e6846b-3710-430d-8b29-0db474b27b0c\n/usr/local/lib/python3.4/dist-packages/IPython/kernel/**init**.py:13: ShimWarning: The `IPython.kernel` package has been deprecated. You should import from ipykernel or jupyter_client instead.\n  \"You should import from ipykernel or jupyter_client instead.\", ShimWarning)\n/usr/bin/python3: Error while finding spec for 'IPython.kernel.**main**' (<class 'ImportError'>: libzmq.so.3: cannot open shared object file: No such file or directory); 'IPython.kernel' is a package and cannot be directly executed\n That's because your system still find old kernels from a non-working IPython env. \n\nTry `ipython kernel install` for each python you want to a kernel for.\n\nAt some point I would also suggest trying to find the non working installation of IPython/lib zmq and remove them.\n (if you want to be even more sure, you can do `python -m IPython kernel install` when python is the link to the right python)\n That does not work, it complains about not finding zmq. I did that using kernelspec command when I initially upgraded to Jupyter when it was first released. I have a bunch of language kernels listed in my menu. I do not have any idea where to locate the old kernels non working IPython or zmq. Perhaps, that could be built in to the upgrade process.  I have other programs that are recognizing my Python 3 interpreter but not IPython or Jupyter.  When I have time to play around with this again, I'll get in touch. Mark this as unresolved.\n @carreau @minrk Please tag \"pending additional information\" from @codebeetle. \n Nevermind ^^ Already labeled \"needs info\". \n Ok, let's try to do things stem by step, I include what I get for information.\nIf you get something too different or are unsure, ask at the specific step and we can go into more details. \n\nList all kernels:\n\n``` bash\n$ jupyter kernelspec list\nAvailable kernels:\n  haskell      ~/Library/Jupyter/kernels/haskell\n  julia-0.3    ~/Library/Jupyter/kernels/julia-0.3\n  julia-0.4    ~/Library/Jupyter/kernels/julia-0.4\n  julia-0.5    ~/Library/Jupyter/kernels/julia-0.5\n  py34         /usr/local/share/jupyter/kernels/py34\n  python2      /usr/local/share/jupyter/kernels/python2\n  python3      /usr/local/share/jupyter/kernels/python3\n```\n\nyou can remove the folders of the kernels you do not want. \n\nFind which python `jupyter` uses:\n\n``` bash\n$ head -n1 $(which jupyter)\n#!~/anaconda3/bin/python3\n```\n\nThis is the python that have ZMQ installed. \n\nFind which python IPython uses\"\n\n``` bash\n$ head -n1 $(which ipython)\n#!~/anaconda3/bin/python3\n```\n\nCheck that the above python we just got does indeed have ZMQ:\n\n``` bash\n$ ~/anaconda3/bin/python3 -c 'import zmq'\n# Should not complain, if there is ZMQ or print the following if it does not have:\n# Traceback (most recent call last):\n#  File \"<string>\", line 1, in <module>\n# ImportError: No module named 'zmq'\n```\n\nIf we have ZMQ try to install the kernel with this particuart python and give it a specific name just to find it easily\n\n```\n$ ~/anaconda3/bin/python3 -m IPython kernel install --name 'zmqpython' --display-name 'ZMQ Python'\n```\n\nIt should appear in the kernel list: \n\n```\n$ jupyter kernelspec list\nAvailable kernels:\n  haskell      ~/Library/Jupyter/kernels/haskell\n  julia-0.3    ~/Library/Jupyter/kernels/julia-0.3\n  julia-0.4    ~/Library/Jupyter/kernels/julia-0.4\n  julia-0.5    ~/Library/Jupyter/kernels/julia-0.5\n  py34         /usr/local/share/jupyter/kernels/py34\n  python2      /usr/local/share/jupyter/kernels/python2\n  python3      /usr/local/share/jupyter/kernels/python3\n  zmqpython    /usr/local/share/jupyter/kernels/zmqpython\n```\n\nAnd in the `new` dropdown menu in the notebook. \n Jupyter with zmq problem. Not fully working. Updates should be improved.\n I am having an issue that is similar to this one, probably even the same one... although I haven't gotten as far with zmq. \nI'm on Ubuntu 16.04 and installed Jupyter through Anaconda.   The error I'm getting on running many jupyter commands is:  \n\n```\n~/.local/lib/python3.4/site-packages/zmq/backend/cffi/__pycache__/_cffi_ext.c:212:17:   \nfatal error: zmq.h: No such file or directory\ncompilation terminated.\nTraceback (most recent call last):\n...\nImportError: libzmq.so.3: cannot open shared object file: No such file or directory\n```\n\nSo I tried updating `libzmq3-dev` with `apt-get` and also with `pip` and `conda`, but none have proven successful.  I noticed `codebeetle` built it from source, and I was hoping I didn't need to do that.  \n\nThank you in advance, and let me know if I can give you more details. \n Try uninstalling and reinstalling pyzmq.\n Hi, I am having troubles with the same problem:\n\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/bin/jupyter-notebook\", line 7, in <module>\n    from notebook.notebookapp import main\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/notebook/notebookapp.py\", line 31, in <module>\n    from zmq.eventloop import ioloop\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/zmq/**init**.py\", line 34, in <module>\n    from zmq import backend\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/zmq/backend/**init**.py\", line 40, in <module>\n    reraise(*exc_info)\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/zmq/utils/sixcerpt.py\", line 34, in reraise\n    raise value\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/zmq/backend/**init**.py\", line 27, in <module>\n    _ns = select_backend(first)\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/zmq/backend/select.py\", line 27, in select_backend\n    mod = __import__(name, fromlist=public_api)\n  File \"/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/zmq/backend/cython/**init**.py\", line 6, in <module>\n    from . import (constants, error, message, context,\nImportError: cannot import name 'constants'\n","Fixed now. \n","![marked vs select](https://cloud.githubusercontent.com/assets/335567/10652630/0606f852-780d-11e5-804b-4a2d633e19a8.gif)\n It's a bug, you should only be able to mark.\n Hmm, I am not seeing that behavior on master. Refresh cache?\n\nOn Wed, Oct 21, 2015 at 8:06 PM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> It's a bug, you should only be able to mark.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/638#issuecomment-150058316.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Hum I have deactivate my cache globally and run my notebook with --ignore_minified_js=True, but will retry.\n\nEnvoy\u00e9 de mon iPhone\n\n> Le 21 oct. 2015 \u00e0 18:55, \"Brian E. Granger\" notifications@github.com a \u00e9crit :\n> \n> Hmm, I am not seeing that behavior on master. Refresh cache?\n> \n> On Wed, Oct 21, 2015 at 8:06 PM, Jonathan Frederic <notifications@github.com\n> \n> > wrote:\n> > \n> > It's a bug, you should only be able to mark.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/issues/638#issuecomment-150058316.\n> \n> ## \n> \n> Brian E. Granger\n> Associate Professor of Physics and Data Science\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n> \u2014\n> Reply to this email directly or view it on GitHub.\n Hum, cannot reproduce you are right. \n\nClosing, opening another related bug though. \n","If we are going to revert the input color change suggested by @cameronoelsen, we may want him to instead pick a darker marker color.  cc @ellisonbg \n I'm not sure it is worth bikeshedding on a color that will be changed if we redo the color scheme for 5.0 \n Yeah I think thats probably a good idea by @Carreau unless we want a new color. I want to, in a future iteration, get a better color palette that works well in the input cells and the website itself (along with the orange in the jupyter logo)\n Makes sense\n","is that a leftover of IPython thing ? can we check if `SYSTEM_NBEXTENSIONS_DIRS` is set and log a warning ? \n @Carreau how could it be set? It's a module constant.\n sorry, uppercase made me though as environemnt variable. was too tired this morning. \n LGTM\n","Hey,\n\nI totally agree. I searched a bit and I could not find anything. When I start my work I always lose my time to fill all the cells I am using every day: goal, materials and methods, results, imports and initialization statements etc. That is a bit frustrating after some time so this feature would be just great! I do not known when would be the start point for the implementation of this.\n\nRafal\n You don't need to have that in the notebook itself, \n\nI would around notebook extension (like [here](https://github.com/ipython-contrib/IPython-notebook-extensions)) if it already exists.\n\nIt's a matter of writing a loop of `Jupyter.notebook.insert_cell_below(cell_type).set_text('Something')`, and you will have more flexibility as an extension than baked in. \n\nYou can use the content service API if you want to access file on the filesystem,\n\nPlus I suppose you might want to insert template cells in already existing notebooks, so this would definitively be the direction to go. \n Hmm, I will give it a try with an extension. I never have done it though, so I do not know how far I can get with it.\n > Hmm, I will give it a try with an extension. I never have done it though, so I do not know how far I can get with it.\n\nFeel free to ask question, the docs for extension is a bit lacking, I wrote [that](https://carreau.gitbooks.io/jupyter-book/content/) some time ago but it's not that up to date. \n\nKeep us informed of what you come up with !\n i'll be happy to test and make feedbacks or patches if necessary. @Carreau You pointed out a repository with extensions, but that's unofficial. Is there any plan from the jupyter community to maintain a repository with extensions? I think that would increase the visibility of such efforts and I'm pretty convinced that this one would be one of the top used extensions.\n Thanks for support. I will check how I can get around with time and try to implement this.\n > Is there any plan from the jupyter community to maintain a repository with extensions\n\nNot from the official team, but I am part of unofficial repo I pointed you too. \nThe time we spend in maintaining the core itself is more than enough work, and\nwe do not want to commit to maintain all extensions. \n\nIn the other direction, if the repo is well maintained, we woudl be happy to point user to it., and potentially link it from the official doc. \n Hi! Im also looking for this solution, @Carreau where would you insert the line\n\n`Jupyter.notebook.insert_cell_below(cell_type).set_text('Something')`\n\nOr where would I find documentation about where to insert it? ;)\n","Hey Carreau. I noticed on the google forum you said the code would need a significant refactor, and MinRK said it involved storing outputs on the server. In my case I'm ok with losing the outputs during the disconnect. I just need to be able to reconnect the browser session to the kernel to get new outputs and to get at the data and code I've loaded. Kernel/Reconnect doesn't do it. I've also tried closing the tab and opening a new one from the Jupyter base page.\n\nThis is fairly important for me. I live in a rural area with a poor internet connection and my notebook takes about 8 hours to load. I'm pretty well guaranteed to have an interruption during that time. \n Still looking into this. This is currently just a problem for me on Jupyter, but I'm more interested in getting it solved for JupyterHub. I'm planning to use it to instruct a class at the university and students losing access to their assignment work through a disrupted connection is not an option.\n\n[mosh](https://mosh.org/) have solved this problem on terminals and it seems to me that using mosh's SSP  (State Synchronization Protocol) with Speculation adapted to Jupyter Notebook requirements would be the best solution to this problem (see the [mosh paper](https://mosh.org/mosh-paper.pdf)).\n\nIf you want to hand this problem off to JupyterHub that's ok with me, but others may like to see a solution for Jupyter as well. \n This isn't really a JupyterHub problem. It should be fixed in the notebook (specifically JupyterLab), hopefully before too long.\n This feature would be great! Loosing the output of a Jupyter notebook if you are not connected to the hosting computer is a problem, although you can do some hacks. Having the capacity of recovering it would be great.","Hum I am not sure how to profile a python process on windows. \nFor comparison I'm around 35 Mb stable on OS X. \n\nMight be possible to use something like https://pypi.python.org/pypi/memory_profiler , but I have never used it. \n I experienced something similar a while back, where starting a python 3 kernel would use up ~2GB of memory for no particular reason. Can you verify that it is something having to do with the notebook server as opposed to a kernel -- i.e., does the process appear if you have just the notebook server running and no kernels? Or does it only appear once you start running kernels?\n I have the same problem, basically. \n I am seeing the same problem. My notebook server has been running for several days and now uses 5GB (5,056,764K) of memory.\n\n**Note**: by including the \"Command Line\" column in the Task Manager Processes tab, you can see what script each \"python.exe\" process actually is. This way you can tell which python processes are kernels vs the notebook server.\n\nThe guilty process is `C:\\Anaconda3\\python.exe \"C:\\Anaconda3\\Scripts\\jupyter-notebook-script.py\"`\n\nI agree with @jorisvandenbossche, the server should not be using this much memory. This is not good. :(\n\nI don't like needing to restart my server every few days. To do this I have to find a time when all the notebooks can be closed; but at any given time I'm always working on overlapping tasks. \n\nIf anyone needs more information I would be happy to try to help. Thanks!\n Could this be related to https://github.com/ipython/ipython/issues/8267?\n Also possibly related: http://stackoverflow.com/questions/35494282/freeing-memory-tied-to-errors-in-ipython-notebook\n I am seeing the same thing on OSX.  My workflow involves pointing the notebook at a directory and running all cells below, over and over.  There are usually 5-10 matplotlib inline plots generated each run. I also set the savefig.dpi to 300, which pumps up the size of the figures. Activity Monitor currently shows my notebook server process with 3.58 GB memory used and 2.69 GB compressed which means most of the memory is not being accessed again after it is used initially.  Could it be something with the handling of inline plots?  I don't see the same memory usage when just doing some calculations without the plots. (Anaconda 2.5.0, jupyter 4.0.6, python 3.4, OSX 10.11.4)\n Can you upgrade jsonschema to 2.5.1:\n\n```\n pip install --upgrade jsonschema\n```\n\n? Anaconda still includes jsonschema 2.4, which has a major memory leak bug.\n I upgraded to jsonschema 2.5.1 as you suggested. That seems to fix the problem in my initial testing. I will keep monitoring memory usage and let you know if there is still a problem. Thanks!\n Thank you @minrk for the suggestion. I also updated jsonschema. I'll let you know what I see. \n Update: a couple weeks later and my notebook server processes are staying under a hundred MB with jsonschema 2.5.1.\n I am also not noticing this issue any more after updating jsonschema. \nSo closing this!\n","works as advertise and does not seem to break anything on Chrome. \n\nThanks !\n Thanks @Carreau \n","Someone want to confirm the fix?\n Can I self-confirm ?\n\n![ffcp](https://cloud.githubusercontent.com/assets/335567/10698885/1df00bf0-7968-11e5-86a8-0dbca92b9834.gif)\n @Carreau LGTM :sunflower: \n I'm checking this out now...\n Tested, fixes the problem for me!  Thanks @Carreau !\n","Stange, the negative margin should account for this.  Chrome ?  FF?\n I can't reproduce this\n\nChrome:\n\n![nobug](https://cloud.githubusercontent.com/assets/3292874/10733899/f41ee8ca-7bbd-11e5-99d8-2ca8fd03ed41.gif)\n\nFireFox:\n\n![nobugff](https://cloud.githubusercontent.com/assets/3292874/10733905/fae73464-7bbd-11e5-8075-1969140d823b.gif)\n\nIs is possible that you have some custom CSS that could be causing the problem?  Or caching/rebuilding CSS problem?\n You look at the wrong border:\n\n![move](https://cloud.githubusercontent.com/assets/335567/10735295/814f3b90-7bc4-11e5-8594-72dbf553e1e0.gif)\n Note, your prompt should not be light blue, or **you** have a caching problem. \n I can reproduce this on the R border of the cell.\n\nOn Mon, Oct 26, 2015 at 12:33 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Note, your prompt should not be light blue, or _you_ have a caching\n> problem.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/645#issuecomment-151199528.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Ah I wasn't looking at the right, sorry.  Should be fixed in #661\n","Is this an anaconda python2 install by any chance ? \n\nIf so, I'm 99% certain that if you try with an anaconda Python3 you will not have any problem. \n yes\n\n```\nC:\\Anaconda>python --version\nPython 2.7.10 :: Anaconda 2.3.0 (64-bit)\n```\n I'll try python3 tomorrow. Bedtime now :-)\n Well, if you can afford to migrate to anaconda python3 I would definitively  do that (you can still use Python2 in conda envs), I think I have a fix availlable but it will take a few days (weeks ?) to be rolled out. \n\nGood night in Europe. \n well, the windows laptop is just for playing around. I do my real work on my linux-ditto. I'll upgrade and test and closes this one. God night :-)\n No need to close we should still try to fix it. We'll close once the fix/workaround is in. \n","@JaChKo Actually, you have not found a bug but simply a difference in what output is displayed when using python vs. ipython.\n\nYou may wish to recheck your output since 0, 1, 2, 3, 4 would be the appropriate output when using python. See pythontutor.com to visualize the steps that the code example is executing.\n\nThe difference in output that you are seeing when using the python console vs. ipython has to do with what is being displayed to the user. There is no difference in the underlying calculation.\n\ncc/@carreau Please tag as not a bug. It may be worthwhile updating the IPython documentation to clarify as a wishlist item.\n Tagging as wishlist. \n\nMore especially, IPython will consider the return value of the ast expression of the Abstract Syntax Tree as the output value for current cell. In a notebook it might be difficult to see but in a pure IPython shell you can see the difference between printing and returning:\n\n```\nIn [1]: 1\nOut[1]: 1\n\nIn [2]: print(1)\n1\n```\n\nIn the second case you do not get a `Out[ ]`.\n\nIIRC the distinction is on purpose as Python repl does not allow multiple statement:\n\n```\n>>> for i in range(5):\n...     i\n... 1\n  File \"<stdin>\", line 3\n    1\n    ^\nSyntaxError: invalid syntax\n```\n\nwhile IPython does:\n\n```\nIn [1]: for i in range(5):\n   ...:     i\n   ...: 1\n   ...:\nOut[1]: 1\n```\n\nAnd doing same behavior than Python repl too often flood the screnn.\n\nAs you are using python 3 and generator be aware that `range()` is already a generator [technically more that that but not the goal here]. So your `(x for x in range(5))` is basically reimplementing range :-). Though it is a nice start to work with generator !\n\nHave fun with it, and feel free to ask more question. \n\nMarking as wishlist to improve our documentation !\n Thanks for the clearification and also the remark on range. Sorry for bothering you guys\n No problem, our job is also to help beginners, so not bothering. \nI'll reopen to think about improving our documentation with respect to this point. \n\nThanks !\n","? I don't understand the title of this issue, sorry.  You split a cell and what leaves what where?  Are you saying that when you split a cell only one cell is left marked?\n once-> one typo. \n\nWhen I split a cell into 2 other cells the second one have is still marked in blue. \n\nI expect the selection to be empty:\n\n![blue](https://cloud.githubusercontent.com/assets/335567/10706762/b8b8bdd6-799e-11e5-8e87-24b2021201ca.gif)\n Ah yeah, that is weird.\n There are a number of other marked state issues that we should fix before\n4.1.\n\nOn Fri, Oct 23, 2015 at 7:05 PM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> Ah yeah, that is weird.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/648#issuecomment-150712482.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","@gnestor @Carreau @minrk do we understand how to fix this, and can it be done without interfering with other keyboard functionality? This appears to be fixed in master. When the dialog is opened, the restart button is focused, and I can select other buttons with tab/shift-tab. Great. I thought I had tested it and found it still not working, but I just went to test again and it seems to work.","IPython 3.1 or master? Can you share any of the older notebooks? What version are you upgrading from? Are you using conda or pip? What platform, Python version, and how did you install IPython?\n\nThe r magic was removed from IPython a while ago. It's part of rpy2 now.\n Linux. Using conda, which brings us to IPython 3.0.0. Just did `conda update` to the latest version of Anaconda. \n\nWhen creating a new notebook and using `%load_ext rmagic`, I get this warning:\n\n```\n/home/jeffrey_alstott/anaconda3/lib/python3.4/site-packages/IPython/extensions/rmagic.py:693: UserWarning: The rmagic extension in IPython is deprecated in favour of rpy2.ipython. If available, that will be loaded instead.\nhttp://rpy.sourceforge.net/\n  warnings.warn(\"The rmagic extension in IPython is deprecated in favour of \"\n```\n\nUnfortunately the notebooks themselves contain sensitive data, which of course adds to the consternation of not being able to access them. I may be able to find a similarly non-working notebook without sensitive data and upload it on nbviewer? Or to somewhere else?\n As the warning message states, the rmagic that ships with IPython is deprecated. That functionality is now part of rpy2, available as `%load_ext rpy2.ipython`.\n\nUpload wherever you are most comfortable. [gists](https://gist.github.com/) are common.  nbviewer doesn't host anything, it's just a renderer of publicly available URLs.\n\nCan you post more of the javascript console output when it fails? Can you open the notebook in an incognito/private browsing window, and see if that works? Do you have anything in custom.js?\n Good thinking on the custom.js. I do in fact have things there, and they\nare throwing errors:\n\n```\n:8888/static/notebook/js/celltoolbarpresets/default.js?v=20150503182811:48\nDefault extension for cell metadata editing loaded.\n:8888/static/notebook/js/celltoolbarpresets/rawcell.js?v=20150503182811:82\nRaw Cell Format toolbar preset loaded.\n:8888/static/notebook/js/celltoolbarpresets/slideshow.js?v=20150503182811:43\nSlideshow extension for metadata editing loaded.\n:8888/static/base/js/utils.js?v=20150503182811:29 Loaded extension:\nusability/python-markdown\n:8888/nbextensions/usability/execute_time/ExecuteTime.js?v=20150503182811:21\npatching codecell to trigger ExecuteCell.ExecuteTime\n:8888/nbextensions/usability/execute_time/ExecuteTime.js?v=20150503182811:178\nExecute Timings loaded\n:8888/static/base/js/utils.js?v=20150503182811:29 Loaded extension:\nusability/execute_time/ExecuteTime\n:8888/static/base/js/utils.js?v=20150503182811:37 Failed to load\nextension(s): Array[1] TypeError: Cannot read property 'toLowerCase' of\nundefined\n:8888/static/base/js/utils.js?v=20150503182811:29 Loaded extension:\nusability/codefolding/codefolding\nhttp://localhost:8888/static/custom/usability/execute_time/ExecuteTime.css\nFailed to load resource: the server responded with a status of 404 (Not\nFound)\nhttp://localhost:8888/static/components/codemirror/lib/codemirror?v=20150503182811\nFailed to load resource: the server responded with a status of 404 (Not\nFound)\nrequire.js:141 Uncaught Error: Script error for:\n/static/components/codemirror/lib/codemirror\nhttp://requirejs.org/docs/errors.html#scripterror\nhttp://localhost:8888/static/components/codemirror/addon/fold/foldcode?v=20150503182811\nFailed to load resource: the server responded with a status of 404 (Not\nFound)\nrequire.js:141 Uncaught Error: Script error for:\n/static/components/codemirror/addon/fold/foldcode\nhttp://requirejs.org/docs/errors.html#scripterror\n:8888/static/notebook/js/notebook.js?v=20150503182811:2119 Notebook failed\nto load from JSON: ReferenceError: marked is not defined\n:8888/static/services/sessions/session.js?v=20150503182811:52 Session:\nkernel_created (487e0ecc-e3dc-4327-a983-4b179c5056d3)\n:8888/static/services/kernels/kernel.js?v=20150503182811:436 Starting\nWebSockets:\nws://localhost:8888/api/kernels/6f04d9d4-77af-4a74-b373-7b6ee96d0a40\n:8888/static/services/kernels/kernel.js?v=20150503182811:97 Kernel:\nkernel_connected (6f04d9d4-77af-4a74-b373-7b6ee96d0a40)\n:8888/static/services/kernels/kernel.js?v=20150503182811:97 Kernel:\nkernel_ready (6f04d9d4-77af-4a74-b373-7b6ee96d0a40)\nhttp://localhost:8888/static/custom/usability/execute_time/ExecuteTime.css\nFailed to load resource: the server responded with a status of 404 (Not\nFound)\nunderscore-min.map:1 GET\nhttp://localhost:8888/static/components/underscore/underscore-min.map 404\n(Not Found)\nbackbone-min.map:1 GET\nhttp://localhost:8888/static/components/backbone/backbone-min.map 404 (Not\nFound)\n```\n\nI added these ages ago. What is the right way to turn these off with the\ncurrent Jupyter setup?\n\nOn Sun, May 3, 2015 at 11:24 PM, Min RK notifications@github.com wrote:\n\n> As the warning message states, the rmagic that ships with IPython is\n> deprecated. That functionality is now part of rpy2, available as %load_ext\n> rpy2.ipython.\n> \n> Upload wherever you are most comfortable. gists https://gist.github.com/\n> are common. nbviewer doesn't host anything, it's just a renderer of\n> publicly available URLs.\n> \n> Can you post more of the javascript console output when it fails? Can you\n> open the notebook in an incognito/private browsing window, and see if that\n> works? Do you have anything in custom.js?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/jupyter_notebook/issues/65#issuecomment-98494683\n> .\n And now I've figured it out. In order to remove this problem, I just needed\nto deactivate two /static/custom/custom.js extensions I had:\n\n```\nIPython.load_extensions('usability/execute_time/ExecuteTime')\nIPython.load_extensions('usability/python-markdown')\n```\n\nCommenting out both of these lines fixed the problem.\n\nOn Sun, May 3, 2015 at 11:29 PM, Jeff Alstott jeffalstott@gmail.com wrote:\n\n> Good thinking on the custom.js. I do in fact have things there, and they\n> are throwing errors:\n> \n> ```\n> :8888/static/notebook/js/celltoolbarpresets/default.js?v=20150503182811:48\n> Default extension for cell metadata editing loaded.\n> :8888/static/notebook/js/celltoolbarpresets/rawcell.js?v=20150503182811:82\n> Raw Cell Format toolbar preset loaded.\n> :8888/static/notebook/js/celltoolbarpresets/slideshow.js?v=20150503182811:43\n> Slideshow extension for metadata editing loaded.\n> :8888/static/base/js/utils.js?v=20150503182811:29 Loaded extension:\n> usability/python-markdown\n> :8888/nbextensions/usability/execute_time/ExecuteTime.js?v=20150503182811:21\n> patching codecell to trigger ExecuteCell.ExecuteTime\n> :8888/nbextensions/usability/execute_time/ExecuteTime.js?v=20150503182811:178\n> Execute Timings loaded\n> :8888/static/base/js/utils.js?v=20150503182811:29 Loaded extension:\n> usability/execute_time/ExecuteTime\n> :8888/static/base/js/utils.js?v=20150503182811:37 Failed to load\n> extension(s): Array[1] TypeError: Cannot read property 'toLowerCase' of\n> undefined\n> :8888/static/base/js/utils.js?v=20150503182811:29 Loaded extension:\n> usability/codefolding/codefolding\n> http://localhost:8888/static/custom/usability/execute_time/ExecuteTime.css\n> Failed to load resource: the server responded with a status of 404 (Not\n> Found)\n> \n> http://localhost:8888/static/components/codemirror/lib/codemirror?v=20150503182811\n> Failed to load resource: the server responded with a status of 404 (Not\n> Found)\n> require.js:141 Uncaught Error: Script error for:\n> /static/components/codemirror/lib/codemirror\n> http://requirejs.org/docs/errors.html#scripterror\n> \n> http://localhost:8888/static/components/codemirror/addon/fold/foldcode?v=20150503182811\n> Failed to load resource: the server responded with a status of 404 (Not\n> Found)\n> require.js:141 Uncaught Error: Script error for:\n> /static/components/codemirror/addon/fold/foldcode\n> http://requirejs.org/docs/errors.html#scripterror\n> :8888/static/notebook/js/notebook.js?v=20150503182811:2119 Notebook failed\n> to load from JSON: ReferenceError: marked is not defined\n> :8888/static/services/sessions/session.js?v=20150503182811:52 Session:\n> kernel_created (487e0ecc-e3dc-4327-a983-4b179c5056d3)\n> :8888/static/services/kernels/kernel.js?v=20150503182811:436 Starting\n> WebSockets:\n> ws://localhost:8888/api/kernels/6f04d9d4-77af-4a74-b373-7b6ee96d0a40\n> :8888/static/services/kernels/kernel.js?v=20150503182811:97 Kernel:\n> kernel_connected (6f04d9d4-77af-4a74-b373-7b6ee96d0a40)\n> :8888/static/services/kernels/kernel.js?v=20150503182811:97 Kernel:\n> kernel_ready (6f04d9d4-77af-4a74-b373-7b6ee96d0a40)\n> http://localhost:8888/static/custom/usability/execute_time/ExecuteTime.css\n> Failed to load resource: the server responded with a status of 404 (Not\n> Found)\n> underscore-min.map:1 GET\n> http://localhost:8888/static/components/underscore/underscore-min.map 404\n> (Not Found)\n> backbone-min.map:1 GET\n> http://localhost:8888/static/components/backbone/backbone-min.map 404\n> (Not Found)\n> ```\n> \n> I added these ages ago. What is the right way to turn these off with the\n> current Jupyter setup?\n> \n> On Sun, May 3, 2015 at 11:24 PM, Min RK notifications@github.com wrote:\n> \n> > As the warning message states, the rmagic that ships with IPython is\n> > deprecated. That functionality is now part of rpy2, available as %load_ext\n> > rpy2.ipython.\n> > \n> > Upload wherever you are most comfortable. gists\n> > https://gist.github.com/ are common. nbviewer doesn't host anything,\n> > it's just a renderer of publicly available URLs.\n> > \n> > Can you post more of the javascript console output when it fails? Can you\n> > open the notebook in an incognito/private browsing window, and see if that\n> > works? Do you have anything in custom.js?\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/jupyter_notebook/issues/65#issuecomment-98494683\n> > .\n","Hi @glider-gun. Thank you for the detailed issue report. The details are really helpful to our developers.\n\nI believe that the scenario and error message that you are seeing is hitting the default `max_body_size` limitation of Tornado (which is a dependency of Jupyter notebook) https://github.com/tornadoweb/tornado/blob/eaf34865a63460cdd64abd1ae2c8835b174c6e93/tornado/http1connection.py#L537\n\n@glider-gun I don't know if using Python 3 and a more recent version of IPython would have the same limitation. If you are able to test easily, please do. If not, no worries.\n\n@minrk @Carreau Is there a way to workaround the default max_body_size limit by chunking the body (https://github.com/tornadoweb/tornado/blob/eaf34865a63460cdd64abd1ae2c8835b174c6e93/tornado/http1connection.py#L346) or setting a different body_size limit (https://github.com/tornadoweb/tornado/blob/eaf34865a63460cdd64abd1ae2c8835b174c6e93/tornado/http1connection.py#L324)?\n We might want to look at this problem while working on https://github.com/jupyter/notebook/pull/536\n Thank you for quick reply!\nI tried the same thing with IPython 4.0.0 for both python 2.7.10/3.4.3.\nAnd similarly, I could save until with 88 plots and not with 89 plots. File size for the notebooks were similar.\n\n---\n\nenvironments for python 2.7.10 with IPython 4.0.0:\n\n```\n$ python -c \"import IPython; print(IPython.sys_info())\"\n{'commit_hash': u'f534027',\n 'commit_source': 'installation',\n 'default_encoding': 'UTF-8',\n 'ipython_path': '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/IPython',\n 'ipython_version': '4.0.0',\n 'os_name': 'posix',\n 'platform': 'Darwin-13.4.0-x86_64-i386-64bit',\n 'sys_executable': '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python',\n 'sys_platform': 'darwin',\n 'sys_version': '2.7.10 (default, Aug 26 2015, 18:15:57) \\n[GCC 4.2.1 Compatible Apple LLVM 5.1 (clang-503.0.40)]'}\n```\n\nOS, browser, all library versions are same as my first comment\n\n---\n\nenvironments for python 3.4.3 with IPython 4.0.0:\n\n```\n$ python -c \"import IPython; print(IPython.sys_info())\"\n{'commit_hash': 'f534027',\n 'commit_source': 'installation',\n 'default_encoding': 'UTF-8',\n 'ipython_path': '/Users/glidergun/.pyenv/versions/miniconda3-3.16.0/lib/python3.4/site-packages/IPython',\n 'ipython_version': '4.0.0',\n 'os_name': 'posix',\n 'platform': 'Darwin-13.4.0-x86_64-i386-64bit',\n 'sys_executable': '/Users/glidergun/.pyenv/versions/miniconda3-3.16.0/bin/python',\n 'sys_platform': 'darwin',\n 'sys_version': '3.4.3 |Continuum Analytics, Inc.| (default, Oct 20 2015, '\n                '14:27:51) \\n'\n                '[GCC 4.2.1 (Apple Inc. build 5577)]'}\n```\n\n(the user name part in this quote is replaced by hand)\nOS, browser, all library version are same except numpy was 1.10.1\n @glider-gun Thanks for the additional info. For now, I recommend keeping an eye on #536 as suggested by @Carreau.\n\nIn the interim, I wonder if saving more frequently would be a reasonable workaround to the limitation.\n I see, thank you.\nI'm afraid it wouldn't workaround after I noticed I exceeded the limitation, though it would save more cells from browser crash or so in that situation.\n It looks like tornado imposes a maximum size of 100MB for HTTP requests by default, and I don't think we currently override that anywhere:\nhttps://github.com/tornadoweb/tornado/blob/a97ec9569b1995d8aa3da0a7f499510bffc006a3/tornado/iostream.py#L154\n\nIn the long run, the fix will be to maintain notebook models on the server, so we don't have to send the whole notebook over HTTP at once. But we should probably increase that limit as an interim measure.\n Any solution? I have a large notebook that I want to save.\n @davidcortesortuno and I are also having this problem with Holoviews HoloMaps, where it's quite easy to go over 100mb.\n We temporarily fixed this by modifying the `tornado/iostream.py` file, as suggested before by @takluyver . For example, by doing `self.max_buffer_size = 1048576000`\n Having the same problem here... Shall we bump the limit up for 5.0? Does anyone have a guide as to what a sensible limit might be? You should be able to set a larger `max_body_size` or `max_buffer_size` by providing the `torando_settings` flag or by setting it in `jupyter_notebook_config.py`:\r\n\r\n```\r\njupyter notebook --NotebookApp.tornado_settings=\"{'max_body_size': 104857600, 'max_buffer_size': 104857600}\"\r\n```\r\n\r\nI don't have a good notebook to test with, but the rationale:\r\n\r\n* `max_body_size` and `max_buffer_size` are now both init arguments for `HTTPServer`: https://github.com/tornadoweb/tornado/blob/master/tornado/httpserver.py#L136\r\n* `--tornado_settings` flag for `jupyter notebook`: https://github.com/jupyter/notebook/blob/90d30d2963da61137121b4118ce2db5d5a829a15/notebook/notebookapp.py#L686\r\n* `self.web_app` is created using `terminado_settings`: https://github.com/jupyter/notebook/blob/90d30d2963da61137121b4118ce2db5d5a829a15/notebook/notebookapp.py#L1102\r\n* HTTPServer is initialized using `self.web_app`: https://github.com/jupyter/notebook/blob/90d30d2963da61137121b4118ce2db5d5a829a15/notebook/notebookapp.py#L1102 #2139 should increase the buffer sizes to 512 MiB, based on nothing much. It doesn't really fix the problem, but it pushes it further out. @Horta @ryanpepper @2426021684 Can you try starting the notebook with the `--NotebookApp.tornado_settings` flag to test if that resolves your issue?\r\n\r\n```\r\njupyter notebook --NotebookApp.tornado_settings=\"{'max_body_size': 104857600, 'max_buffer_size': 104857600}\"\r\n``` @gnestor That didn't help me, I'm still getting a `Request Entity Too Large` message.\r\n\r\nOh, also I'm doing this over HTTPS if that makes a difference. @SamuelMarks Can you try upgrading to notebook 5.0.0rc2 (`pip install notebook --force-reinstall --no-deps --ignore-installed --pre`) and see if the new rate limits help? @gnestor Weird, can't get it to work at all now.\r\n\r\nEven tried in a new virtualenv:\r\n```\r\n$ pip install --pre jupyter[all] notebook\r\n```\r\n\r\nBut still getting:\r\n```\r\n$ jupyter notebook\r\nError executing Jupyter command 'notebook': [Errno 2] No such file or directory\r\n```\r\n\r\nEdit: wait am I meant to use `python3 -m notebook` now instead? Did you try just `pip install --pre notebook`? @gnestor - Okay, got it to work with latest `--pre` of `notebook`.\r\n\r\nSame `Request Entity Too Large` error.","@dsblank @jhamrick is it worth abstracting into a util function that would be useful for teaching where the menus are ?\n This is a cool idea.  I don't think I've ever seen another program do something like this, it's a deprecation warning for our UI.   However, we should definitely remove this button for 4.2 or 5.0- I don't think it makes sense to have it linger around forever.\n I think we can even do something nicer with @sccolbert's phosphor menus, I just don't want to implement it now if we will have better menus in a few month. \n\nIn particular I think we can use a 2cd color to mimic the fact the the mouse hovers elements it will not click onto, like what you see when I actually use my mouse. \n\nNote that in the GIF the menu disappearing might look irregular, but that's just because the GIF is at 8 fps.\n I like this idea for deprecating UI. We won't always be able to do\nsomething like this, but when we can, it is great.\n\nI haven't looked at the code, but love the idea and demo above.\n\nOn Sat, Oct 24, 2015 at 4:42 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I think we can even do something nicer with @sccolbert\n> https://github.com/sccolbert's phosphor menus, I just don't want to\n> implement it now if we will have better menus in a few month.\n> \n> In particular I think we can use a 2cd color to mimic the fact the the\n> mouse hovers elements it will not click onto, like what you see when I\n> actually use my mouse.\n> \n> Note that in the GIF the menu disappearing might look irregular, but\n> that's just because the GIF is at 8 fps.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/651#issuecomment-150849427.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Nice. It seems a bit like the button should disappear after showing where its new home is. Or should it stick around?\n it seem like if we make it disappear, we would need to persist the hidden state. \nWhich I don't want to start doing.\n Fair enough - this is probably a good compromise for a short-lived deprecation.\n Works as advertised.\n","There are millions of Jupyter Notebooks in the wild now. Because of that,\nwe are taking a moderately conservative stance on evolving the notebook\ndocument format. For us to create a new cell type, we would need to be\nconvinced that most of our users need it and that we can support it in a\nrobust way across all the different contexts that notebooks are used in\n(GitHub, nbviewer, live notebook, nbconvert, etc).\n\nYou are obviously free to create your own new notebook format using our\ncode (it is open source) and your own ideas+code.\n\nHowever, we will likely be a bit protective about the branding and\ntrademark aspects of this. Using the name \"Jupyter\" to describe a JSON\nnotebook format spec or document that doesn't follow our official JSON spec\nwould confuse users. Thus, we would ask developers building such things to\navoid using the name \"Jupyter\" to describe those documents or spec. Things\nlike the filename extension should also be different so tools that work\nwith notebooks will not confuse the different formats.\n\nCheers,\n\nBrian\n\nOn Sun, Oct 25, 2015 at 6:45 AM, Christophe BAL notifications@github.com\nwrote:\n\n> Is it possible to add other formatting language than Markdown ? If not, I\n> think it could be useful to allow to customize the formatting tool as we\n> can now use a special kernel other than Python.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/652.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I understand your position but you could have done like Atom which allows a lot of customization.\n\nOne last question : where are the parts concerned with markdown managements ? \n Markdown is handled in nbformat (`cell_type='markdown'`) and in the notebook javascript (`class MarkdownCell`) and in nbconvert (handling of `cell_type='markdown'`).\n For almost all parts of our architecture other than 1) notebook document\nformat and 2) message protocol we are doing heavy work to make it\n_extremely_ extensible - at least as much as Atom...more details to follow\non a roadmap soon. The reason we are conservative on those 2 points is that\ntheir values is directly related to everyone agreeing on their\nspecifications.\n\nCheers,\n\nBrian\n\nOn Tue, Oct 27, 2015 at 8:24 AM, Min RK notifications@github.com wrote:\n\n> Markdown is handled in nbformat (cell_type='markdown') and in the\n> notebook javascript (class MarkdownCell) and in nbconvert (handling of\n> cell_type='markdown').\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/652#issuecomment-151474082.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg Ok. My actual work consists in producing a more easy to use ASCII langage than Markdown (very natural syntax for math, table as datas, simple grammar of the language). See you soon with a more concrete situation and not an incoming one. ;-)\n\n@minrk : thanks. I will play with all of this. \n IPython has the concept of cell magics, which basically turn a python code cell into a whatever-cell. Would it be enough to have something similar here, but for the jupyter-notebook?\n This could be a big first step. But I think that a kernel like feature but for formatting could be very useful... At least for me.  ;-)\n","I'm writing a blog post on blog.jupyter.org with @jdfreder to underline the new feature. \nWe can extract things from there. \n Cool!\n","@Carreau this is what you suggested, I actually prefer the alternative #655 coupled with a hotkey for unmark all.\n Did you intend to remove all the whitespace?\n I will try these two out...\n\nOn Mon, Oct 26, 2015 at 10:53 AM, Steven Silvester <notifications@github.com\n\n> wrote:\n> \n> Did you intend to remove all the whitespace?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/654#issuecomment-151163845.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Did you intend to remove all the whitespace?\n\nArg!  New atom setup, and I forgot to disable the whitespace removal.  New commit on its way, sorry.\n White space should be fixed\n","Personally, I prefer this to #654, especially when coupled with a hotkey to unmark all.\n :+1: for this version.\n +1, I agree that this is more like what I would expect the behavior to be.\n > +1, esp. if you fix the commit to only include the actual code change.\n\nFixed :)  Stupid atom whitespace package - on a new install of atom.\n I like this approach. Let's wait on the keyboard shortcut for unmarking all. There is a command for that that users can access from the palette.\n @ellisonbg see #657\n @Carreau or @minrk - I am +1 on merging this rather than the alternative #654 - thoughts?\n I'm fine with this. \n\nNo strong feeling on this vs #654 \n Oh... self merge :-) \n > self merge :-)\n\nNot `self.merge`, `this.merge` ;)\n","Related to #655 \n","@ellisonbg opinion here?\n +1, we need a way to hide action, from command palette. (minor comment though) \n We can't use ESC for this as it enter command mode. If you mark cells, enter edit mode and then try to go back to command mode, this will unmark instead. I think we should wait on the keyboard shortcut...\n > We can't use ESC for this as it enter command mode. If you mark cells, enter edit mode and then try to go back to command mode, this will unmark instead. I think we should wait on the keyboard shortcut...\n\nHuh?  It shouldn't be doing that.  This kbshortcut is a command mode shortcut, not edit mode.  When you escape out of edit mode, it should not execute the command mode shortcut for escape - if so that's another, separate bug.  Did you witness this buggy behavior?\n Well with Jess being also +1, and this working as expected I'm going to merge to actually have that in for more testing. \n sweet\n sounds good\n\nOn Mon, Oct 26, 2015 at 2:37 PM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> sweet\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/657#issuecomment-151241997.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","@willingc \n I'm merging and reopening #653 to actually put longer information in the documentation. \n Shoot, merged before I could `this.merge` ;)\n","Hi @pidpawel , thanks for the feedback.  The Jupyter org doesn't actually maintain any kernels.  That said, most of the devs in the Jupyter org are also members of the IPython org, which is where we maintain the Python kernel.  We encourage our users to write their own kernels by having a well documented API and providing a simple wrapper kernel base class.\n You can find a list of already available kernels here: https://github.com/ipython/ipython/wiki/IPython-kernels-for-other-languages. If  OpenSCAD implement the protocol it should just work out of the box without us having to do anything.  Thanks !\n","We're generally resistant to adding new cell types, because that involves changing the notebook format - I think we should work out how to do this as an extension.\n The error is because this is not a notebook according to nbformat. There is a schema describing what cell types can exist and what form they may have. Adding a cell type in the UI means you are no longer writing v4 notebooks, and the schema and all other notebook-consuming applications must be updated, versions revved, and backward-compatibility warnings issued.\n\nNew cell types are major changes that have effects in many projects - nbformat, nbconvert, nbviewer, etc., and are not taken lightly. They indicate a major backward-incompatible change. I would doubt that mind-maps _as a cell type_ are likely to cross the threshold of a feature that we can support.\n You can also most likely do the same with a `%mindmap`  magic I guess. I'm goint to close but you can continue to comment and reopen later. \n @takluyver: That's a great idea ... I didn't even realize there was such a thing as extensions. Any hints as to where I should get started with that? I will try to refactor this as an extension.\n\n@minrk: Thanks for the feedback ... it makes sense that this wouldn't be part of the core, knowing that there's an extension system.\n\n@Carreau: I'll look into that. Would that go into a raw cell, or as a directive in a markdown cell?\n There's a couple of different extension mechanisms - @Carreau was suggesting that you do it as a kernel extension ([docs here](http://ipython.org/ipython-doc/stable/config/extensions/index.html#writing-extensions)) - that way you'd write the mindmap input in a Python cell, and the mindmap would appear as output when you run it.\n\nNeater but possibly more complex would be doing it as a frontend extension. I don't think we've really documented this yet, but there are examples here: https://github.com/ipython-contrib/IPython-notebook-extensions/wiki/Home_3x\n If you are only interested in IPython, the `%%mindmap` idea is probably the easiest to get off the ground. If you want this available in notebooks with any kernel, a raw cell with a mindmap mime-type is probably the way to go. That would be a bit of frontier development, so definitely stay in touch here or [on gitter](https://gitter.im/jupyter/jupyter_notebook).\n After taking a look at the examples, I feel like I would need to know a lot more about this project to do this right. I didn't see anything that I could use as a starting point. I will poke around a little more this weekend, but I sense that I will end up keeping my fork and using my own build for awhile.\n\nThanks for the ideas. I'll be keeping my eye out for good front end examples.\n","I'm moving this to backlog - docs improvements are always welcome, but I want to make 5.0 happen!","Action shot:\n\n![bugfix](https://cloud.githubusercontent.com/assets/3292874/10736103/6af859e0-7bc8-11e5-9dca-f935befe679f.gif)\n\n@Carreau @ellisonbg \n @Carreau last commit uses your padding fix\n Haha you couldn't `this.merge()`\n","I can help out here if someone can point me to where the doc to edit lives. Are we talking about just extending the changelog descriptions or the doc site or something else?\n Docs are in the [docs folder](https://github.com/jupyter/notebook/tree/master/docs/source), auto published [there](http://jupyter-notebook.readthedocs.org/en/latest/) once merged in master. \n\nI think Min already did a bit of work [there](https://github.com/jupyter/notebook/pull/786).\n\nThanks !\n\n(also tell us which incompatibility you have with 4.1)\n I got everything I could think of in #786, but if anyone has other things I missed, by all means PR away!\n We can likely have section for each of these things that describe in more details how to use them (like shortcut and position in the menu, icon in toolbar..)\n Advertise the tool for generating certificate and password. \n Still planning to take a crack at this tonight or tomorrow when I have time. (But don't let me hold anything up if you're looking to get it done sooner!)\n > Still planning to take a crack at this tonight or tomorrow when I have time. (But don't let me hold anything up if you're looking to get it done sooner!)\n\nDon't worry we can document during beta phase so we have 2 weeks :-) \n Perhaps this should be a new documentation issue or part of a blog post on 4.1. The GIF here demonstrates copy and pasting a cell using the new command pallette. At the end, a cell is deleted using command DD (though the GIF doesn't reflect this well - a brief screencast with audio would be better. It could be helpful as folks go through the beta period to make small GIFs of some of these items. Perhaps adding a GIFs folder to the docs source or more simply a GIF issue where folks could place their GIFs. FWIW, the GIF helped more than text or a static image to see what was going on with the new feature.\n\n![command_pallette_sample](https://cloud.githubusercontent.com/assets/2680980/11761827/c7249ffc-a086-11e5-81f9-81f193220be3.gif)\n > or part of a blog post on 4.1\n\nThe blog post is already written and has (some) gifs. \nI don't want to mix documentation and blog post, as documentation is self contained, and will likely be rebuilded shipped on linux distro like debian. \n\nWhen I think of docs, think that you'r on mars, and it take 16min (at least) to do a roundtrip to earth. So I would prefer not to refer to a blog post for this kind of things. \n\nThoug I\n\n> Perhaps adding a GIFs folder to the docs source or more simply a GIF issue where folks could place their GIFs\n\nThe issue with doing that while developing (beta should be fine though) is that the UI change; for the blog post I had to re-record the gif 3 times. \n @carreau Thanks for the feedback. I'll open a separate issue about documentation and helping users understand the user interface. \n I added a bit more detail about how to trigger the major new UI features to the changelog. I also went through all the PRs and issues closed for 4.1 and picked out a few that seemed worthy of changelog mention (IMHO). For all the rest, I included links to the full lists of milestone 4.1 PRs and issues on GitHub for folks that want that level of detail.\n closed by #871. Thanks @parente!\n","@jdemeyer what relative URLs are valid?\n (Merging, since this is the right thing to do anyway, I'm just wondering what prompted it).\n For SageMath, we need a ''full'' version of MathJax (Jupyter's version is not sufficient). With this branch, we can use `nbextensions` for this.\n ok, thanks.\n","ping @jhamrick @ellisonbg \n ![screen shot 2015-10-26 at 11 21 16](https://cloud.githubusercontent.com/assets/335567/10738249/b242ef62-7bd3-11e5-938e-0162e0033126.png)\n Great! Merging.\n Sorry I didn't see this sooner, but yeah, looks great! :+1: \n @ellisonbg @Carreau I think we want to edit MacOS to Mac or Mac OS X\n > @ellisonbg @Carreau I think we want to edit MacOS to Mac or Mac OS X\n\nMeh, no strong feeling. \n\nIf there is a PR I'll merge it, though. \n","I agree that delete should act on selected cell, not marked. \n\nWe should have a separate delete marked. \n I am not sure about that. I don't see why delete is different from other\nactions that do either selected or marked cells. We already make it tough\nto delete by accident with the \"d d\" keyboard shortcut.\n\nOn Mon, Oct 26, 2015 at 2:40 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I agree that delete should act on selected cell, not marked.\n> \n> We should have a separate delete marked.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/665#issuecomment-151243260.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Because in 4.0 `d,d` delete selected cell. Current behavior in 4.1 is actually different than 4.0.\n And/Or, we should alway have selected cell being considered as marked.\n Yeah, I think the behavior should be the same (`d,d` deletes selected, not marked, cell) unless we somehow warn users that it is going to delete the marked cell instead. But I actually think that will lead to confusing behavior, e.g. what if nothing is marked? Then it will delete the selected cell. So users will still expect the selected cell to be deleted because that is what they are used to seeing.\n Seeing the issues with marked cell, I'm wondering if we should'nt have disabled/revert ed it for 4.1. \n\nThe contiguous selection was more than enough, and we push it too far. \n\nIt's a feature that will only be used  efficiently only  by 1% of the 1% of users using it. \n The introduction of marked cells was not to address discontinguous\nselections. There were fundamental problems with the previous\nimplementation of cell selection that mixed cell focus with selection in a\nnasty way.\n\nWe should just take our time and get the design right before shipping. But\nwe aren't far from that point.\n\nOverall the cell marking is working extremely well - with only a few edge\ncases we need to clean up. We have a clean way of distinguishing between\ncontinguous and discontiguous selections and preventing actions on discont.\nselections that don't make sense.\n\nCan you clarify what the problem is?\n\nOn Mon, Oct 26, 2015 at 2:51 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Seeing the issues with marked cell, I'm wondering if we should'nt have\n> disabled/revert ed it for 4.1.\n> \n> The contiguous selection was more than enough, and we push it too far.\n> \n> It's a feature that will only be used efficiently only by 1% of the 1% of\n> users using it.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/665#issuecomment-151246499.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n For reference, here is a gif of the problems described above:\n\n![](http://i.imgur.com/U9owBAG.gif)\n > We should just take our time and get the design right before shipping. But\n> we aren't far from that point.\n> \n> Overall the cell marking is working extremely well - with only a few edge\n> cases we need to clean up. We have a clean way of distinguishing between\n> continguous and discontiguous selections and preventing actions on discont.\n> selections that don't make sense.\n> \n> Can you clarify what the problem is?\n\nI completely disagree with that point. \n\nThe marked cell introduce a completely new layer of abstraction that distinguish marked vs selected. \n\nmarked and selected where the same set of cells, and action where applied to this unique set. \n\nThe 2 sets are disjoined and it is completely unclear to which of this 2 sets of cells each action applies. Worse, the set to which these actions apply is state dependent. \n\nIf now I have to explain to someone what delete does, my answer need to start with: \"It depends\". Even worse if I look at a notebook I cannot tell what it will do. \nI have to scroll through the all notebook to see wether cells are marked or not. \nExample, see two gif attached. On which one will dd delete the selected cell ?\n\n![dno](https://cloud.githubusercontent.com/assets/335567/10747452/6ebba7c2-7c12-11e5-98fc-1c9289ce6c80.gif)\n![dyes](https://cloud.githubusercontent.com/assets/335567/10747451/6ebb2fea-7c12-11e5-884d-7c1155e784d7.gif)\n\nBoth are on current master.\n Addendum: \n\nthis show that the problem is not only on merge. \n- And description of above gifs: in the first one a off screen cell is selected and is deleted by DD (see scrollbar change of size)\n- In the second one the selected cell is actually deleted.\n Closed by #676 and #681.\n","I think this is a good idea.  If we need to, we could throw a modifier key in front of the x,c,v to target marked cells instead of the selected cell.\n Ok, reworked. Should be ready. \n\nNeed @jdfreder hawk eyes. \n ![url](https://cloud.githubusercontent.com/assets/335567/10743282/57fccf2a-7bef-11e5-87e2-2f2c44cda573.jpg)\n :eyes: looking some more\n ok, done looking\n is this ready to go?\n Pushed fixes.  Travis is slow. \n I've killed a few builds on old commits. \n Also I'd like @ellisonbg to not give a -1 before merging. \n In the meantime I'll check it out and give it a test run.\n Seems to work as advertised!\n I have been _using_ cell marking for the last week or so to prepare talks,\netc. The current behavior of using (selected or marked) is extremely\nintuitive, efficient and matches the semantics of other UIs that support\nmultiple selection.\n\nI think if we allow multiple selection in any form, but don't bind the\nstandard keyboard shortcuts to work both with selected and marked, it will\nbe horrifically confusing.\n\nSo, yes, initially -1 - but you knew that was coming :)\n\nI am open to a number of changes that will clarify the selected/marked idea:\n- An audit of which actions work with marked+selected versus only selected\n- A clear, unified API for actions that work with marked+selected versus\n  only selected\n- Anything else that will clarify the different abstractions while\n  providing a clear user experience.\n\nThis is not just about cut/copy/paste. Many other actions apply to multiple\ncells in a conceptually clean way (merging, running, hide/clear\ninput/output). Are we going to have two keyboard shortcuts for all of\nthose? That sounds super crazy and a waste of precious keyboard shortcuts.\n\nOn Mon, Oct 26, 2015 at 3:25 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Do differentiate copy/cup/delete selected from marked cells.\n> \n> Bind the keyboard shortcut to the _old_ behavior.\n> \n> This does not prevent us from rebinding later, but at least make things\n> explicit.\n> \n> Ping @ellisonbg https://github.com/ellisonbg, @jhamrick\n> https://github.com/jhamrick , @jdfreder https://github.com/jdfreder\n> \n> We cannot in default action sometime act on selected, sometime on marked.\n> I still think that the marked/selected distinction is wrong, and that\n> default action should at least always act on selection.\n> \n> Todo:\n> - test more\n> - check for cut.\n> \n> To respond to @ellisonbg https://github.com/ellisonbg why shoud\n> copy/delete be different than other action :\n> \n> Right now copy/delete (and cut as cut is copy+delete) are the _only_\n> actions that have heuristic to sometime act on selection and sometime act\n> on marked cell.\n> \n> So there are no reason to behave differently, hence they shoudl not have\n> \n> ## this heuristic.\n> \n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/jupyter/notebook/pull/667\n> Commit Summary\n> - Don't break user keyboard shortcut.\n> \n> File Changes\n> - _M_ notebook/static/base/js/keyboard.js\n>   https://github.com/jupyter/notebook/pull/667/files#diff-0 (2)\n> - _M_ notebook/static/notebook/js/actions.js\n>   https://github.com/jupyter/notebook/pull/667/files#diff-1 (23)\n> - _M_ notebook/static/notebook/js/keyboardmanager.js\n>   https://github.com/jupyter/notebook/pull/667/files#diff-2 (4)\n> - _M_ notebook/static/notebook/js/maintoolbar.js\n>   https://github.com/jupyter/notebook/pull/667/files#diff-3 (2)\n> - _M_ notebook/static/notebook/js/menubar.js\n>   https://github.com/jupyter/notebook/pull/667/files#diff-4 (4)\n> - _M_ notebook/static/notebook/js/notebook.js\n>   https://github.com/jupyter/notebook/pull/667/files#diff-5 (53)\n> - _M_ notebook/static/notebook/js/toolbar.js\n>   https://github.com/jupyter/notebook/pull/667/files#diff-6 (3)\n> \n> Patch Links:\n> - https://github.com/jupyter/notebook/pull/667.patch\n> - https://github.com/jupyter/notebook/pull/667.diff\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/667.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I agree with your point that it is more powerful, \n\nThough we cannot **change** keyboard shortcut in between **minor** releases. \nLike we cannot change notebook style.\n\nThe changing keyboard shortcut is more annoying as a sequence of shortcut in 4.1 can lead to a different state than 4.0. (Merge leave cells in a marked state which influence later actions). \n- 4.0, select, split, up `d,d` delete first cell\n- 4.1, select, split, up `d,d` delete second cell\n\nSo user that have taken habits for the last 3 month with in a couple of minutes need to rewire their brain, and might not even be **aware** of that change. Especially since the actions that are affected are **destructive** (delete). \n\nI can see middle grounds though:\n-  Ensure that after all actions the cells get unmarked, including split, and merge, so common workflow like split or merge, then do something else  (delete) will not change. \n\nor,\n- Make sure that actions act on the union of (marked + selected cell) \n\n---\n\nSide note, I can update this PR so that default actions are still the same, but still get the API granularity of selected vs marked cell. Would that be more acceptable ? \n\nTo rephrase where I stand, I am not against the new behavior. I am against changing the behavior of keyboard shortcuts in between 4.0 and 4.1.\n Ahh, thanks for the clarification.\n\nI agree with you that actions that don't involve marked cells should not\nchange in any way in a minor release. Also, there are some actions that I\ndon't think make sense on marked cells (such as split).\n\nWould you consider it a keyboard shortcut breakage if all previous keyboard\nshortcuts work exactly the same if there is only a selected cell, but have\nnew behavior if there are marked cells?\n\nOn Mon, Oct 26, 2015 at 9:39 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I agree with your point that it is more powerful,\n> \n> Though we cannot _change_ keyboard shortcut in between _minor_ releases.\n> Like we cannot change notebook style.\n> \n> The changing keyboard shortcut is more annoying as a sequence of shortcut\n> in 4.1 can lead to a different state than 4.0. (Merge leave cells in a\n> marked state which influence later actions).\n> - 4.0, select, split, up d,d delete first cell\n> - 4.1, select, split, up d,d delete second cell\n> \n> So user that have taken habits for the last 3 month with in a couple of\n> minutes need to rewire their brain, and might not even be _aware_ of that\n> change. Especially since the actions that are affected are _destructive_\n> (delete).\n> \n> I can see middle grounds though:\n> - Ensure that after all actions the cells get unmarked, including\n>   split, and merge, so common workflow like split or merge, then do something\n>   else (delete) will not change.\n> \n> or,\n> - Make sure that actions act on the union of (marked + selected cell)\n> \n> ---\n> \n> Side note, I can update this PR so that default actions are still the\n> same, but still get the API granularity of selected vs marked cell. Would\n> that be more acceptable ?\n> \n> To rephrase where I stand, I am not against the new behavior. I am against\n> changing the behavior of keyboard shortcuts in between 4.0 and 4.1.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/667#issuecomment-151338875.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Would you consider it a keyboard shortcut breakage if all previous keyboard\n> shortcuts work exactly the same if there is only a selected cell, but have\n> new behavior if there are marked cells?\n\nDepends on which behavior, I can think of a few that would be ok. But probably not if you look at my [other comment](https://github.com/jupyter/notebook/issues/665#issuecomment-151341421) where this change in behavior is surprising and does unexpected actions. \n\nI would be ok for example for DD to refuse deleting if there where marked cells, but the selected cell was not one of the marked cell. \n\nLet's discuss that tomorrow. \n > Though we cannot change keyboard shortcut in between minor releases.\n> Like we cannot change notebook style.\n\nI wouldn't be so black and white about this, especially if it means sacrificing the user experience.\n\n> Would you consider it a keyboard shortcut breakage if all previous keyboard shortcuts work exactly the same if there is only a selected cell, but have new behavior if there are marked cells?\n\nI think this is the best way forward, even if it means the shortcuts don't work as normal when things are marked.  I think that's okay, because marked cells are a new context that hasn't existed pre 4.1.\n\n> I would be ok for example for DD to refuse deleting if there where marked cells, but the selected cell was not one of the marked cell.\n\nI think the simpler, more intuitive behaviour would be for DD to delete the marked cells if they exist, and to otherwise delete the selected cell.\n > I think the simpler, more intuitive behaviour would be for DD to delete the marked cells if they exist, and to otherwise delete the selected cell.\n\nYou completely miss the point, that what they are doing now, and what cause the issue. \n\nQuestion A: What does DD does if the first cell of the notebook is selected ?\n\nQuestion B: I have the following notebook:\n\n![screen shot 2015-10-27 at 08 08 47](https://cloud.githubusercontent.com/assets/335567/10762147/0ca865d2-7c82-11e5-8006-0ba1d1915d7e.png)\n\nHow do I delete the selected cell ?\n\n> I wouldn't be so black and white about this, especially if it means sacrificing the user experience.\n\nNo if is not destructive, but here the same action on 4.0 and 4.1 can **delete** work.\n I must still be missing the point,\n\n> Question A: What does DD does if the first cell of the notebook is selected ?\n\nDeletes the first cell\n\n> Question B: I have the following notebook:\n\nDeletes the selected cell, unless there are marked cells somewhere on the page, even if out of view.\n Other than shift up/down (maybe we should remove this), it doesn't seem easy to accidentally mark cells.  Therefor, I don't know why it is a surprise that DD acts on the marked cells and not the selected.\n\n> I would be ok for example for DD to refuse deleting if there where marked cells, but the selected cell was not one of the marked cell.\n\nI could see this being a good compromise for now, and revisiting for 5.0\n @jdfreder The issue is that users have been using `d,d` to delete cells up until now, and if they encounter a case where there is a marked cell that is different from the selected cell, users are going to be surprised. Personally,\n\n> Deletes the selected cell, unless there are marked cells somewhere on the page, even if out of view.\n\nis very unintuitive to me. The cells that are being operated on are the ones I'm looking at. Since the few follows the selection around (not the marked cells), my first assumption would be that things like deleting cells operates on the one that I have selected, _especially_ if the marked cells aren't even visible.\n\nTo address the issue for now, I think the following two things will be sufficient:\n1. Always unmark cells after an operation (e.g. merge, split). Users aren't going to know how to unmark cells themselves (some will figure it out, many probably won't) so we shouldn't put them in a situation that will be confusing for them in the first place.\n2. (@Carreau 's suggestion) If, in the chance there is a marked cell somewhere, make sure that surprising behavior can't happen. Any destructive operations (merge, split, delete, etc.) should be disabled if the selected cell is not also a marked cell.\n > Question A: What does DD does if the first cell of the notebook is selected ?\n> Deletes the first cell\n\nWrong, delete the first **unless something else is marked**. Now you need to explain what marked is. \n\n> Question B: \n\nYou missed the question. A user have the following notebook and ask you what to do to delete. \nWhat is your response. \n\n---\n\nIf you are teaching with the notebook to 40 people you need to look after, and have to scroll to 10 page to know wether DD will delete the selected cell or not, then there is a UI problem. \n\nIf a user ask you how to delete a cell and you have to go through 1 3 page explanation on how to mark/unmark cell and why 2 user that have **the same thing on screen** have the **same click** on **the same menu** do 2 different things you have a UI problem. \n\nYou cannot in a UI rely on hidden state. If the visible state is out of the view it **is** hidden state. \n I see where you guys are coming from, I agree, we should change the behavior before the release.\n\n@ellisonbg I'm starting to think that, fundamentally, decoupling the ability to mark from selection (DOM element focus) was not the right idea.  Maybe we should have decoupled it only for command mode - because command mode shouldn't need elements on the page to be focused (user isn't inputting into CodeMirror).  This would mean no need for marks, and everything could be multi-select (contiguous or not).  It seems like the root of the confusion is the fact that there are now 2 modes of selection.  \n\nHow does GMail, and other applications like it, handle this?\n > How does GMail, and other applications like it, handle this?\n\nThe Gmail UI changes when you \"mark\" a message. \nAnd you **have to** mark a message to act on it. \n In gmail, if you're in the list view I believe you have to mark messages (check them) before you can do anything. So that would be equivalent to saying you can't do anything with the selection, but have to first mark any cells you want to mark. However, I don't know if we should follow that model because (1) in gmail they use checkboxes, which makes it _really_ obvious what is selected and what isn't, (2) you are limited in the number of emails displayed at a time, while we do not limit the number of cells, so having things be off-screen is less of a problem in gmail, and (3) users are used to having the selection operate on cells, and modifying that would be a fairly major change.\n > . Maybe we should have decoupled it only for command mode - because command mode shouldn't need elements on the page to be focused (user isn't inputting into CodeMirror). This would mean no need for marks, and everything could be multi-select (contiguous or not). It seems like the root of the confusion is the fact that there are now 2 modes of selection.\n\nThat wouldn't change a lot, you still have this difference between the \"cursor\" cell and the \"marked\" cell. it's always confusing as to know wether the actions affect marked or cursor. \n\nMy take on that would be that all actions by default should affect `union(marked, cursor)` moreover it give a meaning to actions like \"merge\" where the cell would be inserted at the cursor posiition. \n > My take on that would be that all actions by default should affect union(marked, cursor) moreover it give a meaning to actions like \"merge\" where the cell would be inserted at the cursor posiition.\n\nI think like @jhamrick mentioned in #669 , if we make them look the same, `union(marked, cursor)` would make sense.  Do we agree that this is worth trying?  I am +1\n :+1: on operating on `union(marked, cursor)`, and styling the cursor so that it looks like it's a marked cell (so that really `union(marked, cursor) == marked` because the cursor looks like it is marked).\n :+1: as well, good summary, @jhamrick.\n","Hmm, I see the color coding on the prompt, but it disappears once I submit.\n\nAction shot:\n\n![colorinput](https://cloud.githubusercontent.com/assets/3292874/10741593/d7074ae8-7be5-11e5-9726-ee0fc359058e.gif)\n If fixing the problem I mentioned above involves too much effort for 4.1, we should just merge this as-is as a partial fix.\n","I like this. Here's another thought: what if we also actually made a \"mark\" on the left side for any cell that is selected, if there are other selected cells? So that it \"looks\" like it's marked as well? It wouldn't actually be marked -- e.g. if you moved the selection up or down, it would move the mark (unless the cell were legitimately marked). But the benefit of doing this would be to allow us to operate on the union of marked + selected cells, and it wouldn't be surprising to users because the selected cell looks like it's marked.\n Related to the discussion in #667\n\n> Here's another thought: what if we also actually made a \"mark\" on the left side for any cell that is selected, if there are other selected cells? So that it \"looks\" like it's marked as well? It wouldn't actually be marked -- e.g. if you moved the selection up or down, it would move the mark (unless the cell were legitimately marked). But the benefit of doing this would be to allow us to operate on the union of marked + selected cells, and it wouldn't be surprising to users because the selected cell looks like it's marked.\n\nI like this idea a lot +10\n Actually, now that I think of it even more, why not just always have the selected cell look like it's marked, even if there aren't other marked cells? Then it's less surprising to see additional marked cells when you do things like multi-cell select, and it's more consistent (when you delete a cell, you always delete all marked cells, which might mean multiple cells or just the currently selected cell).\n > why not just always have the selected cell look like it's marked, even if there aren't other marked cells?\n\n+1 , you're on a roll, I like these ideas!\n Thanks! :smile: \n Question, what styling would we use?  The left border alone?  Or the full gray border?  I should say, if we do the full gray border, it looks ugly with multiple consecutive cells marked.\n I also like these ideas. But if we visually style the selected cell like a\nmarked cell, won't that be confusing for actions that only work on\nselected? (I am not sure, just asking)\n\nOn Tue, Oct 27, 2015 at 1:35 PM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> why not just always have the selected cell look like it's marked, even if\n> there aren't other marked cells?\n> \n> +1 , you're on a roll, I like these ideas\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/669#issuecomment-151580958.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I think the idea is that no actions would only work on selected\n I think the left border alone is fine. I like Matthias' gif and basically am thinking that the selector would still have the gray border but additionally the left blue border.\n Are there currently any actions that only work on selected cells and not marked cells?\n > Are there currently any actions that only work on selected cells and not marked cells?\n\nRun cell. \n\nI'll update the CSS to have the cursor look like marked cell. \n Ah, hmm. I could see it being useful though to say \"run this set of cells that I have marked\" rather than just run the current cell, so maybe that's not a problem to have run cell run all the marked cells...\n ![mark-2](https://cloud.githubusercontent.com/assets/335567/10767390/24d943e4-7c99-11e5-81ec-b23f286e958a.gif)\n I introduced a small difference between `selected` and `selected + marked`\n Nice! I hadn't thought about the difference between selected and selected+marked, but yeah, I think that's important. I wonder if the way you have it might be too subtle, though. What about having:\n1. Always a gray border for the selection, _except_ it's blue if the cell is truly marked\n2. Always have the blue bar on the left with the selection, even if there are no other marked cells\n I like a small difference when selection is the only marked cell, as it give you a quick indication wether there **migt be** off screen marked cell. \n\nI'll finish my version, and play with your 1) and 2)\n I would like to see 2 especially\n\nEdit: Actually both 2 and 1\n you can check latest commit to try #2\n A gentle suggestion for accessibility would be to make sure the indicator does not solely rely on color. I like 2.\n I've pushed proto1 and proto4\n\nproto4 rely on border width:\n- selected : 2px\n- marked : 3px\n- selected + marked : 4px\n\n![proto4](https://cloud.githubusercontent.com/assets/335567/10768136/d0772038-7c9c-11e5-9aaa-0aacd8955f38.gif)\n - :-1: for proto1 (can't tell the difference between selected and marked+selected)\n- :+1: for proto2\n- :+1: for proto4 (I actually quite like it without the border)\n\nI do think we are going to need an additional indicator besides width, though, as I still think it's too subtle. I'm not sure what would be best, though. Maybe a combination of color and width (would that also address the stuff you're thinking of, @willingc ?) -- what about\n- selected, not marked: thin blue\n- not selected, marked: medium gray\n- selected, marked: thick blue\n\nor something along those lines?\n Here's an example of what I mean, using light blue rather than gray:\n\n![](http://i.imgur.com/EgwG77L.gif)\n The more I play around with the version that doesn't have borders, the more I like it. I think this will have the added benefit of making it much, much clearer when you're in command mode vs edit mode. So +100 from me for something along the lines of proto4!\n I've never liked the gray border, so I second @jhamrick 's +1(00)\n Another +1 for proto4. @jhamrick Yes, color plus width works for me.\n I like the no border too, Though there is also the \"edit-mode\" green, which has boder. \nand I don not want to disturb too much people with changing UI habits. \n\nSo while I'm +1 to removing border for 5.0 I'm -1 to remove it for 4.1\n I'm a fan of the different color from the selection and the marked cells. \n\nOne thing I just talked about with @Carreau was that the real problem that is still not adequately addressed is knowing which of the two (selected vs. marked cells) is going to have actions applied to it. \n\nOne possibility is to flip the problem on its head and rather than thinking of the mark as a state, selected as a state and marked & selected as a state, is to recognize that marks+selected structure is a set of binary variables applied to the complete set of cells. \n\nIf you instead think of the selected as an implicit mark (which @Carreau said was already part of the discussion) you can treat the entire problem differently and address the \"when you _do_ something, what are the things that something is done to\" problem by putting a priority queue on the sets of binary variables. The set at the top of the queue is given its own special UI indicator (I was suggesting something that contrasts with the actual selection colors like red, though I know that might have other bad connotations), and it is that set of cells to which the function will be applied. \n\nThe idea let's you choose to step through the queue by using some kind of toggle/step-through key (based on gmail's mechanism for stepping through different inboxes I suggested  <code>`</code> , but then @Carreau let me know that that won't work for non-US keyboards :-1:), and that will toggle which cells will have actions applied to them as a separate idea from the status of marked, selected or marked and selected.\n\nsidenote: I'm assuming that actions like merging are just going to be disabled for noncontiguous blocks of cells? Otherwise the semantics of what it is to merge get wonky\u2026\n I'm not sure I understand the idea of having a priority queue. The way that I've been thinking about it is:\n- With the exception of switching into edit mode, and marking/unmarking cells, all other actions are only ever applied to marked cells. The state of being marked is indicated by a bar to the left of the cell.\n- In order to choose a cell that you want to edit, or to mark/unmark individual cells, you have a cursor. If the cursor is on a cell, then that cell is counted as marked and thus has a bar to the left of it as well.\n- However, when the cursor is on a cell, while that cell is counted as marked, it is not a \"sticky\" mark, e.g. it will go away if you focus on another cell. So you can explicitly mark the cell, but then you need a way of visually distinguishing cells that are focused that have do or do not have a sticky mark.\n\nSo, essentially, it should be possible to determine from a screenshot (without knowing the history of actions) which of the following categories each cell falls under:\n- Focused/selected (with a \"sticky\" mark)\n- Focused/selected (without a \"sticky\" mark)\n- Not selected and marked\n- Not selected and unmarked\n Also, it may be helpful here to note the similarity to how selection in emacs works. I will make this quick because I have to run to class in a minute...\n- There is a cursor (overlaps a single character)\n- There is a region (overlaps multiple characters and includes the cursor)\n- All actions operate on the region\n- You can tell the difference between the cursor and the region because they are usually different colors, and the cursor usually blinks\n > I like the no border too, Though there is also the \"edit-mode\" green, which has boder. \n> and I don not want to disturb too much people with changing UI habits.\n> \n> So while I'm +1 to removing border for 5.0 I'm -1 to remove it for 4.1\n\nSorry @Carreau , here I disagree with you and I say away with it for 4.1! :)  (not the edit mode one)\n Having the width of the side denote the different states is confusing to me.  What if the `selected` cell actually did blink its border?\n @jhamrick, I think we're talking past each other, because that division works for distinguishing between editing and command modes. But before what was discussed was the notion of selection being an implicit mark that is differentiated from the notion of what I think you're calling a sticky mark. \n\nI thought that focused was the term for when you are in edit mode in a particular cell.\n\nIn the previous release there was the notion of selecting multiple cells, and so something could be selected and not focused (because you can select multiple cells, but you cannot be _focused_ on multiple cells for the purposes of editing those multiple cells, unless \u2014 in the emacs analogy \u2014 it's allowing multiple cursors). \n\nSo there are actually 8 states:\n\nFocused/in edit mode (with \"sticky\" mark)\nFocused/in edit mode (without \"sticky\" mark)\nSelected/in command mode (with \"sticky\" mark)\nSelected/in command mode (without \"sticky\" mark)\nNot selected and not focused, in command mode (with \"sticky\" mark)\nNot selected and not focused, in command mode (without \"sticky\" mark)\nNot selected and not focused, in edit mode in another cell (with \"sticky\" mark)\nNot selected and not focused, in edit mode in another cell (without \"sticky\" mark)\n\nWhat I was taking as given was that operations could only be applied while in command mode (I think this is implicit in all the discussion, and I have no quibble with that). \n\nBut when in command mode, one could have a selection on many contiguous cells and one could have marks on any subset of the cells. What I was suggesting is the ability to (at least) be able to toggle between the selected cells as the target of actions and the marked cells as the target of actions without losing either the marks or the selection when that toggle occurs(I.e., you can toggle back and forth). The UI indicator for the currently active target set is an open question (and I am open minded as to what that should look like). \n\nBasically, what's inevitably going to happen in the examples @jhamrick gives in an issue elsewhere(https://github.com/jupyter/notebook/issues/665#issuecomment-151339333) will be cases someone applies an operation to the wrong target set, and it should be possible to undo that operation, to and to immediately return the set of focuses to the place they were before, easily toggle to the correct target set and then apply the operation again. If you don't have some way of encoding that information so as to make it easy to undo to the state where both the marks and selections are preserved, switch targets, and redo; people(read: this includes at least me) will be less likely to use marks as opposed to the contiguous selection mechanism because then I'll at least know where all of the changes were made when misfires occur and apply to the wrong target set (which currently is being implicitly decided by\u2026I'm not sure what?).\n I give up on UI. Prototypes are here feel free to take inspiration. \n\nI shouldn't have gotten into this discussion and I should have left the selected/marked things in the state it was. \n > Having the width of the side denote the different states is confusing to me. What if the selected cell actually did blink its border?\n\nThat's a cool idea, like a nod to the design of the common cursor.  Just thinking out loud, it may get noisy seeing both the cell side-bar blink and the cursor in the editor.\n Don't despair @Carreau!, thanks for the prototypes.  \n > Don't despair @Carreau!, thanks for the prototypes.\n\n+1 , I think we are getting close!\n Maybe only blink in command mode?\n Yeah I think that would work\n -1 on any blinking ;-) except of eyes\n\nOn Tue, Oct 27, 2015 at 6:03 PM, Jonathan Frederic <notifications@github.com\n\n> wrote:\n> \n> Yeah I think that would work\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/669#issuecomment-151658751.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n FYI on blinking and accessibility: https://pages.18f.gov/accessibility/flashing/\n","This is an alternative to #45 .\n I think this is worth a shot.\n > I think this is worth a shot.\n\nYep, I agree... and I like more than #45\n Let's merge.\n OK, I guess #45 has to be closed now...\n","That doesn't mean that it's not working, as far as I know (as a Jupyter Notebook user that is probably slightly above \"casual\"). You must create a notebook and start using it before Jupyter will fire up a running kernel and show anything in the **Running** section of the Jupyter overview.\n\nOnce your Notebook server is running and it opens in the browser, try the following:\n1. Click the **New** button (upper-right) and from the drop-down choose \"Python 2\" or \"Python 3\" from the **Notebooks** section\n2. (The notebook should open in a new tab) In the first cell, do some Python, maybe like `print(\"Hello, world!\")`\n3. Press `Ctrl+Enter` to run the cell\n4. Observe the output\n5. Return to the original tab (leave the notebook running in the other tab)\n6. Click on **Running** again to see if there are any running notebooks (may have to refresh with `F5` key in your browser)\n7. Return to the active tab with the notebook running in it\n8. From the **File** menu, choose **Close and Halt**\n9. Re-visit the **Running** section of the original tab and see if there are any notebooks still running (again, you may have to refresh in your browser by using the `F5` key\n\nPlease give that a try and report back your status.\n @hosemn \nYes. It was actually working. I just didn't know it. I am completely new\u2026I tried everything you suggested and it all works. Thanks!\n\nNow I have a related question. How do I use this together with iTorch? When I type iTorch notebook, the same window opens and I can start a notebook session. But in Torch how do I display stuff in the notebook window? Do you happen to know that?\n @metatl I am not personally familiar with iTorch, but it looks like it works generally like the Jupyter notebook in that it provides you with a notebook interface where you can write code and see the results in real-time, maintaining a living document of what you're doing as you interact with it. Though, the libraries it bundles are specific to Torch, which appears to be a machine learning framework. Sounds like cool stuff.\n\nA great place to start is to get to know how the Jupyter (formerly IPython) notebook works, by viewing some tutorial videos: https://www.youtube.com/playlist?list=PLRJx8WOUx5Xd3_dgw5xRmABUd8MWdsA_C\n\nIf you're already familiar with the Python language enough to play around, those should get you up and running until you can start to familiarize yourself with Torch and iTorch. Most likely you'll need to look to the iTorch documentation (and/or developers) for assistance with the Torch/iTorch libraries and how to use them. They have a few examples on their GitHub main page and also they link to a sample notebook which has some examples of things you can do. I hope that helps.\n @hosemn \nThank you so much for the tips and suggestions.\n\nThe issue is resolved. The iTorch wasn't linked up properly. Now I'm good.\n I'm glad you resolved it! Would you mind marking the issue as \"closed\" so the devs don't have to? They're busy working on important stuff for release 4.1, so their attention is elsewhere. I'm just a lurker, so I (rightly) don't have permissions to close the issue.\n Thanks @hosemn and @metatl for resolving this issue. :smile:\n","It sounds like you have different versions of pips, try:\n\n``` bash\npip --version\npip3 --version\n```\n Nope, \n\n```\n$ pip --version\npip 7.1.2 from /usr/local/lib/python2.7/site-packages (python 2.7)\n$ pip3 --version\npip 7.1.2 from /usr/local/lib/python3.5/site-packages (python 3.5)\n```\n\nI don't think it's that.\n Huh, bummer.\n @michaelpacer Within a Python3 virtualenv on OS X, I'm not seeing any difference in behavior between `pip install --pre -e .` and `pip3 install --pre -e .`. Both commands  install the most recent development version.\n\n<img width=\"691\" alt=\"screen shot 2015-10-27 at 7 05 03 pm\" src=\"https://cloud.githubusercontent.com/assets/2680980/10777984/517290be-7cde-11e5-8613-70c376bc4e9d.png\">\n @michaelpacer what do you see in `pip list`? And what do you get from\n\n```\npython -c 'import notebook; print(notebook.__file__)'\n```\n\n?\n Closing as probably something we can do nothing about. This is likely due to previous installations putting setuptools in a confused state - pip has been known to output \"installed package-x\" when it actually just _uninstalled_ package-x and installed package-y.\n","@minrk has a table of contents extension that might be what you are looking for:\n\nhttps://github.com/minrk/ipython_extensions#table-of-contents\n Thank you very much, @jhamrick. This extension doesn't seem to work in jupyter. I installed the extension by the following steps:\n1) download the extension from https://github.com/minrk/ipython_extensions#table-of-contents\n2) copy `nbextensions` and `extensions` to `~/.ipython/`\n3) `CD` to `~/.ipython/nbextensions/` and run \n\n```\n$ sudo curl -L https://rawgithub.com/minrk/ipython_extensions/master/nbextensions/toc.js > toc.js\n$ sudo curl -L https://rawgithub.com/minrk/ipython_extensions/master/nbextensions/toc.css > toc.css \n```\n\n4) copy the code below to `custom.js`\n\n```\n$([IPython.events]).on(\"app_initialized.NotebookApp\", function () {\n    IPython.load_extensions(\"toc\");\n});\n```\n\n5) run `jupyter migrate` in the command line and the information given is:\n\n```\n[JupyterMigrate] Copying /home/coldmoon/.ipython/profile_default/security/notebook_secret -> /usr/local/share/jupyter/notebook_secret\n[JupyterMigrate] Copying /home/coldmoon/.ipython/nbextensions -> /usr/local/share/jupyter/nbextensions\n[JupyterMigrate] Copying /home/coldmoon/.ipython/profile_default/security/nbsignatures.db -> /usr/local/share/jupyter/nbsignatures.db\n[JupyterMigrate] Copying /home/coldmoon/.ipython/profile_default/security/notebook_cookie_secret -> /usr/local/share/jupyter/notebook_cookie_secret\n[JupyterMigrate] Copying /home/coldmoon/.ipython/profile_default/static/custom/custom.js -> /home/coldmoon/.jupyter/custom/custom.js\n```\n\n6) mannually copy the folder `extensions` to `/usr/local/share/jupyter/`\n\nThen, I start a new `terminal` , run `jupyter notebook` and open a xxx.ipynb file.  The notebook pape doesn't change. \n\nI guess it is because \n\n> Jupyter no longer uses special heading cells \n\nwhile the extension  works with `heading cells` not with `Markdown cells`\n I haven't used @minrk 's table of contents, but we also have one that works with all versions of Jupyter:\n\nhttp://calicoproject.org/ICalico#Calico_Notebook_Extensions\n\nHere is a video:\nhttps://www.youtube.com/watch?v=YbM8rrj-Bms\n There's also a working version (including a dockable sidebar) at ipython-contrib/IPython-notebook-extensions\n I am using a table of contents that I found somewhere. It works very nicely, also with markdown.\nIn on cell you put:\n\n```\n## Table of contents\n<div id=\"toc\"></div>\n```\n\nIn the next cell you put:\n\n```\n%%javascript\n$.getScript('https://kmahelona.github.io/ipython_notebook_goodies/ipython_notebook_toc.js')\n```\n\nAlthough it works, it would be much nicer if there could be a stationary sidebar (that maybe will contain other things in the future), which has the table of contents. This would make it similar to the typical layout of a coding IDE.\n Thanks @jkokorian for the useful snippet!\nInstead of running two cells, you can run the following code in a single cell, and that will give you a stationary TOC on the side of the page:\n\n```\n%%javascript\n$('<div id=\"toc\"></div>').css({position: 'fixed', top: '120px', left: 0}).appendTo(document.body);\n$.getScript('https://kmahelona.github.io/ipython_notebook_goodies/ipython_notebook_toc.js');\n```\n @shoval Thank you~ Your code is very useful.\n @shoval Great!\n Not sure if anyone is still interested in this topic but I developed an open source stationary side bar. See https://github.com/vizmotion/jupyter-navigation. Feel free to use as you want.\n @vizmotion Thanks. very nice work. I've started it.\n Glad you found it useful. If you don't mind let me know how you use it and if there are improvements I can make.\n","This looks ready to go, but I haven't tested it. @minrk I will let you merge...\n","That's a difference between Legacy Python and Python 3. In Legacy Python, calling `range()` returns a list of numbers. In Python 3, it creates a `range` object, which is more efficient, and whose representation happens to look the same as your input. You can see this more clearly if you do:\n\n``` python\nstart = 3\nstop = 12\nrange(start, stop)\n```\n\nwhich will have the result\n\n``` python\nrange(3, 12)\n```\n\nIf you want to get the Legacy Python list in Python 3, you can pass the range to `list`:\n\n``` python\nlist(range(2, 5))\n[2, 3, 4]\n```\n","Transferring opinion from #669 to here, I prefer it without the gray border.\n\nHowever, removing the gray border may not be within our policy for minor releases.\n Yeah, I also prefer it without the border, but I think @Carreau is right -- the marking is already a fairly big difference UI-wise, so I would say let's take it one step at a time and leave the border for now. We can remove it in the next release.\n I am also good with this as-is.  Having three different widths was confusing, but I like this, with an eventual goal to remove the gray border.\n Or are there still three widths and I'm just blind?\n Cool, I will test now...\n\nOn Wed, Oct 28, 2015 at 3:41 PM, Steven Silvester notifications@github.com\nwrote:\n\n> Or are there still three widths and I'm just blind?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/675#issuecomment-151968112.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @blink1073 there are still three widths, though having the border definitely makes it harder to tell.\n Just played with it - I like it a lot!!!\n\nOne thing we should change. Right now there is an action that is called \"unmark or close pager\". Once we have commands scoped by CSS selectors we will be able to cleanly separate those. But it would be nice to not have to rename that command. What about this:\n- Define separate command for unmark all cells and close pager.\n- Have both of the actual logic for those commands do the same thing (see if pager is open, etc.).\n\nThat way, we won't have to change any command names once we get the scoped selectors.\n\nBut I am +1 on the behavior of this PR otherwise.\n As I play with it locally, I see that the third width does help distinguish that the current cell is both selected and marked, so +1.\n Jess, did you try to use slightly wider borders, maybe instead of 1/2/4 try\n1/3/5?\n\nIt might help distinguish the three states visually - especially in\nsettings where color can't be resolved accurately.\n\nOn Wed, Oct 28, 2015 at 3:56 PM, Steven Silvester notifications@github.com\nwrote:\n\n> As I play with it locally, I see that the third width does help\n> distinguish that the current cell is both selected and marked, so +1.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/675#issuecomment-151971739.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n The borders are currently 2/3/4. I'll try it out with 1/3/5 and see how that looks.\n Shouldn't the smallest width match the regular border state?\n\nOn Wed, Oct 28, 2015 at 4:03 PM, Jessica B. Hamrick <\nnotifications@github.com> wrote:\n\n> The borders are currently 2/3/4. I'll try it out with 1/3/5 and see how\n> that looks.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/675#issuecomment-151974097.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I find it difficult to see that the border is blue if it's only 1px. Here's a gif of 2/4/6, in which (to me) it is fairly clear that the border is blue and that there are three different widths:\n\n![](http://i.imgur.com/rPYdB9L.gif)\n However, the downside to having the thicknesses be more distinct is that I'm a bit worried now people will think the selected cell is something different from the marked cells...\n ^ That was my original concern, but it felt intuitive when I actually used it.\n @blink1073 Yeah, I 2/3/4 felt fine to me as well, even though the difference is subtle. I think maybe once we remove the gray border it might be necessary to emphasize the widths more and do e.g. 2/4/6 but for now I think it's probably fine? @ellisonbg what do you think?\n @jhamrick Excellent write up and analysis. No strong preference on the widths.\n Hmm, looks like this needs rebase. Not sure which merge tripped this up. Might mean that all in the series needs to be rebased...\n Rebased.\n Changed `cell:marking-changed` to `marked_changed.Cell`, will rebase other PRs momentarily.\n Checked the behavior of this PR and I really like it. Looks like @Carreau made a comment about a CSS var, anything else still underway with the code?\n ~~Well the comment about css can be made in a subsequent PR if the merger open an issue to remember~~\n\nFixinx that with @jhamrick live\n Ok, addressed @Carreau 's commends. I am done making changes here.\n Will merge when travis finishes.\n > Will merge when travis finishes.\n\n+1 IIF travis is happy. Because travis can finish angry. \n It is angry...kicking it\n Travis looks happy now!\n Github is purple. \n Thanks! :tada: :confetti_ball: \n Great work!\n\nOn Thu, Oct 29, 2015 at 2:31 PM, Jessica B. Hamrick <\nnotifications@github.com> wrote:\n\n> Thanks! [image: :tada:] [image: :confetti_ball:]\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/675#issuecomment-152277385.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","Probably should have some tests, but I'll hold off on those until hearing if people are ok with these changes first.\n Have a call now, will look at it later tonight. Thanks for helping with\nthis stuff!\n\nOn Wed, Oct 28, 2015 at 3:47 PM, Jessica B. Hamrick <\nnotifications@github.com> wrote:\n\n> Probably should have some tests, but I'll hold off on those until hearing\n> if people are ok with these changes first.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/676#issuecomment-151969657.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n +1 to all bullet points, thanks @jhamrick! I'm least sure about the split/merge unmark, but this seems at least as reasonable as anything.\n Yeah, all will need rebases...let's be careful about merges right now until all of these marked PRs are in.\n I think the first two changes make sense, but also not sure about the split/merge behavior.\n\nI had played with the previous behavior and thought it made sense. Part of this was comparing with other actions such as cut/copy/paste which preserve marked.\n\nNeed to wait for rebase to play with it though.\n Yeah, sorry for the tangle of PRs... probably better than one giant one, though, since it really is just a lot of little changes... anyway, rebased.\n\nPreviously, merging would keep one cell (the merged cell) marked. Now that we have the notion of the selected cell as being marked as well, I think it is kind of annoying and redundant for this being the case -- and it means that if you don't want a sticky mark (which I feel like is going to happen more often than the cases in which you do?) you have to do an additional operation to remove it. So that's the motivation for this change.\n OK played with this.\n- +1 on the new cell marked extension semantic.\n- +1 on the selected cell being treated as marked.\n- +1 on the handling of merged. It is selected, and that is enough.\n- Less sure about the unmarking of a split cell. My initially though is to treat the pair as marked - either both marked, or first marked, second selected.\n Ok. I have less strong opinions about the splitting behavior, so I've reverted that -- now it just unmarks after merge.\n Travis is happy now.\n +1\n Ok, @ellisonbg since I reverted the split behavior are you ok to merge this?\n Yep!!\n\nOn Thu, Oct 29, 2015 at 4:26 PM, Jessica B. Hamrick <\nnotifications@github.com> wrote:\n\n> Ok, @ellisonbg https://github.com/ellisonbg since I reverted the split\n> behavior are you ok to merge this?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/676#issuecomment-152308363.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Thanks @jhamrick !\n","I will take a stab at this.\n",":+1:\n Thanks!\n\nOn Thu, Oct 29, 2015 at 8:46 AM, Min RK notifications@github.com wrote:\n\n> Merged #679 https://github.com/jupyter/notebook/pull/679.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/679#event-449165931.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","master does allow closing the pager on escape, though sometimes it requires two presses.\n","What about scrolling the top of the marked section into view, leaving things marked and allowing the user another go at the action. Could couple this with a message to the notification area. I do also like the idea of a marked cell counter, but I worry users won't see it when it matters.\n Hmm, what if the marked cells are below the currently selected cell (meaning technically the \"top\" of the marked section is already in view)? I also tend to dislike things that automatically scroll the page somewhere else... but that's just my personal preference, not sure about other people.\n Perhaps a simple notification on top bar whenever there are marked cells existing off screen. I'm with @jhamrick that I prefer not to have things scroll automatically.\n Here is a prototype that uses the notification area:\n\n![](http://i.imgur.com/RpAMvby.gif)\n Nice! :+1: \n","Rebased.\n Hmm, this still behaves weird. I would expect undo of a merge to just be split. While it is better than before, I am not sure it makes sense. Why not just add an option to do a delete without putting the deleted cell on the undo stack and then use that form of delete when doing the merge.\n split and merge are (slightly) different as merge include new lines\n Also merge have to discard metadata. \n Yeah, there should definitely be an option to undo the delete that happens after a merge. In addition to the metadata thing, there are also going to be cases where e.g. you merge 4 cells at once and splitting them manually will be a pain.\n","Thanks!\n","is there an emoji for \"work on your PhD\" ?\n :-P \n @Carreau I think the emoji would be a combination of :coffee: :computer: :book: :tired_face: :hourglass_flowing_sand: \n\n@jhamrick Looks good. :surfer: :palm_tree: :sunglasses: :guitar: == PhD completion emojis (or procrastination :-P)\n Hey now, I've been PhD-only for the last few weeks! I'm allowed to work on Jupyter stuff _sometimes_ :stuck_out_tongue: \n awesome!  I like this :cake: :fireworks: \n Just one mark-related test failing. I like this idea. UI-wise, I would prefer more spatially associated indicator like 'N marked cells \u2191' at the top of the notebook area and 'N marked cells \u2193' at the bottom, but I think this is the right fix given the current APIs/events, etc..\n @minrk yeah, I also think something along those lines would work a little better, but would also be trickier to implement well.\n Rebased.\n I like this behavior\n I would try not-orange. It's not really a problem, or an error. \n Good point\n\nOn Thu, Oct 29, 2015 at 2:07 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I would try not-orange. It's not really a problem, or an error.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/683#issuecomment-152268907.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Ok, comments addressed. I changed it to a notification with a white background.\n Isn't there a bootstrap info tag that we are using for some notifications?\nI think it shows up as blue?\n\nOn Thu, Oct 29, 2015 at 2:42 PM, Jessica B. Hamrick <\nnotifications@github.com> wrote:\n\n> Ok, comments addressed. I changed it to a notification with a white\n> background.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/683#issuecomment-152282467.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Sure, I could also have it be blue. I guess it depends on how visible we want it to be.\n Merging once Travis happy, and let's play with it a bit. \n +1\n\nOn Thu, Oct 29, 2015 at 2:53 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Merging once Travis happy, and let's play with it a bit.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/683#issuecomment-152285756.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Ok, I think this actually doesn't depend on #676 anymore, so I will rebase onto master so we can merge this. Running tests locally first just to be sure...\n Travis is happy! I'll let someone else merge, though.\n Awesome!  Thanks @jhamrick \n","Looks like there's a mode-related change that's causing test failures.\n > Looks like there's a mode-related change that's causing test failures.\n\n@minrk yeah as I mentioned, the tests will fail for this PR until #676 is merged and I can rebase on top of that.\n @Carreau @ellisonbg I have addressed your comments. I added back in the call to `command_mode` since I realized it actually did get called multiple times before (once in `execute_cell_range` and once each time `execute_cell` was called), so now it gets executed twice (once in `execute_cell_range` and once in `execute_cells`). I am not sure if it is really necessary to call the command mode function inside the loop, though I can have it do that, too, if necessary.\n OK great. Let's just test the various behaviors interactively really well...\n Ok, rebased, tests should (hopefully) pass now.\n","@Carreau Thanks for sharing. Python 2 or 3 or both? I think there is an ubuntu difference than the general linux.\n 3 in my case, but the issues where not python-version specific. They where more with Javascript/css building tools (invoked through python though).  \n Did you happen to dump the screen? It may be some weirdness with ubuntu and purging node/nodejs before installing again.\n\nI will try to check on my ubuntu laptop later.\n it was a mixed of issues, like no permission to write to /user/local, nodejs being a different name, and so on an so forth, so really hard to debug fro lambda user. \n Yeah, I had the same problems too, and I tried so many times to build it, especially building css/js.\n @Carreau did you try a conda-based installation... you can get nodejs and bower easily from the javascript channel... it should reduce your pain a lot...\n","(not sure if worth for 4.1)\n I can take a go at this. I ran into a few other related things that sort of\ngo with this.\n\nOn Thu, Oct 29, 2015 at 1:00 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> (not sure if worth for 4.1)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/686#issuecomment-152249124.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Actually I think this is because we havent' finished moving al menus to actions. \n Should I tag this as 4.1 ?\n If you want, sure. No harm in marking now and then punting if we don't get around to it.\n closed by #692\n","@Carreau Made a few edits. Use what works for you :smile:\n Thanks. \n\nI added you on my fork, so you can do correction directly if even needed. \n (and I incorporated your version) \n Do we want to unbind the keyboard shortcuts in this release (for heading\ncells)?\n\nOn Thu, Oct 29, 2015 at 7:44 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> (and I incorporated your version)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/687#issuecomment-152358369.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n \"You shall not break user keyboard shortcut in minor releases\"\n\n(-1 in unbinding in general, I, at least, use them extensively)\n\nEnvoy\u00e9 de mon iPhone\n\n> Le 29 oct. 2015 \u00e0 19:42, \"Brian E. Granger\" notifications@github.com a \u00e9crit :\n> \n> Do we want to unbind the keyboard shortcuts in this release (for heading\n> cells)?\n> \n> On Thu, Oct 29, 2015 at 7:44 PM, Matthias Bussonnier <\n> notifications@github.com> wrote:\n> \n> > (and I incorporated your version)\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/pull/687#issuecomment-152358369.\n> \n> ## \n> \n> Brian E. Granger\n> Associate Professor of Physics and Data Science\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n> \u2014\n> Reply to this email directly or view it on GitHub.\n","+1, will merge soon if not someone else.\n","rebased to force github to refresh the diff. \n Ping @jhamrick who might help for naming too. \n Maybe `cell` instead of `cells`, but I think either is fine, really.\n > Maybe cell instead of cells, but I think either is fine, really.\n\nfor the 3 of them ?\n\nRe-ping @ellisonbg \n I should be able to look at this tomorrow\n\nOn Tue, Nov 3, 2015 at 2:16 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Maybe cell instead of cells, but I think either is fine, really.\n> \n> for the 3 of them ?\n> \n> Re-ping @ellisonbg https://github.com/ellisonbg\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/692#issuecomment-153458944.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Despite that you contradict yourself from before (that wouldn't be the first time :-P )\n\nI implemented your change and did the `visibility` -> `collapsed`, `scrolling`->`scrolled` changes on other actions and places. \n LOL, yes I definitely contradict myself at times - or change my mind. Can\nyou clarify my inconsistency in this case? I don't intend to be\ninconsistent here :)\n\nOn Thu, Nov 5, 2015 at 12:56 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Despite that you contradict yourself from before (that wouldn't be the\n> first time :-P )\n> \n> I implemented your change and did the visibility -> collapsed, scrolling->\n> scrolled changes on other actions and places.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/692#issuecomment-154137812.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n well you fought in a previous issue to name the action for a single cell \"visibility\" and now for multiple cell you want \"collapsed\".\n Ahh, sorry I wasn't clear. When I did the initial action re-naming, I knew\nthat these actions in particular were going to need some additional work\nthat would probably be informed by the new model design we were doing.\n\n@jasongrout and I had a conversation yesterday discussing if \"collapsed\" or\n\"visible\" is the right word to use here and in the new models. Because the\nUI will need to display _some_ visible representation indicating that an\noutput or input is present by not fully seen, I don't think the word\n\"visible\" quite captures it - it is visible, just not in its full\nrealization - in other words, it is \"collapsed\". So I think the actions and\nmodels should use this name rather than visible.\n\nDoes that make sense?\n\nOn Fri, Nov 6, 2015 at 10:44 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> well you fought in a previous issue to name the action for a single cell\n> \"visibility\" and now for multiple cell you want \"collapsed\".\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/692#issuecomment-154442047.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I was not discussing your choice, I was just pointed the inconsistency, The current state of the PR use collabsed everywhere. \n OK sounds good :)\n\nOn Fri, Nov 6, 2015 at 4:47 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I was not discussing your choice, I was just pointed the inconsistency,\n> The current state of the PR use collabsed everywhere.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/692#issuecomment-154551593.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","I would definitively support a switch a to a sane date format (as well as Celcius and Meters, if we ever had a Temperature and distance indicator).\n\nPotentially using letters abbreviation for month which are unambiguous regardless of order. \n\n@ellisonbg ?\n +1\n\nSent from my iPhone\n\n> On Oct 30, 2015, at 7:58 PM, Matthias Bussonnier notifications@github.com wrote:\n> \n> I would definitively support a switch a to a sane date format (as well as Celcius and Meters, if we ever had a Temperature and distance indicator).\n> \n> Potentially using letters abbreviation for month which are unambiguous regardless of order.\n> \n> @ellisonbg ?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n","Can't reproduce but saw it on @jhamrick screen which is on master and on same chrome version than me (46)\n Happens for other kernel types, too. Not terminals though:\n\n![image](https://cloud.githubusercontent.com/assets/83444/10860868/0e076f6a-7f2d-11e5-9528-687262d4fa4d.png)\n Needed to update javascript components, bleh.\n","+1 Ping @ellisonbg \n","@jhamrick For the benefit of others until we get the above completed, there is some info in the existing README file, scattered info in issues, and some in the docs themselves. Huge +1 to consolidating.\n","Anything here that I'm missing? Anything else that would be useful to know that didn't occur to me (or that I'm not aware of)?\n @jhamrick Heading to the airport but it looks good on my initial skim (definitely better than what we had before). \n\nOnly thing that you might consider adding to the `tools/post-checkout` script is a check at the start to see if the symlink was created. If it hasn't been created, perhaps exit with a message to create the symlink.\n The git hooks are already in the `git-hooks` directory, along with a README explaining how to use them.\n Oh, hmm, not sure how I missed the git-hooks directory. Ok, will update this to refer to that and to remove the post-checkout hook that I added.\n Done.\n Awesome, thanks!\n Nicely done @jhamrick. Thanks :ocean:\n","I can reproduce. You don't even have to click on a link. If you render a Markdown cell with a heading, then click on the paragraph link to the right of the heading, the URL of the page will update to point to that location on the page, and then you will see the scroll problems if you try to scroll away.\n\nMarking for 4.1 as I am worried that this is related to some scrolling changes we have made recently.\n Sorry, meant marking as 4.1. We should look at this before release to make sure it isn't a _new_ bug.\n this is much more annoying that that. \nIt's actually happening every time a notification is updated. \n\nExample:\n\n```\nIPython.notification_area.widget('kernel').element.toggle('slow')\n```\n\nIt seem to be that Chome scoll to anchor on repaint/reflow.  Not sure what we can do (except removing the even on scroll that will mitigate the issue). \n\nChris might now what to do ?\n\nCC @jhamrick \n That's bizarre. The problem also seems to go away if you do something like saving after clicking on the anchor link. I wonder if it has something maybe to do with what element is focused?\n Additional note, \n\nIt **is** a reflow problem as if you **resize** the windows the element will scroll back to the anchor. I looked at window.selection, and documetn.activeElement i'm not sure if we can get around\n @sccolbert might have encountered that in Phosphor and have an idea ?\n I think the issue is that Chrome tries to make focused input fields visible on screen, whether they have visibility set to hidden or not. CodeMirror uses one of these hidden input fields to capture key/text input. My guess is that it's scrolling to make sure that hidden field is \"visible\" in the viewport. \n\nFor the record, I think it's an awful behavior on the part of the browser.\n Hmm, so I've narrowed it down to if you call `IPython.notebook.create_checkpoint()` then it causes the issue to go away, but `IPython.notebook.create_checkpont_success()` by itself doesn't, so that means that something that the contents API is doing causes the problem to go away. If I do something else with the contents API (like listing checkpoints), it also seems to cause the problem to go away. So maybe we can look at what's going on there and find a solution to the problem?\n\n@sccolbert would that behavior be consistent with CodeMirror's hidden input fields? It sounds to me like those would be separate things, but maybe there's something under the hood I don't know about.\n I have an ugly fix: \n\n```\nh.append(\n                        $('<a/>')\n                            .addClass('anchor-link')\n                            .attr('href', '#' + hash)\n                            .text('\u00b6')\n                            .on('click',function(){\n                                setTimeout(function(){that.unrender(); that.render()}, 100)\n                            })\n                    );\n```\n Yeah, that seems to fix it for me, too.\n @jhamrick if we have code mirror instances on the page, they are going to have their hidden input fields lying around. I don't have the time to dig into it to see if that's the actual cause, but that's where I would start looking if I did.\n Another hacky fix which is maybe slightly less overhead is to use `$.ajax()` instead of unrendering and re-rendering the cell.\n > to use $.ajax()\n\nto do what ? Just empty call works ?\n Yeah. Don't ask my why, because I have no idea, but it seems to work for some reason.\n Also we might want to do that on all the  `html.find(\"a[href]\").not('[href^=\"#\"]')` as people can create their own link, though we need to do it on the target cell that have the link, not the source cell, which is more difficult. \n Yeah, that's a good idea, though you also don't want to do it on all links, just those that are anchor links. I think it would be sufficient to do find the `a` tags like you have there but then filter through them to only apply the function to those that start with `#`.\n I think we should figure out what the root cause is and fix that, rather than adding undocumented hacks all over the place.\n I agree it would be better to figure out what the root cause is, but I unfortunately don't have more time to spend on tracking it down today.\n This is the type of nasty thing that will bite us in unexpected ways unless\nwe find the root cause and fix it properly. I think we should live with the\nbug until we find the root cause.\n\nOn Thu, Nov 5, 2015 at 5:30 PM, Jessica B. Hamrick <notifications@github.com\n\n> wrote:\n> \n> I agree it would be better to figure out what the root cause is, but I\n> unfortunately don't have more time to spend on tracking it down today.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/699#issuecomment-154216110.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Hello everyone. I'm having the problem described in this issue. Is there are way I can (even temporarily) fix this while you find ways around the root cause? (I really appreciate your work!)\nThanks for your help.\n @flothesof #706 should work as a temporary fix for now.\n I also see this, but I also use a TOC plugin, so clicking a link to a headline is happening a lot with me :-(\n I'll reopen to think of a real fix, and not a workaround. Once we fix it we ca revert #706.\n The workaround (I manually patched textcell.js, cleaned cache, restarted the browser and the server and used private mode to open a notebook) also does not work when you use a ToC extension, which links to headlines. Interestingly, it behaves badly after I click on such a link (which changes the URL to `http://localhost:8888/notebooks/whatever.ipynb#headline-text`), but not when I (re)load such a tab (which also switches to that place). \n\nAnother observation: after clicking a link, I can't click on anything without jumping back. Even when I try to click on another headline \"P\" (which displays the right new link on hoover), I jump back to original selected headline. In \"Inspect element\", I see that the right cells get the \"selected/unselected\" tag, but I end up with the originally selected cell showing on the top of the currently visible part of the page.\n\nThis makes the ToC extensions basically useless :-(\n Just to point out here that the workaround above is _only_ for the toc extension in the IPython-contrib repo, and is essentially a simple call $.ajax() as suggested above by @jhamrick. The root of the problem is still unclear. \n Guys the problem still exists, every time I save or when the notebook autosaves it jumps to my latest markdown heading. While coding, it is a real nuisance. This page is the only ray of hope offering a solution, but could you please elaborate a bit more on what and how and where to $.ajax()? as I have no idea at this point in my career. Thank you.\n > Guys the problem still exists, every time I save or when the notebook autosaves it jumps to my latest markdown heading. While coding, it is a real nuisance. This page is the only ray of hope offering a solution, but could you please elaborate a bit more on what and how and where to $.ajax()? as I have no idea at this point in my career. Thank you.\n\nare you using the TOC extension ?  And which version of the notebook ? Because that should have been fixed by #699.\n I am not using a TOC, although I am very much tempted, but I am concerned it will make the jumping worse. I am using jupyter 4.1.0. I upgraded less than a month ago, but I just upgraded again and restarted my session, and so far it seems there are no jumps. I will report back of the persistency of the issue or lack of it. Thanks. \n > I upgraded less than a month ago, but I just upgraded again and restarted my session, and so far it seems there are no jumps\n\nOk great ! Sorry about the jump thing. \n\n> will report back of the persistency of the issue or lack of it. Thanks.\n\nGreat ! Appreciate it !\n Oh not at all, I highly appreciate the effort you put into jupyter. So far I did not have an issue anymore. I do not know what it was, because I updated less than a month ago and I updated again and it seemed to have gone away. I will report if I encounter it in future, thanks.\n","@flying-sheep can you elaborate?\n He got the wrong link : http://getbootstrap.com/css/#unstyled\n\nlist with `class=\"list-inline\"` should get no decoration. our rendered-html class override that.\n the link is as good as yours ;)\n\nwhat this bug is actually about: we should decide on either removing or embracing the bootstrap classes.\n- removing means that we compile the .less in a way that skips the parts we don\u2019t use in UI, or prefix bootstrap with `:not(.rendered_html)`\n- embracing means that we override carefully enough to not break the bootstrap classes in the rendered html.\n > the link is as good as yours\n\nWrong as anchor could be more precise. we are lazy and don't read far :-) \nWe'll try to do better.\n i linked the semantically superordinate header, you linked a wrong one :stuck_out_tongue_closed_eyes: \n any opinions on this?\n Up to now we have been pretty deliberate to keep bootstrap out of the\nrendered-html, to allow that content to be used outside of a bootstrap. My\ninitially though it to keep it that way. I am still now quite clear on what\nthe bug/problem is associated with this issue. Is there a way of fixing it\nwithout starting to use bootstrap in the rendered html?\n\nOn Wed, Aug 26, 2015 at 2:09 AM, Philipp A. notifications@github.com\nwrote:\n\n> any opinions on this?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/7#issuecomment-134908908.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Up to now we have been pretty deliberate to keep bootstrap out of the\n> rendered-html\n\nWe have been, many libs (pandas) rely on bootstrap css leaking in. \n I know we have places (widgets) where we use bootstrap in the notebook\ncontent as well. While I like bootstrap, it definitely complicates things\nlike this.\n\nOn Wed, Aug 26, 2015 at 7:22 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Up to now we have been pretty deliberate to keep bootstrap out of the\n> rendered-html\n> \n> We have been, many libs (pandas) rely on bootstrap css leaking in.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/7#issuecomment-135038229.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n well, we could define a set of classes and styles that are guaranteed to be available in a notebook for HTML content.\n\nor we could explicitly say that nobody should expect any CSS class to be defined.\n\nor we could provide a hook that kernels can use to insert their own CSS without having to run a cell.\n > or we could provide a hook that kernels can use to insert their own CSS without having to run a cell.\n\nYep, but that complicate installation, and introduce extra problem, but its the kind of things that are on the back of our mind. \n ah, i rather thought about runtime (included in the first handshake between kernel and frontend)\n\nbut of course including it in the kernelspec would also make sense. maybe one list of stylesheets and one list of scripts to include? or just one of each?\n Neither, you might have installed package that want to register things later after kernel start, and you most likely want lazy loading. I think that the kind of stuff where we want a working group from `Haskell/Julia/Python/(a few other)` of people that know what they want and have enough inside knowlege of how Jupyter and their language work to design something that suite everyone. IBM is working on that IIRC. \n > Neither, you might have installed package that want to register things later after kernel start\n\nwell that\u2019s trivial. simply do `display_javascript('''...''')` or `display_html('''<style>...</style>''')`\n > well that\u2019s trivial. simply do display_javascript('''...''') or display_html('''<style>...</style>''')\n\nWon't work or you have to display that which every call, and will break at notebook load as `<scripts>`might not be evaluated in order. \nOr you get an `init()` step, but the user remove the cell and it break, or does not work through conversions.\n\nAlso people use themes, so want kernel to display things with their theme. \n\nAnd also complain if your conversion to PDF does not apply the CSS style. \n\nSo I would'nt call that \"trivial\"\n well, i just meant inserting CSS or running JS\n","I'm sorry the removal of .py notebook import has hurt you. You may be interested in [ipymd](https://github.com/rossant/ipymd), which stores notebooks as markdown files, which are more easily diffed and merged than JSON files. We will also be adding import functionality to nbconvert, which may be useful for workflows of this sort.\n","As a data point, I have added explicit flushing of stderr in a local copy of joblib (as suggested by @ellisonbg according to https://github.com/scikit-learn/scikit-learn/issues/5811), but it didn't solve the problem.\n\nTechnically, stderr shouldn't be buffered (according to Unix specs), so in theory it shouldn't make a difference.\n > IPython console\n\nThe author means plain IPython, using `$ ipython console` (yes this is a thing) I can reproduce that. So this is likely to be something deeper of the internal of the protocol than something notebook specific. \n As I looked a bit at these problems a long time ago, when I was working on the IPython Qt console, I have a hunch that this is due to the way we capture outputs of processes. It's probably not trivial to fix (sorry, :$). I suspect that using some Unix-specific stuff (ie not Python such as stream redirection to a named pipe) might help on the Unix side, and maybe some windows-specific stuff too (the equivalent in Windows, which I don't understand well). The good news that solving such a problem is certainly possible, as something like travis-CI captures output and redirects to web without any problem.\n hm... @minrk might have some insights?\n There is some funkiness in how we capture output from forked processes that proves to be quite fragile. I will try to investigate what's going wrong in this case.\n Once I finish it, this should be fixed by ipython/ipykernel#85\n > Closed #700 via ipython/ipykernel#85.\n\nGood job! Thanks\n Awesome! Thanks guys!\n","We will think about it...\n subscribing, did discuss that in person, might be doable with `kernel.js`. \n in `kernel.js` next to your `kernel.json`\n\n```\ndefine(['notebook/js/codecell'], function(codecell_mod){\n    return {'onload': function(){\n        codecell_mod.CodeCell.input_prompt_function = function (prompt_value, lines_number) {\n                return 'gp>';\n            };\n    }}\n})\n```\n does no work on FF 38.2 linux.\n Crazy firefox need to actually `codecell_mod.CodeCell.**prototype**.input_prompt_function` even if it's a class method. \n See https://github.com/jdemeyer/pari_jupyter/blob/master/spec/kernel.js for a use-case. It just needs some extra code to actually redisplay the existing prompts.\n","I am fine removing it, but I plan on submitting a PR afterwards (still for\n4.1) that adds back another shortcut for this. I feel it is too important\nto not have.\n\nOn Tue, Nov 3, 2015 at 6:03 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> The shortcut is not agreed upon form 4.1, and is useful only for\n> non-contiguous selection, or deselection only part of a selection, thus I\n> propose to just remove it from 4.1 and add it for 4.2 if requested.\n> \n> ## It is also relatively easy to activate with custom.js\n> \n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/jupyter/notebook/pull/703\n> Commit Summary\n> - unbind ctrl-space for now\n> \n> File Changes\n> - _M_ notebook/static/notebook/js/keyboardmanager.js\n>   https://github.com/jupyter/notebook/pull/703/files#diff-0 (1)\n> \n> Patch Links:\n> - https://github.com/jupyter/notebook/pull/703.patch\n> - https://github.com/jupyter/notebook/pull/703.diff\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/703.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n What shortcut did you choose? why ?\n\nKeep in mind that people can still:\n- mark multiple contiguous cell with keyboard, \n- unmark with keyboard\n- mark non-contiguous with mouse.\n- unmark non-contiguous with mouse. \n\nI don't see why this would be more important than:\n`click-first`, `Shift-click` last : mark a range.\n\nAnd I would **really** prefer not to get a wrong shortcut for 4.1, and test the water with usability test, than to guesswork.\n I was going to pick \"G\" for \"group\".\n\nI don't think that user tests will be able to tell the difference between\nthe options we are looking at (WETG). A carefully designed user test could\npossible tell the difference between no shortcut for this and a shortcut. I\nam willing to think about how we can do that test with some external folks,\nbut I would want to delay 4.1 for that. A simpler approach is to do what we\ndid with the ctrl-space - commit a new possibility to master and have us\nall try it out during the beta process.\n\nIt is really important that when we release new features, they don't have\nusability problems from the start. We can't afford to accumulate design or\nusability debt. I realize that I don't represent all users, but I have\n_only_ used the new cell selection with the ctrl-space shortcut. That\nevidence is strong enough for me that I feel we need to at least make a\nstrong attempt to try and figure this out for 4.1.\n\nI also think there is a space in between formal usability testing and\n\"guesswork.\" We have mostly built our current UI by trying things out\nourselves and seeing if we can find behaviors we all agree work well. Let's\ntry to do that _first_ before declaring failure.\n\n[as an aside, this is further evidence that we shouldn't mix new features\nthat involve usability/design in bug fixes releases - it is slow work]\n\nCheers,\n\nBrian\n\nOn Tue, Nov 3, 2015 at 9:06 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> What shortcut did you choose? why ?\n> \n> Keep in mind that people can still:\n> - mark multiple contiguous cell with keyboard,\n> - unmark with keyboard\n> - mark non-contiguous with mouse.\n> - unmark non-contiguous with mouse.\n> \n> I don't see why this would be more important than:\n> click-first, Shift-click last : mark a range.\n> \n> And I would _really_ prefer not to get a wrong shortcut for 4.1, and test\n> the water with usability test, than to guesswork.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/703#issuecomment-153547759.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n G disturb me, G for me is \"Go to\"  it's in many web application, 2 of those I use the most: Gmail and GitHub\n\n```\ng then i :  Go to Inbox\ng then s :  Go to Starred conversations\ng then t :  Go to Sent messages\ng then d :  Go to Drafts\ng then a :  Go to All mail\ng then c :  Go to Contacts\ng then k :  Go to Tasks\ng then l :  Go to Label\n```\n\nVim and atom have such bindings too, so I'm not favorable to G.\n\nAre you using contiguous selection or not? If you are, then Ctrl-Space I think you took a bad habit, instead of Shift-J/K/up/down\n\nIn general anyway I think that Shift-J/K/up/down have a bad behavior. \nFrom a notebook with 0 cell marked, I would expect Shift-J,J,J,J,J,K,K,K to only mark  2 cells, as any other Shift-selection-based-UI do, but I'm fine admitting I am the only one. \n Great point about \"G\" - let's reserve it for \"go to\" style actions.\n\nAre you using contiguous selection or not? If you are, then Ctrl-Space I\n\n> think you took a bad habit, instead of Shift-J/K/up/down\n> \n> I use ctrl-space for both contiguous and non-contiguous selections. I have\n> gotten used to this UI from using the keyboard shortcuts of Gmail where\n> shift-up/down are not provided.\n> \n> In general anyway I think that Shift-J/K/up/down have a bad behavior.\n> From a notebook with 0 cell marked, I would expect Shift-J,J,J,J,J,K,K,K\n> to only mark 2 cells, as any other Shift-selection-based-UI do, but I'm\n> fine admitting I am the only one.\n> \n> Yep, that is a bug, let's fix it.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I'm going to merge to get user complaint from users using master. \n +1\n\nOn Thu, Nov 5, 2015 at 11:08 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Merged #703 https://github.com/jupyter/notebook/pull/703.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/703#event-455890337.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Yep, that is a bug, let's fix it.\n\nUnfortunatly no, this was a **design decision** made when removing @takluyver multi-**selection** and replacing it with **marked** cell. The replacement  was done, I think, in a hurry (you can look at https://github.com/jupyter/notebook/pull/597 history) without trying to understand what the `anchor` was for and how /why the multi-selection was what it was. \n\nUpdating how the selection with shift-J/K work mean reintroducing roughly most of what @takluyver did, or go through some convoluted,brittle and full of edge cases logic about what Shift-J/K are doing. \n","Hum, works for me on firefox, does it do it on checkbox on other website ? I doubt there is anything we can do. \n Sorry, you're right, I should have checked. I see that Firefox behaves so in Ubuntu with any checkbox/radiobutton.\n","This is inherent to the way the cell-marking is currently implemented. \nThe notion of anchor and cursor in the selection that @takluyver did implement fro multi-selection was removed, while it was one of the only decent way to actually track this kind of selection behavior without a lot of brittle heuristic. \n\nWe might be able to track wether shift-J/K extend or contract the cell marking by looking at wether the cursor is at beginning or end of contiguous marking. Though this become ambiguous in some case where you have non-contiguous marking. \n\nWe cannot either track wether shift was keeped pressed as you can do Shift-J,J,J leave you keyboard then again Shift-J,K,K and should end up with 2 cell selected. \n\nOne of the correct way to implement that is to have the current \"selection\" be composed of a cursor (which is the one you move with J,K, and arrow keys) and an \"Anchor\". The anchor is _in general_ always on the same cell as the cursor, except when you press shift, in which case the _Anchor_, stays on it's current cell. \n\nSee this UI prototype where the anchor is explicitly marked by a Cyan background:\n\nWhen shift is pressed, you can see that the cursor move independantly from the anchor. \n![anchor](https://cloud.githubusercontent.com/assets/335567/10983609/89d273e8-83c8-11e5-9475-f0220ad2314f.gif)\n\nThe default moving J/K always bring back the **anchor** and the **cursor** together.\n\nI propose we reintroduce the the concept of **multiple selection** where all cells in between the anchor and the cursor are **selected** (and thus implicitly marked), then provide 2 shortcuts: \n- mark all cell in selection \n- unmark all cells in selection\n\nFor which `+` and `-` would be good shortcut candidates. \nThis would make the process of multiple selection/marking much closer to all other  UI exposed to user. Plus this would allow Shift-J/K to deselect marked cells, and will allow most action to be done without an explicit marking. By not needing explicit marking we would also get rid of  lots of issues of having marked cells out of the screen. \n\nThoughts ?\n\nPing @ellisonbg, @jhamrick , @jdfreder \n I think bringing back the multiple selection is fine, as long as no logic is multiselect only, and is always union(multiselect, marked).\n Multi select has nothing to do with what action apply to. this is action responsibility. \n\nBut yes, we still apply commands to the union. \n Let's just fix shift-j/k. Here is one possible decision set we can use\ninside `extend_marked`:\n\n(old selection) -> (new selection) = (action in extend_marked)\nmarked -> unmarked = do nothing\nmarked -> marked = do nothing\nunmarked -> unmarked = mark the old one\nunmarked -> marked = unmark the new one\n\nI am pretty sure gives the standard behavior of shift-j/k and even works\nfor multiple separately contiguous blocks selected this way.\n\nOn Fri, Nov 6, 2015 at 12:51 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Multi select has nothing to do with what action apply to. this is action\n> responsibility.\n> \n> But yes, we still apply commands to the union.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/707#issuecomment-154484129.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I'm pretty sure it won't work (X for marked , < for cursor, perssion Shift-J many time):\n\n```\nX<  X   X   X   X   X   X    X\nX   X<  X   X   X   X   X    X\n         <  X   X   X   X    X\nX   X   X    <                \n                X<  X   X    X\n                     <        \n                        X <  X\n                              <\n```\n\nJust before after;;\n\n```\nXX\nXX\n X\nX \n X\n\n X\n\n```\n fixed !\n","ping @ellisonbg , @jdfreder \n Now with ability to toggle the marking on the multiple selection, with `+`/`-` bound to add marking to cell, remove marking from cell. thus when many cells are selected with different marking, it's easy to put them all in a state, while toggling is weird. \n\n![many marked](https://cloud.githubusercontent.com/assets/335567/10986321/d31854cc-83dd-11e5-9ad7-a3e612c998a2.gif)\n Ok, styling is a bit better, I did 1 random user testing. \n\nFirst key thought for:\n- Toggling mark state  : tilde and bang. (cells.marked ^true)\n- mark cells (cell.mark=true) : star\n- unmark cell (cell.mark = false) : backspace. \n <img width=\"188\" alt=\"screen shot 2015-11-05 at 22 19 10\" src=\"https://cloud.githubusercontent.com/assets/335567/10990738/5fe1bf1a-840b-11e5-9fb2-fb87554e6d3b.png\">\n\nPlaying a little bit more with style. I't possible to make some nice visual change, that are more visible than change in thickness. Also wit the arrow it becomes natural to \"mark\" with the right arrow-key, and to un-mark with the left. \n I love the little arrows, and if it also means it solves our hotkey problems by making right/left arrow keys the natural winner, +1\n 3 useful set of keybindings:\n\n``` js\n\nvar c = IPython.keyboard_manager.command_shortcuts;\n// A\nc.add_shortcut('Ctrl-space','jupyter-notebook:toggle-cell-marked')\n\n\n// B\nc.add_shortcut('minus','jupyter-notebook:unmark-selected-cells')\nc.add_shortcut('+','jupyter-notebook:mark-selected-cells')\n\n\n// C\nc.add_shortcut('left','jupyter-notebook:unmark-selected-cells')\nc.add_shortcut('Shift-left','jupyter-notebook:unmark-selected-cells')\nc.add_shortcut('right','jupyter-notebook:mark-selected-cells')\nc.add_shortcut('shift-right','jupyter-notebook:mark-selected-cells')\n```\n\nI don't like A. \n I don't understand the motovation for this PR. Master currently has a very clean set of abstractions that encode the idea of a cursor or active cell (selected) and a set of cells that are the target of an action (marked). These two abstractions are needed because of how selected is inextricably tied to the browsers notion of focus. The only issue we have right now in master is the awkward functioning of the shift-j/k keyboard shortcuts and the `extend_marked` method those use. Let's just fix that.\n\nThis PR introduces a third abstraction (soft selected) that conflates and confuses all of this in a really awkward way. And the changes are not just implementation details that fix the shift-j/k shortcuts. It mixes it with new concepts and interactions in the UI that are overly complex.\n\nFrom the beginning of when @jdfreder and I started to talk about the marked cell concept, I was aware we would have to think carefully about how shift-j/k work. My design of the marked cells included background threads thinking about it.\n\nI see two ways of fixing it:\n- Remove the shift-j/k shortcuts and just support a Gmail style multiple style multiple selection. It is dead simple, conceptually clear and trivial to implement. It is also efficient if we pick a good shortcut for toggling marked.\n- Keep shift-j/k but add a simple state machine to the `extend_marked` methods that gives the canonical behavior. I think we could get most of the way there by simply looking at the marked state of the current cell before extending and using that information. We may need a notion of an anchor that these methods manage, but I am not at all convinced of that. But even if we do that should be an internal detail of these methods that doesn't propagate to the rest of the API or the user.\n I honestly do not know how to do shift-J/K with a state machine correctly.\n\nAnd again, if it's a state machine I do not know how we will describe to user how it works. \n\nAnd personally I see a leakage of abstraction between marked state and selected state. Which is better now that the selected cell is implicitly marked. \n\nThis is my attempt at fixing it. In all normal user UI, not only would Shift-J/K/Up/down work with anchor/cursor, but once you have a selection moving the cursor deselect all. Which is not what the notebook does. Which we try to work around with indicators of the number of marked cell. \n\nFor me the marked marked state is useful but **is** the complicated part of the API. It **is** the state-full part that need the user to keep in it's mind. \n\nIn my opinion, there are many more user **just** need contiguous select than user that need marked cells. \n\nAnyway, this is a PR to see what can be done, I'm ok for it to not be merged, \nbut after playing with it for a day, I like it much more that the current branch than master. I even doubt of the usefulness of non-contiguous selection. \n > // C\n> c.add_shortcut('left','jupyter-notebook:unmark-selected-cells')\n> c.add_shortcut('Shift-left','jupyter-notebook:unmark-selected-cells')\n> c.add_shortcut('right','jupyter-notebook:mark-selected-cells')\n> c.add_shortcut('shift-right','jupyter-notebook:mark-selected-cells')\n\nI definitely prefer this one.\n > Remove the shift-j/k shortcuts and just support a Gmail style multiple style multiple selection. It is dead simple, conceptually clear and trivial to implement. It is also efficient if we pick a good shortcut for toggling marked.\n\nThis is probably the best idea for now, since it seems there is a general disagreement on the behavior and falling back to providing neither is simple.\n\nAlthough @Carreau I still like the arrows and the left/right kb shortcuts instead of toggle.  Also, implementation details aside, the head/anchor notion of selection is definitely the most intuitive for the unexpecting user.\n Thanks @jdfreder.\n\nAnother option would be for j,k,up,down and other \"just-select\\* action to **by default** to unmark all. Not with shift of course. I think that would be less surprising. \n Just want to point out that if you remove the shift-j/k shortcuts and only have toggling for marking cells, merging two cells becomes really onerous:\n\n```\n[mark] j [mark] shift-m\n```\n\nas opposed to\n\n```\nshift-j shift-m\n```\n\nwhich is already two keystrokes more than it used to be before multi-selection was added.\n > [mark] j [mark] shift-m\n\nNote that you can leave the second `[mark]`. \n one things to fix: \n\nThe css make the tooltip disapear. \n\nI'm worked a bit with  both master and this branch this week end. \nThe behavior of cell marking it often annoying. \n\nON master, I've been caught off guard many time by extra-cell being marked, leading to cell deletion and execution of things I was not expecting.\n\nI'me starting to lean toward -1 on multiple marking **with the keyboard**, I'm find with mouse+click to multiple-select, but I think any keyboard action should (after the action) reset the marked cell to all-unmarked (except Shift-J/K of course) \n I am not sure I understand the issue, can you clarify?\n\nSent from my iPhone\n\n> On Nov 8, 2015, at 11:03 PM, Matthias Bussonnier notifications@github.com wrote:\n> \n> one things to fix:\n> \n> The css make the tooltip disapear.\n> \n> I'm worked a bit with both master and this branch this week end. \n> The behavior of cell marking it often annoying.\n> \n> ON master, I've been caught off guard many time by extra-cell being marked, leading to cell deletion and execution of things I was not expecting.\n> \n> I'me starting to lean toward -1 on multiple marking with the keyboard, I'm find with mouse+click to multiple-select, but I think any keyboard action should (after the action) reset the marked cell to all-unmarked (except Shift-J/K of course)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n I will say this - I do wonder if we should remove marking after _any_\naction is performed. In the current state of master, I sometime do things\n(with both continguous and non-contiguous markings) that feel like it is\nweird to leave the marking after the action.\n\nOn Mon, Nov 9, 2015 at 11:34 AM, Brian Granger ellisonbg@gmail.com wrote:\n\n> I am not sure I understand the issue, can you clarify?\n> \n> Sent from my iPhone\n> \n> On Nov 8, 2015, at 11:03 PM, Matthias Bussonnier notifications@github.com\n> wrote:\n> \n> one things to fix:\n> \n> The css make the tooltip disapear.\n> \n> I'm worked a bit with both master and this branch this week end.\n> The behavior of cell marking it often annoying.\n> \n> ON master, I've been caught off guard many time by extra-cell being\n> marked, leading to cell deletion and execution of things I was not\n> expecting.\n> \n> I'me starting to lean toward -1 on multiple marking _with the keyboard_,\n> I'm find with mouse+click to multiple-select, but I think any keyboard\n> action should (after the action) reset the marked cell to all-unmarked\n> (except Shift-J/K of course)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-154912432.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Probably doesn't make sense to unmark on copy.\n > I will say this - I do wonder if we should remove marking after _any_\n> action is performed. In the current state of master, I sometime do things\n> (with both contiguous and non-contiguous markings) that feel like it is\n> weird to leave the marking after the action.\n\nI'm +1 on this. \n\n> Probably doesn't make sense to unmark on copy.\n\nI don't see why it doesn't. \n\n> I am not sure I understand the issue, can you clarify?\n\nSelect a bunch of cell, merge them, J,J,J, DD :  oops, deleted the merged cells.\n\nSplit Cell, Down, Shift enter : oops , also executed `cd..`\n > I don't see why it doesn't.\n\nConsistency with other programs, because copy doesn't affect selection / mark state in any program I can think of.\n > Consistency with other programs, because copy doesn't affect selection / mark state in any program I can think of.\n\nFair enough, \n\nThen do you agree that  J/K alone should deselect all like in any other programs ?\n > Then do you agree that J/K alone should deselect all like in any other programs ?\n\n~~Definitely!~~\n\nhmmm, good point.\n Um no, then how do you do discontiguous selections?\n\nOn Mon, Nov 9, 2015 at 3:10 PM, Jonathan Frederic notifications@github.com\nwrote:\n\n> Then do you agree that J/K alone should deselect all like in any other\n> programs ?\n> \n> Definitely!\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-155177203.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n With the mouse. \n\nThat's how most of the UIs of desktop browser works. \n\nOr that the point of my other PR with multiple selection **and** marking, where marking is an rare action that you do when you really need discontinuous selection, \nwhich frankly is rare. \n\nAlso the discontinuous selection have weird semantics, like if you mark every other cell and merge, where is the merged cell inserted ? \n I don't understand.\n\nEveryday, for hours and hours each day, I use a UI (Gmail) that only has\ndiscontiguous multiple selection driven by a keyboard (j/k/x). It is one of\nthe most productive user interactions of any software system I have ever\nused. I am willing to think through where our current design has problems,\nbut I am not willing to throw the baby out with the bath water.\n\nI agree that some actions should not work on discontiguous selections -\nthat is why we have methods on the Notebook class for querying if a set of\ncells is contiguous or not. Actions that should only apply to contiguous\nselections should use these methods to test the current selection.\n\nOn Mon, Nov 9, 2015 at 5:19 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> With the mouse.\n> \n> That's how most of the UIs of desktop browser works.\n> \n> Or that the point of my other PR with multiple selection _and_ marking,\n> where marking is an rare action that you do when you really need\n> discontinuous selection,\n> which frankly is rare.\n> \n> Also the discontinuous selection have weird semantics, like if you mark\n> every other cell and merge, where is the merged cell inserted.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-155217135.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Everyday, for hours and hours each day, I use a UI (Gmail) that only has\n> discontiguous multiple selection driven by a keyboard (j/k/x)\n\nthis UI is **disabled by default** You have to enable it in your preferences. \n\n> It is one of\n> the most productive user interactions of any software system I have ever\n> used.\n\nI dont' say that marking is bad **in general** I completely understand the usage, though the manipulation you make in gmail are quite different from what you do in a notebook. Like in Gmail you cannot merge mails. \nAnd each thread is roughly unrelated to each other :non-contiguous selection make sens. The probability you select thread N+1 is uncorrelated to Thread N. It is not the case in the notebook. \n\nj/x sequences to select N cells is twice the number of keystrokes that you need if using Shift-J, so I believe multiple selection is more useful that non-contiguous marking. \n\nI do understand the need of discontinuous marking, and I do not dismiss it's utility. \nI completely agree that we need an API for that. What I disagree with is the semantics on how it's applied. and I believe that the way it's implemented right now is incompatible with a non confusing UI/keyborad shortcut. \n\nI think that one of the possible solution is to have multiple selection. \n\n> I agree that some actions should not work on discontiguous selections -\n> that is why we have methods on the Notebook class for querying if a set of\n> cells is contiguous or not. Actions that should only apply to contiguous\n> selections should use these methods to test the current selection.\n\nI'm worried of the complexity involved here, and I would like to to reach 90% of users with 10% of the efforts. One of the reason I liked to videochat with you is to clarify the meaning of words selection/marking/soft_selection and so on and so forth, as most of the discussion are impaired by us using different term for same things, and same terms for different things.\n\nSo let's try to clarify what action we want the user to be able to do, scenario that we think should not happend/are confusing (regardless of implementation) and look at various possible implementation. I'll open a google docs for that. \n I'm trying to list problematic use case here: https://ipython.hackpad.com/Multiple-selection-W7KzQxYqMZp\n ping @fperez \n Some updates after discussion with @fperez on tuesday. \n\nShift-click now select a range, (I had to unbind `on('focus')` and keep relying on `onClick` which I'm not super happy about. \n Here is a prototype of the visual design from @cameronoelsen \n\n![screen shot 2015-11-20 at 2 03 33 pm](https://cloud.githubusercontent.com/assets/27600/11313156/a83cca68-8f8f-11e5-8bdc-9ceb96d91686.png)\n\nAdds MTD shadow on the selected cell, 3px wide multi-cell indicator.\n I would vote for a stronger visual hint, can we try a highlight of the background?  I know it will be hideous, but think of how it looks in the text box of this very editor (try it while editing a reply here). It's bright blue, ugly, meant to be absolutely unmistakable about where you are highlighting...\n\nIn gmail, the selection also uses reverse contrast ultra-bright colors.  Same in file managers.\n\nIn general, selections are marking parts of your workspace for \"drastic action\", so they are meant to be ugly, bright, impossible to miss.  I find these side marks way, way too small, and against every convention in UX of this kind in computing.\n That would change that appearance of the notebook too much for people not using multiple selection, I'm already not happy with adding the blue border. Also the shadow convey a change of height, I played with it, and it's visually annoying to have something which is visually not on the same level moving fast. \n Well, this would require the trick we discussed of making it work _only if two cells are selected_, which as you said, would be slightly elaborate... Is that completely impossible?\n I agree that we shouldn't be changing the style too much in 4.1. But part\nof that is that the grey border (of a selected+cursor cell) shouldn't be\nused for anything other than the cursor cell. Put another way, the cells\nthat are the target of actions should be styled using something other than\na grey border (at least in 4.1). In the long run, we can do larger redesign\nof these things, but that is out of scope for 4.1.\n\n@fperez we did play with cell backgrounds and it is going to be really\ndifficult to find something that 1) looks good and 2) isn't too much of a\nstyle change at this point. We can play more.\n\nOne simple knob we have is to increase the width of the blue markers to\nmake them more obvious.\n\nAnother point - many UIs like this (Gmail, Inbox, Google Cloud Datalab) are\nusing the left blue border as the _cursor_. We could do that but 1) it\nwould be a big change as it would replace the grey/green borders entirely\nand 2) it still doesn't solve the question of how we highlight the\nselected-but-not-cursor cells.\n\nOn Fri, Nov 20, 2015 at 2:23 PM, Fernando Perez notifications@github.com\nwrote:\n\n> Well, this would require the trick we discussed of making it work _only\n> if two cells are selected_, which as you said, would be slightly\n> elaborate... Is that completely impossible?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-158542875.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Gmail uses the blue border as 'cursor' but it does selections in very bright reverse highlight.\n\nI actually don't think that highlight needs to look particularly good, and I mean that :) In particular: highlight is, by definition, transient.  And while we don't want it to blink in pink and green stripes, the point of using very obvious colors that stand out is to flag to the user in an absolutely unmistakable way that this region is one where an action is about to happen.\n\nSo I'm not sure that a design constraint here should be \"looks good & isn't a big change\". I'd say the design constraint should be \"highlights the region in an unmistakable way to the user, without being hideous, it's OK if the UI looks temporarily a bit odd, since it's flagging an important and fleeting condition\".  \n\nJust my take on it...\n like that ?\n![bg](https://cloud.githubusercontent.com/assets/335567/11318482/6cdcfdd8-9054-11e5-8f46-9dcd993b0b2f.gif)\n I would actually be OK with something along the lines of that last one by @Carreau, probably a bit more muted, that's all... We can play with the colors, but I think that something that actually covers the whole cells and not only the edge would be better...\n\nDo folks feel it's really that ugly? Please play a bit with the highlight behavior of just about any text editor, gmail, file browser, word processor, etc: you'll see that they all use _very_ bright, obvious colors; ones that match the overall palettes of their environments but that stand out very strongly within the palette.\n\nAnd again, remember that this highlight is meant to be _transient_, so we're not talking about something meant to stay frozen in the UI permanently. It's by definition meant to flag a condition that will disappear soon.\n I am fine with \"a visual treatment that is more pronounced and uses more\ncolor\" - but simply coloring _everything_ without any attempt to create a\ndesign that works well isn't a solution. I don't think it is a matter of\npicking a different color - to do that right we would need to change the\nDOM structure of a cell to carefully constraint which parts of highlighted.\n\nBut more importantly, our conceptual model is completely different from\nboth text editors and selection UIs such as Gmail. In both of those cases,\nactions _never_ apply to the cursor. In our case, they _always_ apply to\nthe cursor. That super important fact isn't reflected in this design.\n\nThe final point that I feel is important is that orthogonal concepts should\nbe represented using orthogonal visual encodings in a minimal and\nconsistent manner:\n- Solid blue backgrouns is being used to warn the user about which cells\n  the action will apply to - but that encoding is not on the cursor cell\n  where most actions will be applied to.\n- The cursor cell is encoded visually using both a grey border and the left\n  blue thick border.\n- If you have large cells with lots of content, even selected a few of them\n  will turn your entire screen blue (or another color). That is maximal\n  visual encoding, not minimal.\n- The solid blue shading is so strong that it is really hard to see where\n  your cursor cell. Tracking it is very important as some actions (Return for\n  edit mode) will only apply to it.\n\n@Carrea - as an aside, it is really difficult to evaluate visual design\ndecisions when animated. Animations are perfect for evaluating interactions\nand behaviors. Could you post a static image of the visual design along\nwith the animation?\n\nOn Sat, Nov 21, 2015 at 10:12 AM, Fernando Perez notifications@github.com\nwrote:\n\n> I would actually be OK with something along the lines of that last one by\n> @Carreau https://github.com/Carreau, probably a bit more muted, that's\n> all... We can play with the colors, but I think that something that\n> actually covers the whole cells and not only the edge would be better...\n> \n> Do folks feel it's really that ugly? Please play a bit with the highlight\n> behavior of just about any text editor, gmail, file browser, word\n> processor, etc: you'll see that they all use _very_ bright, obvious\n> colors; ones that match the overall palettes of their environments but that\n> stand out very strongly within the palette.\n> \n> And again, remember that this highlight is meant to be _transient_, so\n> we're not talking about something meant to stay frozen in the UI\n> permanently. It's by definition meant to flag a condition that will\n> disappear soon.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-158668173.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Oh, I forgot the most important thing...\n\nBecause the conceptual model we are using is different from any other\nselection UI I know of, the visual design is actually really difficult. As\nof right now, I am not happy with anything we have proposed.\n\nOn Sat, Nov 21, 2015 at 11:45 AM, Brian Granger ellisonbg@gmail.com wrote:\n\n> I am fine with \"a visual treatment that is more pronounced and uses more\n> color\" - but simply coloring _everything_ without any attempt to create a\n> design that works well isn't a solution. I don't think it is a matter of\n> picking a different color - to do that right we would need to change the\n> DOM structure of a cell to carefully constraint which parts of highlighted.\n> \n> But more importantly, our conceptual model is completely different from\n> both text editors and selection UIs such as Gmail. In both of those cases,\n> actions _never_ apply to the cursor. In our case, they _always_ apply to\n> the cursor. That super important fact isn't reflected in this design.\n> \n> The final point that I feel is important is that orthogonal concepts\n> should be represented using orthogonal visual encodings in a minimal and\n> consistent manner:\n> - Solid blue backgrouns is being used to warn the user about which cells\n>   the action will apply to - but that encoding is not on the cursor cell\n>   where most actions will be applied to.\n> - The cursor cell is encoded visually using both a grey border and the\n>   left blue thick border.\n> - If you have large cells with lots of content, even selected a few of\n>   them will turn your entire screen blue (or another color). That is maximal\n>   visual encoding, not minimal.\n> - The solid blue shading is so strong that it is really hard to see where\n>   your cursor cell. Tracking it is very important as some actions (Return for\n>   edit mode) will only apply to it.\n> \n> @Carrea - as an aside, it is really difficult to evaluate visual design\n> decisions when animated. Animations are perfect for evaluating interactions\n> and behaviors. Could you post a static image of the visual design along\n> with the animation?\n> \n> On Sat, Nov 21, 2015 at 10:12 AM, Fernando Perez <notifications@github.com\n> \n> > wrote:\n> > \n> > I would actually be OK with something along the lines of that last one by\n> > @Carreau https://github.com/Carreau, probably a bit more muted, that's\n> > all... We can play with the colors, but I think that something that\n> > actually covers the whole cells and not only the edge would be better...\n> > \n> > Do folks feel it's really that ugly? Please play a bit with the highlight\n> > behavior of just about any text editor, gmail, file browser, word\n> > processor, etc: you'll see that they all use _very_ bright, obvious\n> > colors; ones that match the overall palettes of their environments but that\n> > stand out very strongly within the palette.\n> > \n> > And again, remember that this highlight is meant to be _transient_, so\n> > we're not talking about something meant to stay frozen in the UI\n> > permanently. It's by definition meant to flag a condition that will\n> > disappear soon.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/pull/708#issuecomment-158668173.\n> \n> ## \n> \n> Brian E. Granger\n> Associate Professor of Physics and Data Science\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Also, I have other ideas, but we can't do them in this release because they\nwould involve breaking the cell DOM structure in fundamental ways that\nwould break nbconvert.\n\nOn Sat, Nov 21, 2015 at 11:46 AM, Brian Granger ellisonbg@gmail.com wrote:\n\n> Oh, I forgot the most important thing...\n> \n> Because the conceptual model we are using is different from any other\n> selection UI I know of, the visual design is actually really difficult. As\n> of right now, I am not happy with anything we have proposed.\n> \n> On Sat, Nov 21, 2015 at 11:45 AM, Brian Granger ellisonbg@gmail.com\n> wrote:\n> \n> > I am fine with \"a visual treatment that is more pronounced and uses more\n> > color\" - but simply coloring _everything_ without any attempt to create a\n> > design that works well isn't a solution. I don't think it is a matter of\n> > picking a different color - to do that right we would need to change the\n> > DOM structure of a cell to carefully constraint which parts of highlighted.\n> > \n> > But more importantly, our conceptual model is completely different from\n> > both text editors and selection UIs such as Gmail. In both of those cases,\n> > actions _never_ apply to the cursor. In our case, they _always_ apply to\n> > the cursor. That super important fact isn't reflected in this design.\n> > \n> > The final point that I feel is important is that orthogonal concepts\n> > should be represented using orthogonal visual encodings in a minimal and\n> > consistent manner:\n> > - Solid blue backgrouns is being used to warn the user about which cells\n> >   the action will apply to - but that encoding is not on the cursor cell\n> >   where most actions will be applied to.\n> > - The cursor cell is encoded visually using both a grey border and the\n> >   left blue thick border.\n> > - If you have large cells with lots of content, even selected a few of\n> >   them will turn your entire screen blue (or another color). That is maximal\n> >   visual encoding, not minimal.\n> > - The solid blue shading is so strong that it is really hard to see where\n> >   your cursor cell. Tracking it is very important as some actions (Return for\n> >   edit mode) will only apply to it.\n> > \n> > @Carrea - as an aside, it is really difficult to evaluate visual design\n> > decisions when animated. Animations are perfect for evaluating interactions\n> > and behaviors. Could you post a static image of the visual design along\n> > with the animation?\n> > \n> > On Sat, Nov 21, 2015 at 10:12 AM, Fernando Perez <\n> > notifications@github.com> wrote:\n> > \n> > > I would actually be OK with something along the lines of that last one\n> > > by @Carreau https://github.com/Carreau, probably a bit more muted,\n> > > that's all... We can play with the colors, but I think that something that\n> > > actually covers the whole cells and not only the edge would be better...\n> > > \n> > > Do folks feel it's really that ugly? Please play a bit with the\n> > > highlight behavior of just about any text editor, gmail, file browser, word\n> > > processor, etc: you'll see that they all use _very_ bright, obvious\n> > > colors; ones that match the overall palettes of their environments but that\n> > > stand out very strongly within the palette.\n> > > \n> > > And again, remember that this highlight is meant to be _transient_, so\n> > > we're not talking about something meant to stay frozen in the UI\n> > > permanently. It's by definition meant to flag a condition that will\n> > > disappear soon.\n> > > \n> > > \u2014\n> > > Reply to this email directly or view it on GitHub\n> > > https://github.com/jupyter/notebook/pull/708#issuecomment-158668173.\n> > \n> > ## \n> > \n> > Brian E. Granger\n> > Associate Professor of Physics and Data Science\n> > Cal Poly State University, San Luis Obispo\n> > @ellisonbg on Twitter and GitHub\n> > bgranger@calpoly.edu and ellisonbg@gmail.com\n> \n> ## \n> \n> Brian E. Granger\n> Associate Professor of Physics and Data Science\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > to do that right we would need to change the\n> DOM structure of a cell to carefully constraint which parts of highlighted.\n> \n> Also, I have other ideas, but we can't do them in this release because they\n> would involve breaking the cell DOM structure in fundamental ways that\n> would break nbconvert.\n\nIt's hard to understand why if you don't explain what you are trying to achieve. \n\n> - The cursor cell is encoded visually using both a grey border and the left\n>   blue thick border.\n\nThat is just wrong, or this is just your interpretation. The grey border is/was the selection, 4.0 already had the concept of multiple selection  and with multiple selection, each cell would get a grey border. The **cursor** is a notion which is new and not encoded. \n\n> as an aside, it is really difficult to evaluate visual design\n> decisions when animated. Animations are perfect for evaluating interactions\n> and behaviors. Could you post a static image of the visual design along\n> with the animation?\n\nIt will be easier for you to modifie the css live on the notebook, the animation is just here to show that it works. I'll try to make a few screenshot though. \n\nI'm still wondering why you absolutely want the cursor be styled that much  differently when multiple cell are selected instead of just extending the grey border around all cells. \n On Sat, Nov 21, 2015 at 11:45 AM, Brian E. Granger <notifications@github.com\n\n> wrote:\n> \n> I am fine with \"a visual treatment that is more pronounced and uses more\n> color\" - but simply coloring _everything_ without any attempt to create a\n> design that works well isn't a solution. I don't think it is a matter of\n> picking a different color - to do that right we would need to change the\n> DOM structure of a cell to carefully constraint which parts of highlighted.\n\nOk, but let's try to get to the specific points though.  I disagree that we\nneed to redo the entire DOM to find any solution that works for 4.1:\nabsolutist statements like that only serve to paralyze a discussion.  Let's\ninstead see if we can find something that works for what we need, and if we\nreally can't we'll see what we do..\n\n> But more importantly, our conceptual model is completely different from\n> both text editors and selection UIs such as Gmail. In both of those cases,\n> actions _never_ apply to the cursor. In our case, they _always_ apply to\n> the cursor. That super important fact isn't reflected in this design.\n\nOur cursor is the 'head' of editor's selectors. Which actually has similar\nsemantics, as it's the position where for example you start typing if you\nhit any key that would overwrite the selection (since the action is then a\ndelete-then-write).  Since we're doing just 'paint selection' with a head\nthat can only be at one end or the other of the selection, I'm not sure\nit's actually that different from text editors.  Maybe I'm missing\nsomething?\n\n> The final point that I feel is important is that orthogonal concepts should\n> be represented using orthogonal visual encodings in a minimal and\n> consistent manner:\n> - Solid blue backgrouns is being used to warn the user about which cells\n>   the action will apply to - but that encoding is not on the cursor cell\n>   where most actions will be applied to.\n\nI think in Matthias' case it was also being applied to the cursor cell, no?\nI'm pretty sure the cursor cell was included in the shading.  It's just\nthat it's hard to tell because of the animation.\n\n> - The cursor cell is encoded visually using both a grey border and the left\n>   blue thick border.\n> - If you have large cells with lots of content, even selected a few of them\n>   will turn your entire screen blue (or another color). That is maximal\n>   visual encoding, not minimal.\n\nThese two points don't seem too problematic to me for now... Something we\ncould iterate on in the alpha/beta cycle.\n\n> - The solid blue shading is so strong that it is really hard to see where\n>   your cursor cell. Tracking it is very important as some actions (Return for\n>   edit mode) will only apply to it.\n\nYes, though I wonder if in practice it will actually be that bad (though we\nprobably want to lower the opacity/shade of the highlight anyway).  The\nreason is that, since we're using the fact that the cursor is _always the\nedge of the selection_, it's actually not that easy to lose track of it.\nIt can't really get lost inside of the region, because as you highlight,\nyou're dragging the edge with your cursor (again, text editors actually\neven remove the cursor completely while selecting, and most of us are so\nused to it that we don't even notice).\n\nHere's my suggestion: let's actually _play_ with it for a minute, and see\nhow it feels.  I have the impression that we're arguing against an image,\ninstead of arguing based on usage experience...  Let's take an open mind\nand see how it feels.\n\nWe can obviously fine-tune all aspects of it moving forward, but let's give\nit a chance with an open mind to see how it feels in practice.\n\n> @Carrea - as an aside, it is really difficult to evaluate visual design\n> decisions when animated. Animations are perfect for evaluating interactions\n> and behaviors. Could you post a static image of the visual design along\n> with the animation?\n\nAgreed, good idea.  I knew what it looked like because I saw it live (so I\nalso saw it static), but it's hard to make sense of it like this...\n Lots of thoughts...\n\nThe most important cell is the one that has focus. Traditionally we have\ncalled this cell the \"selected\" cell. It has two purposes or roles:\n\nA) It maintains focus and is the cell that will be edited if the user\npresses \"Enter\".\nB) By default cell level actions apply to it.\n\nPreviously, we used a single visual indicator for both of these roles (grey\nborder).\n\nIn the new multiple-selection behavior we have agreed upon, these two roles\nare being separated.\n- The focused cell has both of these roles.\n- Contiguous blocks of cells (that include the focused cell) can also have\n  the second role.\n\nImportant things should be indicated as such visually. Less important\nthings should be indicated as such visually.\n\nIn my mind, even with the new behaviors, the focused cell is the most\nimportant one. Actions always apply to to, it is the cell that will be\nedited, the page will scroll as the user moves it and it is the cursor/head\nfor multiple selections. Because of this, it should have the most prominent\nvisual design.\n\nThe other cells to which actions will apply should have a less prominent\nvisual design than the focused cell as they do fewer things.\n\nMy problem with the current design is that the visual design of the action\ncells is the equivalent of yelling. The extremely strong visual treatment\nof these cells is inconsistent with the more subtle design choices we make\neverywhere else _and_ it is confusingly more prominent than that focused\ncell.\n\nOn Sun, Nov 22, 2015 at 11:49 PM, Fernando Perez notifications@github.com\nwrote:\n\n> On Sat, Nov 21, 2015 at 11:45 AM, Brian E. Granger <\n> notifications@github.com\n> \n> > wrote:\n> > \n> > I am fine with \"a visual treatment that is more pronounced and uses more\n> > color\" - but simply coloring _everything_ without any attempt to create a\n> > design that works well isn't a solution. I don't think it is a matter of\n> > picking a different color - to do that right we would need to change the\n> > DOM structure of a cell to carefully constraint which parts of\n> > highlighted.\n> \n> Ok, but let's try to get to the specific points though. I disagree that we\n> need to redo the entire DOM to find any solution that works for 4.1:\n> absolutist statements like that only serve to paralyze a discussion. Let's\n> instead see if we can find something that works for what we need, and if we\n> really can't we'll see what we do..\n> \n> > But more importantly, our conceptual model is completely different from\n> > both text editors and selection UIs such as Gmail. In both of those\n> > cases,\n> > actions _never_ apply to the cursor. In our case, they _always_ apply to\n> > the cursor. That super important fact isn't reflected in this design.\n> \n> Our cursor is the 'head' of editor's selectors. Which actually has similar\n> semantics, as it's the position where for example you start typing if you\n> hit any key that would overwrite the selection (since the action is then a\n> delete-then-write). Since we're doing just 'paint selection' with a head\n> that can only be at one end or the other of the selection, I'm not sure\n> it's actually that different from text editors. Maybe I'm missing\n> something?\n> \n> > The final point that I feel is important is that orthogonal concepts\n> > should\n> > be represented using orthogonal visual encodings in a minimal and\n> > consistent manner:\n> > - Solid blue backgrouns is being used to warn the user about which cells\n> >   the action will apply to - but that encoding is not on the cursor cell\n> >   where most actions will be applied to.\n> \n> I think in Matthias' case it was also being applied to the cursor cell, no?\n> I'm pretty sure the cursor cell was included in the shading. It's just\n> that it's hard to tell because of the animation.\n> \n> > - The cursor cell is encoded visually using both a grey border and the\n> >   left\n> >   blue thick border.\n> > - If you have large cells with lots of content, even selected a few of\n> >   them\n> >   will turn your entire screen blue (or another color). That is maximal\n> >   visual encoding, not minimal.\n> \n> These two points don't seem too problematic to me for now... Something we\n> could iterate on in the alpha/beta cycle.\n> \n> > - The solid blue shading is so strong that it is really hard to see where\n> >   your cursor cell. Tracking it is very important as some actions (Return\n> >   for\n> >   edit mode) will only apply to it.\n> \n> Yes, though I wonder if in practice it will actually be that bad (though we\n> probably want to lower the opacity/shade of the highlight anyway). The\n> reason is that, since we're using the fact that the cursor is _always the\n> edge of the selection_, it's actually not that easy to lose track of it.\n> It can't really get lost inside of the region, because as you highlight,\n> you're dragging the edge with your cursor (again, text editors actually\n> even remove the cursor completely while selecting, and most of us are so\n> used to it that we don't even notice).\n> \n> Here's my suggestion: let's actually _play_ with it for a minute, and see\n> how it feels. I have the impression that we're arguing against an image,\n> instead of arguing based on usage experience... Let's take an open mind\n> and see how it feels.\n> \n> We can obviously fine-tune all aspects of it moving forward, but let's give\n> it a chance with an open mind to see how it feels in practice.\n> \n> > @Carrea - as an aside, it is really difficult to evaluate visual design\n> > decisions when animated. Animations are perfect for evaluating\n> > interactions\n> > and behaviors. Could you post a static image of the visual design along\n> > with the animation?\n> \n> Agreed, good idea. I knew what it looked like because I saw it live (so I\n> also saw it static), but it's hard to make sense of it like this...\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-158871743.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n The other thing to keep in mind is that the behaviors we support are unlike\nany other selection/cursor UI:\n- In text editors, the cursor is only the insertion point - you have to\n  perform a selection before you can perform any actions (cut/copy/paste).\n  Our focused cell acts both as a cursor _and_ all actions apply to it by\n  default. Also, in a text editor, the cursor is something that is always\n  between units (letters). Our cursor is much more like that of Gmail's in\n  that it is _on_ not between the elements being selected.\n- In selection UIs such as Gmail, the cursor also does not apply actions.\n\nIOW, our behavior for this is unlike anything else.\n\nOn Mon, Nov 23, 2015 at 10:54 AM, Brian Granger ellisonbg@gmail.com wrote:\n\n> Lots of thoughts...\n> \n> The most important cell is the one that has focus. Traditionally we have\n> called this cell the \"selected\" cell. It has two purposes or roles:\n> \n> A) It maintains focus and is the cell that will be edited if the user\n> presses \"Enter\".\n> B) By default cell level actions apply to it.\n> \n> Previously, we used a single visual indicator for both of these roles\n> (grey border).\n> \n> In the new multiple-selection behavior we have agreed upon, these two\n> roles are being separated.\n> - The focused cell has both of these roles.\n> - Contiguous blocks of cells (that include the focused cell) can also have\n>   the second role.\n> \n> Important things should be indicated as such visually. Less important\n> things should be indicated as such visually.\n> \n> In my mind, even with the new behaviors, the focused cell is the most\n> important one. Actions always apply to to, it is the cell that will be\n> edited, the page will scroll as the user moves it and it is the cursor/head\n> for multiple selections. Because of this, it should have the most prominent\n> visual design.\n> \n> The other cells to which actions will apply should have a less prominent\n> visual design than the focused cell as they do fewer things.\n> \n> My problem with the current design is that the visual design of the action\n> cells is the equivalent of yelling. The extremely strong visual treatment\n> of these cells is inconsistent with the more subtle design choices we make\n> everywhere else _and_ it is confusingly more prominent than that focused\n> cell.\n> \n> On Sun, Nov 22, 2015 at 11:49 PM, Fernando Perez <notifications@github.com\n> \n> > wrote:\n> > \n> > On Sat, Nov 21, 2015 at 11:45 AM, Brian E. Granger <\n> > notifications@github.com\n> > \n> > > wrote:\n> > > \n> > > I am fine with \"a visual treatment that is more pronounced and uses more\n> > > color\" - but simply coloring _everything_ without any attempt to create\n> > > a\n> > > design that works well isn't a solution. I don't think it is a matter of\n> > > picking a different color - to do that right we would need to change the\n> > > DOM structure of a cell to carefully constraint which parts of\n> > > highlighted.\n> > \n> > Ok, but let's try to get to the specific points though. I disagree that we\n> > need to redo the entire DOM to find any solution that works for 4.1:\n> > absolutist statements like that only serve to paralyze a discussion. Let's\n> > instead see if we can find something that works for what we need, and if\n> > we\n> > really can't we'll see what we do..\n> > \n> > > But more importantly, our conceptual model is completely different from\n> > > both text editors and selection UIs such as Gmail. In both of those\n> > > cases,\n> > > actions _never_ apply to the cursor. In our case, they _always_ apply to\n> > > the cursor. That super important fact isn't reflected in this design.\n> > \n> > Our cursor is the 'head' of editor's selectors. Which actually has similar\n> > semantics, as it's the position where for example you start typing if you\n> > hit any key that would overwrite the selection (since the action is then a\n> > delete-then-write). Since we're doing just 'paint selection' with a head\n> > that can only be at one end or the other of the selection, I'm not sure\n> > it's actually that different from text editors. Maybe I'm missing\n> > something?\n> > \n> > > The final point that I feel is important is that orthogonal concepts\n> > > should\n> > > be represented using orthogonal visual encodings in a minimal and\n> > > consistent manner:\n> > > - Solid blue backgrouns is being used to warn the user about which cells\n> > >   the action will apply to - but that encoding is not on the cursor cell\n> > >   where most actions will be applied to.\n> > \n> > I think in Matthias' case it was also being applied to the cursor cell,\n> > no?\n> > I'm pretty sure the cursor cell was included in the shading. It's just\n> > that it's hard to tell because of the animation.\n> > \n> > > - The cursor cell is encoded visually using both a grey border and the\n> > >   left\n> > >   blue thick border.\n> > > - If you have large cells with lots of content, even selected a few of\n> > >   them\n> > >   will turn your entire screen blue (or another color). That is maximal\n> > >   visual encoding, not minimal.\n> > \n> > These two points don't seem too problematic to me for now... Something we\n> > could iterate on in the alpha/beta cycle.\n> > \n> > > - The solid blue shading is so strong that it is really hard to see\n> > >   where\n> > >   your cursor cell. Tracking it is very important as some actions (Return\n> > >   for\n> > >   edit mode) will only apply to it.\n> > \n> > Yes, though I wonder if in practice it will actually be that bad (though\n> > we\n> > probably want to lower the opacity/shade of the highlight anyway). The\n> > reason is that, since we're using the fact that the cursor is _always the\n> > edge of the selection_, it's actually not that easy to lose track of it.\n> > It can't really get lost inside of the region, because as you highlight,\n> > you're dragging the edge with your cursor (again, text editors actually\n> > even remove the cursor completely while selecting, and most of us are so\n> > used to it that we don't even notice).\n> > \n> > Here's my suggestion: let's actually _play_ with it for a minute, and see\n> > how it feels. I have the impression that we're arguing against an image,\n> > instead of arguing based on usage experience... Let's take an open mind\n> > and see how it feels.\n> > \n> > We can obviously fine-tune all aspects of it moving forward, but let's\n> > give\n> > it a chance with an open mind to see how it feels in practice.\n> > \n> > > @Carrea - as an aside, it is really difficult to evaluate visual design\n> > > decisions when animated. Animations are perfect for evaluating\n> > > interactions\n> > > and behaviors. Could you post a static image of the visual design along\n> > > with the animation?\n> > \n> > Agreed, good idea. I knew what it looked like because I saw it live (so I\n> > also saw it static), but it's hard to make sense of it like this...\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/pull/708#issuecomment-158871743.\n> \n> ## \n> \n> Brian E. Granger\n> Associate Professor of Physics and Data Science\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n On Mon, Nov 23, 2015 at 10:55 AM, Brian E. Granger <notifications@github.com\n\n> wrote:\n> \n> The most important cell is the one that has focus. Traditionally we have\n> called this cell the \"selected\" cell. It has two purposes or roles:\n> \n> A) It maintains focus and is the cell that will be edited if the user\n> presses \"Enter\".\n> B) By default cell level actions apply to it.\n> \n> Previously, we used a single visual indicator for both of these roles (grey\n> border).\n> \n> In the new multiple-selection behavior we have agreed upon, these two roles\n> are being separated.\n> - The focused cell has both of these roles.\n> - Contiguous blocks of cells (that include the focused cell) can also have\n>   the second role.\n> \n> Important things should be indicated as such visually. Less important\n> things should be indicated as such visually.\n> \n> In my mind, even with the new behaviors, the focused cell is the most\n> important one. Actions always apply to to, it is the cell that will be\n> edited, the page will scroll as the user moves it and it is the cursor/head\n> for multiple selections. Because of this, it should have the most prominent\n> visual design.\n> \n> The other cells to which actions will apply should have a less prominent\n> visual design than the focused cell as they do fewer things.\n\nI think we agree here... My only concern is that I still think we need to\nmake sure the users don't easily miss a long range of selected cells, given\nthe potential for large-scale impact with large selections.\n\nMy problem with the current design is that the visual design of the action\n\n> cells is the equivalent of yelling. The extremely strong visual treatment\n> of these cells is inconsistent with the more subtle design choices we make\n> everywhere else _and_ it is confusingly more prominent than that focused\n> cell.\n\nQuestion: can we still get to the goal of ensuring it's impossible to miss\nlarge selections with a whole-cell highlight but one that's much more\nsubdued?\n\nAgain, let's keep in mind that these highlights are _fleeting_ by nature,\nthey don't stay in the UI permanently, so I think it's OK for them to be a\nbit stronger (and that's why editors make them quite strong, in fact). But\nI am definitely listening to the notion that you want it more subdued.\n\nI also ask that we _experiment_ with using it, rather than continuing to\nargue with about it... To get things to a concrete form where we can play\nwith it, would the following be agreeable?\n- A more subdued color for the highlight, and let's mark clearly where in\n  the CSS that value is, so we can all easily play with it on our own.  That\n  way, we can experiment and see if consensus is not even in the cards...\n- A clear cursor distinction for the selected cell has to remain.\n\nHow does that sound? We play with it, we experiment with a more subdued\n(but broad) highlight and with how we feel the clarity of the cursor\nhighlight maintains that distinction, and see if we can find a working\nsolution?\n\nI agree there's differences in the behavior we offer, and this has been a\nuseful discussion to clarify that. I don't think we're unique from other\nUIs, but we are a different combination of the behaviors that exist\nelsewhere, and it's great to clarify that.  Honestly, once we're done here\nwe should write up a little short summary of these basic design constraints\nto remind ourselves of the key points, since it's useful to have them all\nin one place.\n\nThanks!\n > think in Matthias' case it was also being applied to the cursor cell, no?\n> I'm pretty sure the cursor cell was included in the shading.  It's just\n> that it's hard to tell because of the animation.\n\nYes, it is inclusing, but only with multiple cell selected. When there is only 1 cell selected the theme does not change.\n\n> In my mind, even with the new behaviors, the focused cell is the most\n> important one. Actions always apply to to, it is the cell that will be\n> edited, the page will scroll as the user moves it and it is the cursor/head\n> for multiple selections. Because of this, it should have the most prominent\n> visual design.\n\nalmost no action will happend to only the cursor, look at any other UI, the \"cursor\" side is never shown, it is at the edge of the selection, and obvious to track. \nI'm arguing that 1) the style does not need to be different 2) could be just the grey border. 3) should I remind you that 4.0 also had multiple selection, with grey border, \nand that it was not confusing at all ?\n\n> My problem with the current design is that the visual design of the action\n> cells is the equivalent of yelling. The extremely strong visual treatment\n> of these cells is inconsistent with the more subtle design choices we make\n> everywhere else _and_ it is confusingly more prominent than that focused\n> cell.\n\nI did the blue things because I was asked to as a prototype, we are not saying that it will be the final visual style. \n\n> - In text editors, the cursor is only the insertion point - you have to\n>   perform a selection before you can perform any actions (cut/copy/paste).\n>   Our focused cell acts both as a cursor _and_ all actions apply to it by\n>   default. Also, in a text editor, the cursor is something that is always\n>   between units (letters). Our cursor is much more like that of Gmail's in\n>   that it is _on_ not between the elements being selected.\n> - In selection UIs such as Gmail, the cursor also does not apply actions.\n\nthat's not completely true, in old terminal , and still some editors the cursor is 1 char wide, and in other uI, like OS X finder, the Cursor is not an insertion point in the finder, it always have a file selected, with enter/space that edit the file. It is the same abstraction we have here. \n\nIt feel to me that you are seeing important visual distinction because you are aware of the underlying implementation of the notebook instead of looking at the user experience. \n\nI read what your asking as \"The driver seat should be red because it is more important than than other seats, but the passager seat is also important, so it should also be visually enhanced\".\n <img width=\"984\" alt=\"screen shot 2015-11-24 at 10 33 47\" src=\"https://cloud.githubusercontent.com/assets/335567/11362944/27e7f864-9297-11e5-8dda-4885604f1aea.png\">\n<img width=\"984\" alt=\"screen shot 2015-11-24 at 10 33 50\" src=\"https://cloud.githubusercontent.com/assets/335567/11362948/2c96cd90-9297-11e5-9a83-86893841c53f.png\">\n<img width=\"984\" alt=\"screen shot 2015-11-24 at 10 33 54\" src=\"https://cloud.githubusercontent.com/assets/335567/11362949/2f70fd74-9297-11e5-921f-524d62e533c4.png\">\n<img width=\"984\" alt=\"screen shot 2015-11-24 at 10 34 53\" src=\"https://cloud.githubusercontent.com/assets/335567/11362953/32904942-9297-11e5-9bbc-744e055f872a.png\">\n <img width=\"984\" alt=\"screen shot 2015-11-24 at 10 12 34\" src=\"https://cloud.githubusercontent.com/assets/335567/11362963/4847a352-9297-11e5-9881-f67031ebe526.png\">\n<img width=\"984\" alt=\"screen shot 2015-11-24 at 10 12 39\" src=\"https://cloud.githubusercontent.com/assets/335567/11362965/49b41a0e-9297-11e5-8267-7ad38e8f4292.png\">\n<img width=\"984\" alt=\"screen shot 2015-11-24 at 10 12 41\" src=\"https://cloud.githubusercontent.com/assets/335567/11362966/4aed9bb6-9297-11e5-888f-6eb76bb84aa9.png\">\n<img width=\"984\" alt=\"screen shot 2015-11-24 at 10 12 50\" src=\"https://cloud.githubusercontent.com/assets/335567/11362969/4c0ce6d2-9297-11e5-8c87-9cbb590b8567.png\">\n<img width=\"984\" alt=\"screen shot 2015-11-24 at 10 13 08\" src=\"https://cloud.githubusercontent.com/assets/335567/11362971/4d2e7f94-9297-11e5-9af1-c796069c8bec.png\">\n We are spending a lot of effort trying to get this perfect.  Maybe we should just ship it as @Carreau has presented it and see what happens.  I like the altered background version, even though the color is definitely not my favorite. :+1: \n > I think we agree here... My only concern is that I still think we need to\n> make sure the users don't easily miss a long range of selected cells, given\n> the potential for large-scale impact with large selections.\n\nYes, I completely agree with what you are saying here.\n\n> My problem with the current design is that the visual design of the action\n> \n> > cells is the equivalent of yelling. The extremely strong visual treatment\n> > of these cells is inconsistent with the more subtle design choices we\n> > make\n> > everywhere else _and_ it is confusingly more prominent than that focused\n> > cell.\n> \n> Question: can we still get to the goal of ensuring it's impossible to miss\n> large selections with a whole-cell highlight but one that's much more\n> subdued?\n\nI think so, but it will require pulling back the visual style of the large\nselections a bit.\n\n> Again, let's keep in mind that these highlights are _fleeting_ by nature,\n> they don't stay in the UI permanently, so I think it's OK for them to be a\n> bit stronger (and that's why editors make them quite strong, in fact). But\n> I am definitely listening to the notion that you want it more subdued.\n\nAhh, but that is one of my main points. There are two conceptual things\nhere: the \"focused cell\" and the \"action cells\" and both need orthogonal\nvisual styling. The problem is that the focused cell is also _always_ an\naction cell, so it needs to always have the visual style associated with\nthat as well. IOW, for the focused cell, that visual style is not fleeting.\n\nThis is why, in the prototype that cameron did, the blue left border is\nalways applied to the focused cell to indicate that actions always apply to\nit.\n\n> I also ask that we _experiment_ with using it, rather than continuing to\n> argue with about it... To get things to a concrete form where we can play\n> with it, would the following be agreeable?\n> - A more subdued color for the highlight, and let's mark clearly where in\n>   the CSS that value is, so we can all easily play with it on our own. That\n>   way, we can experiment and see if consensus is not even in the cards...\n> - A clear cursor distinction for the selected cell has to remain.\n\nI am totally fine with us experimenting - but given that I think the\nfocused cell should always have the \"action\" visual styling, I think a\nwhole cell highlight, however subdued, is too much.\n\n> How does that sound? We play with it, we experiment with a more subdued\n> (but broad) highlight and with how we feel the clarity of the cursor\n> highlight maintains that distinction, and see if we can find a working\n> solution?\n> \n> I agree there's differences in the behavior we offer, and this has been a\n> useful discussion to clarify that. I don't think we're unique from other\n> UIs, but we are a different combination of the behaviors that exist\n> elsewhere, and it's great to clarify that. Honestly, once we're done here\n> we should write up a little short summary of these basic design constraints\n> to remind ourselves of the key points, since it's useful to have them all\n> in one place.\n\nThis is useful!\n\n> Thanks!\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-159049940.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I am highly opposed to this visual style as it confuses the underlying\nabstractions and behaviors:\n\nWhen there isn't multiple cells selected, the focused cell gets a\ngrey-border and blue-left-border. What does the grey mean? What does the\nblue mean?\n\nHypothesis A)\n\ngrey-border indicates focus, blue-left-border indicates action will apply.\n\nBut then when a user selects multiple cells, the grey-border all of a\nsudden indicates actions and the blue-left-border indicates the focus and\nit really hard to find. Thus, this hypothesis about the meaning of the\ngrey-border and blue-left-border can't hold.\n\nHypothesis B)\n\ngrey-border indicates action, blue-left-border indicates focus.\n\nWhen the user selects multiple cells, the grey-border expands to include\nall cells to which actions will apply. The blue-left-border follows the\nfocus. So far, so good.\n\nBut then, what does the blue highlight mean as we have already completely\nencoding the two fundamental abstractions visuallly. Hypothesis B.1) the\nblue-highlight indicates actions. But that doesn't match up with the fact\nthat the blue-highlight is not shown all the time on the focused cell. So\nHypothesis B) does make sense either.\n\nSummary:\n- We only have two fundamental abstractions - the focused cell and cells to\n  which actions apply (which always include the focused cell).\n- Regardless of the details of the visual design choices, we should encode\n  those two abstractions visually in a manner that is 1) independent of each\n  other, 2) consistent across the different states of the UI and 3) not\n  doubly encoded.\n- The focused cell should have a stronger visual style than the action\n  cells as a user has to track it visually at all times.\n\nI am willing to consider any visual style that follows these ideas.\n\nOn Tue, Nov 24, 2015 at 1:37 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> [image: screen shot 2015-11-24 at 10 12 34]\n> https://cloud.githubusercontent.com/assets/335567/11362963/4847a352-9297-11e5-9881-f67031ebe526.png\n> [image: screen shot 2015-11-24 at 10 12 39]\n> https://cloud.githubusercontent.com/assets/335567/11362965/49b41a0e-9297-11e5-8267-7ad38e8f4292.png\n> [image: screen shot 2015-11-24 at 10 12 41]\n> https://cloud.githubusercontent.com/assets/335567/11362966/4aed9bb6-9297-11e5-888f-6eb76bb84aa9.png\n> [image: screen shot 2015-11-24 at 10 12 50]\n> https://cloud.githubusercontent.com/assets/335567/11362969/4c0ce6d2-9297-11e5-8c87-9cbb590b8567.png\n> [image: screen shot 2015-11-24 at 10 13 08]\n> https://cloud.githubusercontent.com/assets/335567/11362971/4d2e7f94-9297-11e5-9af1-c796069c8bec.png\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-159208441.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > almost no action will happend to only the cursor, look at any other UI,\n> the \"cursor\" side is never shown, it is at the edge of the selection, and\n> obvious to track.\n> I'm arguing that 1) the style does not need to be different 2) could be\n> just the grey border. 3) should I remind you that 4.0 also had multiple\n> selection, with grey border,\n> and that it was not confusing at all ?\n\nI am being honest here...I am not aware of any stable release we have\nshipped that has included multiple selection in any form. Did we actually\nship the previous implementation and I just missed that? If we did, then I\ndon't think we can make any of the changes we are proposing here in a point\nrelease.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n One suggestion: can we get this PR into a state that has no visual\nstyling but has two CSS classes that are applied to cells:\n- One for the focused cell (which we currently call \"selected\") - I\n  don't think this needs to change - and shouldn't to preserve BW\n  compat.\n- Another for cells to which actions should apply (that will also\n  always be applied to the focused cell).\n\nThen we can tackle the question of how to style those two classes separately.\n\nOn Tue, Nov 24, 2015 at 9:28 AM, Brian Granger ellisonbg@gmail.com wrote:\n\n> > almost no action will happend to only the cursor, look at any other UI,\n> > the \"cursor\" side is never shown, it is at the edge of the selection, and\n> > obvious to track.\n> > I'm arguing that 1) the style does not need to be different 2) could be\n> > just the grey border. 3) should I remind you that 4.0 also had multiple\n> > selection, with grey border,\n> > and that it was not confusing at all ?\n> \n> I am being honest here...I am not aware of any stable release we have\n> shipped that has included multiple selection in any form. Did we actually\n> ship the previous implementation and I just missed that? If we did, then I\n> don't think we can make any of the changes we are proposing here in a point\n> release.\n> \n> ## \n> \n> Brian E. Granger\n> Associate Professor of Physics and Data Science\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > I am being honest here...I am not aware of any stable release we have\n> shipped that has included multiple selection in any form. Did we actually\n> ship the previous implementation and I just missed that? If we did, then I\n> don't think we can make any of the changes we are proposing here in a point\n> release.\n\nHum... screenshot of 4.0.1:\n\n<img width=\"1183\" alt=\"screen shot 2015-11-24 at 18 51 05\" src=\"https://cloud.githubusercontent.com/assets/335567/11375583/5c418ef0-92dc-11e5-87af-79e1aca1dc00.png\">\n\nWhy do you think I keep saying that multiple selection works on 4.0 and that Thomas implementation was shipped and was removed without enought thought ?\n > - One for the focused cell (which we currently call \"selected\") - I\n>   don't think this needs to change - and shouldn't to preserve BW\n>   compat.\n> - Another for cells to which actions should apply (that will also\n>   always be applied to the focused cell).\n\nThats already what this does. \n\nThe \"no visual styling\" is out of question in master, I prefer styling\neven if the style is wrong. Otherwise here is a beautiful screenshot of my notebook with 3 selected cells and 1 cell in focus : \n\n<img width=\"1171\" alt=\"screen shot 2015-11-24 at 18 55 49\" src=\"https://cloud.githubusercontent.com/assets/335567/11375728/15d35cc2-92dd-11e5-9d84-4d7a2485e999.png\">\n\nYou right now in this PR we have 5 classes:\n- selected (the head/cursor cell, not to change)\n- jupyter-soft-selected (all the cell in selection)\n- first (first cell  in selection)\n- last (last cell in selection)\n- jupyter-anchor (no style applied) but set for the anchor.\n\nYou can play with styling if you like. \n Oh, wow, I am very sad now and very upset that we shipped that with\nbasically no usability or design review.\n\nWas this in 4.0 as well?\n\nI will have to think through how this affects everything :(\n\nOn Tue, Nov 24, 2015 at 9:54 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I am being honest here...I am not aware of any stable release we have\n> shipped that has included multiple selection in any form. Did we actually\n> ship the previous implementation and I just missed that? If we did, then I\n> don't think we can make any of the changes we are proposing here in a point\n> release.\n> \n> Hum... screenshot of 4.0.1:\n> \n> [image: screen shot 2015-11-24 at 18 51 05]\n> https://cloud.githubusercontent.com/assets/335567/11375583/5c418ef0-92dc-11e5-87af-79e1aca1dc00.png\n> \n> Why do you think I keep saying that multiple selection works on 4.0 and\n> that Thomas implementation was shipped and was removed without enought\n> thought ?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-159355464.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Yikes, that was definitely a mistake to include multi-cell selection in 4.0.x. It wasn't in 4.0. We should **absolutely not** treat changes to multi-cell selection as breaking changes. It was unquestionably a mistake to include it in 4.0.x, but we can call that an alpha-level preview of the 4.1 feature.\n I am confused about your statement that multiple-selection was in 4.0.1. Here is the commit log that shows multiple selection after 4.0.1 was tagged.\n\n![screen shot 2015-11-24 at 10 31 11 am](https://cloud.githubusercontent.com/assets/27600/11376639/b29f6254-9296-11e5-825a-0e12ff94a29c.png)\n\nBut this is besides the point. This never should have been in a 4.0.x release in the first place. We can't do stuff like this in those releases - especially without proper review. And those two are related. I was fully aware that work on that had begun, but had assumed it wouldn't be release until at least 4.1. \n\nI am with @minrk that we shouldn't let this mistake hinder us from making any improvement to the UI/UX for 4.1. IOW, we should treat this as though it were not ever released.\n It's 100% my fault - I wouldn't have cut 4.0.2 (this feature is not in 4.0.1) with this if I had noticed when I was reviewing what commits had been merged. In 4.0.x, this is an undocumented, undiscoverable feature with no UI that shouldn't be there.\n > I am confused about your statement that multiple-selection was in 4.0.1. Here is the commit log that shows multiple selection after 4.0.1 was tagged.\n\nI just `git checkout 4.0.1` and tried, I'm not sure why it works locally.... I'll retry. \n @minrk I don't think it is as simple as you taking the blame. After 4.0 came out, we did talk about changing how we were using branches - this sort of slipped through the cracks in all that. This is yet another reason to retreat back to our previous model of managing branches where master follows major releases and we always backport for the point and minor releases.\n ok, not in 4.0.1 my git completion might have checkout 4.0.2, but 4.0.2 have it. \n No worries, and it's not a matter of assigning blame. We all make mistakes, we should just learn from what happened to see how we can fix up the process.\n\nWhat we should take from this, however, is that for all intents and purposes, we can consider it as if this had never been shipped. The vast majority of users won't even have noticed that this existed, since it was buried in the code with no announcement or easily discoverable UI for it (heck, even most of us didn't even know it was there!).\n\nSo, there's no requirement of backwards compatibility to worry about on this feature, and we can move forward on the discussion.\n\nLet's try to see if we can have this PR get to a point where we can play with it with a minimum of CSS classes to install it. I think @Carreau's last screenshots get us very close. Matthias, any chance that can be achieved with less CSS classes? If so, I think we're basically there, and then folks can just play with the colors for the highlight/cursor/unselected cell and see where we get to a decision.\n Depends on what style you want. \n\nMinimally you can use:\n- `selected` \n- `jupyter-soft-selected`\n\nIt is enough for **some style**. In other case you can use `div.last.first` selector to style the cursor differently when there is no multiple selection.\n\n`jupyter-anchor` is not use currently. \n\nThe to **play** with style the 5 classes are needed. We can remove the non-needed one once we decide on final style. \n\nNote that the seem to be small issue with Shift-Click. I don't find a correct way to implement Shift-Click selection range **and** be 100 certain that the cell in edit mode is the focused cell. \n > The to play with style the 5 classes are needed. We can remove the non-needed one once we decide on final style.\n> \n> Note that the seem to be small issue with Shift-Click. I don't find a correct way to implement Shift-Click selection range and be 100 certain that the cell in edit mode is the focused cell.\n\nCan't you just use the two classes you suggest, and then users can use pseudo selectors to select the first and last?\n > Can't you just use the two classes you suggest, and then users can use pseudo selectors to select the first and last?\n\nno pseudo selector are just `first-child` and `last-child` of target element, \nyou cannot do a `first-of-class` or `last-of-class`, Or I havent found the correct name for the relevant pseudo-selector.\n Ok, in the interest of moving forward, I'd say let's leave all five in for now, who cares if it's a bit messy to play with it while the PR is in flight. We'll clean it up once we decide.\n\nCan you clean it up as much as possible and give us a short instruction on what to edit to make changes, for those of us who don't know the code intimately? That way we can all explore it...\n\nThanks!\n Playing around...\n\nBrian's A)\n- Standard grey border for the selected cell\n- The lightest possible blue from the Material Design color pallette (#E3F2FD) for soft-selected and selected.\n\nhttps://www.google.com/design/spec/style/color.html#color-color-palette\n\n<img width=\"880\" alt=\"screen shot 2015-11-24 at 6 45 05 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/11387005/92448828-92db-11e5-92c0-f2ef40c78238.png\">\n\n<img width=\"903\" alt=\"screen shot 2015-11-24 at 6 43 22 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/11387009/9863f95a-92db-11e5-8cd2-3627871aa98d.png\">\n That doesn't look too bad, though you seem to have removed the thick left 'cursor bar' we had before in favor of just the gray outline. Is that deliberate?\n\nI sort of liked the cursor, but I'm pretty 50/50 here, so if folks prefer this, I'm happy just finding something we can move forward with...\n Brian's B)\n- Standard grey border for selected.\n- 5px wide left border for soft-selected, using blue 400 and 200 from MD.\n\n<img width=\"858\" alt=\"screen shot 2015-11-24 at 6 48 07 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/11387061/0abbba60-92dc-11e5-9626-b34a95ecbf95.png\">\n\n<img width=\"837\" alt=\"screen shot 2015-11-24 at 6 48 17 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/11387063/0e9bf2d0-92dc-11e5-99b1-7c525c2726ca.png\">\n I am _starting_ with designs that encode selected and soft-selected separately and using a single visual encoding. We could do both the blue bg and left-blue-border.\n As I iterate on different ideas for the visual encodings,here are the main challenges I am facing:\n- It is quite challenging to highlight the multiply-selected cells in a way that focused cell still stands out sufficiently. My option A is weaker than B on that.\n- We could move away from encoding the focused cell using the grey border, but then we also probably have to get rid of the green border in edit mode, leading to a cascade of design decisions that are probably out of scope for 4.1.\n- Many of the visual styles I am thinking about would require significant changes to the DOM, such as getting rid of the little notches/gaps between the left-blue-borders of different selected cells. Those DOM changes would break nbconvert :(\n\nI will keep played with other ideas...\n Mmh, I do find the ones that don't highlight the bg at all too little visual strength for my taste...  You think if you put the blue bg along with the thick cursor (but only on the selected cell, not on all of them) it won't be enough to make the selected cell stand out?\n I will play with the different combinations more.\n\nThe other way of increasing the overall visual strength is to make the left\nborder wider. But as you go beyond the currently shown 5px, you start to\nsee weird artifacts from the border's rendering different widths/colors for\ntop/bottom/left.\n\nOn Tue, Nov 24, 2015 at 7:03 PM, Fernando Perez notifications@github.com\nwrote:\n\n> Mmh, I do find the ones that don't highlight the bg at all too little\n> visual strength for my taste... You think if you put the blue bg along with\n> the thick cursor (but only on the selected cell, not on all of them) it\n> won't be enough to make the selected cell stand out?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-159474107.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Brian's C)\n\n(Just adding A) and B) together)\n\n<img width=\"835\" alt=\"screen shot 2015-11-24 at 9 19 03 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/11389071/298c00e8-92f1-11e5-84f3-b42348e9be4c.png\">\n\n<img width=\"870\" alt=\"screen shot 2015-11-24 at 9 19 11 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/11389075/2d873262-92f1-11e5-9e9a-9908c8700f77.png\">\n Brian's D)\n- Like C\n- But only highlight the focused cell when multiple cells are selected. This required modifying the JS logic as to when the classes are added and removed to the focused cell.\n\n<img width=\"871\" alt=\"screen shot 2015-11-24 at 9 56 22 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/11389529/7647fe64-92f6-11e5-981a-1678da9c7439.png\">\n\n<img width=\"880\" alt=\"screen shot 2015-11-24 at 9 56 32 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/11389534/79ebd086-92f6-11e5-9925-18e0d6ef13ca.png\">\n\nI am pretty happy with this:\n- The visual encoding of the focused cell is consistent in always having a grey border and left-blue-border.\n- The visual encoding of the focused cell is always stronger than the soft-selected ones.\n- The 3 different blues (MD Blue 50, 200 and 400) are still fairly subtle.\n- A small compromise is made following an observation of @fperez today that text editors often change the visual style of the cursor when there is a block of text selected. This allows the focused cell to not have a blue background unless multiple cells are selected.\n\nOther minor variations:\n- Remove the blue border altogether (like Brian's A) option but with no blue background when there is only one cell selected?\n- Change width of blue border?\n Also, I dove into the implementation while doing this last bit of work - still quite a bit of work to clean up the implementation before shipping this.\n And a more radical borderless design E)\n\n<img width=\"976\" alt=\"screen shot 2015-11-24 at 10 15 38 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/11389825/00b97828-92f9-11e5-9541-e4ce9f677a05.png\">\n\n<img width=\"993\" alt=\"screen shot 2015-11-24 at 10 15 48 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/11389828/06693b50-92f9-11e5-81fa-eae1c71e7d64.png\">\n\n<img width=\"1012\" alt=\"screen shot 2015-11-24 at 10 16 01 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/11389831/091956a0-92f9-11e5-9e11-d37b339ac7c5.png\">\n\nOne thing that I did in this is to use the MD Green 400 for edit mode. It goes very well with the blue I am using - much better than the HTML `green` we have been using.\n And even more radical F)\n\n<img width=\"983\" alt=\"screen shot 2015-11-24 at 10 28 53 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/11390046/e8262cfa-92fa-11e5-8278-879efb66ea0a.png\">\n\n<img width=\"986\" alt=\"screen shot 2015-11-24 at 10 30 38 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/11390062/05ac3864-92fb-11e5-89ab-92e364902d36.png\">\n\n<img width=\"987\" alt=\"screen shot 2015-11-24 at 10 29 14 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/11390052/f23fb21a-92fa-11e5-9965-4cc852a82d7a.png\">\n @cameronoelsen could have have a look at the different design prototypes that I posted above in this thread and provide feedback?\n I like Brian's D\n\nOn Wed, Nov 25, 2015 at 7:43 AM, Brian E. Granger notifications@github.com\nwrote:\n\n> @cameronoelsen https://github.com/cameronoelsen could have have a look\n> at the different design prototypes that I posted above in this thread and\n> provide feedback?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-159513217.\n > still quite a bit of work to clean up the implementation before shipping this.\n\nYes I know :-) \n\nand I think @jdfreder was right I found the pseudo-selectors `last-of-type` and `first-of-type` once you know the name it's easy to find docs and how to use it. I'll try.\n We need to make sure that when you are shift-selecting a block, that the scroll follows the focused cell as you select off screen.\n Also, right now, if there are multiple cells and you do an action that only works on 1 cell the behavior is pretty weird (it collapses the selection to the one cell and does the action). I think it should simply not do any action in that case.\n Waking up and looking at it again. I think I also like D) the best. But the MD blues we are picking look pretty silly with the the harsh green. Here is an alternate edit mode styling that uses MD green 400 on the left and grey border elsewhere.\n\n<img width=\"922\" alt=\"screen shot 2015-11-25 at 8 28 04 am\" src=\"https://cloud.githubusercontent.com/assets/27600/11402823/a99dfe64-934e-11e5-8534-8c0e97cc1cf4.png\">\n I should note that I only use the selected and soft-selected CSS classes for this design. I did have to add a small bit of logic to make change when the soft-selected class is applied to the focused cell.\n Sorry I haven't been able to follow this discussion too closely (almost done with my period of being super busy!) but from a brief skim I like Brian's D best, too (which looks pretty similar to the one @Carreau had before, just with a lighter blue I think?)\n I think the biggest difference between this design and previous ones by Matthias is that the border is always and only used to indicate the focused cell. Other than that, slightly different blue (and lighter) colors from the Material Design palette.\n I also like D, though I'd be willing to go with the unselected cells having no 'cursor bar' at all, to make the contrast with the 'real cursor' even stronger. That could be achieved simply by having the color of their cursor be the same as the highlight color.\n\nWhat do folks think of that small tweak? But now we're in the  weeds, I'm happy with D as-is too :)\n I am not quite sure I understand. Do you mean, remove the left-blue-border\nof the selected, but not focused cells? And leave it on the focused cell?\nLet me post a screenshot of that variation...\n\nOn Wed, Nov 25, 2015 at 9:27 AM, Fernando Perez notifications@github.com\nwrote:\n\n> I also like D, though I'd be willing to go with the unselected cells\n> having no 'cursor bar' at all, to make the contrast with the 'real cursor'\n> even stronger. That could be achieved simply by having the color of their\n> cursor be the same as the highlight color.\n> \n> What do folks think of that small tweak? But now we're in the weeds, I'm\n> happy with D as-is too :)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-159681294.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Do you mean like this?\n\n[Edit Matthias] AKA D-modified in the rest of the thread [/edit]\n\n<img width=\"1074\" alt=\"screen shot 2015-11-25 at 9 42 12 am\" src=\"https://cloud.githubusercontent.com/assets/27600/11404826/da9d3304-9358-11e5-94e0-81759b3dd914.png\">\n\nI somewhat prefer the original D over this (maybe 60/40), but could live this this too. Thoughts? \n On Wed, Nov 25, 2015 at 9:44 AM, Brian E. Granger notifications@github.com\nwrote:\n\n> I somewhat prefer the original D over this (maybe 60/40), but could live\n> this this too. Thoughts?\n\nYes, that's what I meant, thanks!\n\nI have a mild preference for this over the original b/c the contrast for\nthe selected cell is a bit stronger. But my preference is also very mild,\nand I'll be happy to go with whatever has the majority vote.\n\nI think we're down to D-original and D-modified (this one). Tally so far:\n\nD-original: Brian mildly +\nD-modified: Fernando mildly +\n\nWhat do others think?\n\n## \n\nFernando Perez (@fperez_org; http://fperez.org)\nfperez.net-at-gmail: mailing lists only (I ignore this when swamped!)\nfernando.perez-at-berkeley: contact me here for any direct mail\n Yeah, glad I guessed it right!\n\nI am more than willing to go with the crowd on this last detail.\n\nFeel like we are making progress!\n\nOn Wed, Nov 25, 2015 at 9:48 AM, Fernando Perez notifications@github.com\nwrote:\n\n> On Wed, Nov 25, 2015 at 9:44 AM, Brian E. Granger <\n> notifications@github.com>\n> wrote:\n> \n> > I somewhat prefer the original D over this (maybe 60/40), but could live\n> > this this too. Thoughts?\n> \n> Yes, that's what I meant, thanks!\n> \n> I have a mild preference for this over the original b/c the contrast for\n> the selected cell is a bit stronger. But my preference is also very mild,\n> and I'll be happy to go with whatever has the majority vote.\n> \n> I think we're down to D-original and D-modified (this one). Tally so far:\n> \n> D-original: Brian mildly +\n> D-modified: Fernando mildly +\n> \n> What do others think?\n> \n> ## \n> \n> Fernando Perez (@fperez_org; http://fperez.org)\n> fperez.net-at-gmail: mailing lists only (I ignore this when swamped!)\n> fernando.perez-at-berkeley: contact me here for any direct mail\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-159685955.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Yes, we're very close, thanks everyone! Once we converge, we can clean up the  implementation. We've also learned a lot in the process, as usual from these good discussions :)\n > I think we're down to D-original and D-modified (this one). Tally so far:\n> \n> D-original: Brian mildly +\n> D-modified: Fernando mildly +\n\nIf I had to pick one of the two, I prefer D-modified because the border rounding causes small white space between the left bars in D-original, which I don't like.\n /me whispers: D-modfied would look good without the grey border...  An \"E-modified\" if you will.  Don't mind me though...  That's what custom CSS is for. :)\n @ellisonbg I gave you access you my repo, you can push updates to this PR. As we are mostly working on shifted schedule we shouldn't conflit too much :-) \n unfortunately the last/first-of-type only works on element, not on class. So we cannot use that if we want to style the first last cell differently. \n and @ellisonbg you can get rid of the \"weird border effect\" by using css gradient:\n\n```\n.jupyter-soft-selected {\n    height: 100%;\n    background: linear-gradient(90deg, #FFC0CB 150px, #FFFFFF 150px);   \n}\n.cell.selected, .cell.jupyter-soft-selected{\n    border: none; !important\n}\ndiv.cell {\n    border-radius: 0px;\n}\n.cell.selected {\n    background: linear-gradient(to right, #1e5799 0%,#1e5799 13%,#cceeff 13%,#cceeff 13%,#cceeff 99%);\n}\n```\n\n<img width=\"1152\" alt=\"screen shot 2015-11-25 at 20 05 20\" src=\"https://cloud.githubusercontent.com/assets/335567/11406878/e6b97614-93af-11e5-93da-5f16dcd6fd71.png\">\n I would go with D-modified as well...\n\n> D-modfied would look good without the grey border\n\nProbably but the border is very used in the notebook and it is probably less disruptive... but as you said... there is a custom.css :wink: \n Matthias, I have to work on some other stuff the rest of today and probably\nthe first half of tomorrow. Feel free to work on the refactor if you can in\nthe meantime. Here is my branch if you need to refer to it:\n\nhttps://github.com/ellisonbg/notebook/tree/selection-design\n\nOn Wed, Nov 25, 2015 at 3:29 PM, Dami\u00e1n Avila notifications@github.com\nwrote:\n\n> I would go with D-modified as well...\n> \n> D-modfied would look good without the grey border\n> \n> Probably but the border is very used in the notebook and it is probably\n> less disruptive... but as you said... there is a custom.css [image:\n> :wink:]\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-159754679.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n :tired_face: 65 commits later... the PR start to be in a good shape, style included. Please review.\n\nI got rid of the \"border hack\" and use a step-linear-gradient to achieve the color effect.\n <img width=\"933\" alt=\"screen shot 2015-11-29 at 17 11 42\" src=\"https://cloud.githubusercontent.com/assets/335567/11458221/537f1808-96bc-11e5-82bc-93b528cca91e.png\">\n<img width=\"932\" alt=\"screen shot 2015-11-29 at 17 11 34\" src=\"https://cloud.githubusercontent.com/assets/335567/11458220/537edbb8-96bc-11e5-80ce-2af9fab5a3ae.png\">\n<img width=\"928\" alt=\"screen shot 2015-11-29 at 17 11 23\" src=\"https://cloud.githubusercontent.com/assets/335567/11458222/5386b04a-96bc-11e5-900f-81cf3f9a1be0.png\">\n OK I will have a look...\n\nBrian\n\nOn Sun, Nov 29, 2015 at 8:13 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> [image: screen shot 2015-11-29 at 17 11 42]\n> https://cloud.githubusercontent.com/assets/335567/11458221/537f1808-96bc-11e5-82bc-93b528cca91e.png\n> [image: screen shot 2015-11-29 at 17 11 34]\n> https://cloud.githubusercontent.com/assets/335567/11458220/537edbb8-96bc-11e5-80ce-2af9fab5a3ae.png\n> [image: screen shot 2015-11-29 at 17 11 23]\n> https://cloud.githubusercontent.com/assets/335567/11458222/5386b04a-96bc-11e5-900f-81cf3f9a1be0.png\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-160428245.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Note that GH is showing conflicts with master, so it looks like it needs a rebase...\n May be because I merged #763\n rebased. I'll need to squash the commits in the end anyway. \n I've been playing with it, and the current state feels and looks pretty good to me. Nice job, everyone!\n I'm going to rebase/ squash, the last commit was [30d06fac22ea4fe975f450e29f47eaf5094a0e45](https://github.com/Carreau/jupyter_notebook/commit/30d06fac22ea4fe975f450e29f47eaf5094a0e45)\n +1 to merge this guy as-is. We can refine in master if there are issues.\n Woo, big pr!   Just read through it again, looking good as is :+1:\n I am fine with a refine in master approach. Merging.\n\nOn Fri, Dec 4, 2015 at 7:21 AM, Jonathan Frederic notifications@github.com\nwrote:\n\n> Woo, big pr! Just read threw it again, looking good as is [image: :+1:]\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-161992535.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Great work!\n\nOn Fri, Dec 4, 2015 at 10:55 AM, Brian Granger ellisonbg@gmail.com wrote:\n\n> I am fine with a refine in master approach. Merging.\n> \n> On Fri, Dec 4, 2015 at 7:21 AM, Jonathan Frederic <\n> notifications@github.com> wrote:\n> \n> > Woo, big pr! Just read threw it again, looking good as is [image: :+1:]\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/pull/708#issuecomment-161992535.\n> \n> ## \n> \n> Brian E. Granger\n> Associate Professor of Physics and Data Science\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Taking a break from homework to leave this mandatory celebratory GIF. Great job, everyone! :smile: \n\n![giphy-3](https://cloud.githubusercontent.com/assets/1857993/11599617/89d68376-9a8d-11e5-878d-4d4b804cab58.gif)\n Wooohoooo, sorry, was busy for the last 2 days, will catch up this week-end !\n wow, hadn't seen this had been merged, +1000 for this going in. Thanks everyone for all the hard work that went into making it happen! And cheers to that awesome gif ;)\n Hey all, I have a quick question... I know this is already merged, but the behavior I'm seeing on selection looks like this:\n\n![image](https://cloud.githubusercontent.com/assets/57394/11768829/b6168358-a18d-11e5-8ec0-d63e9bf85fe2.png)\n\nwhich has no highlight at all, and is in fact quite different from where the discussion seemed to have converged. I'm running off master right now (commit caa23d0).  Did things change post merge or did I miss anything elsewhere? It seemed we'd agreed that some kind of highlight was indeed what we wanted...\n Hmmm, that is the old behavior. You are either running 4.0.x stable or need\nto refresh your browser cache to get the new stuff.\n\nOn Sun, Dec 13, 2015 at 11:38 AM, Fernando Perez notifications@github.com\nwrote:\n\n> Hey all, I have a quick question... I know this is already merged, but the\n> behavior I'm seeing on selection looks like this:\n> \n> [image: image]\n> https://cloud.githubusercontent.com/assets/57394/11768829/b6168358-a18d-11e5-8ec0-d63e9bf85fe2.png\n> \n> which has no highlight at all, and is in fact quite different from where\n> the discussion seemed to have converged. I'm running off master right now\n> (commit caa23d0\n> https://github.com/jupyter/notebook/commit/caa23d0d8ba77e01e4025aca31551923b9d62e7e).\n> Did things change post merge or did I miss anything elsewhere? It seemed\n> we'd agreed that some kind of highlight was indeed what we wanted...\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-164290230.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n The most obvious reason would be that `import notebook`  git the right version but `jupyter-notebook` executable has an hardcoded path to a python-executable that have 4.0.6\n Very odd...\n\n```\ndenali[~]> jupyter notebook --version\n4.1.0.b1\n```\n\nand that screenshot was after multiple cache dumps and page reloads.\n\nBut OK, if you guys aren't seeing that, then I'll keep digging. As long as it's just me, carry on...\n\nps - Brian, I'll ping you later today :)\n > Very odd...\n\nindeed... we should improve `--debug` to log the **on disk** path of files that are served. \n Ah, Brian helped me... JS newbie here... `npm run build` missing :)\n @fperez I would suggest you `c.NotebookApp.ignore_minified_js=True` in your py/json config file. \n Ah, great! That's the flag I was looking for and couldn't remember...\n\nThat stuff should be _prominently_ in our dev docs/readmes to help people trying to run from source, and who aren't npm ninjas (like me :)\n btw, is that for the `jupyter_notebook_config.py` file, or something else? \n @fperez: Good point and something I've been meaning to do since I learned about the command myself!\n\nI've opened up and issue and will be looking at it later tonight.\n @fperez @captainsafia https://jupyter-notebook.readthedocs.org/en/latest/config.html and https://jupyter-notebook.readthedocs.org/en/latest/frontend_config.html should be helpful. And if they aren't, we can fix them ;)\n @willingc: Derp! Thanks for linking. Very useful. \n\n:+1: \n > That stuff should be prominently in our dev docs/readmes to help people trying to run from source, and who aren't npm ninjas (like me :)\n\nIt's [here in the docs](http://jupyter-notebook.readthedocs.org/en/latest/development_js.html) but we can do better. \n\nIt's also in the [`contributing.md`](https://github.com/jupyter/notebook/blob/master/CONTRIBUTING.md#minified-javascript)\n\n> btw, is that for the jupyter_notebook_config.py file, or something else?\n\nYes, or JSON config, of command line flag, as you wish. \n Sounds good, thanks so much folks! We are indeed getting better here, I really appreciate it :) \n And I apologize to all of you who have helped so much if, in my getting lost in some of our new complexity, I sometimes sound a bit impatient.  Grumpy old man and all that... I will do better :)\n @fperez Thanks for sharing your experience honestly (and humbly). You have the benefit of knowing where to ask. Not every user will. \n\nJust to understand the root cause of the initial issue that you had @ellisonbg help with. You were installing and building the docs locally on your system and were getting errors. Which is a reasonable use case for end users that may do a git clone, want to build the docs locally, and try to do so before building the whole project and its dev environment locally.\n\nGrumpy Cat is smiling ;)\n![2015-10-07 17 56 43](https://cloud.githubusercontent.com/assets/2680980/11798734/5656f8bc-a282-11e5-8f85-31e40e66abd6.jpg)\n :)\n\nOn Mon, Dec 14, 2015 at 4:51 PM, Carol Willing notifications@github.com\nwrote:\n\n> @fperez https://github.com/fperez Thanks for sharing your experience\n> honestly (and humbly). You have the benefit of knowing where to ask. Not\n> every user will.\n> \n> Just to understand the root cause of the initial issue that you had\n> @ellisonbg https://github.com/ellisonbg help with. You were installing\n> and building the docs locally on your system and were getting errors. Which\n> is a reasonable use case for end users that may do a git clone, want to\n> build the docs locally, and try to do so before building the whole project\n> and its dev environment locally.\n> \n> Grumpy Cat is smiling ;)\n> [image: 2015-10-07 17 56 43]\n> https://cloud.githubusercontent.com/assets/2680980/11798734/5656f8bc-a282-11e5-8f85-31e40e66abd6.jpg\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/708#issuecomment-164606782.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Thanks for happy grumpy cat :)\n\nBut to clarify: no, it wasn't a doc build, it was trying to run the notebook itself from a git master checkout.  But I forgot to run `npm run build`, so my JS assets were out of date.  And, not having stated either in my config or at the command line the `ignore_minified_js=True` flag, then I was getting stale JS assets.\n\nThe behavior was thus rather confusing: at the command-line, a `jupyter notebook --version` call _looked_ OK, since it reported a current version, which was indeed true. But that current version was 'half-current', if you will, since it was 'python-current', but 'javascript-old', as it was still running old JS code, from whenever I had last run a JS build.\n\nSo, the summary is, you either:\n- get religious about _always_ running `npm run build`\n- or you configure your setup with the `ignore_minified_js=True` flag.\n\nSince I'm forgetful and I also find the npm build slow, I went for the latter...\n @fperez Thanks for clarifying and the detailed explanation. I've taken your feedback and opened a doc issue so that we don't miss revisiting and improving our docs on this. #872 \n Wonderful, thanks!!\n > And I apologize to all of you who have helped so much if, in my getting lost in some of our new complexity, I sometimes sound a bit impatient. Grumpy old man and all that... I will do better :)\n\nWe always appreciate feedback from new users ! (Only mildly joking)\n\nYou can also nuke all your `.min.js` files, so if you ever forgot the `--ignore...` flag, the jsdoes cannot be loaded and the page crashes (which make things more obvious). \n","ping @jdfreder \n Migrated \n","This all looks OK to me. Do you want to do anything else with it before it gets merged?\n Nope, should be ready.\n","Totally agree - it is absolutely ridiculous that you can't undo delete more than one cell. The notebook makes it very easy to do this by mistake. Makes it so I can't really use the notebook for any type of serious work.\n @lucaswiser its just a feature request, and its absence anything but ridiculous. I'm not sure that you appreciate how much work has gone into getting the notebook this far.\n It's your feature request, and he's agreeing that it would be a useful feature, so let's not get carried away taking swings at him. Was the language he used a little bit overzealous? Sure. Did he mean it to be taken as a personal assault on all of the developers and their hard work? I'd hope not, and I'll give him the benefit of the doubt.\n\nI've been lurking for only a few months on this project, mostly for grins and to learn a bit more about team collaboration on code projects, and over the course of that time I've seen the topic of multiple undo come up two, probably three times. In all circumstances, someone on the thread remarked how it's easy to accidentally screw up a notebook to where they can't get it back to where they want it. Since some people use this tool for Serious Work, they will naturally be upset if the tool lets them shoot themselves in the foot and doesn't provide a way to undo the damage. Those people might be prone to hyperbolic language when talking about their experience.\n\nHaving multiple undo would be one way to help mitigate the situation. There are more ways than one to skin this cat, though, and perhaps it would also be productive to talk about ways to help prevent the user from damaging their notebooks in the first place. Perhaps add barriers between the user and deleting input cells (individually, successively, or _en masse_).\n\nWhat is _not_ productive is snapping at users about how much they should appreciate the work that's already been done. They'll either already appreciate it, or they won't. Dictating to them how much they should appreciate the developers and their work will probably not result in more appreciation. Instead, it is (in my opinion) more likely to result in fewer users, more of whom have a salty taste in their mouth.\n\nFor the record, this project is pretty awesome, and I'm amazed at the ongoing development and collaboration I see every day on it.\n I get it - lots of hard work making an open source project. No disrespect. The notebook has so many amazing features and is such an impressive tool, it is _ridiculous_ that I can delete some work by pressing d 4 times and it's gone forever (possibly revert to checkpoint and get it back). \n I will also add that having a limited undo capability has made some prominent computer science education researchers comment that Jupyter is not appropriate for any use in the classroom. I disagree, but it does make it a hard sell to some to use Jupyter, and lack of undo/redo causes some real problems with students. At some point, these usability issues will need to be faced by the project and will have to rise to the top of the priorities. There are a lot of possibilities for things to work on, but these basic use limitations should receive more attention. Note, too, that checkpointing has the same kind of limitation: there is only one. Also, it would be at the top of my votes of priorities. \n I don't think anyone is snapping or taking swings. We agree this is an important feature and hope to have this ready for the next major release of the notebook. We especially appreciate your patience, since this has taken us so long to get to.\n\nWe've been meaning to work multiple undo into a larger undo of notebook transactions, which is part of the source of the delay, but we should be able to get a simpler undelete stack that at least prevents the _loss_ of cells. Even if it might not rigorously put them back where they belong after various add/move operations since the deletion, it should at least prevent data loss, which is the most important part.\n Just for the record, it took Wolfram Research **26 years** to address multiple undo in the Mathematica notebook! (they did it in Mathematica 10, released just a year and a half ago).\n\nSo this is not an easy task at all :-)\n A simple approach is to keep an undo stack but clear it on any add/move operations. That probably covers 80% of the use cases while avoiding most of the complexity.\n This just happened to me by accidentally holding down the x key and I don't know to undo it. Please help! ","IPython does not have cache for that. Are you using IPython.Image with or without embeding option, if without then the browser a caching, and there is nothing we can do for that, \n What do you mean by the embedding option? I just call Image(url=path) in a\ncell\nOn Nov 10, 2015 12:54 AM, \"Matthias Bussonnier\" notifications@github.com\nwrote:\n\n> IPython does not have cache for that. Are you using IPython.Image with or\n> without embeding option, if without then the browser a caching, and there\n> is nothing we can do for that,\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/713#issuecomment-155328281.\n > I just call Image(url=path)\n\nI am not supposed to know that. You just tell me that that you are using Image, \n\nKeep in mind that `Image(<a url>)` is not the same as `Image(<a filename>)` is not the same as `Image(url=<a url>)`is not the same as `Image(filename=<a filename>)` is likely not the same as half of the other similar option, where you add the keyword `embed=True|False`. \n\nSo let's look at the doc. Non relevant part removed.\n\n``` python\nIn[2]: from IPython.display import Image\nIn[3]: Image?? \nInit signature: Image(self, data=None, url=None, filename=None, format='png', embed=None, ...)\n\nCreate a PNG/JPEG image object given raw data.\n\n...\nParameters\n----------\ndata : unicode, str or bytes\n    ...\n    This always results in embedded image data.\nurl : unicode\n    A URL to download the data from. If you specify `url=`,\n    the image data will not be embedded unless you also specify `embed=True`.\nfilename : unicode\n    ...\n    Images from a file are always embedded.\nformat : unicode\n    ...\nembed : bool\n    Should the image data be embedded using a data URI (True) or be\n    loaded using an <img> tag. Set this to True if you want the image\n    to be viewable later with no internet connection in the notebook.\n\n    Default is `True`, unless the keyword argument `url` is set, then\n    default value is `False`.\n\n    ...\nwidth : int\n    ...\nheight : int\n    ...\nretina : bool\n    ...\nunconfined: bool\n    ...\nmetadata: dict\n    ...\n\nExamples\n--------\n# embedded image data, works in qtconsole and notebook\n# when passed positionally, the first arg can be any of raw image data,\n# a URL, or a filename from which to load image data.\n# The result is always embedding image data for inline images.\nImage('http://www.google.fr/images/srpr/logo3w.png')\nImage('/path/to/image.jpg')\nImage(b'RAW_PNG_DATA...')\n\n# Specifying Image(url=...) does not embed the image data,\n# it only generates `<img>` tag with a link to the source.\n# This will not work in the qtconsole or offline.\n```\n\nSo actually we have 3 exclusive kwargs, each with 2 possiblity + embed with 3 possibility (True, False, None) that's 3_2_3 = 18 call signatures that are commonly used by our users, probably a third of which don't make sens, like if you pass a `<url>` to `filename=`.\n\nIn your case, for me, It's particularly non obvious why you load a file from disk with a `url=`, I personally would assume that from disk you use `filename=`. But you probably choose to use `url=` for a good reason after reading the documentation instead of using the default argument. I don't see how you could have chosen `url=` otherwise. So let's stick with `url=`. \n\nI still have to make assumption as to all the \"just\" in the `just call Image(url=path)` is doing:\nAs far as I understand, for `url=` to work in what seem to be your case,  you are **likely** to pass a relative path, which **by chance** should correspond to a relative url (hypothesis A). Your also likely to not have changed directory in your notebook (hypothesis B), or you would get a 404. I make these 2 hypothesis because I don't want to enumerate all the other possibilities and (sub) possibilities. \n\nSo you're not setting `embed` despite passing another kwarg which is not the first. \n(Sorry if you are in an older version of IPython that document the existence of `url=` and not `embed=`). That's means it default to `None`: when using  `url=` it's equivalent to `embed=False` according the the function docstring, so you are not embedding, and you are actually passing a relative path, which is interpreted as a relative url, which by chance works because you haven't changed working directory. So when you re-exec you are hitting browser caching. So there is nothing we can do.\n\nThis conclusion only hold if (Hypothesis A) and (Hypothesis B) holds, otherwise I'm not sure what's happening. (Hypothesis A) is also unlikely if you are not on a unix-based machine because of `os.sep`, though we, and windows too do go through complex mechanisme to allow forward slashes in path names. \n\nHope that would give you enough information to determine the cause with certainty, I personally don't have sufficient knowledge of what you are doing to give a judgement with 100% certainty. \n\nThanks. \n Sorry about not giving you enough info.\n\nI'm on Ubuntu 14.04, with Python 2 (I'm assuming the latest version; it can\nbe at most a few months old).\n\nSo Image(filename=<file>), Image(data=<file>), or Image(<file>) can't load\nthe gif. It's either \"gifs can't be embedded\" (embed=True) or the notebook\nshows a broken image (embed=False).\n\nI am passing a relative path, and have not changed directory.\n\nOn Tue, Nov 10, 2015 at 2:14 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I just call Image(url=path)\n> \n> I am not supposed to know that. You just tell me that that you are using\n> Image,\n> \n> Keep in mind that Image(<a url>) is not the same as Image(<a filename>)\n> is not the same as Image(url=<a url>)is not the same as Image(filename=<a\n> filename>) is likely not the same as half of the other similar option,\n> where you add the keyword embed=True|False.\n> \n> So let's look at the doc. Non relevant part removed.\n> \n> In[2]: from IPython.display import Image\n> In[3]: Image??\n> Init signature: Image(self, data=None, url=None, filename=None, format='png', embed=None, ...)\n> \n> Create a PNG/JPEG image object given raw data.\n> \n> ...\n> Parameters----------\n> data : unicode, str or bytes\n>     ...\n>     This always results in embedded image data.\n> url : unicode\n>     A URL to download the data from. If you specify `url=`,\n>     the image data will not be embedded unless you also specify `embed=True`.\n> filename : unicode\n>     ...\n>     Images from a file are always embedded.format : unicode\n>     ...\n> embed : bool\n>     Should the image data be embedded using a data URI (True) or be\n>     loaded using an <img> tag. Set this to True if you want the image\n>     to be viewable later with no internet connection in the notebook.\n> \n> ```\n> Default is `True`, unless the keyword argument `url` is set, then\n> default value is `False`.\n> \n> ...\n> ```\n> \n> width : int\n>     ...\n> height : int\n>     ...\n> retina : bool\n>     ...\n> unconfined: bool\n>     ...\n> metadata: dict\n>     ...\n> \n> Examples--------# embedded image data, works in qtconsole and notebook# when passed positionally, the first arg can be any of raw image data,# a URL, or a filename from which to load image data.# The result is always embedding image data for inline images.\n> Image('http://www.google.fr/images/srpr/logo3w.png')\n> Image('/path/to/image.jpg')\n> Image(b'RAW_PNG_DATA...')\n> \n> # Specifying Image(url=...) does not embed the image data,# it only generates `<img>` tag with a link to the source.# This will not work in the qtconsole or offline.\n> \n> So actually we have 3 exclusive kwargs, each with 2 possiblity + embed\n> with 3 possibility (True, False, None) that's 3_2_3 = 18 call signatures\n> that are commonly used by our users, probably a third of which don't make\n> sens, like if you pass a <url> to filename=.\n> \n> In your case, for me, It's particularly non obvious why you load a file\n> from disk with a url=, I personally would assume that from disk you use\n> filename=. But you probably choose to use url= for a good reason after\n> reading the documentation instead of using the default argument. I don't\n> see how you could have chosen url= otherwise. So let's stick with url=.\n> \n> I still have to make assumption as to all the \"just\" in the just call\n> Image(url=path) is doing:\n> As far as I understand, for url= to work in what seem to be your case,\n> you are _likely_ to pass a relative path, which _by chance_ should\n> correspond to a relative url (hypothesis A). Your also likely to not have\n> changed directory in your notebook (hypothesis B), or you would get a 404.\n> I make these 2 hypothesis because I don't want to enumerate all the other\n> possibilities and (sub) possibilities.\n> \n> So you're not setting embed despite passing another kwarg which is not\n> the first.\n> (Sorry if you are in an older version of IPython that document the\n> existence of url= and not embed=). That's means it default to None: when\n> using url= it's equivalent to embed=False according the the function\n> docstring, so you are not embedding, and you are actually passing a\n> relative path, which is interpreted as a relative url, which by chance\n> works because you haven't changed working directory. So when you re-exec\n> you are hitting browser caching. So there is nothing we can do.\n> \n> This conclusion only hold if (Hypothesis A) and (Hypothesis B) holds,\n> otherwise I'm not sure what's happening. (Hypothesis A) is also unlikely if\n> you are not on a unix-based machine because of os.sep, though we, and\n> windows too do go through complex mechanisme to allow forward slashes in\n> path names.\n> \n> Hope that would give you enough information to determine the cause with\n> certainty, I personally don't have sufficient knowledge of what you are\n> doing to give a judgement with 100% certainty.\n> \n> Thanks.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/713#issuecomment-155552757.\n Are there obstructions to embedding gifs or is it just something no one has\nneeded all that much?\n\nOn Tue, Nov 10, 2015 at 3:00 PM, Greg Yang sorcererofdm@gmail.com wrote:\n\n> Sorry about not giving you enough info.\n> \n> I'm on Ubuntu 14.04, with Python 2 (I'm assuming the latest version; it\n> can be at most a few months old).\n> \n> So Image(filename=<file>), Image(data=<file>), or Image(<file>) can't load\n> the gif. It's either \"gifs can't be embedded\" (embed=True) or the notebook\n> shows a broken image (embed=False).\n> \n> I am passing a relative path, and have not changed directory.\n> \n> On Tue, Nov 10, 2015 at 2:14 PM, Matthias Bussonnier <\n> notifications@github.com> wrote:\n> \n> > I just call Image(url=path)\n> > \n> > I am not supposed to know that. You just tell me that that you are using\n> > Image,\n> > \n> > Keep in mind that Image(<a url>) is not the same as Image(<a filename>)\n> > is not the same as Image(url=<a url>)is not the same as Image(filename=<a\n> > filename>) is likely not the same as half of the other similar option,\n> > where you add the keyword embed=True|False.\n> > \n> > So let's look at the doc. Non relevant part removed.\n> > \n> > In[2]: from IPython.display import Image\n> > In[3]: Image??\n> > Init signature: Image(self, data=None, url=None, filename=None, format='png', embed=None, ...)\n> > \n> > Create a PNG/JPEG image object given raw data.\n> > \n> > ...\n> > Parameters----------\n> > data : unicode, str or bytes\n> >     ...\n> >     This always results in embedded image data.\n> > url : unicode\n> >     A URL to download the data from. If you specify `url=`,\n> >     the image data will not be embedded unless you also specify `embed=True`.\n> > filename : unicode\n> >     ...\n> >     Images from a file are always embedded.format : unicode\n> >     ...\n> > embed : bool\n> >     Should the image data be embedded using a data URI (True) or be\n> >     loaded using an <img> tag. Set this to True if you want the image\n> >     to be viewable later with no internet connection in the notebook.\n> > \n> > ```\n> > Default is `True`, unless the keyword argument `url` is set, then\n> > default value is `False`.\n> > \n> > ...\n> > ```\n> > \n> > width : int\n> >     ...\n> > height : int\n> >     ...\n> > retina : bool\n> >     ...\n> > unconfined: bool\n> >     ...\n> > metadata: dict\n> >     ...\n> > \n> > Examples--------# embedded image data, works in qtconsole and notebook# when passed positionally, the first arg can be any of raw image data,# a URL, or a filename from which to load image data.# The result is always embedding image data for inline images.\n> > Image('http://www.google.fr/images/srpr/logo3w.png')\n> > Image('/path/to/image.jpg')\n> > Image(b'RAW_PNG_DATA...')\n> > \n> > # Specifying Image(url=...) does not embed the image data,# it only generates `<img>` tag with a link to the source.# This will not work in the qtconsole or offline.\n> > \n> > So actually we have 3 exclusive kwargs, each with 2 possiblity + embed\n> > with 3 possibility (True, False, None) that's 3_2_3 = 18 call signatures\n> > that are commonly used by our users, probably a third of which don't make\n> > sens, like if you pass a <url> to filename=.\n> > \n> > In your case, for me, It's particularly non obvious why you load a file\n> > from disk with a url=, I personally would assume that from disk you use\n> > filename=. But you probably choose to use url= for a good reason after\n> > reading the documentation instead of using the default argument. I don't\n> > see how you could have chosen url= otherwise. So let's stick with url=.\n> > \n> > I still have to make assumption as to all the \"just\" in the just call\n> > Image(url=path) is doing:\n> > As far as I understand, for url= to work in what seem to be your case,\n> > you are _likely_ to pass a relative path, which _by chance_ should\n> > correspond to a relative url (hypothesis A). Your also likely to not have\n> > changed directory in your notebook (hypothesis B), or you would get a 404.\n> > I make these 2 hypothesis because I don't want to enumerate all the other\n> > possibilities and (sub) possibilities.\n> > \n> > So you're not setting embed despite passing another kwarg which is not\n> > the first.\n> > (Sorry if you are in an older version of IPython that document the\n> > existence of url= and not embed=). That's means it default to None: when\n> > using url= it's equivalent to embed=False according the the function\n> > docstring, so you are not embedding, and you are actually passing a\n> > relative path, which is interpreted as a relative url, which by chance\n> > works because you haven't changed working directory. So when you re-exec\n> > you are hitting browser caching. So there is nothing we can do.\n> > \n> > This conclusion only hold if (Hypothesis A) and (Hypothesis B) holds,\n> > otherwise I'm not sure what's happening. (Hypothesis A) is also unlikely if\n> > you are not on a unix-based machine because of os.sep, though we, and\n> > windows too do go through complex mechanisme to allow forward slashes in\n> > path names.\n> > \n> > Hope that would give you enough information to determine the cause with\n> > certainty, I personally don't have sufficient knowledge of what you are\n> > doing to give a judgement with 100% certainty.\n> > \n> > Thanks.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/issues/713#issuecomment-155552757.\n Ok, so it used to be impossible to embed GIF, indeed. There is no reason for it anymore. A traceback is generally useful to  figure out the issue localisation:\n\n```\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-3-3a5539745a2d> in <module>()\n----> 1 display(Image('REIMB.gif', format='jpg'))\n\n/Users/bussonniermatthias/anaconda3/envs/35/lib/python3.5/site-packages/IPython/core/display.py in __init__(self, data, url, filename, format, embed, width, height, retina, unconfined, metadata)\n    731 \n    732         if self.embed and self.format not in self._ACCEPTABLE_EMBEDDINGS:\n--> 733             raise ValueError(\"Cannot embed the '%s' image format\" % (self.format))\n    734         self.width = width\n    735         self.height = height\n\nValueError: Cannot embed the 'gif' image format\n```\n\nOur code does indead not know how to embed gif, and it should be easy to fix. \nthe `format=` kwarg should override autodetection also, it does not, we can try to fix that. \n\nYou can workaround by renaming the file to `.png` and use `filename=`, \nor silly but the following should work (at least does for me):\n\n``` python\nwith open('yourfile.gif','rb') as f:\n    display(Image(f.read()), format='png')\n```\n\nI'll rename the issue.\n OK that `with open` clause worked for me. Hopefully the 'gif' format can be\nofficially supported soon.\n\nOn Tue, Nov 10, 2015 at 5:28 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Ok, so it used to be impossible to embed GIF, indeed. There is no reason\n> for it anymore. A traceback is generally useful to figure out the issue\n> localisation:\n> \n> ---\n> \n> ValueError                                Traceback (most recent call last)\n> <ipython-input-3-3a5539745a2d> in <module>()\n> ----> 1 display(Image('REIMB.gif', format='jpg'))\n> \n> /Users/bussonniermatthias/anaconda3/envs/35/lib/python3.5/site-packages/IPython/core/display.py in **init**(self, data, url, filename, format, embed, width, height, retina, unconfined, metadata)\n>     731\n>     732         if self.embed and self.format not in self._ACCEPTABLE_EMBEDDINGS:\n> --> 733             raise ValueError(\"Cannot embed the '%s' image format\" % (self.format))\n>     734         self.width = width\n>     735         self.height = height\n> \n> ValueError: Cannot embed the 'gif' image format\n> \n> Our code does indead not know how to embed gif, and it should be easy to\n> fix.\n> the format= kwarg should override autodetection also, it does not, we can\n> try to fix that.\n> \n> You can workaround by renaming the file to .png and use filename=,\n> or silly but the following should work (at least does for me):\n> \n> with open('yourfile.gif','rb') as f:\n>     display(Image(f.read()), format='png')\n> \n> I'll rename the issue.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/713#issuecomment-155600999.\n Maybe this can help. I've used url but forced the browser cache to fail by doing something like\n\n```\nImage(url='./demo.gif'+'?'+str(random.random()))\n```\n I haven't read all comments but I just renamed the image with a .png extension and used Image('filename.png') and it works fine.\n","Do you have a complete example, including notebooks, to reproduce the issue? My guess is it's race conditions or something like that in the execute preprocessor, or possibly failure to notice and propagate errors.\n @minrk, after a recent update (probably tornado 4.2 -> 4.3?) I see this issue much less. I'll report any updates.\n @minrk, for the record, I tried to remove all the exception handling in the functions that run the notebooks (i.e. `run_notebook`, see link above) and I don't get any exception.\n @tritemio this is also a symptom of the frontend throwing an unhandled error.  Can you open the web developer console of your web browser, and see if you see any errors there?\n @jdfreder, @minrk I still have this problem with notebook 4.2rc1 (nbconvert 4.2.dev).\n\nNow I have created a stand-alone example of the master notebook executing a template notebook which you can find [here](https://github.com/tritemio/nbrun).\n\nI've tested it on OS X and Windows and I only have the problem on Windows. The web console does not show any errors, as there is no error/message in the terminal used to launch `jupyter notebook`.\n\nThe issue is not deterministic. I need to execute the master notebook several times until it gets \"stuck\". But I definitely can reproduce it within a few minutes.\n FYI, I have reproduced the issue on a second windows machine with notebook 4.0.6 and nbconvert 4.1.\n @tritemio Thanks for reporting that you were able to reproduce.\n\n@minrk @jdfreder I will try to reproduce on a Windows 10 machine later this weekend. Will let you know what I uncover.\n Thanks for more details. The circumstances are giving me the suspicion that we are doing something not quite right in our zmq sockets, which can be a pain to debug, especially when it seems to only be a problem on Windows. I'll try to find time to dig into it.\n @minrk @willingc let me know if you are able to reproduce the issue. The two machines I tested with both run Windows 7 x64 and Anaconda and spinning-disk hardrive. On these machines the cycle of executing and saving a trivial notebook takes > 2 seconds. It's faster on OS X (and I suspect linux, from previous experience). Maybe this additional delay exposes a race condition?\n","Capturing the subprocess output and including it in the error should work. I think the Exception's message is already passed through in the handler, so I would guess that it's mainly a matter of including it in the Exception in nbconvert. Perhaps it should be in a special attribute, though, so that it's not in the standard tracebacks.\n I opened jupyter/nbconvert#233 to capture latex stderr. With that and no other chnages here, the full latex barf will get to the user:\n\n<img width=\"888\" alt=\"screen shot 2016-02-08 at 13 32 36\" src=\"https://cloud.githubusercontent.com/assets/151929/12885719/800ea5ee-ce68-11e5-8baf-d3dfa9b4c1b1.png\">\n","This is on 4.0.6.\n That's just nose walking through the module hierarchy to discover tests. \nWhen it try to import `notebook.terminal` it fails (cause terminado not installed). There is nothing we can do for that, except actually telling nose on the command line `--exclude=terminal`. \n According to setup.py, terminado is requires on every platform other than Windows.\n Ah i see. My mistake.\n","I think this is fixed in master (4.1)\n @minrk Verified. Fixed in 4.1.0b1.\n<img width=\"901\" alt=\"screen shot 2015-12-16 at 5 36 00 am\" src=\"https://cloud.githubusercontent.com/assets/2680980/11842249/579bd310-a3b7-11e5-9260-6a9155074590.png\">\n","Added test, and remove the extra-space. I also  made `ansispan` private by adding leading underscore, and exported it from the module (to test from js console). \n Travis is happy. \n :+1: for tests!\n\nMaybe add a comment before line 316 describing why that change was made or referencing the appropriate PR? I can imagine looking at this in a couple of months and being confused as to why that code is there.\n","How are you doing the change of cell type? In general these types of\nactions take place in command mode so the behavior is not considered a bug.\nPreviously, we used to do more manual focusing, but it led to some really\nfrustrating and wonky behaviors.\n\nOn Fri, Nov 13, 2015 at 2:21 AM, dgua notifications@github.com wrote:\n\n> Title says it all: Assume you have focus in one cell. Then I change the\n> cell type, for example from Code to Markdown. I can't just continue typing.\n> No, I have to click once again into the cell.\n> \n> I find this extremely annoying. Could this be fixed? (I am on Safari,\n> Jupyter 4)\n> \n> Thanks.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/719.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n With the popup menu in the toolbar!\n Here is the logic that happens:\n- When you click on the toolbar, the cell us blurred and it enters command\n  mode.\n- After the action, it remains in command mode.\n- For while we were refocusing the cell to re-enter edit mode, but ran into\n  lots of problems with the scroll position of the page jumping. That matches\n  our experience in other areas of the UI that you should almost never focus\n  elements by hand. It is the main source of bugs in our UI.\n\nI know this doesn't help, but at least you can understand the situation.\n\nOn Fri, Nov 13, 2015 at 9:21 AM, dgua notifications@github.com wrote:\n\n> With the popup menu in the toolbar!\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/719#issuecomment-156493102.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Brian, I appreciate you taking the time to reply and explain the situation. \n\nHowever, this behavior is not satisfactory. It contradicts a general paradigm of UI. \n\nI think the problem is with your first step: \"When you click in the toolbar, the cell...enters command mode\". This should not happen IMHO if what is accessed in the toolbar is an editing command. No other application behaves this way. \n\nPerhaps this is a limitation of trying to implement this in a browser rather than having a specialized app. At any rate, it would be worth the effort to try to correct this behavior if possible. \n\nMany thanks for developing such a useful tool BTW. \n","+1\n Yep, that makes sense.\n The error is name change related, only 5 minutes before this PR was opened.\n\n```\n======================================================================\nERROR: test_list_formats (jupyter_notebook.services.nbconvert.tests.test_nbconvert_api.APITest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/travis/build/jupyter/jupyter_notebook/jupyter_notebook/services/nbconvert/tests/test_nbconvert_api.py\", line 27, in test_list_formats\n    formats = self.nbconvert_api.list_formats().json()\n  File \"/home/travis/build/jupyter/jupyter_notebook/jupyter_notebook/services/nbconvert/tests/test_nbconvert_api.py\", line 20, in list_formats\n    return self._req('GET', '')\n  File \"/home/travis/build/jupyter/jupyter_notebook/jupyter_notebook/services/nbconvert/tests/test_nbconvert_api.py\", line 16, in _req\n    response.raise_for_status()\n  File \"/home/travis/virtualenv/python2.7.9/lib/python2.7/site-packages/requests/models.py\", line 851, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nHTTPError: 500 Server Error: Internal Server Error\n-------------------- >> begin captured logging << --------------------\nNotebookApp: INFO: Shutting down kernels\nroot: DEBUG: Installing kernelspec in /tmp/tmpkAKO0V/.local/share/jupyter/kernels/python2\nNotebookApp: INFO: Serving notebooks from local directory: /tmp/tmpegAI0t\nNotebookApp: INFO: 0 active kernels \nNotebookApp: INFO: The IPython Notebook is running at: http://localhost:12341/\nNotebookApp: INFO: Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/contents HTTP/1.1\" 200 214\nrequests.packages.urllib3.connectionpool: INFO: Starting new HTTP connection (1): localhost\nNotebookApp: WARNING: Could not import nbconvert: No module named jupyter_nbconvert.exporters.export\nrequests.packages.urllib3.connectionpool: DEBUG: \"GET /api/nbconvert HTTP/1.1\" 500 109\nNotebookApp: ERROR: {\n  \"Host\": \"localhost:12341\", \n  \"User-Agent\": \"python-requests/2.7.0 CPython/2.7.9 Linux/3.13.0-40-generic\", \n  \"Connection\": \"keep-alive\", \n  \"Accept\": \"*/*\", \n  \"Accept-Encoding\": \"gzip, deflate\"\n}\nNotebookApp: ERROR: 500 GET /api/nbconvert (::1) 2.00ms referer=None\n```\n\nI think the namespace changed for jupyter_nbconvert to nbconvert in https://github.com/jupyter/nbconvert/pull/18, only 30 minutes ago.\n With new commit comes new merge commit testing!\n It looks like #71 should have fixed all the references to nbconvert.\n With new testing comes success.\n","The notebook doesn't depend on the qtconsole. If you just want the notebook: `pip install notebook`. The `jupyter` metapackage depends on all the Jupyter stuff.\n","The CodeMirror textareas already have \n\n```\nautocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"\n```\n\nIs there more to add that I'm not seeing?\n Hmm, that looks right. I was getting autocorrected using an iPad on tmpnb.\n\nOn Tue, Nov 17, 2015, 8:48 AM Min RK notifications@github.com wrote:\n\n> The CodeMirror textareas already have\n> \n> autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"\n> \n> Is there more to add that I'm not seeing?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/721#issuecomment-157374426.\n Maybe there's another element and/or attribute we need to be setting it on.\n","Hi, \n\nThanks, for writing all these things up. Probably out of order responses:\n\n1) You might want to contact jupyter-education google group. People there might be also interested. \n\n2) The current server is extensible, you can add tornado handler, but not super easy, we are planning on having things more pluggable, we are actively working on it, but it will not be there soon. \n\n3) Yes you can embed, WSGI will likely not be enough for the notebook, that's why we have jupyterhub that can serve the notebook under one prefix, and other app under the other. It's based on a live http proxy that can update routing URLs without restart and without drooping websocket connexion. As far as we know there is not that  many apps capable of doing that.  [see there](https://developer.rackspace.com/blog/deploying-jupyterhub-for-education/) for detail. It can handle a few hundreds of people. \n\n4) another alternative, we are working on is making notebook component reusable, so you might be able to just embed the part of Jupyter you like.\n\nYou are likely to reach more people by writing to jupyter/jupyter-education google groups. I can't promise resources, that will likely be on a per-person basis if they decide to dedicate time on that. \n\nVarious related project that might be useful to you:\n- mybinder.org\n- https://groups.google.com/forum/#!search/jupyter-education\n- https://groups.google.com/forum/#!search/jupyter\n- https://github.com/oreillymedia/thebe\n- https://github.com/jupyter/nbgrader\n- https://github.com/jupyter/jupyterhub\n Sent them a message, we'll see what happens. Thanks for the pointers so far.\n","No, but there are plenty of libraries in various languages for letting you use GPUs. There's nothing about the notebook that should involve setting up GPUs, though.\n","Can you provide the complete traceback?\n Here it is -- sorry for not giving it to start with:\n\n```\n>jupyter notebook\nTraceback (most recent call last):\n  File \"C:\\Users\\Iain\\Anaconda3\\lib\\site-packages\\traitlets\\traitlets.py\",\n line 432, in __get__\n    value = obj._trait_values[self.name]\nKeyError: 'ip'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\Iain\\Anaconda3\\Scripts\\jupyter-notebook-script.py\", line\n5, in <module>\n    sys.exit(main())\n  File \"C:\\Users\\Iain\\Anaconda3\\lib\\site-packages\\jupyter_core\\application\n.py\", line 267, in launch_instance\n    return super(JupyterApp, cls).launch_instance(argv=argv, **kwargs)\n  File \"C:\\Users\\Iain\\Anaconda3\\lib\\site-packages\\traitlets\\config\\applica\ntion.py\", line 591, in launch_instance\n    app.initialize(argv)\n  File \"<decorator-gen-115>\", line 2, in initialize\n  File \"C:\\Users\\Iain\\Anaconda3\\lib\\site-packages\\traitlets\\config\\applica\ntion.py\", line 75, in catch_config_error\n    return method(app, *args, **kwargs)\n  File \"C:\\Users\\Iain\\Anaconda3\\lib\\site-packages\\notebook\\notebookapp.py\"\n, line 1007, in initialize\n    self.init_webapp()\n  File \"C:\\Users\\Iain\\Anaconda3\\lib\\site-packages\\notebook\\notebookapp.py\"\n, line 866, in init_webapp\n    self.login_handler_class.validate_security(self, ssl_options=ssl_options)\n  File \"C:\\Users\\Iain\\Anaconda3\\lib\\site-packages\\notebook\\auth\\login.py\",\n line 88, in validate_security\n    if not app.ip:\n  File \"C:\\Users\\Iain\\Anaconda3\\lib\\site-packages\\traitlets\\traitlets.py\",\n line 439, in __get__\n    value = self._validate(obj, dynamic_default())\n  File \"C:\\Users\\Iain\\Anaconda3\\lib\\site-packages\\notebook\\notebookapp.py\"\n, line 445, in _ip_default\n    s = socket.socket()\n  File \"C:\\Users\\Iain\\Anaconda3\\lib\\socket.py\", line 134, in __init__\n    _socket.socket.__init__(self, family, type, proto, fileno)\nOSError: [WinError 10106] The requested service provider could not be loaded or\ninitialized\n```\n That looks like the root issue - the process can't even create Socket objects. That seems to be a severe permission or configuration problem that's going to prevent the server from running.\n Hit this also\n If you're seeing the same traceback, it looks like an error with your system that we have no way of avoiding. Searching for the error message online, I find some suggestions that you try running a command like:\n\n```\nnetsh winsock reset catalog\n```\n\n([from here](http://texhex.blogspot.com/2009/01/dhcp-error-service-provider-could-not.html))\n\nI haven't tried this, and I have no idea what it's doing, so I don't know whether it will work, or create further problems.\n","Markdown is sanitized unconditionally (i.e. always untrusted). Only output can be trusted. If you want to include such HTML, it can be done as an HTML output from an execution.\n What is an HTML output? IHaskell doesn't have anything like IFrame in ipython. Can I do it somehow from the shell? The HTML file is on my machine.\n","1. would be duplicate of #726 \n2. Yes, we are aware that's an annoying limitation of our \"dialog\" library. \n\n(i'm closing to track in #484) \n","Check out [takluyver/nbopen](https://github.com/takluyver/nbopen/) as a possible solution.\n Technically, yes it is feasible, There are though many abstractions, API, UI that would be complex, and the use case are rare enough that we haven't taken the time to do that. \n\nI suppose it should be doable only with an extension, not sure though. \n I have no insight in the complexity of the API and UI, so perhaps a naive question: would the UI need to be complex? \n\nWould it not be possible to add a magic command such as %connect_info (but then one that executes the actuall connection) on top of every cell (and having a default set at the kernel in which you started so that people only need to type it when necesary)? For me, I wouldn't even expect changes in the UI. I still can't speak about the API and abstractions.\n No, the magics are kernel specific and many non-python kernel do not have magics. \n\nThe current server have mapping from filename to kernel and keep track of which file is associated with which kernel. We would need a one-to-many mapping with a notion of currently active, with API to switch. Also when you would restart or shut-down a kernel, would it restart/shutdown only  the current one ? Or all kernels ?\n\nWhile I see why it would make some sens in a some case, I'm not sure the cost/benefit is worth such complexity yet.\n\nThere is also users asking for many kernel at once on the page, with variable kernel on a per cell basis. \n\nI think the [metakernel or calico kernel](https://github.com/ipython/ipython/wiki/IPython-kernels-for-other-languages) use to have the ability to actually proxy to other subkernels, so from the UI perspective there was 1 kernel, and with `%%%lang` you could change the current lang of the kernel. \nIt had advantages and drawback. \n MetaKernel is alive and well, and should not be referred to in the past tense... it doesn't like that :)\n\nMetaKernel is a completely different project from Calico, although some of the same people are involved. Calico is a kernel that dispatches to different languages. It is no longer in active development, but still works. MetaKernel can indeed start up subkernels using the %kernel and %kx magics. \n\nThere are many kernels based on MetaKernel, including Matlab, Octave, Java9, Processing, Assembly language, and more.\n\nFor more on subkernels, see:\n\nhttps://github.com/Calysto/metakernel/blob/master/metakernel/magics/README.md\n Sorry for metakernel, I used past in the send that I wasn't sure it was this kernel that had this ability and wether t still had it. I can buy metakernel a coffee next time as an apology. \n\nI'm at the airport so I keep my messages short. But thanks for reminding us of the various pieces and how they work!\n\nEnvoy\u00e9 de mon iPhone\n\n> Le 18 nov. 2015 \u00e0 11:19, Doug Blank notifications@github.com a \u00e9crit :\n> \n> MetaKernel is alive and well, and should not be referred to in the past tense... it doesn't like that :)\n> \n> MetaKernel is a completely different project from Calico, although some of the same people are involved. Calico is a kernel that dispatches to different languages. It is no longer in active development, but still works. MetaKernel can indeed start up subkernels using the %kernel and %kx magics.\n> \n> There are many kernels based on MetaKernel, including Matlab, Octave, Java9, Processing, Assembly language, and more.\n> \n> For more on subkernels, see:\n> \n> https://github.com/Calysto/metakernel/blob/master/metakernel/magics/README.md\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Okay, thanks for the comments and info all of you! :-)\n","bash I suppose ? Linux ? Os X ? which version of `traitlets` ?\n\nIt's working fine here with the above version you list. \n I'm using ZSH on OpenSUSE 13.2. I also just tried bash with no success either.\n\n``` bash\n$ pip freeze | grep traitlets\ntraitlets==4.0.0\n```\n I can confirm that the system arguments going into `jupyter notebook` are correctly quoted and grouped (I just printed `sys.argv` in the `jupyter` bash script), so I don't think its a OS issue. I also tested putting in two files at the same time, which gives the correct `sys.argv`.\n :-( I 'm a bit unsure, I just tried with zsh, and the same versions as you and it works, so I don't know how to debug:\n\n```\n% pip freeze | grep jupyter\njupyter==1.0.0\njupyter-client==4.1.1\njupyter-console==4.0.3\njupyter-core==4.0.6\n-e git+http://github.com/jupyter/nbconvert@fb038e741c7ea6842099e62e56aceabd50ad5ee0#egg=nbconvert-tpllib\n\n% pip freeze | grep notebook\nnotebook==4.0.6\n\n% pip freeze | grep traitlets\ntraitlets==4.0.0\n```\n Thanks for checking. I have the same problem on Python 2. I've checked manually down to [notebookapp.py#L806](https://github.com/jupyter/notebook/blob/4578c34b0f999735ee49e1492be3dd5941951551/notebook/notebookapp.py#L806), and everything looks fine if I print the Notebook Config:\n\n```\n{'NotebookApp': {'file_to_run': '/home/user/Awesome Notebook.ipynb'}}\n```\n\nHowever, I'm still having the issue. I'll keep digging manually to see if I can isolate the issue.\n Could this be in the URL generation or interaction with my browser (Firefox 42.0)? If I go to the correct URL, everything is fine.\n > Could this be in the URL generation or interaction with my browser (Firefox 42.0)? If I go to the correct URL, everything is fine.\n\nmight be. In `notebookapp.py` around line 1100 should be a:\n\n```\nb = lambda : browser.open(url_path_join(self.connection_url, uri),\n                                          new=2)\n```\n\nyou can try to add debug statement around that. We might need to encode the URI there. \n Ok, here is the issue ([notebookapp.py#L1101](https://github.com/jupyter/notebook/blob/4578c34b0f999735ee49e1492be3dd5941951551/notebook/notebookapp.py#L1101)).\n\n``` python\n>> print(url_path_join(self.connection_url, uri))\nhttp://localhost:8890/notebooks/Awesome Notebook.ipynb\n```\n\nNotice there is no `%20` for the space. This is not a valid URL. There should be a line like:\n\n``` python\nuri.replace(\" \", \"%20\")\n```\n\nThis solves the issue. Do you agree? I'll put a pull request if so.\n you don't want a replace you likely want to `urllib.quote(url)` as things like, `\\`,`:` and other have to be encoded too. \n\nBut otherwise, yes, PR welcome. \n @Carreau @cjermain Here's an example from the nbgrader project: https://github.com/jupyter/nbgrader/commit/0bd45410a3851f5ca0dad9b870b1fab02681a43e\n > jupyter/nbgrader@0bd4541\n\nthe escaping there is in js, here the escape as likely to be in Python. \n @Carreau Yep. Passed it along for more of an example of all the characters. Looks like @cjermain already opened a PR.\n Looks like we already have a `url_escape` method which uses `urllib.quote` ([utils.py#L62](https://github.com/jupyter/notebook/blob/master/notebook/utils.py#L62)), with tests ([test_utils.py#L24](https://github.com/jupyter/notebook/blob/master/notebook/tests/test_utils.py#L24)). It looks like its not used in `notebookapp.py`, which is weird. I'll change the PR to use `url_escape`.\n Thanks!\n Thanks to you for finding, reporting, debugging and patching ! You did most of the work !\n","When we merge this, we should open another issue to remind us to revert the debug statements one day when we figure out what the problem was.\n :+1:\n > When we merge this, we should open another issue to remind us to revert the debug statements one day when we figure out what the problem was.\n\nyou can open the issue now :-) \n @Carreau \u2014 done.\n Do we want to go ahead and merge this just to start knocking this off the milestone?\n Yup, thanks.\n","+1 on the documentation change. Thanks @brettcannon.\n\nA grumpy cat for Travis :smirk_cat: \n The test failures don't seem to have anything to do with my change from what I can tell.\n @brettcannon You are correct. Your change is a good one :D \n\nFYI, @minrk @Carreau \n > @brettcannon You are correct. Your change is a good one :D\n> \n> FYI, @minrk @Carreau\n\nYeah, travis might be grumpy, I asked him to rerun failing test I'll merge once they go green. \n Thanks!\n","Looks like Python 3 does not have `urllib.quote`, so that needs to be made compatible.\n Looks great, @cjermain! Thanks for submitting the PR!\n\nCan you add some tests under `notebook/tests/test_notebookapp.py` to confirm the behavior?\n\nEDIT: Just noticed that you mentioned tests in your original PR. Yes, tests would be nice!\n The fix is now using the `utils.url_escape` method which has tests in `tests_utils.py`.\n This looks good to merge.\n\ncc/ @minrk @Carreau \n","IIRC, this has been fixed in codemirror. Either you can manually update codemirror, or next release should have this fixed automatically. \n Fixed on codemirror master. \n","Thanks for opening up this issue, @sbtlaarzc!\n\nCan you provide more information to help me determine what is going on? For example, what browser and versions of the notebook are you using?\n I am using Google Chrome 46.0.2490.86 m, Python 3.5, jupyter (notebook) version 4.0.6 and ipython 4.0.0.\n @captainsafia this is the same as issue #8327 in ipython/ipython, which has been open since April.\nhttps://github.com/ipython/ipython/issues/8327\n\nThe claim at that time was that it was fixed in master. It is still occuring with IPython 4, jupyter 1.0.0.\n Thanks for linking to that additional issue, @rlabbe, very helpful. I was able to reproduce the issue on 4.1 using both the Markdown provided in this issue and the one provided in the other issue. I have identified where the problem might be and am working on a fix. Thanks for being patient.\n @jdfreder care to take a stab at whatever CSS mischief is relevant here?\n From what I can tell the issue is related to the overflow properties on the `rendered_html` CSS class added to Markdown cells in #216 in case that is helpful to you @jdfreder.\n @minrk, @captainsafia, @jdfreder Tested on 4.1.0b1 and works correctly on Firefox.\n\n@sbtlaarzc If you would like to try it with Python 3.5.1, IPython 4.0.1-dev, and Jupyter notebook beta 4.1.0b1, please let us know your results.\n\nI'm going to mark this closed. We can always reopen if others see issues in a browser other than Firefox.\n\n### Small width screen\n\n<img width=\"335\" alt=\"screen shot 2015-12-16 at 5 58 42 am\" src=\"https://cloud.githubusercontent.com/assets/2680980/11842746/78bfcd28-a3ba-11e5-8d2b-a9db2e13f111.png\">\n\n### Wider screen\n\n<img width=\"1205\" alt=\"screen shot 2015-12-16 at 5 58 30 am\" src=\"https://cloud.githubusercontent.com/assets/2680980/11842747/78db12ea-a3ba-11e5-9622-91acbcfd640d.png\">\n\n### Version info\n\n<img width=\"685\" alt=\"screen shot 2015-12-16 at 5 58 13 am\" src=\"https://cloud.githubusercontent.com/assets/2680980/11842748/78f5c536-a3ba-11e5-9c77-ef6268bc28f2.png\">\n > @jdfreder care to take a stab at whatever CSS mischief is relevant here?\n\nug, css....\n\n> I'm going to mark this closed. We can always reopen if others see issues in a browser other than Firefox.\n\nI've verified that the bug exists for Chrome users.  Looking into it\n Fixed in #877\n @jdfreder :surfer:\n Hi, I encountered a similar issue with Chrome.\nIn this case I have an annoying slider when I make pictures. \nThe strange thing is that it is not for all figures. Sometimes yes somtimes not.\nWouldn't be an Idea to have  possibility to switch OFF the scrolling? Is there arleady such possibility?\nThanks for your help\n![mover1](https://cloud.githubusercontent.com/assets/9540432/13178895/7b634f6a-d721-11e5-877f-625826b780c2.jpg)\n @Diti24 that looks like the normal scrolling on long output. You can toggle it individually by clicking the area on the left side of the output. Or you can toggle it for all outputs in the cell menu.\n @takluyver Thanks for the TIP\n","It is intentional that only the nbextensions directory is served. For development, you can use symlinks, if that helps.\n","which version of `notebook` (not IPython), if `\\binom{1}{3}` this has been fixed in notebook 4.0.6\n Closing as likely fixed. \n","PIng @ellisonbg @fperez \n - Copy/Cut/Delete\n @parleur Still waiting for your PR. I know it was working. \n see #802 #803 #804 #792 #793 #794 #795 #796 #797 \n","Marked as spring friendly, but it might not be **that** easy. \n","Hopefully this will fix travis faillures. \n I think this will work after jupyter/nbconvert#19 is merged.\n poking travis now that nbconvert is updated.\n Travis happy. \n Thanks.\n","Tagging this 4.2 may be wishful thinking, but let's see how it goes.\n #484  has still not been solved, or seen again. Bumping to 4.4 for now. \n","- Uses bold text for `Aa` and `.*` to improve legibility.\n\ncloses #558 \n Thanks for the cleanup. \n For more compactness :\n\n``` css\npre.replace {\n    padding:3px\n}\n```\n\nThoughts ?\n On the padding. Using 3px seemed a bit tight, but here is a padding of `5px 10px` which matches that used in the small bootstrap input fields on the dialog:\n\n<img width=\"698\" alt=\"screen shot 2015-11-24 at 5 55 51 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/11386273/b8a2a90c-92d4-11e5-9203-6a1acb55d8d2.png\">\n\nI think this looks good and definitely fits more than before.\n OK all changes are pushed and should be ready to go...\n That's looking pretty good to me. I'll let @Carreau merge.\n +1 thanks ! Happy to see you submitting PRs !\n I'm thinking in using lighter red and green for match and delete. Thoughts?\n Sure I will try that now...\n\nOn Wed, Nov 25, 2015 at 4:31 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I'm thinking in using lighter red and green for match and delete. Thoughts?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/741#issuecomment-159593735.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Opps, did I merge this? Didn't mean to do that. But everything other than the colors is final so I think we are OK. I will create a seaprate PR for the color changes. After playing, I do like lighter colors.\n > Opps, did I merge this?\n\nNo I did, the color was a suggestion for separate PR. \n Ahh OK, other PR is submitted :)\n\nOn Wed, Nov 25, 2015 at 9:25 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Opps, did I merge this?\n> \n> No I did, the color was a suggestion for separate PR.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/741#issuecomment-159680295.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","But windows user may prefer the \"do action\" button be the leftmost one.\n @ellisonbg \u2014 I can take a look at this today.\n\n@Jeffiy \u2014 thanks for bringing this excellent point up! The issue is less related to the operating system and more related to some research in UX. People generally read English from left to right, so when you have the action oriented button on the right, the user has more time to think about the decision. If the action button is one the left, you are more likely to hastily click it without bothering to find out what the \"non action\" button will do. There are a couple of other reasons for this to, that you can read about at [this article](http://uxmovement.com/buttons/why-ok-buttons-in-dialog-boxes-work-best-on-the-right/) if you are curious.\n Also, the main thing I am concerned about here is the consistency of things.\n\nThanks for looking at this Safia!\n\nOn Sat, Nov 21, 2015 at 12:09 PM, Safia Abdalla notifications@github.com\nwrote:\n\n> @ellisonbg https://github.com/ellisonbg \u2014 I can take a look at this\n> today.\n> \n> @Jeffiy https://github.com/Jeffiy \u2014 thanks for bringing this excellent\n> point up! The issue is less related to the operating system and more\n> related to some research in UX. People generally read English from left to\n> right, so when you have the action oriented button on the right, the user\n> has more time to think about the decision. If the action button is one the\n> left, you are more likely to hastily click it without bothering to find out\n> what the \"non action\" button will do. There are a couple of other reasons\n> for this to, that you can read about at this article\n> http://uxmovement.com/buttons/why-ok-buttons-in-dialog-boxes-work-best-on-the-right/\n> if you are curious.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/742#issuecomment-158678240.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @captainsafia awesome, thanks.\n 1) That's no bug. \n2) That's changing UI in between minor releases, and will change the default selected button, so will break user habits. So no 4.1 either. \n","any solution to this. experiencing same thing. \n How did you install Spark? You may need to set SPARK_HOME for it to find it properly.\n @minrk  I have set SPARK_HOME already. I downloaded spark-1.4.1-bin-hadoop2.6.tgz from official website then tar it.\n Do you have any other spark env variables defined, such as PYSPARK_SUBMIT_ARGS?\n @minrk  Yes, I followed the step here, https://gist.github.com/ololobus/4c221a0891775eaa86b0 \n Try _removing_ the PYSPARK_SUBMIT_ARGS env.\n I was having the same problem with spark 1.6.0 but removing PYSPARK_SUBMIT_ARGS env from my bash solved the problem. In my bashrc i have set only SPARK_HOME and PYTHONPATH and launching the jupyter notebook I am using the default profile not the pyspark profile.\n @Hanuman26 Thanks for passing along details of your success for others. cc/ @wlsherica @minrk \n\nI'm going to mark this closed but feel free to reopen if needed.\n I was experiencing the same error .Removing the PYSPARK_SUBMIT_ARGS env did the trick. \nThanks\n You actually have to define \"pyspark-shell\" in PYSPARK_SUBMIT_ARGS if you define this.\n\nFor instance:\n\n```\nimport os\nos.environ['PYSPARK_SUBMIT_ARGS'] = \"--master mymaster --total-executor 2 --conf \"spark.driver.extraJavaOptions=-Dhttp.proxyHost=proxy.mycorp.com-Dhttp.proxyPort=1234 -Dhttp.nonProxyHosts=localhost|.mycorp.com|127.0.0.1 -Dhttps.proxyHost=proxy.mycorp.com -Dhttps.proxyPort=1234 -Dhttps.nonProxyHosts=localhost|.mycorp.com|127.0.0.1 pyspark-shell\"\n```\n\nworks\n @Stibbons , where do I put this in the .bash_profile\r\nthanks. in your jupiter notebook juste before importing findspark","Hmmm, aren't objects in JavaScript unordered collections? I was expecting us to have to turn the buttons into an array to get proper ordering on this.\n According to the official ECMAScript guidelines, collections are unordered but I believe that most browsers return the items in the object in the order they were inserted so reordering the keys does work.\n\nNot sure if we are OK with it working in most browsers or if I should try a solution that is in line with the official guidelines\n As stated in issue, not a 4.1 it is a change of UI, and will break people muscle memory. \n Um, I consider this a _bug_ and should be fixed for 4.1.\n\nOn Sun, Nov 22, 2015 at 10:39 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> As stated in issue, not a 4.1 it is a change of UI, and will break people\n> muscle memory.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/744#issuecomment-158862312.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n It is dangerous to have buttons in different orders in different parts of the UI.\n\nPart of what makes this worse in 4.1/master is that we have cleaned up the Kernel Restart dialog, so there is now only a binary choice where before there was 3 options and the user had to pay really close attention and read exactly what those 3 buttons did:\n\n4.0:\n\n![screen shot 2015-11-23 at 10 05 09 am](https://cloud.githubusercontent.com/assets/27600/11345300/e580dd82-91ca-11e5-928f-57a4ef61147e.png)\n\n4.1/master:\n\n![screen shot 2015-11-23 at 10 09 46 am](https://cloud.githubusercontent.com/assets/27600/11345315/f862c834-91ca-11e5-806f-b0048b085d12.png)\n\nMost importantly, all other dialogs that I can find have the buttons in the opposite order from the Restart Kernel dialog in both 4.0 and master:\n\n![screen shot 2015-11-23 at 10 05 21 am](https://cloud.githubusercontent.com/assets/27600/11345330/11b87e3c-91cb-11e5-91ff-08e8bbd45e2a.png)\n\n![screen shot 2015-11-23 at 10 06 08 am](https://cloud.githubusercontent.com/assets/27600/11345332/1c9d0f66-91cb-11e5-959e-d90373a99b78.png)\n\nThus, the problem is really with the restart kernel dialog and for that, a change in 4.1 has made the situation worse. I would be find with simply swapping the order in the Kernel Restart dialog for 4.1 instead of swapping everything else. Then we could consider swapping the order of all dialog buttons to the Mac ordering for 5.0. But I prefer to just do it for 4.1.\n I'm fine viewing the current inconsistency as a bug to be fixed.\n The restart are in the order they are **not to change use muscle memory** as the focused button is the last. I'm fine changing for 5.0 if you like, but the kernel restart has been with restart focused and on the right since 3.x. The number of people that have `0,0,Enter` as a habit is likely huge (I am one of the heavy user of this one).\n\nI would see changing the order as a break for user, especially since we already made the decision to put in that order in the pr for 4.0. not to break muscle memory.\n\nAnd we have already enough people complaining that restarting and clearing all cell is too long and has no shortcut. I do not want to deal with user complaining that it is even harder than before. \n\nSo this is not 4.1\n I should have clarified. I am not suggesting that we change which action is\nfocused. The `0,0,Enter` shortcut should still restart the kernel. Changing\nthat would be problematic in a point release. I am only talking about\nchanging the order of those buttons.\n\nI don't think the muscle memory argument applies for the visual ordering of\nthose elements - which is already different from 4.0.\n\nWith this clarification, can you get behind the visual reordering of the\nbuttons for 4.1?\n\nCheers, Brian\n\nOn Tue, Nov 24, 2015 at 2:38 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> The restart are in the order they are _not to change use muscle memory_\n> as the focused button is the last. I'm fine changing for 5.0 if you like,\n> but the kernel restart has been with restart focused and on the right since\n> 3.x. The number of people that have 0,0,Enter as a habit is likely huge\n> (I am one of the heavy user of this on).\n> \n> I would see changing the order as a break for user, especially since we\n> already made the decision to put in that order in the pr for 4.0. not to\n> break muscle memory.\n> \n> And we have already enough people complaining that restarting and clearing\n> all cell is too long and has no shortcut. I do not want to deal with user\n> complaining that it is even harder than before.\n> \n> So this is not 4.1\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/744#issuecomment-159225279.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > With this clarification, can you get behind the visual reordering of the\n> buttons for 4.1?\n\nYes, but the focused button is always the last of the list\nSo you cannot reorder and keep the focus without probably major changes. \n We can fix that.\n > We can fix that.\n\nIt's tricky if you wait for the dialog shown event to focus the button you get a small window of time where the wrong button is focussed IIRC. \n I'm pretty sure it's already our code that's focusing the last button, so I think we can work it out without a race.\n #752 makes it possible to specify which button is highlighted when the dialog is drawn, rather than always focusing the last button (still default).\n Great, thanks @minrk - that is exactly what I was thinking about. @Carreau\nare you OK with us swapping the order of the Restart Kernel dialog buttons\nbut using Min's implementation to make sure that `0,0,Enter` still works\n(for 4.1)?\n\nOn Tue, Nov 24, 2015 at 12:29 PM, Min RK notifications@github.com wrote:\n\n> #752 https://github.com/jupyter/notebook/pull/752 makes it possible to\n> specify which button is highlighted when the dialog is drawn, rather than\n> always focusing the last button (still default).\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/744#issuecomment-159396311.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Also for some clarification: I this this PR doesn't change the ordering of the restart buttons, so Restart is still the rightmost button and default-last-focus continues to focus the 'Restart' action, as it did in 4.0 and does on master.\n > @Carreau\n> are you OK with us swapping the order of the Restart Kernel dialog buttons\n> but using Min's implementation to make sure that `0,0,Enter` still works\n> (for 4.1)?\n\nYes. \n > I this this PR doesn't change the ordering of the restart buttons, so Restart is still the rightmost button and default-last-focus continues to focus the 'Restart' action\n\nI can update it so the button ordering to \"Restart\" then \"Continue Running\" and add the `default_button` configuration @minrk introduced in #752, assuming this is the final decision?\n Thanks, @captainsafia, that clears it up, I think.\n\nSo the question is:\n1. reorder restart buttons, vs\n2. reorder everything else.\n\nand this PR currently reorders everything else, but we are considering switching it to reordering just restart, so the default-action change is smaller.\n\nI'm fine either way on that one - I like `Cancel, Action` better than `Action, Cancel` in the long run, but if the restart dialog is the main inconsistency, I see what you mean about changing fewer dialogs. Sorry for being slow.\n Nice summary Min. I am fine with either as well for 4.1\n\nI prefer to `Cancel, Action` in general, but am fine with just changing the\nkernel restart for 4.1 and then changing everything else (including Kernel\nRestart) in 5.0. But maybe that is too many back and forth changes...\n\n@fperez any thoughts on this?\n\nOn Tue, Nov 24, 2015 at 1:53 PM, Min RK notifications@github.com wrote:\n\n> Thanks, @captainsafia https://github.com/captainsafia, that clears it\n> up, I think.\n> \n> So the question is:\n> 1. reorder restart buttons, vs\n> 2. reorder everything else.\n> \n> and this PR currently reorders everything else, but we are considering\n> switching it to reordering just restart, so the default-action change is\n> smaller.\n> \n> I'm fine either way on that one - I like Cancel, Action better than Action,\n> Cancel in the long run, but if the restart dialog is the main\n> inconsistency, I see what you mean about changing fewer dialogs. Sorry for\n> being slow.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/744#issuecomment-159416445.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Given we're trying to land 4.1, I'd probably favor the option of changing fewer dialogs on this pass, and doing the full reorg for 5.0, even if it leaves some inconsistency. Fortunately, this dialog looks very different from those others, that say `OK/Cancel` instead of this one with fully named actions. \n\nAnd for 5.0, we can do a proper audit for consistency so the pattern is `Cancel`, `Named Action`.\n\nGiven the difference in the actual dialogs, I'm not too bothered by the inconsistency (and it's been there before, so I wouldn't go wholesale messing with the UI to fix it across all dialogs in this minor release, or at least not this late in the cycle when we're really trying to just dot i's and cross t's).\n\nHow does that sound?\n Mmm, I am not quite sure I understand what you are proposing:\n\nA) Leave the order of the Restart Kernel buttons the same as in master,\nwhich is opposite from all other dialogs in master. This is the original\nbug I brought up.\nB) Reorder the Restart Kernel buttons in master to match the rest of the\nbutton orders in master for 4.1.\n\nThe _naming_ of the buttons isn't really on the table here (although I\nthink some of that crept into the original PR).\n\nOn Tue, Nov 24, 2015 at 7:01 PM, Fernando Perez notifications@github.com\nwrote:\n\n> Given we're trying to land 4.1, I'd probably favor the option of changing\n> fewer dialogs on this pass, and doing the full reorg for 5.0, even if it\n> leaves some inconsistency. Fortunately, this dialog looks very different\n> from those others, that say OK/Cancel instead of this one with fully\n> named actions.\n> \n> And for 5.0, we can do a proper audit for consistency so the pattern is\n> Cancel, Named Action.\n> \n> Given the difference in the actual dialogs, I'm not too bothered by the\n> inconsistency (and it's been there before, so I wouldn't go wholesale\n> messing with the UI to fix it across all dialogs in this minor release, or\n> at least not this late in the cycle when we're really trying to just dot\n> i's and cross t's).\n> \n> How does that sound?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/744#issuecomment-159473902.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Ah, but I thought that you guys wanted to audit the UI for 5.0 so that all the buttons would move towards a `Cancel/Action` order, whereas now they mostly have an `OK/Cancel` order. Am I misunderstanding that?\n > The _naming_ of the buttons isn't really on the table here (although I think some of that crept into the original PR).\n\nYeah that's my fault. I spotted the naming and figured I might fix it. I can revert that though.\n\n> Ah, but I thought that you guys wanted to audit the UI for 5.0 so that all the buttons would move towards a Cancel/Action order, whereas now they mostly have an OK/Cancel order.\n\nThis is the way that I understand it as well.\n\nIf I can synthesize everybody's thoughts, I _think_ the takeaway from this is to:\n1. Remove the rearrangements that I made in this PR.\n2. Reorder the \"Restart\" dialog buttons so they match the `Action | Cancel` arrangement that currently dominates the UI, this is what will be release in 4.1.\n3. In the 5.0 release, complete an overall of the dialog buttons which includes creating named actions and placing them in `Cancel | Named Action` order.\n I would like to do that audit for 4.1 and that is what Safia's PR\nimplements (would have to be updated on top of Min's changes to keep the\nkeyboard behaviors the same). Matthias felt like reordering buttons is a\nbreakage, but I feel that fixed usability problems of this sort are bug\nfixes. Matthias did have an excellent point that re-ordering the buttons\nshould not change which action will happen when someone presses `Enter`.\nThat would be a breaking change to the keyboard shortcuts - but we can\npreserve that.\n\nI will admit that this is a totally grey line.\n\nSo maybe we have 3 options:\n\n1) Fix the ordering of everything for 4.1, preserving the keyboard\nbehaviors.\n2) Change nothing for 4.1, but everything for 5.0.\n3) Temporarily re-order the \"Restart Kernel\" to match everything else for\n4.1, but then change the order of everything for 5.0.\n\nMy preferences are 1, 3, 2.\n\nCheers,\n\nBrian\n\nOn Tue, Nov 24, 2015 at 7:31 PM, Fernando Perez notifications@github.com\nwrote:\n\n> Ah, but I thought that you guys wanted to audit the UI for 5.0 so that all\n> the buttons would move towards a Cancel/Action order, whereas now they\n> mostly have an OK/Cancel order. Am I misunderstanding that?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/744#issuecomment-159478172.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n On Wed, Nov 25, 2015 at 9:05 AM, Brian E. Granger notifications@github.com\nwrote:\n\n> 1) Fix the ordering of everything for 4.1, preserving the keyboard\n> behaviors.\n> 2) Change nothing for 4.1, but everything for 5.0.\n> 3) Temporarily re-order the \"Restart Kernel\" to match everything else for\n> 4.1, but then change the order of everything for 5.0.\n\nAh, got it. My only concern with 1 is that I think if that reordering is\ndone, they shouldn't be called `Cancel, OK`, they should become named\nactions. So the audit will have to be more thorough and careful, and there\nwill be decisions to make on the name of _every_ button. That means this\nbecomes a potentially very long and detailed PR in terms of how many things\nto look at (not that much code, obviously).\n\nThat worries me a bit, given we're trying to wrap up and ship...\n\n## \n\nFernando Perez (@fperez_org; http://fperez.org)\nfperez.net-at-gmail: mailing lists only (I ignore this when swamped!)\nfernando.perez-at-berkeley: contact me here for any direct mail\n I wouldn't want to delay the release any further, but from looking at the\nchanges Safia made in the PR (which already includes some of of those\nrenames) I don't think it will be a problem.\n\nWhat about the following?\n- We start to work with Min and Safia to see if we can get the full button\n  order swap done for 4.1, with the renaming and keeping the keyboard\n  behavior the same.\n- If the work isn't done by the first beta of 4.1, we release without it\n  and target this work for 5.0.\n\nOn Wed, Nov 25, 2015 at 9:33 AM, Fernando Perez notifications@github.com\nwrote:\n\n> On Wed, Nov 25, 2015 at 9:05 AM, Brian E. Granger <\n> notifications@github.com>\n> wrote:\n> \n> > 1) Fix the ordering of everything for 4.1, preserving the keyboard\n> > behaviors.\n> > 2) Change nothing for 4.1, but everything for 5.0.\n> > 3) Temporarily re-order the \"Restart Kernel\" to match everything else for\n> > 4.1, but then change the order of everything for 5.0.\n> \n> Ah, got it. My only concern with 1 is that I think if that reordering is\n> done, they shouldn't be called `Cancel, OK`, they should become named\n> actions. So the audit will have to be more thorough and careful, and there\n> will be decisions to make on the name of _every_ button. That means this\n> becomes a potentially very long and detailed PR in terms of how many things\n> to look at (not that much code, obviously).\n> \n> That worries me a bit, given we're trying to wrap up and ship...\n> \n> ## \n> \n> Fernando Perez (@fperez_org; http://fperez.org)\n> fperez.net-at-gmail: mailing lists only (I ignore this when swamped!)\n> fernando.perez-at-berkeley: contact me here for any direct mail\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/744#issuecomment-159682515.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n If the only modifications we want to make to the buttons are the ordering and the naming, then I am pretty sure I can flesh that out early AM tomorrow. As Brian mentioned I've gotten a good chunk (I think) of the work done already.\n\nIt definitely wouldn't hurt to go for it and if it isn't done by beta, we can defer to 5.0.\n Sounds like a plan, full steam ahead then! We do have a beta/rc cycle to fine tune still, and as long as this doesn't drag us into long decision cycles, I have otherwise no objections.\n @captainsafia I merged #752 so if you rebase, you can use the `default_button` config option for each model to maintain which button is focused for keyboard events when the model is opened. If you can take a pass at finishing things up, I can help test.\n OK. Checking in to see that I have the right approach. Here is what I am doing thus far.\n- Swapping the button order on the dialog menus so that they are in `Cancel | Action` order\n- Renaming the action oriented buttons in situations where I could think of a good name\n- If button order was swapped, I used `default_button` to ensure that the focus is on the button that was previously on the right\n\nDoes that sound in line with what we have been discussing?\n +1, thanks!\n\nOn Wed, Nov 25, 2015, 20:37 Safia Abdalla notifications@github.com wrote:\n\n> OK. Checking in to see that I have the right approach. Here is what I am\n> doing thus far.\n> - Swapping the button order on the dialog menus so that they are in Cancel\n>   | Action order\n> - Renaming the action oriented buttons in situations where I could\n>   think of a good name\n> - If button order was swapped, I used default_button to ensure that\n>   the focus is on the button that was previously on the right\n> \n> Does that sound in line with what we have been discussing?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/744#issuecomment-159801889.\n Yep, that sounds right!\n\nOn Wed, Nov 25, 2015 at 9:39 PM, Fernando Perez notifications@github.com\nwrote:\n\n> +1, thanks!\n> \n> On Wed, Nov 25, 2015, 20:37 Safia Abdalla notifications@github.com\n> wrote:\n> \n> > OK. Checking in to see that I have the right approach. Here is what I am\n> > doing thus far.\n> > - Swapping the button order on the dialog menus so that they are in\n> >   Cancel\n> >   | Action order\n> > - Renaming the action oriented buttons in situations where I could\n> >   think of a good name\n> > - If button order was swapped, I used default_button to ensure that\n> >   the focus is on the button that was previously on the right\n> > \n> > Does that sound in line with what we have been discussing?\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/pull/744#issuecomment-159801889.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/744#issuecomment-159810305.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n OK, if I am not crazy, @ellisonbg I think this is good to test.\n Looking good!\n @ellisonbg do you want to get that in master early to give it a try ?\n I'm going to be annoying, if I don't get  negative feedback I'll merge that soon.\n :shipit: \n","It looks like a permissions error, have you tried `sudo pip3 install \njupyter`? Looking back at my notes from when I installed Jupyter a few \nmonths ago, I definitely used `sudo` (and I also installed from pip \nusing Python 3).\n\nOn 11/22/2015 04:17 AM, AgazW wrote:\n\n> I am trying to install Jupyter on my 32 bit machine. I use\n> \n> pip3 install jupyter\n> \n> Getting some downloading, warning and finally the following error\n> \n> Cleaning up...\n> Exception:\n> Traceback (most recent call last):\n> File \"/usr/lib/python3/dist-packages/pip/basecommand.py\", line 122, in \n> main\n> status = self.run(options, args)\n> File \"/usr/lib/python3/dist-packages/pip/commands/install.py\", line \n> 283, in run\n> requirement_set.install(install_options, global_options, \n> root=options.root_path)\n> File \"/usr/lib/python3/dist-packages/pip/req.py\", line 1436, in install\n> requirement.install(install_options, global_options, /args, _/kwargs)\n> File \"/usr/lib/python3/dist-packages/pip/req.py\", line 672, in install\n> self.move_wheel_files(self.source_dir, root=root)\n> File \"/usr/lib/python3/dist-packages/pip/req.py\", line 902, in \n> move_wheel_files\n> pycompile=self.pycompile,\n> File \"/usr/lib/python3/dist-packages/pip/wheel.py\", line 206, in \n> move_wheel_files\n> clobber(source, lib_dir, True)\n> File \"/usr/lib/python3/dist-packages/pip/wheel.py\", line 193, in clobber\n> os.makedirs(destsubdir)\n> File \"/usr/lib/python3.4/os.py\", line 237, in makedirs\n> mkdir(name, mode)\n> PermissionError: [Errno 13] Permission denied: \n> '/usr/local/lib/python3.4/dist-packages/_pycache*'\n> \n> Storing debug log for failure in /home/hussain/.pip/pip.log\n> \n> \u2014\n> Reply to this email directly or view it on GitHub \n> https://github.com/jupyter/notebook/issues/745.\n Thanks i got it. Why without `sudo` does not work.\n","That can still be kernel only, the kernel protocol is open, so you likely can have a proxy-kernel that look at the first line of cell and do whatever, like dispatching to subkernel. @dsblank can likely show you how it does that in his many well alived kernels ! (right ?) \n\nThe kernel has no notion that it is ran from the notebook, and many project, now rely more and more to the fact that code might not be ran from a notebook:  atom hydrogen, thebe, Microsoft PTVS, ...etc so we will likely not add a coupling between kernel and notebook/ cell document. \n @Carreau Actually I don't want to do any coupling (no kernel -> notebook link), the idea was, that the magics should live in the javascript part of the notebook.\n On Tue, Nov 24, 2015 at 6:19 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> That can still be kernel only, the kernel protocol is open, so you likely\n> can have a proxy-kernel that look at the first line of cell and do\n> whatever, like dispatching to subkernel. @dsblank\n> https://github.com/dsblank can likely show you how it does that in his\n> many well alived kernels ! (right ?)\n> \n> :)\n> \n> The kernel has no notion that it is ran from the notebook, and many\n> project, now rely more and more to the fact that code might not be ran from\n> a notebook: atom hydrogen, thebe, Microsoft PTVS, ...etc so we will likely\n> not add a coupling between kernel and notebook/ cell document.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/746#issuecomment-159234710.\n Similarly just noticed that access to shell commands ie !ls (along with no magic) don't work in the Scala Notebook provided by the Jupyter/allspark notebook notebook (docker stacks) so hopefully this approach would help that situation as well?\n Indeed, MetaKernel can handle magics and shell commands (% and !, respectively). If the allspark is using the wrapper-kernel API, then MetaKernel is a drop in replacement and will give you magics, shell, and more. If it is written in some other language than Python, then you either need to fire up a connection to Python (to re-use IPython's magics, or MetKernel's magics) or rewrite them in the host language. \n","We are working on that through skype. \n\nIn Skype comment  for posterity: Need rebase, Configure Atom not to strip whitespace, set up github ssh key :-) \n Watch out, you vim or atom have \"remove trailing whitespace on save\" turned on, \nAlso feel free to drop a message when you push a change like test, we are not warned on changes on PRs. \n You might also want to setup your git or github so that commits appear yours. \n I believe the key for Github to recognise you is to set your email address in git to an address you have registered with Github. You can do that like this:\n\n```\ngit config --global user.email \"x@y.fr\"\n```\n\nUnfortunately this branch has merge conflicts, so we'll ask you to rebase it. @Carreau may be able to talk you through that if you're not familiar with git.\n @parleur Need rebase. \n You are incredibly reactive ... I am doing it\n @ellisonbg you've seen issues wit atomic writing, can you test this ?\n I'm going to merge this for it to be in 4.1, it is anyway disabled by default, but at least if we have it released we can have user testing it (and fix potential issues in a patch version).\n\nThanks All !\n","We can't feasibly watch filesystem events to ensure that nobody is breaking running state like this. When do you propose we detect that the notebook has been deleted, and what action should we take? Destroy the kernel? If the user with the open notebook presses, or waits for autosave at any point, the state returns to being consistent.\n OK, I was expecting a `wontfix` anyway. I think that it is fine.\n I think we could add a sanity-check on session-list or other action, or even a periodic sweep. I'm just not quite sure what the right action is, since it will necessarily be automatic and have no prompting.\n","You cannot embed a full html document with doctype and headers into another page unless you use an iframe, you will likely get undefined behavior from browser. \n\nSo either use IFrame and set src, or refactor your template to only include the relevant part of snakeviz. \n Thanks for catching this. I committed a little fix for this. The original (javascript) error however remains.\n Any chance someone could confirm this to be a notebook bug ?\n @stefanseefeld I don't think this is a notebook bug.  It looks like you're loading a second instance of jquery on top of the one already used by the notebook before loading the dataTable plugin.  This is likely leading to confusion with respect to which jquery is which, and which one is getting the dataTable plugin registered on it.  This is probably the problem in #499 as well.\n\nSome clearer developer documentation on how to define and require JS dependencies through AMD / RequireJS might be helpful here, as this is a (relatively) new thing many people (myself included) won't be highly familiar with.\n @embray , thanks for the tip ! Unfortunately commenting out the `<script>` element loading the jquery in the template didn't seem to make a difference.\n @minrk I talked with you about this shortly in the chat room... thoughts?\n Right, but that probably wouldn't make a difference.  If I understand correctly the notebook is using RequireJS (e.g. https://github.com/jupyter/notebook/blob/master/notebook/templates/page.html#L21) to load all JS modules.  This loads all JS asynchronously, but performs dependency resolution to ensure that scripts are loaded in the correct order based on their dependencies.  So for jQuery plugins for example it's going to be important that they're loaded _after_ jQuery (though I would think you would get an error from the plugin if `jQuery` isn't found in the globals?)\n\nIn any case, because of this scripts embedded directly in the page with `<script>` tags will run synchronously, more or less as soon as the browser parses the HTML.\n Ah, so if I understand correctly the proper way to resolve this would be to 'AMDify' all the javascript modules used by snakeviz, and then use requirejs to load. Correct ?\n Yes, that's likely the right fix for how to load js in the notebook. In general, require is the way to go in the notebook.\n OK, thanks. I was able to work around the issue by embedding my html into an iframe. Everything appears to be working fine with that.\n\nThanks all for your help !\n Hi guys,\n\n@stefanseefeld has been able to work around the issue, but I haven't. I'm also trying to use the dataTable plugin for jQuery, but I keep having a `TypeError: $(...).DataTable is not a function` error. I have included the dataTable library now with requirejs:\n\n```\n%%javascript\nrequire.config({\n  paths: {\n      datatables: '//cdn.datatables.net/1.10.11/js/jquery.dataTables.min'\n  }\n});\n```\n\nbut that doesn't seem to help. Can anyone help me how to add jQuery plugins to the notebook properly?\n @bartaelterman It's not enough to just provide a path for a JS module.  You need to activate it, in this case by providing a \"shim\" configuration.  See http://requirejs.org/docs/api.html#config-shim for documentation, and https://github.com/requirejs/example-jquery-shim for a complete example.\n Thanks. Adding `shims: datatables: [\"jquery\"]` to the `require.config` object doesn't help. [This SO post](http://stackoverflow.com/questions/20093957/configuring-jquery-datatable-with-require-js-and-using-with-backbone-js) says that dataTables is already an AMD module and that there is no need to add a shim for it. However, that doesn't help either as that brings me back to the previous situation.\nRemains only one thing I guess: that `baseUrl` in the require config. The notebook source code you were referring to earlier sets this baseUrl using template tags, so I'm not sure to what it is set, and whether I should set the same url when trying to add dataTables. Any thoughts?\n","@captainsafia that PR doesn't seem to remove the API previously used here, and removing that API would force a major-revision release on jupyter_client. I also don't see why this new API would be used, since it causes strictly more work to be done than the original `find_kernel_specs`.\n @minrk \u2014 Did you mean to put this in [jupyter/jupyter_client#93](https://github.com/jupyter/jupyter_client/pull/93)? I'm a little bit confused as to what you mean.\n No, I meant it to be here. This PR changes the dependency on jupyter_client to an unreleased version, and as far as I can tell from the jupyter_client PR, no benefit, since iterating through `find_all_specs` and `find_kernel_specs` has the same result and `find_all_specs` does strictly more work than `find_kernel_specs`. Perhaps there is something missing in this PR to actually make use of the difference between the two.\n This can make sense if we _also_ change the `kernel_model` call to allow passing the model from `get_all_specs`. But as it is, it doesn't make any use of the computed specs, it just discards them.\n Tagging as `closed-PR`, and closing as this is seem to have stalled a bit. \nThis is just to keep the PR queue a bit shorter and focusing on what is actually worked on.\nFeel free to reopen, (or ask for reopening if you don't have enough right to do so). \nIf you were not the original author, and want to revive this, please feel free to do so. \n\nAlso, we are doing our best to enable people to learn how to contribute to the project, and get commits in. If you are missing time or have any other issues that prevent you to work on that, please feel free to tell us, we can try to build on top of what you did. \n\nThanks a lot and looking forward to see this moving forward again.\n","4.0.0 doesn't _really_ exist, since I started pushing to PyPI but realized I did something wrong, and PyPI doesn't let you fix releases. 4.0.1 is the first release that actually exists, but I tagged the broken 4.0 commit, anyway.\n","Good idea, :+1: \n We are going to try and see if we can finnish #744 for 4.1. To do that @captainsafia will need this to finish #744 \n\nBecause this PR doesn't change the existing API or behavior, so I am going to merge.\n","That is the most official way we have right now. But in general, we would\nlike to move away from this. You can end up creating a mess with circular\nrefs between the DOM and JS objects this way and we would love to avoid it.\nAs we build the phosphor stuff, we are trying to figure out the\nabstractions that can replace this API though.\n\nOn Tue, Nov 24, 2015 at 2:08 PM, Gino Bustelo notifications@github.com\nwrote:\n\n> For jupyter-incubator/declarativewidgets#125\n> https://github.com/jupyter-incubator/declarativewidgets/issues/125 we\n> needed a way to get a hold of the enclosing cell of one of our elements to\n> then have the correct callbacks to handle messages like display_data.\n> \n> We looked around and could not find a better way than to do\n> $(this).parents(\".cell\").data().cell (obviously with the right checks).\n> \n> It seems that we should have a utility method that would do this for us\n> somewhere in IPython.notebook. Also, it should be something that would\n> allow Thebe-like environments to also work (something as simple as a\n> well-known method that could be redefined by the environment).\n> \n> /cc @Carreau https://github.com/Carreau\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/753.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I looked at the javascript, I don't see any simpler way to do it. \nWe **can** discuss of a way to get a **probable** handle on something like the creator, I have no opposition to that. Right now it would require passing down the cell to OutputAreas and make them aware of their logical parent, which I'm not sure will lead to something that clean. \n In my mind it isn't a question of doing the same thing a different way, but\nof refactoring the code to decouple these types of dependencies out of it.\nIn this case, the only part of the code base that show know anything about\nthe DOM elements of cells are the cell views. That part of the DOM tree\nshould be a private implementation detail of that view.\n\nThis is why starting with interfaces in the new code base is so important.\nThey specify a contract with other parts of the code base about what you\ncan and can't do with it.\n\nOur existing code base is a big tangled mess of things like this - it is\ngoing to be very difficult to decouple things in the existing notebook.\n\nBut as we design the new JS frontend, we are looking long and hard at this\ntype of coupling and trying to remove it in all cases. So far, I don't\nthink we have had to do this type of thing so that is a good sign.\n\nOn Wed, Nov 25, 2015 at 10:33 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I looked at the javascript, I don't see any simpler way to do it.\n> We _can_ discuss of a way to get a _probable_ handle on something like\n> the creator, I have no opposition to that. Right now it would require\n> passing down the cell to OutputAreas and make them aware of their logical\n> parent, which I'm not sure will lead to something that clean.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/753#issuecomment-159695801.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","I think this is a great idea!\n\nBecause of the complexity of the multi-repo and multi-language universe we\nlive in now, I think it should go into the \"Developer Documentation\"\nsection of the main docs here:\n\nhttp://jupyter.readthedocs.org/en/latest/index.html#developer-documentation\n\nThat section already has some initial information about how to contribute\nto our docs.\n\nI am fine with using some of the pandas guide, but the existing IPython\nguide should also serve as a starting point. The other thing is that I\ndon't think we should cover basic git and github usage in the guide. It\nshould suffice to describe _how_ we use git/GitHub (pull requests, rebasing\nnot merging) and then link to other content that gives the full details of\nhow to use git/Github. IOW, there are tons of resources on learning\ngit/Github on the internet - let's not repeat that. I find the pandas guide\nway too verbose on that side of things.\n\nWe also probably want to divide our contribution guide in to backend\n(mostly python), frontend (JS) and common information as they are quickly\nbecoming very different worlds.\n\nBut overall, yes!\n\nOn Tue, Nov 24, 2015 at 3:36 PM, Safia Abdalla notifications@github.com\nwrote:\n\n> During the November 24th developer meeting, there was a discussion around\n> the friendliness and accessibility of our documentation, especially with\n> regard to new contributors.\n> \n> I'd like to propose that we create a new Jupyter Contribution Guide that\n> goes a step beyond the previous IPython Contribution Guide\n> https://github.com/ipython/ipython/blob/master/CONTRIBUTING.md that we\n> link to in all of the repositories and incorporates some of the great\n> additions @jhamrick https://github.com/jhamrick made to the\n> contribution guide.\n> \n> I selected pandas as a model for a contribution guide because their guide\n> https://github.com/pydata/pandas/blob/master/CONTRIBUTING.md was\n> immensely helpful to me when I submitted my first ever PR to an OS project.\n> We can incorporate features of other contribution guidelines into this, of\n> course.\n> \n> It might be a good idea (and very meta) to have a first time contributor\n> submit a PR for this with the help of one of the more regular developers\n> just so we can make sure the guidelines have the right perspective.\n> \n> Thoughts?\n> \n> cc/ @ellisonbg https://github.com/ellisonbg @fperez\n> https://github.com/fperez @willingc https://github.com/willingc\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/754.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n :+1: \n > Because of the complexity of the multi-repo and multi-language universe we\n> live in now, I think it should go into the \"Developer Documentation\"\n> section of the main docs here:\n> \n> http://jupyter.readthedocs.org/en/latest/index.html#developer-documentation\n> \n> That section already has some initial information about how to contribute\n> to our docs.\n\nI concur.\n\n>  IOW, there are tons of resources on learning git/Github on the internet - let's not repeat that.\n\nThat makes sense. I think the best approach is to link to external resources for some parts of the guide just so we know that when people are setting up the project they are doing it in a certain way.\n\n> We also probably want to divide our contribution guide in to backend (mostly python), frontend (JS) and common information as they are quickly becoming very different worlds.\n\nExcellent point! I think I'll start off with the Python guide.\n Great!\n\nOn Tue, Nov 24, 2015 at 4:10 PM, Safia Abdalla notifications@github.com\nwrote:\n\n> Because of the complexity of the multi-repo and multi-language universe we\n> live in now, I think it should go into the \"Developer Documentation\"\n> section of the main docs here:\n> \n> http://jupyter.readthedocs.org/en/latest/index.html#developer-documentation\n> \n> That section already has some initial information about how to contribute\n> to our docs.\n> \n> I concur.\n> \n> IOW, there are tons of resources on learning git/Github on the internet -\n> let's not repeat that.\n> \n> That makes sense. I think the best approach is to link to external\n> resources for some parts of the guide just so we know that when people are\n> setting up the project they are doing it in a certain way.\n> \n> We also probably want to divide our contribution guide in to backend\n> (mostly python), frontend (JS) and common information as they are quickly\n> becoming very different worlds.\n> \n> Excellent point! I think I'll start off with the Python guide.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/754#issuecomment-159444803.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @captainsafia A :bouquet: for helping others learn to :fishing_pole_and_fish: Keep up the :sunny: ideas.\n Thanks so much, excellent! This goes right in line with this morning's discussion about barriers to entry that we need to lower. The mere act of writing these guides will show us where our on-ramp to contribution is more like a fence with barbed wire :(\n\nAgreed that for more generic things about github workflows we can just link, but in general I think the pandas guide is an excellent starting point: it is comprehensive, and systematic.\n\nAs far as our docs, the beauty is that as usual, it's a mess :) Our real developer documentation isn't linked from the page that Brian mentioned above, that only talks about contributing to the docs. All our developer-oriented docs are still in the [old IPython docs](http://ipython.readthedocs.org/en/stable/development/index.html), and the information about contributing to the project itself is [in the wiki](https://github.com/ipython/ipython/wiki/Dev:-Index).\n\nAs a starting point, cleaning up that mess with a first pass of rationalizing the information would be already huge progress and would make things more welcoming to newcomers.\n\nPinging @minrk who's also been thinking about this...\n +1, great idea.\n :+1: as well...\n","Note to self, stop writing english before breakfast. \n fixed. \n Useful, thanks.\n This is great, many thanks! I'd like to see it refactored so it's properly documented and tested, and referenced in the main docs as well.  But it will be super useful :)\n","This is an inconsistency in how pandoc and marked handle invalid pipe-tables. It might be considered a bug in pandoc that it trims the columns (as opposed to throwing a render error, due to invalid markup), but I'm not sure you can rely on handling of invalid input to be consistent across different tools. It would probably be better to show an error, rather than silently ignoring the bug in the markdown input.\n\nSince the two libraries responsible for this rendering are external dependencies (marked/mistune and pandoc), I don't think there's anything for us to do here.\n","Option A)\n- MD Blue 50/100\n- MD Green and Red 200/300\n\n<img width=\"297\" alt=\"screen shot 2015-11-25 at 8 47 49 am\" src=\"https://cloud.githubusercontent.com/assets/27600/11403608/8b07f078-9352-11e5-841d-dd33c6d2d380.png\">\n\n<img width=\"410\" alt=\"screen shot 2015-11-25 at 8 47 59 am\" src=\"https://cloud.githubusercontent.com/assets/27600/11403611/8e7d1580-9352-11e5-8b72-1959d4f51396.png\">\n Option B)\n- MD Blue, Green, Red 100/200\n\n<img width=\"552\" alt=\"screen shot 2015-11-25 at 8 50 00 am\" src=\"https://cloud.githubusercontent.com/assets/27600/11403622/a7950474-9352-11e5-9146-bc1fe44d85f6.png\">\n\n<img width=\"405\" alt=\"screen shot 2015-11-25 at 8 50 09 am\" src=\"https://cloud.githubusercontent.com/assets/27600/11403625/ab44c708-9352-11e5-8d37-04dfb4a00b96.png\">\n In all of these designs the first number is the lighter color of the bg and the second is the darker of the border.\n I Prefer option B \n I am fine with that and it is the current state of this PR if you want to merge...\n +1 then, I'll let someone else decide. \n @fperez or @minrk any preference on this visual design choice here?\nMatthias and I are fine with B, but more than open to other thoughts.\n\nOn Wed, Nov 25, 2015 at 9:51 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> +1 then, I'll let someone else decide.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/757#issuecomment-159686718.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I, too, like B. I'll let @fperez hit the merge button.\n Yeah, I can see the light at the end of the (longer than expected) 4.1\ntunnel.\n\nOn Wed, Nov 25, 2015 at 9:55 AM, Min RK notifications@github.com wrote:\n\n> I, too, like B. I'll let @fperez https://github.com/fperez hit the\n> merge button.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/757#issuecomment-159687538.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Merged! Thanks folks, one step closer :)\n","This is a good idea, IMO. Currently I cannot be much of help,  hopefully in a few weeks.\n\n@jcb91 is also very active, maybe he has some comments/additions ?\n @juhasch thanks for ping-ing me in on this (not really sure what the appropriate word for the action is, or even if one exists, so ping will have to do!).\n\n@Carreau good plan, I recall frequently coming to\n[your docs on extensions](https://github.com/Carreau/jupyter-book/blob/master/notebook-extensions.md) after trying to google how to alter some notebook behaviour.\nI'd be happy to contribute some time to improve/extend/update docs.\nWould you prefer comments on here, or PRs to your fork?\n As a side note, I've been contemplating for a little while trying to write a hotkey-rebinder extension, which could be used to neatly rebind any named actions (calling javascript extensions without named actions is obviously a bit more difficult). I'll post back here if/when I get round to it.\n I have opened Carreau/jupyter_notebook#6 with some improvements to this.\n > I have opened Carreau/jupyter_notebook#6 with some improvements to this.\n\nMerged. \n A little bit late, but LGTM, please also check this which is closely related: https://github.com/jupyter/enhancement-proposals/pull/7 \n So, as far as altering keyboard shortcuts goes, I made [this nbextension](https://github.com/ipython-contrib/IPython-notebook-extensions/pull/440). It doesn't do CodeMirror shortcuts yet, as they seem more complicated, but I expect it could.\n","It might be in how we escape math to avoid markdown mucking it up. Markdown shouldn't be touching the latex inside these blocks.\n Closed by #2220 ","Looks like there's a problem with the kernelspec rest API tests.\n Hum, I can see 2 things:\n\n1) A part of the code make the assumption that all the search path for things are return by `jupyter_core.paths:jupyter_data_dir`\n2) The test make the assumption that if a specific app will search it's `kernelspec.data_dir/kernels`.\n\nThe second seem wrong, as in some cases the will be the same path both as first and last directory searched.\n\nI'll try to go and eliminate the second option.\n OK, I think I can get it with JUPYTER_DATA_DIR, let see how travis likes it.\n Travis appears happier about that (I just kicked one of the js tests, but I think that's a sporadic thing).\n\n@minrk was this waiting for migration to be implemented, though?\n I would say that this take care of that while the migration is not done.\n\n```\n def _kernel_dirs_default(self):\n        ...\n        from IPython.paths import get_ipython_dir\n        dirs.append(os.path.join(get_ipython_dir(), 'kernels'))\n        return dirs\n```\n Ah, right, I guess we had added the compatibility code twice. This makes sense then.\n This was leftover from the piece by piece move over to Jupyter paths. The .ipython bit that should be kept until migration is somewhere else.\n","I like it. cc @fperez who requested the changes.\n Also https://github.com/ipython/traitlets/pull/137 might simplify this once we require traitlets > 4.1 :-P \n OK, I suggest we merge this now. It's a tool, so not in the critical path, and it's seen by now enough review/iteration that I think we can call it good enough for now.\n\nAny objection?\n OK, nobody objected, merging to move the queue forward.\n","ping @jdfreder \n Awesome! :cake: \n","What's a little weird is that this only happens on output, but the same latex in a markdown cell doesn't trigger the wrap.\n\nMathJax puts its content in a `nobr`, which I assume is meant to prevent this, but that's not getting respected somehow.\n It is also weird that bug appears randomly. It depends for example on the\r\nwidth of browser window. There is a very good chance that this is a browser bug, not respecting its own no-reflow logic. There are _many_ CSS bugs relating to non-integer sizes, where one calculation rounds up, another rounds down, and you end up with scrollbars/etc where they shouldn't be.\n Seems to still exists on Firefox: 50.0.2","I've opened an issue for this: https://github.com/jupyter/notebook/issues/766\n I'm optimistically tagging that as 4.1 (as you wrote a fix ! Thanks !)\n\nPing @ellisonbg \n","Proposed fix: https://github.com/jupyter/notebook/pull/765\n","Clarification:  They don't match the names of the npm packages.\n","The session id can be any sufficiently unique string, it is not defined as a UUID per se. `\"session\" : \"cabbages\"` would be equally valid.\n Got it - note that in this case the documentation is misleading and incomplete as the description of the [message format](http://jupyter-client.readthedocs.org/en/latest/messaging.html#general-message-format) leads to believe that the session identifier is in fact a UUID.\n Should be clarified by jupyter/jupyter_client#97\n Perfect, thanks a lot!\n","Any news here? I can put up a PR for this, if that's better to discuss the issue?\n\nIf someone has a better  idea (aka more stable across notebook reloads), this would be great! It would also probably need a issue for nbviewer, as links to certain headline should be stable there, too.\n If you want ID for cells, that are persistent, you need a change of the notebook format. Which won't happen soon. Cf among other https://github.com/ipython/ipython/issues/3777. \nIt raises complexity when you duplicate notebook, copy,past, split cells insure id stay unique.\nSo it will probably not \"just work\". It needs probably an IPep.\n\nIt will probably not be for 4.0 at 4.0 will be \"no new features\".\n We have talked about using the heading levels as structure. If we implemented that, you could create a more unique & stable ID by putting its 'heading path' in the hash - e.g. `#Analysis-1/Plots`. Not perfect, but better.\n\nShort of that, you could also sequentially number headings with the same text - `#Plots`, `#Plots-2`, etc. That's annoying if you insert one near the top, though, and all the later ones are renumbered.\n\nAs Matthias says, we don't store any ID for cells - but then even that wouldn't completely solve the issue, because you could repeat the same heading in one long Markdown cell.\n Ok, the \"heading path\" or \"numbering\" solutions seems doable for me (the \"change the notebook format\" not -> I don't think I've a deep enough understanding what this would mean for the rest of the functionality).\n\nnumbering\n- easiest, as it's probably just a jquery call for the new id and if it's taken try one with a number until one is not taken\n- will break permanent URLs (manual links into the document; links into a nbviewer one) if you insert a new heading over an old one and reload (or renumber on the fly)\n\nHeading path\n- will be harder to implement as the current document/ header structure has to be parsed\n- will break permanent URLs if a heading from the path is changed (and the nb is reloaded)\n\nadd some metadata hash foreach md cell and add that to the ids (current id+metadata hash) in that cell\n- id will end up as `#plots-lkjdsf435lkjh4235lkjh`\n- will be stable over reloads /changes to other md cells\n- will be stable as long as the heading itself is not changed\n- will still break if the heading is changed\n- will still break if in that md cell exists a second heading with the same name (+ numbering?)\n- not sure what happens to c/p, splitting and merging of cells -> is metadata copied/merged/split as well? If split will duplicate metadata this would be bad :-(\n\nIf adding to metadata isn't a problem (i.e. splitting does not copy metadata) I would try that first, but if you thing that's a problem I would go with simple numbering.\n I'm not sure about splitting, but I would expect copying cells to copy their metadata.\n Even metadata on copy/past is not obvious. Let say a metadata field is supposed to be unique. \nDo you keep it on copy/past ? (no it might be duplicated) and cut/past (maybe), but then what if cut/paste/past ? you get a duplicate. \n","cc @jdfreder \n +1 for me. \n +1. 4.1 or not, @Carreau?\n I'm fine with that in 4.1 I dont think it can break anything. And we can test a few weeks waiting fro multiple selection to land + Beta Period.  @ellisonbg ?\n +1 to align with the npm package name\n I'd push for getting this is for 4.1, then I can merge the relative PR in ipywidgets, and ipywidgets 5.0 can target notebook 4.1+.\n","Since the syntax for a markdown link is `[title](url)`, it's easy to see why it goes wrong if there's a `)` inside the URL. I would guess you'll need to percent encode it to %29.\n\nThe bare URL might be workable, but we often want to write \"blah blah (http://url)\", and it's annoying if the link winds up including the `)` when it's not supposed to. Github's markdown renderer seems to be smart enough to do the right thing - I guess it counts brackets within the URL - but that's more complex.\n\nIf there is anything to be changed, it's presumably in whatever JS markdown engine we're using now. Other people: is that still marked?\n %29 does work, but looks ugly in automatic mode (imo).\n Closing here, since this is marked's behavior.\n","No there are not. This is partially on purpose, as the API is unstable, and will change. \n\nthe following might be of help:\n\n```\ngrep  'trigger(' $(find . -name '*.js' | grep -v node | grep -v  components | grep -v min) | cut -f 2 -d\"'\" | sort  | uniq\n```\n I also want to know about the `IPthon.events`. Specifically, I want to know what get triggerd after a code cell being executed, when they return the `output_wrapper`.\n I found the following outdated document: https://jupyter.readthedocs.io/en/latest/development_guide/js_events.html Aha, good find. If anyone wants to update that, the source is here: https://github.com/jupyter/jupyter/blob/master/docs/source/development_guide/js_events.rst","One measure I've been thinking about for a while is having a form of one-time-password for the notebook. This would be randomly generated, and when it launched the browser to view the notebook, it would supply it in the URL, where it would be exchanged for a more persistent access token (via a cookie?).\n\nThis would make it more palatable to enable security measures like this by default, because it doesn't require any extra effort from the user.\n\nOf course, it still adds some inconvenience if the user wants to e.g. open up the notebook in a different browser. We could generate a code for them to copy and paste in that case. But that's inconveniencing 5% of use, rather than requiring a password typed in and inconveniencing all use.\n Indeed, it something that I had in mind as well, but that situation makes it difficult to say start the notebook once (at work) and connect to it later via an ssh tunnel. In any case, this feature was easier to implement and will only take effect if the sysadmin enforces it.\n The more elegant version of setting it by default is:\n\n```\nmkdir -p /etc/jupyter\necho 'c.NotebookApp.password_required = True' >> /etc/jupyter/jupyter_notebook_config.py\n```\n\n@takluyver We could also alleviate the always-on password inconvenience by adding an nbopen-style CLI entrypoint that sets login in the same way as the first-launch open (the token should added to the existing nbinfo file).\n Better would be to write that in the json config file, which is machine readable. \nand if password we enforce, we likely want to enforce ssl. \n\nI'm also not a huge fan of having the logic of creating a password into the main notebook app itself. It's likely fine as an side tool that can be reused, like improving [this](https://github.com/jupyter/notebook/blob/master/tools/secure_notebook.py).\n > Better would be to write that in the json config file, which is machine readable.\n\nI disagree, since it's humans who need to read/write the config.\n > I disagree, since it's humans who need to read/write the config.\n\nBut in `/etc/jupyter/jupyter_notebook_config.json|py`  you likely want to make the check programmatically when you deploy that  `<configfile>` is not here, and `NotebookApp.password_required` not set or had he wrong the value. \n > and if password we enforce, we likely want to enforce ssl.\n\nI don't agree fully, the use case for this PR is when you want to run your server bound to localhost, but other people can access you machine (such as at our institute). This isn't really a hostile environment, no direct need for SSL.\nIn any case, I do think it makes sense to add an additional check, for instance\n\n``` python\nif not self.ip and ssl_options is None and not self.password:\n  # warning that you are using a public ip, with a password that will be send plain text,\n  # or simply refuse to start up\n```\n\nNote that there already are some of these checks, but this hasn't much to do this this PR.\n\n> I'm also not a huge fan of having the logic of creating a password into the main notebook app itself. It's likely fine as an side tool that can be reused, like improving this.\n\nWell, an alternative would be to have this flag (password_required), but refuse to start up when there is no password setup, and print out what to do to fix this, for instance\n\n```\n# You are running without a password, please run \n# $ python -m notebook.secure_notebook\n```\n\n(this would require moving this script to a notebook module)\n > But in /etc/jupyter/jupyter_notebook_config.json|py you likely want to make the check programmatically when you deploy that <configfile> is not here, and NotebookApp.password_required not set or had he wrong the value.\n\nI should clarify - if _a script_ is writing the config file, JSON is sensible. Humans should never read nor write JSON config files.\n > I should clarify - if a script is writing the config file, JSON is sensible. Humans should never read nor write JSON config files.\n\nRight, in the context of the issues, I assumed this was ment for script. \n Need rebase. \n\nWhat is the state of this ?\n Is my last proposal of moving the logic of creating the password by invoking:\n\n```\n# You are running without a password, please run \n# $ python -m notebook.secure_notebook\n```\n\nbetter than the original code, or shall I rebase the original PR?\n I think I slightly prefer that proposal to this PR (interactively prompting for a password). If the notebook is launched by a script or an init system, rather than by a user at a terminal, trying to prompt for any input might make the server hang in a useless state, or crash with a confusing error message about failing to read stdin.\n I also think the explicit command is a good idea. I've been bitten by prompts during startup looking like hangs when the terminal is either remote or nonexistent.\n\nThe secure_notebook function can write a JSON config file via Python API without having to manually deal with files:\n\n``` python\nfrom jupyter_core.paths import jupyter_config_dir\nfrom traitlets.config.manager import BaseJSONConfigManager\n\ndef secure_notebook():\n    hashed_password = get_password(...)\n    cfg = BaseJSONConfigManager(config_dir=jupyter_config_dir())\n    cfg.update('jupyter_notebook_config', {\n        'NotebookApp': {\n            'password': hashed_password,\n        }\n    })\n```\n\nFeel free to rebase or clobber this PR, or open a new one. Whatever you feel comfortable with.\n I think an unrelated error causes the build failure right?\nSo basically, if password_required is true, and a no password is given, it refuses to start up and spits out:\n\n```\n[C 14:52:02.752 NotebookApp] Notebook servers are configured to only be run with a password.\n[C 14:52:02.752 NotebookApp] Hint: run the following command to set a password\n[C 14:52:02.752 NotebookApp]    $ python -m notebook.auth password\n```\n\nThe notebook.auth.**main** is script will write to ~/.jupyter/jupyter_notebook_config.json with the code suggestion above. This script is set up with argparse, and it would be nice to also included the ssl setup like in https://github.com/jupyter/notebook/blob/master/tools/secure_notebook.py in this (but I don't want to clutter this PR)\n\nI think the behaviour should also be, if using a non-localhost ip, and password is set, it should refuse to start up without ssl, and spit something out like:\n\n```\n[C 14:52:02.752 NotebookApp] Notebook servers are configured with password protection, running on a non-localhost ip, but without ssl/https, this is unsave.\n[C 14:52:02.752 NotebookApp] Hint: run the following command to setup https\n[C 14:52:02.752 NotebookApp]    $ python -m notebook.auth https\n```\n\n(and thus the https/ssl setup should also be in the notebook.auth.**main** script. )\n\nIf agreed, I might put in a new PR in the future for this.\n @maartenbreddels thanks, this looks very nice, now. You are right that the failure was a gremlin. I've poked Travis to get the gremlins out of there. I found a couple of small typos, but it should be good to go after that.\n As for the SSL, thanks for not putting it here; It probably does make sense as an alternate PR. It shouldn't refuse to start outright, because running the notebook without SSL doesn't mean that there is _no_ ssl, it could be terminated at another level, such as nginx. But we recently made a similar change [to JupyterHub](https://github.com/jupyter/jupyterhub/pull/417), where running without SSL requires additional confirmation.\n Thx for finding those sloppy typos, and yes that was a copy paste :) (from own code btw).\nWould be nice to have sth similar to the notebook server (the --no-ssl to confirm you really want passwords send over non-ssl).\n\nBtw, do you know if the same assumptions are made with Jupyterhub about localhost being 'safe'. For instance, if I run the default jupyterhub on machine 'foo', and log in, a single user jupyter notebook is launched with my uid right? The proxy does the forwarding, but is there any security involved into this? Of with the right knowledge, and ssh access to machine 'foo', will I be able to connect to other people's notebook?\n @maartenbreddels in JupyterHub, authentication is handled by single-user servers. The proxy only forwards the connection, it doesn't perform the authentication. So if you bypass the proxy and connect directly to other single-user servers you still can't execute code because you won't be authenticated with that server.\n Thanks for your patience on this one!\n Hi, when will/what is required for this be included in a release? It was merged into master in March with https://github.com/jupyter/notebook/commit/3feea618027713a53e540b6f7eb1e3abef57dc03 but I can't find `__main__.py` in https://github.com/jupyter/notebook/tree/4.2.1/notebook/auth or password_required in https://github.com/jupyter/notebook/blob/4.2.1/notebook/notebookapp.py\n @Russell-Jones-OxPhys this will be released with notebook-5.0, which is still probably some months away.\n Thanks for the quick response. Useful to know.\n","![screenshot from 2015-12-01 12 19 44](https://cloud.githubusercontent.com/assets/138060/11513015/e4fdd9ee-9825-11e5-9dd0-852495392a0b.png)\n\nHere is a screenshot demonstrating the implementation in overleaf.\n","@captainsafia it might also be worth testing renaming within nested directories (i.e. `foo/bar/buzz.ipynb -> foo/bar/bazz.ipynb`).  We added a pretty extensive test for this in pgcontents that might be worth porting here: https://github.com/quantopian/pgcontents/blob/master/pgcontents/tests/test_pgmanager.py#L145.\n Yup, more tests are always good. Merging, and we can add further tests in another PR.\n","huzzah!\n Travis and Min are happy. Merging. \n \n[![Coverage Status](https://coveralls.io/builds/9702532/badge)](https://coveralls.io/builds/9702532)\n\nChanges Unknown when pulling **8c2fbe2912afb09c432db425c9b260ce01c9681f on takluyver:rm-submodules-mod** into ** on jupyter:master**.\n","It looks like some random bytes are getting into the in-memory sqlite database used to store the mappings of sessions, kernels and notebooks.\n\nCan you find [this line](https://github.com/jupyter/notebook/blob/addc7eb5d91c0c21a9dfd0dda3e2f99884b6b7f4/notebook/services/sessions/sessionmanager.py#L91) in your installed copy of the notebook, and insert before it:\n\n``` python\nprint(repr(kernel_id))\n```\n\nThen try starting it again and look to see what output that's producing.\n I seem to have a similar problem with Anacaonda for Python3.5 x64 on a Windows system. I think that I inserted the print statement before the line you mentioned in the sessionmanager, but didn't notice anything in the exception output:\n\nEdit: Sorry I just noticed my problem might be a completely different one. If necessary please redirect this issue.\n\n```\nC:\\Users\\kasus>jupyter notebook\n[I 21:35:07.491 NotebookApp] Serving notebooks from local directory: E:\\Dropbox\\\nkasus\\workspace\\Python\\iPython\n[I 21:35:07.491 NotebookApp] 0 active kernels\n[I 21:35:07.491 NotebookApp] The IPython Notebook is running at: http://localhos\nt:8888/\n[I 21:35:07.491 NotebookApp] Use Control-C to stop this server and shut down all\n kernels (twice to skip confirmation).\n[W 21:35:12.162 NotebookApp] Notebook Crawler.ipynb is not trusted\n[E 21:35:12.316 NotebookApp] Unhandled error in API request\n    Traceback (most recent call last):\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\base\\handlers.py\n\", line 436, in wrapper\n        result = yield gen.maybe_future(method(self, *args, **kwargs))\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\services\\session\ns\\handlers.py\", line 56, in post\n        model = sm.create_session(path=path, kernel_name=kernel_name)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\services\\session\ns\\sessionmanager.py\", line 66, in create_session\n        kernel_name=kernel_name)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\services\\kernels\n\\kernelmanager.py\", line 84, in start_kernel\n        **kwargs)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\jupyter_client\\multikerne\nlmanager.py\", line 109, in start_kernel\n        km.start_kernel(**kwargs)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\jupyter_client\\manager.py\n\", line 244, in start_kernel\n        **kw)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\jupyter_client\\manager.py\n\", line 190, in _launch_kernel\n        return launch_kernel(kernel_cmd, **kw)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\jupyter_client\\launcher.p\ny\", line 108, in launch_kernel\n        proc = Popen(cmd, **kwargs)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\subprocess.py\", line 950, in __init__\n        restore_signals, start_new_session)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\subprocess.py\", line 1220, in _execute_\nchild\n        startupinfo)\n    FileNotFoundError: [WinError 2] The system cannot find the file specified\n[E 21:35:12.331 NotebookApp] Uncaught exception POST /api/sessions (::1)\n    HTTPServerRequest(protocol='http', host='localhost:8888', method='POST', uri\n='/api/sessions', version='HTTP/1.1', remote_ip='::1', headers={'Accept': 'appli\ncation/json, text/javascript, */*; q=0.01', 'Origin': 'http://localhost:8888', '\nReferer': 'http://localhost:8888/notebooks/Crawler.ipynb', 'Host': 'localhost:88\n88', 'X-Requested-With': 'XMLHttpRequest', 'Content-Length': '75', 'Content-Type\n': 'application/json', 'Connection': 'keep-alive', 'Accept-Encoding': 'gzip, def\nlate', 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (K\nHTML, like Gecko) Chrome/47.0.2526.106 Safari/537.36', 'Accept-Language': 'en,en\n-US;q=0.8,de-DE;q=0.6,de;q=0.4'})\n    Traceback (most recent call last):\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\base\\handlers.py\n\", line 436, in wrapper\n        result = yield gen.maybe_future(method(self, *args, **kwargs))\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\services\\session\ns\\handlers.py\", line 56, in post\n        model = sm.create_session(path=path, kernel_name=kernel_name)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\services\\session\ns\\sessionmanager.py\", line 66, in create_session\n        kernel_name=kernel_name)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\services\\kernels\n\\kernelmanager.py\", line 84, in start_kernel\n        **kwargs)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\jupyter_client\\multikerne\nlmanager.py\", line 109, in start_kernel\n        km.start_kernel(**kwargs)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\jupyter_client\\manager.py\n\", line 244, in start_kernel\n        **kw)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\jupyter_client\\manager.py\n\", line 190, in _launch_kernel\n        return launch_kernel(kernel_cmd, **kw)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\jupyter_client\\launcher.p\ny\", line 108, in launch_kernel\n        proc = Popen(cmd, **kwargs)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\subprocess.py\", line 950, in __init__\n        restore_signals, start_new_session)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\subprocess.py\", line 1220, in _execute_\nchild\n        startupinfo)\n    FileNotFoundError: [WinError 2] The system cannot find the file specified\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\web.py\", line 144\n5, in _execute\n        result = yield result\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\gen.py\", line 100\n8, in run\n        value = future.result()\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\concurrent.py\", l\nine 232, in result\n        raise_exc_info(self._exc_info)\n      File \"<string>\", line 3, in raise_exc_info\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\gen.py\", line 282\n, in wrapper\n        yielded = next(result)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\base\\handlers.py\n\", line 454, in wrapper\n        self.finish(json.dumps(reply))\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\base\\handlers.py\n\", line 375, in finish\n        return super(APIHandler, self).finish(*args, **kwargs)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\web.py\", line 934\n, in finish\n        self._log()\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\web.py\", line 147\n4, in _log\n        self.application.log_request(self)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\web.py\", line 193\n6, in log_request\n        self.settings[\"log_function\"](handler)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\log.py\", line 46\n, in log_request\n        log_method(json.dumps(request.headers, indent=2))\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\json\\__init__.py\", line 237, in dumps\n        **kw).encode(obj)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\json\\encoder.py\", line 201, in encode\n        chunks = list(chunks)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\json\\encoder.py\", line 436, in _iterenc\node\n        o = _default(o)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\json\\encoder.py\", line 180, in default\n        raise TypeError(repr(o) + \" is not JSON serializable\")\n    TypeError: <tornado.httputil.HTTPHeaders object at 0x000000503193A940> is no\nt JSON serializable\n[E 21:35:12.341 NotebookApp] Cannot send error response after headers written\n[E 21:35:12.341 NotebookApp] Failed to flush partial response\n    Traceback (most recent call last):\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\base\\handlers.py\n\", line 436, in wrapper\n        result = yield gen.maybe_future(method(self, *args, **kwargs))\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\services\\session\ns\\handlers.py\", line 56, in post\n        model = sm.create_session(path=path, kernel_name=kernel_name)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\services\\session\ns\\sessionmanager.py\", line 66, in create_session\n        kernel_name=kernel_name)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\services\\kernels\n\\kernelmanager.py\", line 84, in start_kernel\n        **kwargs)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\jupyter_client\\multikerne\nlmanager.py\", line 109, in start_kernel\n        km.start_kernel(**kwargs)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\jupyter_client\\manager.py\n\", line 244, in start_kernel\n        **kw)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\jupyter_client\\manager.py\n\", line 190, in _launch_kernel\n        return launch_kernel(kernel_cmd, **kw)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\jupyter_client\\launcher.p\ny\", line 108, in launch_kernel\n        proc = Popen(cmd, **kwargs)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\subprocess.py\", line 950, in __init__\n        restore_signals, start_new_session)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\subprocess.py\", line 1220, in _execute_\nchild\n        startupinfo)\n    FileNotFoundError: [WinError 2] The system cannot find the file specified\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\web.py\", line 144\n5, in _execute\n        result = yield result\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\gen.py\", line 100\n8, in run\n        value = future.result()\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\concurrent.py\", l\nine 232, in result\n        raise_exc_info(self._exc_info)\n      File \"<string>\", line 3, in raise_exc_info\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\gen.py\", line 282\n, in wrapper\n        yielded = next(result)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\base\\handlers.py\n\", line 454, in wrapper\n        self.finish(json.dumps(reply))\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\base\\handlers.py\n\", line 375, in finish\n        return super(APIHandler, self).finish(*args, **kwargs)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\web.py\", line 934\n, in finish\n        self._log()\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\web.py\", line 147\n4, in _log\n        self.application.log_request(self)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\web.py\", line 193\n6, in log_request\n        self.settings[\"log_function\"](handler)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\log.py\", line 46\n, in log_request\n        log_method(json.dumps(request.headers, indent=2))\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\json\\__init__.py\", line 237, in dumps\n        **kw).encode(obj)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\json\\encoder.py\", line 201, in encode\n        chunks = list(chunks)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\json\\encoder.py\", line 436, in _iterenc\node\n        o = _default(o)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\json\\encoder.py\", line 180, in default\n        raise TypeError(repr(o) + \" is not JSON serializable\")\n    TypeError: <tornado.httputil.HTTPHeaders object at 0x000000503193A940> is no\nt JSON serializable\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\web.py\", line 960\n, in send_error\n        self.finish()\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\base\\handlers.py\n\", line 375, in finish\n        return super(APIHandler, self).finish(*args, **kwargs)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\web.py\", line 934\n, in finish\n        self._log()\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\web.py\", line 147\n4, in _log\n        self.application.log_request(self)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\tornado\\web.py\", line 193\n6, in log_request\n        self.settings[\"log_function\"](handler)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\site-packages\\notebook\\log.py\", line 46\n, in log_request\n        log_method(json.dumps(request.headers, indent=2))\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\json\\__init__.py\", line 237, in dumps\n        **kw).encode(obj)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\json\\encoder.py\", line 201, in encode\n        chunks = list(chunks)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\json\\encoder.py\", line 436, in _iterenc\node\n        o = _default(o)\n      File \"C:\\Users\\kasus\\Anaconda3\\lib\\json\\encoder.py\", line 180, in default\n        raise TypeError(repr(o) + \" is not JSON serializable\")\n    TypeError: <tornado.httputil.HTTPHeaders object at 0x000000503193A940> is no\nt JSON serializable\n```\n\nReinstalling my Anaconda environment did not fix the problem.\n FileNotFound suggests that there may be a stale kernelspec. What do you get from:\n\n```\njupyter kernelspec list\n```\n The output looks like this:\n\n```\nAvailable kernels:\n  stata      C:\\Users\\kasus\\.ipython\\kernels\\stata\n  python3    C:\\ProgramData\\jupyter\\kernels\\python3\n```\n Can you do `python3 -m ipykernel install` and see if it works again after that?\n thank you very much! `python -m ipykernel install` fixed the problem :)\n @muthu1086 I have just met the same issue in python 2.7. \nI solve it by reinstalling python with\n\n```\n--enable-loadable-sqlite-extensions\n```\n\nconfig.\n\nThe reason is that jupyter use sqlite for it's data store. We have to add sqlite extensions for python 2.x.\nWe all know that python 2.x has a long story about Unicode. \n\nAt last, don't forget to use\n\n```\njupyter kernelspec install-self\n```\n\nto reinstall your jupyter kernel.\n\nHope it's useful.\n Closing as this is likely fixed. \n @LiZhenchong  I've just tried your ways. still get exception.\ncould you add more detail steps. reinstall python, what about other pkgs . reinstall or not? \n\nException as below:\n\nI 09:58:23.079 NotebookApp] Kernel started: 5eb76e3c-ed0f-4b0d-ab29-a3d2c11695b0\n[E 09:58:23.080 NotebookApp] Unhandled error in API request\n    Traceback (most recent call last):\n      File \"/usr/local/lib/python2.7/site-packages/notebook/base/handlers.py\", line 457, in wrapper\n        result = yield gen.maybe_future(method(self, _args, *_kwargs))\n      File \"/usr/local/lib/python2.7/site-packages/tornado/gen.py\", line 1015, in run\n        value = future.result()\n      File \"/usr/local/lib/python2.7/site-packages/tornado/concurrent.py\", line 237, in result\n        raise_exc_info(self._exc_info)\n      File \"/usr/local/lib/python2.7/site-packages/tornado/gen.py\", line 1021, in run\n        yielded = self.gen.throw(*exc_info)\n      File \"/usr/local/lib/python2.7/site-packages/notebook/services/sessions/handlers.py\", line 62, in post\n        kernel_id=kernel_id))\n      File \"/usr/local/lib/python2.7/site-packages/tornado/gen.py\", line 1015, in run\n        value = future.result()\n      File \"/usr/local/lib/python2.7/site-packages/tornado/concurrent.py\", line 237, in result\n        raise_exc_info(self._exc_info)\n      File \"/usr/local/lib/python2.7/site-packages/tornado/gen.py\", line 1024, in run\n        yielded = self.gen.send(value)\n      File \"/usr/local/lib/python2.7/site-packages/notebook/services/sessions/sessionmanager.py\", line 81, in create_session\n        self.save_session(session_id, path=path, kernel_id=kernel_id)\n      File \"/usr/local/lib/python2.7/site-packages/notebook/services/sessions/sessionmanager.py\", line 121, in save_session\n        return self.get_session(session_id=session_id)\n      File \"/usr/local/lib/python2.7/site-packages/notebook/services/sessions/sessionmanager.py\", line 152, in get_session\n        self.cursor.execute(query, list(kwargs.values()))\n    \"OperationalError: Could not decode to UTF-8 column 'kernel_id' with text '\\xf9\\x90\\x80\\xb5\\xfd\\xb0\\x81\\xa2\\xf9\\x90\\x80\\xb6\\xf8\\xb0\\x80\\xb3\\xf9\\x90\\x80\\xad\\xfc\\x80\\x81\\xa4\\xfb\\x90\\x81\\xa6\\xf8\\xa0\\x80\\xb4\\xf9\\x80\\x80\\xb0\\xf8\\x90\\x80\\xad\\xfc\\xa0\\x81\\xa2\\xfb\\x90\\x80\\xb9\\xfc\\xb0\\x81\\xa1\\xfc\\xa0\\x81\\xa4\\xfc\\x90\\x81\\xa3\\xfd\\xa0\\x80\\xb1\\xfd\\x90\\x80\\xb9\\xfc\\x80\\x81\\xa2'\"\n[E 09:58:23.081 NotebookApp] Uncaught exception POST /api/sessions\n","Thanks, I think this looks good.\n\nIn some of our docs, we set `default_role = 'literal'` in the config, so that we can do inline code using single backticks, as we're used to in Markdown. But we haven't actually done that in the notebook docs yet, so you're right to double up the backticks.\n Thanks!\n","Thanks!\n :+1: \n","Lovely, thanks!\n","@minrk The changes in the source look good to me. I will try to run locally and do a visual check as well though no need to hold up the merge on it. Go ahead and merge. \n","Various cells are using this get() function to fetch custom config, which means their custom config probably isn't working at the moment.\n Thanks, I'll merge this once Travis has finished.\n Thanks @takluyver \n","@minrk @ellisonbg @Carreau Would it be possible to grant me privileges so that I can tag docs issues with a label? Thanks.\n Can you do it now ?\n @carreau Thank you! :sunflower: \n Thanks @Carreau !\n\nOn Sat, Dec 5, 2015 at 9:38 AM, Carol Willing notifications@github.com\nwrote:\n\n> @carreau https://github.com/carreau Thank you! [image: :sunflower:]\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/788#issuecomment-162227087.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n +1, would help \n","An HTML snippet with the base64 code for a tiny image (1 pixel?) would be handy for quickly reproducing this.\n\nWhen the Markdown cell is rendered, use 'inspect element' in the browser to see it's producing for the `<img>` tag.\n I suspect that data-URIs are getting sanitized.\n This seems to be the only way of portably embedding image assets in a readable manner (i.e. not having a `display(HTML())` shown to the reader just to embed a graphic. \n\nI'd love to see this functionality supported.. Or some other, perhaps friendlier, method for creating portable notebooks with graphics assets that aren't produced from the code. \n I was away for a few weeks and just got to looking at this again.  The issue is reproducible with a single pixel image.  Doing\n\n``` python\ndisplay(HTML('''<img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAABGdBTUEAALGPC/xhBQAAACBjSFJN\\nAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB1WlUWHRYTUw6Y29tLmFkb2Jl\\nLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1Q\\nIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5\\nOTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91\\ndD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4w\\nLyI+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAg\\nICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZm\\nOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0\\naW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4K\\nAtiABQAAAAxJREFUCB1j+M/AAAADAQEAW9v5RAAAAABJRU5ErkJggg==\">'''))\n```\n\nresults in a red single pixel image.  In a markdown cell, doing\n\n``` html\n<img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAABGdBTUEAALGPC/xhBQAAACBjSFJN\\nAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB1WlUWHRYTUw6Y29tLmFkb2Jl\\nLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1Q\\nIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5\\nOTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91\\ndD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4w\\nLyI+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAg\\nICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZm\\nOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0\\naW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4K\\nAtiABQAAAAxJREFUCB1j+M/AAAADAQEAW9v5RAAAAABJRU5ErkJggg==\">\n```\n\nresults in nothing.  For the latter case, the browser's web inspector simply shows an empty `<img>` tag.  Using a raw Python string for the latter case does not seem to help things.  It seems to only pass the 'r' prepended to the string to the browser (if that even makes sense...)\n Markdown is sanitized with Caja. \nI'm currently using CSS to embed image data as a workaround:\n\n```\nCSS:\n.embed_test {\n  background:       url(data:image/gif;base64,R0lGODlhEAAQAMQAAORHHOVSKudfOulrSOp3WOyDZu6QdvCchPGolfO0o/XBs/fNwfjZ0frl3/zy7////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAkAABAALAAAAAAQABAAAAVVICSOZGlCQAosJ6mu7fiyZeKqNKToQGDsM8hBADgUXoGAiqhSvp5QAnQKGIgUhwFUYLCVDFCrKUE1lBavAViFIDlTImbKC5Gm2hB0SlBCBMQiB0UjIQA7)\n    no-repeat\n    left center;\n  width: 16px;\n  height: 16px;\n  padding: 5px 0 5px 25px;\n  background-size: contain;\n}    \n\nMarkdown:\n<div class=\"embed_test\"></div>\n```\n\nThis is not ideal but it works. I'd love to hear @minrk's thoughts on how media embedding may be approached in the future.\n Just ran into this issue myself on 4.2 \u2013 this is quite annoying, since, as mentioned earlier, it's the only easy way to embed an image into the notebook without having anything else show up... \n echoing gibiansky's comment - ver 4.2\n Cell attachments, coming in 5.0 (https://github.com/jupyter/notebook/pull/621), allow embedding images in markdown cells. In master: `Edit > Insert Image`. Inline data-uris are still sanitized, though.\n It may be simpler than thought. I ran over the same problem.\r\nIf you launch jupyter notebook, than the notebooks's launch directory becomes its root. Now if the image referred to can only be reached through directories higher upin you system directory than than this notbooks's launch directory, the notebook cannot find the image it's referring to (at least using a relative path).\r\nIt was a simple as that. Launch the notebook from a sufficiently high directory in the root of your computer, from which both the image and the notebook can be reached by only searching downward.","This now belongs in https://github.com/ipython/ipywidgets (sorry about all the movement).\n\nIt might be nice if there was just another command, say `animate` that wrapped `interact` with configurable delay, a way to pause, and whether the controls would be shown.\n Nah, dont' need too, just a while loop in next cell that change the value\nof the widgets since it's linked.\n\nOn Mon, May 11, 2015 at 1:11 PM, Kyle Kelley notifications@github.com\nwrote:\n\n> This now belongs in https://github.com/ipython/ipywidgets (sorry about\n> all the movement).\n> \n> It might be nice if there was just another command, say animate that\n> wrapped interact with configurable delay, a way to pause, and whether the\n> controls would be shown.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/79#issuecomment-101034488.\n Thanks, both. I'll have a play and maybe open an issue in ipywidgets if appropriate.\nCheers,\nMike\n @mikecroucher , did you find a solution to this?\n","Great PR! Thanks for submitting. I made a quick note about adding documentation.\n ping @ellisonbg, since this appears to be an action not doing the right thing in multi-select context.\n That's part of the various actions that don't apply (yet) to multiple selection (see #738 )\n closes #802 \n The commits here went in with #809. This can be closed.\n","You can see related discussion like https://github.com/ipython/ipython/issues/6073. \n\n> Currently there is no way on the UI to set metadata, such as title, author and date, of a notebook.\n\nThat's untrue, you can do Edit > Edit Metadata. Less than optimal but you can do it. \n\nWe encourage people to develop extension to play with what a better UI could be, and to formalize the metadata structure. \n\nTypically you use author singular, should it be plural ? Is it a string ? An object with first/last/given name ? A github handle ? Is there a field for primary author ?\n\nThese are question we don't have a lot of bandwidth to tackle and we encourage the community to form subgroup, discuss comme up with a proposal, implementation plan. But it is far from a \"just throw 3 textfield on the page\" kind of things. \n","Good catch\n Gah, my fix is wrong, we should probably replace the **selection** if one click on replace. Not only the head. \n > Gah, my fix is wrong, we should probably replace the selection if one click on replace. Not only the head.\n\nDoes that mean you intend to close #799?\n","@takluyver mentioned the possibility of even removing move cell up and\ndown. I think that is a good idea (not for 4.x though). But does this\nchange our thinking about fixing this issue? But if we do fix, I think it\nshould move blocks.\n\nOn Tue, Dec 8, 2015 at 6:47 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> do not work with multiple selection (we can decide that how it works\n> though),\n> but imho it should move blocks.\n> \n> Or implmentation wise, move the cell before the block after the block when\n> move up, and vice versa. (Though it might unbind callbacks)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/793.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @takluyver ask to remove the **UI** the action can still be manually bound to a shortcut, so it still need fixing. \n I don't think it would be unreasonable to remove/deprecate the action itself. I really don't think that move up/down makes sense when you can select multiple cells, and especially if you can select non-contiguous cells.\n > and especially if you can select non-contiguous cells.\n\nyou can't anymore. \n Ah, OK. I thought from skimming through the long conversation about it that that was why we had implemented the multi-cell selection all over again.\n You can select multiple-contiguous. For a few weeks we had non-contiguous, it was removed after much yak-shedding, (or bike-shaving).\n Am now picturing a bike with yak hair. Good job.\n As long as it's not a pink-haired-colored yak...\n Would you think of removing the toolbar buttons in 4.1?\n\nOn Tue, Dec 8, 2015 at 12:00 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> As long as it's not a pink-haired-colored yak...\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/793#issuecomment-162997787.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Would you think of removing the toolbar buttons in 4.1?\n\nNo. I've see too many people use them with single cell. \nRemoving the button mean teaching people about multiple selection and copy/past semantic, which are not obvious in notebook. \n k\n\nOn Tue, Dec 8, 2015 at 11:26 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Would you think of removing the toolbar buttons in 4.1?\n> \n> No. I've see too many people use them with single cell.\n> Removing the button mean teaching people about multiple selection and\n> copy/past semantic, which are not obvious in notebook.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/793#issuecomment-163139693.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n So that I know and can inform others when they ask: what's the modern replacement?\n\nEdit: I too know a whole bunch of folks who use the toolbar buttons.\n > So that I know and can inform others when they ask: what's the modern replacement?\n\nI think Brian and Thomas want to replace that with Copy-Past. \n\n> Edit: I too know a whole bunch of folks who use the toolbar buttons.\n\nI'm worry too that removing \"move up-down\" will piss off many people. We already got a lot of complaint when we removed the Ctrl-j/k bindings. \n I've deprecated the action in #815 , I'll bump the milestone for the issue now.\n > I've deprecated the action in #815 , I'll bump the milestone for the issue now.\n\nBumping down to 4.1 again, as it is (still) broken with multiple selection.\nDeprecation does not forbid us from fixing the behavior. \n","Yep.\n\nShould the selection be reset after insertion?\n\nOn Tue, Dec 8, 2015 at 6:50 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Should insert after/before the full selection, likely not the\n> selection-head.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/794.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Should the selection be reset after insertion?\n\nreset ? You mean select back the selected cells (A)  ? Of focus the new one (B)?\n\n(B) is what all commands should do IMHO\n","I sort of think that all of the run commands should just be inplace if\nthere are multiple cells seleted. The select below and insert below parts\ndon't really make sense with mulitple cells selected. Thoughts?\n\nOn Tue, Dec 8, 2015 at 6:52 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Does not select after the selection, select the last cell of selection.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/795.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Thoughts?\n\nIt's call run and select below, so it should run and select below. \nWe can have another action name that does something else and make it the default. Then I'm fine. \n\nThou I can see myself selecting 2-3 cells up, and pressing shift enter. \nI would expect  the nth+1 cell to be selected. \n","From my other comment:\n\nI sort of think that all of the run commands should just be inplace if\nthere are multiple cells seleted. The select below and insert below parts\ndon't really make sense with mulitple cells selected. Thoughts?\n\nOn Tue, Dec 8, 2015 at 6:52 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Does not insert on multi-selection.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/796.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Same comment, if the action is name \"and insert below\" it should insert below. \n\nThough I still think that Alt-enter to run-selected insert below selection make sens.\n","Yes, they should say cells, but I think it should be `cells` not `cell(s)`\n\nOn Tue, Dec 8, 2015 at 6:53 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Menu commands that act on many cells should be plural.\n> \n> (once the underlying commands are working on many cells)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/797.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I'll give this a stab.\n @captainsafia so I can find this later.\n","Looks good as is, merging.\n No parens I think\n\nOn Tue, Dec 8, 2015 at 7:15 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> ## Should we put the s in parenthesis ?\n> \n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/jupyter/notebook/pull/798\n> Commit Summary\n> - Pluralize commands in menu that can act on many cells.\n> \n> File Changes\n> - _M_ notebook/templates/notebook.html\n>   https://github.com/jupyter/notebook/pull/798/files#diff-0 (8)\n> \n> Patch Links:\n> - https://github.com/jupyter/notebook/pull/798.patch\n> - https://github.com/jupyter/notebook/pull/798.diff\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/798.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","Travis is not happy :(\n relaunched. \n Fixed case where past and replace was clicked with a selection range. \n\nPast and replace will now replace the full selection, instead of replacing only the head cell. \n\nTest included. \n\nI also greatly simplified the logic to past, which now just delete and insert at index, instead of relying on trick of \"insert above\" that follow selection. \n Couple comments inline\n Awesome, :+1: when green\n Gah, had to restart Travis twice because of illegitimate test failures\n","OK, tests are now passing. Merging this so we can work on the notebook without initialising submodules.\n","+1 once travis is happy.\n Travis is happy :-)\n","affect collapse and scrolled. \n Closed by #816\n","closed by #806\n my bad, by #816\n","Noting that I built atop #790.\n closed by #809\n","Noting that I grabbed this.\n","Noting that I grabbed this.\n closed by #809\n","It should really only show a cell type when all cells selected have the\nsame type. Otherwise it should be null.\n\nOn Tue, Dec 8, 2015 at 11:16 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> The quick cell type selector is a bit inconsistent when you have many\n> cells selected.\n> \n> The case is really rare but in the following case:\n> - You have various cell type in your selection.\n>   - -> the indication on the quick selector is the type of your head\n>     cell (issue 1)\n> - You want to change your cells type to T (T in code, markdown, raw)\n> - Your Head selection cell is of Type T.\n>   - > Clicking on type in quick type selector will not trigger event\n> \n> We should document that.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/805.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > It should really only show a cell type when all cells selected have the\n> same type. Otherwise it should be null.\n\nThe issue was ment to describe the problem, not suggest a fix (could have done a better job in the last sentence). \n\nWhat you propose is one of the solution, not the only one. We can discuss that later on, and we already discussed that (with Jon and Fernando) during 4.1 meeting last Tuesday. \n\nSorry if it wasn't clear in above message I updated to reflect the status. \n\nWhile the solution you propose is close to what might be an ideal solution,\nthe complexity and edge cases in implementing it now, in comparison to the\nrare cases where this inconsistency shows up made us lean toward documenting that this is a known defect instead of hastily fixing it the wrong way. \n","This made me realize that : https://github.com/jupyter/jupyter-js-output-area/issues/25.\n I'll appreciate if someone write some test for this one while I sleep. \n On it. Catch some Zs!\n OK. OMG. Working on this now.\n","I agree this needs some rethinking. For 5.0 I would like to start with\nhaving Cameron do some design work around this. But in general I like the 2\nstate approach in the new models.\n\nOn Tue, Dec 8, 2015 at 12:45 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> [marking as 5.0]\n> \n> I find the \"toggle\" output/toggle scroll UI confusing, especially with\n> multiple selection.\n> if I have 1 cell collapsed, 1 cell not collapsed and both selected I do\n> not want to \"toggle\". Even with 1 cell, I do not want to toggle.\n> \n> Proposal change the\n> - Toggle\n> - Toggle scrolled\n> \n> To the following:\n> - Expand\n> - Scroll\n> - Collapse\n> \n> It has the nice advantage of being stateless with respect to the current\n> state of the notebook, and we can still have a \"smart\" toggle that:\n> (collapsed->scrolled->expanded), other direction, or cycle.\n> \n> Could apply to _input_ as well.\n> \n> @ellisonbg https://github.com/ellisonbg, @fperez\n> https://github.com/fperez ?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/807.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I think I agree with @Carreau.  Not only is it confusing to have two different states that affect the same sort of thing, but you also need two different interactions to change the states.\n","> WebSocket ping timeout after 90009 ms.\n\nThis mean you likely have something that block websocket connections: Firewall, antivirus ... \n\nFrom the browser perspective, a blocked webscoket, and a busy kernel are (almost)  indistinguishable, so the UI says \"busy kernel\". \n\nTry to find what's blocking websocket, and you should be good to go. \n I uninstalled antivirus, disabled firewall too. Still same.\n\nThis is the logs after running in debug mode.\n\n[D 21:11:22.831 NotebookApp] Starting kernel: ['d:\\python35\\python.exe', '-m', 'ipykernel', '-f', 'C:\\Users\\dell\\AppData\\Roaming\\jupyter\\runtime\\kernel-f8439a\n2-35bc-414e-be8e-aa6783fa92a1.json']\n[D 21:11:22.837 NotebookApp] Connecting to: tcp://127.0.0.1:55518\n[I 21:11:22.840 NotebookApp] Kernel restarted: f8439a32-35bc-414e-be8e-aa6783fa92a1\n[D 21:11:22.841 NotebookApp] 200 POST /api/kernels/f8439a32-35bc-414e-be8e-aa6783fa92a1/restart (127.0.0.1) 717.04ms\n[D 21:11:23.173 NotebookApp] Initializing websocket connection /api/kernels/f8439a32-35bc-414e-be8e-aa6783fa92a1/channels\n[D 21:11:23.178 NotebookApp] Opening websocket /api/kernels/f8439a32-35bc-414e-be8e-aa6783fa92a1/channels\n[D 21:11:23.179 NotebookApp] Connecting to: tcp://127.0.0.1:55515\n[D 21:11:23.181 NotebookApp] Connecting to: tcp://127.0.0.1:55516\n[D 21:11:23.182 NotebookApp] Connecting to: tcp://127.0.0.1:55517\n[W 21:11:42.451 NotebookApp] WebSocket ping timeout after 90000 ms.\n I am not sure if this can be helpful.\nScreen shot from \"Resource Monitor\"\n![capture](https://cloud.githubusercontent.com/assets/8478554/11924078/966695e0-a771-11e5-9ecb-9b0d288457ea.PNG)\n @bibekchitrakar  Could you share the output of the following commands:\n\n```\npython --version\nwhich python\npython3 --version\nwhich python3\npip list\njupyter notebook --version\n```\n\nThanks. Hopefully, a bit more detail will help us guide you to resolving your issue.\n @willingc, here are the details\n\nC:\\Users\\xyz\\Desktop\\ML>python --version\nPython 3.5.1\n\nC:\\Users\\xyz\\Desktop\\ML>pip list\ndecorator (4.0.6)\nipykernel (4.2.1)\nipython (4.0.1)\nipython-genutils (0.1.0)\nipywidgets (4.1.1)\nJinja2 (2.8)\njsonschema (2.5.1)\njupyter (1.0.0)\njupyter-client (4.1.1)\njupyter-console (4.0.3)\njupyter-core (4.0.6)\nMarkupSafe (0.23)\nmistune (0.7.1)\nnbconvert (4.1.0)\nnbformat (4.0.1)\nnotebook (4.0.6)\npath.py (8.1.2)\npickleshare (0.5)\npip (7.1.2)\nPygments (2.0.2)\npyzmq (15.1.0)\nqtconsole (4.1.1)\nsetuptools (18.2)\nsimplegeneric (0.8.1)\ntornado (4.3)\ntraitlets (4.0.0)\nvirtualenv (13.1.2)\nvirtualenvwrapper-win (1.2.1)\n\nC:\\Users\\xyz\\Desktop\\ML>jupyter notebook --version\n4.0.6\n\nI tried with python2.7.3. Restored firewall settings to default. Temporarily disabled antivirus as well. But didn't worked.\n\"\"\"The weird part is it works if I login into Guest account with administrator privilege for cmd prompt.\"\"\n @bibekchitrakar Let's try to get this working for you using Python 3.5.\nFirst, double check the python version using `python --version`. You should see `3.5.1`. If you do not see that, there is likely an issue with your PATH settings.\n\nPlease install the latest release of Jupyter notebook using this command:\n`python -m pip install notebook --pre --upgrade`\n\nAfter executing that command, `jupyter notebook --version` should return `4.1.0rc1`.\n\nNow, run by typing on command line (i.e. Windows Powershell) `jupyter notebook`.\nHopefully, this will work. \n\nIf you are still having an issue, I would create and activate a virtualenv substituting the correct path to your Python 3.5 installation:\n\n```\nC:\\Python35\\python -m venv myvenv\nmyvenv\\Scripts\\activate\n```\n\nNext you should pip install Jupyter notebook in the virtual environment:\n\n```\npip install --upgrade pip\npip install jupyter\n```\n\nRun `jupyter notebook` from the command line.\n\nGood luck! Please let us know how it goes.\n @willingc, I did all the steps you told. Its not working. As per mentioned by @Carreau, it must be something that is blocking the websocket. Any way to find the websocket usuage?\n @bibekchitrakar Just to clarify. It did not work when a virtualenv was created and activated and then jupyter notebook was run inside the virtualenv.\n\nWhen you say it's not working, do you mean `jupyter notebook --version` is not working? `jupyter notebook`? And are you getting the same errors as previously reported?\n I created the virtual environment, activated and tried running inside virtualenv as per you instruction.\njupyter notebook --version gives 4.1.0rc1\njupyter notebook is running but in the browser when I hover mouse just below the python logo, \n\"kernel busy\" message is popped.\n\nAlso no results are returned,\n![capture](https://cloud.githubusercontent.com/assets/8478554/11997718/d451b388-aa48-11e5-8a15-e604c79eee29.PNG)\n Thanks @bibekchitrakar. I'm glad that you were able to install the latest release. So we've pretty much ruled out notebook installation as the root cause of \"kernel busy\". I thank you for being patient. \n\n@minrk @carreau @takluyver Can you suggest specific steps for troubleshooting why \"kernel busy\" message is happening? Thanks.\n Most likely cause is a failure to properly establish the websocket connection. The root cause of that on Windows can be bad firewalls or AV software. One option is to specify `jupyter notebook --ip 127.0.0.1` to force localhost-by-ip instead of by name. That works on some systems.\n Its working but I don't know how.\nI did following\ninstalled python to 2.7.11 (64 bit)\npip install virtualenvwrapper-win\ncreated a virtual environment and installed latest jupyter\nFinally, jupyter notebook is working\n\nNote: I am running xampp with administrative privilege. Previously xampp was not installed.\nProblem is still unknown but its solved. Thankyou all.\n @bibekchitrakar I'm glad you have gotten it working. I suspect that when you installed xampp with administrative privileges that it gave permission to establish websocket connections that were being blocked before. We hope you enjoy using Jupyter. \n\nThanks @minrk and @carreau for your tips and help too. I'm closing this issue.\n","One additional comment: the behavior after conversion here is that the multiselect collapses and the focus remains where it is.\n Quick and dirty tests added for conversion behavior plus selection after convert.\n +1 thanks a lot for that !\n A big thank for that. It helps a lot. \n","Don't forget to document the new message type(s) in the message spec doc, and rev the spec version.\n I think the Session object should be used to send these messages, even though they are simple. I don't think there's a good reason for us to have multiple wire formats, even if one is single-frame JSON. This might as well be a new channel and message type, rather than a whole independent spec.\n Yeah, I imagine we'll end up serialising it like the other messages, but again, I was deliberately keeping it simple until we've discussed the overall architecture. I've put it on the agenda for tomorrow's dev meeting.\n What are the structure of the messages and the stored data? Is there only one message type? What keys and possible values?\n The message types are 'version' and 'feature'. They both contain a project key (e.g. 'IPython', 'numpy'), and respectively a 'version' and 'feature' key, each of which is a string.\n\nhttps://github.com/jupyter/notebook/pull/81/files#diff-7654a22a93a632a9e1b54546c57f0215R133\n\nTechnically, they're both doing exactly the same thing - adding an element to a set. This could obviously be generalised much more, but I wanted to keep it simple and fairly minimal.\n I'd prefer this be `metrics` rather than `analytics`, including the `metrics_port`.\n Does it make more sense for this to be something standalone, rather than part of the notebook server, and added to the formal message spec?\n > Does it make more sense for this to be something standalone, rather than part of the notebook server, and added to the formal message spec?\n\nWe discussed that a bit, and we need _some_ integration with notebook server. Though having the tracking library as standalone make also sens, a first iteration/prototype using the notebook server make sens IMHO.\n There are two important points where we're using the notebook server: the UI to ask a user for consent, and as a long-running/predictably started process that can spare the cycles to deal with this - I don't want to be trying to upload data in atexit hooks or something, and I'd rather not write a separate daemon to deal with it.\n It might not be hard to do data collection and upload without a server, by having the metrics collection library (a) store data directly using sqlite or something that has a strategy for coordinating multiple independent readers/writers, and (b) notice when it's time to do an upload and spawn off a little background process to do it and reset the database when it succeeds. I guess we'll need most of this anyway given that we want our metrics to still work even if someone is running multiple notebook servers at the same time in the same home directory. But we definitely need help from the server for consent, so for version 0.1 we might as well do whatever's simplest.\n\nWhile it's true that there are a lot of limitations to count data, I think there are some compelling reasons to still want it:\n- Relative comparisons over time: even if it's meaningless to see that there are 2 million calls to `foo` in March, it's potentially meaningful to see that in April this has dropped to 100,000.\n- Relative comparisons between features: there's some debate in NumPy right now about if, supposing we change how `np.dot` works in some corner cases, whether we should also change the public C API function that currently it just calls under the hood (`PyArray_MatrixProduct2`). For discussing this, it would be useful to know how many people are using the C API directly versus the Python-level API -- but every call to the Python-level API also causes a call to the C API. One way to solve this would be to count calls to both separately, and then the difference is the number of direct calls to the C API.\n\nI'd suggest making the data collection API look like:\n\n```\nmetrics.add(project_key, feature, value=None, count=1)\nmetrics.register_pull_function(pull_function)\n```\n\nExample:\n\n```\nmetrics.add(\"numpy-5605-4de1-ae10\", \"version\", \"1.9.1\")\n\ndef numpy_pull_stats():\n    # For speed, `PyArray_MatrixProduct` counts how many times it is called in a C-level variable\n    # which we batch up and submit to the metrics engine later\n    pycount, ccount = get_stats_from_c_variables()\n    stats.submit(\"numpy-5605-4de1-ae10\", \"dot.python-level\", count=pycount)\n    stats.submit(\"numpy-5605-4de1-ae10\", \"dot.c-level\", count=ccount)\n```\n\nIdea:\n\n`project_key` is a unique string identifying the group who is taking responsibility for collecting this data. The idea being that if you want to get your data back out of ipython's server, then you have to register one of these keys and affirm that you've read our privacy doc and thought about what data you'll collect.\n\n`feature` is an arbitrary (unicode) string identifying what thing you are counting (scoped by `project_key`), by convention hierarchical by dots, b/c conventions are nice.\n\n`value` is another arbitrary (unicode) string, or None. We count (feature, value) pairs. The split between feature and value is arbitrary (one could just encode the (feature, value) tuple as a single string), but IME in these kind of little metric systems key/value pairs are so common that it's nice to have sugar for them. An alternative would be to allow `value` to be an arbitrary JSON-encodable value.\n\nFirefox has some interesting documents to potentially use as a model:\n\nhttps://www.mozilla.org/en-US/privacy/principles/\nhttps://www.mozilla.org/en-US/privacy/firefox/\n Oh right, the other example I thought of and then forgot about, for why keeping a count is useful: cases where the thing being counted actually is a meaningful thing to count, not something that happens inside a loop. E.g., if you are trying to figure out how much usage the different kernels get, and there's someone who over the course of a month started up the R kernel once for 15 minutes and started up the python kernel 45 times for 2-4 hours apiece, then probably you do not want to just collapse away the numeric information and record this as \"one person who uses both R and Python\".\n\nThe mention of times also suggests to me that maybe we should allow the `count` variable to be a float -- hey, it works for javascript!\n\nAlso, better idea: instead of having the first argument be a random token that gets assigned, make it an email address. That nicely encodes the idea that this is some person or group who is taking responsibility here: `metrics.add(\"ipython-devs@ipython.org\", ...)`\n Oo, and here's yet another example of why we want counts :-). Say we're\nthinking of adding some \"small array\" optimizations to numpy (e.g. a\ncustomized free list). One immediately has some complicated decisions to\nmake about what sizes are worth optimizing, which sizes to lump into a\nsingle bucket, etc. The data you need to make these decisions is like --\nwhat percent of allocations were 4 bytes, what percent were 8 bytes, what\npercent were 12 bytes, etc. Easy to get by instrumenting the code, but you\nreally want to collect these statistics on a large and diverse set of\nuses...\nOn May 12, 2015 1:28 PM, \"Thomas Kluyver\" notifications@github.com wrote:\n\n> There are two important points where we're using the notebook server: the\n> UI to ask a user for consent, and as a long-running/predictably started\n> process that can spare the cycles to deal with this - I don't want to be\n> trying to upload data in atexit hooks or something, and I'd rather not\n> write a separate daemon to deal with it.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/81#issuecomment-101410971.\n The implementation certainly needs to be smarter about multiple processes that might be trying to write to it at the same time. I have an idea for this that I like better than using sqlite.\n\nHowever, development of this is on hold for a bit while we work out whether we need to get human subject review on this because we're in an academic setting.\n Anything you do will have _some_ locking mess, because locking is basically\nimpossible to get right in all situations (remote file systems, etc.), so\noh well, not much to be done.\n\nRe human subjects: the document you need is here:\nhttp://cphs.berkeley.edu/review.html\n\nThe key point I believe is that you only need to do paperwork if your\nproject is \"designed to develop or contribute to generalizable knowledge\",\ni.e. if your goal is to do science and learn about how things work in\ngeneral, _not_ if your goal is to study a specific entity. (I think of this\nas the \"would a journal care about my results\" test.) They give the\nspecific example that if you measure how well a class learned because you\nwant to know if your curriculum works, then this is not \"human subjects\nresearch\"; if you measure how well a class learned because you want to know\nhow curriculums work in general, then this is human subjects research.\n\nIn our case, we don't care about writing journal articles about general\nprinciples for software design, we just want to know what the right thing\nto do is in our specific situation. Ergo, not human subjects research.\n\nIf you want to confirm this interpretation, then there's a phone number to\ncall and talk to an expert, and a procedure for getting the result in\nwriting, given here:\n  http://cphs.berkeley.edu/faqs.html#a1\nOn May 15, 2015 4:51 PM, \"Thomas Kluyver\" notifications@github.com wrote:\n\n> The implementation certainly needs to be smarter about multiple processes\n> that might be trying to write to it at the same time. I have an idea for\n> this that I like better than using sqlite.\n> \n> However, development of this is on hold for a bit while we work out\n> whether we need to get human subject review on this because we're in an\n> academic setting.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/81#issuecomment-102549803.\n @ellisonbg told us that at calpoly it is particularly complicated as soon\nas you plan on sharing the results. Which we obviously want to do with the\ntracked project. And we want to be sure that we don't start working on that\ntoo early.\n\nAlso anyway I think that the data collection should be done in a manner\nwhich is not Jupyter-specific, and could work in a pure-python setting\n(given the right configuration). So we can still work on that separately,\ncause I suppose we each like to track our own usage if features. The\nquestion of wether we share/collect this data is othogonal.\n\nOn Fri, May 15, 2015 at 6:13 PM, Nathaniel J. Smith <\nnotifications@github.com> wrote:\n\n> Anything you do will have _some_ locking mess, because locking is basically\n> impossible to get right in all situations (remote file systems, etc.), so\n> oh well, not much to be done.\n> \n> Re human subjects: the document you need is here:\n> http://cphs.berkeley.edu/review.html\n> \n> The key point I believe is that you only need to do paperwork if your\n> project is \"designed to develop or contribute to generalizable knowledge\",\n> i.e. if your goal is to do science and learn about how things work in\n> general, _not_ if your goal is to study a specific entity. (I think of this\n> as the \"would a journal care about my results\" test.) They give the\n> specific example that if you measure how well a class learned because you\n> want to know if your curriculum works, then this is not \"human subjects\n> research\"; if you measure how well a class learned because you want to know\n> how curriculums work in general, then this is human subjects research.\n> \n> In our case, we don't care about writing journal articles about general\n> principles for software design, we just want to know what the right thing\n> to do is in our specific situation. Ergo, not human subjects research.\n> \n> If you want to confirm this interpretation, then there's a phone number to\n> call and talk to an expert, and a procedure for getting the result in\n> writing, given here:\n> http://cphs.berkeley.edu/faqs.html#a1\n> On May 15, 2015 4:51 PM, \"Thomas Kluyver\" notifications@github.com\n> wrote:\n> \n> > The implementation certainly needs to be smarter about multiple processes\n> > that might be trying to write to it at the same time. I have an idea for\n> > this that I like better than using sqlite.\n> > \n> > However, development of this is on hold for a bit while we work out\n> > whether we need to get human subject review on this because we're in an\n> > academic setting.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/pull/81#issuecomment-102549803.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/81#issuecomment-102558889.\n Well, it depends on the data, how you gathered it, what your original\nproposal said, what you told the participants, etc. If you have videos of\nminors in jail talking about sensitive subjects or people's health records\nor something then you have a massive problem; at the other end of the scale\nthe IRB doesn't care at all about sharing of data that doesn't count as\nhuman subjects data. It just depends.\n\nI can call that number on Monday for you if you want to get a definitive\nanswer :-).\nOn May 15, 2015 7:20 PM, \"Matthias Bussonnier\" notifications@github.com\nwrote:\n\n> @ellisonbg told us that at calpoly it is particularly complicated as soon\n> as you plan on sharing the results. Which we obviously want to do with the\n> tracked project. And we want to be sure that we don't start working on that\n> too early.\n> \n> Also anyway I think that the data collection should be done in a manner\n> which is not Jupyter-specific, and could work in a pure-python setting\n> (given the right configuration). So we can still work on that separately,\n> cause I suppose we each like to track our own usage if features. The\n> question of wether we share/collect this data is othogonal.\n> \n> On Fri, May 15, 2015 at 6:13 PM, Nathaniel J. Smith <\n> notifications@github.com> wrote:\n> \n> > Anything you do will have _some_ locking mess, because locking is\n> > basically\n> > impossible to get right in all situations (remote file systems, etc.), so\n> > oh well, not much to be done.\n> > \n> > Re human subjects: the document you need is here:\n> > http://cphs.berkeley.edu/review.html\n> > \n> > The key point I believe is that you only need to do paperwork if your\n> > project is \"designed to develop or contribute to generalizable\n> > knowledge\",\n> > i.e. if your goal is to do science and learn about how things work in\n> > general, _not_ if your goal is to study a specific entity. (I think of\n> > this\n> > as the \"would a journal care about my results\" test.) They give the\n> > specific example that if you measure how well a class learned because you\n> > want to know if your curriculum works, then this is not \"human subjects\n> > research\"; if you measure how well a class learned because you want to\n> > know\n> > how curriculums work in general, then this is human subjects research.\n> > \n> > In our case, we don't care about writing journal articles about general\n> > principles for software design, we just want to know what the right thing\n> > to do is in our specific situation. Ergo, not human subjects research.\n> > \n> > If you want to confirm this interpretation, then there's a phone number\n> > to\n> > call and talk to an expert, and a procedure for getting the result in\n> > writing, given here:\n> > http://cphs.berkeley.edu/faqs.html#a1\n> > On May 15, 2015 4:51 PM, \"Thomas Kluyver\" notifications@github.com\n> > wrote:\n> > \n> > > The implementation certainly needs to be smarter about multiple\n> > > processes\n> > > that might be trying to write to it at the same time. I have an idea\n> > > for\n> > > this that I like better than using sqlite.\n> > > \n> > > However, development of this is on hold for a bit while we work out\n> > > whether we need to get human subject review on this because we're in an\n> > > academic setting.\n> > > \n> > > \u2014\n> > > Reply to this email directly or view it on GitHub\n> > > https://github.com/jupyter/notebook/pull/81#issuecomment-102549803.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/pull/81#issuecomment-102558889.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/81#issuecomment-102565442.\n Nathaniel, It would be great if you wanted to reach out to the Berkeley\nIRB. Eventuall, we would also have to involve the IRB at Cal Poly as well,\nbut this would a good start.\n\nThe other point that I found with our IRB is that if we were simply\ngathering data that we would use _privately_ to improve the software, that\nwould not meet the \"generalizable knowledge critieria\" and no review was\nrequired. However, when I told them the project/software was open source\nand that we should want to share the data/results with the broader\ncommunity of the project, they said \"that is publication\" so IRB approval\nand human subject consent would be required.\n\nIf we are OK defining a small set of \"researchers\" that will be able to see\nthe data and results, but not sharing anything with the public, I think we\nhave a good amount of freedom. But the second we want to share the\ninformation, I think we have to bring the IRB in. One question is this: can\nwe limit access to the raw data to a small set of defined \"researchers\" and\nshare summaries of the results publicly with out IRB review. Based on my\nprevious discussions with them, my guess is not.\n\nThe other big red flag is that we are talking about creating a general\nPython API that any Python code can call to gather information. While we\nmay not ourselves gather sensitive human subject data, other libraries\ncould use those APIs to gather than information. If _we_ ever deployed the\nnotebook with central data collection enabled (if we don't, none if this is\nuseful) we would need to ensure that third party python packages are not\nusing our API s to send us sensitive data.\n\nCheers,\n\nBrian\n\nOn Sat, May 16, 2015 at 2:19 AM, Nathaniel J. Smith <\nnotifications@github.com> wrote:\n\n> Well, it depends on the data, how you gathered it, what your original\n> proposal said, what you told the participants, etc. If you have videos of\n> minors in jail talking about sensitive subjects or people's health records\n> or something then you have a massive problem; at the other end of the scale\n> the IRB doesn't care at all about sharing of data that doesn't count as\n> human subjects data. It just depends.\n> \n> I can call that number on Monday for you if you want to get a definitive\n> answer :-).\n> On May 15, 2015 7:20 PM, \"Matthias Bussonnier\" notifications@github.com\n> wrote:\n> \n> > @ellisonbg told us that at calpoly it is particularly complicated as soon\n> > as you plan on sharing the results. Which we obviously want to do with\n> > the\n> > tracked project. And we want to be sure that we don't start working on\n> > that\n> > too early.\n> > \n> > Also anyway I think that the data collection should be done in a manner\n> > which is not Jupyter-specific, and could work in a pure-python setting\n> > (given the right configuration). So we can still work on that separately,\n> > cause I suppose we each like to track our own usage if features. The\n> > question of wether we share/collect this data is othogonal.\n> > \n> > On Fri, May 15, 2015 at 6:13 PM, Nathaniel J. Smith <\n> > notifications@github.com> wrote:\n> > \n> > > Anything you do will have _some_ locking mess, because locking is\n> > > basically\n> > > impossible to get right in all situations (remote file systems, etc.),\n> > > so\n> > > oh well, not much to be done.\n> > > \n> > > Re human subjects: the document you need is here:\n> > > http://cphs.berkeley.edu/review.html\n> > > \n> > > The key point I believe is that you only need to do paperwork if your\n> > > project is \"designed to develop or contribute to generalizable\n> > > knowledge\",\n> > > i.e. if your goal is to do science and learn about how things work in\n> > > general, _not_ if your goal is to study a specific entity. (I think of\n> > > this\n> > > as the \"would a journal care about my results\" test.) They give the\n> > > specific example that if you measure how well a class learned because\n> > > you\n> > > want to know if your curriculum works, then this is not \"human subjects\n> > > research\"; if you measure how well a class learned because you want to\n> > > know\n> > > how curriculums work in general, then this is human subjects research.\n> > > \n> > > In our case, we don't care about writing journal articles about general\n> > > principles for software design, we just want to know what the right\n> > > thing\n> > > to do is in our specific situation. Ergo, not human subjects research.\n> > > \n> > > If you want to confirm this interpretation, then there's a phone number\n> > > to\n> > > call and talk to an expert, and a procedure for getting the result in\n> > > writing, given here:\n> > > http://cphs.berkeley.edu/faqs.html#a1\n> > > On May 15, 2015 4:51 PM, \"Thomas Kluyver\" notifications@github.com\n> > > wrote:\n> > > \n> > > > The implementation certainly needs to be smarter about multiple\n> > > > processes\n> > > > that might be trying to write to it at the same time. I have an idea\n> > > > for\n> > > > this that I like better than using sqlite.\n> > > > \n> > > > However, development of this is on hold for a bit while we work out\n> > > > whether we need to get human subject review on this because we're in\n> > > > an\n> > > > academic setting.\n> > > > \n> > > > \u2014\n> > > > Reply to this email directly or view it on GitHub\n> > > > <https://github.com/jupyter/notebook/pull/81#issuecomment-102549803\n> > > > .\n> > > \n> > > \u2014\n> > > Reply to this email directly or view it on GitHub\n> > > https://github.com/jupyter/notebook/pull/81#issuecomment-102558889.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/jupyter/notebook/pull/81#issuecomment-102565442.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/81#issuecomment-102592837.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I did a bit of looking into how Mozilla handles this, and I'll leave some links here for reference:\n\nThey collect histograms: https://developer.mozilla.org/en-US/docs/Mozilla/Performance/Adding_a_new_Telemetry_probe\n\nAnd send them back as JSON documents (~one per day): https://ci.mozilla.org/job/mozilla-central-docs/Tree_Documentation/\n\nPublic aggregated data: https://telemetry.mozilla.org\n\n(Edit: they also expose the data being collected by a given browser session client-side at about:telemetry. For some reason github refuses to let me link to it, but if you're in firefox you can paste that into your address bar and see some fun stuff :-))\n\nThe originally included [no unique installation id](https://blog.mozilla.org/tglek/2011/05/13/firefox-telemetry/), but eventually [changed their mind](http://robertovitillo.com/2014/12/19/clientid-in-telemetry-submissions/) and started including one (except for specific data that is deemed too sensitive and thus split off into separate unlabeled submissions), because they found the [restriction was too cumbersome](https://mail.mozilla.org/pipermail/firefox-dev/2014-December/002580.html).\n\nOne thing I was surprised by, though I guess it makes sense, is that they _unconditionally_ send a ping (complete with unique per-installation ID) at (1) first startup, (2) if/when a user opts _out_ of telemetry. (And these pings include some basic data -- Firefox version, OS, etc.) I guess this makes sense -- there isn't really much chance of a privacy violation in knowing that \"someone somewhere installed Firefox and that's all they want us to know\", and it's crucial to extrapolating from the data they do get to the overall user population.\n\nAn internal planning document with lots of interesting details on e.g. metrics they want to track: https://docs.google.com/document/d/1IGpzsYGi_sq3YFQDAPyKOkU_BKvXAC95fZYA2i4ceVs/edit#\n This machinery will now be done in https://github.com/njsmith/sempervirens/\n","> If I'm correct in understanding that this is the way things are meant to be, are there any alternative solutions so I can execute code on server, close my remote computer, come back to it hours later and still see the progress thats been made?\n\nWe are aware of the limitation, what we suggest for now is to save the value and display only once you are connected.  It's often not hard to refactor code to do that. \n\nWe are working on rewiring the infrastructure to allow this kind of reconnection, but it's far from easy. \n\nAs it's tracked in many other places, I'm going to close the issues, but feel free to keep asking quesions. \n Any progress about this issue?\n","Do you want the reference to work in the live notebook itself, or a PDF export?\n Ideally both. For me the PDF export (and markup export) are more important.\n FYI, this is for a book I'm writing. Other authors have similar problems. What I didn't realize when posting the original issue is that ideally you'd be able to reference across multiple notebooks, which seems quite tricky.\nIf it would possible to solve this for a single notebook, maybe there would be a way to say \"this is chapter X\" so that figures would be numerated Figure X.Y.\n\nThere are a bunch of people writing books, for example for O'Reilly, and running in similar issues.\nMaybe O'Reilly could help with this? You worked with them before, right?\n One idea to do this is adding a new image writer (see IPython.display.set_matplotlib_formats and what it does...), which wraps the matplotlib image by sending markdown/HTML down the wire instead of the image itself. This markdown would embedded the image in a data URL (which currently does not diplay in the notebook: https://github.com/jupyter/notebook/issues/789) and get the caption from a global variable.\n\nlike `\n\n```\nset_caption(\"...\")\nplot(...)\n...\n```\n\nAnother idea is to add a special function which does the image display. So producing a plot becomes:\n\n```\n# without `%%maptlotlib inline`!\ndisplay_plot(fig, \"Caption\")\n```\n\nAnd this would then produce a html/markdown string with the image embedded in the data URL and this is then displayed.\n\nIf it is possible to add a context while doing the nbconvert, then you could --as a workaround for the markdown data URL problem form above--  send the caption as html and the image as normal image while in a normal notebook and while in the nbconvert process sent a markdown with the embedded data URL formatted like knitr does it. This then becomes a ipnb -> markdown -> latex -> pdf (the last steps via pandoc).\n\n[Or maybe I misread the bugreport and it is possible to send data URLs with html/markdown content from the kernel, but not from the markdown cells]\n So what I would suggest is writing a custom display-formatter that specialize figures. \n\nTechnically we can likely add the equivalent of a `_repr_rst_` if rest is the thing you like to use. THen you can do whatever you like from your code. You could even inject this repr in startup.py, so no need to instanciate it in the notebook. \n\nNbconvert will  need to be modifed to pick-up the rst format at conversion time, buts that's likely doable. \n\nBeyond generating only the rest repr, you can also attach metadata to the object, to \"fix\" the rst at conversion time.\n ``` python\nfrom IPython.core.formatters import BaseFormatter\nfrom traitlets import Unicode\n\nclass RESTFormatter(BaseFormatter):\n    \"\"\"An ReST formatter.\n    \"\"\"\n    format_type = Unicode('text/rst')\n    #print_method = ObjectName('_repr_rest_') #optionnal if custom object later\n\nrf = RESTFormatter()\n\nip = get_ipython()\nip.display_formatter.formatters['text/rst'] = rf\n\nclass Foo():pass\n\ndef f(*args, **kwargs):\n    return \"\"\"\n.. figure::\n    :your:\n\n    Figure here\n\"\"\", {'meta':'data'}\n\nrf.for_type(Foo, f)\n```\n\n(too be adapted)\n\nwill make the following:\n\n```\nIn[1]: Foo()\n```\n\nto be the following in the ipynb:\n\n```\n  \"outputs\": [\n    {\n     \"data\": {\n      ...\n      \"text/rst\": [\n       \"\\n\",\n       \".. figure::\\n\",\n       \"    :your:\\n\",\n       \"\\n\",\n       \"    Figure here\\n\"\n      ]\n     },\n     ...\n     \"metadata\": {\n      \"text/rst\": {\n       \"meta\": \"data\"\n      }\n     },\n    ...\n    }\n   ],\n   \"source\": [\n    \"ff\"\n   ]\n  }\n```\n\nThat would be your part to do I guess (or even publish a ipython-RST-formatter on PyPI)\n\nNext step need custom templates/exporter for nbviewer, possibly using master; is using master a problem ?\n I'm going to tag this as \"Docs\", \nit's technically not notebook, it's both kernelside (in your case IPython)  coupled with nbconvert,\nbut it's likely a good place to start for someone who wants to improve the docs, and a nice use case.\n I'm already using nbconvert master (that's what you meant, right)? I needed to fix some bugs ;)\nI need to think through your solution, but that sounds doable.\n\nPossibly stupid question: If this is done in the RST formater, then other output formats couldn't use the info, right?\n(clickable?) figure references make sense for latex, html and RST, at least.\n So I'm probably gonna do this for latex first.\n@Carreau, I have to admit I don't understand what is going on in your example.\nHow would I use the formatter?\nIn a custom preprocessor?\nI tried understanding this solution:\nhttp://blog.juliusschulz.de/blog/ultimate-ipython-notebook\nbut that requires manually adding metadata in the cell for each figure (and then changing the latex template).\n\nIs there any documentation on this?\nI was hoping to find some here: http://ipython.readthedocs.org/en/stable/development/index.html but didn't...\n Is there still no movement on figure captions in jupyter notebooks? Note that I disagree with @Carreau that this is a kernel issue. ReST is also not the only output one would want to support that \u2014 it is also useful for [html](https://www.w3schools.com/tags/tag_figcaption.asp). imho [this post](http://blog.juliusschulz.de/blog/ultimate-ipython-notebook#figures) by Julius Schulz comes closest to what one would want: captions for arbitrary cells that *any* converter could come and deal with as it pleases. All we would need is:\r\n\r\n- official approval by the Jupyter team of the \"caption\" cell metadata for figure captions, and\r\n- a first-class markdown editor for said metadata (rather than having to use the metadata JSON editor.\r\n\r\nThe converters would follow. Are there any prospects for such support?","Need tests. \n Tests added\n","Need tests. \n Tests added\n :-( need rebase \n It's because of the test, one sec...\n @Carreau rebased\n","Sent you a PR with tests. \n Merged\n","> closes #793\n\nWell no it does not closes, move up-down will still be broken, but I'm fine deprecating. \nThough it will still stays all through the 4.x series, and all will break for 5.0+.\n\nCan you though expand the deprecation description to say since when it's deprecated, (4.1) and when it will be removed (5.0) ?\n\nThanks !\n Sure, see last commit\n Merging once travis go green. \nWe will get 4.1 beta by Friday !\n Is there a replacement for this? Apparently it's being used (@williamstein uses it quite a lot in SageMathCloud, for example). I now retract my need for this -- I thought we were using it in SMC, but we're not.","Thanks !\n","I submitted some changes in a PR https://github.com/Carreau/jupyter_notebook/pull/8\n > I submitted some changes in a PR Carreau#8\n\nAlready merged.  Thanks !\n Thanks!\n","Thanks!\n","@dsblank can you help with this?\n Indeed, Calico comes with a Java interpreter. However, this is not just a regular system, and might not be what you want (a generic, standard Java system). This Java interpreter is written in Java, but run by .NET/Mono, to integrate with the rest of Calico.\n\nYou will need to install Calico for Mac, Windows, or Linux here:\nhttp://calicoproject.org/Calico_Download\n\nThen, you need to make a kernelspec for Java:\n`./calico --create-kernelspec --display-name=\"Calico Java\" --nographics --lang=java --only`\n\nThat will make the calico_java kernelspec. You can then use it from console/qtconsole, or the notebook:\n\n```\n$ ipython console --kernel calico_java\nLoading Calico version 4.0.0...\nIPython Console 3.1.0\nIn [1]: x = 1;\nIn [2]: System.out.println(x);\n1\n```\n\nIt uses a special form of Java called DynamicJava... types are optional, but you can't change the type once set.\n\nI do plan on making a more standard Java kernel at some point. Also, you might be interested in Calysto Processing, that converts Java to Javascript.\n\nFollowup questions and comments to: https://bitbucket.org/ipre/calico/\n\nThanks!\n Sorry, I think I didn't explain well about what I mean.\nWe already add calico into jupyter and we can load the kernel in the notebook web. We can run java program now, Our question is we don't know how to add a java class path to import our .jar files.\nThank you!\n This highlights a bigger issue to me, which is of setting environment variables. Are kernels launched with the same `env` as the notebook server?\n The kernelspec can specify extra environment variables for kernels - these are added to a copy of the notebook server environment variables. If you want to do more complex things (like adding directories to `$PATH`) the kernelspec can point to a script which modifies its environment variables and then starts the actual kernel.\n @liushiqi9 Let's take these questions out of jupyter issue tracker, as this is a specific kernel question. (Briefly, this isn't regular Java, it doesn't sound like you want to integrate with .NET, so this isn't probably what you want. Wait for a real Java kernel.)\n","moar test moar betta\n","rebased, tests should fail. \n Thank you @Carreau! I have been waiting for so long for this functionality to be back.\n","The `raise ... from` issue still appears with tornado==4.1.\n\n```\n$ python2\n>>> import tornado\n>>> tornado.version\n'4.1'\n>>> import tornado.platform.asyncio\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/usr/local/lib/python2.7/dist-packages/tornado/platform/asyncio.py\", line 23, in <module>\n    import asyncio\n  File \"/usr/local/lib/python2.7/dist-packages/asyncio/__init__.py\", line 9, in <module>\n    from . import selectors\n  File \"/usr/local/lib/python2.7/dist-packages/asyncio/selectors.py\", line 39\n    \"{!r}\".format(fileobj)) from None\n                               ^\nSyntaxError: invalid syntax\n```\n\nNevertheless, with tornado==4.1 the notebook starts.\n My setup was in a bad state. Exchanging asyncio with trollius helped.\n\n```\n$ sudo pip2 uninstall asyncio\n$ sudo pip2 install trollius\n```\n\nI cannot find a requirement of asyncio in tornado or notebook, so it might have been my own setup that was wrong. Thus I am closing the issue. \n Thanks, I think it should also be taken care by python-requires option in tornado that should say it can only be installed on 3.5+ if it is the case. \n","Perfect thanks, we can refine later to have a better logic that does the same things only if all the selected cells do not have the same type !\n","Too long  still. Closing. \n","I'm not sure I understand which corner, and which modifcation you have made. \n\nLikely one of these files, and recompile the css with `python setup.py css`\n\n```\n$ ls -1 notebook/**/less/*.less | grep -v component\nnotebook/static/auth/less/login.less\nnotebook/static/auth/less/logout.less\nnotebook/static/auth/less/style.less\nnotebook/static/base/less/error.less\nnotebook/static/base/less/flexbox.less\nnotebook/static/base/less/mixins.less\nnotebook/static/base/less/page.less\nnotebook/static/base/less/style.less\nnotebook/static/base/less/variables.less\nnotebook/static/edit/less/edit.less\nnotebook/static/edit/less/menubar.less\nnotebook/static/edit/less/style.less\nnotebook/static/notebook/less/ansicolors.less\nnotebook/static/notebook/less/cell.less\nnotebook/static/notebook/less/celltoolbar.less\nnotebook/static/notebook/less/codecell.less\nnotebook/static/notebook/less/codemirror.less\nnotebook/static/notebook/less/commandpalette.less\nnotebook/static/notebook/less/completer.less\nnotebook/static/notebook/less/highlight-refs.less\nnotebook/static/notebook/less/highlight.less\nnotebook/static/notebook/less/kernelselector.less\nnotebook/static/notebook/less/menubar.less\nnotebook/static/notebook/less/notebook.less\nnotebook/static/notebook/less/notificationarea.less\nnotebook/static/notebook/less/notificationwidget.less\nnotebook/static/notebook/less/outputarea.less\nnotebook/static/notebook/less/pager.less\nnotebook/static/notebook/less/quickhelp.less\nnotebook/static/notebook/less/renderedhtml.less\nnotebook/static/notebook/less/savewidget.less\nnotebook/static/notebook/less/searchandreplace.less\nnotebook/static/notebook/less/style.less\nnotebook/static/notebook/less/style_noapp.less\nnotebook/static/notebook/less/textcell.less\nnotebook/static/notebook/less/toolbar.less\nnotebook/static/notebook/less/tooltip.less\nnotebook/static/notebook/less/variables.less\nnotebook/static/terminal/less/terminal.less\nnotebook/static/tree/less/altuploadform.less\nnotebook/static/tree/less/style.less\nnotebook/static/tree/less/tree.less\n```\n ![screen shot 2015-12-14 at 12 57 27 pm](https://cloud.githubusercontent.com/assets/15021842/11790764/06c8c2cc-a263-11e5-84b3-fe9f1d150310.png)\n\nsorry if I was too vague. I was referring to the corners where the arrows are pointed to. This is my current setup and I would like to make those rounded. \n ```\ndiv#notebook-container {\n    border-radius: 25px;\n}\n```\n\nIf you are on firefox/chrome, you should look at how to use the web inspector, that give you tools to click on element to find out which css selector to use:\n\n![plop](https://cloud.githubusercontent.com/assets/335567/11791495/ad11e152-a2a1-11e5-91f1-1ec648703d5f.gif)\n (sidenote, you can just add that to your `custom.css` file, without editing any of IPython installed files)\n Awesome thanks so much!\n","Awesome, tested/works- thanks\n","It used to be a safe assumption that the dir existed, but it isn't anymore. #84 removes that assumption.\n","Tested and works as advertised. Great job on 4.1, @Carreau!\n","Hm. I can take a look at this later today.\n @parleur might have a look too. Just coordinate with each other. \n Sure! @parleur, let me know if you get a chance to start working on it before I do and I can help out on any pull request that you have. I will bing you on this issue when I start looking into it.\n Starting now. As I am almost green on this part of codebase feel free to PR before me.\n Just to be clear the purpose here is to restraint s&r only on selected cells. \n Yes!\n\nI believe @Carreau opened this as part of the work we are doing to polish up multiselect.\n",":+1: \n",":tada: \n :cake:\n This was already merged as c116f33b4f99f01c9d22f1769fd819635ddc14cd\n","In what sort of deployment? The KernelManager selects the ports, so you can use a custom KernelManager to select ports in a different way. You would just set the various port attributes on the KM:\n\n``` python\np = 5000\nkm.hb_port = p+1\nkm.shell_port = p+2\nkm.control_port = p+3\nkm.stdin_port = p+4\nkm.iopub_port = p+5\n```\n\nYou cannot generally use a config file to specify kernel ports, since it would mean that all kernels would try to use the same ports and collide. That is, unless you are starting one kernel per IP. You can tell it to use ipc instead of tcp with:\n\n``` python\nc.KernelManager.transport = 'ipc'\n```\n","`.entries()` seem to not be supported by casper on travis, I integrated that into my branch in #830 and refactor a bit in a separate file and without using `.entries()`, it was a bit painful, so I didn't asked you to do it.\n","Works as advertised !\n\nThanks, \nI'm going to merge and open a separate issues for tests !\n","I'm happy to take a look at this in like 6 hours.\n\nIf you think you can get to this before I do, @parleur, feel free to do so!\n I am off for today. This one is yours.\n Captainsafia is forbidden to touch anything, until she is done with exams.\n @parleur is on it. \n","OK. I'm on this.\n This is marked 4.2 so no urgency on this question I guess. But I am having trouble figuring out how to write good tests for this without having to refactor the code.\n\nI was originally thinking that I could just test `get_cells` but it isn't exposed via the export so I'm a bit unsure of what to do.\n","I encountered this issue before but I am not sure whether of what is the right way do address this. Indeed, if we do what you propose, a user may also be rightfully surprised that the behavior differs when\n- running two cells at once with the run-all action on the one hand\n- running the same code in a single cell on the other hand.\n I think I'm mostly concerned about seeing differences in behavior if user selects `Run All` vs executing the same set of cells but one by one manually very quickly.\n\nThe latter would then need to be smart to know that there is a cell in execution, and maybe others waiting, and place itself in a promise.\n I view the immediate submission of requests as a very important feature. We mustn't wait for the previous execution to complete before sending the next request, so chaining futures in Run All doesn't sound good to me. It also seems like a violation that code in a subsequent cell requires frontend interaction after the result of a previous cell.\n\nIf you depend on things like this, only you can know what needs to be done before subsequent executions are allowed, so you would really need to disable or override the Run All action to behave differently.\n\nWhat if Cell.execute returns a Future that resolves immediately, and your custom UI overrides that to resolve the Future at a later time? Would that give you the hook you need?\n > I view the immediate submission of requests as a very important feature. We mustn't wait for the previous execution to complete before sending the next request, so chaining futures in Run All doesn't sound good to me. It also seems like a violation that code in a subsequent cell requires frontend interaction after the result of a previous cell.\n\nI would agree with you completely if we were just talking about notebooks where all cells are eval/response type. Meaning, once the response reaches the notebook, that cell is really done.\n\nHTML and JS magics, the COMM channel and Widgets introduce the likelihood of that more has to be executed before a cell could be consider fully done. \n\nConsider ipywidgets as another example.  I don't have concrete proof, but I think that it currently by-passes this issue all-together because it preloads all its widgets JS code ahead of time on notebook page load. If ipywidgets did not do this, there would be no guarantees that the widgets would be available for next cell's result due to async AMD loads. Since it is a close-set of widgets, it is able to implement the work-around, although it does so by impacting load times of all notebook pages regardless if they have widgets or not (for the record, declarativewidgets does the same).\n\nBelief me that I understand that this is not a simple issue. Changing the way cells are executed is changing the core of the notebook. There is also the question of how do you really know when a cell is really done. Even harder if the cell involves async loading of JS code. \n\nI think your suggestion of making Cell.execute return a promise and allow overriding might be a start, but it also is punting on the issue. I personally don't have a good solution to offer either, but do think that more discussion should take place.\n > If ipywidgets did not do this, there would be no guarantees that the widgets would be available for next cell's result due to async AMD loads\n\nEven the preloaded Javascript is reloaded asynchronously.\n\nI agree with @minrk that the immediate submission is important.  I think the rate of execution is something that should be controlled by the kernel, unimpeded by the client.  If you need the client to have a say in the rate at which executions occur, why not manually halt the executions while waiting for a message from the front-end?  \n\nAlternatively, alter the client to execute differently, as Min suggests.\n Maybe I'm misreading this code... \nhttps://github.com/ipython/ipywidgets/blob/master/ipywidgets/static/widgets/js/utils.js#L79\nbut it seems to me that pre-registered widgets (which all ipywidgets are) causes the utils.loadClass to resolve immediately.\n\n> If you need the client to have a say in the rate at which executions occur, why not manually halt the executions while waiting for a message from the front-end?\n\nIf you tell me how I can do that... it would solve all my problems! If you are referring to putting some code on the Python side to block until a message is received... I tried that approach once. Does not work for several reasons:\n1. The kernel is blocked `busy` and the shell socket is not processed\n2. Even if we could un-block it, the frontend message could still be behind other cells in the request queue.\n > Maybe I'm misreading this code...\n\nYes I think you are, because resolving immediately != synchronous execution.  See [this jdfiddle](http://jsfiddle.net/daf5aLzp/2/)\n So it is more of a timing problem then. Since the code is preloaded, the callback is sure going to get invoked sooner than if we had to load the files remotely. And that might be fast enough to not see the issues that I'm bringing up here.\n > 1. Even if we could un-block it, the frontend message could still be behind other cells in the request queue.\n\nGood point, but that would only apply to messages that are subject to the execution queue, right?  So if you were able to hold the kernel, by blocking, and you manually listened for comm messages (which I don't even know if this is possible right now, but if it is, it's probably ugly), the comm messages wouldn't be subject to that queue and could be received immediately, right?\n As far as I know... both cell execution and `comm.send` messages go through `kernel.send_shell_message`. What I observed using Chrome's WebSocket inspector was my frontend comm messages all after the other cell execution.\n","LGTM\n","@aroberge Thanks for the suggestion. Personally, I never noticed that printing defaults to B&W whether from the Print Preview menu option or the browser print menu (at least on Firefox).\n\n@carreau @ellisonbg Is there a setting that can be easily changed to enable color printing? If so, it would seem reasonable to document here and the user docs.\n Hmm, I don't think we set anything that makes it BW. We will have to look\ninto this.\n\nOn Sat, Dec 12, 2015 at 3:54 AM, Carol Willing notifications@github.com\nwrote:\n\n> @aroberge https://github.com/aroberge Thanks for the suggestion.\n> Personally, I never noticed that printing defaults to B&W whether from the\n> Print Preview menu option or the browser print menu (at least on Firefox).\n> \n> @carreau https://github.com/carreau @ellisonbg\n> https://github.com/ellisonbg Is there a setting that can be easily\n> changed to enable color printing? If so, it would seem reasonable to\n> document here and the user docs.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/840#issuecomment-164142268.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I've installed Jupyter + IPython using the Anaconda Python distribution.  In my system, the relevant css file is (if I am not mistaken):\nAnaconda3/pkgs/notebook-4.06-py34_0/Lib/site-packages/notebook/static/style/style.min.css\n\nEdit: from memory, there were two places where I removed code from the css file to print everything in color.  The first place was near the `@media print` declaration; the second was a setting for html tables if I recall correctly.\n This is a bootstrap thing that include a `print.less` with `!important`. \nIt's not easy to get rid of, but we can try. \n Any progress on this?\nLet me bump this one - it's really important to me.\n\nI'm using Jupyter (+bash_kernel) to create some labs (Docker) where I use Jupyter to create the lab and then create a PDF to distribute to the students-*.\n\nThose documents would be much more readable in colour.\n\nThanks for a great tool !\n- - Putting **Jupyter/bash_kernel** combination into the hands of students would be confusing and unworkable due to long-running or interactive commands, so I use it just as my preparation tool - and it's fantastic for that.\n  \n  https://github.com/mjbright/jupyter_notebooks/tree/master/2016-Feb_Docker_Build_Lab\n @mjbright have you tried the conversion to PDF via latex ? ~~(it likely fail because of some ansi escape sequence but that's a bug that should be opened)~~(opened as https://github.com/jupyter/nbconvert/issues/228)\n\nAre you afraid of a custom IPython build ? Basically set-up a dev environment, \nmodify `<repo root>/notebook/static/components/bootstrap/less`, to remove  line 13 `@import \"print.less\";`, and recompile CSS (python setup.py css)\n\nThat **should** be enough (understand it works for me locally), unfortunately that something that make the build process extremely inconvenient for downstream (like Debian) as then we use a **modified** version of our dependencies.\n Hi Matthias,\n\nI did try briefly PDF via latex (quite a week I don't even remember if it\nwas under RHEL7, Ubuntu-trusty or Win8 that I tried) but without early\ninstallation success I abandoned - because of soe lab setup constraints.\nI'll try again with my Ubuntu (a Vagrant box) ... when I have time (?).\n\nAfraid of a custom IPython build? A little (time wise) but i'll consider\nthat also.\nMind you why are we talking about IPython?\n\nThanks for the suggestions,\nMike.\n\nOn 4 February 2016 at 07:21, Matthias Bussonnier notifications@github.com\nwrote:\n\n> @mjbright https://github.com/mjbright have you tried the conversion to\n> PDF via latex ? (it likely fail because of some ansi escape sequence but\n> that's a bug that should be opened)\n> \n> Are you afraid of a custom IPython build ? Basically set-up a dev\n> environment,\n> modify <repo root>/notebook/static/components/bootstrap/less, to remove\n> line 13 @import \"print.less\";, and recompile CSS (python setup.py css)\n> \n> That _should_ be enough (understand it works for me locally),\n> unfortunately that something that make the build process extremely\n> inconvenient for downstream (like Debian) as then we use a _modified_\n> version of our dependencies.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/840#issuecomment-179667017.\n Hi, following a suggestion somewhere on StackOverflow, I think, I modified\r\nthat equivalent path on my Ubuntu system.\r\n\r\nThe following context diff shows what I tried (out of informed ignorance).\r\nRestarting Jupyter didn't improve the situation.\r\n\r\nJust in case someone has a quick hack to suggest ...\r\n\r\n```\r\n---\r\n\r\n/home/vagrant/anaconda3/pkgs/notebook-4.1.0-py35_0/lib/python3.5/site-packages/notebook/static/style/style.min.\r\ncss     2016-02-04 05:37:14.921859360 +0000\r\n\r\n---\r\n\r\n/home/vagrant/anaconda3/pkgs/notebook-4.1.0-py35_0/lib/python3.5/site-packages/notebook/static/style/style.min.\r\ncss.orig        2016-02-04 05:35:56.893856260 +0000\r\n\r\n---\r\n\r\n**\\* 192,198 ****\r\n\r\n```\r\n*:before,\r\n\r\n*:after {\r\n\r\n  background: transparent !important;\r\n```\r\n\r\n!     /\\* To allow colour printing: color: #000 !important;*/\r\n\r\n```\r\n  box-shadow: none !important;\r\n\r\n  text-shadow: none !important;\r\n\r\n}\r\n```\r\n\r\n--- 192,198 ----\r\n\r\n```\r\n*:before,\r\n\r\n*:after {\r\n\r\n  background: transparent !important;\r\n```\r\n\r\n!     color: #000 !important;\r\n\r\n```\r\n  box-shadow: none !important;\r\n\r\n  text-shadow: none !important;\r\n\r\n}\r\n```\r\n\r\n---\r\n\r\n**\\* 242,252 ****\r\n\r\n```\r\n.dropup > .btn > .caret {\r\n\r\n  border-top-color: #000 !important;\r\n\r\n}\r\n```\r\n-   /\\* To allow colour printing:\r\n  \r\n  .label {\r\n  \r\n    border: 1px solid #000;\r\n  \r\n  }\r\n-   */\r\n  \r\n  .table {\r\n  \r\n    border-collapse: collapse !important;\r\n  \r\n  }\r\n\r\n--- 242,250 ----\r\n```\r\n\r\nOn 12 December 2015 at 19:45, Andr\u00e9 Roberge notifications@github.com\r\nwrote:\r\n\r\n> I've installed Jupyter + IPython using the Anaconda Python distribution.\r\n> In my system, the relevant css file is (if I am not mistaken):\r\n> \r\n> Anaconda3/pkgs/notebook-4.06-py34_0/Lib/site-packages/notebook/static/style/style.min.css\r\n> \r\n> \u2014\r\n> Reply to this email directly or view it on GitHub\r\n> https://github.com/jupyter/notebook/issues/840#issuecomment-164175466.\r\n > Mind you why are we talking about IPython?\n\ngah, old  habits and it was late at night, I was of course trying to say `Jupyter Notebook`\n\n> Hi, following a suggestion somewhere on StackOverflow, I think, I modified\n> that equivalent path on my Ubuntu system.\n\nForce reload the page (Ctrl-Shift-R, likely) the browsers can have agressive caching.\n La honte (duh!) for Ctrl-Shift-R !\nThanks Matthieu, I have colour printing now !!\n\nOn 4 February 2016 at 18:15, Matthias Bussonnier notifications@github.com\nwrote:\n\n> Mind you why are we talking about IPython?\n> \n> gah, old habits and it was late at night, I was of course trying to say Jupyter\n> Notebook\n> \n> Hi, following a suggestion somewhere on StackOverflow, I think, I modified\n> that equivalent path on my Ubuntu system.\n> \n> Force reload the page (Ctrl-Shift-R, likely) the browsers can have\n> agressive cahing.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/840#issuecomment-179952484.\n That's wonderful! :sunrise: \n\nThanks @Carreau :+1: \n I am curious as to why has this just been closed?  It still requires custom editing of one file in the distribution if I am not mistaken.  If I understand correctly, the Ctrl-Shift-R was just done so that the browser would use the file edited by hand but the underlying problem is still there.\n > I am curious as to why has this just been closed?\n\nThis was likely a mistake, it happen when you get notification by mail, and only see the last few messages.\n (reopened)\n My apologies for not reading to the top of the message list @aroberge. Thanks @Carreau for reopening.\n Could someone explain this to me - I, too, am interested in printing in color.  I am able to generate .html files of my notebook that look correct, but when I print them or save as .pdf when printing, only the inline figures show color.  This is the case whether or not I comment the lines that @Carreau suggested, above.\n @AGS-Knight if you're modifying the LESS files, you'll need to recompile them to CSS, reinstall the notebook, and convince your browser to clear the cache before you'll see any effect.\n\nIt should absolutely be possible to print in colour without going through this.\n Yeah, I'm pretty sure any BW print settings are not intended. A LESS PR fixing this would be welcome.\n > A LESS PR fixing this would be welcome.\n\nIt **was** like that before, but it requires a modified version of bootstrap. We were removing `code.less` and `print.less`, though it required too much maintenance at each update, and completely screw up packaging by thongs like debian.\n Is the intent still to fix this issue? Any estimate on when it might be fixed?\n\nPrinting notebooks to PDF is one of my favorite features, but black and white really reduces the usefulness. \n One workaround is, save the notebook as html.  The rendered file will have the css embedded. Open the HTML in a text editor and do a search for \n\n`@media print`\n\nand delete the offending\n\n`!important;color:#000`\n\nsave, open the file in a browser and print. \n\nIt's not ideal but you don't have to go digging around changing the CSS and recompiling in your site-packages.\n\nJust in case someone is looking for an easier workaround. \n @marrabld Is it possible to do this with javascript, then it could be embedded in the saved html document.\n @vascotenner  I guess so, but my Javascript isn't good enough to figure out how to do it.\n\n[edit]\nYou could try adding \n`@media print {\n  *,\n  *:before,\n  *:after {\n    background: transparent !important;\n    box-shadow: none !important;\n    text-shadow: none !important;\n  }`\n\nto your  ~/.jupyter/custom/custom.css file.\n[\\edit]\n +1 from me\n @minrk @Carreau are we any closer to being able to fix this in our LESS files? > @minrk @Carreau are we any closer to being able to fix this in our LESS files?\r\n\r\nAFAICT, no, not without updating to new bootstrap.  Bumped from 5.0 to backlog so we can try to get to a release.","@minrk am I missing anything for a release ?\n > This note shouldn't be true, and doesn't appear to be. Where are you getting this?\n\nHum, I build the bdist and the sdist and my git folder was unclean with this change, so ai assume it was normal. \n This is missing the version bump/tag:\n- update version in `notebook/_version.py`\n- run `python setup.py jsversion`\n- `git commit -am \"release $VERSION\"`\n- `git tag -am \"release $VERSION\" $VERSION`\n Ah, that might have been because you updated and committed the real version, but `jsversion` didn't run until it was fired as part of `sdist/bdist`. That should be done before the commit/tag.\n ok. I had'nt tagged. Thanks\n Git tag take a `-am` ?\n updated. \n @Carreau :smiley: I'm glad this is documented. A few minor suggested changes.\n @carreau :smile_cat: Thank you!\n","[pep 440](https://www.python.org/dev/peps/pep-0440/) not pep404 (not found)\n and this make PyPI recognize sdist and bdist as 2 differents versions...\n And fixing the filename is not enough, we will have to add logic to remove the dot.\n At some point we can also look at PyPA packaging, https://github.com/pypa/packaging that fully implement normalisation. \n","@Carreau @minrk Seems like this should be in 4.1 docs.\n An improvement, thanks!\n Thanks @minrk.\n","I haven't tested locally, but I agree that the focus behavior or shift-J/K\nshould behave the same as J/K.\n\nOn Fri, Dec 11, 2015 at 7:20 PM, Anton Akhmerov notifications@github.com\nwrote:\n\n> Short description: selecting multiple cells can result in the active cell\n> being off screen.\n> \n> My environment:\n> - Ubuntu + latest chrome/firefox\n> - Notebook v4.1.0b1\n> \n> Reproducing:\n> - Open a notebook with more cells than fits into a single screen\n> - Press shift+J (shift-K) several times\n> \n> Result:\n> \n> Active cell is off screen\n> \n> Expected behavior:\n> \n> Active cell is the lowest visible cell (highest visible cell for shift-K),\n> same as with regular J/K.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/846.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I think I had a workaround, but it completly break the focus behavior. \nIt's not obvious why J/K keep focus on not with shift. \n I think I got it, it's a 3 line change, but it's not super obvious. \n See #863 \n","I think not not having a toolbar icon was on purpose, it's already in the edit menu, \nand not **such** a common action IIRC. \n\n@ellisonbg , thought ?\n @ellisonbg @Carreau For reference, here is a link to download a PDF of the [Windows Universal Design guidelines](https://dev.windows.com/en-us/design). Current implementation of 4.1 beta is suitable for Microsoft's recommended design guidelines for context menu items and command bar items.\n\nRelated issue #558\n I think we should wait and see how much find/replace is used. It is easy to\nadd this later if we really need it - hard to take it away if we add it now\nand find that people don't use the button much.\n\nOn Sat, Dec 12, 2015 at 3:39 AM, Carol Willing notifications@github.com\nwrote:\n\n> @ellisonbg https://github.com/ellisonbg @Carreau\n> https://github.com/Carreau For reference, here is a link to download a\n> PDF of the Windows Universal Design guidelines\n> https://dev.windows.com/en-us/design. Current implementation of 4.1\n> beta is suitable for Microsoft's recommended design guidelines for context\n> menu items and command bar items.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/847#issuecomment-164140504.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Marked as 5.0 then. \n There may not be such a thing as \"one size fits all\".\n\nIs it complex to give users the possibility to drag and drop the \"icon shortcuts\" they want most ?\n > Is it complex to give users the possibility to drag and drop the \"icon shortcuts\" they want most ?\n\nNot that easy , that would be nice though. \n","@stonebig Thanks for suggesting this **enhancement** for adding indicators to selected, active Windows menu items and activated icons. \n![toggle_view_menu](https://cloud.githubusercontent.com/assets/2680980/11761634/fe02148a-a07e-11e5-91aa-6987a9b807b2.gif)\n\ncc @Carreau @minrk for tagging milestone as enhancement\n On a personal taste, I like when users have a super quick and easy way to define their own \"most used\" quick access banner of icons.\n\nFor example, as a less incremental / more risky suggestion:\n- clicking on \"set shortcut icons\" icon shows:\n  - the banner of icons currently selected, \n  - and below the table of possible icons,\n- with my finger / stylet / mouse, I can adjust my \"quick access\" icons bar in 20 seconds,\n- the icons should be catchable without error by a non-little finger.\n\nEach person has its favorite 10 actions, that represents 90% of their Way-of-Working\n This is a little more difficult than that, has we have to track the state of the header. And right now the click \"just\" call jQuery.toggle which can be tracked in other places, and can even be done purely via css. Also the framework for the menu does not support putting marks on the left side menu. \n","We didn't carry across the notion of profiles to Jupyter, but they're not being deprecated for the config that remains in IPython - the things that specifically relate to executing Python code. profile_julia is there for historical reasons - that's how Julia integrated with the notebook before we developed better mechanisms.\n\nYou may be able to have language-specific settings by listening for the kernel start events and deciding based on the kernel in use. There can also be JS files associated with particular kernels, though that's primarily intended for kernel authors to customise the frontend if they need to, rather than for users to apply settings.\n Right, I see. Thanks for clarifying :+1: \n No worries. It is a bit confusing because of the way the project has developed.\n","It would be good to have this as an internal validation of the server extension machinery.\n > I think we should ship it as a notebook server extension in ipyparallel, rather than keep it in the notebook code.\n\nI agree.\n","Travis has been a naughty boy and needs a kick.\n","Is that on notebook 4.1.0b1 ? Can you check if it's only windows specific ? And if so can you try to narrow it down ?\n\nThe value is explicitly [marked as safe](https://github.com/jupyter/notebook/blob/caa23d0d8ba77e01e4025aca31551923b9d62e7e/notebook/templates/notebook.html#L341-L343) so if quotes are escaped, it means that Jinja2 does not do it's job. \n\nIs that a custom embed application, or is it ran in a specific context ?\n As that `|safe` [was just committed in September](https://github.com/jupyter/notebook/commit/bce9c94f32d2257f14895dc0fb3137faaeedb46e) and wasn't present in my version and went away as I applied the same fix to my template, I consider this fixed. Sorry for not testing it on the latest beta...\n","@damontallen Hmm... Below are the results that I am getting using the latest version of Firefox on a Mac. Perhaps the issue that you are seeing is related to a particular browser or configuration? If you let us know which browser and OS that you are using, we would be happy to look into it. Thanks.\n\n![interupting_kernel](https://cloud.githubusercontent.com/assets/2680980/11770341/8b718ecc-a1b0-11e5-85bd-d545ede5750c.gif)\n<img width=\"611\" alt=\"screen shot 2015-12-13 at 3 44 47 pm\" src=\"https://cloud.githubusercontent.com/assets/2680980/11770342/91e7e8fa-a1b0-11e5-9966-a2871b903432.png\">\n I was using Ubuntu 15.10 (64bit) and Firefox.  \n\nI just double checked and it's working now.  I guess I just needed to reboot.  \n\nThanks for checking for me.\n @damontallen Glad it's working. Enjoy Jupyter notebook :sunglasses: \n","Other names which do not work (all tried via the environmental kernel manager): `xxx~yyy`, `xxx|yyy`\n Ok, seems that this is already a bit better: https://github.com/jupyter/notebook/commit/c93c6924f6e97b7bbb9ab04fdebe29c15531e6aa -> the new release will support `.` and `-`.\n\nThe interesting thing still stands: kernels with names like `conda~envname` can be started (visible in the new notebooks button) but they can't get their logo. E.g. you can rename a kernel in your user kernel dir to `dev~34` and it can be started (http://localhost:8888/notebooks/Untitled8.ipynb?kernel_name=dev~34) and it works (kernel executes python code), but the logo is not visible. \n\nIMO the [regex for kernel specs](https://github.com/jupyter/notebook/blob/master/notebook/services/kernelspecs/handlers.py#L82) should be reworked to accept all chars except `/` if that's what other parts of the notebook accept as a kernel name.\n\nAlso, the part which starts a kernel and lists all kernels should prevent kernels with unsuitable names and not list them (e.g. I can start kernels with `/` in the name, the only problem is the logo and a not visible parsing error in the UI due to some misnamed IDs, but python code executes).\n We are worry about unicode (and javascript), so we prefer a whitelist approach on name. You can propose `~` as a new accepted char. (Pr welcome). I would likely not allow it at the beginning of kernel name, and having it escape in html in the right places is likely needed. \n The [IPEP for this](https://github.com/ipython/ipython/wiki/IPEP-25%3A-Registry-of-installed-kernels#kernel-directories) originally specified the same rules as Python 2 identifiers - ascii letters, numbers and underscore, and can't start with a number. It doesn't look like that got translated into docs or code, though.\n\nThe current regex will match any Unicode word character on Python 3, as well as `_-/.`. I think we should make that more specific to ascii characters (`[a-zA-Z0-9_\\-\\.]`), to avoid any potential confusion relating to filesystem encoding. I don't particularly mind which bits of punctuation we support, but it should all be ascii, and I'd rather avoid anything that has significance in URLs, like `?` or `%`.\n If the solution is to restrict the kernel names, then the regex needs to be applied at all places which register and start kernels. At least the kernel spec manager should not allow for kernels with different names registered and loaded and such errors should be displayed at the right place:\n\ne.g. the following works:\n\n```\njupyter qtconsole --kernel=dev~34\n```\n Yep, we should definitely be consistent in what names are allowed. PRs welcome, and whoever gets to the PRs first gets first crack at choosing what punctuation is allowed (aka the initial proposal for the bikeshed colour ;-).\n Hi,\n\nI am starting to learn ipython using Jupyter and i having that logo issue which i cannot seem to resolve. Please see below:\n\n`[W 12:04:40.139 NotebookApp] 404 GET /kernelspecs/Python%20[python2]/logo-64x64.png (::1) 10.31ms referer=http://localhost:8888/notebooks/newEnvTest.ipynb`\n\nAdditionally, why do my environment (even new ones) always have the prefix \"Python [my env name]\"?\n\nThanks\n @jchevreau : The environment name is because of an extension that Anaconda installs. You can revert to the normal implementation by uninstalling `conda_nb_kernels`. It shouldn't be a problem that it can't find the logo.\n @takluyver Thank you very much for confirming. I will leave it like that for the moment until i am more comfortable with the tool. I am still looking for learning content before I throw myself in the deep end.\n @jchevreau for more info about the nb_conda_kernles extension and other extensions that Anaconda provides by default see here: https://docs.continuum.io/anaconda/jupyter-notebook-extensions\n\n> The environment name is because of an extension that Anaconda installs. You can revert to the normal implementation by uninstalling conda_nb_kernels\n\nJust to make it clear, the default jupyter notebook experience does not come with this extensions, these extension is something that Anaconda ships by default. You can uninstall the extensions or create a new environment just with the notebook package to have the naive/normal experience.\n\nFinally, as @takluyver mentioned, the logo issue should not be a problem, and we will fix it soon.\n","Things like that are planned too, but as usual, someone have to write the code for that. Not 4.1 anyway, marking as 5.0.\n and for 4.1, would it be possible to at least see the \"found\" cells numbers ? (so we can then jump manually to them, when numbered they are)\n The logic to do that is delicate, and the goal of the beta is to make sure there is no bug. Introducing extra variable (cell number) and UI to indicate their position, is asking for problems. Usually we would make UI prototypes and test them/refine for a few weeks. So I doubt this would go in 4.1. \n\nYou can still try to make a PR, it can make it in 4.2 if not in 4.1\n","Yes it's planed, not through search and replace though. And 4.1 is feature freeze, so likely 5.0 or later. \n","What version of pip do you have? We might be expressing some dependency in\na way that old versions of pip don't understand.\n I have pip 1.5.4 \n\nIt might have to do with the fact that I did not install libzmq via apt-get. Nor installed header files for python. The same problem occured with pip3.\n\nI just messed up my system with both jupyter with pip, and with pip3. I might have to solve that first (or yust install anaconda).\n I think you should upgrade pip. Last version is 7.1.2. \n 1.5.4 is fairly old, but I suspect that the issue here is that you need the Python header files installed. You can get them with `sudo apt-get install python3-dev python-dev`. Libzmq shouldn't matter - if pyzmq doesn't find it on the system, it will build a bundled copy, I believe. But the Python header files are needed.\n\nAnaconda has precompiled packages on Linux, whereas pip needs to compile things like pyzmq from source, so if you do decide to install Anaconda, you should avoid this issue.\n\nClosing as, if that is indeed the problem, I don't think we can do anything about it.\n","Annoying for 4.1 since the easy  place where we can know the the requested path, and the file abspath is a class method on which we cannot access `self.log`\n",":+1: \n Promoted the \"Installing Javascript Machinery\" one level so it is visible on the sidebar.\n<img width=\"917\" alt=\"screen shot 2015-12-13 at 2 22 20 pm\" src=\"https://cloud.githubusercontent.com/assets/2680980/11769818/2f865a1c-a1a5-11e5-97a8-dc6c9fe871a3.png\">\n If we're pointing to ways to get support, do we also want a link to http://stackoverflow.com/questions/tagged/jupyter-notebook ?\n\nIn an earlier discussion (about links from the IPython website), we decided that pointing people to Stackoverflow was a good idea, because:\n- Its design makes it easier to find similar previous questions than a mailing list does, reducing the number of people needing to ask questions.\n- Because there's an impression that we 'own' the mailing list, which there isn't for the SO tag, there are more people outside the core team who will answer questions posted on SO, so less of a bottleneck on core developers responding.\n @takluyver Sure, I think that's a good suggestion. I'm going to drop it in and we can always take it back out if there are objections.\n Both good additions, thanks!\n","+1, excellent idea!\n\nOn Sun, Dec 13, 2015 at 2:46 PM, Carol Willing notifications@github.com\nwrote:\n\n> Any interest in having the key new functionality highlighted in a sidebar\n> box in the docs? We could put links to the changelog or blog post\n> introducting 4.1 too.\n> \n> [image: screen shot 2015-12-13 at 2 42 59 pm]\n> https://cloud.githubusercontent.com/assets/2680980/11769956/0b5d6718-a1a8-11e5-8754-c393d5085506.png\n> \n> cc/ @ellisonbg https://github.com/ellisonbg @fperez\n> https://github.com/fperez\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/859.\n\n## \n\nFernando Perez (@fperez_org; http://fperez.org)\nfperez.net-at-gmail: mailing lists only (I ignore this when swamped!)\nfernando.perez-at-berkeley: contact me here for any direct mail\n I don't know how much this is possible. But if you know how to do it (or a project that does it,) we can do that.\n\nWe can Also inject a header on top of all pages, with a `4.1 beta` message. \n The sidebar box is just a sphinx directive so adding the box is straightforward. I'll open a PR later for comments.\n","So far so good:\n\n```\n$ export CASHER_DIR=$HOME/.casher\n$ Installing caching utilities\nattempting to download cache archive\nfetching PR.86/cache--python-3.4.tbz\nfetching master/cache--python-3.4.tbz\ncould not download cache\nadding /home/travis/.cache/bower to cache\n/home/travis/.cache/bower is not yet cached\nadding /home/travis/.cache/pip to cache\n/home/travis/.cache/pip is not yet cached\nadding /home/travis/.npm to cache\n/home/travis/.npm is not yet cached\n```\n Still good:\n\n```\nstore build cache\nchanges detected, packing new archive\nuploading archive\n```\n I'll re-trigger py34-js that took 4min47s.\n Hum... shaved of 30s, but the cache packing takes ~30s, so the actual test are 1min faster. \nMaybe more specific caching ? Thoughts ?\n nah wrong line, it did not change time much, half the time is still spent on  install line, I'll try to narrow that down.\n So travis give the timing on the side,  pip-install shrank from 155s to 95s, but expanding cache takes ~ 20s to unpack and 20s to pack...\n\nBower seem to use the cached folder, though it seem like the install step of the notebook itself take more than a minute and is the limiting factor. \n\nI'll continue to play with this.\n /me Looks at the green Travis check mark without checking the code in e3f4776 .\n/me says \"Looks like this is passing, I should merge it now!\"\n\n...\n\n:trollface: \n Nah I give up. Travis cahing speeds up by 1min, but you loose 30 sec to download cache, and ~25s to upload it again. Not worth it.\n Can you change the base image that Travis uses to a custom image?  So we could preload it with everything but the notebook.\n Not that I am aware of.\n\nOn Mon, May 18, 2015 at 10:12 AM, Jonathan Frederic <\nnotifications@github.com> wrote:\n\n> Can you change the base image that Travis uses to a custom image? So we\n> could preload it with everything but the notebook.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/86#issuecomment-103137613.\n","closed in favor of #866 \n","I like the extra complexity going into setup code rather than the actual modules, but my preference would be that we use PEP whatever compliant version numbers directly, and add some code to assert that they are correct rather than normalising them.\n @takluyver From #860, I think @Carreau feels the same, which should amount to moving this same function to `_version.py` and producing `__version__` with it.\n\nI don't like the idea that this is forcing us to internally change perfectly valid version numbers that _PEP 440 officially allows and supports_.\n I'll have @parleur merge the 2 PRs in one later today, and will re-examine the Pep. \n > I don't like the idea that this is forcing us to internally change perfectly valid version numbers that PEP 440 officially allows and supports.\n\nAlso I'm not sure I get that : \n\n> The canonical public version identifiers MUST comply with the following scheme:\n> [N!]N(.N)*[{a|b|rc}N][.postN][.devN]\n\nI don't see any way to have a dot followed by a `a`, `b` or `rc`\n\nBut I may be missing a part of the Pep, hence why I'll be re-reading.  \n if you are referring to [this section about prerelease separator](https://www.python.org/dev/peps/pep-0440/#pre-release-separators) I understand it as applying only to software that have already been released, and so should not be used by newer release. \n We shouldn't do any checking at runtime, since that's an unnecessary waste at import time for extremely static code. The check should be made in setup.py at install/dist time.\n\nIf we are going to embed PEP440 normalization in our version strings, what I'd propose is we put the '.' in the suffix, as the PEP describes them:\n\n``` python\nversion_info = (4, 1, 0, '.dev0')\n__version__ = '.'.join(map(str, version_info[:3])) + ''.join(version_info[3:])\n```\n One of the issues with `version_info = (4, 1, 0, '.dev0')` is it will most of the time be `(4,1,0)` which will lead to us forgetting the `.` on next release. \n\nWould you version plus a normalisation in setup.py and a unit-test  be an acceptable compromise? \n\nAlso the `'.'.join`can be seen as an extra-expensive runtime computation :-P \n > One of the issues with version_info = (4, 1, 0, '.dev0') is it will most of the time be (4,1,0) which will lead to us forgetting the . on next release.\n\nNo, 99.9% of the time it will be `version_info = (4, 1, 0, '.dev0')`. It's only `(4, 1, 0)` for one commit, and the next commit is always putting it back to `'.dev0'`.\n > Would you version plus a normalisation in setup.py and a unit-test be an acceptable compromise?\n\nI think testing in tests is perfect. I only mean that we shouldn't be running tests on import, which is currently done in #860.\n","Tested and confirmed the fix locally.\n","Possibly. It was added for the `/files/` handler, but we have since switched to calling out to the ContentsManager for this. For the default case of the FileContentsManager, what we do now is quite inefficient, so I've been meaning to allow the ContentsManager to specify a `files_handler`, and have the default case go back to using this StaticFileHandler subclass, since it will perform much better for binary files (images, videos, etc.).\n > Possibly.\n\nShould we (just out of caution) emit a `PendingDeprecationWarning` for 4.1, removing it if we keep the code later.\n I guess we could. I don't see any cost to leaving it there.\n","I took care of a few of the lasts comments. \n One more note about lingering unused code in `_version.py`, but otherwise +1.\n > One more note about lingering unused code in _version.py, but otherwise +1.\n\nThanks for your patience !\n Thanks!\n","Travis fail is unrelated, and it refuses to restart the Job. \n @Carreau Travis has finished its tantrum and is now a happy green. Changes look good.\n Thanks !\n","Fair enough, but you will still select markdown cell with shift-click, I did not found a **nice** way to avoid that. \n Note, I also use the default mouse pointer instead of the text selection pointer.\n\n@Carreau I only disable selection on the prompt number where we tend to click for the multiple selection...\n > I only disable selection on the prompt number where we tend to click for the multiple selection...\n\nThe comment was meant to be just a remark that we might want to fix later. \nI'm going to merge this. Thanks.\n","(and fix a missing `new` in front of a JS constructor) \n Travis is Happy ! :+1:\n","I would try to update setuptools, you got 8.2 and the current version is 15 something.\n Thanks for the tip for the setuptools, I will look in to that.\nThis seemed to be some other underlying issue than what I reported, but I think I manage to fix it. \nI noticed that the ipython install suffered the same issue so I reinstalled ipython which made it pick up on the correct version.\nI then had to rebuild  and install jupyter again with \n\n```\n./setup.py build\n./setup.py install\n```\n\nto get past the error though and it seems to have worked.\nSorry for the inconvenience \n No problem. Happy testing. \n","This was started a long time ago: https://github.com/ipython/ipython/issues/6718 though it requires a sustained effort and nobody agreed to take care of that. \n\nWe could try to include that as part of the rewriting. @ellisonbg  might want to discuss that as with the Phosphor team. \n\n(closing the IPython side issue as it is more relevant here) \n","@parente Nice changes :cake: A few minor suggestions/typos. Thanks!\n Thanks for the edits @willingc. I made the changes and rebased on master to fix the conflict.\n Thanks !\n (merging as soon as Travis go green)\n","We have git hooks (in top-level git-hooks folder) that should ensure js is up-to-date on checkout/pull, so only local changes you have made since checkout will require rebuild.\n\nPersonally, I would discourage putting `ignore_minified_js=True` in a config file so that it's always on, since it further separates a dev environment from a real one. I do, however, have an alias\n\n```\nalias nbdev='jupyter notebook --NotebookApp.ignore_minified_js=True --port=9999'\n```\n\nso that I can turn this on when I'm debugging javascript.\n @minrk, good points. I wasn't aware of those git hooks... \n\nOne question: the git hooks do the equivalent, if I read them correctly, of rerunning `python setup.py js/css` when needed. That triggers ultimately an `npm run build`, if I'm not mistaken.\n\nDo you know if that's smart enough to track dependencies and only build what's needed, or is it stupid and does it do a full rebuild?  Just curious...\n @fperez it's in between. It uses a very simple check for whether js or less files changed, so it shouldn't run if only Python files or docs change. It may run slightly more often than it should, though. It's also relatively rare for there to be a PR against the notebook that's not JS, so it doesn't make a difference very often. Since our js build takes so long now, I find that I don't use the hooks any more, and only build manually because I often check out branches just to look at them, not necessarily run them.\n Does anyone want to tackle this for 5.0, or shall we bump it again? I've struggled with this many-a-times. Here are some thoughts: \r\n\r\n* Pull the latest from master: `git pull jupyter master`\r\n  * With git-hooks installed, this will build this JS, CSS, etc. However, git-hooks needs to be installed by the user, so we shouldn't assume that the user has them installed.\r\n* If git-hooks are not installed, rebuild the JS and CSS: `npm run build`\r\n* If actively developing: `npm run build:watch` which just re-runs `npm run build` whenever the source is modified\r\n  * @fperez I've noticed that our bower script is smart enough to only install dependencies that have changed, and since we have removed webpack, we don't really depend on anything but bower dependencies. So, build time for me is about 3s now (vs. ~12s with webpack).\r\n  * @fperez `npm run build` === `python setup.py js css`\r\n* When switching between major version branches (e.g. 4.x), I believe that `pip install -e .` is required, correct?\r\n* If all else fails, `git clean -xfd` and `pip install -e .` should do it I started a PR to update CONTRIBUTING.rst. It's editable, so feel free to add to it. @gnestor do you think we should do anything more on this for 5.0? Or do you want to close it or bump it to a later milestone? @willingc Would you like to take a stab at the FAQs/troubleshooting tips? I'm not sure where those should live...\r\n\r\n@takluyver I'll bump this in the meantime.","@minrk Thanks!\n","I'd like to get this in 4.1, since it's a big help for what we were working on at CERN last week, but I'd understand if other people want to hold it.\n I think I'd agree about clearing output, but what about prompt numbers? In the cling case, where it's making a minor modification to code already run, you presumably want to keep the prompt number in place. But for things like our `%load` magic, which replaces the cell with completely different code, you don't want it to look like that code has already been executed.\n I'd be inclined to do nothing, and treat it just like someone had typed in the cell after execution (since that's effectively what's happening). Many times we have been asked for an indicator of whether a cell has been edited since execution, and I would like to treat automatic and manual editing the same.\n\nAlternately, we could add another flag to the payload to switch this behavior, since it seems like both make sense.\n If this include a note in the changelog and in the docs, I'm fine adding this behavior in. \n For comparison, I opened #875 which makes clear_output optional and non-default, depending on what we prefer.\n\nChangelog note included in both cases.\n Just curious - what are they doing at CERN when running into this?\n They want to be able to tell when the same cell is executed again, to roll back conflicting definitions (I think this is ultimately because C++ was never designed to be an interpreted language). Min suggested that they add a unique ID to each cell in a special comment, using this mechanism, so they can identify when a cell is re-run.\n Ah, got it, makes sense. Thanks!\n\nOn Tue, Dec 15, 2015 at 8:22 AM, Thomas Kluyver notifications@github.com\nwrote:\n\n> They want to be able to tell when the same cell is executed again, to roll\n> back conflicting definitions (I think this is ultimately because C++ was\n> never designed to be an interpreted language). Min suggested that they add\n> a unique ID to each cell in a special comment, using this mechanism, so\n> they can identify when a cell is re-run.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/874#issuecomment-164816157.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n closing in favor of #875\n","This would be my preference, but I'm not going to lose any sleep either way.\n We need to make sure to test interact with a slider and a matplotlib plot\nfor output for any changes to the `clear_output` logic. Jon and I have\nrepeatedly seen many subtle problems show up in that context. It seems to\nhave the right combination of factors to get be messed up unless the logic\nis dead on.\n\nOn Tue, Dec 15, 2015 at 7:23 AM, Thomas Kluyver notifications@github.com\nwrote:\n\n> This would be my preference, but I'm not going to lose any sleep either\n> way.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/875#issuecomment-164797050.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I don't think that kind of issue can come up here - this is specifically about rewriting the cell contents using `set_next_input`.\n Yup, this is irrelevant to all widgets I know of.\n ok, great!\n\nOn Tue, Dec 15, 2015 at 10:53 AM, Min RK notifications@github.com wrote:\n\n> Yup, this is irrelevant to all widgets I know of.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/875#issuecomment-164854114.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Yup, this is irrelevant to all widgets I know of.\n\nThat it is.  `set_next_input` doesn't even work with widgets (see https://github.com/ipython/ipython/issues/4983)\n +1 to get that in. If it goes in soon we can cut a beta2 before end of week. \n I'm happy with this one, then, and it should be ready to go. I'll close #874.\n Let's go then. \n","+1\n","Works on Safari 9.0.2 and Chrome 47 on Mac. :+1:\n\nCookie for @jdfreder, :cookie:!\n Seem legit.\n","Another pain point, which I don't know if it could be addressed for the 4.x series is the fact that certain nbextensions depend on (a certain version) kernel-side code such as custom interactive widgets libraries.\n\nAt the moment, it is impossible to have two kernels with two different versions of ipywidgets, or bqplot, installed because they will look for the JavaScript at the same location.\n\nTherefore, I think that the extension mechanism should acknowledge that there are two categories of extensions:\n1. Global notebook application extensions, which is not dependent on kernel code (like a spell-check).\n2. Kernel-dependent extensions.\n\nA proposal to solve this would be to have the kernelspec contain one more information: a uuid which would typically be generated when the kernelspec is installed. When running a notebook with this kernel, `nbextension_base_path/u-u-i-d/` would then become a search path, and the one we use for custom widgets.\n\ncc @jdfreder \n Here is a _super_ rough draft of a PR that addresses the first pain point: #879 \n\nSome questions that this bring up:\n- Do we need separate `config=True` traitlets on `NotebookApp` for enabling common, notebook, tree and terminal nbextensions?\n- What are they named?\n- How do we handle multiple config files that define those? Last wins? Try to merge?\n- Our `.py` config files allow lists to be appended/extended, but `.json` doesn't.\n- How will folks at Continuum write these config files programatically?\n\nThere are some design decisions to make, but the good news is that it is simple code and logic to add this. Let's discuss more tomorrow.\n > Release the fixes quickly in a 4.2 release.\n\nI don't agree with \"quickly\". I would prefer \"thoroughly tested\" with \"with good documentation and example\".\n\n> Don't standardize specifically where in the python package they are. This allows existing packages such as nbgrader to not have to change anything.\n\nI would still like if you make extensions in python packages to be able to activate them per submodule: `jupyter activate nbgrader.student` / `jupyter activate nbgrader.teacher`\n\n> throwing that data into the page.html template itself\n\nDoes that implicate you need to restart the server on loading extensions ?\n Extra note, if the packages are Python and have versions, we should be able to \nserve multiple versions at differents url like `/nbextension/<extension>/<version>/`, if version is omitted latest is implied. \n Re: @SylvainCorlay's point, also during that discussion, we proposed a kernel-specific nbextension path, which we never got around to implementing. I feel bad about that. I think we ended up proposing an nbextensions dir inside the kernelspec that kernel-specific extensions could go in.\n\nIt seems a bit worrisome that we would officially bless Python packages as the temporary solution for 4.x nbextensions, and then turn 180\u00ba and say that it's all npm, and not Python packages as fast as we can. But if we want to make it more convenient, adding a flag for 'install js from a Python package':\n\n```\njupyter nbextension install --py nbgrader\n```\n\nseems like a better middle ground than breaking `jupyter nbextension install [path]`, or guessing whether `[path]` is a path or a package.\n\n> Do we need separate config=True traitlets on NotebookApp for enabling common, notebook, tree and terminal nbextensions?\n\nI don't think so. What would these common nbextensions be?\n\n> How do we handle multiple config files that define those? Last wins? Try to merge?\n\nI would do it the same way we do with the rest of config, where the more specific config has priority: user > env > system. I think that's the only thing that's missing from nbconfig for this to work.\n\n> How will folks at Continuum write these config files programmatically?\n\nDuring the nbextension discussion a year ago, it was concluded that we must not activate extensions as part of installing them - that install & activate **must** be two separate actions. Are we changing our minds on that?\n\nIf someone wants to _enable_ nbextensions via conda packages, the biggest hurdle is that all enabling currently resides in a single file, and conda packages should only write, not modify files. To support this, the only idea I have is a `config.d`-style directory of config files, so that packages could drop a file in there, and all such files are loaded.\n > Re: @SylvainCorlay's point, also during that discussion, we proposed a kernel-specific nbextension path, which we never got around to implementing.\n\nYou can load extension from kernelspec directory using kernel.js, you just need to do relative requires. \n\n> It seems a bit worrisome that we would officially bless Python packages as the temporary solution for 4.x nbextensions, and then turn 180\u00ba and say that it's all npm, and not Python packages as fast as we can. But if we want to make it more convenient, adding a flag for 'install js from a Python package':\n\nWhat about \"just\" adding `npm` global dir to the search path ?\n\n> I would do it the same way we do with the rest of config, where the more specific config has priority: user > env > system. I think that's the only thing that's missing from nbconfig for this to work.\n\nFor general frontend config, it's hard to merge JSON, though for list of extension, that might be easier. \n > that install & activate must be two separate actions. Are we changing our minds on that?\n\nI don't think so, I think the setup.py list is to **discover** extensions. \n Just that I understand it correctly: \n\nThis:\n\n> embrace npm as our package format and manager\n\njust means that developers of packages need to use npm, not that users of the package need to install npm in addition to python+python package manager?\n\nIf not: I don't think it's good for the adoption of extensions if e.g. a julia user has to install a python environment to get a python package manager to install a jupyter notebook and then start installing node and npm to get extensions. Learning python (the language, the tools, the libs...) instead of using a preinstalled SPSS/STATA/... is already hard for students and researchers, so don't add on learning another packaging ecosystem to get notebook extensions.\n Maybe this belongs in a separate issue, but it seems like the right time to fix it along with these other problems. Installing **server-side** extensions suffers from a similar pain point about `jupyter_notebook_config.py` vs `jupyter_notebook_config.json` configs.\n\nWe found out the hard way that the JSON config takes precedence over the Python config in jupyter-incubator/dashboards#153. So if some server-side extensions ask users to add themselves to the .py config like `c.NotebookApp.server_extensions = ['my.extension']` (currently: nbexamples, dashboards, declarativewidgets) while others use the `ConfigManager` class to add themselves to the .json config (nbgrader, anything using the nbsetuptools), only the .json ones will wind up getting enabled.\n\nI have no problem switching over to one or the other, but, which is the correct one? Or does something need to change so that both are supported and the lists of extensions are merged across the config types?\n > I have no problem switching over to one or the other, but, which is the correct one?\n\nIt's probably correct for .py config files to have higher priority, since they are generally human-edited and more powerful, while .json config files should always and only be programmatically edited. .py files can be considered 'manual overrides'.\n\nIn Python, it makes sense to do `c.NotebookApp.server_extensions.append('my.extension')`. The JSON config files cannot do this, since they are a simple dict-dump. And further, they don't generally need to, because opening and appending to a list in a JSON file is doable, unlike in Python. A further point in favor of .py files having higher priority.\n > In Python, it makes sense to do c.NotebookApp.server_extensions.append('my.extension'). The JSON config files cannot do this, since they are a simple dict-dump. And further, they don't generally need to, because opening and appending to a list in a JSON file is doable, unlike in Python. A further point in favor of .py files having higher priority.\n\nWe already had a long discussion on which one between py an json should take precedence and decided on Json, as we want at some point to edit configuration only through UI. Having `.py` taking precedence would mean in many cases that if a user does: `c.NotebookApp.server_extensions = ['my.extension']` no automatic tool can ever activate an extension. So which one takes precedence is still not obvious to me, and I'm not sure a single case like this one change the balance. \n\nJson  could perfectly have append also, as long as we decide that an append or prepend keys become a LazyAppend/LazyPrepend.\n\nWe maybe should just warn more loudly if one file erase the settings of another, or put some time in looking at tools like [redbaron](https://github.com/psycojoker/redbaron) to modify a Python config file in obvious case when a config option is **not** dynamic. \n > We maybe should just warn more loudly if one file erase the settings of another ...\n\nThe warning is definitely there and pretty loud on server start:\n\n```\n[W 14:29:11.533 NotebookApp] Unrecognized JSON config file version, assuming version 1\n[W 14:29:11.536 NotebookApp] Collisions detected in jupyter_notebook_config.py and jupyter_notebook_config.json config files. jupyter_notebook_config.json has higher priority: {\n      \"NotebookApp\": {\n        \"server_extensions\": \"<traitlets.config.loader.LazyConfigValue object at 0x7f15cc47dc18> ignored, using ['urth.dashboard.nbexts']\"\n      }\n    }\n```\n\nBut I'll admit @jtyberg and I missed it for some time when debugging the issue I linked above. Even when we did see it, we only knew what to do because we're expert-amateurs in how the Jupyter config system works. I'd bet a typical notebook user wouldn't have an easy time rectifying the problem.\n\n> Json could perfectly have append also, as long as we decide that an append or prepend keys become a LazyAppend/LazyPrepend.\n\nIf you wanted to scope it down to prepending/appending sequence values instead of having to merge arbitrary config objects, that would still solve the extension problem specifically without growing into a general purpose \"merge all the configs!\" solution.\n What is the non-Continuum-camp feeling about the importance of being able to support \"sandboxing\" of extensions?  For us (at Continuum) that means having a clean mechanism to be able to use conda environments to sandbox different sets of extensions and perhaps different versions of the same extension.  From our work which has mixed both JS and Python code in the extensions conda packaging and conda environments have worked really well.\n\nI'm not clear on how this works in either a pure-Python-package or pure-NPM-package world.  If there is a good and clean solution that doesn't include conda, great.  But is there scope to discuss how conda can fill the need here to manage cross-language packaging, or has that ship already sailed?\n > We maybe should just warn more loudly if one file erase the settings of another, or put some time in looking at tools like redbaron to modify a Python config file in obvious case when a config option is not dynamic.\n\nIf redbaron would allow us to write and update Python config files programmatically, I would be pretty happy to drop json config files altogether, since they would no longer solve a problem. But that's a long-term idea.\n > But is there scope to discuss how conda can fill the need here to manage cross-language packaging, or has that ship already sailed?\n\nWe can never _rely_ on conda for this, so it's always going to be the case for us to use standard language packaging in multiple languages with some manual steps for stitching the two together, and then it can be 'simpler' for conda users, where packages can properly express cross-language dependencies. But whatever we come up with, it has to work outside conda.\n > Re: @SylvainCorlay's point, also during that discussion, we proposed a kernel-specific nbextension path, which we never got around to implementing. I feel bad about that. I think we ended up proposing an nbextensions dir inside the kernelspec that kernel-specific extensions could go in.\n\nI would be ok to give it a try if you guys are ok with the proposal described earlier.\n How is everyone's availability for a video chat later today? I am free after 10 am PST.\n I'm free any time.\n 11am PT, 2pm ET would be good for me or\n12pm PT, 3pm ET\n\nAn our later is \"possible\" but sub-optimal.  Friday AM-midday ET also WFM.  Afternoon not so great.\n I probably can make it too. \n If I have to choose I would do it tomorrow, so we give another 24 hs to the things raised here (in other discussion and the PR itself), but if we are doing it today, I would prefer around/after 12pm PT.\n Is there a hackpad for this meeting?\n Friday would be better here too if possible.\n\n/cc @lbustelo\n I like Damian's idea of having the meeting tomorrow. That will give me\ntoday to work on the implementation and allow more discussion.n We also may\nget more turn out with the extra day notice.\n\nI propose 10am PST on appear.in or bluejeans to allow our \"further east\"\nfolks to participate more easily. How does that sound?\n\nOn Thu, Dec 17, 2015 at 9:27 AM, Peter Parente notifications@github.com\nwrote:\n\n> Friday would be better here too if possible.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/878#issuecomment-165521341.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I will be unavailable for tomorrow, but would like to suggest the model used by git for chaining configuration files together:\n\n\"If not set explicitly with --file, there are four files where git config will search for configuration options:\n\n`$(prefix)/etc/gitconfig`\nSystem-wide configuration file.\n\n`$XDG_CONFIG_HOME/git/config`\nSecond user-specific configuration file. If $XDG_CONFIG_HOME is not set or empty, \n$HOME/.config/git/config will be used. Any single-valued variable set in this file will be overwritten by \nwhatever is in ~/.gitconfig. It is a good idea not to create this file if you sometimes use older versions of Git, as support for this file was added fairly recently.\n\n`~/.gitconfig`\nUser-specific configuration file. Also called \"global\" configuration file.\n\n`$GIT_DIR/config`\nRepository specific configuration file.\n\nIf no further options are given, all reading options will read all of these files that are available.\nIf the global or the system-wide configuration file are not available they will be ignored. \nIf the repository configuration file is not available or readable, git config will exit with a non-zero \nerror code. However, in neither case will an error message be issued.\n\nThe files are read in the order given above, with last value found taking precedence over values \nread earlier. When multiple values are taken then all values of a key from all files will be used.\n\nAll writing options will per default write to the repository specific configuration file. Note that this \nalso affects options like --replace-all and --unset. git config will only ever change one file at a time.\n\nYou can override these rules either by command-line options or by environment variables. \nThe --global and the --system options will limit the file used to the global or system-wide file respectively. \nThe GIT_CONFIG environment variable has a similar effect, but you can specify any filename you want.\"\n\nhttps://www.kernel.org/pub/software/scm/git/docs/git-config.html\n We can also push that a few days down the road, I'm not sure there is an urgent need to do that now, as 4.1 is not yet out. \n I'll try to make it, but have a company event.\n\nSo we're going to use `npm` Real Soon Now, but need to at least _work with_ `virtualenv/pip` and `conda` now. For the end user, that's all they want to do, or maybe some GUI stuff, not touch magic named files in five places or run a bunch of CLI.\n\nLet's also try to make developers happy, and ease them into the npm world (lotta bower out there right now).\n\nAnd let's try to make sysadmins happy. A surrogate for this is: how simply can I use binder to make a demo of my software? If you are doing a py/js job and `requirements.txt` or `environment.yml` isn't enough and you need a `Dockerfile`, it's too hard.\n\nI am :+1: allowing enabling extensions from all the places, as suggested... and would like to see this wrapped as a switch to `nbextension install`, even if it its included elsewhere. I would prefer to see a data-first approach, have never liked the python config files. JSON is validatable, and has implementations everywhere.\n\nAs to the chaining: I almost would rather see the behavior like lodash's `_.merge`, but the lists are still a problem. Germaine, here: `server_extensions` should really be a hash :) Then, you could opt out into or out of an extension by setting it to `True/False`\n\nThe version stuff is scary, and treading on what a real package manager should do, but if it's an identified need, we should go ahead and address it.\n\nSo, with the those assumptions and:\n- you have a real `setup.py` package that has already been installed\n- somewhere in that package, you have a folder which contains:\n  - `package.json`...\n    - with _at least_ `name`, `version` and `main`\n  - and `__init__.py` so that python can find it (`setuptools.path:style`)\n\n...changing the command to make the positional argument optional, and accept `--py`:\n\n``` shell\n$> jupyter nbextension install --prefix=\"${CONDA_ENV_PATH}\" \\\n  --py=nbgrader.nbextensions.assignment_list.static \\\n  --enable\n\nInstalling and enabling nbextension to `{prefix}` from python package `nbgrader`...\n... found package.json\n  ... found name `nbgrader.assignment_list`\n  ... found version `0.2.0`\n    ... creating `nbgrader.assignment_list@0.2.0`\n       ... `0.2.0` is newer than previous version in `nbgrader.assignment_list` (`0.1.0`)\n         ... removing `nbgrader.assignment_list`\n         ... copying `nbgrader.assignment_list@0.2.0` to `nbgrader.assignment_list`   \n  ... found main `main.js`\n    ... `nbgrader.assignment_list/main` already enabled\n```\n\nSpeaking of \"standard package management\"... being able to communicate all of that at install time with setuptools `entry_points` would be an option:\n\n``` py\n#setup.py\nsetup(\n    #...\n    entry_points={\n        'jupyter.nbextension': [\n            'nbgrader.assignment_list = nbgrader.nbextensions.assignment_list.static',\n        ],\n        'jupyter.server_extension': [\n            'nbgrader = nbgrader.nbextensions.assignment_list:load_jupyter_server_extension',\n        ],\n        #...\n)\n```\n\n...but there are probably complexities i am missing: environments (should be detectable), hub deployments, etc. I would really rather see the config files as a way to _opt out of_ or _customize_ what happens at the package manager level, rather than a necessary step for every single installed package.\n fyi - the original authors of Bower abandoned the project. Last I heard, they were looking for new maintainers.\n FYI, it does appear that people are taking Bower up, as evidenced by the first several blog posts at http://bower.io/blog/\n For reference, notes of the Dec. 18 meeting are [in this hackpad](https://jupyter.hackpad.com/NBextensions-4.x-improvements-cJeFDgYhaLY).\n For the record, the proposal that this mornings meeting came to was:\n- Continue to load the list of nbextensions to load from the frontend nbconfig.\n- In the `jupyter nbextension` subcommands, be able to read/write to all config directory locations.\n- In the JS API, load from all config directories, but only write to the user config location.\n- Continue to use the `_jupyter_nbextensions_paths()` API to find nbextensions in Python packages.\n- Continue to rely on editing config files.\n Mmh, I thought we'd agreed to go to the `conf.d` bag-o-files model instead of asking package managers to edit config files... Did I miss something?\n I don't think we can do that in our current approach without breaking BW compat:\n- Our nbconfig system already edits config files in response to REST API calls to the frontend config service.\n- The existing 4.0 `jupyter nbextension` command already makes edits to those same files.\n\nThe only thing we could do is to add another separate layer that does the `conf.d` approach. But it would have to sit along side our existing stuff and not replace it. I think we should use the current edit based approach for now and see if we want to add the `conf.d` approach later.\n Well, if we can offer for 4.2 the `conf.d` option, conda/apt/etc might choose that option instead, without breaking BW compatibility (I'm not suggesting removing the existing functionality).\n\nI think for example apt has post-install scripts, but the policy is that they shouldn't modify the files that they installed, only do other things.\n\nSo I'd like to see if we can go in the `conf.d` direction as overall I think it's the saner option moving forward and towards 5.x, even if we do carry the existing solution for the 4.x lifecycle as well.\n I agree that in the long run we want to have the conf.d type of approach as\nwell.\n\nOn Fri, Dec 18, 2015 at 5:17 PM, Fernando Perez notifications@github.com\nwrote:\n\n> Well, if we can offer for 4.2 the conf.d option, conda/apt/etc might\n> choose that option instead, without breaking BW compatibility (I'm not\n> suggesting removing the existing functionality).\n> \n> I think for example apt has post-install scripts, but the policy is that\n> they shouldn't modify the files that they installed, only do other things.\n> \n> So I'd like to see if we can go in the conf.d direction as overall I\n> think it's the saner option moving forward and towards 5.x, even if we do\n> carry the existing solution for the 4.x lifecycle as well.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/878#issuecomment-165930753.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I'm jumping into this discussion awfully late, coming over from @blink1073's great work in matplotlib/matplotlib#5754 to make interactive matplotlib plots a proper Jupyter widget.\n\nMy concern there is that the matplotlib widget fits very squarely into @SylvainCorlay's second category of \"[kernel dependent extensions](https://github.com/jupyter/notebook/issues/878#issuecomment-165336911)\".  The coupling between the Javascript and Python side there is very tight, and as that stuff has developed it's almost never been the case that a new feature could be added or a bug fixed without changing both sides of the coin.  It will be very important to the matplotlib widgets that there are no opportunities for a version mismatch between the Python and Javascript sides of the communication.  It looks on first blush that #879 will address that -- matplotlib can create a NotebookApp subclass and specify where its Javascript lives (which could continue to be installed along with matplotlib in Python with Python-packaging tools etc. as it is now).  Is my impression correct?  And will that remain in the longer term plans?\n Mike, we are still working out the details, but we expect the situation to\nonly improve. I don't think you will end up creating a NotebookApp subclass\nthough.\n\nWith 4.x nbextensions, most projects like matplotlib will ship their JS in\nthe Python package and that JS code will be installed and activated as a\nseparate step by the user (we are improving that situation).\n\nStarting with 5.x we will start to rely on npm for a lot of this, but will\nstill have a similar process that allows the version numbers to be synched\nin python and JS. Eventually you will probably want to separate out your JS\ncode into an npm package that the python package also includes in its\nsources.\n\nCheers,\n\nBrian\n\nOn Wed, Dec 30, 2015 at 9:40 AM, Michael Droettboom <\nnotifications@github.com> wrote:\n\n> I'm jumping into this discussion awfully late, coming over from @blink1073\n> https://github.com/blink1073's great work in matplotlib/matplotlib#5754\n> https://github.com/matplotlib/matplotlib/pull/5754 to make interactive\n> matplotlib plots a proper Jupyter widget.\n> \n> My concern there is that the matplotlib widget fits very squarely into\n> @SylvainCorlay https://github.com/SylvainCorlay's second category of \"kernel\n> dependent extensions\n> https://github.com/jupyter/notebook/issues/878#issuecomment-165336911\".\n> The coupling between the Javascript and Python side there is very tight,\n> and as that stuff has developed it's almost never been the case that a new\n> feature could be added or a bug fixed without changing both sides of the\n> coin. It will be very important to the matplotlib widgets that there are no\n> opportunities for a version mismatch between the Python and Javascript\n> sides of the communication. It looks on first blush that #879\n> https://github.com/jupyter/notebook/pull/879 wil l addres s that --\n> matplotlib can create a NotebookApp subclass and specify where its\n> Javascript lives (which could continue to be installed along with\n> matplotlib in Python with Python-packaging tools etc. as it is now). Is my\n> impression correct? And will that remain in the longer term plans?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/878#issuecomment-168042873.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Starting with 5.x we will start to rely on npm for a lot of this, but will still have a similar process that allows the version numbers to be synched in python and JS. Eventually you will probably want to separate out your JS code into an npm package that the python package also includes in its sources.\n\nThe versioning here is critical obviously, and should prevent version mismatch problems, but it won't prevent problems with stale packages etc.  On a purely logical level, it seems to me that code that is tightly coupled, and that couldn't exist without both client and server sides, should be installed in an atomic way.  The piece I'm probably missing is what an npm package/installation provides over libraries in the kernel providing/pointing to their own resources (for the case of \"kernel-specific extensions\" -- it makes sense for primarily client-side extensions).\n @mdboom Among other things, it prevents the duplicate loading of dependencies. Some client-side libs will not function correctly if they are loaded multiple times. It also makes it much simpler to specify those client-side dependencies.\n > @mdboom Among other things, it prevents the duplicate loading of dependencies. Some client-side libs will not function correctly if they are loaded multiple times. It also makes it much simpler to specify those client-side dependencies.\n\nBut how does any of that apply to @SylvainCorlay's second category above (kernel-dependent extensions)?\n Kernel dependent extensions can provide their own list of JS dependencies, which get unioned with the front-end dependencies of the rest of the app.\n If I'm understanding correctly, there appears to be no way to install the Javascript library atomically along with the kernel-side library under the proposed scheme.  That is my fundamental objection with the design here.  The strong versioning goes a long way, but not all the way, toward ameliorating some of the problems with that.  The necessities/advantages of installing javascript content through npm seems to only apply to primarily client side extensions, and cut against the needs of kernel-dependent extensions, where atomic installation is important.\n\nAll that said, I'll apologize again for coming late to this discussion.  Certainly from matplotlib's perspective, this seems like a regression for both users (which have an additional manual installation step and the possibility for confusion and more toes to shoot oneself in) and developers (that must release packages on two different package frameworks, where before there was one), with little benefit _in our particular use case_.  But obviously, we are but one case and will go with the flow if the benefits for other kinds of extensions outweigh the disadvantages for our kind.\n With nbextensions 4.x, there isn't a really reliable way of doing what you\nare asking. This is mainly because nbextensions are not versioned in any\nway.\n\nWith the new npm based 5.x approach, code in the kernel or server will be\nable to specify which version of an npm package they require. A user might\nhave 5 different versions of that package installed, but we (and npm) will\nmake sure that only the needed one gets loaded. This allows you to have\nseparate installation of the Python and JS side, while still making sure\nversions match.\n\nOn Wed, Jan 6, 2016 at 7:54 AM, Michael Droettboom <notifications@github.com\n\n> wrote:\n> \n> If I'm understanding correctly, there appears to be no way to install the\n> Javascript library atomically along with the kernel-side library under the\n> proposed scheme. That is my fundamental objection with the design here. The\n> strong versioning goes a long way, but not all the way, toward ameliorating\n> some of the problems with that. The necessities/advantages of installing\n> javascript content through npm seems to only apply to primarily client side\n> extensions, and cut against the needs of kernel-dependent extensions, where\n> atomic installation is important.\n> \n> All that said, I'll apologize again for coming late to this discussion.\n> Certainly from matplotlib's perspective, this seems like a regression for\n> both users (which have an additional manual installation step and the\n> possibility for confusion and more toes to shoot oneself in) and developers\n> (that must release packages on two different package frameworks, where\n> before there was one), with little benefit _in our particular use case_.\n> But obviously, we are but one case and will go with the flow if the\n> benefits for other kinds of extensions outweigh the disadvantages for our\n> kind.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/878#issuecomment-169366206.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Jupyter kernels have some of the same issues, see https://github.com/jupyter/jupyter_core/pull/61\n\nYou want to consider one solution fixing both nbextensions and kernels specs at the same time.\n @damianavila , @parente and maybe more:\n\nJust want to know is there any decisions made about the extensions (including both front-end and server-side) installation and management mechanism.\n\nAs you may have known, there is a popular project (`https://github.com/ipython-contrib/IPython-notebook-extensions`) hosting many notebook extensions ( both front-end and server-side ), including an extensions `nbextension` provides a web UI to manage front-end extensions.\n@juhasch and other developer have made that project pip-install-able, but the current installation mechanism is sort of un-pythonic or un-notebook-nic. Since we already have `nbextensions.py` to install front-end extensions.\nActually, extensions usually have three parts (`nbextensions` for front-end, `extensions` for python files and `templates` for html templates), I wonder if we can modify `nbextensions.py` or adopt designs in `ipython-contrib/IPython-notebook-extensions` to support server-side extensions (the `extensions` and `templates` folder) in recent release?\n\nBesides, I also think, for Jupyter Notebook end user (not developers), just using command line `jupyter nbextension install <extension path or url>` is a good way to install extension.\n @haobibo there were several discussions about this and we have now a clear picture about the things needed and how to implemented. In fact, @ellisonbg started a PR for this and I am working in some other branches to complete that PR and add additional missing pieces (for instance, a way to enable/disable server based extensions ala nbextension).\n\nI should be easy to adapt the ipython-notebook-extensions into the new mechanism once that is finally merged. I would encourage you to try port some of the extension with the current proposed implementation (#879) to see if there is something we are missing.\n Damian, please coordinate with @jdfreder - he is also working on finishing\nup the PR as well.\n\nOn Thu, Feb 18, 2016 at 6:18 AM, Dami\u00e1n Avila notifications@github.com\nwrote:\n\n> @haobibo https://github.com/haobibo there were several discussions\n> about this and we have now a clear picture about the things needed and how\n> to implemented. In fact, @ellisonbg https://github.com/ellisonbg\n> started a PR for this and I am working in some other branches to complete\n> that PR and add additional missing pieces (for instance, a way to\n> enable/disable server based extensions ala nbextension).\n> \n> I should be easy to adapt the ipython-notebook-extensions into the new\n> mechanism once that is finally merged. I would encourage you to try port\n> some of the extension with the current proposed implementation (#879\n> https://github.com/jupyter/notebook/pull/879) to see if there is\n> something we are missing.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/878#issuecomment-185741823.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg Nice, I will ping him. Thanks for letting me know :+1: \n Since #879 was merged, I think this should be closed. There are other interesting discussions here but the thread is long and they get easily missed. I would have further discussions in new threads. Thoughts? \n","OK, the current state of this code allows you to install the following nbextensions:\n\nhttps://github.com/jdfreder/jupyter-tree-filter\nhttps://github.com/jdfreder/jupyter-lightsaber\nhttps://github.com/jdfreder/jupyter-lightsaber-yoda\n\nUsing the following sequence of commands (notebook doesn't have to be restarted):\n\n```\npip install jupyter-tree-filter\njupyter nbextension install --python jupyter-tree-filter\njupyter nbextension enable --python jupyter-tree-filter\n```\n\nI am going to work on cleaning it all up, but review can start.\n My diff comment got clobbered in an update, so reposting as a comment to make sure it's not lost: there's a third view, the `edit` view, that has a config file and supports extensions, just like notebook and tree. I think that view should be supported in the new approach as well. (We're using it in jupyter-incubator/contentmanagement for example).\n\nIt means adding one more if/else case in a few spots.\n Hopefully, I'm not late to any reviews but I just pulled this PR locally and tested out what I could. I noticed that that prior to rewrite `--python` is used to reference an extension to be installed from a Python package. I actually this is much more usable and friendly than the `--py` currently in place. Some code related comments are in-line as notes.\n\nEdit: Also not sure if now would be the right time to start writing some documentation on this, if so, let me know I can get started and we can build documentation/code in parallel.\n\nEdit 2: I have some questions/comments about logging but will wait until you are done with that part of the PR.\n @ellisonbg I worked on installing this branch and trying to migrate the https://github.com/jupyter-incubator/contentmanagement extension to using this to install/enable instead of its own custom CLI (https://github.com/jupyter-incubator/contentmanagement/blob/master/jupyter_cms/extensionapp.py).\n\nHere's what I found:\n1. `jupyter nbextension install --py jupyter_cms` works as expected as written and with various additional params (`--symlink`, `--user`)\n2. `jupyter nbextension enable --py jupyter_cms` _missed_ the `editor` section I specified in `_jupyter_nbextension_path`\n3. As expected, there was no command provided in the new `jupyter nbextension * --py` implementation for enabling _server-side_ extensions which `jupyter_cms` has\n4. When I try to use the existing CLI that works in 4.1, the  `jupyter cms activate` command raises the exception below. So overriding the CLI for install/activate is not backward compatible at the moment.\n\n```\n[ExtensionActivateApp] Activating jupyter_cms notebook server extensions\nTraceback (most recent call last):\n  File \"/Users/parente/miniconda3/envs/notebook-4.2-nbexts/bin/jupyter-cms\", line 11, in <module>\n    sys.exit(main())\n  File \"/Users/parente/miniconda3/envs/notebook-4.2-nbexts/lib/python3.5/site-packages/jupyter_cms/extensionapp.py\", line 226, in main\n    ExtensionApp.launch_instance()\n  File \"/Users/parente/miniconda3/envs/notebook-4.2-nbexts/lib/python3.5/site-packages/traitlets/config/application.py\", line 589, in launch_instance\n    app.start()\n  File \"/Users/parente/miniconda3/envs/notebook-4.2-nbexts/lib/python3.5/site-packages/jupyter_cms/extensionapp.py\", line 223, in start\n    super(ExtensionApp, self).start()\n  File \"/Users/parente/miniconda3/envs/notebook-4.2-nbexts/lib/python3.5/site-packages/traitlets/config/application.py\", line 276, in start\n    return self.subapp.start()\n  File \"/Users/parente/miniconda3/envs/notebook-4.2-nbexts/lib/python3.5/site-packages/jupyter_cms/extensionapp.py\", line 109, in start\n    self.enable_server_extension('jupyter_cms')\n  File \"/Users/parente/miniconda3/envs/notebook-4.2-nbexts/lib/python3.5/site-packages/jupyter_cms/extensionapp.py\", line 92, in enable_server_extension\n    server_cm.update('jupyter_notebook_config', cfg)\n  File \"/Users/parente/projects/jupyter/ellisonbg/notebook/services/config/manager.py\", line 33, in update\n    self._write_config_manager.update(section_name, new_data)\nAttributeError: 'ConfigManager' object has no attribute '_write_config_manager'\n```\n\nTo double-check, I tried nbgrader's CLI. It, too, raises an error because the base class nbextension implementation has changed.\n\n```\n[ExtensionActivateApp] Activating create_assignment nbextension\nTraceback (most recent call last):\n  File \"/Users/parente/miniconda3/envs/notebook-4.2-nbexts/bin/nbgrader\", line 11, in <module>\n    sys.exit(main())\n  File \"/Users/parente/miniconda3/envs/notebook-4.2-nbexts/lib/python3.5/site-packages/nbgrader/apps/nbgraderapp.py\", line 232, in main\n    NbGraderApp.launch_instance()\n  File \"/Users/parente/miniconda3/envs/notebook-4.2-nbexts/lib/python3.5/site-packages/jupyter_core/application.py\", line 267, in launch_instance\n    return super(JupyterApp, cls).launch_instance(argv=argv, **kwargs)\n  File \"/Users/parente/miniconda3/envs/notebook-4.2-nbexts/lib/python3.5/site-packages/traitlets/config/application.py\", line 589, in launch_instance\n    app.start()\n  File \"/Users/parente/miniconda3/envs/notebook-4.2-nbexts/lib/python3.5/site-packages/nbgrader/apps/nbgraderapp.py\", line 225, in start\n    super(NbGraderApp, self).start()\n  File \"/Users/parente/miniconda3/envs/notebook-4.2-nbexts/lib/python3.5/site-packages/jupyter_core/application.py\", line 256, in start\n    self.subapp.start()\n  File \"/Users/parente/miniconda3/envs/notebook-4.2-nbexts/lib/python3.5/site-packages/nbgrader/apps/extensionapp.py\", line 207, in start\n    super(ExtensionApp, self).start()\n  File \"/Users/parente/miniconda3/envs/notebook-4.2-nbexts/lib/python3.5/site-packages/traitlets/config/application.py\", line 276, in start\n    return self.subapp.start()\n  File \"/Users/parente/miniconda3/envs/notebook-4.2-nbexts/lib/python3.5/site-packages/nbgrader/apps/extensionapp.py\", line 99, in start\n    self.enable_nbextension(\"create_assignment/main\")\nAttributeError: 'ExtensionActivateApp' object has no attribute 'enable_nbextension'\n```\n\nCurrent takeaways:\n- If server-side extensions are not going to also be supported, then I still have to provide a custom CLI for activating them.\n- If there's no way for this change to go in without breaking the current nbextension CLI overrides used in nbgrader, jupyter-incubator/declarativewidgets, jupyter-incubator/dashboards, etc., \n  then I'll have to do some version detection to support install/activate on both <4.2 and >4.1.\n\nSmall update: Here's the metadata I put into `jupyter_cms` to test this.\n\n``` python\ndef _jupyter_nbextension_paths():\n    return [{\n        'section': 'notebook',\n        'src': 'nbextension',\n        'dest': 'jupyter_cms',\n        'require': 'jupyter_cms/notebook/main'\n    },\n    {\n        'section': 'tree',\n        'src': 'nbextension',\n        'dest': 'jupyter_cms',\n        'require': 'jupyter_cms/dashboard/main'\n    },\n   # below does not get picked up\n    {\n        'section': 'edit',\n        'src': 'nbextension',\n        'dest': 'jupyter_cms',\n        'require': 'jupyter_cms/editor/main'\n    }]\n```\n > If server-side extensions are not going to also be supported, then I still have to provide a custom CLI for activating them.\n\nThis is really important... otherwise people working with nbextension/serverextension complex extensions should implement an additional CLI as @parente mentioned or alternative a custom configmanager to write config outside the user space (since the current config manager implementation on this PR only writes to the user space)\n\nWhat about adding the server extension info at the python metadata level? I mean adding a field to load that info if it is provided... In that way we should only modify `enable_nbextension_python` to be able to write the server-related config in NotebookApp.server_extensions\n\nI mean:\n\n``` python\ndef _jupyter_nbextension_paths():\n    return [{\n        'section': 'notebook',\n        'src': 'amd',\n        'dest': 'jupyter-lightsaber',\n        'require': 'jupyter-lightsaber/index',\n        'server': ['my_server_ext1', 'my_server_ext2']\n    }]\n```\n\nand then make `enable_nbextension_python` able to understand this `server` key and write to the NotebookApp.server_extensions space in the `diff` being created.\n\n> If there's no way for this change to go in without breaking the current nbextension CLI overrides used in nbgrader, jupyter-incubator/declarativewidgets, jupyter-incubator/dashboards, etc., then I'll have to do some version detection to support install/activate on both <4.2 and >4.1.\n\nNot sure if it will be a nice way to not break this since the config manager implementation has changed a lot on this PR... version detection seems like a good alternative.\n Additionally, the CLI should offer some keyword to enable/disable the server part... I guess... or maybe an independent CLI for the server part...\n I would probably treat server and client extensions separately\n > I would probably treat server and client extensions separately\n\nOK, I started to prototype a server extension CLI on top of this PR... I will ping you when it is available to check...\n I have to continue working on this but it starts to look promising :wink: (forget about the `Unrecognized JSON config file version, assuming version 1` for now):\n\n``` shell\n(notebook_dev)damian-S400CA :: /media/data/devel/continuum :: \n$ jupyter serverextension list\n[ListServerExtensionsApp] config dir: /home/damian/.jupyter\n[ListServerExtensionsApp] config dir: /home/damian/miniconda3/envs/notebook_dev/etc/jupyter\n[ListServerExtensionsApp] config dir: /usr/local/etc/jupyter\n[ListServerExtensionsApp] config dir: /etc/jupyter\n\n(notebook_dev)damian-S400CA :: /media/data/devel/continuum :: \n$ jupyter serverextension enable nbconda.nbextension --sys-prefix\n[EnableServerExtensionApp] Unrecognized JSON config file version, assuming version 1\n\n(notebook_dev)damian-S400CA :: /media/data/devel/continuum :: \n$ jupyter serverextension list\n[ListServerExtensionsApp] config dir: /home/damian/.jupyter\n[ListServerExtensionsApp] config dir: /home/damian/miniconda3/envs/notebook_dev/etc/jupyter\n[ListServerExtensionsApp]     ['nbconda.nbextension']\n[ListServerExtensionsApp] config dir: /usr/local/etc/jupyter\n[ListServerExtensionsApp] config dir: /etc/jupyter\n\n(notebook_dev)damian-S400CA :: /media/data/devel/continuum :: \n$ jupyter serverextension disable nbconda.nbextension --sys-prefix\n[DisableServerExtensionApp] Unrecognized JSON config file version, assuming version 1\n\n(notebook_dev)damian-S400CA :: /media/data/devel/continuum :: \n$ jupyter serverextension list\n[ListServerExtensionsApp] config dir: /home/damian/.jupyter\n[ListServerExtensionsApp] config dir: /home/damian/miniconda3/envs/notebook_dev/etc/jupyter\n[ListServerExtensionsApp] config dir: /usr/local/etc/jupyter\n[ListServerExtensionsApp] config dir: /etc/jupyter\n\n$ cat notebook/nb_conda/nb_conda/__init__.py \nfrom ._version import version_info, __version__\n\ndef _jupyter_nbextension_paths():\n    return [{\n        'section': 'notebook',\n        'src': 'nbextension/static',\n        'dest': 'nb_conda',\n        'require': 'nb_conda/main'\n    }]\n\ndef _jupyter_server_extension_paths():\n    return [{\n        'require': 'nb_conda.nbextension'\n    }]\n\n(notebook_dev)damian-S400CA :: /media/data/devel/continuum :: \n$ jupyter serverextension enable --py nb_conda --sys-prefix\n[EnableServerExtensionApp] Unrecognized JSON config file version, assuming version 1\n\n(notebook_dev)damian-S400CA :: /media/data/devel/continuum :: \n$ jupyter serverextension list\n[ListServerExtensionsApp] config dir: /home/damian/.jupyter\n[ListServerExtensionsApp] config dir: /home/damian/miniconda3/envs/notebook_dev/etc/jupyter\n[ListServerExtensionsApp]     ['nb_conda.nbextension']\n[ListServerExtensionsApp] config dir: /usr/local/etc/jupyter\n[ListServerExtensionsApp] config dir: /etc/jupyter\n\n(notebook_dev)damian-S400CA :: /media/data/devel/continuum :: \n$ jupyter serverextension disable --py nb_conda --sys-prefix\n[DisableServerExtensionApp] Unrecognized JSON config file version, assuming version 1\n\n(notebook_dev)damian-S400CA :: /media/data/devel/continuum :: \n$ jupyter serverextension list\n[ListServerExtensionsApp] config dir: /home/damian/.jupyter\n[ListServerExtensionsApp] config dir: /home/damian/miniconda3/envs/notebook_dev/etc/jupyter\n[ListServerExtensionsApp] config dir: /usr/local/etc/jupyter\n[ListServerExtensionsApp] config dir: /etc/jupyter\n(notebook_dev)damian-S400CA :: /media/data/devel/continuum :: \n```\n In person review TODO, and summary of necessary changes:\n- [x] Add uninstall\n- [x] `--py` and `--python` should work\n- [x] List command should format content\n- [x] Add `editor` and `terminal` config sections (main js)\n- [ ] Test single file nbextension case\n- [x] The nbextension_\\* variables in notebookapp are not being used\n- [ ] Remove whitespace changes\n- [x] nbextensions.py needs audit for rotted code\n- [x] make sections for enable/disable a list\n- [x] don't use json.load and io.read to read the config files\n @jdfreder I am working on some of this items... so, some questions:\n- List command should format content\n\nformatted in which way?\n- nbextensions.py needs audit for rotted code\n\nCan you explain a little bit more? I don't get the idea from this line...\n- make sections for enable/disable a list\n\nCan you point me to the line/s where you see this need?\n- don't use json.load and io.read to read the config files\n\nok, what do you suggest to use?\n\nThanks!!\n > formatted in which way?\n\nRight now the output looks something like this:\n\n```\n[ListNBExtensionsApp] config dir: /home/jon/.jupyter/nbconfig\n[ListNBExtensionsApp] config dir: /usr/etc/jupyter/nbconfig\n[ListNBExtensionsApp] config dir: /usr/local/etc/jupyter/nbconfig\n[ListNBExtensionsApp]   section: notebook\n[ListNBExtensionsApp]     {u'load_extensions': {u'jupyter-lightsaber/index': True}}\n[ListNBExtensionsApp] config dir: /etc/jupyter/nbconfig\n```\n\nAnything is better than that.  For example, maybe something like this:\n\n```\n[ListNBExtensionsApp] config dir: /home/jon/.jupyter/nbconfig\n[ListNBExtensionsApp] config dir: /usr/etc/jupyter/nbconfig\n[ListNBExtensionsApp] config dir: /usr/local/etc/jupyter/nbconfig\n[ListNBExtensionsApp]   section: notebook\n[ListNBExtensionsApp]     enabled:\n[ListNBExtensionsApp]       jupyter-lightsaber/index\n[ListNBExtensionsApp] config dir: /etc/jupyter/nbconfig\n```\n\n> Can you explain a little bit more? I don't get the idea from this line...\n\nThere are functions and variables in nbextensions.py that are unused by any other code, they should be removed.\n\n> Can you point me to the line/s where you see this need?\n\nJust at the CLI the user should be able to pass multiple things in\n\n> ok, what do you suggest to use?\n\nMin suggests ConfigManager, [see discussion above](https://github.com/jupyter/notebook/pull/879#discussion_r51634649).\n @ellisonbg just add @jdfreder and a few other push access to your fork (https://github.com/ellisonbg/notebook/settings/collaboration) so that they/we can take over. \n Let me know if there's anything I can do to help finish this up.\n @ellisonbg @jdfreder @minrk @Carreau, I pushed a PR: https://github.com/ellisonbg/notebook/pull/1 against this one for the server part we need and I discussed above in some of my comments. It is incomplete (sorry about that) but soon (2 days) I am getting into vacation (and not sure if I can finish it).\nI think this is an import part for the whole nbextensions picture, so putting it out there so, hopefully, it can be integrated in the case the discussion keep going after I enter my vacation (the most probably thing to happen).\n I'm going to take over this now, using @damianavila 's branch.  @ellisonbg expect a PR today with all of the changes.\n Okay -- waiting for @ellisonbg to merge https://github.com/ellisonbg/notebook/pull/2\n\nOnce it's merged we can remove WIP from the PR title and continue the review/discussion\n ... Alternatively I can open a separate PR with these commits...\n I have added @jdfreder and @damianavila to my repo so they can continue...\n\nOn Wed, Feb 24, 2016 at 12:27 PM, Jonathan Frederic <\nnotifications@github.com> wrote:\n\n> ... Alternatively I can open a separate PR with these commits...\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/879#issuecomment-188440947.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > I have added @jdfreder and @damianavila to my repo so they can continue...\n\nThanks!\n\nOkay, I think I've addressed all of the review comments up to now.  Also, I've added @damianavila 's server extension work, so that will need review too.  Alternatively, I could pull that piece at and let him open a separate PR with it.\n Thanks @jdfreder and @damianavila !!!\n\nOn Wed, Feb 24, 2016 at 12:49 PM, Jonathan Frederic <\nnotifications@github.com> wrote:\n\n> I have added @jdfreder https://github.com/jdfreder and @damianavila\n> https://github.com/damianavila to my repo so they can continue...\n> \n> Thanks!\n> \n> Okay, I think I've addressed all of the review comments up to now. Also,\n> I've added @damianavila https://github.com/damianavila 's server\n> extension work, so that will need review too. Alternatively, I could pull\n> that piece at and let him open a separate PR with it.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/879#issuecomment-188448471.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Looks like travis is sad :(\n High level question:\n\nThis seems to solve the 'config in envs' problem twice. It adds _both_ directory-hierarchy to the ConfigManager (:tada:) _and_ adds server-side traitlets config for the same values.\n\nIt seems to me that the `_write_config_data` should be writing to `[prefix]/nbconfig/[section]`, not `jupyter_notebook_config`. Or is there a reason for the config to be written to the server config that I'm not seeing?\n > It seems to me that the _write_config_data should be writing to [prefix]/nbconfig/[section], not jupyter_notebook_config. Or is there a reason for the config to be written to the server config that I'm not seeing?\n\nThe server-side extensions are only picked up from the `jupyter_notebook_config` in my experience.\n\nPlus, I think the `[prefix]/nbconfig/[section]` files are all exposed via the REST API so that the frontend JS can load them. If there is a way to put a server config in there, it seems bad that the entire server config could be read by a client.\n @parente that's not quite what I'm asking. The way this handles server_extensions makes sense. What makes less sense to me is that it adds server config traits _for frontend config_, in addition to the existing place to store frontend config. This stands out to me because it is using the same logic we use for updating frontend config, it's just writing it to the server's config file instead of the normal location.\n @minrk Got it. I misunderstood your question.\n > It seems to me that the _write_config_data should be writing to [prefix]/nbconfig/[section], not jupyter_notebook_config\n\nYep, sounds reasonable to write to the nbconfig place...\n Okay, comments address and commits pushed.  Should we rename the `serverextension` command to `nbserverextension` to match the new dict traitlet?\n\nWhile we discuss I'm going to write some unit tests for this...\n Server ext implementation finished, unit tests added, I think this is good..\n Success\n > Success\n\nhave a few minutes to review, will destroy you in comments :-P (just kidding)\n > have a few minutes to review, will destroy you in comments :-P (just kidding)\n\nSure, appear.in review or on GH?\n > appear.in or  GH\n\nGH for now :-P, I need to read the code :-)\n Ah okay, sounds good!  Latest commits address your comments\n > Ah okay, sounds good! Latest commits address your comments\n\nAlso you are allowed to challenge what I write. I don't want to sound too directive. These are mostly thoughts, I just express myself concisely.\n Ok, we (me and @neseb) did a quick review. I'll re-dive into it, more deeply later and think about the architecture more. . \nThanks for taking care of that !\n Okay @Carreau , your review comments have been addressed :)\n > Okay @Carreau , your review comments have been addressed :)\n\nThanks, I'll start my monday by re-reviewing in more details. \n I'm pushing some fixes to https://github.com/ellisonbg/notebook/pull/6\n :hankey: we cannot get rid of `verbose=1`  it has been released.\n @minrk, do you remember why you used `verbose=1` in https://github.com/ipython/ipython/pull/4778 instead of relying on loggers? \n BTW,  we are supposes to backport that to 4.2 right ?\n DO not seem to work:\n\n```\njupyter nbextension install --py jupyter-lightsaber-yoda\n[InstallNBExtensionApp] Bad message (TypeError('not all arguments converted during string formatting',)): {'pathname': '/Users/bussonniermatthias/dev/notebook/notebook/nbextensions.py', 'stack_info': None, 'levelno': 20, 'processName': 'MainProcess', 'exc_info': None, 'relativeCreated': 32.5620174407959, 'created': 1456781344.239691, 'exc_text': None, 'msecs': 239.69101905822754, 'funcName': 'install_nbextension_python', 'module': 'nbextensions', 'threadName': 'MainThread', 'args': ('jupyter-lightsaber-yoda', 'jupyter-lightsaber-yoda/index'), 'msg': '/Users/bussonniermatthias/anaconda3/lib/python3.5/site-packages/jupyter-lightsaber-yoda/amd', 'levelname': 'INFO', 'filename': 'nbextensions.py', 'lineno': 215, 'process': 61793, 'name': 'InstallNBExtensionApp', 'thread': 140735167898368}\n[InstallNBExtensionApp] Making directory: /usr/local/share/jupyter/nbextensions/jupyter-lightsaber-yoda/\n[InstallNBExtensionApp] Copying: /Users/bussonniermatthias/anaconda3/lib/python3.5/site-packages/jupyter-lightsaber-yoda/amd/index.js -> /usr/local/share/jupyter/nbextensions/jupyter-lightsaber-yoda/index.js\n```\n\nThen:\n\n```\n$ jupyter nbextension enable --py jupyter-lightsaber-yoda\n```\n\nSay nothing, can you print \"sucessfully enabled\" ?\n Then notebook complains:\n\n```\nFailed to load resource: the server responded with a status of 404 (Not Found)\nhttp://localhost:8889/nbextensions/jupyter-lightsaber-yoda.js Failed to load resource: the server responded with a status of 404 (Not Found)\n:8889/static/notebook/js/built/1.main.min.js:145 Failed to load extension: Array[1] Error: Script error for \"nbextensions/jupyter-lightsaber-yoda\"(\u2026)(anonymous function) @ :8889/static/notebook/js/built/1.main.min.js:145\n:8889/static/notebook/js/built/1.main.min.js:42573 Dynamically requiring kernel.js, `requirejs` is  (deps, callback, errback, optional) {\n\n        //Find the right context, use default\n        var context, config,\n            contextName = defContextName;\n\n        // Determine if have confi\u2026\n```\n Looks like our recent changes broke the tests too.  And yes, we are supposed to backport this to 4.2\n > do you remember why you used verbose=1 in ipython/ipython#4778 instead of relying on loggers?\n\nMainly that:\n1. I think the output we had (initially, at least), should go to stdout, unlike logging which goes to stderr\n2. It shouldn't include the `[ListNBExtensionsApp]` log prefix we have on applications\n\nBoth of which point to print being the right call to make.\n\nThe stdout bit isn't such a huge deal, but we can solve the log format with:\n\n``` python\n    def _log_format_default(self):\n        return \"%(message)s\"\n```\n > The stdout bit isn't such a huge deal, but we can solve the log format with:\n\nThanks, addressed in the last commit.\n @Carreau after fiddling with the list subcommand I think +/- makes more sense, O/X is kind of ambiguous. \n heck, maybe we should just print the full `enabled:` `disabled:` by each one?\n /me bump.  Any reason to not merge this?\n  Yes, \n\nNo enough documentation (I have no clue how to write a python package that is a nbextension), not a standalone example of extension that works, \nno testing from the concerned parties that want to use that. \n\nI want to review more, but I don't have enough time today. \n Hey @damianavila, do you think either you or other folks from Continuum could test this hard and provide us with feedback? This effort was largely motivated by trying to provide a stable api/setup for folks distributing lots of extensions, such as yourselves, and it's getting already pretty complex.  Without some hands-on testing and feedback from you all, it will be really hard to do a good job here. But this is blocking other work...\n One thing that it should have for sure before merging is actual documentation. This is a lot of new code, and at least a basic explanation to go into the docs + a toy example should be provided. Otherwise we're going to be answering a million questions about this on the mailing list forever.  \n\nOur docs have been historically problematic, and @willingc is leading a fantastic charge to improve that critical aspect of the project.  We should make sure that we're not adding debt on that front...\n @fperez, We (@ellisonbg, @jdfreder and I) were talking about docs for this last week. Brian, I will start going through the files and add some docstrings (for now, I'll send them in a PR on your dev branch). We can iterate docs next week from there. \n Great! One option could be to write the docs in a separate PR in parallel if that makes life easier for you (dunno who was planning on writing what).  If we see that the docs are coming along, it's no problem to merge one part and the docs separately.  What I don't want is to merge without any concrete plan for docs to show up: that's how we dug the giant hole you're working so hard to get us out of :)\n @fperez and @ellisonbg : We're going to get @bollwyvl and @malev to work with @jdfreder to test this PR hard this coming week and contribute in whatever way necessary to help bring it to completion (e.g. @Carreau concerns about docs, which it sounds like @willingc has already started on).\n I think this is in pretty good shape, but I think the bare minimum is to document what the `_get_nbextension_paths()`, `_get_serverextension_paths()` should return. I'm trying to test using this for the ipyparallel clustsers tab extension (which is both a server and nbextension). I can't find that, and it's not clear from the code.\n We need to be careful about the defaults for user/prefix, etc. The default for installation is system-wide. This PR makes the default for _enable/disable_ also system-wide, when it is `--user` in 4.1. Is that what we want? It doesn't seem like it.\n > @fperez and @ellisonbg : We're going to get @bollwyvl and @malev to work with @jdfreder to test this PR hard this coming week and contribute in whatever way necessary to help bring it to completion (e.g. @Carreau concerns about docs, which it sounds like @willingc has already started on).\n\nThanks, it is really appreciated. \n > Thanks, it is really appreciated.\n\n+1 ~!\n Hey @bollwyvl you need to add that email to you GitHub account if you want credit for those commits!  I notice they are missing your gravatar.\n Also @bollwyvl I pushed a couple commits so if you have some more in the works you may need to rebase\n re:baseball:ing...\n > reing...\n\nWait!  Let me fix the whitespace problems :(\n Okay @bollwyvl it should be fixed\n So, when we install/enable stuff, should we be checking for whether:\n- serverextension\n  - the `module` exists and is importable\n- nbextension\n  - the `require` actually exists (can't actually check whether it's any good, i guess)\n    :question: \n\nAlso, after a user runs `nbextension install`, I'm going to bet there are going to be the issues/gitter/mail threads of \"why doesn't my stuff show up?\". Can we at least leave a breadcrumb after running `install` saying, \n\n> If you want to load the `<nbextension>` on every launch of the `<section>`, run:\n> \n> ``` shell\n> jupyter nbextension enable <all the other args>\n> ```\n > So, when we install/enable stuff, should we be checking for whether:\n\nYes\n\n> Also, after a user runs nbextension install, I'm going to bet there are going to be the issues/gitter/mail threads of \"why doesn't my stuff show up?\". Can we at least leave a breadcrumb after running install saying,\n\nAgreed -\n\nI think I'm not in the popular opinion by saying this, but I'm still of the camp that install implies enable - that's not to say that enable/disable functionality shouldn't exist, but that install should enable automatically by default.  It's not often that someone wants to install something and then use it later...\n\nThat said, I'd be happy if the behavior was changed accordingly.\n The consensus behavior makes sense for pure kernel things... Custom\nwidgets... That's about all i can think of. But if you're bringing in, say,\ncesiumjs, that's a pretty compelling case.\n\nAutoenable-after-install seems like a thing that a maintainer should be\nable to specify in their path spec (also, why are these _ methods?)... But\neven then, there's still the extra step. As packagers for our initial\nconda-related extensions, we're just going to treat \"installed in the env\"\nas \"installed, installed (again) and enabled,\" at the package level.\n\nAs we talk more about the path spec, validation, etc. should we go ahead\nand make a JSON schema? It's not really documentation, but it's at least a\nstronger contract...\n\nOn 14:24, Mon, Mar 7, 2016 Jonathan Frederic notifications@github.com\nwrote:\n\n> So, when we install/enable stuff, should we be checking for whether:\n> \n> Yes\n> \n> Also, after a user runs nbextension install, I'm going to bet there are\n> going to be the issues/gitter/mail threads of \"why doesn't my stuff show\n> up?\". Can we at least leave a breadcrumb after running install saying,\n> \n> Agreed -\n> \n> I think I'm not in the popular opinion by saying this, but I'm still of\n> the camp that install implies enable - that's not to say that\n> enable/disable functionality shouldn't exist, but that install should\n> enable automatically by default. It's not often that someone wants to\n> install something and then use it later...\n> \n> That said, I'd be happy if the behavior was changed accordingly.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/879#issuecomment-193407864.\n > The consensus behavior makes sense for pure kernel things... Custom\n> widgets... That's about all i can think of. But if you're bringing in, say,\n> cesiumjs, that's a pretty compelling case.\n> \n> Autoenable-after-install seems like a thing that a maintainer should be\n> able to specify in their path spec\n\nDoesn't \"installed\" mean require-able, while enabled, means \"will actually trigger a script on notebook load\" ?\n\nIf so why does `cesium.js` need to be activated ? Or what am I missing ?\n Cesium is only needed once a user decides they want a map widget, say, in\ntheir kernel. Thus doesn't need to be enabled.\n\nIf you had latent map data in your cells, and somehow wanted to signal to a\nuser that they could look at their notebook _as_ a map, they'd need it\nenabled (to at least give them button to press). Of course, you could\nchoose to have nested requires... Outer layer draws the button, inner layer\nloads the heavy stuff.\n\nAgain, that's about the only case i can think of, and still doesn't address\nthe package manager install part. But getting off topic now! Should have\nanother pr out tonight or tomorrow with more validation stuff, tests.\n\nOn 19:57, Mon, Mar 7, 2016 Matthias Bussonnier notifications@github.com\nwrote:\n\n> The consensus behavior makes sense for pure kernel things... Custom\n> widgets... That's about all i can think of. But if you're bringing in, say,\n> cesiumjs, that's a pretty compelling case.\n> \n> Autoenable-after-install seems like a thing that a maintainer should be\n> able to specify in their path spec\n> \n> Doesn't \"installed\" mean require-able, while enabled, means \"will actually\n> trigger a script on notebook load\" ?\n> \n> If so why does cesium.js need to be activated ? Or what am I missing ?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/879#issuecomment-193533068.\n > Autoenable-after-install seems like a thing that a maintainer should be\n> able to specify in their path spec\n\nYeah, the package dicts could have an `enable: True/False` flag.\n > Yeah, the package dicts could have an enable: True/False flag.\n\nSeconded. Looking for :smiling_imp: advocate!\n\nNot ready for PR yet, but here's what my output looks like for the validation:\n\n``` shell\n# FAIL\nnbollweg@rocinante:~/Documents/projects$ jupyter nbextension install --py nbpresent --overwrite --symlink --sys-prefix\nUnrecognized JSON config file version, assuming version 1\nUnrecognized JSON config file version, assuming version 1\n/Users/nbollweg/Documents/projects/nbpresent/nbpresent/static/nbpresent nbpresent js/nbpresent.minzzzz\nRemoving: /Users/nbollweg/miniconda/envs/nbpresent42/share/jupyter/nbextensions/nbpresent\nSymlinking: /Users/nbollweg/miniconda/envs/nbpresent42/share/jupyter/nbextensions/nbpresent -> /Users/nbollweg/Documents/projects/nbpresent/nbpresent/static/nbpresent\nValidating: problems found:\n X   require: /Users/nbollweg/miniconda/envs/nbpresent42/share/jupyter/nbextensions/nbpresent/js/nbpresent.minzzzz.js\n OK  section: notebook\nFull spec: {'require': 'js/nbpresent.minzzzz', 'dest': 'nbpresent', 'section': 'notebook', 'src': 'static/nbpresent'}\n\n# WIN\nnbollweg@rocinante:~/Documents/projects$ jupyter nbextension install --py nbpresent --overwrite --symlink --sys-prefix\nUnrecognized JSON config file version, assuming version 1\nUnrecognized JSON config file version, assuming version 1\n/Users/nbollweg/Documents/projects/nbpresent/nbpresent/static/nbpresent nbpresent js/nbpresent.min\nRemoving: /Users/nbollweg/miniconda/envs/nbpresent42/share/jupyter/nbextensions/nbpresent\nSymlinking: /Users/nbollweg/miniconda/envs/nbpresent42/share/jupyter/nbextensions/nbpresent -> /Users/nbollweg/Documents/projects/nbpresent/nbpresent/static/nbpresent\nValidating:  OK\n```\n Here's an experiment in an mixed server extension with multiple versioned nbextensions.\n\nhttps://github.com/ContinuumIO/versioned-nbextension-notebook42\n\nI am not advocating this approach, necessarily, just seeing if someone could build something this way.\n\nNoted issues:\n- with the code as is, after running install/enable, one ends up with `foo-tree/0.1.0/index` and `foo-notebook/0.1.0/index` being enabled\n  - if one then later installed `foo=0.2.0`, all the `0.1.0` assets would still be installed and enabled (if enabled)\n  - i guess this leaves the front-end (or the package manager) to deal with multiple versions, either by:\n  - have the package manager handle disabling/uninstalling\n  - have the frontend load multiple versions of your entry point, i.e. `index.js`\n    - have some other mechanism determine at some signaled time which version runs\n\nI don't think we need to tackle/document this on this PR, but i figured it was worth sharing as a development on top of earlier things we had discussed. Matplotlib, for example, could probably ship this way, as it doesn't load by default, and thus would be safe to have multiple versions installed.\n New PR up: https://github.com/ellisonbg/notebook/pull/10\n\nAlso, is this a thing that is easy to fix (like put a version somewhere):\n\n```\nUnrecognized JSON config file version, assuming version 1\n```\n Question:\nWe have a number of extensions that do all three of:\n- include front-end assets\n- add web services\n- replace parts of the notebook stack: kernel_spec_manager_class, etc.\n\nWe're looking pretty good on the first two, which will bring much sanity, but the situation is not so rosy for the last.\n\nWe accomplish this variously, either by configuring at `enable` time:\n- https://github.com/Anaconda-Server/nb_conda_kernels/blob/master/nb_conda_kernels/install.py#L60\n  Or by patching at runtime:\n- https://github.com/Anaconda-Server/nb_conda/blob/master/nb_conda/nbextension/handlers.py#L203\n\nThe difference being on when it is reasonable to have manipulated the state of the application.\n\nWe'll still have to maintain an explicit configure step to handle these config changes, which will result in a lot of duplicated effort. Also, I don't really like the runtime patching approach.\n\nWhat would be the fall-out of extending the server extension [spec](https://github.com/ellisonbg/notebook/pull/10/files#diff-a8dbeef5c260c59149ae8f09b88b4dacR299) to enable an update to the config?\nSo:\n\n``` json\n{\n  \"module\": \"my_extension\",\n  \"config\": {\n    \"NotebookApp\": {\n      \"kernel_spec_manager_class\": \"my_extension.MyKernelManager\"\n    }\n  } \n}\n```\n\nOn `enable`, this would set the value. On `disable`, it would unset the values. All the path stuff (`--user`, `--sys-prefix`, etc.) are already known. Is there logic already for doing that kind of un-configuration, or are we stuck rewriting this each time until we have the `conf.d` bag-o'-files?\n > New PR up: ellisonbg#10\n\nThanks!  Merged\n\n> What would be the fall-out of extending the server extension spec to enable an update to the config?\n> So:\n\nTBH, I'm not sure, but I am curious, how many additional use cases are there for something like this?  Also, can this be set by traitlet config automagically by conda?  There is a specific directory to conda for jupyter config, right?\n > Thanks! Merged\n\nThanks for the quick turn! It added some testable surface, with the new `_enable` and `_disable` functions, but I think it's worth it. Also, having everything go through the limited, pythonic endpoints ((un)install/toggle) feels good.\n\n> how many additional use cases are there for something like this?\n\nI think it's difficult to know! It really comes down to whether a serverextension is defintely, exactly something that affects the environment at runtime, or is it something that when you enable it, it brings some ability to modify the rocket before it takes off.\n\nMany are going to fall in that Enterprise:tm: world: more auditing, more permissions, more hassel.\n- We have some stuff around auth that we're working on, and need to do some pretty deep stuff, requiring lots of subclassing jumping jacks to basically get one more parameter into a function... but that's a whole different story.\n- We have some instrumentation of the ContentsManager (composable middleware, someday, please!) that we'd like to harvest some data off of\n\nI was just throwing it out there, as the bag-o-files will be the the right approach long term, but we already have stuff that would benefit from a \"serverextensions may update the config\". We'll end up doing something bag-like for anaconda (where post-link scripts are a no-no), but still would like to have these things work nicely on `conda install`. \n I think it's okay, if you're willing to do the legwork.  I worry about scope creep of this PR though, would you want to do that in a follow up PR or do you think it's simple enough to do here?\n > I think it's okay, if you're willing to do the legwork. I worry about scope creep of this PR though, would you want to do that in a follow up PR or do you think it's simple enough to do here?\n\nWell, it would reduce the legwork I have to do on some of the extensions, as they would be able to entirely drop their `install.py`. But, unlike auto-enable, I feel like it will save potentially a lot of code down the road.\n\nAlso working on some doc right now....\n >  I worry about scope creep of this PR though, \n\nYep, let's table that config stuff for the time being.\n\nHere's the doc stuff:\n- [PR](https://github.com/ellisonbg/notebook/pull/12)\n-  [Notebook](https://nbviewer.jupyter.org/github/bollwyvl/notebook/blob/d54ed564af30392d2abd5192332fba9ed7f0f8c6/docs/source/examples/Notebook/Distributing%20Jupyter%20Extensions%20as%20Python%20Packages.ipynb)\n Aside from doc, this is probably the feature set we're looking for. I'm going to go back to validating with some existing extensions... And open some tickets for:\n- [x] `enable` in nbext path spec?\n- [x] `config` in srvext path spec?\n- [x] JSON schema for specs?\n\nLooking forward to feedback!\n > enable in nbext path spec?\n\nplease :D \n I assume this just has to be rekicked?\n\n> https://travis-ci.org/jupyter/notebook/jobs/115141335\n Kicked\n @bollwyvl Thank you! The notebook is hugely helpful. No need for you to write rst docs. I'm going to look at the notebook that you submitted and see where tweaking the rst docs make sense. Also will take a look at some of the stuff that @jdfreder and I have been working on for ipywidgets docs to see if some of that makes sense here. I'll ping you both when I have the rst content changes.\n @willingc ha, already did some looking. Perhaps off of here:\n\nhttps://jupyter.readthedocs.org/en/latest/install.html#next-steps\n @bollwyvl Would you please take a look at some of the changes that I made to the very helpful notebook that you put together? Most of it is formatting changes along with some text. Please let me know if I introduced any inaccuracies while wordsmithing. Thanks :-) @jdfreder If you have time too that would be great.\n\nhttps://github.com/willingc/notebook/blob/update-nb/docs/source/examples/Notebook/Distributing%20Jupyter%20Extensions%20as%20Python%20Packages.ipynb\n  :+1: \nOn the whole, very good. The heading structuring is big step forward, good SEO.\n\nSome inline reviews there:\nhttps://github.com/willingc/notebook/commit/29441e4a1ed55fa7bcb1d24f8bd9a3cd12829a0b?diff=unified\n Thanks, @malev. Can you describe a little bit about where this is causing an issue? I haven't used `normpath` before! Anyhow, it may well be worth adding a test for this...\n\n@jdfreder will this potentially collide with single-file nbextensions?\n In order to have your extension working you need something like:\n\n```\ndef _jupyter_nbextension_paths():\n    return [{\n            'section': \"notebook\",\n            'src': os.path.join(\"static\"),\n            'dest': \"my_extension/\",\n            'require' \"my_extension/main\")\n    ]\n```\n\nThe key `dest` is the destination and the value has a `/` at the end of the string, [1] will join the path, but the resulting path will also have a `/` at the end of the string. [2] will fail to create a symlink because it will consider that you want to create a symlink inside the folder `full_dest` which at this point does not exist.\n`normpath` will normalize the `full_dest` string and will remove the `/` at the end. This will avoid the failure and will work fine.\n\n[1] https://github.com/ellisonbg/notebook/blob/nbext-pain/notebook/nbextensions.py#L183\n[2] https://github.com/ellisonbg/notebook/blob/nbext-pain/notebook/nbextensions.py#L197\n > @jdfreder will this potentially collide with single-file nbextensions?\n\nI don't think so because I think that the source is what affects how the symlink is made.  If the source is a dir a dir symlink is made otherwise a file symlink is made.  I could be wrong though..\n > If the source is a dir a dir symlink is made otherwise a file symlink is made. \n\nThis is true on Unix (more precisely, I believe that there aren't different types of symlink, but the filesystem treats them appropriately based on the target). If you create a symlink on Windows, you need to explicitly tell it whether it's a directory or a regular file.\n > If you create a symlink on Windows\n\nI don't think we're trying to skin that particular cat! But if the\nunderstanding around the normpath change is sound, i would encourage\nsomeone to either merge it, or let us know how we can make it right.\n\nBut speaking of windows: I'm concerned you now have a meaningful trailing\nslash in the spec (will that even be portable to windows?) that _requires_\nit be run a particular way to work correctly.  How were we getting by with\nthis before?\n\nOn Mon, Mar 14, 2016 at 1:50 PM Thomas Kluyver notifications@github.com\nwrote:\n\n> If the source is a dir a dir symlink is made otherwise a file symlink is\n> made.\n> \n> This is true on Unix (more precisely, I believe that there aren't\n> different types of symlink, but the filesystem treats them appropriately\n> based on the target). If you create a symlink on Windows, you need to\n> explicitly tell it whether it's a directory or a regular file.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/879#issuecomment-196434246.\n > I don't think we're trying to skin that particular cat! But if the\n> understanding around the normpath change is sound, i would encourage\n> someone to either merge it, or let us know how we can make it right.\n\nI already merged it, since it's a PR to a PR, no sense in moving slow.  We can iterate quickly here.\n As part of this, do we want to add the `load_jupyter_extension` alias, so we aren't telling people to define `load_ipython_extension`?\n I reran the experiment from https://github.com/jupyter/notebook/pull/879#issuecomment-182097248 and \"ported\" `jupyter_cms` to the latest and greatest code in this PR. \n\ntl;dr: Everything worked great this time around. I found one error in the `Distributing Jupyter Extensions as Python Packages.ipynb` tutorial that I noted above.\n\nHere's what I added to https://github.com/jupyter-incubator/contentmanagement/blob/master/jupyter_cms/__init__.py:\n\n``` python\ndef _jupyter_server_extension_paths():\n    return [{\n        \"module\": \"jupyter_cms\"\n    }]\n\ndef _jupyter_nbextension_paths():\n    return [{\n        'section': 'notebook',\n        'src': 'nbextension',\n        'dest': 'jupyter_cms',\n        'require': 'jupyter_cms/notebook/main'\n    },\n    {\n        'section': 'tree',\n        'src': 'nbextension',\n        'dest': 'jupyter_cms',\n        'require': 'jupyter_cms/dashboard/main'\n    },\n    {\n        'section': 'edit',\n        'src': 'nbextension',\n        'dest': 'jupyter_cms',\n        'require': 'jupyter_cms/editor/main'\n    }]\n```\n\nHere's what I initially ran to install/enable everything in my home directory:\n\n``` bash\njupyter serverextension enable --py jupyter_cms --user\njupyter nbextension install --py jupyter_cms --user --overwrite\njupyter nbextension enable --py jupyter_cms --user\n```\n\nBoth the server and JS extensions loaded and operated properly. I removed my entire `.jupyter` folder and retried using `sys-prefix` to install/enable in my conda env:\n\n``` bash\njupyter serverextension enable --py jupyter_cms --sys-prefix\njupyter nbextension install --py jupyter_cms --sys-prefix\njupyter nbextension enable --py jupyter_cms --sys-prefix\n```\n\nEverything worked properly from there too.\n\nDisabling / uninstalling worked fine as well from both locations.\n > I already merged it, since it's a PR to a PR, no sense in moving slow. We can iterate quickly here.\n\nLooking back through the things raised above:\n- @willingc still looking for [feedback (on feedback)](https://github.com/jupyter/notebook/pull/879#issuecomment-195203648): \n  - are we indeed going to have a separate PR for doc? happy to continue assisting there.\n- @bollwyvl: [leave a breadcrumb after running](https://github.com/jupyter/notebook/pull/879#issuecomment-193404634)\n  - yeah, i'll get on this presently\n- @minrk: [This PR makes the default for enable/disable also system-wide, when it is --user in 4.1.](https://github.com/jupyter/notebook/pull/879#issuecomment-193236407)\n  - I don't feel strongly either way: i can understand one opinion of why they would be different defaults, but have frankly always specified exactly where I want it, rather than basically every relying on the defaults. Happy for enlightenment or a decision!\n- @minrk [document get_nbextension_paths(), _get_serverextension_paths()](https://github.com/jupyter/notebook/pull/879#issuecomment-193232687) \n\nalso, now that @damianavila is back, I'd love his feedback on what has changed. \n > also, now that @damianavila is back, I'd love his feedback on what has changed.\n\n@bollwyvl, I will be reviewing the changes today... nice to see how this evolved and also nice to see @parente successfully tested this :tada:\n Thanks for testing this!\n\nSent from my iPhone\n\n> On Mar 15, 2016, at 6:10 AM, Peter Parente notifications@github.com wrote:\n> \n> I reran the experiment from #879 (comment) and \"ported\" jupyter_cms to the latest and greatest code in this PR.\n> \n> tl;dr: Everything worked great this time around. I found one error in the Distributing Jupyter Extensions as Python Packages.ipynb tutorial that I noted above.\n> \n> Here's what I added to https://github.com/jupyter-incubator/contentmanagement/blob/master/jupyter_cms/__init__.py:\n> \n> def _jupyter_server_extension_paths():\n>     return [{\n>         \"module\": \"jupyter_cms\"\n>     }]\n> \n> def _jupyter_nbextension_paths():\n>     return [{\n>         'section': 'notebook',\n>         'src': 'nbextension',\n>         'dest': 'jupyter_cms',\n>         'require': 'jupyter_cms/notebook/main'\n>     },\n>     {\n>         'section': 'tree',\n>         'src': 'nbextension',\n>         'dest': 'jupyter_cms',\n>         'require': 'jupyter_cms/dashboard/main'\n>     },\n>     {\n>         'section': 'edit',\n>         'src': 'nbextension',\n>         'dest': 'jupyter_cms',\n>         'require': 'jupyter_cms/editor/main'\n>     }]\n> Here's what I initially ran to install/enable everything in my home directory:\n> \n> jupyter serverextension enable --py jupyter_cms --user\n> jupyter nbextension install --py jupyter_cms --user --overwrite\n> jupyter nbextension enable --py jupyter_cms --user\n> Both the server and JS extensions loaded and operated properly. I removed my entire .jupyter folder and retried using sys-prefix to install/enable in my conda env:\n> \n> jupyter serverextension enable --py jupyter_cms --sys-prefix\n> jupyter nbextension install --py jupyter_cms --sys-prefix\n> jupyter nbextension enable --py jupyter_cms --sys-prefix\n> Everything worked properly from there too.\n> \n> Disabling / uninstalling worked fine as well from both locations.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub:\n> https://github.com/jupyter/notebook/pull/879#issuecomment-196809867\n New PR : https://github.com/ellisonbg/notebook/pull/16\n\nAdds app-level logging to try to give you the \"right answer\" for \"what command should I run after `nbextension install`?\"\n @bollwyvl I made your suggested changes to the notebook. I'm going to open a separate WIP PR for nbextensions documentation for any doc changes that have not already been added to this PR. I'll collect all the recent comments re:docs and begin addressing them in a sister PR to this one. I'll refer to this PR once the other PR is opened.\n From today's video meeting discussion:\n- last small review,\n- get this into master\n- backport to 4.x\n- make a 4.2 beta (or alpha)\n- iterate (by issuing pr onto master, and backporting them)\n Thanks!\n\nOn Tue, Mar 15, 2016 at 1:38 PM Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> From today's video meeting discussion:\n> - last small review,\n> - get this into master\n> - backport to 4.x\n> - make a 4.2 beta (or alpha)\n> - iterate (by issuing pr onto master, and backporting them)\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> \n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/879#issuecomment-196941397\n So re: dev meeting;\n- What would be holding us up for a 4.2 release? Are all of the [milestone](https://github.com/jupyter/notebook/milestones/4.2) really going to be in there? Do we need a 4.3 to re-triage? Just trying to get a handle on a timeframe...\n > What would be holding us up for a 4.2 release?\n\nJust testing that (a bit) in the wild. A beta can be a week, we can bump most of the things on the milestone IMHO. \n\n4.3 would be a fix for an ipywidgetd thing. \n @bollwyvl, re. the open tickets for the 4.2 milestone: our typical process is to, once the desired release timeframe is coming around or if all the 'big things' are done, we look again at the open tickets targeted to this milestone. And at that point, we take a much more hard-nosed view of things: unless it can _really_ get done very quickly or it's absolutely critical for the release, then we just bump it to the next one.\n\nIn that sense, all our targeted issues are a list of what we _want_ to see in a release, but we don't necessarily hold a release forever just b/c one issue may not be finished.\n\nI think we're reaching that point where a quick triage-and-bump pass is needed, so we're left with what we actually need to consider blockers for 4.2.  Otherwise, we'll never see it out :)\n @minrk This is a draft doc that I think begins to address your doc interest in [ _get_nbextension_paths(), _get_serverextension_paths()](https://github.com/jupyter/notebook/pull/879#issuecomment-193232687).\n\nI believe that somewhere along this yellow brick road that the names changed to `_get_nbextension_metadata(package)` and `_get_serverextension_metadata(package)`. @jdfreder @bollwyvl @ellisonbg Please confirm that this is an accurate conclusion.\n\n[Rough draft of the private methods and running todo list for docs](https://github.com/willingc/notebook/blob/doc-sleuth/docs/source/nb_extension_new.rst)\n\nI submitted a PR against Brian's branch earlier this evening for the Table of Contents changes and finding a good place for the new notebook that @bollwyvl started.\n\n**Note** I built the latest version of the docs in my notebook test docs on RTD. I thought some of you might be interested in this [walkthrough of the install/configure process](http://testnb.readthedocs.org/en/doc-sleuth/examples/Notebook/rstversions/Distributing%20Jupyter%20Extensions%20as%20Python%20Packages.html)  as you test this PR.\n I think one change in logic is still wrong here: enable/disable are now system-wide by default, which they aren't in 4.x. They should probably stay as `--user` by default. _Unlike_ installation, enable/disable are configuration actions.\n > I think one change in logic is still wrong here: enable/disable are now system-wide by default, which they aren't in 4.x. They should probably stay as --user by default. Unlike installation, enable/disable are configuration actions.\n\nSorry I didn't get a chance to react to this earlier... getting pulled in some other directions!\n\nI had recalled seeing it, thanks for bringing up again. Anyhow, here's a minimal PR:\n\nhttps://github.com/ellisonbg/notebook/pull/18\n\nProbably could do a tick of refactoring: for one thing, by not inheriting the flags from JupyterApp, we've lost `--log-level`, `--debug` and `-y` (of dubious merit). But maybe that is a separate issue.\n If it's possible, I'd strongly encourage getting the various debug flags (`--log-level` and `--debug` back). We'll _inevitably_ be getting questions on-list about this, and not being able to ask the user to rerun a command with a debug flag on will just make life harder for us.\n\nWhether that gets done in this PR or a subsequent one isn't a big deal: it may be easier to wrap this up and merge, as long as that fix comes along before too long. That would make it easier for others to start testing this while that gets fixed.\n > getting the various debug flags (--log-level and --debug back).\n\nPR up: https://github.com/ellisonbg/notebook/pull/19\n\nAnd, oh goody, look! I think there's some... **UNICODE ISSUES**! My favorite! :ice_cream: \n\nhttps://travis-ci.org/jupyter/notebook/jobs/116540953#L560\n\nWill do as a separate PR.\n > https://travis-ci.org/jupyter/notebook/jobs/116540953#L560\n> Will do as a separate PR.\n\nPR up: https://github.com/ellisonbg/notebook/pull/21\n @jdfreder I opened https://github.com/ellisonbg/notebook/pull/22 to fix the \"no dots\" issue, so that any module can provide extensions, just like our other extension mechanisms in IPython.\n >  I opened ellisonbg#22 to fix the \"no dots\" issue\n\n@minrk thanks for picking that up!\n\nOn the \"enable/disable default is ~\" front: where should this behavior be? In the App, or in the pythonic version? Right now, it's in both, i.e.\n\n``` shell\njupyter nbextension enable foo/bar\n# installs to ~\n```\n\n``` python\nenable_nbextension(\"foo/bar\")\n# ALSO installs to ~\n```\n @bollwyvl both, I imagine. I don't think there's a reason for the function an CLI APIs to have different defaults, and the CLI should definitely default to `user=True` for config.\n > both, I imagine. I don't think there's a reason for the function an CLI APIs to have different defaults, and the CLI should definitely default to user=True for config.\n\nThanks for the clarification, @minrk. PR up: https://github.com/ellisonbg/notebook/pull/23\n Ok, with that PR in... are we looking for anything else? More doc? Glad to help!\n @bollwyvl I think we're almost there. We can merge soon and make the beta. I opened https://github.com/ellisonbg/notebook/pull/24 with a few things I found that were still missing.\n @bollwyvl If you think that there are more docs needed, please dive in or ping me. Thanks :D\n I'm happy to merge this as-is, now.\n I'm about to board my flight to California, but I'll merge by the end of Friday (CA time) unless someone wants to do anything else here.\n Safe travels @minrk. \n @minrk safe travels\n :tada: :cake: Welcome back to cali @minrk (and @takluyver) !\n\nhttps://www.youtube.com/watch?v=E_B0rOLvAOo\n\n:)\n Thanks Jon! See you on Monday (or let me know if you're getting to the bay\narea sooner.\n\nhttps://youtu.be/5NTqZ347TKY\n Welcome back @takluyver. See you on Monday.\n\nCongrats to all on getting this merged.\n :cake: :+1: \n :icecream: :cake: :pizza: from DFW... See y'all soon!\n\nOn 09:07, Sun, Mar 27, 2016 Sylvain Corlay notifications@github.com wrote:\n\n> [image: :cake:] [image: :+1:]\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/879#issuecomment-202069444\n \\o/ \nnice...\nSee you all in a little bit!! :wink:\n","With my proposal in #878 can you get by without a custom ConfigManager?\n\nBut the changes you are making should work fine.\n yes @ellisonbg, I will comment in the issue soon...\nThis is just me playing with alternatives and I think I found and issue/bug because it is not working if I make the changes I suggested above... but I can not figure out why not yet :wink:\n The notebook app [specifies](https://github.com/jupyter/notebook/blob/4.0.6/notebook/notebookapp.py#L820) that frontend config is always in the Juptyer config dir, so it's not really true that ConfigManager.config_dir is configurable, since it's not allowed to be set from config.\n OK, so removing that line will fallback in the default at ConfigManager, making that config option to work... sound like a reasonable request for a PR, so here it is: #882 :wink: \n","-1, We did how it is now on purpose to avoid ambiguity: Is the following notebook in multiple cell selection state ?\n<img width=\"1176\" alt=\"screen shot 2015-12-17 at 19 37 28\" src=\"https://cloud.githubusercontent.com/assets/335567/11878389/bcb05de0-a4f5-11e5-9c10-a899f9694675.png\">\n Note that it is at it is in excel to be able to visualize the head of the selection, Libre office does the opposite with the anchor being white (or vice versa). \nWe already have a difference of style on the anchor. \n\n(and also I find that ugly but it's irrelevant).\n > Note that it is at it is in excel to be able to visualize the head of the selection, Libre office does the opposite with the anchor being white (or vice versa).\n\nSelection have `Anchor` and `head`:\n- In excel `Anchor` is `White`, rest is blue. \n- In LibreOffice SpreadSheet `Head` is `White`, rest is blue. \n\n(might be inverting Excel and LibreOffice, but whatever) \n\nThere is no reason to adopt one more than the other.\n I am -1 on this\n\nSent from my iPhone\n\n> On Dec 18, 2015, at 6:26 AM, Matthias Bussonnier notifications@github.com wrote:\n> \n> Note that it is at it is in excel to be able to visualize the head of the selection, Libre office does the opposite with the anchor being white (or vice versa).\n> \n> Selection have Anchor and head:\n> \n> In excel Anchor is White, rest is blue.\n> In LibreOffice SpreadSheet Head is White, rest is blue.\n> (might be inverting Excel and LibreOffice, but whatever)\n> \n> There is no reason to adopt one more than the other.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n - Regarding the argument about ambiguity, IMO there will always be this kind of ambiguity:\n  - when you only see the end of a code cell on your screen, is it a very long cell or am I just missing a line?\n  - in your implementation of styling, if you only display the last two cells: am I seeing the whole selection or are there 3 or more cells selected.\n  \n  In that regard, the one-cell selection is not special and should probably not be treated in a different fashion.\n- Why make selections of length one a special case?\n  - I would \"invoke\" the Zen of Python: _Special cases aren't special enough to break the rules._\n  - Having a visual change between the case of a selection of length one or more gives the wrong impression that there is a modal thing going on, while it is not the case, which is confusing by the user.\n- Regarding the fact that the head of the selection is styled differently than the rest of the selection:\n  - I picked the example of Excel to show that people are used to seeing one privileged cell in their selection styled differently. Hence I think that it is \"OK\" to do so. Microsoft must have done endless UX experiments in that regard, and the fact that they adopted it means that it is _not_ confusing.\n- Excel handles the styling of the last selected cells when there is an heterogeneous selection (with Crtl+Click) because in that case, there _is_ an ambiguity, in that you don't see if there are other cells selected. (See below and compare to the top screenshot)\n  <img width=\"270\" alt=\"heterogeneous\" src=\"https://cloud.githubusercontent.com/assets/2397974/13231049/f0cb7a4c-d975-11e5-8811-38486f53bd2f.png\">\n The difference is that some action **do behave differently in multiple selection**. \nMerge is one example. So there **is** a modal difference. \n\nIf you take microsoft example, the head is style differently with multiple select (IIUC) when it's blue and have a special corner, while it's white with only 1 cell selected. \nSo just the visual appearance of the head allow to distinguish.\nThe Style change you propose does not allow such a difference.\n\nI think it also make it much harder to convey some ideas. In your screenshot of excel the selection has a nice border, which make it obvious \"what is selected\". While our border is only around that head. \n\nSo I think that in your proposal the white background+border make a too huge difference. We can though refine for 5.0, but changing now after many weeks on the old style is too risky. \n (bumping as 5.0 to keep playing with possibilities) \n Yes, I was not expecting this to get in for 4.1. Btw, the loop on the cells is done with `Array.prototype.map` which is not very efficient since it creates a new array.\n I'm still -1 on this look. \nShould we keep iterating ? @ellisonbg \n I like it quite a bit after working with it daily in teaching.\n\nWhat specific parts (or all) are you not liking?\n\nOn Mon, Feb 8, 2016 at 12:46 PM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I'm still -1 on this look.\n> Should we keep iterating ? @ellisonbg https://github.com/ellisonbg\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/881#issuecomment-181529060.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > What specific parts (or all) are you not liking?\n\n1) just visually I don't find that great. \n2) the blue background convey that actions will apply on the cells. It is more complicated to explain that action apply both on blue cells and the cells with the left border.\n3) if the cells are scroll and I see only the cursor cell, I have no way to know wether multiple cells are selected.\n\n2) is less pronounced on the spreadsheet example because of the thick border around the all selection. Thisborder also decrease 3) Without such a strong visual cue that is detectable by the peripheral vision of human this is not a good usable UI.\n > 1) just visually I don't find that great.\n> 2) the blue background convey that actions will apply on the cells. It is\n> more complicated to explain that action apply both on blue cells and the\n> cells with the left border.\n> \n> In my teaching this quarter (N=50) that hasn't been a problem so far.\n> \n> 3) if the cells are scroll and I see only the cursor cell, I have no way\n> to know wether multiple cells are selected.\n> \n> Not quite sure I follow. Someone can always scroll the selected cells out\n> of the way.\n> \n> 2) is less pronounced on the spreadsheet example because of the thick\n> border around the all selection. Thisborder also decrease 3) Without such a\n> strong visual cue that is detectable by the peripheral vision of human this\n> is not a good usable UI.\n> \n> Which spreadsheet example?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/881#issuecomment-181958794.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Which spreadsheet example?\n\nScreenshot at top of this thread. \n > Not quite sure I follow. Someone can always scroll the selected cells out\n> of the way.\n\nHere are 2 screenshot of this PR. Which one have multiple cells selected. \nFeel free to \"scroll the selected cells out of the way\".\n\n![screen shot 2016-02-22 at 12 00 35](https://cloud.githubusercontent.com/assets/335567/13230859/f729d4a2-d95b-11e5-94f2-f4d1b5b09a87.png)\n![screen shot 2016-02-22 at 12 00 31](https://cloud.githubusercontent.com/assets/335567/13230858/f728ebe6-d95b-11e5-8d63-59df3d4a8a3c.png)\n\nHere is master, which one has multiple cells selected :  \n\n![screen shot 2016-02-22 at 12 01 53](https://cloud.githubusercontent.com/assets/335567/13230886/1dc4dfee-d95c-11e5-905b-42d7e715dcc0.png)\n![screen shot 2016-02-22 at 12 01 47](https://cloud.githubusercontent.com/assets/335567/13230887/1dc59592-d95c-11e5-8b92-1b6e89663a5a.png)\n\nTelling to user \"Just scroll\" is not a solution you can be a presenter facing 200 people who are trying to follow what you are doing. Or it can be a screenshot in a book. Needing a user to do any action to know in which state he is a strong hint something is wrong. \n\nI won't bother with a Gif that show that Shift-J and J looks identical when going through a notebook. \n\nSo no the current white selected cell style is not acceptable. \n I don't think that the argument of knowing whether there are other cells selected holds as explained earlier: in your screenshot, you also don't know if the cell is 20 times longer than the screen hight or not, and it is ok.\n > I don't think that the argument of knowing whether there are other cells selected holds as explained above: you also don't know if the cell is 20 times longer than the screen hight or not, and it is ok.\n\nNo the cell is not changing length when it is out of screen. The selection state can. \nWe already have a highly confusing UI for beginners, and when giving talks, there is no reason to make the UI more confusing in one specific case. \n\nI just show a case where you cannot distinguish, so I just give one argument against this case. \nShow me a case where your UI is better, and then we can discuss wether it's worth. \n\nBut right now the curent state only have drawbacks for users. \n > I just show a case where you cannot distinguish, so I just give one argument against this case.  Show me a case where your UI is better, and then we can discuss wether it's worth.\n\nWell, I thought we could _always_ discuss :)  Although my argument was that making a selection of a single cell a special case gives the impression that something modal is going on. \n\nBtw, even with the current behavior in master, you can come up with cases where you don't know if there are 2 or more cells selected... The one-cell case is not special IMO.\n ok, yes we can always discuss, but here I dont' see any advantages, and only disadvantages. I might be missing something. \nBut I dont' see the point of making the user experience in (I admit) rare cases for no benefits. \n Thanks @SylvainCorlay for working on that. THe discussion has stopped for a few month, so I'm going to  close that to keep the PR queue short.  I'll marked it with the \"Closed PR\" label so that we can easily reopen it/find it if needed. \n","Can we make this into 4.1? It is a bug fix from my point of view and more importantly, this allow to use custom ConfigManager, which provides an alternative until things related with the nbextensions discussion in #878 and https://github.com/jupyter/enhancement-proposals/pull/7 is decided. \nping @minrk @ellisonbg @takluyver and @Carreau\n It's a reasonable question. I'm not sure if we want to actually make that configurable, or remove the `config=True` flag that doesn't actually work, but we should do one or the other. Allowing sub-config locations to be themselves configurable makes it a lot easier for it to get into a compliated and inconsistent state. I would like to see a pretty good reason for frontend config and server config to have to be in different locations for these to be allowed to be separated.\n I'm fine with this fix. Should we merge that and Beta2 or RC ? Min ?\n I'm fine with it as well, I'd just like a bit more explanation of cases where it's reasonable for frontend config to come from a different place from the rest.\n Like other place from the disk ? I'm sure Continuum have deployment where config is on a db, or a separate folder network-mounted, or sync via dropbox. \n This is only relevant for breaking up user-config, so that part of user-config can come from JUPYTER_CONFIG_DIR, but the nbconfig subdir is broken out of the config dir.\n\nArbitrary other data sources already works fine by specifying `NotebookApp.config_manager_class`.\n\nI'm mainly wondering what the case is where you would want to specify where `nbconfig` is, but not JUPYTER_CONFIG_DIR.\n OK, I (and others) have written some nbextensions and server extensions and package them with conda. Because we want to keep thing isolated inside prefix, we want to read the config from `prefix/etc/jupyter/nbconfig` but some people have also some other extensions installed in the user space (aka. `./jupyter`).\nIf we setup the `jupyter_config_dir` to just look into `prefix/etc/jupyter` all the \"user\" activated extensions are not loaded... this is the main discussion in the other issues.\n\nTo workaround this for the moment I have written a custom ConfigManager which is able to read the \"user\" space but also the prefix space, so people can install our extensions and also install other extensions as well and have all of them activated beyond the place where the the config is located.\n\nIn fact, I have no problem to avoid `config=True` at the native ConfigManager, we can remove that if you feel it will bring problems. The main thing is avoid hardcoding the `config_dir` at the notebookapp level so anyone can come up with another ConfigManager implementation to support their use case (like the one I described above) or any other use case that the native implementation does not support...\n OK\n After working on this stuff yesterday, I have doubts about doing this ... Will reply more later when I fully wake up...\n\nSent from my iPhone\n\n> On Dec 18, 2015, at 6:20 AM, Min RK notifications@github.com wrote:\n> \n> Merged #882.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Thanks!\n\nI still believe we should continue discussing the whole thing in the other threads and  the meeting, but at least this one gives people an entry point to workaround the whole thing if the resolution we come up later do not satisfy their requirements.\n","+1 @minrk I will loop back later today and add this to the making a release docs.\n Want to add `xz` for lzma ?\n > Want to add xz for lzma?\n\nI don't.\n","> I cannot find the part of the code that is causing this behavior. I thought that it was lines 1612 and 1616 in the Notebook.prototype.merge_cells function of notebook/notebook/static/notebook/js/notebook.js, but when I modified this in my local copy to remove the two newline characters from the join, it didn't seem to have any effect.\n\nYou need to [rebuild the Javascript or use the `--NotebookApp.ignored_minified_js=True`](http://jupyter-notebook.readthedocs.org/en/latest/development_js.html?highlight=ignore_minified_js#installing-javascript-machinery) forchanges to JS files to take effect. \n\nYou can also already change the behavior of the notebook by rebinding \"merge cell\" to your own command (that does not include the `\\n`) if you like. The number of small configuration option like that is so huge that we will likely not implement them all. \n\nPR welcomed though. \n","OK. I am no front-end Javascript expert but some Googling identifies wrapping a `setTimeout` around the style changes as away to force WebKit browsers to re-render the element. Let me know if there is a better approach.\n\nIf not, then this should be good to go.\n You could use `requestAnimationFrame`: https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame\n Thanks @blink1073! Updated the code.\n No problem @captainsafia!  One nitpick, generally you don't write `window.`, since `window` is already the global namespace in the browser.\n @blink1073 Thanks for reviewing. Since JS is not my first language, I assume that one drops `window.` so the call is just `requestAnimationFrame` with no prefix. Just leveling up my knowledge, is there a case where you would want to use `window.` ? :cookie:\n Hi @willingc, I've seen it done when you want to override a global variable, like `window.XMLHttpRequest = my_cool_replacement`, so you are explicit about what you are doing.\n Ahh... great example. Thanks for the tip :cake: :smile: @blink1073 \n Nitpick away, @blink1073. Code is updated.\n @captainsafia I gave Travis a gentle nudge to restart. All green now :+1: \n@blink1073 I will leave the final review and merge to you. :city_sunset: \n Looks good to me, but I have no green button powers here.  :)\n Happy to merge. Thanks @captainsafia and @blink1073 :cookie: :cookie:\n Try to tag on the sidebar 4.1 when it get merged into a specific release, so that it's easy to find :-P \n @Carreau You said sidebar and all I could think of was the documentation sidebars. :laughing: Took me a good 5 minutes to realize that you meant the GitHub milestone. :-P\n Sorry, I did not even realized I spoke of a sidebar :disappointed: \n","please indicate which exact setting you used, and on which domain you are trying to host ?\n\nIt seem like you are trying to host on port 9191 and only allowing 9999. \n Thanks @Carreau \nActually i am try on my local box for testing after that I will deploy on AWS EC2  node.\nI have added these setting into /home/sky/.jupyter/jupyter_notebook_config.py file:\n\n```\nc.NotebookApp.port = 9999\n\nc.NotebookApp.ip = '192.168.2.115'\n\nc.NotebookApp.tornado_settings = { 'headers': { 'Content-Security-Policy': \"frame-ancestors 'self' https://192.168.2.115:9999/\" } }\n\n\n```\n >  \"frame-ancestors 'self' https://192.168.2.115:9999/\" \n\nThat's redundant,  if the notebook port and app are `192.168.2.115` and `9999` self is `192.168.2.115:9999`, what you want to put there is the website you would be embedding into. \n yes, suppose my website URL is ec2-xx-xx-xxx-xx.compute-1.amazonaws.com and port is 9999.\nSo what would be configuration setting ?  \n Depends, let's say I have a notebook server that runs on ec2, and that i want to embed a notebook on `https://blog.jupyter.org`, it would likely look like:\n\n`c.NotebookApp.tornado_settings = { 'headers': { 'Content-Security-Policy': \"frame-ancestors 'self' https://blog.jupyter.org/\" } }`\n\nBut I'm not an expert on that. \n\nThere seem to be an example in [old docs](https://ipython.org/ipython-doc/3/whatsnew/version3.html#content-security-policy) that seem to be missing on new one. \n Renamed issue to remind us to write better documentation on that, or make it easier to find. \n Thank you very much @Carreau.  It is working fine now. \n @Carreau When creating a new notebook it will  open into new browser(or new tab). Is this possible it will open in same browser(same tab) ?\n Hum, likely yes, you need to inject JS (through custom.js) and change the value of `require('base/js/namespace')._target` which by default is `_blank` to [one of the supported value](http://www.w3schools.com/jsref/met_win_open.asp) that suit you the most. \n @carreau Thanks for tagging this for documentation review :+1: \n Hello @Carreau \n\nI am trying something like:\nCreated file ~/.jupyter/static/custom/custom.js \n\n```\nrequire(['/tree/js/notebooklist'], function(notebookList){\n\nNotebookList.prototype = function(notebook){\n  notebook.open(\"\", \"_self\")\n}\n\n})\n```\n\nadded path into jupyter_notebook_config.py\n\n```\nc.NotebookApp.extra_static_paths = [\"static/custom/custom.js\"]\n```\n\nBut it didn't work. Any idea what is wrong here ?\n That's definitively **not** the right way to do it, but it works:\nBetter would be to write an extension for `/tree/` and enable it in the config. \n\n```\n~ $ cat ~/.jupyter/custom/custom.js\ndefine(['base/js/namespace'], function(Jupyter){\n    Jupyter._target = '_self';\n})\n```\n @Carreau :  Yes definitively, I was wrong. Now it is working. Thank you so much for your help.\nNow I am going to close this issue. \n Reopening to fix docs. \n @Carreau  I used this setting to get the notebook login page to show up on an iframe on socrates-login1/jupyter\n\nc.JupyterHub.tornado_settings = {'headers': {'Content-Security-Policy': \"frame-ancestors 'self' http://socrates-login1/\"} }\n\nAnd it works for the login page. But once the logged in I get the same error for the user profile pages.\n\nRefused to display 'http://socrates-login1:7800/user/psplinter/tree' in a frame because an ancestor violates the following Content Security Policy directive: \"frame-ancestors 'self'\".\n\nDo I need to set this for each user?\nHere is how I'm running juptyerhub\n\nsource  /opt/cray/anaconda3/bin/activate /opt/cray/jupyter/python3_venv\nmodule load /opt/modulefiles/python/python3\n/opt/cray/jupyter/python3_venv/bin/jupyterhub --no-ssl -f /etc/jupyterhub/jupyterhub_config.py &\n","Do you have any ideas of wen this happend ? Are in in command mode, edit mode ?\nDo you have any errors in the JS console when this happend ?\n could it be a sort of delay because, for example with a bokeh 0.11 plot made via pydata.org js, an animation is lately displayed in previous cell [10]  well after you click frenzily on SHIFT+ENTER to go on cells [11] [12], ... , causing your keyboard order to bring you backward ?\n I'm seeing this behavior with @damianavila's RISE extension.  On first page load, SHIFT+ENTER works as expected.  If I switch into and out of slideshow mode, SHIFT+ENTER stops working.  Not sure where the actual issue is currently.\n Guessing the issue is here:\n\n```\nfunction setupKeys(mode){\n  if (mode === 'reveal_mode') {\n    IPython.keyboard_manager.command_shortcuts.set_shortcut(\"shift-enter\", \"ipython.execute-in-place\")\n    IPython.keyboard_manager.edit_shortcuts.set_shortcut(\"shift-enter\", \"ipython.execute-in-place\")\n  } else if (mode === 'notebook_mode') {\n    IPython.keyboard_manager.command_shortcuts.set_shortcut(\"shift-enter\", \"ipython.run-select-next\")\n    IPython.keyboard_manager.edit_shortcuts.set_shortcut(\"shift-enter\", \"ipython.run-select-next\")\n  }\n}\n```\n\nDid the API for changing shortcuts change in 4.1?\n Looks like those are just no longer the names of the right actions.  My guess is you'll get a similar symptoms with any extension that's trying to add or modify shortcuts and hasn't been updated for 4.1.\n\nc.f. https://github.com/damianavila/RISE/pull/179/\n > Did the API for changing shortcuts change in 4.1?\n\nNot the API the names of the actions a bit. `:` instead of `.`\n and maybe `jupyter-notebook` instead of `ipython`\n @Carreau the names are totally different as far as I can tell.\n\nThe shortcuts failing in RISE went from:\n- `ipython.execute-in-place` to `jupyter-notebook:run-cell`\n- `ipython.run-select-next` to `jupyter-notebook:run-cell-and-select-next`.\n wow... I need to make RISE fully compatible with 4.1!!\nthanks @ssanderson to research into this...\n > wow... I need to make RISE fully compatible with 4.1!!\n> thanks @ssanderson to research into this...\n\nYeah, I know it's not optimal, some some people pushed for different names. \nif it's too annoying and you need some extra methods to detect, we can try to push a 4.1.1\n @Carreau how hard would it be to fire a warning and/or error if an extension tries to register a shortcut for an action that doesn't exist?  That would at least help users quickly diagnose the issue.\n > @Carreau how hard would it be to fire a warning and/or error if an extension tries to register a shortcut for an action that doesn't exist?\n\nThat is already the case, though the action can be defined later, so we cannot be 100% sure. \nIt does already trigger on a non-modified install as `find-and-replace` is defined late in notebook startup process. \n\n> actions jupyter-notebook:find-and-replace does not exist, still binding it in case it will be defined later...\n\nand if `:` is [not in your action name](https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/js/actions.js#L21-L30):\n\n```\nconsole.warn('You are trying to use an action/command name, where the separator between prefix and name is not `:`\\n'+\n                         '\"'+name+'\"\\n'+\n                         'You are likely to not use the API in a correct way. Typically use the following:\\n'+\n                         '`var key = actions.register(<object>, \"<name>\", \"<prefix>\");` and reuse the `key` variable'+\n                         'instead of re-generating the key yourself.'\n                    );\n```\n\nWe might have missed a place where to trigger this warning. \n","While this is not recommended, it doesn't actually break anything. Since the example you point to is part of the public API, it's probably not worth changing. We should try to avoid overloading these names in new code, though.\n Yup, it's no problem for these to be used as arguments in a method.\n","I got half way through converting the cell classes to the new config system, but didn't manage to finish. I must get back to that at some point, but this looks like a reasonable compromise for the moment.\n","Love this.\n","The action/prefix separator changed from `.` to `:`. \n\nWe should try to detect/warn is someone try to append an action where the separator is `.`. \n Our JS API is not stable and can change in arbitrary ways between minor releases. I don't see how that is a bug...\n It's not because it's unstable, that we shouldn't raise correct error messages, or prevent the notebook from crashing if a bad API is used. \n\nIn the end, if an extension use unstable API and user get broken notebook on update, that will open issues on our repos, and we will have to respond, and spend time explaining to user. \n\nAlso even if we say it **is** unstable, we are doing efforts to not break too much. \n\nI've bumped to 4.2, but nice and correct error message, even in the js console, would be nice for 4.1. \n Got it, thanks for the clarification...\n\nOn Tue, Dec 22, 2015 at 10:31 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> It's not because it's unstable, that we shouldn't raise correct error\n> messages, or prevent the notebook from crashing if a bad API is used.\n> \n> In the end, if an extension use unstable API and user get broken notebook\n> on update, that will open issues on our repos, and we will have to respond,\n> and spend time explaining to user.\n> \n> Also even if we say it _is_ unstable, we are doing efforts to not break\n> too much.\n> \n> I've bumped to 4.2, but nice and correct error message, even in the js\n> console, would be nice for 4.1.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/891#issuecomment-166697742.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","> When we merged the multiple selection PR, it was my impression (perhaps false) that we would be iterating in master to align it with the design that we all agreed upon.\n\nWe said that we **could** iterate on design, but as far as I am concern we did not say that we **would**. \n\n> The main thing that still needs to be changed before 4.1 is that we agreed that the edit mode border would be grey (with the green left border). This is important to me:\n\nI would have **never** agreed to that. We have many place on the internet that say that cell in edit mode have the green border. Making it gray would make all these description false, and will make any statement that describe only the left border as Green wrong for 4.0. \n\nSo no, I'll be strongly no-go in removing the green border **especially** since we've been in beta/rc for 10+days, and changing that would definitively mean reverting to a pre-beta state. \n\nI actually find the new green **less** agressive than the previous one. Though if you **really** want to revert the shade of green, I won't refuse. \n\n> Between the green 5px left border and brighter green, it is just too much for a UI element that gets shown to the user that often.\n\nBrian, I think you are on of the expert in the notebook which is the most sensible to design, we we appreciate a lot, though in the other hand, I have seen many comment where only a 1px green border change of color is indistinguishable for many people. \nFor example software carpentry, on overhead projector. We have the luxury of working with high-res monitor, of extremely good quality and are able to see changes that other don't. \n\nPlease try to consider that this change will actually be visually helpful for many people.\n Example of books that speak of the [green border](http://nbviewer.ipython.org/github/ipython-books/minibook-2nd-code/blob/master/chapter1/13-nbui.ipynb#The-Notebook-modal-interface).\n (pinged by @Carreau) \nI haven't followed the discussion, is there a before-after screenshot somewhere to get a better idea of the change?\n This sums up current and old state.\n\nI including which I think is a \"proposal\" (IIUC), which @ellisonbg refer to as `is that we agreed that the edit mode border would be grey`, (which I don't remember agreeing upon).\n\n<img width=\"934\" alt=\"screen shot 2015-12-24 at 11 27 25\" src=\"https://cloud.githubusercontent.com/assets/335567/11993455/622b23c8-aa31-11e5-950d-a97b87d7e05b.png\">\n Personally my vote goes to \"4.1rc\" without hesitation. I find the \"proposal\" confusing because of the two colors. What is the aspect of the selected cell in non-edit mode?\n\nAlso, I've always found the uniform border in 4.0 and below too thin, so \"4.1rc\" looks much clearer in this respect.\n\nAs a book author, I always expect interfaces to change quickly so I'm not surprised to see breaking changes like this, generally speaking. That being said I guess I wouldn't expect to see a breaking change (green => gray) in such a major aspect of the interface in a minor release version.\n With the proposed change the visual distinction command vs edit is too subtle IMHO.\n\n![c vs e](https://cloud.githubusercontent.com/assets/335567/11993614/6f11ce14-aa33-11e5-92ae-8f915ee516cc.gif)\n\n[Edit] the aspect in the Gif above (gray + blue left indicator) is what is in 4.1rc. \n > With the proposed change the visual distinction command vs edit is too subtle IMHO.\n\ncompletely agree with this, this behavior is much more confusing than in all the previous versions... your eye shouldn't need to move to the extreme left in order to perceive the change.\n OK, I am back from the holiday. @Carreau are you around tomorrow to chat about this?\n\nIn the meantime...\n\nFor the record, here is the original discussion:\n\nhttps://github.com/jupyter/notebook/pull/708\n\nHere is a sketch of the discussion:\n- There was initial strong support for option D - but it had _no_ styling of edit mode.\n- I later added the MD Green #400+grey combination for edit mode to clarify how edit mode would be treated consistently with the new MC colors.\n- Then Fernando suggested the D+modified, which seemed to be the most popular.\n- All left borders were 5px.\n\nWhat is implemented in master is someone different in multiple respects:\n- It uses the original D, that has Material Design Blue #200 on the left border and Blue #50 fill on soft-selected cells.\n- It uses the MD Green #400 used in my modification, but without the grey border.\n- The left border widths are not 5px and they vary between the different states.\n\nWhen I merged the PR, I knew there were minor style differences, but didn't want those to stall the more difficult behavioral testing of everything. I definitely should have clarified that my merging was conditional on us finishing the agreed upon visual design in master. But let's move forward...\n\n1) While I like the pseudo-original D that is implemented in master (with the left MB Blue #200 border in multiple selected mode), I don't think was what we agreed upon. Do we need to change that?\n\n2) Everyone liked the 5px left border always, I don't see any reason to not implement that. \n\n3) What to do about the edit mode styling? I used the MD Green #400 to match the MD Blue #400 of the command mode styling. Both of those choices were made based on the relatively small amount of area covered by those colors - they need to be relatively strong, but wouldn't work well if the area was larger. I used the grey edit border because that green would be too much to use on the entire border, and the grey is consistent with the rest of our UI. I still like that best:\n\n<img width=\"966\" alt=\"screen shot 2015-12-28 at 9 02 39 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/12029899/513bd4e6-adaa-11e5-9196-988c0aca89d9.png\">\n\nAnother option would be to use a slightly more subtle MD Green like #200 for the rest of the border.\n\n<img width=\"964\" alt=\"screen shot 2015-12-28 at 8 56 36 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/12029903/5e4c3ec8-adaa-11e5-9cc0-2025b43e1ebd.png\">\n\n4) There is also a darker blue _right_ border that I think looks like a bug, but maybe it is deliberate? In either case, we never agreed upon that so it should be removed:\n\n<img width=\"101\" alt=\"screen shot 2015-12-28 at 9 13 30 pm\" src=\"https://cloud.githubusercontent.com/assets/27600/12029909/7918e53a-adaa-11e5-89ef-eae3a1ec67ec.png\">\n 1) I'm confused of the PR / issues number you link to, they don't seem relevant. And I don't understand the link either in context. \n\n> I used the grey edit border because that green would be too much to use on the entire border, and the grey is consistent with the rest of our UI. I still like that best:\n\nThere is no way I'l accept to change edit border to gray for 4.1. You can send PR and everything, I'll do all I can for edit border will stay green for 4.1. We went over the beta/RC cycle and more weeks with green as the border. I will be opposed to change that post rc (regardless of wether or not i like it).\n\nWe can refine and do that for a 4.2 if you really want it after a few weeks of testing it locally and discuss that longer, I have no problem. But 4.1 is post-freeze.\n\nI'll make an exception and allow adjusting the green exceptionally.\n\n> 4) There is also a darker blue right border that I think looks like a bug, but maybe it is deliberate? \n\nLikely not deliberate, \n\n> In either case, we never agreed upon that so it should be removed.\n\nI might misunderstand the \"should\" in context, but I would avoid such strong statement which seem like an unilateral decision to me. I for example like it now that I see it. And again this is a post rc change. Though we are allowed to bring up this problem and **discuss as a team** what we think are critical bugs and we agree to fix in RC.\n\nThe **point** of a **rc** is to not change anything except **critical** bugs.\n\n> OK, I am back from the holiday. @Carreau are you around tomorrow to chat about this?\n\nUntil January 5th it will be really hard for me to find time. I'll be literally on the road from 31st morning to 5th night (European time), plus some packing to do before. I might be able to find some time 29 Morning (PST), 30th morning (PST) at usual meeting times or earlier, but that's be hard. \n\nI'll likely not be in front of a computer, but you can try to ring my french Phone, if I'm available I'll jump on hangout. \n My quick take on this, after some discussions with @ellisonbg and @Carreau:\n- I personally hadn't actually noticed that the left blue borders in master weren't the same colors we had discussed in our \"D modified\" discussion in #708. They are similar enough that, until Brian pointed that fact out, I had to go and measure the RGB values to actually confirm they weren't the same, b/c on quick glance they looked close enough.\n- Re. the green border, I personally actually _like_ the current, all-around green border.  I have this week been using the notebook 'in anger' in writing long and complex notebooks, with lots of back-and-forth between command and edit mode, and I actually found the full green highlight quite useful in marking the state of being in command mode to me, without being so garish as to be annoying.   Note that I'm stating _my_ opinion here as a data point from one user, not making a decision.  It's just that we need to converge quickly on a decision so we can wrap it up, so for now it will be up to our own sense of balance between the usefulness of conveying that information with the green highlight and not going overboard.\n- Re the thin blue border on selected cells: it feels a bit inconsistent to me in that it's only on the right and not on the top/bottom, and thus it's different from every other visual element we already have (the other outlines are all complete).  And it's true that it was never part of our discussions in #708.  Now, it's not an end-of-the-world issue, but I agree that it's not great to have there, I just hadn't noticed it before.\n\nSo the question at this point is, do we hold a release over this or not? They are obviously UI issues and not core functionality bugs, but the reality is that we also have #893 that will require extra work, so I suggest that we go ahead and polish this up since we can, while that nasty problem gets sorted out...  \n\nIf we were literally about to pull the trigger on a release and it came down only to these issues, we might think differently about it, but given that making these changes is probably a tiny PR with:\n- Removal of the little blue right-border.\n- [Optionally] change the blue shades to the ones from the #708 discussion.\n\nThat's probably very doable.\n\nWe can then ask on-list about the green outline for cmd mode.  As I said, I'd be personally quite happy leaving it as-is as I like this version. But others might disagree, and if consensus is strongly in the opposite direction, I have no problem with that.\n\nHow does this sound?  I suspect that #893 will give us plenty of time to do the above before cutting an actual release anyway...\n Thanks for the summary:\n- I am in favor or removing the little blue right-border in 4.1.\n- I personally like the left blue border used in multiply selected cells in master (MD Blue #200) but it wasn't the option that most people preferred originally (most preferred to have the left blue border match the background which is MD Blue #50). No objection from me leaving this as is.\n- I am open to the current green border (MD Green #400) in master as long as we run it by everyone (I personally prefer green left with grey on the rest)\n BTW, Brian helped me clarify one point I was confused on: master currently does _not_ implement something we had indeed agreed on during the #708 discussion, which was the left-border highlight. I got tripped by mis-measuring colors on an old screenshot and got side-tracked, the point is that when we finished up the #708 discussion, we'd agreed on implementing something that would look roughly like this:\n\n![image](https://cloud.githubusercontent.com/assets/57394/12047312/49f8185a-ae7e-11e5-8229-4d1bda633722.png)\n\nI actually do still like that original choice (which was our common consensus) better than what we do have in master right now.  I admit that I wasn't paying close enough attention to notice the difference, but looking at them side by side and going over the original #708 discussion, and considering that this was the choice that we ultimately converged on, I do think that it would make more sense to go with that option.\n Please Brian stop using hash-number you are cross linking PRs and issues.\nYou can use backticks.\n\nAs I said I'm fine with slight changing of shade, please make PRs I can test/review/merge. It will be faster to actually have a change I can see/test than trying to describe.\n\nI already made a PR to change the green, but apparently I misunderstood which. And going back and forth trying to guess is starting to be painful.\n\nThe removal of the green border though is a no-go unless we test it for minimum 2 weeks with users.\n\nSo I'll wait for Brian PR(s) on CSS. Preferably each change separately.\nOnce I'm online again, I can test/+1/merge.\n\nThe other \"blocking\" issue seem also like overly complicated bike shedding. A PR with the changes Brian wants for 4.1 would be simpler to accept/reject, than trying to infer through the long description what is needed. Especially since AFAICT it's one harmless line.\n\nEnvoy\u00e9 de mon iPhone\n\n> Le 30 d\u00e9c. 2015 \u00e0 06:00, \"Brian E. Granger\" notifications@github.com a \u00e9crit :\n> \n> Thanks for the summary:\n> \n> I am in favor or removing the little blue right-border in 4.1.\n> I personally like the left blue border used in multiply selected cells in master (MD Blue #200) but it wasn't the option that most people preferred originally (most preferred to have the left blue border match the background which is MD Blue #50). No objection from me leaving this as is.\n> I am open to the current green border (MD Green #400) in master as long as we run it by everyone (I personally prefer green left with grey on the rest)\n> \u2014\n> Reply to this email directly or view it on GitHub.\n > They are similar enough that, until Brian pointed that fact out, I had to go and measure the RGB values to actually confirm they weren't the same, b/c on quick glance they looked close enough.\n\nNote that I used the CSS value from Brian branch, and that the RGB values measured always differ slightly from the CSS one (at least on my computer) due to Apple \"Smart color adjusting\" which lead to pictures/screen/css having value that don't correspond.\n\nThis is a known issue : ![](http://i.stack.imgur.com/dtHPK.png)\n\n> we'd agreed on implementing something that would look roughly like this:\n\nSome of the votes where for the D-modified variation because of the \"gap\" in between cells due to implementation using borders. The gap is no longer present as we now uses background-gradients. \n\nAlso keeping the border on left for soft-selected cells **was considered better for visually deficient (colorblind) users [and bad overhead projectors]**, where the background only was not enough distinguishable.  We tried in BIDS which is not great but still good, and I let you guess with the Projector we use at dev meetings. \n\nThis was also one if the reason why in multiple selection cells (marking first implementation) we had border of various width.\n\nI'm sad this is not recorded as text somewhere, or I don't find it.\n\nAnd if I read correctly the discussion even Brian was for D-original:\n\n```\nD-original: Brian mildly +\nD-modified: Fernando mildly +\n```\n\nI'm fine changing if you push for it though, (slightly negative as we are post RC for a removal though), also this will force us to redo screenshots everywhere. \n LOL about the hash number using in colors ;-) Sorry about that...\n\nOn Wed, Dec 30, 2015 at 12:34 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Please Brian stop using hash-number you are cross linking PRs and issues.\n> You can use backticks.\n> \n> As I said I'm fine with slight changing of shade, please make PRs I can\n> test/review/merge. It will be faster to actually have a change I can\n> see/test than trying to describe.\n> \n> I already made a PR to change the green, but apparently I misunderstood\n> which. And going back and forth trying to guess is starting to be painful.\n> \n> The removal of the green border though is a no-go unless we test it for\n> minimum 2 weeks with users.\n> \n> So I'll wait for Brian PR(s) on CSS. Preferably each change separately.\n> Once I'm online again, I can test/+1/merge.\n> \n> The other \"blocking\" issue seem also like overly complicated bike\n> shedding. A PR with the changes Brian wants for 4.1 would be simpler to\n> accept/reject, than trying to infer through the long description what is\n> needed. Especially since AFAICT it's one harmless line.\n> \n> Envoy\u00e9 de mon iPhone\n> \n> > Le 30 d\u00e9c. 2015 \u00e0 06:00, \"Brian E. Granger\" notifications@github.com\n> > a \u00e9crit :\n> > \n> > Thanks for the summary:\n> > \n> > I am in favor or removing the little blue right-border in 4.1.\n> > I personally like the left blue border used in multiply selected cells\n> > in master (MD Blue #200) but it wasn't the option that most people\n> > preferred originally (most preferred to have the left blue border match the\n> > background which is MD Blue #50). No objection from me leaving this as is.\n> > I am open to the current green border (MD Green #400) in master as long\n> > as we run it by everyone (I personally prefer green left with grey on the\n> > rest)\n> > \u2014\n> > Reply to this email directly or view it on GitHub.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/892#issuecomment-167957611.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I think we got this in @Carreau's recent PRs.\n","The recent change did not change the configurable status of the config manager...\nThe `config_dir` was hardcoded at the notebookapp level and now it resides in the ConfigManager... \nIf you remove this line https://github.com/jupyter/notebook/blob/master/notebook/services/config/manager.py#L15, you make the ConfigManager not configurable but still you allow people to subclass the ConfigManager to suit it their need... that'e enough for you? I think so... I can submit a PR with that change...\n Can you look at my PR - the entire API of that class has changed in my PR.\nDon't have time to look right now myself to understand this...\n\nOn Tue, Dec 22, 2015 at 11:26 AM, Dami\u00e1n Avila notifications@github.com\nwrote:\n\n> The recent change did not change the configurable status of the config\n> manager...\n> The config_dir was hardcoded at the notebookapp level and now it resides\n> in the ConfigManager...\n> If you remove this line\n> https://github.com/jupyter/notebook/blob/master/notebook/services/config/manager.py#L15,\n> you make the ConfigManager not configurable but still you allow people to\n> subclass the ConfigManager to suit it their need... that'e enough for you?\n> I think so... I can submit a PR with that change...\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/893#issuecomment-166708925.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Can you look at my PR - the entire API of that class has changed in my PR.\n\nI will take a look in the next few hours...\n [Here](https://github.com/jupyter/notebook/pull/879/files#r48294796) you are removing the `config_dir` configurable and removing the \"private\" method to conform a new API... so if we just remove the `config_dir` configurable from the ConfigManager, I mean removing just the line 15: https://github.com/jupyter/notebook/blob/master/notebook/services/config/manager.py#L15, then you will be backward compatible with 4.1 because you will be only removing the \"private\" method... So things keep in the same way from the outside viewer... NOT a `--ConfigManager.config_dir` option available to use and the native ConfigManager pointing to the user config_dir... or am I missing something else?\n IIRC, I changed the base class of the manager though. I am no longer using\nthe same class as the base class...also, when I do instantiate the base\nclass I don't pass it config. If you are relying on configuring the base\nclass, that will stop working in the future.\n\nOn Tue, Dec 22, 2015 at 12:39 PM, Dami\u00e1n Avila notifications@github.com\nwrote:\n\n> Here https://github.com/jupyter/notebook/pull/879/files#r48294796 you\n> are removing the config_dir configurable and removing the \"private\"\n> method to conform a new API... so if we just remove the config_dir\n> configurable from the ConfigManager, I mean removing just the line 15:\n> https://github.com/jupyter/notebook/blob/master/notebook/services/config/manager.py#L15,\n> then you will be backward compatible with 4.1 because you will be only\n> removing the \"private\" method... So things keep in the same way from the\n> outside viewer... NOT a --ConfigManager.config_dir option available to\n> use and the native ConfigManager pointing to the user config_dir... or am I\n> missing something else?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/893#issuecomment-166724419.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n For information you are referring to #882 I guess. (and #879)\n I might be missing something, but I tend to side with @damianavila on this one. \nWorse case, you can do `BaseJSONConfigManager(Config({\"config_dir\":p}))`, as anyway `BaseJSONConfigManager` cannot take a `config_dir` kwarg in traitlets 4.0, and we will likely **not** require traitlets 4.1 for notebook 4.2.\n @damianavila \nWould passing `config_dir=os.path.join(self.config_dir, 'nbconfig'),` again, but ignoring it in the base config class suit both of you ?\n @Carreau, passing `config_dir=os.path.join(self.config_dir, 'nbconfig')` where? At the notebookapp level? That's not good... if we hardcode the `config_dir` again we can no longer use a custom ConfigManager...\n\nOr are you proposing to remove `_config_dir_default` and make the  `config_dir=os.path.join(self.config_dir, 'nbconfig')` there, inside the ConfigManager class?\n\n``` diff\n$ git diff\ndiff --git a/notebook/services/config/manager.py b/notebook/services/config/manager.py\nindex 2399f86..7ccd623 100644\n--- a/notebook/services/config/manager.py\n+++ b/notebook/services/config/manager.py\n@@ -7,11 +7,9 @@ import os.path\n\n from traitlets.config.manager import BaseJSONConfigManager\n from jupyter_core.paths import jupyter_config_dir\n-from traitlets import Unicode\n\n class ConfigManager(BaseJSONConfigManager):\n     \"\"\"Config Manager used for storing notebook frontend config\"\"\"\n\n-    config_dir = Unicode(config=True)\n-    def _config_dir_default(self):\n-        return os.path.join(jupyter_config_dir(), 'nbconfig')\n+    config_dir = os.path.join(jupyter_config_dir(), 'nbconfig')\n```\n\nIf that's the case, we can probably live with it :wink:\n Then I think I'm confused of what Brian ask to revert, and what he is asking to re-add for 4.1.\n\nI'm wondering what would be a good compromise for 4.1 that would allow Brian to do his work without being impaired and not risking API breakage.\n > Then I think I'm confused of what Brian ask to revert, and what he is asking to re-add for 4.1.\n\nI think I am in the same position, I don't get where is the issue... despite the fact that before my PR the `ConfigManager.config_dir` did not work and now it is working... so, to go back to a \"similar\" situation than before, but without passing the `config_dir` at the notebook level, we just need to make `config_dir` at the `ConfigManager` not a configurable and you can do that with the diff I posted above, I think...\n\n> I'm wondering what would be a good compromise for 4.1 that would allow Brian to do his work without being impaired and not risking API breakage.\n\nNot sure if I am completely understanding Brian, but I guess the diff posted above is a good compromise IF I understood him well...\n Let me have a look...\n\nSent from my iPhone\n\n> On Dec 24, 2015, at 11:31 AM, Dami\u00e1n Avila notifications@github.com wrote:\n> \n> Then I think I'm confused of what Brian ask to revert, and what he is asking to re-add for 4.1.\n> \n> I think I am in the same position, I don't get where is the issue... despite the fact that before my PR the ConfigManager.config_dir did not work and now it is working... so, to go back to a \"similar\" situation than before, but without passing the config_dir at the notebook level, we just need to make config_dir at the ConfigManager not a configurable and you can do that with the diff I posted above, I think...\n> \n> I'm wondering what would be a good compromise for 4.1 that would allow Brian to do his work without being impaired and not risking API breakage.\n> \n> Not sure washout completely understanding Brian, but I guess the diff posted above is a good compromise IF I understood him well...\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n OK, here is a summary of the past and current state:\n\nIn 4.0:\n- `NotebookApp.config_manager_class` is a configurable that the notebook app uses to instantiate `self.config_manager`.\n- This instances is used in the config handler (it gets passed to the tornado settings and ends up as an attribute on the handler) to set/get config from the frontend. But the `config_dir` attribute is not used in that API.\n- In 4.0, we hard-code the `config_dir` attribute of the config manager when the `NotebookApp` instantiates it. Because of this, @damianavila can swap out the configurable `config_manager_class`, but can't set which config dir is used.\n\nIn 4.1 master:\n- `NotebookApp.config_manager_class` is still used to instantiate the class that is used in the config handler.\n- But we no longer hard-code the `config_dir` attribute at that location in the `NotebookApp`.\n- Now the default comes from the `ConfigManager` class itself, which has a `_config_dir_default` method that has been there all along, but wasn't being used because we were passing it in.\n\nMy proposal for 4.2:\n- I pull a sleight of hand to load config from multiple directories in a backwards compatible manner.\n- My `ConfigManager` class has the exactly same API that is used by the handlers.\n- **But**, it doesn't have a `config_dir` attribute at all because it ends up loading from multiple directories.\n\nMy conclusion:\n- If we consider `config_dir` to be part of the public API in 4.0, then my entire approach falls apart (it is backwards incompatible).\n- But because of the bug that was in 4.0, it was mostly impossible to pass in a custom config manager that uses a different `config_dir`.\n- Because of that bug, I am not sure we should consider any of this as being public API in 4.0.\n- **But** the bug fix of @damianavila does make it all public (in current master).\n- If someone uses a custom `ConfigManager` that subclasses the one from 4.1, my 4.2 approach will likely break their code.\n\nSummary: a bug in 4.0 essentially hides an API from users/devs in a way that allows me to change it without breaking backwards compatibility. The bug fix in 4.1 will make my 4.2 proposal backwards incompatible.\n\nBut, I don't think anyone is using any of this stuff other than @damianavila et al. So if he is fine moving forward with the current state of 4.1 _and_ is fine with my proposal for 4.2 that will break his 4.1 stuff, then I am OK.\n\nMy main concern here is that I don't want us to be prevented from improving the nbextension situation for users in 4.2, just because of an obscure, unused API.\n Would you prefer to revert the configurability fix, if I show a workaround that will work on 4.0?\n\n``` python\nimport os\n\nfrom traitlets import Unicode\n\nfrom jupyter_core.paths import jupyter_config_dir\nfrom notebook.services.config import ConfigManager\n\nclass MyConfigManager(ConfigManager):\n    custom_config_dir = Unicode(config=True)\n    def _custom_config_dir_default(self):\n        return os.path.join(jupyter_config_dir(), 'nbconfig')\n\n    @property\n    def config_dir(self):\n        # config_dir is a read-only alias to custom_config_dir\n        return self.custom_config_dir\n\n    @config_dir.setter\n    def config_dir(self, value):\n        # ignore attempts to set config_dir\n        pass\n\nc.MyConfigManager.custom_config_dir = '/tmp/custom'\n\nc.NotebookApp.config_manager_class = MyConfigManager\n```\n\nThis way a `custom_config_dir` configurable is added, which can set the config directory, and works around any attempt by the NotebookApp to set the default config_dir.\n If that's the way we want to go, #905 restores the hardcoded value.\n Actually @damianavila I have a question. What are you trying to do in your custom `ConfigManager` subclass. That may be the most important thing to address here. \n\nThe reason I say that is this - if you are going to ship a custom `ConfigManager` that _only_ reads config from the conda specific config location, and not the user's config, that would be very frustrating to users. It means that all nbextensions that users have installed and working in 4.0 will stop working in 4.1 if they are using conda. I think that would be a step backwards.\n\nIf, on the other hand, you are going to ship a custom `ConfigManager` that does what the one in my PR does (loads from all locations, but saves only in user config) then you won't break user's existing installs.\n\nThese issues are much more important to me than the particular details of the changes we are discussing making to 4.1.\n @minrk thanks for the workaround... in fact, I workaround the issue in another way just setting the `config_dir` at the initialization of the custom ConfigManger and it seems to work OK...\n\n@ellisonbg, that's the whole point of the discussion, we are trying to install the extension inside `prefix` but **also** enabling the user installed extension... that's the reason for our custom ConfigManager which is essentially reading the config from the user and \"adding\" it to the config living in the prefix, so people starting with `jupyter notebook` in a conda environment where our extension are installed can also use their own extension (\"activated\" at the user config place)\n\n> If, on the other hand, you are going to ship a custom ConfigManager that does what the one in my PR does (loads from all locations, but saves only in user config) then you won't break user's existing installs.\n\nAs I mentioned before, the implementation is a little bit different because we copy the content of the config files at the user space and add those to the config inside the env... so, in this way, we are not modifying the user space from inside the env (because that would break the env isolation and play dirty with something that only the user should modify - and not a package manager)... finally, we point to the env's config dir to start the notebook...\n @damianavila I want to understand this. Are you actively migrating user config to the sys.prefix config in the conda env?\n\nThe problem with that is that the builtin jupyter CLI tools (`jupyter nbextension`) in 4.1 don't have any way to manipulate the config files in sys.prefix. Thus, a user would have no way to disable   nbextensions that you have migrated without diving into obscure directories in the conda env.\n\nWhy not just use the `ConfigManager` in my PR that _loads_ from all directories, but writes only to the sys.prefix one? Then you will already be using the official approach we will support in 4.2.\n > @damianavila I want to understand this. Are you actively migrating user config to the sys.prefix config in the conda env?\n\nYes.\n\n> The problem with that is that the builtin jupyter CLI tools (jupyter nbextension) in 4.1 don't have any way to manipulate the config files in sys.prefix. Thus, a user would have no way to disable nbextensions that you have migrated without diving into obscure directories in the conda env.\n\nWe started to work on this several weeks/months ago and we developed some other tools to potentially solve this issue because the `jupyter nbextension` tools were not prepared to deal with environments... in the road we learn some things and this is why we pushed the discussion in some nbextension-related issues lately...\n\n> Why not just use the ConfigManager in my PR that loads from all directories, but writes only to the sys.prefix one? \n\nNow, this is an option! Because we had several discussion and some consensus and your PR is now out there... From an historical perspective, so you can understand how this evolved, we put in place a machinery for some internal work when the discussion and consensus did not even birth yet... and we solved some issues on the road with custom developments.\nWith these things we can provide now some good experience around nbextension and server-extension for conda users...\nBut, we would like/should adopt the consensus and migrate to something more general in the near future... like the thing you proposed in your PR.\n\n> Then you will already be using the official approach we will support in 4.2.\n\nThat's interesting and it is in my todo list to do it if I am not redirected to other efforts inside the company :wink:\n","I would trim this list down a lot (personal opinion) :\n- 3 docker-\\* repos (not really active)\n- Notebook legacy docs are too much indexed by google, remove the link. \n- IPython-\\* are IPython specific, I'm not sure we want the here. \n- Traitlets maybe too much too.\n- tmpnb is really unlikely to be useful. \n\nI'm wondering if there is a way to but that in a package, and require it in all docs instead of having to update in N places. \n @Carreau Thanks for the review and comments. I'll try to give some perspective inline on what my thinking was for inclusion. We can certainly iterate from there :-)\n\n> I would trim this list down a lot (personal opinion) :\n\nI would too. Yet, the growth of repos has made it difficult (particularly for a user of the projects) to see the breadth of projects that they may run across in their use of Jupyter. We do have this [subprojects](https://jupyter.readthedocs.org/en/latest/subprojects.html) page in the Jupyter docs (which is different than the Jupyter notebook docs). The list of projects essentially come from that page. The additions are the docker repos and IPython/traitlets.\n\n>    3 docker-\\* repos (not really active)\n>    Notebook legacy docs are too much indexed by google, remove the link.\n>    IPython-\\* are IPython specific, I'm not sure we want the here.\n\nThe inclusion of these were prompted by an issue that @fperez filed https://github.com/jupyter/jupyter/issues/87 after reading a blog post by G. Dumpleton on OpenShift, Docker, IPython and Jupyter. A [second blog post](http://blog.dscpl.com.au/2015/12/random-user-ids-when-running-docker.html) came out yesterday.\n\n>    Traitlets maybe too much too.\n\nNo strong objections from me on removing.\n\n>    tmpnb is really unlikely to be useful.\n\nYou are likely correct, but I think that users have a name association with tmpnb so I don't think there is real harm of leaving it in.\n\n> I'm wondering if there is a way to but that in a package, and require it in all docs instead of having to update in N places.\n\nAgreed. I am pretty confident that a custom Sphinx theme based off the RTD theme will enable us to do this. \n\n:evergreen_tree: Ultimately, I would love to see a pretty docs landing page at Jupyter.org that visually displays the projects and links easily to the individual documentation. That would take longer to implement since it would need design work, strategic input on which projects, and development. I was hoping to implement this PR in jupyter/notebook and jupyter/jupyter docs as an interim step to at least give us the opportunity to begin referring to the front page of each of those docs as a gateway to most of the docs. It truly is an interim step but one that I think has benefits in the short term, especially since there will be eyeballs on both sets of docs when 4.1 is officially released :-)\n\nI'm open to thoughts and other ideas for now or down the road. :bulb: \n\ncc/ @ellisonbg \n Logo added to Jupyter Sphinx RTD theme\n\n<img width=\"1081\" alt=\"screen shot 2015-12-24 at 7 08 32 pm\" src=\"https://cloud.githubusercontent.com/assets/2680980/11999410/cf8f8d38-aa71-11e5-8043-1e463fdd9c55.png\">\n I'm not sure about the white square, though I don't think the logo would look right on a blue background either.\n > I'm not sure about the white square, though I don't think the logo would look right on a blue background either.\n\nWe might want a cutout version of the logo which have a white border al around it. \n Thanks for the feedback @takluyver and @carreau. I'm playing around with ideas on this PR. Feel free to share other ideas - things you would like to see in a custom RTD theme. Going to work on getting the project links into a sidebar template. Been looking at Astropy, Numpy, SciPy, IPython, Django and a few other sites for ideas. If you have some favorite docs, drop a note here and I will check them out too.\n Since the work of a full \"Jupyter theme\" is IMO out of scope (great to have, but I'd rather we focus our energy for now on docs structure and content), an idea might be to put a thick frame/border around our Jupyter and IPython logos in the doc pages, that might ease the visual transition. \n\nIf the frame colors are more in line with those of the theme, it may help contain the logo items, that  by necessity may have their own colors that are somewhat different from the surrounding theme.\n\nJust a thought looking for a quick solution so we can focus on content :)\n @fperez Agreed. Good suggestion re: border transition. I think we're on the same page re: priorities.\n\nWhen I say theme, I'm less focused on design (since that's not my strength) and more on content/structure. Things like:\n- simpler access to installation instructions for operating systems (see Astropy example)\n- easy access to the breadth of documentation/project links (see Django example)\n- Easy download of PDFs of documentation by project and/or versions and access to further help (see SciPy example)\n- Prominent access to notebook viewer (one of the most powerful features of the IPython documentation from a user group perspective) and examples (notebook gallery) (see IPython example)\n\n## Plan\n1. ASAP Highest priority - Have at least one location where all documentation can be accessed easily. This will likely be interim in terms of design but important to have as a start toward integrating the docs that live in different repos yet the user may wish to access easily while setting up their environment and workflows.\n2. come up ASAP with a standard `conf.py` (sidebars, links) and `index.rst` (consistent table of contents structure for a project) templates for existing and new documentation on RTD (These two files are what I'm referring to as a standard Jupyter theme or more simply Jupyter doc standard.)\n3. Revisit ipynb examples and use of `pandoc` or other third party Sphinx extensions to better display rendered notebooks on RTD.\n4. Add cross reference links to help end users navigate between common configuration scenarios that span multiple projects (i.e. jupyterhub, nbgrader) or (docker, notebook).\n\n@fperez, @ellisonbg Please let me know if you have different priorities. I'm working under the assumption that we're doing doc triage and incremental changes to RTD hosted docs now moving over time to a more visually appealing design for docs to coincide with 5.0 if not sooner.\n\n## Examples from other projects\n- simpler access to installation instructions for operating systems (Astropy):\n  <img width=\"1073\" alt=\"screen shot 2015-12-25 at 5 46 17 pm\" src=\"https://cloud.githubusercontent.com/assets/2680980/12004831/86827114-ab2f-11e5-8c45-b03303a82a50.png\">\n- easy access to the breadth of documentation/project links (Django)\n  <img width=\"1167\" alt=\"screen shot 2015-12-25 at 5 49 01 pm\" src=\"https://cloud.githubusercontent.com/assets/2680980/12004835/0a4ede9c-ab30-11e5-9b9a-bd06d64182ba.png\">\n  <img width=\"1150\" alt=\"screen shot 2015-12-25 at 5 49 33 pm\" src=\"https://cloud.githubusercontent.com/assets/2680980/12004834/016b48e2-ab30-11e5-94cf-6f1d613d3e52.png\">\n- Easy download of PDFs of documentation by project and/or versions (SciPy)\n  <img width=\"1028\" alt=\"screen shot 2015-12-25 at 5 52 54 pm\" src=\"https://cloud.githubusercontent.com/assets/2680980/12004842/77b9eed6-ab30-11e5-99b6-37e506cdcbdd.png\">\n- Prominent access to notebook viewer (one of the most powerful features of the IPython documentation from a user group perspective) and examples (notebook gallery) (IPython)\n  <img width=\"1168\" alt=\"screen shot 2015-12-25 at 5 55 34 pm\" src=\"https://cloud.githubusercontent.com/assets/2680980/12004846/23c3e542-ab31-11e5-9186-2b98af012939.png\">\n On Fri, Dec 25, 2015 at 6:22 PM, Carol Willing notifications@github.com\nwrote:\n\n> @fperez https://github.com/fperez Agreed. Good suggestion re: border\n> transition. I think we're on the same page re: priorities.\n> \n> When I say theme, I'm less focused on design (since that's not my\n> strength) and more on content/structure. Things like:\n> - simpler access to installation instructions for operating systems\n>   (see Astropy example)\n> - easy access to the breadth of documentation/project links (see\n>   Django example)\n> \n> Agreed.\n> - Easy download of PDFs of documentation by project and/or versions\n>   and access to further help (see SciPy example)\n> \n> While very valuable long-term, I'd put below the others in priority for\n> now, unless our build chain is in such good shape that it doesn't take much\n> work. I think for now, having good HTML docs is the main priority.  Someone\n> from the community could help with the technical tooling for clean PDF\n> builds, but I'd much rather your talents go towards thinking about content\n> and structure to help the users navigate their way around the project.\n> - Prominent access to notebook viewer (one of the most powerful\n>   features of the IPython documentation from a user group perspective) and\n>   examples (notebook gallery) (see IPython example)\n> \n> Yup, along with what those examples illustrate, how they play with the\n> rest of the docs, eliminating redundancy, etc.  That's where we've fallen\n> so badly behind.\n> \n> Plan\n> 1. ASAP Highest priority - Have at least one location where all\n>    documentation can be accessed easily. This will likely be interim in terms\n>    of design but important to have as a start toward integrating the docs that\n>    live in different repos yet the user may wish to access easily while\n>    setting up their environment and workflows.\n> 2. come up ASAP with a standard conf.py (sidebars, links) and index.rst\n>    (consistent table of contents structure for a project) templates for\n>    existing and new documentation on RTD (These two files are what I'm\n>    referring to as a standard Jupyter theme or more simply Jupyter doc\n>    standard.)\n> 3. Revisit ipynb examples and use of pandoc or other third party\n>    Sphinx extensions to better display rendered notebooks on RTD.\n> 4. Add cross reference links to help end users navigate between common\n>    configuration scenarios that span multiple projects (i.e. jupyterhub,\n>    nbgrader) or (docker, notebook).\n> \n> @fperez https://github.com/fperez, @ellisonbg\n> https://github.com/ellisonbg Please let me know if you have different\n> priorities. I'm working under the assumption that we're doing doc triage\n> and incremental changes to RTD hosted docs now moving over time to a more\n> visually appealing design for docs to coincide with 5.0 if not sooner.\n\nThis sounds very reasonable. I'm sure along the way, you'll find lots of\ninconsistencies, circular links, dead-ends, etc.  But precisely having your\nlead on this problem will let us finally make progress on this mess, thanks\nso much :)\n\nf\n\n## \n\nFernando Perez (@fperez_org; http://fperez.org)\nfperez.net-at-gmail: mailing lists only (I ignore this when swamped!)\nfernando.perez-at-berkeley: contact me here for any direct mail\n Closing this PR since much of it has been covered in other doc PRs.\n","That's likely an issue to see with the author of this book, it has nothing to do with the notebook application itself. \n\nThe notebook is just an editing environment, it does not deal with installing software or library. This is up to your package manager. \n\nYou likely need to install [pymc](https://pypi.python.org/pypi/pymc), either through `pip`, `conda`, (or `pkg` IIRC the name of FreeBSD package manager) depending on your preference. \n\nI'm closing the issue, but feel free to continue asking questions. \n To expand a bit: it sounds like you have the notebook installed OK, but the code inside notebooks can use all kinds of packages which you need to install separately. You're using a notebook that requires the package PyMC, so you'll need to install that.\n\nWe often recommend that people install [Anaconda](https://www.continuum.io/downloads), a bundle which includes the notebook along with a lot of popular scientific Python packages. I forget whether PyMC is one that it installs by default, though.\n For example, I am getting this error (on every run):\n\n```\nImportError                               Traceback (most recent call last)\n<ipython-input-1-8d1abd5f35c0> in <module>()\n----> 1 import pymc as pm\n      2 \n      3 \n      4 parameter = pm.Exponential(\"poisson_param\", 1)\n      5 data_generator = pm.Poisson(\"data_generator\", parameter)\n\nImportError: No module named pymc\n```\n\nI do have pymc installed: py27-pymc-2.3.6,1\nAnd this program succeeds when run standalone.\n\nI traced all system calls, this package files do get opened successfully.\n @yurivict pymc has dependencies on numpy and scipy so do check as Thomas suggests to have them installed.\nHere are two gists with bash scripts that you may find helpful in troubleshooting:\n[checkmypython.sh](https://gist.github.com/willingc/9ff70a642b54023cc8d4)\n[checkmypackages.sh](https://gist.github.com/willingc/9dd6efb251399e84468f)\n numpy and scipy are both installed, because they are dependencies of pymc, but there is still a problem. I don't use pip.\n\nOn the other hand, on FreeBSD ipython hasn't been used and updated for a while, and jupyter is a new port that I just made, so there is something wrong in between there.\n You are likely running the notebook kernel from one installation of Python and installed PyMC, numpy ans scipy in another. \n\nThe best way to see which python is used in the notebook is to use n a cell:\n\n```\nimport sys\nprint(sys.executable)\n```\n\nand compare that to the python you installed PyMC for. If you don't use pip i'm not sure how to test which python you install these pacakges for.\n","I am strongly opposed to this - if makes our bad green even more prominent with the thick left border. It has the same problems as master, just a worse green, that doesn't match the visual design of the blues we are using.\n\nThe original design we agreed upon took a ton of work to find consensus. Please implement that consensus for now. Then if you want to propose something else and get everyone on board you can.\n\nWe _are_ changing the visual design of cells in 4.1 and I don't see any way to avoid that. For example we and everyone else says \"command mode has a Grey border\" but that is no longer true either. \n\nBad visual design at this level is a bug and in most cases we should fix it in in minor releases\n\nKeep in mind that none of these major new UI features should have been done in 4.1, so all of this is a compromise at this point.\n\nSent from my iPhone\n\n> On Dec 23, 2015, at 2:50 AM, Matthias Bussonnier notifications@github.com wrote:\n> \n> Mitigate #892\n> \n> Ping @ellisonbg\n> \n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/jupyter/notebook/pull/896\n> \n> Commit Summary\n> \n> Restore old green for edit mode\n> File Changes\n> \n> M notebook/static/notebook/less/variables.less (2)\n> Patch Links:\n> \n> https://github.com/jupyter/notebook/pull/896.patch\n> https://github.com/jupyter/notebook/pull/896.diff\n> \u2014\n> Reply to this email directly or view it on GitHub.\n > The original design we agreed upon took a ton of work to find consensus. Please implement that consensus for now. Then if you want to propose something else and get everyone on board you can.\n\nI'm sorry I was trying to address what you said in #892 : \n\n> We have changed the green to a slightly brighter color to match the Material Design blues used in the multiple select UI.\n> The new design has \"even more green\" in the left border.\n> Between the green 5px left border and brighter green, it is just too much for a UI element that gets shown to the user that often.\n\nI understood that as : \"The old green was better\", thus I thought this would please you and did that only for that reason. Apologies if I misunderstood. \n\n> The original design we agreed upon took a ton of work to find consensus. Please implement that consensus for now.\n\nFor me the **current** style is the consensus, and you ask in #892 to remove the green border for the cell. So your proposal in #892 is changing the style we agreed upon. \n\n(Sidenote: I, as a person, would prefer a notebook style with only the left indicator and no border. Though **not changing that** is what we agreed upon. We agreed to **only add a left indicator** for 4.1)\n\n> We _are_ changing the visual design of cells in 4.1 and I don't see any way to avoid that. For example we and everyone else says \"command mode has a Grey border\" but that is no longer true either.\n\nHum, my cells on 4.1rc still have grey border. \nThe blue indicator on the left is in the background:\n\n```\ndiv.cell.selected {\n    border-color: #ababab; // this is gray. \n    // this is blue and then transparent. \n    background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%);\n}\n```\n\n> Bad visual design at this level is a bug and in most cases we should fix it in in minor releases\n\nAgreed, but not at the expense of breaking user habits, all tutorials, and books published. E.g. @jdfreder videos. \n\n> Keep in mind that none of these major new UI features should have been done in 4.1, so all of this is a compromise at this point.\n\nYes, and 4.1 have been slow changing for a few weeks, had a **beta** and a **rc** cycle which were already including the compromise style we agreed upon. And you are asking major UI changes 24 to 48 hours from a potential release.\n\nI'm open to accept **some changes**, because I deeply trust you, and you are someone sensible to design. But as a maintainer it's really hard lang huge change that close to reelease. \n Please do not release over a holiday - there are too many people away from the computer right now. There may not even be enough people around next week...\n\nSent from my iPhone\n\n> On Dec 24, 2015, at 2:06 AM, Matthias Bussonnier notifications@github.com wrote:\n> \n> The original design we agreed upon took a ton of work to find consensus. Please implement that consensus for now. Then if you want to propose something else and get everyone on board you can.\n> \n> I'm sorry I was trying to address what you said in #892 :\n> \n> We have changed the green to a slightly brighter color to match the Material Design blues used in the multiple select UI.\n> The new design has \"even more green\" in the left border.\n> Between the green 5px left border and brighter green, it is just too much for a UI element that gets shown to the user that often.\n> \n> I understood that as : \"The old green was better\", thus I thought this would please you and did that only for that reason. Apologies if I misunderstood.\n> \n> The original design we agreed upon took a ton of work to find consensus. Please implement that consensus for now.\n> \n> For me the current style is the consensus, and you ask in #892 to remove the green border for the cell. So your proposal in #892 is changing the style we agreed upon.\n> \n> (Sidenote: I, as a person, would prefer a notebook style with only the left indicator and no border. Though not changing that is what we agreed upon. We agreed to only add a left indicator for 4.1)\n> \n> We are changing the visual design of cells in 4.1 and I don't see any way to avoid that. For example we and everyone else says \"command mode has a Grey border\" but that is no longer true either.\n> \n> Hum, my cells on 4.1rc still have grey border. \n> The blue indicator on the left is in the background:\n> \n> div.cell.selected {\n>     border-color: #ababab; // this is gray. \n>     // this is blue and then transparent. \n>     background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%);\n> }\n> Bad visual design at this level is a bug and in most cases we should fix it in in minor releases\n> \n> Agreed, but not at the expense of breaking user habits, all tutorials, and books published. E.g. @jdfreder videos.\n> \n> Keep in mind that none of these major new UI features should have been done in 4.1, so all of this is a compromise at this point.\n> \n> Yes, and 4.1 have been slow changing for a few weeks, had a beta and a rc cycle which were already including the compromise style we agreed upon. And you are asking major UI changes 24 to 48 hours from a potential release.\n> \n> I'm open to accept some changes, because I deeply trust you, and you are someone sensible to design. But as a maintainer it's really hard lang huge change that close to reelease.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n > Please do not release over a holiday - there are too many people away from the computer right now. There may not even be enough people around next week...\n\nThen please, stop pushing people toward designing things for 4.2 and 5.0. \n","Thanks for your deprecation messages.\n","This is a blocker for Jupyter Lab, so I'd recommend 4.1.\n That seem harmless, +1. I'll let someone else merge that in.\n\n(worse case, fix like that can be in a `4.1.1`)\n","> Pr #882 removed config_dir kwarg as it was ignored.\n\nIt was remove primarily because it was \"forcing\" the `config_dir` at the notebookapp level...\n\n> Though, #893 argues that we might need it and that it will be complex to\n> reintroduce it.\n\nWe don't need the `config_dir` option at the ConfigManager class, we just need to avoid the enforcement at the notebookapp level. I guess nobody was using the ConfigManager.config_dir option before because it was not working... but we don't need that option\n\nMy believe is that the `config_dir` should be settled at the ConfigManager level, not passing that one from the notebookapp level... this is why I submitted 882.\nMy comment on https://github.com/jupyter/notebook/issues/893#issuecomment-167099432 should not also resolve the issue?\n","Thanks, this looks sensible. I'll let @minrk have a look before we merge.\n @takluyver pointed out that for Debian/Ubuntu systems, if you're installing the system `node` you need to use the `nodejs-legacy` package and _not_ the `node` package. It would be nice to mention this in the instructions as this is easy to have incorrect and almost impossible to discover form the failure messages. \n So the invoke + less stuff was needed earlier today, this is all now already a bit simpler\n @minrk this was updated, can you take another look?\n :+1: \n","Looking good.\n\n![](http://media.giphy.com/media/JoVWKS9TbUxK8/giphy.gif)\n","Perhaps a [Chrome bug](https://code.google.com/p/chromium/issues/detail?id=532002&q=scrollbar&colspec=ID%20Pri%20M%20Stars%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20OS%20Modified). I'm using OSX on a Mac Pro retina display 10.10.5 and don't see on FF. Will use chrome and see if it happens at some point. \n\nSimilar issue with Canary https://imgur.com/gallery/Y8MF65x\n As a note, I've only been able to trigger it on a notebook that, when printed to PDF, is ~ 45 pages long!  So it's certainly not common, and unless we can replicate it easily, I'm 100% comfortable retargeting this to 4.2 or later.\n\nNo point blocking the release for something we can't reliably reproduce under regular conditions.\n Chrome seems to repeatedly introduce size-measuring bugs that cause scrollbars to appear _sometimes_.\n\nFor diagnostics:\n- exact chrome version\n- example notebook (it can even be character-sensitive)\n- OS, retina screen or not (this has mattered for past bugs of this sort)\n- zoom-level\n\nOne of the common failures I've seen is when zoom is not 100%, and some pixel-measuring APIs return floating-point values, while others return integers. When these mismatch, scrollbars can show up for that missing half-pixel.\n Since these have come and gone, and are often fixed in Chrome's own releases, I'd be inclined to mark it as 4.2 (or 4.1.1 if we find a simple fix).\n No objection from me, marking as 4.2.  For reference, this was on Chrome Version 47.0.2526.106 (64-bit), OS X, displaying on my main monitor (Retina MacBook Pro, but showing on my non-retina 1920x1200 screen), zoom level 0.  Unfortunately I can't share the actual notebook, it contains internal sensitive data, sorry.\n It's been a long time since I've been able to see this one. Can anybody reproduce these scrollbar issues with current versions of things? @minrk I haven't seen this in quite a while either. I recommend closing. Closed for now, we can reopen it if people can reproduce it.","Looks good to me.\n Thanks. I got a PR into the notebook 4.1, wohoo! ;)\n","+1 as is.\n\nTip for screenshot, (doen't mean I don't like you theme with bird), I find that usually Safari allows to remove all window decoration (including address bar) which lead to much more compact screenshot vertically)\n @Carreau The screenshot of bird theme can fly south for the winter. Will try to get a better shot on Safari and upload :smile:\n No, you can keep the screenshot. \n We should try an easier way to make screenshot anyway. Like chrome extension that resize the window to a specific determined width and screenshot the page. Then add the a false windows border when compiling with sphinx. \n @Carreau Yeah, I was thinking the same thing about a predetermined width and also whether we wanted PNG or JPG for the screen shot. I'm happy to redo the screenshot. One advantage may be that a smaller shot would allow more viewing of the text below.\n","@oscar6echo While I am not 100% sure on the answer to your question (pinging @jdfreder @ellisonbg @Carreau for additional insights), I believe that you may still add the `c.InteractiveShellApp.extensions` option to the notebook config file even though it is no longer bundled in the config file by default. \n\nHere are the links to current documentation related to IPython extensions in Jupyter and IPython docs:\n[Jupyter documentation on migration of extensions](https://jupyter.readthedocs.org/en/latest/migrating.html#notebook-extensions)\n[Documentation of IPython extensions](https://ipython.readthedocs.org/en/latest/config/extensions/)\n[Bundled IPython extensions](https://ipython.readthedocs.org/en/latest/config/extensions/#extensions-bundled-with-ipython)\n[How to install and add to configuration file an IPython Extension](https://ipython.readthedocs.org/en/latest/config/extensions/#ipython-extensions)\n I don't think that the IPython kernel will read the\njupyter_notebook_config.py file. You would have to put that in your ipython\nconfig file, which is loaded by all ipython kernels. Think of it this way -\njupyter is language independent and doesn't know anything about how\nparticular kernels in different languages are configured. Does that make\nhelp?\n\nOn Mon, Dec 28, 2015 at 4:08 PM, Carol Willing notifications@github.com\nwrote:\n\n> @oscar6echo https://github.com/oscar6echo While I am not 100% sure on\n> the answer to your question (pinging @jdfreder\n> https://github.com/jdfreder @ellisonbg https://github.com/ellisonbg\n> @Carreau https://github.com/Carreau for additional insights), I believe\n> that you may still add the c.InteractiveShellApp.extensions option to the\n> notebook config file even though it is no longer bundled in the config file\n> by default.\n> \n> Here are the links to current documentation related to IPython extensions\n> in Jupyter and IPython docs:\n> Jupyter documentation on migration of extensions\n> https://jupyter.readthedocs.org/en/latest/migrating.html#notebook-extensions\n> Documentation of IPython extensions\n> https://ipython.readthedocs.org/en/latest/config/extensions/\n> Bundled IPython extensions\n> https://ipython.readthedocs.org/en/latest/config/extensions/#extensions-bundled-with-ipython\n> How to install and add to configuration file an IPython Extension\n> https://ipython.readthedocs.org/en/latest/config/extensions/#ipython-extensions\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/903#issuecomment-167682014.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Yes it makes help and sense and it works.\nThanks to both of you.\n\nFor the record, here is what I did:\n\n1/\nErase just about every file (not folder) in my .ipython directory for fear some remnant files from before the Big Split cause trouble.\n2/\nRun from terminal `ipython notebook --generate-config`. It failed until I re-created my default profile with `ipython profile create`. Then it worked. The `ipython notebook --generate-config` command created 2 config files: \n- .ipython/profile_default/ipython_config.py\n- .ipython/profile_default/ipython_kernel_config.py  \n\n3/\nAdd `c.InteractiveShellApp.extensions = [ 'version_information']`to the first one. Putting this snippet in the second one, or not, did not seem to have an impact.\n\n4/ Re-start the kernel and the '%version_information' magic (http://nbviewer.ipython.org/github/jrjohansson/version_information/blob/master/example.ipynb) I used was listed below `%lsmagic` and indeed available through `%version_information`.\n\n5/ My config:\n\n```\n$ conda list  | grep -E 'jupyter|ipython' \nipython                   4.0.1                    py27_0    defaults\nipython-genutils          0.1.0                     <pip>\nipython_genutils          0.1.0                    py27_0    defaults\njupyter                   1.0.0                    py27_1    defaults\njupyter_client            4.1.1                    py27_0    defaults\njupyter_console           4.0.3                    py27_0    defaults\njupyter_core              4.0.6                    py27_0    defaults\n```\n\nBy the way, I noticed that the folder 'extensions' in .ipython (surely a remnant) is empty and could be deleted without apparent consequences.\n\n(And congrats to all the people working on IPython & Jupyter - Very very useful !)\n @oscar6echo I'm glad that you got it working :+1: Thanks for the nice congrats to all working on the projects. And...thank you for sharing your detailed resolution which may assist someone else.\n\nI'm going to close this issue.\n","@goretkin Thanks for the issue report.\n\n@carreau I've replicated the issue on FF with current release candidate. It looks like the conversion of the traceback text is not properly closing tags when the source of the cell includes a comment with a link.\n\n### Conversion of link in comment of Traceback message is not properly closing the tag\n\n<img width=\"1209\" alt=\"screen shot 2015-12-28 at 9 44 42 pm\" src=\"https://cloud.githubusercontent.com/assets/2680980/12030032/ac4f2020-adac-11e5-9f0c-ee8c653138ec.png\">\n\n### Traceback display works as expected when the source has no link in comment\n\n<img width=\"1210\" alt=\"screen shot 2015-12-28 at 9 46 12 pm\" src=\"https://cloud.githubusercontent.com/assets/2680980/12030033/b069e708-adac-11e5-8dcb-81332db8ae80.png\">\n\n#### Test environment: latest release candidate, Python 3.5, and Firefox\n\n<img width=\"693\" alt=\"screen shot 2015-12-28 at 9 47 18 pm\" src=\"https://cloud.githubusercontent.com/assets/2680980/12030040/d418160c-adac-11e5-8333-6b1dca01330f.png\">\n","ping @damianavila @ellisonbg. I had [something similar](https://github.com/jupyter/notebook/pull/899) with more complex PendingDeprecation warning for the kwarg (that it will have no effects) \n Also \n+1, let's merge this and move forward on 4.1\n That's OK, I still believe we are hiding a bug but since the things are going to change for 4.2, we can live with it... in fact, it is just a matter to load the proper `config_dir` at the `__init__` of the custom Config Manager (or use Min workaround for more safety)\n It is hiding a bug in the original intention, but as @ellisonbg mentioned, the bug is that a feature doesn't work that perhaps never should work, and the fact that it hasn't ever worked lets us move forward as if we've never had that feature (if that makes any sense at all).\n That is a good summary @minrk\n\nHowever, the more important thing is figuring out what @damianavila et al want to do with their custom `ConfigManager`. They could, for example, use that functionality to enable the `ConfigManger` from my 4.2 targeted PR.\n\nBut thinking further, because my custom `ConfigManager` doesn't have a `config_dir` attribute, hardcoding `config_dir` in `NotebookApp` wouldn't prevent them from using it.\n 1. We can live with this with our custom ConfigManager for now...\n2. My idea is to start migrating to something like Brian ConfigManager proposal, ASAP (as time permits).\n3. We would like to be fully compatible with the consensus/ideas we achieved for 4.2\n If you move to using the custom `ConfigManager` that I have in #879 then it\nmatters less what we do with the `config_dir` stuff in 4.1.\n\nLooking forward - the `ConfigManager` I have in my PR doesn't even have a\n`config_dir` attribute. What is the best way to ship 4.1 that reflects that\nfact?\n\nOn Wed, Dec 30, 2015 at 11:33 AM, Dami\u00e1n Avila notifications@github.com\nwrote:\n\n> 1. We can live with this with our custom ConfigManager for now...\n> 2. My idea is to start migrating to something like Brian ConfigManager\n>    proposal, ASAP (as time permits).\n> 3. We would like to be fully compatible with the consensus/ideas we\n>    achieved for 4.2\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/905#issuecomment-168061084.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Looking forward - the `ConfigManager` I have in my PR doesn't even have a\n> `config_dir` attribute. What is the best way to ship 4.1 that reflects that\n> fact?\n\nI think we just need to keep the things as is (after merging this one)... the \"fact\" is 4.2 so why we should have to reflect that in 4.1, I think we are just trying to make bets on a future facts :wink: \nSince we are so close to 4.1, let's just merge this one as is and we fix all of this for 4.2, how that's sound?\n Makes sense to me. That way 4.1 doesn't have any changes from 4.0, and there are only two states to consider: before 4.2, after 4.2.\n","@captainsafia Any time or interest in adding this to the notebook docs?\n I can look at it this afternoon!\n\nTime to whip out those Photosho....Gimp skills!\n Cool. No rush. Nice to know you know graphics :happy: :dancers:\n\nI think there may be some good info in the tour of the notebook that is in the Help when running the notebook. \n ![1bbfws1](https://cloud.githubusercontent.com/assets/1857993/12039349/4e554de0-ae25-11e5-92bb-0855ff66aaac.gif)\n\nAnd noted.\n Nice GIF. Made me laugh.\n","@captainsafia Graphic looks good. Thanks for doing that :+1:\n\nOn the build (sorry if I'm repeating what you already know), the `Makefile` does three major steps when you enter `make html`:\n\nStep 1 - Autogenerates a config.rst file that covers the different configuration options available [tagged: source/config.rst]\n\nStep 2 - Convert the ipynb files in `docs/source/Notebook/examples` to rst files and place in `rstversions` directory using nbconvert [tagged: ipynb2rst in the Makefile]\n\nStep 3 - Build the sphinx documentation of all the rst files\n\nSnippet from Makefile\n\n```\nhtml: source/config.rst ipynb2rst\n    $(SPHINXBUILD) -b html $(ALLSPHINXOPTS) $(BUILDDIR)/html\n    @echo\n    @echo \"Build finished. The HTML pages are in $(BUILDDIR)/html.\"\n\nsource/config.rst:\n    python3 autogen_config.py\n    @echo \"Created docs for config options\"\n\nipynb2rst:\n    jupyter nbconvert --to rst source/examples/Notebook/*.ipynb --template=source/template --FilesWriter.build_directory=source/examples/Notebook/rstversions\n    @echo \"Converted notebooks to rst\"\n```\n\nI looked in my virtualenv that I use for docs and it has nbconvert v4.1.0 and something could have broken between that and the 4.2.0dev version.\n\nI was playing around with nbconvert for ipynb to rst and md files earlier today. I will let you know if I find the root cause here.\n\nYou might wish to try if you haven't already:\n\n```\nmake clean\nmake html\n```\n\nmake clean will delete the build output directories so you will make sure Sphinx isn't leaving any cruft between builds.\n Two gists for @captainsafia \n[requirements.txt](https://gist.github.com/willingc/c42ebf9ad43386f1d5f8) used for doc development\n\nAfter `pip install -r requirements.txt` in my virtualenv with 3.5.1, [this gist](https://gist.github.com/willingc/8c41ffd7b2bfb587e41d) has the output of `pip freeze` which includes dependencies.\n @captainsafia I was able to build without error with the latest nbconvert. \n\nHmm...I wonder what the delta is between the anaconda config that you have and my virtualenv. Can you compare what's in your environment to the output gist linked above? Perhaps it is `path.py` or `traitlets` that is different in yours. Yay! We :heart_eyes: computers. :speak_no_evil: \n Hm. So here is what I did to attempt to resolve the issue.\n1. Set up a new conda environment with Python 3.5.1.\n2. Installed `jupyter` and other basic requirements.\n3. Installed from the `doc-requirements.txt` you gave me.\n4. Ran `pip freeze > my-output.txt`.\n5. Ran `diff output.txt my-output.txt` where `output.txt` is the output of your `pip freeze`.\n6. Confirmed that we had the same versions for things (except `ipython-master` where I am on a commit ahead of yours I assume because I installed later).\n7. Ran `make clean && make html` again and the same issue arose.\n\nIt looks like we also have the same `Makefile` in place. I'll tinker more and see what I get.\n @captainsafia I need a theme song. On a serious note, I tried to build the docs on a different OSX system of mine that had anaconda installed. Here is the lovely output which kindly tells me that pandoc is not found.\n\nSo, I then tried building with a virtualenv with pip and docs built with no issues.\n\nCompletely deleted anaconda. Downloaded and installed it. Tried building in a configured conda environment. Same error about pandoc. Well, isn't that special.\n\nExited conda environment. Uninstalled brew and reinstalled brew and then installed pandoc using brew. Docs still built with the virtualenv with pip. Reactivated the conda environment and then the conda env built the docs cleanly.\n\nWiser minds may be able to explain why.\n\n```\n(docsafia)Carols-Mac-mini:docs carol1$ make html\njupyter nbconvert --to rst source/examples/Notebook/*.ipynb --template=source/template --FilesWriter.build_directory=source/examples/Notebook/rstversions\n[NbConvertApp] Converting notebook source/examples/Notebook/Connecting with the Qt Console.ipynb to rst\n[NbConvertApp] ERROR | Error while converting 'source/examples/Notebook/Connecting with the Qt Console.ipynb'\nTraceback (most recent call last):\n  File \"/Users/carol1/anaconda/envs/docsafia/lib/python3.5/site-packages/nbconvert/nbconvertapp.py\", line 335, in export_single_notebook\n    output, resources = self.exporter.from_filename(notebook_filename, resources=resources)\n  File \"/Users/carol1/anaconda/envs/docsafia/lib/python3.5/site-packages/nbconvert/exporters/exporter.py\", line 165, in from_filename\n    return self.from_notebook_node(nbformat.read(f, as_version=4), resources=resources, **kw)\n  File \"/Users/carol1/anaconda/envs/docsafia/lib/python3.5/site-packages/nbconvert/exporters/templateexporter.py\", line 202, in from_notebook_node\n    output = self.template.render(nb=nb_copy, resources=resources)\n  File \"/Users/carol1/anaconda/envs/docsafia/lib/python3.5/site-packages/jinja2/environment.py\", line 989, in render\n    return self.environment.handle_exception(exc_info, True)\n  File \"/Users/carol1/anaconda/envs/docsafia/lib/python3.5/site-packages/jinja2/environment.py\", line 754, in handle_exception\n    reraise(exc_type, exc_value, tb)\n  File \"/Users/carol1/anaconda/envs/docsafia/lib/python3.5/site-packages/jinja2/_compat.py\", line 37, in reraise\n    raise value.with_traceback(tb)\n  File \"./source/template.tpl\", line 5, in top-level template code\n    `View the original notebook on nbviewer <http://nbviewer.jupyter.org/github/jupyter/notebook/blob/master/docs/{{ resources['metadata']['path'] }}/{{ resources['metadata']['name'] | replace(' ', '%20') }}.ipynb>`__\n  File \"/Users/carol1/anaconda/envs/docsafia/lib/python3.5/site-packages/nbconvert/exporters/../templates/rst.tpl\", line 1, in top-level template code\n    {%- extends 'display_priority.tpl' -%}\n  File \"/Users/carol1/anaconda/envs/docsafia/lib/python3.5/site-packages/nbconvert/exporters/../templates/skeleton/display_priority.tpl\", line 1, in top-level template code\n    {%- extends 'null.tpl' -%}\n  File \"/Users/carol1/anaconda/envs/docsafia/lib/python3.5/site-packages/nbconvert/exporters/../templates/skeleton/null.tpl\", line 26, in top-level template code\n    {%- block body -%}\n  File \"/Users/carol1/anaconda/envs/docsafia/lib/python3.5/site-packages/nbconvert/exporters/../templates/skeleton/null.tpl\", line 28, in block \"body\"\n    {%- block any_cell scoped -%}\n  File \"/Users/carol1/anaconda/envs/docsafia/lib/python3.5/site-packages/nbconvert/exporters/../templates/skeleton/null.tpl\", line 72, in block \"any_cell\"\n    {%- block markdowncell scoped-%}\n  File \"./source/template.tpl\", line 19, in block \"markdowncell\"\n    {{ cell.source | markdown2rst | replace(\".ipynb>\", \".html>\") }}\n  File \"/Users/carol1/anaconda/envs/docsafia/lib/python3.5/site-packages/nbconvert/filters/markdown.py\", line 87, in markdown2rst\n    return pandoc(source, 'markdown', 'rst', extra_args=extra_args)\n  File \"/Users/carol1/anaconda/envs/docsafia/lib/python3.5/site-packages/nbconvert/utils/pandoc.py\", line 49, in pandoc\n    check_pandoc_version()\n  File \"/Users/carol1/anaconda/envs/docsafia/lib/python3.5/site-packages/nbconvert/utils/pandoc.py\", line 95, in check_pandoc_version\n    v = get_pandoc_version()\n  File \"/Users/carol1/anaconda/envs/docsafia/lib/python3.5/site-packages/nbconvert/utils/pandoc.py\", line 74, in get_pandoc_version\n    raise PandocMissing()\nnbconvert.utils.pandoc.PandocMissing: Pandoc wasn't found.\nPlease check that pandoc is installed:\nhttp://johnmacfarlane.net/pandoc/installing.html\nmake: *** [ipynb2rst] Error 1\n```\n @captainsafia Let me know what next steps seem reasonable on your system. Anything from A) install Python 3.5 from Python.org, create a virtualenv and pip install stuff in the activated virtualenv to B) Uninstall and reinstall anaconda (which has solved issues on django projects when using conda) to C) call Ghostbusters :ghost: are reasonable choices.\n So I uninstalled and reinstalled anaconda, created the new environment, installed the dependencies, and......didn't work.\n\nSo I uninstalled anaconda, setup virtualenv with the Python3 on my system, installed all the dependencies, and....didn't work.\n\nSo that rules out this being an Anaconda specific error. I'm going to declare this as an `nbconvert` error. I looked through some old issues on `nbconvert` and it looks like I'm not the first person to get this error in a situation where the template file actually did exist. I'll explore this path and report back...\n\nGood thing I read a lot of Nancy Drew when I was little. :mag: \n @captainsafia Your detective powers are excellent. Which OS are you using? I'm assuming a Linux flavor. \n I'm on OS X. It appears that my specific issue is relevant to what was reported in jupyter/nbconvert#163 about a month ago. In which case, the error about a template not being found is actually raised if there is an error _within_ the template code (frustrating). Is your template.tpl file different from the one in the repository in any way?\n Whoa. I wouldn't have guessed OS X. I'm pretty sure that the template code that I have is from just \"git clone repo\". Very odd. I wonder if for some reason under certain conditions, pandoc is being hidden/not found and erroring with something not completely helpful. I did get a pretty prominent \"pandoc not found\" on one of my anaconda tries. For curiousity send details re: OS X version, retina/non-retina display, favorite flavor of apple pie... I'll look at nbconvert too.\n I've got `pandoc` already installed. Also, when I removed the `--template` flag from the command in the Makefile and ran `make clean && make html` again, everything was built properly which is why I think this is specifically an issue with nbconvert and templates. Here is any and all information that might be relevant in this specific pursuit.\n\nDevice: Macbook Air\nOS: OS X El Capitan (10.11.12)\nFavorite Flavor of Pie: Cinnamon\nDisplay: Non-Retina\nHoroscope: Leo the Lion\n`pandoc` version: 1.15.2.1\n Excellent detective work @captainsafia! I think that you are quite right on the direction to pursue. (Only real difference that I see is that you are on El Capitan and I am still on Yosemite.) I will give it a try on Windows 10 tomorrow just for fun :-) Nice work.\n\nAdding the line here so it's handy.\n\n```\njupyter nbconvert --to rst source/examples/Notebook/*.ipynb --template=source/template --FilesWriter.build_directory=source/examples/Notebook/rstversions\n```\n Yeah, in the meanwhile, I'll remove the `--template` flag on my local (doesn't seem to be relevant to what I am doing now so...) and continue working on the UI docs for this PR.\n Alright, I've pushed some changes to this branch.\n\nShould I add more detail or is this sufficient? \n @captainsafia Sorry for the review delay. Overall, I like it. I have some tweaks that will likely make it more user friendly (mostly adding some subheadings).\n\nAlso, let's call out somewhere (perhaps in the graphic and text) that the Cell Mode indicator is essentially no indicator or blank. When it enters edit mode, the pencil icon is displayed.\n\nLooking good :cat:\n Darn, I gotta snap out of it with that spelling though.\n\nI've made the requested updates.\n @captainsafia Nicely done. I'm happy to merge. :sunflower: \n I'm writing this comment to describe how I resolved the issue described above should any other developers come across it while Googling. The discovery of the solution was a humbling reminder of the folly of man and the inevitable rise of our machine overlords.\n\nUpon running the command, the machine humbly warns me.\n\n```\n[NbConvertApp] WARNING | Collisions detected in jupyter_nbconvert_config.py and jupyter_nbconvert_config.json config files. jupyter_nbconvert_config.json has higher priority: {\n  \"Exporter\": {\n    \"template_path\": \"['.', '/Users/paulperry/Library/Jupyter/templates'] ignored, using [u'/Users/paulperry/Library/Jupyter/templates']\"\n  }\n}\n```\n\nSuffering from ego, I heeded this warning not and continued forth with my fruitless journey. Days later I returned to the challenge. This time I was wiser and read the machine's cryptic scriptures more closely. Behold! The machine informs me of the error. At which point, I accompany my binary-based companion in a friendly game of Unix-ing.\n\n```\ncd ~/.jupyter\nvim jupyter_nbconvert_config.json\n```\n\nAnd added \".\", the current working directory under `template_paths`. I ran the command again, and behold it worked! At this point, I turned off my machine, took a long walk, and pondered the fate of Man on this Earth.\n\nComputer: 1. Safia: 0.\n","Thanks @Carreau\n\nI am +1 on this as the right border was never in any of the prototypes we\nagreed upon.\n\nOn Wed, Dec 30, 2015 at 2:06 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Ping @ellisonbg https://github.com/ellisonbg\n> \n> [image: screen shot 2015-12-30 at 11 04 44]\n> \n> ## https://cloud.githubusercontent.com/assets/335567/12049263/4f5c82f6-aee5-11e5-87f4-a655347dc72a.png\n> \n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/jupyter/notebook/pull/908\n> Commit Summary\n> - Remove soft selected right border background-leaking\n> \n> File Changes\n> - _M_ notebook/static/notebook/less/cell.less\n>   https://github.com/jupyter/notebook/pull/908/files#diff-0 (2)\n> \n> Patch Links:\n> - https://github.com/jupyter/notebook/pull/908.patch\n> - https://github.com/jupyter/notebook/pull/908.diff\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/908.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n This conflicts with #909. I rebased and reissued it as #915, so @Carreau doesn't have to.\n Thanks @minrk\n > Thanks @minrk\n\nI gave you access to my fork so that you can directly update my PR instead of re-issuing them in case this ever shows up again.\n Merged as #915\n","Since I think this what we agreed upon in the earlier PR, +1.\n It is also my understanding that this (Option D modified) is what we agreed\nupon earlier. Based on that I am +1 on merging this.\n\nPersonally, I like the left blue border in master (Option D), but I think\nit is important to follow the consensus.\n\nOn Wed, Dec 30, 2015 at 2:22 AM, Min RK notifications@github.com wrote:\n\n> Since I think this what we agreed upon in the earlier PR, +1.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/909#issuecomment-167973501.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Yes, since this was the \"D modified\" consensus from #708, I'm +1 on going with this.  \n\nThanks @Carreau for working with us, despite your personal disagreement! I really appreciate this!!\n > Thanks @Carreau for working with us, despite your personal disagreement! I really appreciate this!!\n\nI certainly understand your concerns and truly appreciate this effort @Carreau, thanks again! \n\nFor the PR... :+1: for the consensus we had before... \n Btw I noticed that.\n- in edit mode, the border and the left border are both green\n- in command mode, the border is gray while the left border is blue (cf screenshots above).\n > Btw I noticed that.\n> \n> in edit mode, the border and the left border are both green\n> in command mode, the border is gray while the left border is blue (cf screenshots above).\n\nthis is on purpose. 4.1 only **add** indicator to the left for multiple selection it does not **change** the current border colors. \n","I am not sure what the fix is, but I see roughly where the problem is:\n- In `tornado>=4` there is a `WebSocketHandler.check_origin(self, origin)` method that checks the origin of web sockets. It has a required positional argument.\n- In jupyter/notebook, we have a subclass that we use in our handlers `ZMQStreamHandler(WebSocketMixin, WebSocketHandler)` which also has the `check_origin` method with the required positional.\n- In terminado there is `TermSocket(tornado.websocket.WebSocketHandler)` which has a `check_origin` method with an _optional_ `keyword argument`.\n- In `TermSocket.open` `self.check_origin()` is called with no arguments.\n- At first glance this looks like it should work fine because it will be calling terminado's subclasses `check_origin`.\n- _But_, the code which calls open in juipyter/notebook does so by doing `super(WebSocketMixin, self).open(*args, **kwargs)`.\n- Somehow, that is causing the base tornado `check_origin` to be called, but with _no arguments_, which results in an exception.\n\nThe part that I am still confused about is that `WebSocketMixin` doesn't have the base tornado `WebSocketHandler` in its mro, so I don't see how it is resolving to that.\n\nQuestions:\n- All of this logic in terminado is to handle tornado<4. But tornado 3 is really old now and jupyter/notebook now requires tornado>=4. Can we just remove all this logic from terminado?\n- Is there something more subtle going on with the inheritance here that needs to be fixed?\n- The tornado `check_origin` method has never had a different signature. Buy terminado subclassing and changing the signature, this was bound to happen at some point. If we keep the logic in terminado,  can we address this API difference?\n\n@minrk @takluyver \n Also, I think we should release a new version of terminado along with 4.1 of the notebook. There were other things fixed in terminado recently that all users should be using.\n I'm curious, I'm not seeing this problem on my side... Wondering why, is it a difference in terminado versions? I'm running master of the notebook, terminado 0.5, tornado 4.3.\n I think it was these changes to terminado in October that are related to it:\n\nhttps://github.com/takluyver/terminado/commit/2e362b084963d8f102ccd99a1f8e3f1ecbda274f\n\nI am running from master as there are some other recent changes that fix\nanother bug in terminado.\n\nCan you install terminado from master and see if you can reproduce?\n\nOn Wed, Dec 30, 2015 at 6:22 PM, Fernando Perez notifications@github.com\nwrote:\n\n> I'm curious, I'm not seeing this problem on my side... Wondering why, is\n> it a difference in terminado versions? I'm running master of the notebook,\n> terminado 0.5, tornado 4.3.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/912#issuecomment-168111305.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Yup, just installed terminado master, and I now see the same exact traceback you're reporting.\n\nSo at least I can confirm the problem...\n The symptom is then that the terminal never initializes, so it's pretty much hosed.\n BTW @takluyver, would be good to bump the `__version__` string in terminado post-release to something like `0.6dev` or somesuch, master still reports `0.5`, so it's a bit confusing by simply checking version strings I had to carefully check that I was really importing from a dev path.\n #914 fixes it. It's a combination of changes in terminado and notebook that triggered this - terminado adopting tornado 4 conventions, and a change in the notebook assuming the origin arg is always passed. We usually allow check_origin to be called with no arg, so I restored that in #914.\n @minrk thanks for the fix. Other questions:\n- The comments in the code suggest we shouldn't need our own custom\n  check_origin after we ditch tornado<4 (which we have). Can we just get rid\n  of all that in both jupyter/notebook and terminado?\n- Should we cut a release of terminado with 4.1?\n\nOn Thu, Dec 31, 2015 at 1:45 AM, Min RK notifications@github.com wrote:\n\n> #914 https://github.com/jupyter/notebook/pull/914 fixes it. It's a\n> combination of changes in terminado and notebook that triggered this -\n> terminado adopting tornado 4 conventions, and a change in the notebook\n> assuming the origin arg is always passed. We usually allow check_origin to\n> be called with no arg, so I restored that in #914\n> https://github.com/jupyter/notebook/pull/914.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/912#issuecomment-168159109.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Terminado technically hasn't dropped support for tornado 3, which is one source of the issue. I opened takluyver/terminado#25 to fix the issue, and takluyver/terminado#26 if we want to drop support for tornado < 4 over there.\n\nWe don't need to push a release of terminado with 4.1, but we can do one soon after. There are no issues with released terminado, and it won't be an issue to ensure there aren't with the next release, either.\n OK, thanks, I will look at those PRs as well.\n\nBut there is a bug that this commit fixed:\n\nhttps://github.com/takluyver/terminado/commit/eb17fac6fb47bd339e9c10a2af97e49da783097f\n\nsince the last release - without that fix, it doesn't work on my latest\nubuntu systems...\n\nOn Thu, Dec 31, 2015 at 8:40 AM, Min RK notifications@github.com wrote:\n\n> Terminado technically hasn't dropped support for tornado 3, which is one\n> source of the issue. I opened takluyver/terminado#25\n> https://github.com/takluyver/terminado/pull/25 to fix the issue, and\n> takluyver/terminado#26 https://github.com/takluyver/terminado/pull/26\n> if we want to drop support for tornado < 4.\n> \n> We don't need to push a release of terminado with 4.1, but we can do one\n> soon after. There are no issues with released terminado, and it won't be an\n> issue to ensure there aren't with the next release, either.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/912#issuecomment-168218769.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n If there's an important bug that's fixed we can make a release of terminado. But I don't see a need for coordinated release, because that's not a bug that only affects notebook master and not 4.0, right?\n Yep\n\nSent from my iPhone\n\n> On Dec 31, 2015, at 8:47 AM, Min RK notifications@github.com wrote:\n> \n> If there's an important bug that's fixed we can make a release of terminado. But I don't see a need for coordinated release, because that's not a bug that only affects notebook master and not 4.0, right?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n Another issue that'll probably benefit from a terminado bump (or not?) is #104 (which I'm still able to repro on Firefox on Linux with 4.1rc)\n Oh, yes - this is a _huge_ improvement - just been using it in the last day.\n\nOn Thu, Dec 31, 2015 at 2:19 PM, Yuvi Panda notifications@github.com\nwrote:\n\n> Another issue that'll probably benefit from a terminado bump (or not?) is\n> #104 https://github.com/jupyter/notebook/issues/104 (which I'm still\n> able to repro on Firefox on Linux with 4.1rc)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/912#issuecomment-168254973.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @yuvipanda that probably won't be affected, unfortunately - that's an issue related to term.js, the JS terminal emulator frontend which the notebook bundles. Terminado is the backend infrastructure term.js talks to, and I don't think that needs any changes to support copy & paste.\n Released a new version of terminado which fixes this by depending on Tornado >= 4, and fixes @ellisonbg's issue with 'bad fd' errors.\n Thanks!\n","Hi all,\nI have fixed this problem by uninstalling Canopy.\n\nThanks.\n","Thanks, I will test this shortly.\n\nOn Thu, Dec 31, 2015 at 1:43 AM, Min RK notifications@github.com wrote:\n\n> terminado may call self.check_origin()\n> \n> in which case we should grab origin from the headers.\n> \n> ## closes #912 https://github.com/jupyter/notebook/issues/912\n> \n> You can view, comment on, or merge this pull request online at:\n> \n>   https://github.com/jupyter/notebook/pull/914\n> Commit Summary\n> - allow zmq check_origin with no args\n> \n> File Changes\n> - _M_ notebook/base/zmqhandlers.py\n>   https://github.com/jupyter/notebook/pull/914/files#diff-0 (6)\n> \n> Patch Links:\n> - https://github.com/jupyter/notebook/pull/914.patch\n> - https://github.com/jupyter/notebook/pull/914.diff\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/914.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I have confirmed that this fixes the issue, merging.\n","the post_save_hook is any import string or callable, which mean that in your `notebook_config.py` you can import and instantiate the ScriptExporter yourself, as well as pass a config object (for custom templates) yourself: \n\n```\nfrom nbconvert.exporters.script import ScriptExporter\nfrom traitlets.config import Config\nc = Config()\nScriptExporter(config=c)\n...\n```\n\nThe `post_save_hook` is not passed any config instance, though it is passed `contents_manager=self` so you should be able to use `c.FileContentsManager.(Script)Exporter.template_file = 'custom.tpl'` (`Script` beeing optional) in `jupyter_notebook_config.py` (note the extra `FileContentsManager.(Script)Exporter` nesting. But we should check that.\n Could someone confirm/comment if point 1. made above is a safe way to implement the post_save_hook?\n No it's not safe, the `_post_save_script` has a leading underscore it's hence private. \nAnd some of the code around that should likely warn using a `DeprecationWarning` so will likely be removed in future version.\n\nThough I don't see any reason for this to be dangerous. \n @Carreau \u2014 the suggestion doesn't seem to work.\n\nMy knowledge of traitlets is about zero, but I continued the clumsy hacking I mentioned in my original point 3. With the following in `jupyter_notebook_config.py`:\n\n``` python\nimport io\nimport os\n\nfrom nbconvert.exporters import TemplateExporter\nfrom notebook.utils import to_api_path\n\nfrom traitlets import Dict\nfrom traitlets.config import Config\nfrom traitlets.utils.importstring import import_item\n\n\n# From nbconvert/exporters/script.py\nclass ScriptExporter(TemplateExporter):\n\n    _exporters = Dict()\n\n    def _template_file_default(self):\n        return 'script'\n\n    def from_notebook_node(self, nb, resources=None, **kw):\n        langinfo = nb.metadata.get('language_info', {})\n\n        # delegate to custom exporter, if specified\n        exporter_name = langinfo.get('nbconvert_exporter')\n        if exporter_name and exporter_name != 'script':\n            self.log.debug(\"Loading script exporter: %s\", exporter_name)\n            from nbconvert.exporters.export import exporter_map\n            if exporter_name not in self._exporters:\n                if exporter_name in exporter_map:\n                    Exporter = exporter_map[exporter_name]\n                else:\n                    self.log.debug(\"Importing custom Exporter: %s\",\n                                   exporter_name)\n                    Exporter = import_item(exporter_name)\n                self.log.debug(\"ScriptExporter.template_file: %s\",\n                               self.template_file)\n                c = Config()\n                # @khaeru: the following works!\n                # c.PythonExporter.template_file = 'custom.tpl' # **********\n                self._exporters[exporter_name] = Exporter(parent=self,\n                                                          config=c)\n            exporter = self._exporters[exporter_name]\n            self.log.debug(\"ScriptExporter._exporters['%s'].template_file: %s\",\n                           exporter_name, exporter.template_file)\n            return exporter.from_notebook_node(nb, resources, **kw)\n\n        self.file_extension = langinfo.get('file_extension', '.txt')\n        self.output_mimetype = langinfo.get('mimetype', 'text/plain')\n        return super(ScriptExporter, self).from_notebook_node(nb, resources,\n                                                              **kw)\n\n\n# From notebook/services/contents/filemanager.py\n_script_exporter = None\n\n\ndef post_save_script(model, os_path, contents_manager, **kwargs):\n    \"\"\"convert notebooks to Python script after save with nbconvert\n    replaces `ipython notebook --script`\n    \"\"\"\n\n    if model['type'] != 'notebook':\n        return\n\n    global _script_exporter\n    if _script_exporter is None:\n        c = Config()\n        # @khaeru: none of these work\n        c.template_file = 'custom.tpl'\n        c.Exporter.template_file = 'custom.tpl'\n        c.TemplateExporter.template_file = 'custom.tpl'\n        c.ScriptExporter.template_file = 'custom.tpl'\n        c.PythonExporter.template_file = 'custom.tpl'\n        c.FileContentsManager.Exporter.template_file = 'custom.tpl'\n        c.FileContentsManager.TemplateExporter.template_file = 'custom.tpl'\n        c.FileContentsManager.ScriptExporter.template_file = 'custom.tpl'\n        c.FileContentsManager.PythonExporter.template_file = 'custom.tpl'\n        # @khaeru: since ScriptExporter gives 'parent=self' when instantiating\n        #          PythonExporter, tried these. They also don't work:\n        c.ScriptExporter.PythonExporter.template_file = 'custom.tpl'\n        c.FileContentsManager.ScriptExporter.PythonExporter.template_file = \\\n            'custom.tpl'\n        _script_exporter = ScriptExporter(config=c, parent=contents_manager)\n    log = contents_manager.log\n\n    base, ext = os.path.splitext(os_path)\n    script, resources = _script_exporter.from_filename(os_path)\n    script_fname = base + resources.get('output_extension', '.txt')\n    log.info(\"Saving script /%s\", to_api_path(script_fname,\n                                              contents_manager.root_dir))\n    with io.open(script_fname, 'w', encoding='utf-8') as f:\n        f.write(script)\n\n# @khaeru: also don't work\nc.Exporter.template_file = 'custom.tpl'\nc.TemplateExporter.template_file = 'custom.tpl'\nc.ScriptExporter.template_file = 'custom.tpl'\nc.PythonExporter.template_file = 'custom.tpl'\nc.FileContentsManager.Exporter.template_file = 'custom.tpl'\nc.FileContentsManager.TemplateExporter.template_file = 'custom.tpl'\nc.FileContentsManager.ScriptExporter.template_file = 'custom.tpl'\nc.FileContentsManager.PythonExporter.template_file = 'custom.tpl'\nc.ScriptExporter.PythonExporter.template_file = 'custom.tpl'\nc.FileContentsManager.ScriptExporter.PythonExporter.template_file = \\\n    'custom.tpl'\n\nc.FileContentsManager.post_save_hook = post_save_script\n```\n\nThen running `jupyter notebook --debug` and creating and checkpointing a new notebook to trigger the save hook:\n\n```\n[I 12:58:00.237 NotebookApp] Saving file at /Untitled.ipynb\n[D 12:58:00.237 NotebookApp] Saving /home/khaeru/Untitled.ipynb\n[D 12:58:00.304 NotebookApp] Running post-save hook on /home/khaeru/Untitled.ipynb\n[D 12:58:00.317 NotebookApp] Loading script exporter: python\n[D 12:58:00.317 NotebookApp] ScriptExporter.template_file: custom.tpl\n[D 12:58:00.322 NotebookApp] ScriptExporter._exporters['python'].template_file: python\n[D 12:58:00.322 NotebookApp] Applying preprocessor: coalesce_streams\n[D 12:58:00.323 NotebookApp] Attempting to load template python.tpl\n[D 12:58:00.330 NotebookApp] Loaded template python.tpl\n[D 12:58:00.331 NotebookApp] Attempting to load template python.tpl\n[D 12:58:00.331 NotebookApp] Loaded template python.tpl\n[I 12:58:00.430 NotebookApp] Saving script /Untitled.py\n```\n\nBut if I uncomment the line with `**********`:\n\n```\n[I 13:07:02.806 NotebookApp] Saving file at /Untitled.ipynb\n[D 13:07:02.806 NotebookApp] Saving /home/khaeru/Untitled.ipynb\n[D 13:07:02.830 NotebookApp] Running post-save hook on /home/khaeru/Untitled.ipynb\n[D 13:07:02.842 NotebookApp] Loading script exporter: python\n[D 13:07:02.842 NotebookApp] ScriptExporter.template_file: custom.tpl\n[D 13:07:02.846 NotebookApp] ScriptExporter._exporters['python'].template_file: custom.tpl\n[D 13:07:02.848 NotebookApp] Applying preprocessor: coalesce_streams\n[D 13:07:02.848 NotebookApp] Attempting to load template custom.tpl.tpl\n[D 13:07:02.853 NotebookApp] Attempting to load template custom.tpl\n[D 13:07:02.854 NotebookApp] Loaded template custom.tpl\n[D 13:07:02.854 NotebookApp] Attempting to load template custom.tpl.tpl\n[D 13:07:02.854 NotebookApp] Attempting to load template custom.tpl\n[D 13:07:02.854 NotebookApp] Loaded template custom.tpl\n[I 13:07:02.855 NotebookApp] Saving script /Untitled.py\n```\n\nI believe this indicates that PythonExporter is not receiving the configuration options, but I still don't know how to make it work (short of having those 100+ lines of code in my config file).\n As a temporary workaround, for anyone who's curious: at the line marked `**********` above, I put:\n\n``` python\n                from jupyter_core.paths import jupyter_config_dir\n                c.PythonExporter.template_path = [\n                    os.path.join(jupyter_config_dir(), 'templates')] + \\\n                    self.template_path  # i.e., of ScriptExporter, usually '.'\n```\n\nThen in my `$JUPYTER_CONFIG_DIR/templates/python.tpl` the following, modified from the [stock `python.tpl`](https://github.com/jupyter/nbconvert/blob/master/nbconvert/templates/python.tpl):\n\n```\n{%- extends 'null.tpl' -%}\n\n{% block header %}\n# coding: utf-8\n{% endblock header %}\n\n{% block in_prompt %}\n# Cell:\n{% endblock in_prompt %}\n\n{% block input %}\n{{ cell.source | ipython2python }}\n{% endblock input %}\n\n{% block markdowncell scoped %}\n{{ cell.source | comment_lines }}\n{% endblock markdowncell %}\n```\n\nThis is helpful to me because I tend to keep the exported `.py` under version control, and this way if only the prompt numbers change, the file does not change.\n","Okay, I can set the title with `figure`:\n\n``` python\nplt.figure(num='This is the title')\n```\n","I need to fix that error message. It hides what file is actually not found.\n Do you know where this error come from ? I can't find the location though grepping. \n Looks like it may be thrown by tornado, is that right?\n https://github.com/tornadoweb/tornado/blob/bbfd096f4f3b951da91081d06c275c74e6bc1bf3/tornado/web.py#L2596\n The error message comes from tornado, but we are passing the empty string. We don't need to block 4.1 on this one.\n By the way, I added the other 4.0.x releases to cdn.jupyter.org last night after reading this message. Makes me wonder if we should track the RSS feed from PyPI to grab the `notebook` package on updates.\n Or poll git for tags\n > Or poll git for tags\n\nWe're already cloning, might as well.\n","Yup, I'm not 100% sure right now what the issue is, but the problem is a layer down, in the kernel itself. It manifests itself in the notebook for you, but it can be seen at the terminal if you connect to a 'raw' kernel from a console. I just moved the bug over to the [kernel package](https://github.com/ipython/ipykernel/issues/91) where we'll ultimately have to fix the actual problem, will close this one here and we can continue tracking the problem over there...\n\nThanks for reporting it, and sorry about this!!\n","Likely not CSV limited, and probably not baked in. You can rely on tools like [HandsonTable](https://twitter.com/cyrillerossant/status/443046324003287041) that make Pandas dataframe interactive.\n","@captainsafia When you have time, please review. Thanks.\n This looks good!\n\nUsing `/\\s\\+$` on Vim didn't show any trailing whitespace on other lines so our copy pasta is clean as can be.\n\nMmmmmm. Pasta.....\n\n![spaghetti fatigue](https://cloud.githubusercontent.com/assets/1857993/12101712/d0d84c60-b2fb-11e5-8070-d7530516219f.gif)\n Thanks @captainsafia. Merging.\n","Reminder to myself to add deprecation notice to docs after merge.\n if it's deprecated it should not be in the docs anyway. \n\nSphinx should also have (apparently) a `deprected-remove` directive that deals with marking things for deprecation and removal after some time.\n Agreed. If it is in the docs already, we should mark it deprecated and remove after some time.\n","Thanks @steveholden for catching the `an`s.\n\nI've checked all the `*.rst` files in `docs/source`  and your PR #927 corrects those that are outstanding. I will double check the notebook files as well.\n\nThanks for your help.\n All other rst and ipynb files were checked and no \"an Jupyter\" combinations were found.\n","+1 thanks ! Merging once Green !\n Happy to merge. Thanks @steveholden.\n","Hello,\n\nI'd like to try the bonus @Carreau mentioned in ipython/ipython#9091, though he said that it would likely be hard. Any other advice to get started? \n See https://github.com/ipython/ipython/pull/9110 I tried but it does not work, I don't know why. You can try to figure it out !\n Reading up on the [warnings module](https://docs.python.org/3/library/warnings.html) is a good place to start. We need to make quite a specific filter, so it doesn't fail because of other warnings.\n\nI'm not quite sure how we'd do it for this repo - for ipython we have our own test runner (iptest), so it's easier to set up things like that before the tests start. For all the other repos, we use [nose](https://nose.readthedocs.org/en/latest/) - there's probably some way of setting up things like this before any code runs, but I'm not sure exactly what that is.\n ok Ill take a look at ipython/ipython#9110 first, as it seems more direct. Thanks!\n > I'm not quite sure how we'd do it for this repo - for ipython we have our own test runner (iptest), so it's easier to set up things like that before the tests start. For all the other repos, we use nose - there's probably some way of setting up things like this before any code runs, but I'm not sure exactly what that is.\n\nFor nose, see this PR #940 , I wrote a nose extension to do that (I need to rebase the PR though)\n","Thanks for opening this issue!\n\nCan you provide a screenshot to visualize what you are explaining as well as information about the browser, operating system, and Jupyter versions that you are using?\n\nYou can [refer to the documentation](http://jupyter.readthedocs.org/en/latest/contrib_guide_bugs_enh.html) for what a good issue looks like.\n I checked it out on Chrome and Mozilla, both on Ubuntu 14.04 and Windows 7 (64bit). I can't reproduce this issue on IE 11 :santa:  \nJupyter 4.0.6, python 2.7\n![hsissue](https://cloud.githubusercontent.com/assets/1860178/12216825/71b7fe76-b6cd-11e5-80ac-ccf495442890.gif)\n Confirmed on Safari on OS X as well. I suspect we are explicitly focusing CodeMirror when we should be leaving focus events alone.\n @minrk do you know how to fix this? I don't. I imagine it's related to our click/focus events, but that would probably be a sensitive/fiddly issue to deal with. I don't think we can get this one for the impending release.","the problem is that this change the semantics of the language. The assignment statement does have a value in itself, so it is not obvious what to do. I can see that going into a rabbit hole if you start to deals with value unpacking ellipsis... and so on and so forth. You then get slippery slope and want full macros.\n\nThe display part is sufficiently easy, with from IPython.display import display, and it is not that hard to wrap in a function that returns its input:\n\n```\nfrom IPython.display import display\ndef pipe_display(obj):\n    display(obj)\n    return obj\np = pipe_display\na = p(1)\nb = p(2)\nc = p(a+b)\n```\n\nFrom the computation point of view, `p` is not there so you can do a lot of things not doable on your proposal :\n\n```\np(3)+p(p(2)*p(7))\n```\n\nIf `p`is ugly, you can define `__or__` either on `P`, or your objects:\n\n``` python\nclass P:\n\n    def __or__(self, other):\n        display(other)\n        return other\np = P()\n\nclass MyObj:\n\n    def __init__(self,value):\n        self.value = value\n\n    def __repr__(self):\n        return str(self.value)\n\n    def __or__(self, other):\n        return other(self)\n\nMyObj(1)|p\nMyObj(2)|p\np|MyObj('hey')\n```\n\nWhich is a less clutterd syntax in some sens.\n The piping in combination with overloading `__or__` is a very nice trick. However `x = a + b |p` does not work on sympy expressions nor on numpy arrays, which are the two most important data types for my purpose. On the other hand `x = p | a + b` works but seems not preferable because it might confuse the reader to much.\n\nAs I understand IPython already does a lot of 'magic' behind the scene which sometimes change the semantics of python, e.g. `%autocall`, `?` and `??`. From my point of view this stuff is extremly useful. A special comment to pipe an assignment through display would only be another piece in that puzzle.\n\nW.r.t to the rabbit hole argument I suggest the following:\n1. Define an IPython cell-magic like `%% display_pipe_comment`. Which activates the respective mode.\n2. Implement some java script hook which looks for lines ending on `#:` and containing a _single_ assignment. For such lines the right hand side of the assignment is passed through the `display_pipe` function defined above.\n   For any other line, the comment has no effect.\n\nIMHO that should avoid complicated cases like `a, b = ab = range(2) #:` while it serves for all cases where the systax the should be as clear and transparent as possible.\n\nOf course, `#:` was just a quick suggestion, maybe there is a more appropriate choice.\n Well doing this with cell magics would be doable, but really complex. the only reliable way of doing it would be to have a way to get the AST with the comments, which is tough. I don't want to start re-parsing python. The  %/%% syntax is already tough with comments and have some edge cases. Doing it in js is not more easy, and raise the question of language agnosticity.\n\nMaybe @takluyver see a way of doing it through AST transform ? \n It would be easy to do an AST transform that would always display the value of an assignment as the last statement in a cell. But I think that would display many things you didn't want to show. Having a marker of some kind to for assignments that should be displayed is trickier, especially if you want to do it with more than just the last statement in a cell.\n\nI suspect that it's better all round to explicitly display the things you want to be shown. This is especially true if you're showing multiple outputs from one cell, because you may well want to label them in some way (`print('step 1:', ...)`). I don't think we want to get further into redesigning how the language works.\n This is actually what Mathematica does so there is a bit of precedence. But\nI don't think we would want to do that by default. And yeah, handling\nmultiple assignments gets a bit tricky...\n\nOn Sat, May 16, 2015 at 2:45 PM, Thomas Kluyver notifications@github.com\nwrote:\n\n> It would be easy to do an AST transform that would always display the\n> value of an assignment as the last statement in a cell. But I think that\n> would display many things you didn't want to show. Having a marker of some\n> kind to for assignments that should be displayed is trickier, especially if\n> you want to do it with more than just the last statement in a cell.\n> \n> I suspect that it's better all round to explicitly display the things you\n> want to be shown. This is especially true if you're showing multiple\n> outputs from one cell, because you may well want to label them in some way (print('step\n> 1:', ...)). I don't think we want to get further into redesigning how the\n> language works.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/93#issuecomment-102700845.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n If this is particularly relevant for symbolic mathematics, sympy might be interested in doing it. They already have some AST transforms for things like making undefined variables act as symbols, IIRC.\n While symbolic mathematics constitutes a big part of what we are doing, numerical math is almost as important. And I think it would also be helpful to understand 'general (python) code' if some important intermediate results are displayed. Thus, a sympy specific solution IMHO would be suboptimal.\n\nI dont know Mathematica but Matlab (mainly concerned with numerical calculation) has the following behavior:\n- Line ended without `;` -> result displayed\n- Line ended with `;` -> result not displayed\n  \n  And Maxima: \n- Line ended with `;` -> result displayed\n- Line ended with `$` -> result not displayed\n  \n  So whats about the optional semicolon as python line ending: Is it available in the AST?\n  \n  And whats about the inspect module? At least it has a function `inspect.getcomments(object)`.\n  \n  I tried to find out where an how features like `%%autocall` and `?` at the line end are implemented. I guess its on js level but could not find the respective source. In my understanding the question of language agnosticity also arises in these cases, but has already been answered appropriately, I guess.\n We already have the `;` to suppress output like Matlab, but it only works if Python would have displayed output otherwise. Semicolons are not part of the AST, so we have some rather awkward logic to check for them - and that can't really be reused for what you want, because it only checks after Python tries to display a result.\n\nI think we should set quite a high bar for any new special syntax we come up with - the code to deal with it is always tricky, and it risks confusing people about what Python syntax is (we turned off autocall by default for this reason).\n  +1 for turning off special syntax by default.\n\nBut still, I think my proposal would be useful in teaching context.\n\nFrom the discussion so far I see the following possibility:\n\ntakluyver:\n\n> It would be easy to do an AST transform that would always display the value of an assignment as the last statement in a cell.\n\ntakluyver:\n\n> We already have the `;` to suppress output like Matlab, but it only works if Python would have displayed output otherwise.\n\nSo, assuming the above mentioned AST-Transform is implemented and _explicitly_ activated, one could turn off the display for assignments where it is not wanted.\n\nIn fact, I would prefer it the other way around (turn display on only where it is desired) but this seems to imply the inversion of the `;` detection.\n\nTo get an impression on my own: where is the logic for checking for semicolons implemented?\n Oh, if you want to explicitly activate it and do it for the last output of all cells, you can do it as an extension, with no need for changes in core IPython.\n- [Docs on writing extensions](http://ipython.org/ipython-doc/3/config/extensions/index.html#writing-extensions)\n- [Docs on AST transformers](http://greentreesnakes.readthedocs.org/en/latest/manipulating.html#modifying-the-tree)\n- Add an AST transformer to the list `ip.ast_transformers` when your extension is loaded.\n\nThe code checking for semicolons is [here](https://github.com/ipython/ipython/blob/rel-3.1.0/IPython/core/displayhook.py#L82), though that uses a completely different mechanism, because semicolons aren't part of the AST.\n Closing as this should go into an extension if needed. \n +1 for closing this issue.\nJust for the record: I created an extension which serves my needs. Thanks for guiding me there. Maybe, it is helpful for others:\n\nhttps://github.com/cknoll/displaytools\n","The information is already present in the data we use to populate the list, so it should be a Simple Matter of UI\u2122\n","Thanks! Can you describe the approach you are using to limit things? Some possibilities:\n- Just raw number of messages (not per time)\n- Message number rate (per time)\n- Aggregate message size\n- Aggregate message size rate (per time)\n Also see #506\n I also prefer #506. Most of the crashing are often also related to browser freeze, and we have already had POC of JS extension that would delay appending to the DOM in case of too many messages with a UI like: \"Are you sure you like to append ? `append`/`discard`\".\n\nPlus a client side fixing would solve the problem at loading time when a notebook file is too big.\n The server side and client-side pieces of #506 are completely unrelated to each other, so we can have both: js patches from #506 and Python patches from #931, if they are preferred to those in #506.\n In a classroom/tutorial setting, where I have a bunch of people on a\nsemi-fragile network, stopping things at the server side is pretty\nimportant. The way these things go, all users tend to do this at around the\nsame time as they work on the same thing.\n\nAlso, I find that this stuff is _super_ easy to trigger, even for\nexperienced people who are aware of it. I crashed by browser 3-4 times this\nweekend getting ready for class. In _all_ of those cases, server side\ntruncation would have been the most useful thing - there was too much data\nto actually look at reasonably.\n\nOn Wed, Jan 6, 2016 at 5:30 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> I also prefer #506 https://github.com/jupyter/notebook/pull/506. Most\n> of the crashing are often also related to browser freeze, and we have\n> already had POC of JS extension that would delay appending to the DOM in\n> case of too many messages with a UI like: \"Are you sure you like to append\n> ? append/discard\".\n> \n> Plus a client side fixing would solve the problem at loading time when a\n> notebook file is too big.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/931#issuecomment-169322970.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg it's most likely that it was putting outputs on the page that was the real cost (especially if the symptom was a hung browser) rather than the network traffic, since the way we append stream output is _extremely_ inefficient. This is the primary issue addressed in the js side of #506. If the network is slow or clogged, that should actually make it _harder_ to crash the browser.\n\nI think the scalable approach is to dump excess output to files on the server side, but that adds some peculiarities, since output is part of the kernel API, not necessarily related to notebooks (e.g. thebe has no file or path associated with the output messages). Because of this, it seems to me like overflow truncation should look like:\n1. part of the Kernels service\n2. overflowed output is associated with kernels, with a file per parent (i.e. output area)\n3. overflowed output is only accessible while the kernel exists, and is deleted on shutdown of the kernel and/or server\n4. On overflow, OutputArea presents a control that allows one-time, explicit \"Yes I want this\" fetch of overflowed output into the notebook.\n\nIf we want this really scalable, the only _true_ answer is for notebooks to actually be multiple files, so we don't have to read the whole thing at once, and can scroll within outputs, having only a limited amount of content available in memory at a time. I don't think this is feasible with the current notebook format, though.\n In the stuff I was doing there were two usability issues:\n1. The fact that the browser crashed.\n2. The fact that even if the browser didn't crash, the amount of data that would end up in the notebook wouldn't have been useful to me as a human in that form. When I get into this situation, it would be much more helpful to have the data in a file I could open in a text editors, tail, cat, etc.\n\n@minrk I like the ideas you list above for truncation and saving things to files.\n It's the case that you described about saving long output to a _persistent_ file that I think will be hard to fit into the APIs we have. Where would you put it? When, if ever, would you clean it up? If it's associated with a notebook (it isn't in the APIs), then this isn't so hard, because it can be cleaned up on clear-output and should reside next to the notebook. Since notebooks are really single files, when we have side files associated with notebooks (as opposed to kernels) like this, we need to add logic for handling them to file delete/rename/copy/checkpoint/restore/etc.\n\nBut I will reiterate that it's putting a large amount of output _on the page_ that ~always causes the problem. Its mere existence, either in the notebook json or in memory, has a _much_ higher bar for causing trouble if it isn't being displayed.\n I would be fine with limiting the lifetime of those files to that of the kernel\n\nSent from my iPhone\n\n> On Jan 6, 2016, at 7:55 AM, Min RK notifications@github.com wrote:\n> \n> It's the case that you described about saving long output to a persistent file that I think will be hard to fit into the APIs we have. Where would you put it? When, if ever, would you clean it up? If it's associated with a notebook (it isn't in the APIs), then this isn't so hard, because it can be cleaned up on clear-output and should reside next to the notebook. Since notebooks are really single files, when we have side files associated with notebooks (as opposed to kernels) like this, we need to add logic for handling them to file delete/rename/copy/checkpoint/restore/etc.\n> \n> But I will reiterate that it's putting a large amount of output on the page that ~always causes the problem. Its mere existence, either in the notebook json or in memory, has a much higher bar for causing trouble if it isn't being displayed.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n > Also see #506\n\nSorry, I should learn to use the search.  Brian had mentioned you had something open, but implied it was opened a while ago so I assumed it had fallen through the cracks.\n\nPinging @williamstein since he is interested in both this PR and #506.\n Related topics from more than a year ago:\n- https://github.com/ipython/ipython/issues/6516\n- https://github.com/ipython/ipython/issues/6771\n\nThis is really a big issue in the classroom. \n This will now print a message to stderr so the user can see when they exceed a limit.  @ellisonbg this is ready for you to test.  I've changed the default interval to 0.1 sec, and have not set any default msg or data rate limits.  However, in testing, it seems like the data rate limit is more valuable than the msg rate limit.  Setting `--NotebookApp.iopub_data_rate_limit=13000` (13k characters/sec) seems to work well.\n I like this server-side limit better than mine in #506. I will remove the server-side limit there, but we should still use the client-side js changes in that PR.\n Thanks for the review @minrk , see 7232a6a .  I'm going to test this to make sure it works in the current state, I'll ping back with the status.\n Everything seems to work **but** it does rate limit **all** iopub messages.  Do you think I should add logic to avoid limiting certain iopub messages?\n Yes, please do not filter `status` messages, since they are used by the client.\n > Yes, please do not filter status messages, since they are used by the client.\n\n:heavy_check_mark: \n\nIn 7aaccbd I don't filter status, kernel info, comm info, and exec request msgs.\n I opened a PR against your branch to fix the failures on Python 3.5.\n Thanks!  Merged\n What's the status ?\n Good to go, I merged @minrk 's commit\n Probably just fell bellow the radar...\n","> why does the notebook lack this functionality\n\nPartly because unlimited undoing is a much more complex subject when the document is executable.\nWhich is the case with the notebook.\n\nExample : if i do `a=1`, execute, `a=2`, execute, and undo what am I suppose to undo ? The execution ? \n\nThen you enter question like : Can the execution be undone ? Can it be undone reliably across languages ? What if other code is currently being ran ?.... etc, and I just scratch the surface. \n\nOther part : we assessed the benefit/cost ratio, and decided that with the current manpower/usage/cost/number-of-features-needed/current-architecture it was not worth implementing, at least yet.\n\nThis can of course change if there is a change in any of the above mentioned factor, especially if we get more help for code maintenance.\n\nI'm closing as the multiple undo has already a few issues where it is discussed, but feel free to continue adding comments to this issues if you like. \n\nThanks.\n","That's definitely not a dependency. What appears to have happened is that jupyter_declarativewidgets was installed at some point on your system, and was registered as a notebook server extension. Subsequently, you have set up an env without it, or otherwise uninstalled it, but it's still registered as an extension in config. What's failing is the loading of the extension (that's the `init_server_extensions` part). You can look for `jupyter_declarativewidgets` in `~/.jupyter/jupyter_notebook_config.{py,json}` and see where it is added to your configuration, and remove it there.\n Thanks for the quick reply, and my apologies for the misunderstanding.\n","This is notebook version 4.1.0.b1 on a Mac.\n It's likely a good idea. Marking as 4.2. It's a UI/UX thing to ping @ellisonbg \n Along with that - the notebook flashes indicator messages e.g. \"Kernel starting\" etc... - anyway to make them not disappear very quickly? I'd like to see \"Kernel starting\" during the entire time the kernel is starting.\n I think these changes sound like a good idea...\n\nOn Fri, Jan 8, 2016 at 12:46 PM, Praveen Srinivasan <\nnotifications@github.com> wrote:\n\n> Along with that - the notebook flashes indicator messages e.g. \"Kernel\n> starting\" etc... - anyway to make them not disappear very quickly? I'd like\n> to see \"Kernel starting\" during the entire time the kernel is starting.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/934#issuecomment-170119561.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","It looks like someone wrote a nose plugin for that:\n\nhttps://github.com/Bernhard10/WarnAsError\n\nI don't know how robust it is, but it's pretty simple.\n Yeah I saw that, but it turns **all** into error, I want to actually filter. \n\nI have the plugin working, I need to figure out how to make entry point with flit.\n http://flit.readthedocs.org/en/latest/entrypoints.html :-)\n > http://flit.readthedocs.org/en/latest/entrypoints.html :-)\n\nYeah i found it, but nose does not seem to find the plugin when I do that, \n see https://github.com/Carreau/nose_warnings_filters/issues/1\n Can we merge that and workout testing later ?\n","@Carreau Added the backticks to the docs on your branch.\n Thanks @willingc ! \n","@Carreau Since I think this is what is making Travis grumpy on tests choking on version, I'm going to merge this.\n","Going to merge this since the announcement is out and Travis keeps failing on one js test and its different. \n","At the moment,  saving is quite naive, and it does indeed send all the data back to the server. This is because only the frontend, not the server, keeps track of the notebook state. Some of the work @Carreau is doing for real time collaboration should make smarter saving possible by holding document state in the server.\n OK thanks - I suspected that was the case. \n\nUntil the collaboration work is ready then, would it be a bad idea to simply avoid sending _any_ cell output back to the server if a flag was enabled somewhere? \n\nMaybe it could work like first clearing all outputs before saving - but without requiring any computed data in variables to be recomputed, of course, since that would make the effort useless.\n An extension can clear outputs automatically on save, or even exclude output from every save if desired. I don't think we should be baking this in as a configurable by default, though, as there is a cost to every configurable option.\n Amazing ... 6 months after I asked a simple question, the issue is closed without even attempting to address the original problem or to enter into any dialog at all about it.\n Apologize for that - not sure why it was closed. Can someone provide some background on why this was closed?\n\nI do know that we are waaaay behind on issue triage though\n\nSent from my iPhone\n\n> On Jun 16, 2016, at 8:06 PM, Peter Cav\u00e9n notifications@github.com wrote:\n> \n> Amazing ... 6 months after I asked a simple question, the issue is closed without even attempting to address the original problem or to enter into any dialog at all about it.\n> \n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n > Amazing ... 6 months after I asked a simple question, the issue is closed without even attempting to address the original problem or to enter into any dialog at all about it.\n\nSorry about that, the \"close and comment button\" is next to the \"comment\" one, it's common to miss click on the wrong button, especially when navigating quickly with the keyboard. So annoying that there are even [extensions to move it](https://userstyles.org/styles/106116/move-the-close-button-on-github-com).\n\nIt's true also that we are small team, and literally have 100ds of notification each day \u2013\u00a0just today ~50 issues open, many notification per issue just on GitHub. Though we try our best and we like to have the benefit of the doubt. \n\nThe comment that \"without even attempting to address the original problem or to enter into any dialog at all about it.\" seem a bit harsh, as 2 developers from the team did write comment explaining the current situation: and proposing to write an extension.\n\nAnyway looking again at the issue and the already given comments: yes it is an issue we are aware of; we need to have incremental saving/synchronization. Which is not going to happen that soon but is worked on. And like the second, I agree that a configuration option is likely not the right way to tackle, it but that yes, a custom extension for the notebook can perfectly handle the case and strip bokeh plot at save time. \n\nWe are likely not going to special case Bokeh, and I know of a few people that will purchase us to the end of the earth with chainsaw if we strip large output by default.\n\nSo here is the status quo. there is likely nothing that going to be done for this specific case right now, at least not in core. And it will improve with time. \n`custom.js` and various extensions can achieve that, if needed, but we don't provide stable API for it. \nSo your best chance is to go with a custom API, resources online are plentiful, if you need a hand we'll be happy to provide more information. \n\nThanks, \n @Carreau @ellisonbg Thanks for responding.  \n\nI understand that you are overwhelmed with issues.\nWhen I first asked the question I guess you missed that I was asking for advice on how _I_ could help to solve the problem. \nSince then, I rearranged things to work locally instead of remotely because it was very difficult to be productive on a remote server. \nSince I don't know the code-base, I was looking for a way to work-around the problem without introducing any more. I didn't know anything about extensions or even that they existed.\nI also wasn't trying to fix a special case with Bokeh. The problem exists where any cell output in large quantity is produced.\n\nOK, I will search for the online resources about extensions and see how that works. A requirement to work remotely will undoubtedly appear again soon, so it would be nice to be ready.\n\nThanks,\n Sorry for closing prematurely, it was not meant to shutdown discussion, just indicating that this does not represent a task to do on this project. I mentioned extensions as a possible solution, but should have given more detail. As an example, I wrote [this one](https://github.com/minrk/ipython_extensions/blob/master/nbextensions/dontsaveoutput.js) that removes output from the data that is to be saved. I hope that helps.\n @minrk Thank you very much for the example. That helps a lot to get started.\n","In this Pull Request the button only supports Moving 1 selected item at a time, but I've left a TODO in the code and also opened Issue #942 to address moving multiple.\n\nShould I reference the issue number from the TODO? I'm still fairly new to open source codebases. :)\n\nThanks!\n Good stuff, @NHDaly! I posted some notes inline.\n Cool, thanks for looking at this! :) I've addressed your suggestions in ce24663! :)\n\nCheers!\n Friendly ping? :)\n @NHDaly thanks!\n No problem! (Yay!! My first merged-in GitHub PR! haha :dancer:)\n ![giphy-26](https://cloud.githubusercontent.com/assets/1857993/12833455/62f3b27e-cb66-11e5-8fb3-e30d473279f5.gif)\n\nCongrats! Looking forward to more great PRs from you, @NHDaly!\n hahaha thanks. Awesome gif.\n @NHDaly Nice job! Welcome to Open Source and Jupyter :surfer: @captainsafia sends great gifs.\n","(Note, this is blocked on Issue #941.)\n","We should use moment.js to format the last modified datetime...\n I'm currently using moment. Just creating a light wrapper function with the format string.\n Great!\n\nOn Sat, Jan 9, 2016 at 10:58 PM, Safia Abdalla notifications@github.com\nwrote:\n\n> I'm currently using moment. Just creating a light wrapper function with\n> the format string.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/943#issuecomment-170321123.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n This is brilliant! This will help so much in managing courses based on the notebook. It will help in finding recent lecture notes, for finding assignments submitted early/late, and myriad other tasks. Thank you!\n OK. So sorting on the front-end now works.\n\nI'm figuring out how to make the last modified button in the header have a more meaningful text. I'm thinking of having it say \"Sort By Date Modified\" and then an arrow icon that indicates in what order the list will be sorted on if you click the button. Thoughts on the UX for this?\n\n![notebook-filetree-sorting](https://cloud.githubusercontent.com/assets/1857993/12224187/7a867dec-b7af-11e5-8b73-a84fffe7b75c.gif)\n OK. Taking the WIP flag off of this. I set up the UX to work as follows.\n1. User lands on the file tree page for the first time. The arrow in the button is pointing upwards.\n2. User clicks the button.\n3. Items are sorted in ascending order and arrow in button points downward.\n4. User clicks the button.\n5. Items are sorted in descending order and arrow in button points upward.\n6. Rinse and repeat.\n\n![notebook-filetree-sorting-with-arrow](https://cloud.githubusercontent.com/assets/1857993/12251112/c65f405e-b891-11e5-9229-fe1e5c8794e2.gif)\n\nEDIT: Updated gif screencast.\n Safia, I think that being able to sort by last modified is very nice. Love\nthat.\n\nHowever, I think the last modified dates should be written in plain english\nas GitHub does such as:\n- a few seconds ago\n- 5 minutes ago\n- 3 days ago\n- 4 month ago\n\nThat was what I meant about using moment.js for that.\n\nOn Mon, Jan 11, 2016 at 4:34 PM, Safia Abdalla notifications@github.com\nwrote:\n\n> OK. Taking the WIP flag off of this. I set up the UX to work as follows.\n> 1. User lands on the file tree page for the first time. The arrow in\n>    the button is pointing upwards.\n> 2. User clicks the button.\n> 3. Items are sorted in ascending order and arrow in button points\n>    downward.\n> 4. User clicks the button.\n> 5. Items are sorted in descending order and arrow in button points\n>    upward.\n> 6. Rinse and repeat.\n> \n> [image: notebook-filetree-sorting-with-arrow]\n> https://cloud.githubusercontent.com/assets/1857993/12251112/c65f405e-b891-11e5-9229-fe1e5c8794e2.gif\n> \n> EDIT: Updated gif screencast.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/943#issuecomment-170742928.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Share and share alike!  https://github.com/jupyter/jupyter-js-filebrowser/blob/master/src/listing.ts#L933\n Thanks!\n\nOn Mon, Jan 11, 2016 at 4:39 PM, Steven Silvester notifications@github.com\nwrote:\n\n> Share and share alike!\n> https://github.com/jupyter/jupyter-js-filebrowser/blob/master/src/listing.ts#L933\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/943#issuecomment-170743713.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg: OOOOOOOOOOOOOOOOOOOOHHHHHHHHHHHHHHHHHHH!\n\n![giphy-14](https://cloud.githubusercontent.com/assets/1857993/12251323/bb7167e2-b893-11e5-801a-1fda79341f3a.gif)\n\n_codes furiously_\n LOL :-)\n\nOn Mon, Jan 11, 2016 at 4:47 PM, Safia Abdalla notifications@github.com\nwrote:\n\n> @ellisonbg https://github.com/ellisonbg:\n> OOOOOOOOOOOOOOOOOOOOHHHHHHHHHHHHHHHHHHH!\n> \n> [image: giphy-14]\n> https://cloud.githubusercontent.com/assets/1857993/12251323/bb7167e2-b893-11e5-801a-1fda79341f3a.gif\n> \n> _codes furiously_\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/943#issuecomment-170745047.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n OK. Updated to have human-friendly dates now. Thanks @blink1073 for that handy-dandy function.\n\n![notebook-filetree-sorting-human-friendly-dates](https://cloud.githubusercontent.com/assets/1857993/12251607/e082c5a6-b895-11e5-8fb9-2a546c7ea2c9.gif)\n Very nice, I think that will be a huge help to folks. Question - after\nsorting by Last Modified, is it possible to get back to sorting using the\ndefault ordering?\n\nOn Mon, Jan 11, 2016 at 5:03 PM, Safia Abdalla notifications@github.com\nwrote:\n\n> OK. Updated to have human-friendly dates now. Thanks @blink1073\n> https://github.com/blink1073 for that handy-dandy function.\n> \n> [image: notebook-filetree-sorting-human-friendly-dates]\n> https://cloud.githubusercontent.com/assets/1857993/12251607/e082c5a6-b895-11e5-8fb9-2a546c7ea2c9.gif\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/943#issuecomment-170747326.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > Question - after sorting by Last Modified, is it possible to get back to sorting using the default ordering?\n\nI think it is possible. I can copy and modify [the callback](https://github.com/jupyter/notebook/blob/932f85c7593b2eada7a2095bd1f30d3f6ea48115/notebook/static/tree/js/notebooklist.js#L258) in the `sort` function call inside the `draw_notebook_list` function and have the order of the clicks be sort ascending -> sort descending -> return to default sort (which is a combination of sorting on type and name).\n\nLet me see if I can get that to work.\n Although the fromNow time span is useful in knowing approximately how old something is, for assignments and other date-oriented tasks, the actual date/time is more useful. How many students turned their assignments in in the last few moments before the due date? Can we see both date and span? Or make it toggle between them?\n What about adding the actual date/time as a tooltip?\n\nOn Mon, Jan 11, 2016 at 6:20 PM, Doug Blank notifications@github.com\nwrote:\n\n> Although the fromNow time span is useful in knowing approximately how old\n> something is, for assignments and other date-oriented tasks, the actual\n> date/time is more useful. How many students turned their assignments in in\n> the last few moments before the due date? Can we see both date and span? Or\n> make it toggle between them?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/943#issuecomment-170761006.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n > What about adding the actual date/time as a tooltip?\n\nYes, that would be better. Although, you might consider showing the date/time in the list and having the more casual, human fromNow() text be the tooltip. That would be more standard (I couldn't find any example of file date/time listings that show anything other than date/time.... Google Docs, my file manager, ls, etc.)\n > I couldn't find any example of file date/time listings that show anything other than date/time\n\nThe Github web interface shows e.g. '3 days ago':\n\nhttps://github.com/jupyter/notebook\n\nI can see arguments either way. For a quick 'about how recent is this', I prefer the 'ago' style, but sometimes it's useful to have the detailed information.\n I guess the github method is very relevant to github, because files are always seen in terms of their last changed status to the whole project. But I don't think that is typical for a list of files of unknown relationships to each other, or to the user's goals/intentions. \n\nTooltip or not, this is a great usability gain! \n > What about adding the actual date/time as a tooltip?\n\n+1 \n\nHow does that looks with started kernels, selected files ?\n OK. I updated it to include the full date-time in the tooltip.\n\nHere is how it looks alongside the running indicator.\n\n![screen shot 2016-01-12 at 8 24 09 pm](https://cloud.githubusercontent.com/assets/1857993/12283307/c8668252-b96a-11e5-800f-38bddac6b1b0.png)\n\nAnd here is how it functions.\n\n![sorting-1](https://cloud.githubusercontent.com/assets/1857993/12283313/d41a9aac-b96a-11e5-8ad8-be1fa087e128.gif)\n @captainsafia what about a `Name` button for toggling sort by name?\n Code needs refactoring but just putting it out there to get people's thoughts. Here's how it functions now.\n\n![sorting-with-name](https://cloud.githubusercontent.com/assets/1857993/12313603/a0e1d69a-ba2e-11e5-92a2-0ce510255304.gif)\n +1 ... thanks so much for this this.\n\nOn Wed, Jan 13, 2016 at 8:48 PM, Safia Abdalla notifications@github.com\nwrote:\n\n> Code needs refactoring but just putting it out there to get people's\n> thoughts. Here's how it functions now.\n> \n> [image: sorting-with-name]\n> https://cloud.githubusercontent.com/assets/1857993/12313603/a0e1d69a-ba2e-11e5-92a2-0ce510255304.gif\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/943#issuecomment-171498966.\n Looks great!\n\nOn Wed, Jan 13, 2016 at 5:48 PM, Safia Abdalla notifications@github.com\nwrote:\n\n> Code needs refactoring but just putting it out there to get people's\n> thoughts. Here's how it functions now.\n> \n> [image: sorting-with-name]\n> https://cloud.githubusercontent.com/assets/1857993/12313603/a0e1d69a-ba2e-11e5-92a2-0ce510255304.gif\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/943#issuecomment-171498966.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n What happens when you hit the refresh button, @captainsafia?\n OK. Assuming no one else has requests on top of this I will refactor this evening (CT) and make it ready for merging tomorrow AM (CT).\n OK! I _think_ this is good.\n\nAlso, @blink1073, I missed your comment earlier but a refresh returns the list to the default sort.\n\nHere is a screencast of the feature in action.\n\n![sorting-with-name-1](https://cloud.githubusercontent.com/assets/1857993/12344750/57d8aba8-bb06-11e5-8de0-cfc39613002b.gif)\n Hi @captainsafia, I would recommend reverting the Name and Modified buttons to their original state when refreshing then, to avoid confusion.\n @blink1073 \u2014 Good catch. Fixed.\n ![tina_fey](https://cloud.githubusercontent.com/assets/2096628/12358732/51e9a846-bb74-11e5-8e87-ea75811966fc.gif)\n @captainsafia Nice.\n\n@blink1073 @Carreau Any idea why travis is using 3.5.0 and failing instead of using Python 3.5.1???\n I'm not sure, we could always use conda :)\n No no clue why, and tracked as https://github.com/jupyter/notebook/issues/956  and it's sporadic failures.\n > I'm not sure, we could always use conda :)\n\nyeah, I want a travis `language:conda` but I'm not fluent enough in Ruby to send a PR to travis. \n Note, flushed travis cache for this PR. I got a different error and just re-relaunched the tests. \n @carreau @blink1073 I will take a look later as well.\n Can this be merged?\n Great work!\n\nOn Sat, Jan 16, 2016 at 10:30 AM, Matthias Bussonnier <\nnotifications@github.com> wrote:\n\n> Merged #943 https://github.com/jupyter/notebook/pull/943.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/943#event-517032801.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n What do you guys think about including in this in a minor release vs. major? It was implemented in the beginning of the year and there's a good chance it won't make it into a release (5.0) until next year...\n I'm certainly a fan of targeting this to a minor release.\n I am eagerly awaiting this feature! @Carreau @ellisonbg What do you say about including this in 4.3.1 or 4.4? I'd say no to 4.3.1, because it's not a bugfix. I'd like to do a feature release soon, whether we call that 4.4 or 5.0. Ok, I'm going to try to push this through with 4.4 because there are lots of users waiting for it and it's been almost a year since it was merged! I would be fine pushing things from 5.0 to 5.1, there are a lot of new feature in master and I think trying to backport will be too painful. \r\n\r\nWe should check that the shortcut editor still work (or fix it). It uses preact, but apparently we can move to react if needed now that the discussion has ended.  Yeah, there are a range of new features in master that people would like to get out (I'm keen to see my clipboard work released, for instance). If 4.x is open to new features, then people will want to backport many things. I suspect it's easier to aim for a 5.0 release from master. Ok, I agree with you guys. However, a 5.0 release will require a revert back to no Webpack (https://github.com/jupyter/notebook/issues/1554), correct? I know @blink1073 did some exploration (https://github.com/jupyter/notebook/pull/1793) and determined that reverting is our the option, so I think that leaves that task up to him or me. Additionally, if we intend to release 5.0 soon, we have 150 issues to triage! \ud83d\ude2e So I suppose that we should work on the bug fixes and critical ones and mark the rest as \"5.x\".","code is already not pep8 compilent, and pep8 say it [explicitely](https://www.python.org/dev/peps/pep-0008/#a-foolish-consistency-is-the-hobgoblin-of-little-minds):\n\n> A Foolish Consistency is the Hobgoblin of Little Minds\n\nIt's more annoying to get test failing because of forcing pep8 than anything else.\nMoreover many linter are not able to understand the dynamics nature of traitlets so give hundreds of false error.\n Ah! I should've clarified in my title. I'm talking about a codelinter specifically for the JavaScript part of the codebase.\n In the past, the team hasn't been thrilled about linters being manditory.\nBut maybe that i shifting on the JS side of things...\n\nOn Sun, Jan 10, 2016 at 11:45 AM, Safia Abdalla notifications@github.com\nwrote:\n\n> Ah! I should've clarified in my title. I'm talking about a codelinter\n> specifically for the JavaScript part of the codebase.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/944#issuecomment-170384680.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n As long as it's a correctness-only linter like `jshint`, and not a style linter like `jslint`, I'd be okay.\n > Hobgoblin \n\nI always thought this word was funny\n +1 to a .jshintrc, I already include one in ipywidgets \n","I think that disabling signing should be much harder in general, like only available through a flag on the notebook server. Not config.\n I don't think we currently have any way to have command line flags without config.\n Through tornado option likely possible. That it to say we have to make it a non-traitlets. \n I agree with the warning, but not adding some artificial difficulty to implement it.\n Warning in jupyter/jupyter_client#106\n","It's hard as the frontend support ~50 languages. So it's likely have to be done via an extension. \n See https://github.com/ipython-contrib/IPython-notebook-extensions/issues/365\n","I'm ok with that if you like it. You are the one write most of the docs, so I would leave the decision to you. \n Holding off for the moment. The nbconverted notebooks to markdown or rst are not properly handling Font Awesome fonts.\n I'm going to close this PR since we can likely use nbsphinx to achieve a similar result.\n","indeed O_o. Thanks. \n Closing this one in favor of duplicate #1124 with more info.\n","@vbraun Thanks for submitting the PR.\n\nPing @minrk. Looks like an issue of the default_url not being set to a) user provided default url or b) default /tree correctly when the app is initialized. Do we need to update the init function as well https://github.com/jupyter/notebook/blob/master/notebook/notebookapp.py#L849 ?\n Hmm, this is a bit odd - this was working fine in the past. We should understand how/when it changed.\n I think this was probably overlooked. `default_url` determines where `/` redirects to, as well as a few other links, but doesn't set the initial launch.\n\nIn cases like JupyterHub or tmpnb, which is I think what this was introduced for, the startup URL logic here isn't relevant, which might be why it was missed.\n @vbraun Thanks for the fix.\n\n@minrk Tested the changes and it worked well. I found it a bit counterintuitive to set default_url since it's relative to where the notebook is launched on the file system. Has anyone requested setting to a specific directory (using a complete path) so that the default directory pops up from anywhere the notebook is launched on the system? Or is this already in the configuration settings?\n","The CodeMirror action is `indentAuto`, but I don't think it's bound to a key by default in the notebook. The default CM keybinding for this is `Shift-Tab`, but I think we override Shift-Tab to `indentLess` instead, which is already available as `ctrl/cmd-[`.\n I am not sure if we're on the same track. I don't mean auto-indent which is already present. I mean to be able to re-indent a code block with a click or shortcut instead of doing it manually.\n Then I don't know what you mean by `re-indent`. We have\n- indentAuto: take a selected block of text and indent it how CodeMirror thinks it should be\n- indentMore: increase indentation of selection\n- indentLess: decrease indentation of selection\n\nWhat do you want `reindent` to do?\n @minrk I am not sure if indentAuto is capable of this but nothing in the menu offers this and neither a shortcut.\n[This](https://joshbetz.com/2012/09/reindent-text-in-sublime) sums it up: It\u2019s useful if you need to change a document from using spaces to tabs, for instance.\n\nand [here](http://sublimetexttips.com/formatting-html-with-sublime-text/): The Reindent command is handy for quickly formatting a messy block of HTML.\n\nIt helps a lot if you have an unindented block or not correctly indented one.\n Gotcha, that's what indentAuto does. There isn't a default shortcut for it at the moment in the notebook, but we should be able to add it, either via the menu or keyboard shortcut.\n Great. Looking forward to it.\n Thanks for the shortcut though this is not what I was implying. I made a [screencast ](https://youtu.be/KLxfEa-N1GU)to show this.\n\nSorry for the duplicate posts.\n What you want was discontinued from CodeMirror, you should be able to write an extension that  does it:\n\nCf this SO question for example : http://stackoverflow.com/questions/25109809/codemirror-auto-format-after-setvalue. It's though, something which is hard with Python as various indentation have various meaning. \n","The notebook just triggers CodeMirror's toggleComment action. How that's performed is entirely up to CodeMirror, you may want to ask [over there](https://github.com/codemirror/codemirror) if there's a way to influence this.\n Hi @minrk , just to follow up. I can see that CodeMirror devs is saying there is no bug in CodeMirror, and \n\n> It's simply a matter of calling toggleComment with indent: true\n\nSo, how would I go about changing my notebook's behaviour such that toggleComment is called with indent=true? Is there a configuration setting, or would I have to implement it myself by altering the Jupyter Notebook source code?\n","Thanks! I hope @willingc will have a look as well.\n @takluyver I will :+1:\n\nThanks for the PR and the review.\n Thanks @steveholden for the PR. I have made a number of comments and suggestions - some basic on Jupyter notebook v4.1 functionality, some on style, and some to reflect the usage of the notebook in practice.\n\ncc/@takluyver\n Looks like this needs a rebase.\n Tagging as `closed-PR`, and closing as this is seem to have stalled a bit. \nThis is just to keep the PR queue a bit shorter and focusing on what is actually worked on.\nFeel free to reopen, (or ask for reopening if you don't have enough right to do so). \nIf you were not the original author, and want to revive this, please feel free to do so. \n\nAlso, we are doing our best to enable people to learn how to contribute to the project, and get commits in. If you are missing time or have any other issues that prevent you to work on that, please feel free to tell us, we can try to build on top of what you did. \n\nThanks a lot and looking forward to see this moving forward again.\n","I've prodded it to retry just in case it's sulking at you for some reason.\n\nI wonder if coverage has some minor issue on Python 3.5, maybe only 3.5.1?\n Travis was borking up a few days ago.  All the tests in ipywidgets were failing.  I went to sleep, and the next day Travis was happy.  He probably got food poisoning or something.\n I locally have an thread error with sqlite exactly where the build breaks:\n\n```\nOK (SKIP=1)\nError in atexit._run_exitfuncs:\nTraceback (most recent call last):\n  File \"/Users/bussonniermatthias/dev/ipython/IPython/core/history.py\", line 755, in writeout_cache\n    self._writeout_input_cache(conn)\n  File \"/Users/bussonniermatthias/dev/ipython/IPython/core/history.py\", line 739, in _writeout_input_cache\n    (self.session_number,)+line)\nsqlite3.ProgrammingError: SQLite objects created in a thread can only be used in that same thread.The object was created in thread id 4377808896 and this is thread id 140735277753088\n```\n I don't see an error locally. And I can't work out how the error you see makes sense - atexit functions should run on the main thread, which should also be where the history database connection was opened.\n\nAnd if it's hanging producing the coverage report after the notebook tests, what's an IPython traceback doing there? :-S\n I've also seen this nasty looking traceback on Travis a couple of times. I think either there's an as-yet-unknown bug in Python itself, or there's something rotten in the state of Travis.\n\n```\nFatal Python error: PyImport_GetModuleDict: no module dictionary!\nThread 0x00007f4693374700 (most recent call first):\n  File \"/home/travis/virtualenv/python3.5.0/lib/python3.5/site-packages/ipykernel/parentpoller.py\", line 37 in run\n  File \"/opt/python/3.5.0/lib/python3.5/threading.py\", line 923 in _bootstrap_inner\n  File \"/opt/python/3.5.0/lib/python3.5/threading.py\", line 891 in _bootstrap\n\nThread 0x00007f46a1826700 (most recent call first):\n  File \"/home/travis/virtualenv/python3.5.0/lib/python3.5/site-packages/ipykernel/heartbeat.py\", line 61 in run\n  File \"/opt/python/3.5.0/lib/python3.5/threading.py\", line 923 in _bootstrap_inner\n  File \"/opt/python/3.5.0/lib/python3.5/threading.py\", line 891 in _bootstrap\n\nCurrent thread 0x00007f46aba39700 (most recent call first):\n  File \"/home/travis/virtualenv/python3.5.0/lib/python3.5/site-packages/traitlets/traitlets.py\", line 1076 in on_trait_change\n  File \"/home/travis/virtualenv/python3.5.0/lib/python3.5/site-packages/IPython/core/extensions.py\", line 64 in __del__\n\n.Fatal Python error: PyImport_GetModuleDict: no module dictionary!\n\nThread 0x00007f01dbfff700 (most recent call first):\n  File \"/home/travis/virtualenv/python3.5.0/lib/python3.5/site-packages/ipykernel/parentpoller.py\", line 37 in run\n  File \"/opt/python/3.5.0/lib/python3.5/threading.py\", line 923 in _bootstrap_inner\n  File \"/opt/python/3.5.0/lib/python3.5/threading.py\", line 891 in _bootstrap\n\nThread 0x00007f01ea72a700 (most recent call first):\n  File \"/home/travis/virtualenv/python3.5.0/lib/python3.5/site-packages/ipykernel/heartbeat.py\", line 61 in run\n  File \"/opt/python/3.5.0/lib/python3.5/threading.py\", line 923 in _bootstrap_inner\n  File \"/opt/python/3.5.0/lib/python3.5/threading.py\", line 891 in _bootstrap\n\nCurrent thread 0x00007f01f493d700 (most recent call first):\n  File \"/home/travis/virtualenv/python3.5.0/lib/python3.5/site-packages/traitlets/traitlets.py\", line 1076 in on_trait_change\n  File \"/home/travis/virtualenv/python3.5.0/lib/python3.5/site-packages/IPython/core/extensions.py\", line 64 in __del__\n\n.Failed to import the site module\n\nTraceback (most recent call last):\n  File \"<frozen importlib._bootstrap_external>\", line 1077, in _path_importer_cache\nKeyError: '/home/travis/virtualenv/python3.5.0/lib/python3.5/lib-dynload'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/travis/virtualenv/python3.5.0/lib/python3.5/site.py\", line 69, in <module>\n    import __builtin__ as builtins\n  File \"<frozen importlib._bootstrap>\", line 969, in _find_and_load\n  File \"<frozen importlib._bootstrap>\", line 954, in _find_and_load_unlocked\n  File \"<frozen importlib._bootstrap>\", line 896, in _find_spec\n  File \"<frozen importlib._bootstrap_external>\", line 1136, in find_spec\n  File \"<frozen importlib._bootstrap_external>\", line 1107, in _get_spec\n  File \"<frozen importlib._bootstrap_external>\", line 1079, in _path_importer_cache\n  File \"<frozen importlib._bootstrap_external>\", line 1055, in _path_hooks\n  File \"<frozen importlib._bootstrap_external>\", line 1300, in path_hook_for_FileFinder\n  File \"<frozen importlib._bootstrap_external>\", line 96, in _path_isdir\n  File \"<frozen importlib._bootstrap_external>\", line 81, in _path_is_mode_type\n  File \"<frozen importlib._bootstrap_external>\", line 75, in _path_stat\nKeyboardInterrupt\n```\n (I just got that by re-running [this build](https://travis-ci.org/jupyter/notebook/jobs/102303145) - it somehow succeeded despite that error)\n I'm telling you guys, just wait a day... ;)\n > I'm telling you guys, just wait a day... ;)\n\nWe've already waited a day. It's ben broken for more than 24h. \n > We've already waited a day. It's ben broken for more than 24h.\n\nAw okay, maybe he has a fatal injury.  \n @Carreau did you work out where the SQLite error you saw locally was coming from? It's now happening on Jenkins: https://jenkins.jupyter.org/job/jack-of-none/128/console\n No haven't found.... :-( \n The flu Travis had must have been contagious :trollface: \n I restarted Jenkins, and the error is gone... :confused: \n @Carreau @takluyver I'm thinking this would be ok to close.\n Thanks @willingc !\n","WTF, build passes on master now. closing. \n","to backport to 4.2\n backported. \n","Happened to me as well. The RAM used goes way up and then the browser crashes.\n While this issue is being fixed are there any alternatives to uploading larger than 35 MB fies?\n If you're running IPython locally, or it's on a server where you have some other kind of access (ssh, ftp, nfs, Windows file sharing), you can just copy the files you want to the directory where the server is running. If your only access to the server is through IPython, I don't think there's any alternative.\n Bumping to 5.0. \n\nThe actually for look that loop the file bytes that encode them as base 64 is crashing. \nThe alternative is to actually use [bits operations](https://github.com/niklasvh/base64-arraybuffer/blob/master/lib/base64-arraybuffer.js) which will just push the crash limit. \nOr upload binary directly (or in chuncks) which seem more reasonable, but more work. \n @Carreau It seems something like [resumable.js](http://www.resumablejs.com/) would help with this. It allows for chuncked and resumable uploads, so it should handles large files fine. This require modifications on the server to store the chunks in a temporary directory and reassemble the files at the end.\n Also pinging @blink1073 on this\n We could return a particular error status code if the file is too large, and then use the [HTML File API](http://www.w3.org/TR/FileAPI/) directly as a fallback. \n Well, [FileReader](https://developer.mozilla.org/en-US/docs/Web/API/FileReader), to be more precise.\n Nevermind, I see that you're already using the `FileReader` in https://github.com/jupyter/notebook/blob/master/notebook/static/tree/js/notebooklist.js.  I agree that something else is required if that isn't working, but `resumable.js` is not available on npm, digging...\n Mitigated for 4.1 by #623, which disables upload of large files. Leaving open for 5.0, when we can actually implement chunked upload.\n We have solved the problem of loading large files by chunking. We also added a progress bar to indicate the upload progress. In our experiment we tried files with a few Gs with no problem.\r\n\r\n  I would be happy to contribute the code. Please let me know what's the process. Thank you! Hi @daniel1124 this was given a shot in #536 currently IIRC the server side does not support receiving the files in chunk so that would need to be improved From the UI side of things, I guess the best path forward may be to directly implement that in [jupyterlab](https://github.com/jupyterlab/jupyterlab) which will end up replacing the current notebook, but if you want to try to implment that in normal notebook as well that would be appreciated.\r\n\r\nOne would have to look how to do chunk file upload with tornado (likely just peaking at the `ContentType` header + if statement)\r\n\r\nDoes that make sens ? In my opinion this should be done in the Notebook first.  The bulk of the work will be in the server and the low-level services calls on the client.  A PR will need to be made against this repository either way.   A [bootstrap progress bar](http://www.w3schools.com/bootstrap/bootstrap_progressbars.asp) in a bootstrap modal could be used for the Notebook UI, and we can use the new server API and much of the front-end code for the JupyterLab implementation. @blink1073 yeah that's exactly what we did. We modified notebook-4.3.1, mostly in the notebook/static/tree/js/notebooklist.js file, and we add a largefilemanager.py under notebook/service/contents/. \r\n\r\nDo you think I should follow the instructions here to contribute? https://github.com/jupyter/notebook/blob/master/CONTRIBUTING.rst @Carreau @blink1073 the way we make it work is that if it is the first chunk, then we set the write mode to \"w\"; for following chunks we set the write mode to \"a\". All my changes are confined under the notebook package. That sounds great, @daniel1124, and yes, that is the preferred process document. @Carreau @blink1073 I have finished the code and testing, etc. Right now I'm waiting on our company (BlackRock)'s legal/compliance team to give an approval for pull request. We will be contributing through BlackRock-engineering account https://github.com/blackrock.\r\n\r\nThis is my first time making pull request. Just to understand the process, does the following sound right:\r\n1. we fork the notebook repo into our own repo\r\n2. make changes and commits\r\n3. submit pull request from our own repo\r\n4. wait to be pulled\r\n\r\n @daniel1124  - that process sounds right. Give or take a possible 3.5 - respond to comments from reviewers ;-) Great, looking forward to it @daniel1124! Thanks @daniel1124 If you or your company need to chat privately for question clarification feel free to reach to any of us privately or contact the Jupyter steering council. \r\n\r\nAs for your pull-request, you can't break anything so feel free to send even a partial work, it is always possible to update after the fact. @Carreau @blink1073 @takluyver  I have added unit tests and cleaned up the code. It's ready for review now. @Carreau @blink1073 @takluyver just made another commit reflecting all the feedback. It's ready for review.  Thanks for all your works , I'm waiting for upload large Files. ","Objection on having that only on 5.0 and not on 4.2 ?\n @Carreau 5.0 should be fine, since the option only makes sense on dev anyway.\n","Then that's a CodeMirror issue. If it's in codemirror, you can enable the keybindings for the notebook.\n No, I don't think it is in CodeMirror yet. The code is from the Chromium dev tools which is based on CodeMirror. So, I believe it should work in ipython as well. \n","Keyboard handling across different browsers, locales and physical keyboards is a nightmare.\n\nThe terminal we use is a component called term.js. It looks like this issue, or something similar, has been reported as chjj/term.js#91 .\n\nThere's nothing we can really do except update term.js when there's a new release, so closing here.\n",":+1: to this shortcut\n Thanks for the shortcut though this is not what I was implying in the [other issue.](https://github.com/jupyter/notebook/issues/951) I made a [screencast ](https://youtu.be/KLxfEa-N1GU)to show this.\n @elmerehbi that looks an awful lot like the feature that this adds:\n\n![autoindent](https://cloud.githubusercontent.com/assets/151929/13113822/14acfa46-d591-11e5-95c5-55e957a1e17d.gif)\n\nwhat's different that you are looking for?\n @minrk Exactly what I'm looking for. What is it?\n That's the shortcut added by this PR: ctrl-alt-[\n Well I remember trying it but it didn't give the same result (not to this code I grabbed online). i'll give it another try.\n @minrk I have version 4.0.6 from Anaconda. The shortcut is not in the list. How can I get it?\n The bug was closed because the shortcut was added to the development version. You'll have to wait for a new release (or run from the development version) to see the change.\n\nIt's currently targeted for 5.0 because it's a new feature - look at the right hand side of this issue page. But it's probably small enough that we could put it in a 4.x release. @minrk ?\n @takluyver Great. Thanks for the clarification.\n > But it's probably small enough that we could put it in a 4.x release. @minrk ?\n\nI think new features can get into minor releases.  It's only features that change existing behavior that cannot.  The key binding used here wasn't already in use.  I guess it's debatable though, because users may have it bound now (although I think user config would overwrite it regardless).\n","Thanks for the report, it's not critical, so it might not make it in 4.2, we'll definitively have a look.\n I have also observed this bug, on 64 bit Anaconda running on Linux, although in my setup I have not modified custom.js (as far as I know).\n Should be fixed by #992\n","405 is 'Method not allowed'. But I wonder if there's a mismatch between the notebook URL structure and the URLs jsroot tries to use, and it looks in the wrong place for it. Is that `hsimple.root` file inside `MyScripts/MyOwnROOTScripts`?\n i already tried putting hsimple.root to different directories. Like, the same location where index.htm is, also the directory where I launched the notebook . \n\ni tried the steps from this site http://stackoverflow.com/questions/21124869/how-to-view-html-file-in-remote-unix-server  and it worked.\n\nThe only problem is when I do it in iframe in jupyter notebook\n Ah, I see it. The `/files/` handler now uses our ContentsManager machinery, rather than a standard static file handler. It should be easy to add HEAD support.\n I think #966 should fix this, so long as the file is in the right place (which looks like it's the directory where you started the notebook server).\n Perfect!!!! It works now. \n\nThanks a lot\n","+1 Excellent! Is this too extreme to backport into 4.x? The semester hasn't begun yet, so if it happened sooner than later, that would be a semester of happy students and instructors!\n Nice. This doesn't look too invasive, I think it would be reasonable to put it into a 4.x release.\n Fantastic, thanks. I will test the heck out of this.\n Something's not right about the cell ordering, maybe one too many .reverse calls?  See the following action shot, where the header and text cells are swapped:\n\n![demo](https://cloud.githubusercontent.com/assets/3292874/12428207/32ababd8-be98-11e5-9c8e-544de153636e.gif)\n @minrk I see the same behavior as @jdfreder . It seems to happen when you skip around the notebook and delete cells at the bottom of notebook then top then bottom and then try to undo. It doesn't seem to happen when you delete in order down from 1 to 5. reverse issue seems a likely culprit.\n Hmm... I wonder if I ran into this:\n\n> Since this is only for undelete, it's possible for intermediate edits to prevent undeleted cells from going into the exact right place.\n\nI'm pretty sure that at least once I clicked in a cell though didn't change contents.\n @willingc I think it should be doable to track correctly as long as the only actions are delete/undelete. Once cells are added or moved, that's when I think we can expect it will show up a little funny.\n\n@jdfreder I think I fixed the reversal, and added tests that should cover it.\n @minrk thanks, I've verified that your change fixes the problem for me.\n :+1: for merge\n","maybe checkout [yhat rodeo](https://github.com/yhat/rodeo).  Might solve some of your problems. \n Thank you. I will have a look at that one.\n\nl\u00f6rdag 27 juni 2015 skrev Donald Braman notifications@github.com:\n\n> maybe checkout yhat rodeo https://github.com/yhat/rodeo. Might solve\n> some of your problems.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/97#issuecomment-115819000.\n Have you seen the Atom package Hydrogen?\n\n![](https://camo.githubusercontent.com/df535b1882e71808e9f1cd19c66a3674628cc805/687474703a2f2f692e696d6775722e636f6d2f524650443163392e676966)\n\nIt does rich integration with Jupyter and is aiming to support much of what you're looking for, including watch expressions.\n\n/cc @willwhitney\n Though of course, there's no support for notebooks in there (yet).\n Hydrogen author here \u2014\u00a0\n\nHydrogen might be a good fit for some of this. It's designed for working with bigger projects (supporting Real Projects instead of experimentation and demos) and so having algorithms and plots and whatnot in different places works well.\n\nWatch expressions in Hydrogen: \n\n![hydrogen-watches-cropped](https://cloud.githubusercontent.com/assets/597829/8393637/adc5011a-1ce6-11e5-9760-d5f6c2ac7d94.gif)\n\nAs far as being able to see the defined variables, I'm working with the Jupyter team to add this (not just in Hydrogen, but everywhere) and do it in a cross-language way. Until then, the `%who` magic in Python will at least give you a list of the names of the variables you've defined.\n Thanks for posting this!\n\nOn Sat, Jun 27, 2015 at 1:12 PM, Will Whitney notifications@github.com\nwrote:\n\n> Hydrogen author here \u2014\n> \n> Hydrogen might be a good fit for some of this. It's designed for working\n> with bigger projects (supporting Real Projects instead of experimentation\n> and demos) and so having algorithms and plots and whatnot in different\n> places works well.\n> \n> Watch expressions in Hydrogen:\n> \n> [image: hydrogen-watches-cropped]\n> https://cloud.githubusercontent.com/assets/597829/8393637/adc5011a-1ce6-11e5-9760-d5f6c2ac7d94.gif\n> \n> As far as being able to see the defined variables, I'm working with the\n> Jupyter team to add this (not just in Hydrogen, but everywhere) and do it\n> in a cross-language way. Until then, the %who magic in Python will at\n> least give you a list of the names of the variables you've defined.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/97#issuecomment-116129969.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n","You should be able to select all the running notebooks and then click a shutdown button at the top.\n I'm currently on the \"Running\" Tab and I tried selecting the notebooks on Chrome, Firefox, and Safari but they are not clickable. \n![screen shot 2016-01-18 at 2 52 43 pm](https://cloud.githubusercontent.com/assets/1561975/12404749/2ad7fcfe-bdf3-11e5-9eee-9caddd36e8af.png)\n Aha, I see. You can select them on the files tab, though I think you have to act on one directory at a time. It probably makes sense for them to be selectable in the running tab too.\n","@wielandbrendel Thanks for including the build log with your issue report.\n\n@takluyver @minrk @parente The logs show errors on setting the locale on Ubuntu. Do we want to try to update the Dockerfile here with one from jupyter/docker-stacks?\n Thanks for taking care! One downside (for me) is that the jupyter/docker-stacks are based on Debian, whereas I (and probably many others) prefer Ubuntu. In other words, I'd really appreciate a working installation on Ubuntu :).\n This is a change in the pygments BashLexer between 2.0 and 2.1, and seems like a pygments bug. In any case, we can safely ignore it and shouldn't be running the IPython tests in the Dockerfile anyway.\n Should be fixed by #976\n","Very cool!\n\nCould you add a note about this in the top-level README and describe any build steps needed (npm run build, etc.).\n\nAlso, we should have @cameronoelsen think about where to put a \"JupyterLab\" button or link in the main dashboard.\n There should be no change to the top level README, this should get run as part of setup.py.\n Don't see any changes to the setup.py though? Did that already happen?\n Nope, that's why its a WIP :)\n Ahh, got it. Should we just merge, or let you keep WIPing this PR?\n\nOn Mon, Jan 18, 2016 at 2:43 PM, Steven Silvester notifications@github.com\nwrote:\n\n> Nope, that's why its a WIP :)\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/972#issuecomment-172673663.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n I'd say wait until I figure out `setup.py` and satisfy Travis CI.\n OK, sounds good.\n\nOn Mon, Jan 18, 2016 at 2:46 PM, Steven Silvester notifications@github.com\nwrote:\n\n> I'd say wait until I figure out setup.py and satisfy Travis CI.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/pull/972#issuecomment-172674126.\n\n## \n\nBrian E. Granger\nAssociate Professor of Physics and Data Science\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Okay, it looks like just random failures on the builds.  I finished `setup.py` related actions, removing the WIP tag.\n @blink1073 This is starting to look so slick :clap: \n This is awesome.  Can you rebase/recommit the notebook/notebookapp.py and setupbase.py files so that the irrelevant whitespace changes are not in the commit?\n Done.\n \\* Subscribed\n Now with fancy link!:\n\n<img width=\"305\" alt=\"screen shot 2016-02-11 at 3 04 12 pm\" src=\"https://cloud.githubusercontent.com/assets/2096628/12990724/7638f5d6-d0d1-11e5-96af-0bc83de6dcc9.png\">\n I like the graphic!\n @jdfreder Thanks :grinning: \n > @jdfreder Thanks\n\nI should have known!  \n In regards to the test failure, I looked through the history and this is affecting other open PRs randomly as well.  The test finishes but the process does not exit.  I suspect there is a thread spawned that is not successfully closing, since when I run the tests locally on Python 3.4 it hangs for some time before closing (on OSX).\n You can reproduce a hang? I've been trying to debug that, but it's a total heisenbug - every time I try to investigate it, there's no bug at all.\n\nIf you hit Ctrl-C while it's hanging after the tests, do you get any traceback that might indicate where it's hanging?\n @takluyver you can't find the location of the heisenbug because you know too much about it's momentum...\n @takluyver, unfortunately Ctrl+C just causes it to bail with no further output.  I am seeing this though (regardless):\n\n``` python\nError in atexit._run_exitfuncs:\nTraceback (most recent call last):\n  File \"/Users/ssilvester/anaconda/lib/python3.4/site-packages/IPython/core/history.py\", line 749, in writeout_cache\n    self._writeout_input_cache(conn)\n  File \"/Users/ssilvester/anaconda/lib/python3.4/site-packages/IPython/core/history.py\", line 733, in _writeout_input_cache\n    (self.session_number,)+line)\nsqlite3.ProgrammingError: SQLite objects created in a thread can only be used in that same thread.The object was created in thread id 123145307557888 and this is thread id 140735176081408\n```\n That was a separate issue - it should be fixed by jupyter/nbconvert#229.\n\nIf you have time to debug it some more: I suspect that it's [this test machinery](https://github.com/jupyter/notebook/blob/master/notebook/tests/launchnotebook.py) that's at fault. Can you try putting some print statements in `teardown_class` and `wait_until_dead` to see if it's hanging somewhere in there?\n Heisenberg strikes again, it doesn't seem to want to hang up anymore...\n I applied that patch @takluyver, and the SQLite error is indeed gone.   Adding print statements didn't show anything, because everything is now working smoothly (with and without the nbconvert patch).\n I hate to ask this again, but can you rebase/recommit the notebook/notebookapp.py and setupbase.py files so that the irrelevant whitespace changes are not in the commit? IIRC, we decided a long time ago that we could correct whitespace as we went in lines we changed, but we wouldn't make lots of other whitespace fixes since large amounts of unnecessary whitespace changes masks important relevant changes.\n > I hate to ask this again, but can you rebase/recommit the notebook/notebookapp.py and setupbase.py files so that the irrelevant whitespace changes are not in the commit? IIRC, we decided a long time ago that we could correct whitespace as we went in lines we changed, but we wouldn't make lots of other whitespace fixes since large amounts of unnecessary whitespace changes masks important relevant changes.\n\nI second this, I know it's a pain but it will help avoid rebasing with things like https://github.com/jupyter/notebook/pull/1047  :(  \n Updated and rebased.\n @blink1073 can you post updated screenshots?\n Updated.\n I see we now have two commits in the list that put back in whitespace that was removed by other commits.  What I meant by rebase your commits adding whitespace was to change the original commits to not have any extra whitespace changes, so we don't have a lot of whitespace churn in the list of commits. It might be easiest at this point to just collapse everything to one commit.  Can you collapse things so that there isn't whitespace churn?\n We've uncovered some issues related to installation, and bootstrap interfering by adding `*` selector attributes, I will update this afternoon.\n Okay, thanks.\n Ready for review, I can't replicate the install issues, but `python setup.py install` and `pip install -e .` work.\n This is remarkably simple (I like it!). I landed the webpack PR, so there's conflict on setupbase.py. What do you think should be done before we merge this one? File browser's working great, but the notebook UI has a very long way to go.\n The original intent AFAIK was to demonstrate everything _but_ the notebook itself.  Perhaps an initial released version should show read-only notebooks?\n I think that makes sense.\n Let's wait for #1139 and I'll rebase.\n I'll add a read-only notebook plugin to `jupyter-js-plugins`, and we'll use that on the lab page.\n Perfect, thanks!\n @minrk, I made the changes (see updated screen cast above).\n It works! It would be cool if we could get the top-level `build:watch` to run on both targets.\n :tada: \n","@Carreau Please review when you have time. We can at least fix the docs until the UI label gets restyled for \"New\" notebooks. \n Usually in general i feel like if we **have to** explain something with image, or animation something is wrong. \n\nAnd also gifs ave to be redone at every UI change, so in general I (personal opinion), would be in favor  of avoiding gifs/images when necessary. \n @Carreau I agree that having to explain the UI too much is a sign that improving an aspect of the UI. For now, we are being kind to the users by adding the visual. We can always remove after the UI change lands.\n\nYour point on changes over time is well taken. The rule of thumb that I am working under is adding a GIF or image should directly impact the reader's understanding. In general, I love things like the Tour of the Notebook to help users become familiar with features.\n\nWelcome back :D \n","This is working for me on master on Linux Mint.\n @esafak what version of IPython? This appears to be working with IPython 4.2.0 and master.\n It works in Jupyter 4.2.1 w/python 3.5 on OS X.\n","Thanks for looking into this, I'm assuming this is what's causing the failures in #931 \n @jdfreder this hasn't anything to do with what you are seeing in #931. The Dockerfile isn't relevant to those tests, which are failing due to real bugs.\n > @jdfreder this hasn't anything to do with what you are seeing in #931. The Dockerfile isn't relevant to those tests, which are failing due to real bugs.\n\nDarn, wishful thinking...\n","@Carreau [commented](https://github.com/ipython/ipython/issues/8219#issuecomment-88542071)\n\nI think accident.\n @minrk [commented](https://github.com/ipython/ipython/issues/8219#issuecomment-88548515)\n\nI just checked, and they are underlined on 2.x and 1.x. I don't think this has changed since the beginning of the notebook.\n @ellisonbg [commented](https://github.com/ipython/ipython/issues/8219#issuecomment-88560114)\n\nMmmm, no way, I am positive this wasn't the case - it must be a browser\nchange...\n\nOn Wed, Apr 1, 2015 at 10:02 AM, Min RK notifications@github.com wrote:\n\n> I just checked, and they are underlined on 2.x and 1.x. I don't think this\n> has changed since the beginning of the notebook.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ipython/ipython/issues/8219#issuecomment-88548515.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @ellisonbg [commented](https://github.com/ipython/ipython/issues/8219#issuecomment-88563489)\n\nHmm, found a screenshot from a while back where links were underlined...now\ndoubting my memory...but I could swear they weren't underlined\n\nOn Wed, Apr 1, 2015 at 10:13 AM, Brian Granger ellisonbg@gmail.com wrote:\n\n> Mmmm, no way, I am positive this wasn't the case - it must be a browser\n> change...\n> \n> On Wed, Apr 1, 2015 at 10:02 AM, Min RK notifications@github.com wrote:\n> \n> > I just checked, and they are underlined on 2.x and 1.x. I don't think\n> > this has changed since the beginning of the notebook.\n> > \n> > \u2014\n> > Reply to this email directly or view it on GitHub\n> > https://github.com/ipython/ipython/issues/8219#issuecomment-88548515.\n> \n> ## \n> \n> Brian E. Granger\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n @Carreau [commented](https://github.com/ipython/ipython/issues/8219#issuecomment-88580103)\n\nCustom theme ? Slideshow ?\n\nOn Wed, Apr 1, 2015 at 10:20 AM, Brian E. Granger notifications@github.com\nwrote:\n\n> Hmm, found a screenshot from a while back where links were underlined...now\n> doubting my memory...but I could swear they weren't underlined\n> \n> On Wed, Apr 1, 2015 at 10:13 AM, Brian Granger ellisonbg@gmail.com\n> wrote:\n> \n> > Mmmm, no way, I am positive this wasn't the case - it must be a browser\n> > change...\n> > \n> > On Wed, Apr 1, 2015 at 10:02 AM, Min RK notifications@github.com\n> > wrote:\n> > \n> > > I just checked, and they are underlined on 2.x and 1.x. I don't think\n> > > this has changed since the beginning of the notebook.\n> > > \n> > > \u2014\n> > > Reply to this email directly or view it on GitHub\n> > > https://github.com/ipython/ipython/issues/8219#issuecomment-88548515.\n> > \n> > ## \n> > \n> > Brian E. Granger\n> > Cal Poly State University, San Luis Obispo\n> > @ellisonbg on Twitter and GitHub\n> > bgranger@calpoly.edu and ellisonbg@gmail.com\n> \n> ## \n> \n> Brian E. Granger\n> Cal Poly State University, San Luis Obispo\n> @ellisonbg on Twitter and GitHub\n> bgranger@calpoly.edu and ellisonbg@gmail.com\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/ipython/ipython/issues/8219#issuecomment-88563489.\n","Does this only happen if you do it literally as soon as you create a new notebook? There might be a brief delay before it gets the language info from the kernel, but if that's the cause, you should see 'Script' instead of 'Python' in the download menu.\n\nOtherwise, what OS and browser are you using? Can you easily try with a different browser? Our HTTP headers should say that the mimetype is `text/x-python` and suggest a filename ending in `.py`, but the browser may ignore that.\n Yes, it happens just after the creating new notebook. When I'm trying to download as .ipynb or .html everything works fine. I'm using Mac OS 10.10.5. I tried with Chrome, Safari and Firefox, and I have the same issue with all these browsers.\n So if you wait say 10 seconds, and the kernel has started, it will save as .py? If that's the case, I think it's working as designed, though I'm surprised it takes long enough that you can click that before it has got the file extension in place.\n @skukhtichev Are you using Notebook version 4.1 (The version can be checked at the command line or in the Help->About menu option? )\n\nI'm using Mac OS 10.11.3 and the same process is saving as a `.py` file.\n The problem occurred with 4.0.6 version. I installed 4.1.0, and \"Download as python\" works correct.\n Great, thanks for letting us know.\n","Is this an exact copy of what was in `jupyter-js-services`?\n @blink1073 yes, other than bumping the version to 5.\n @blink1073 actually, after checking it with swagger, there were some validation errors that I've now fixed.\n LGTM\n One small comment, but other than that, looks good to me.\n @jasongrout thanks! fixed.\n I'm trying to check the rendering, and for some reason it isn't rendering: http://petstore.swagger.io/?url=https://raw.githubusercontent.com/minrk/notebook/swagger-doc/notebook/services/api/api.yaml\n It looks like a bug in the swagger renderer.  I'm looking into it.\n Yep, definitely looks like a bug in swagger: https://github.com/swagger-api/swagger-ui/issues/1903\n How do I kickstart Travis again?\n\n_edit_: never mind, I had to log in to see the restart button.\n Does hitting the restart button here not work for you?  https://travis-ci.org/jupyter/notebook/jobs/103882148\n\n<img width=\"96\" alt=\"screen shot 2016-01-21 at 11 58 29 am\" src=\"https://cloud.githubusercontent.com/assets/2096628/12489518/5272a59e-c036-11e5-85e7-0aca13fa7d55.png\">\n I hit it several times, and finally all of them passed.\n @jasongrout, @blink1073, @minrk Do we want to link to the swagger API docs from the Developer section of the Sphinx docs or README.md?\n I'd say so (to both).\n Ping me when the rendering bug for swagger is solved, send me a link to where it's rendered, and I'm happy to update both.\n Yeah, I'd say that we figure out how to statically render that page and include it in the notebook as a static file.  It's silly that we are depending on a hosted service to do the static rendering.\n and include it in the hosted documentation as well...\n https://www.npmjs.com/package/bootprint-swagger\n","What version of pip/setuptools do you have? They way it's specified is correct, and this change would result in building incorrect wheels. I'm thinking that the way we are specifying it may require more recent setuptools than I thought, though.\n Oh. update to lastest pip it's works.\n @dongweiming do you recall what version you had before upgrading when it didn't work? The setuptools documentation is poor, and I don't know when this behavior didn't work.\n","@Carreau [commented](https://github.com/ipython/ipython/issues/8999#issuecomment-172405024)\n\nHum, might be an issue for `github.com/jupyter/notebook` repository, but it might also be a IPython one.\n\nShift-tab will work only if function is imported and in scope (unless you set options like `IPCompleter.greedy`) can you give a more specific example?\n Closing for no response in a long time. Feel free to reopen with more details if this is still an issue.\n","@brainstorm [commented](https://github.com/ipython/ipython/issues/8996#issuecomment-159405047)\n\nSame effect with a simple markdown cell:\n\n```\n![svg](2156.tsv.svg)\n```\n\nOn a new fresh tab, opening the file directly via the browser, the image shows without any issue.\n @brainstorm [commented](https://github.com/ipython/ipython/issues/8996#issuecomment-159409171)\n\nReported elsewhere since August: http://stackoverflow.com/questions/32246251/ipython-notebook-nested-svg-elements\n @brainstorm [commented](https://github.com/ipython/ipython/issues/8996#issuecomment-159429768)\n\nHere's a pickled `found_svg` variable from <a href=\"https://github.com/ipython/ipython/blob/master/IPython/core/display.py#L492\">IPython.core.display L#492</a> if anyone wants to get `xml.dom.minidom` to render my nasty svg properly (without having to restart ipython notebook over changes):\n\nhttps://www.dropbox.com/s/7ohlthza3gw0cyk/multiple_nested_svg.pickle?dl=0\n\ni.e:\n\n```\nimport cPickle as pickle\nfound_svg = pickle.load(open( \"multiple_nested_svg.pickle\", \"rb\" ))\n...\n```\n ... I am not sure this is a notebook error as the following code produce the desired result ...\n\n``` .python\nfrom IPython.display import HTML\nnested_svg=\"\"\"\n<svg xmlns=\"http://www.w3.org/2000/svg\">\n  <svg x=\"0\">\n    <rect x=\"10\" y=\"10\" height=\"80\" width=\"80\" style=\"fill: #0000ff\"/>\n  </svg>\n  <svg x=\"100\">\n    <rect x=\"10\" y=\"10\" height=\"80\" width=\"80\" style=\"fill: #00cc00\"/>\n  </svg>\n</svg>\"\"\"\nHTML(nested_svg)\n```\n\nBut still does not if you:\n\n``` .python\nSVG(nested_svg)\n```\n See [#9214](https://github.com/ipython/ipython/pull/9214) for dirty work around.\nAt the end the problem is in the notebook in `notebook/js/outputarea.js` line 654 ... The notebook un-nest the svg for presentation purpose assuming there is one svg element. \nNear to be fixed.\n","@Carreau [commented](https://github.com/ipython/ipython/issues/8990#issuecomment-172404904)\n\nHi, sorry this slipped through the cracks\n\nyou did not appear to have doneanything wrong (apart maybe `activate` instead of `source activate`, but I guess that's just a typo. I would try reinstalling conda if it persists.\n\nNote: `\u627e\u4e0d\u5230\u6307\u5b9a\u7684\u6a21\u5757` translate as `The specified module could not be found`\n @takluyver [commented](https://github.com/ipython/ipython/issues/8990#issuecomment-172486473)\n\nMaybe on Windows it needs the conda environment active to find some DLLs, rather than just running the Python by absolute path.\n\n_Without_ activating the environment, can you try in a command prompt:\n\n```\nd:\\\\Miniconda\\\\envs\\\\py35\\\\python.exe\n```\n\nThen if it starts up, try running `import zmq`.\n\nMatthias:\n\n> maybe activate instead of source activate, but I guess that's just a typo\n\nI think `activate` is correct on Windows. `source` is a bash thing.\n Closing as an installation issue. Reinstalling ipykernel in the env:\n\n```\nconda remove -n py35 ipykernel\nconda install -n py35 ipykernel\n```\n\n and/or conda as a whole should resolve the issue.\n","@Carreau [commented](https://github.com/ipython/ipython/issues/8970#issuecomment-155214371)\n\nOn windows, the is_hidden has extra-check that refuse to serve some kinds of files for other reasons, like drive junction, and so on and so forth. \n\nWould by any change your C drive have such things, or actually have the hidden flag set ?\n @denfromufa [commented](https://github.com/ipython/ipython/issues/8970#issuecomment-156245359)\n\nc drive has hidden system folders and I did not setup any junctions, looks like the problem is common:\n\nhttps://groups.google.com/a/continuum.io/forum/#!topic/anaconda/6qSyM2Ixho0\n\nhttp://stackoverflow.com/questions/33366624/jupyter-refuses-to-serve-hidden-directory-d-on-windows\n I believe this is fixed by #1168\n","I think the 'mount points' abstraction works well for something like the Google Drive integration, where a contents manager is exposing an entirely separate storage space. I think we should think some more whether there's a better way to integrate things like ipymd, which is a different format stored in the same space. Having parallel versions of the same directories in order to open different kinds of files seems awkward.\n Yeah, I wouldn't think this would be the way to support something like ipymd.\n","Hello David. \n\nThanks for the report.  [Current version is supposed to save](https://github.com/jupyter/notebook/blob/master/notebook/static/notebook/js/menubar.js#L114-L120) before making a copy.\n\nThough the `save_notebook` function seem to ignore the `{async:false}` option which is handled nowhere.  We will try to get a fix for 4.2.\n Apparently the passthrough of ajax options was disabled in c7529c53ebdc4e8045dd4d513e2b38a8e016a319. We need to put it back\n Actually, no, I think we can use a promise to do it.\n Should be fixed by #987\n I just tested the fix from @minrk  and it appears to have solved the issue.\n\nThanks for this, I do appreciate the time the Jupyter devs spend on this tedious bug chasing.\n","relaunched tests. \n Relaunched test. \nCandidate for backport. \n","It may not be that simple since leading zeros seem to be allowed ...\n > It may not be that simple since leading zeros seem to be allowed ...\n\nlikely true. \n\nyou might want to change the [RegularExpression](https://github.com/mgeier/notebook/blob/patch-1/notebook/static/base/js/utils.js#L315): `/\\033\\[(0?[01]|22|39)?([;\\d]+)?m/g` to have an extra pair of bracket, or `parseInt` [there](https://github.com/mgeier/notebook/blob/patch-1/notebook/static/base/js/utils.js#L233) and change the dict from strings as keys to ints. \n I'm planning to implement this similarly to https://github.com/jupyter/nbconvert/pull/225 (basically porting it to JavaScript), but I don't know when I'll have the time.\n\nIf somebody else wants to tackle this, go ahead!\n I've created #1230, which will resolve this issue.\n","The `codemirror_mode` in a [kernel_info_reply](http://jupyter-client.readthedocs.org/en/latest/messaging.html#kernel-info) can be a dictionary to pass more options. E.g. for Python you can do (something like) this:\n\n```\n\"codemirror_mode\": {\"name\": \"python\", \"version\": 3}\n```\n\nMaybe there's something similar for selecting between SQL dialects?\n This page just defines mime types.\nhttps://codemirror.net/mode/sql/index.html\n\nIn my code I got this to work - ... getElementById(\"desc%d\"), {readOnly: true, mode:\"text/x-cassandra\"} \n\nBut the SQL mode was loaded, and I guess this is one of the dialects, so I was able to state the mime type.   AFIK, we need to load the sql mode, but can specify the mime type there.  I looked at util.js and found a bunch of code that tries to figure this out, but doesn't seem to do the right thing.   I'm not a javascript guy, so I'm not sure how everything gets set up.\n How are you setting the mime-type? Is it a custom kernel? It appears that setting codemirror mime-type in the kernel_info_reply does work for others, e.g. the Cling kernel.\n","Yeah, I saw this and thought the same thing. We should look at how atom is\ndoing this and use that as inspiration.\n\nOn Sat, May 16, 2015 at 7:13 PM, Will Whitney notifications@github.com\nwrote:\n\n> The autocomplete-plus package for the Atom editor (recently bundled into\n> Atom) shows how powerful types in autocomplete\n> https://github.com/atom/autocomplete-plus/pull/334 can be.\n> \n> [image: atom completions]\n> https://cloud.githubusercontent.com/assets/69169/6793515/b505ee3a-d182-11e4-9b9f-74b2a5d77365.png\n> \n> Something similar would be a huge boon to Jupyter. Instead of just showing\n> text matches for variables in the running kernel (already very powerful!),\n> show what they are: a variable of type String, a function that takes two\n> integers and returns a float, etc.\n> \n> This would be a huge step forward for interactive programming of\n> interpreted languages, and would truly showcase the power of having a live\n> kernel to introspect into.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/99.\n\n## \n\nBrian E. Granger\nCal Poly State University, San Luis Obispo\n@ellisonbg on Twitter and GitHub\nbgranger@calpoly.edu and ellisonbg@gmail.com\n Without having dug into this, i think it's an incredibly good idea. Any updates here?\n\nI assume there would be some list of type identifier strings that each token could provide.\n\nIf so, and they were stable across machines and versions, and we had indexing (long-missed feature), and a tree of notebooks could be opted in (jupyter nblibrary index)...\n\na documentation author would be able to reference the symbol type strings in cell metadata (new ui), to allow contextual \"open documentation for...\" with examples, etc. (New ui) This annotation could be done automatically, probably, though it could be guided so that not everyone documents \"import\".\n\nThis would put us almost at parity with the Mathematica documentation machinery... And encourage us to :dog: :pizza: our process for docs... Targeting rtd is great, and our docs should go up there, but it's no joke finding exactly what you need... Or impossible if you are in an environment without internet.\n @bollwyvl the thread tracking this: https://github.com/jupyter/jupyter_client/issues/51\n\nIt's my fault there hasn't been more progress on this recently. I was working on it during the summer, and I've gotten completely slammed this semester. Taking a class, applying to PhDs, trying to get a paper finished, and writing my Master's thesis all in one semester will do that, I guess.\n\nI still plan to get this shipped, but at this point I don't see myself being able to work on it until after I turn in my thesis at the end of January. If someone else wants to pick it up and finish it in the meantime, that would be very welcome.\n Thanks for the link! looks like a bruiser. I see some stuff about docs\nthere, which is cool.\n\nGood luck on your thesis!\n\nOn Wed, Nov 18, 2015 at 12:51 PM Will Whitney notifications@github.com\nwrote:\n\n> @bollwyvl https://github.com/bollwyvl the thread tracking this:\n> jupyter/jupyter_client#51\n> https://github.com/jupyter/jupyter_client/issues/51\n> \n> It's my fault there hasn't been more progress on this recently. I was\n> working on it during the summer, and I've gotten completely slammed this\n> semester. Taking a class, applying to PhDs, trying to get a paper finished,\n> and writing my Master's thesis all in one semester will do that, I guess.\n> \n> I still plan to get this shipped, but at this point I don't see myself\n> being able to work on it until after I turn in my thesis at the end of\n> January. If someone else wants to pick it up and finish it in the meantime,\n> that would be very welcome.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/jupyter/notebook/issues/99#issuecomment-157798983.\n","Can you run with `--debug` to see if there's any more relevant information about what it's trying to start?\n Absolutely. And here it is !\n\n```\nmac95470:notebooks j35$ jupyter notebook --debug\n[D 21:54:58.865 NotebookApp] Config changed:\n[D 21:54:58.865 NotebookApp] {'NotebookApp': {'log_level': 10}}\n[D 21:54:58.866 NotebookApp] Searching ['/Users/j35/git/notebooks', '/Users/j35/.jupyter', '/Users/j35/anaconda/etc/jupyter', '/usr/local/etc/jupyter', '/etc/jupyter'] for config files\n[D 21:54:58.866 NotebookApp] Looking for jupyter_config in /etc/jupyter\n[D 21:54:58.866 NotebookApp] Looking for jupyter_config in /usr/local/etc/jupyter\n[D 21:54:58.867 NotebookApp] Looking for jupyter_config in /Users/j35/anaconda/etc/jupyter\n[D 21:54:58.867 NotebookApp] Looking for jupyter_config in /Users/j35/.jupyter\n[D 21:54:58.867 NotebookApp] Looking for jupyter_config in /Users/j35/git/notebooks\n[D 21:54:58.867 NotebookApp] Looking for jupyter_notebook_config in /etc/jupyter\n[D 21:54:58.867 NotebookApp] Looking for jupyter_notebook_config in /usr/local/etc/jupyter\n[D 21:54:58.868 NotebookApp] Looking for jupyter_notebook_config in /Users/j35/anaconda/etc/jupyter\n[D 21:54:58.868 NotebookApp] Looking for jupyter_notebook_config in /Users/j35/.jupyter\n[D 21:54:58.868 NotebookApp] Looking for jupyter_notebook_config in /Users/j35/git/notebooks\n[D 21:54:58.868 NotebookApp] Config changed:\n[D 21:54:58.869 NotebookApp] {'NotebookApp': {'log_level': 10}}\n[I 21:54:59.365 NotebookApp] The port 8888 is already in use, trying another random port.\n[I 21:54:59.366 NotebookApp] The port 8889 is already in use, trying another random port.\n[I 21:54:59.376 NotebookApp] Serving notebooks from local directory: /Users/j35/git/notebooks\n[I 21:54:59.376 NotebookApp] 0 active kernels\n[I 21:54:59.376 NotebookApp] The Jupyter Notebook is running at: http://localhost:8890/\n[I 21:54:59.376 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[D 21:54:59.722 NotebookApp] Using contents: services/contents\n[D 21:54:59.783 NotebookApp] 200 GET /tree (::1) 63.05ms\n[D 21:54:59.799 NotebookApp] 200 GET /static/style/style.min.css?v=807166c81ded9672f91872a576572dcd (::1) 7.88ms\n[D 21:54:59.800 NotebookApp] 200 GET /custom/custom.css (::1) 1.05ms\n[D 21:54:59.801 NotebookApp] 200 GET /static/components/es6-promise/promise.min.js?v=f004a16cb856e0ff11781d01ec5ca8fe (::1) 0.56ms\n[D 21:54:59.802 NotebookApp] 200 GET /static/components/requirejs/require.js?v=6da8be361b9ee26c5e721e76c6d4afce (::1) 0.60ms\n[D 21:54:59.805 NotebookApp] 200 GET /static/components/jquery-ui/themes/smoothness/jquery-ui.min.css?v=9b2c8d3489227115310662a343fce11c (::1) 0.81ms\n[D 21:54:59.806 NotebookApp] 200 GET /static/components/jquery-typeahead/dist/jquery.typeahead.min.css?v=7afb461de36accb1aa133a1710f5bc56 (::1) 0.58ms\n[D 21:54:59.812 NotebookApp] 200 GET /static/base/images/logo.png?v=7c4597ba713d804995e8f8dad448a397 (::1) 0.92ms\n[D 21:54:59.814 NotebookApp] 200 GET /static/tree/js/main.min.js?v=cee9d5ded70fc8733bb888581c22f633 (::1) 11.98ms\n[D 21:55:00.041 NotebookApp] 200 GET /static/services/contents.js?v=20160124215458 (::1) 1.11ms\n[D 21:55:00.046 NotebookApp] 200 GET /custom/custom.js?v=20160124215458 (::1) 1.01ms\n[D 21:55:00.055 NotebookApp] 200 GET /static/base/images/favicon.ico?v=30780f272ab4aac64aa073a841546240 (::1) 0.58ms\n[D 21:55:00.070 NotebookApp] 200 GET /api/config/tree?_=1453690499916 (::1) 0.73ms\n[D 21:55:00.071 NotebookApp] 200 GET /api/config/common?_=1453690499917 (::1) 0.68ms\n[D 21:55:00.076 NotebookApp] 200 GET /api/terminals?_=1453690499918 (::1) 0.61ms\n[D 21:55:00.081 NotebookApp] Native kernel (python3) available from /Users/j35/anaconda/lib/python3.4/site-packages/ipykernel/resources\n[D 21:55:00.081 NotebookApp] Native kernel (python3) available from /Users/j35/anaconda/lib/python3.4/site-packages/ipykernel/resources\n[D 21:55:00.083 NotebookApp] 200 GET /api/kernelspecs (::1) 4.97ms\n[D 21:55:00.084 NotebookApp] 200 GET /api/terminals?_=1453690499920 (::1) 0.54ms\n[D 21:55:00.086 NotebookApp] 200 GET /static/components/font-awesome/fonts/fontawesome-webfont.woff?v=4.2.0 (::1) 1.37ms\n[D 21:55:00.088 NotebookApp] 200 GET /api/sessions?_=1453690499919 (::1) 1.23ms\n[D 21:55:00.151 NotebookApp] 200 GET /api/contents?type=directory&_=1453690499921 (::1) 12.64ms\n[D 21:55:04.139 NotebookApp] Using contents: services/contents\n[D 21:55:04.140 NotebookApp] 200 GET /tree/python_101 (::1) 1.72ms\n[D 21:55:04.149 NotebookApp] 304 GET /custom/custom.css (::1) 0.67ms\n[D 21:55:04.325 NotebookApp] 304 GET /custom/custom.js?v=20160124215458 (::1) 0.66ms\n[D 21:55:04.332 NotebookApp] 200 GET /api/config/tree?_=1453690504215 (::1) 0.68ms\n[D 21:55:04.333 NotebookApp] 200 GET /api/config/common?_=1453690504216 (::1) 0.63ms\n[D 21:55:04.338 NotebookApp] 200 GET /api/terminals?_=1453690504217 (::1) 0.63ms\n[D 21:55:04.340 NotebookApp] Native kernel (python3) available from /Users/j35/anaconda/lib/python3.4/site-packages/ipykernel/resources\n[D 21:55:04.340 NotebookApp] Native kernel (python3) available from /Users/j35/anaconda/lib/python3.4/site-packages/ipykernel/resources\n[D 21:55:04.341 NotebookApp] 304 GET /api/kernelspecs (::1) 1.26ms\n[D 21:55:04.342 NotebookApp] 200 GET /api/terminals?_=1453690504219 (::1) 0.58ms\n[D 21:55:04.343 NotebookApp] 200 GET /api/sessions?_=1453690504218 (::1) 0.51ms\n[D 21:55:04.362 NotebookApp] 200 GET /api/contents/python_101?type=directory&_=1453690504220 (::1) 9.88ms\n[D 21:55:05.893 NotebookApp] Using contents: services/contents\n[D 21:55:05.894 NotebookApp] 200 GET /tree/python_101/functions (::1) 1.42ms\n[D 21:55:05.901 NotebookApp] 304 GET /custom/custom.css (::1) 0.58ms\n[D 21:55:06.037 NotebookApp] 304 GET /custom/custom.js?v=20160124215458 (::1) 0.69ms\n[D 21:55:06.048 NotebookApp] 200 GET /api/config/tree?_=1453690505959 (::1) 0.67ms\n[D 21:55:06.049 NotebookApp] 200 GET /api/config/common?_=1453690505960 (::1) 0.58ms\n[D 21:55:06.056 NotebookApp] 200 GET /api/terminals?_=1453690505961 (::1) 0.59ms\n[D 21:55:06.058 NotebookApp] Native kernel (python3) available from /Users/j35/anaconda/lib/python3.4/site-packages/ipykernel/resources\n[D 21:55:06.058 NotebookApp] Native kernel (python3) available from /Users/j35/anaconda/lib/python3.4/site-packages/ipykernel/resources\n[D 21:55:06.059 NotebookApp] 304 GET /api/kernelspecs (::1) 1.30ms\n[D 21:55:06.061 NotebookApp] 200 GET /api/sessions?_=1453690505962 (::1) 1.13ms\n[D 21:55:06.062 NotebookApp] 200 GET /api/terminals?_=1453690505963 (::1) 1.02ms\n[D 21:55:06.071 NotebookApp] 200 GET /api/contents/python_101/functions?type=directory&_=1453690505964 (::1) 2.55ms\n[D 21:55:08.290 NotebookApp] Using contents: services/contents\n[D 21:55:08.322 NotebookApp] 200 GET /notebooks/python_101/functions/keyword_argument.ipynb (::1) 33.20ms\n[D 21:55:08.332 NotebookApp] 200 GET /static/components/MathJax/MathJax.js?config=TeX-AMS_HTML-full,Safe&delayStartupUntil=configured (::1) 2.62ms\n[D 21:55:08.333 NotebookApp] 200 GET /static/components/bootstrap-tour/build/css/bootstrap-tour.min.css?v=d0b3c2fce6056a2ddd5a4513762a94c4 (::1) 0.89ms\n[D 21:55:08.334 NotebookApp] 304 GET /custom/custom.css (::1) 0.57ms\n[D 21:55:08.335 NotebookApp] 200 GET /static/components/codemirror/lib/codemirror.css?v=2336fb49f85e9fa887ada9af35223dce (::1) 0.70ms\n[D 21:55:08.336 NotebookApp] 200 GET /static/notebook/css/override.css?v=e6f18013b8771987812e992b38ec3318 (::1) 0.92ms\n[D 21:55:08.340 NotebookApp] 200 GET /static/components/text-encoding/lib/encoding.js?v=d5bb0fc9ffeff7d98a69bb83daa51052 (::1) 1.06ms\n[D 21:55:08.354 NotebookApp] 200 GET /static/notebook/js/main.min.js?v=5583f76ed439d168d24e1b201697c328 (::1) 16.59ms\n[D 21:55:08.365 NotebookApp] 200 GET /static/components/MathJax/config/TeX-AMS_HTML-full.js?rev=2.5.3 (::1) 2.63ms\n[D 21:55:08.525 NotebookApp] 200 GET /static/components/MathJax/config/Safe.js?rev=2.5.3 (::1) 1.58ms\n[D 21:55:08.576 NotebookApp] 304 GET /custom/custom.js?v=20160124215458 (::1) 0.67ms\n[D 21:55:08.583 NotebookApp] 200 GET /api/config/notebook?_=1453690508464 (::1) 1.11ms\n[D 21:55:08.585 NotebookApp] 200 GET /api/config/common?_=1453690508465 (::1) 0.65ms\n[D 21:55:08.656 NotebookApp] Native kernel (python3) available from /Users/j35/anaconda/lib/python3.4/site-packages/ipykernel/resources\n[D 21:55:08.656 NotebookApp] Native kernel (python3) available from /Users/j35/anaconda/lib/python3.4/site-packages/ipykernel/resources\n[D 21:55:08.657 NotebookApp] 304 GET /api/kernelspecs (::1) 1.50ms\n[W 21:55:08.701 NotebookApp] Notebook python_101/functions/keyword_argument.ipynb is not trusted\n[D 21:55:08.713 NotebookApp] 200 GET /api/contents/python_101/functions/keyword_argument.ipynb?type=notebook&_=1453690508466 (::1) 40.79ms\n[D 21:55:08.715 NotebookApp] 200 GET /nbextensions/hello-scipy.js?v=20160124215458 (::1) 0.90ms\n[D 21:55:08.716 NotebookApp] 200 GET /nbextensions/widgets/notebook/js/extension.js?v=20160124215458 (::1) 0.91ms\n[D 21:55:08.718 NotebookApp] 200 GET /static/components/MathJax/jax/output/HTML-CSS/fonts/STIX-Web/fontdata.js?rev=2.5.3 (::1) 1.82ms\n[D 21:55:08.744 NotebookApp] 200 GET /static/components/MathJax/extensions/Safe.js?rev=2.5.3 (::1) 1.29ms\n[D 21:55:09.010 NotebookApp] Native kernel (python3) available from /Users/j35/anaconda/lib/python3.4/site-packages/ipykernel/resources\n[D 21:55:09.011 NotebookApp] Starting kernel: ['/Users/j35/anaconda/bin/python3', '-m', 'ipykernel', '-f', '/Users/j35/Library/Jupyter/runtime/kernel-63a1b2bc-fe1b-45ef-9571-ef302480e4ac.json']\n[D 21:55:09.017 NotebookApp] Connecting to: tcp://127.0.0.1:58443\n[I 21:55:09.019 NotebookApp] Kernel started: 63a1b2bc-fe1b-45ef-9571-ef302480e4ac\n[D 21:55:09.019 NotebookApp] Kernel args: {'kernel_name': 'python3', 'cwd': '/Users/j35/git/notebooks/python_101/functions'}\n[D 21:55:09.020 NotebookApp] 201 POST /api/sessions (::1) 31.60ms\n[D 21:55:09.022 NotebookApp] Native kernel (python3) available from /Users/j35/anaconda/lib/python3.4/site-packages/ipykernel/resources\n[D 21:55:09.023 NotebookApp] Serving kernel resource from: /Users/j35/anaconda/lib/python3.4/site-packages/ipykernel/resources\n[D 21:55:09.024 NotebookApp] 200 GET /kernelspecs/python3/logo-64x64.png (::1) 2.41ms\n[D 21:55:09.027 NotebookApp] 200 GET /api/contents/python_101/functions/keyword_argument.ipynb/checkpoints?_=1453690508467 (::1) 3.36ms\n[D 21:55:09.029 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/init.js?v=20160124215458 (::1) 1.16ms\n[D 21:55:09.031 NotebookApp] 200 GET /nbextensions/widgets/notebook/js/widgetarea.js?v=20160124215458 (::1) 1.21ms\n[D 21:55:09.067 NotebookApp] Initializing websocket connection /api/kernels/63a1b2bc-fe1b-45ef-9571-ef302480e4ac/channels\n[D 21:55:09.072 NotebookApp] Requesting kernel info from 63a1b2bc-fe1b-45ef-9571-ef302480e4ac\n[D 21:55:09.072 NotebookApp] Connecting to: tcp://127.0.0.1:58440\n[D 21:55:09.085 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/manager.js?v=20160124215458 (::1) 1.10ms\n[D 21:55:09.087 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_box.js?v=20160124215458 (::1) 1.41ms\n[D 21:55:09.090 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_button.js?v=20160124215458 (::1) 1.96ms\n[D 21:55:09.091 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_bool.js?v=20160124215458 (::1) 1.19ms\n[D 21:55:09.093 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_link.js?v=20160124215458 (::1) 1.26ms\n[D 21:55:09.095 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget.js?v=20160124215458 (::1) 1.44ms\n[D 21:55:09.097 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_float.js?v=20160124215458 (::1) 1.42ms\n[D 21:55:09.099 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_image.js?v=20160124215458 (::1) 0.89ms\n[D 21:55:09.100 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_int.js?v=20160124215458 (::1) 1.37ms\n[D 21:55:09.102 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_color.js?v=20160124215458 (::1) 1.15ms\n[D 21:55:09.104 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_output.js?v=20160124215458 (::1) 1.28ms\n[D 21:55:09.106 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_selection.js?v=20160124215458 (::1) 1.33ms\n[D 21:55:09.107 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_string.js?v=20160124215458 (::1) 1.21ms\n[D 21:55:09.111 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_controller.js?v=20160124215458 (::1) 2.14ms\n[D 21:55:09.113 NotebookApp] 200 GET /static/components/backbone/backbone-min.js?v=20160124215458 (::1) 1.76ms\n[D 21:55:09.116 NotebookApp] 200 GET /nbextensions/widgets/widgets/js/widget_selectioncontainer.js?v=20160124215458 (::1) 1.34ms\n[D 21:55:09.147 NotebookApp] 200 GET /nbextensions/widgets/widgets/css/widgets.min.css (::1) 2.95ms\n[I 21:55:12.023 NotebookApp] KernelRestarter: restarting kernel (1/5)\n[D 21:55:12.023 NotebookApp] Starting kernel: ['/Users/j35/anaconda/bin/python3', '-m', 'ipykernel', '-f', '/Users/j35/Library/Jupyter/runtime/kernel-63a1b2bc-fe1b-45ef-9571-ef302480e4ac.json']\n[D 21:55:12.029 NotebookApp] Connecting to: tcp://127.0.0.1:58443\n[I 21:55:15.033 NotebookApp] KernelRestarter: restarting kernel (2/5)\n[D 21:55:15.034 NotebookApp] Starting kernel: ['/Users/j35/anaconda/bin/python3', '-m', 'ipykernel', '-f', '/Users/j35/Library/Jupyter/runtime/kernel-63a1b2bc-fe1b-45ef-9571-ef302480e4ac.json']\n[D 21:55:15.037 NotebookApp] Connecting to: tcp://127.0.0.1:58443\n[I 21:55:18.037 NotebookApp] KernelRestarter: restarting kernel (3/5)\n[D 21:55:18.038 NotebookApp] Starting kernel: ['/Users/j35/anaconda/bin/python3', '-m', 'ipykernel', '-f', '/Users/j35/Library/Jupyter/runtime/kernel-63a1b2bc-fe1b-45ef-9571-ef302480e4ac.json']\n[D 21:55:18.042 NotebookApp] Connecting to: tcp://127.0.0.1:58443\n[W 21:55:19.073 NotebookApp] Timeout waiting for kernel_info reply from 63a1b2bc-fe1b-45ef-9571-ef302480e4ac\n[D 21:55:19.074 NotebookApp] Opening websocket /api/kernels/63a1b2bc-fe1b-45ef-9571-ef302480e4ac/channels\n[D 21:55:19.075 NotebookApp] Connecting to: tcp://127.0.0.1:58440\n[D 21:55:19.076 NotebookApp] Connecting to: tcp://127.0.0.1:58441\n[D 21:55:19.076 NotebookApp] Connecting to: tcp://127.0.0.1:58442\n[I 21:55:21.042 NotebookApp] KernelRestarter: restarting kernel (4/5)\nWARNING:root:kernel 63a1b2bc-fe1b-45ef-9571-ef302480e4ac restarted\n[D 21:55:21.043 NotebookApp] Starting kernel: ['/Users/j35/anaconda/bin/python3', '-m', 'ipykernel', '-f', '/Users/j35/Library/Jupyter/runtime/kernel-63a1b2bc-fe1b-45ef-9571-ef302480e4ac.json']\n[D 21:55:21.048 NotebookApp] Connecting to: tcp://127.0.0.1:58443\nAbort trap: 6\nmac95470:notebooks j35$\n```\n So the command it's trying is:\n\n```\n/Users/j35/anaconda/bin/python3 -m ipykernel  -f ...\n```\n\nDoes that Python executable file still exist? And can you run `/Users/j35/anaconda/bin/python3 -m ipykernel`?\n It does exist and running the command give me this\n\n```\nNOTE: When using the `ipython kernel` entry point, Ctrl-C will not work.\n\nTo exit, you will have to explicitly quit this process, by either sending\n\"quit\" from a client, or using Ctrl-\\ in UNIX-like environments.\n\nTo read more about this, see https://github.com/ipython/ipython/issues/2049\n\n\nTo connect another client to this kernel, use:\n    --existing kernel-75982.json\nAbort trap: 6\n```\n\nI have another Mac (same OS) for which the jupyter notebook using python 3 works. Looks like there is something wrong with this version of python 3. And because the problem is only for me, and for this particular computer, I will close this ticket. \n\nThank you for prompt help. \n From information I just found, \"Abort Trap 6\" seems to be something similar to a segfault. The only thing I can suggest to try is reinstalling stuff.\n Reinstalling python 3 + jupyter 4.1 did the trick. Thanks for your help again.\n I see this on new installs of Anaconda on AWS instances as well.\r\nPython 3.5.2 and Jupyter4.2.0\r\nI will try to get a debug log.","Hum, likely hard as it is actually just an normal HTML element. We'll try to consider that for the current rewriting we are doing.\n\nPing @blink1073 \n The current example in jupyter-js-filebrowser allows you to use `C-n` and `C-p` to move between items, so it is definitely possible to do this with JupyterLab.\n\nhttps://github.com/jupyter/jupyter-js-filebrowser/blob/master/example/src/index.ts#L78\n Closing here, as something note feasible in the current notebook, but doable in jupyterlab.\n","+1.\n\nCandidate for backport too.\n Neat find, +1\n I forget, where is the backport script?  I think it used to live in ipython/ipython/scripts, which lead me to look in jupyter/notebook/scripts, but I did not see it there.  Does it live somewhere else?\n ah - https://github.com/ipython/ipython/tree/master/tools\n https://github.com/ipython/ipython/pull/9170 :)\n Now...  we wait to run the script and run it at once to do back ports in batch, right?\n","I've opened ~50 notebooks without any trouble, so I'm going to call this one probably fixed. Feel free to reopen if you can still see this.\n","If I recall correctly, execution requests aren't lost because the kernel connection isn't established yet. Instead, they are never produced.\n OK, it remains an issue from a UX perspective. We should probably avoid giving the impression that cells are run.\n Yes, it looks like this line is the one ignoring the execution: https://github.com/jupyter/notebook/blob/527538839beb69d5ed1cbf4a3a43e352ea3ca119/notebook/static/notebook/js/codecell.js#L308\n Here are a couple of options:\n1. Queue up the pending cells at the notebook level and run them when the kernel is set. This doesn't prevent the cells from being modified before they are run, though.\n2. Make a fake \"kernel\" that just queues up execution requests, and set that to the cells when they are first created. This has the advantage that the cell logic identifying it's running, etc., still works as-is.\n3. Throw an error when trying to run a cell and a kernel is not active.\n\nI think a combination of (2) and (3) would work well.  The initial dummy kernel optimistically assumes there will eventually be a good connection, and just queues up execution requests.  However, if there is an error with the kernel, we throw an error to the user when trying to execute the cells.\n @SylvainCorlay, @minrk, comments on the above?\n One question: when we delay execution, should we execute the original executed contents of the cell, or the current contents of the cell?\n Okay, I think I have a minimal solution at #1002, but it's one that makes the notebook rely a bit on the CodeCell behavior, so it smells a bit, but maybe not more than other notebook code.\n Should this be closed by what Jason implemented in #1002, or is there more to do?\n Just lost track. This is fixed.\n","Logging does use normal [python logging module](https://docs.python.org/3/library/logging.html), any documentation there should work out of the box. See also [Logging Howto](https://docs.python.org/3/howto/logging.html)\n Hi @Anne623 @Carreau,\n\nClosing this issue as it's been inactive for several months. If there are still more questions, please feel free to open a new issue at the [jupyter/help repo](https://github.com/jupyter/help) or reopen this issue.\n\nThanks! :sunflower:\n","Beaten to the punch by #992, I'm afraid. ;-)\n Bonus: I think the patches might be character-identical. Clearly on the right track!\n Heh, exactly my thoughts!\n","It seems that `div#notebook` ends up as the activeElement when you do the browser search. I'm not sure if/how we can focus the right element, but it is certainly annoying that the cell loses focus when you search.\n\nThere is find/replace, but it doesn't support navigating to the found items. We should certainly fix at least one of these things.\n","This makes sense to me, but we're relying on a Unix-y idiom. Have we ensured that whatever it does on Windows produces a sane result? Do we need another check for directory accessibility on Windows?\n I tested that it didn't fail on Windows, at least, but after a little more digging I discovered that it just always returns True on Windows, no matter what. Fixed to use stat on Windows, which fails with PermissionDenied on unreadable dirs.\n","@takluyver [commented](https://github.com/ipython/ipython/issues/9165#issuecomment-174610923)\n\nAre there any errors in the terminal where you started the notebook?\n @Gansgar [commented](https://github.com/ipython/ipython/issues/9165#issuecomment-174612995)\n\nNo, that would be a really bug. It's just that thr index script (I think) gets stuck during trying of indexing 550'000 mostly png files (I estimate that that would happen with every type of file). I would include a methode before indexing, that goves back an error of to much files if a folder has more than x files. Or something like this. \n @takluyver [commented](https://github.com/ipython/ipython/issues/9165#issuecomment-174614463)\n\nI'm a bit puzzled that it falls over when a _subdirectory_ has lots of files - I thought we only looked at the contents of the current directory. And I'm not sure what the indexing script you're talking about is. Maybe something got added to the project while I was away from it for a few months.\n\nBy the way, the notebook is now in a separate repo - https://github.com/jupyter/notebook . No need to reopen this issue, but for future issues that's the right place.\n @takluyver [commented](https://github.com/ipython/ipython/issues/9165#issuecomment-174615936)\n\nSo I can reproduce problems (and I would kind of expect them) if I open the directory containing 50k files in the notebook interface. But you say you see problems even opening the parent directory? Or have I misunderstood?\n @Gansgar [commented](https://github.com/ipython/ipython/issues/9165#issuecomment-174616308)\n\nYes. It gets stuck by opening the parent directory\n @takluyver [commented](https://github.com/ipython/ipython/issues/9165#issuecomment-174618727)\n\nMaybe a browser is prefetching the link to the subdirectory. What browser are you using? Can you try running the notebook with the `--debug` flag, and see if there are any messages like:\n\n```\n200 GET /api/contents/A?type=directory...\n```\n @takluyver [commented](https://github.com/ipython/ipython/issues/9165#issuecomment-174618958)\n\nOr like\n\n```\n200 GET /tree/A ...\n```\n @Gansgar [commented](https://github.com/ipython/ipython/issues/9165#issuecomment-174623456)\n\nUsed Safari, Chrome,  Iceweasel. I can look more precise into the debug lines later. \n @takluyver [commented](https://github.com/ipython/ipython/issues/9165#issuecomment-175157757)\n\nShared folders in VMs are certainly slower, but I'm still mystified as to why it's happening when you're only browsing the parent directory of the ones with many files. Is it actually specific to when the subdirs have many files, or does it affect anything shared directory? If you start `ipython` in there and do `os.listdir('.')`, is it quick?\n\n@minrk @Carreau am I missing something about how the notebook server scans files?\n @Gansgar [commented](https://github.com/ipython/ipython/issues/9165#issuecomment-175161960)\n\nWorks smooth in every other directory. Even reading all this data into a 1.7gb big array in a iPython Notebook works without problem (is just slow). The thing that is actually more interesting is: It only crashes in Iceweasle. Clearly. Every other access after that is not working anymore on any browser. But I can access all those directories  without a problem, except a longer response time for once after that on Chrome or Safari before the crash with Iceweasle. \n @Gansgar [commented](https://github.com/ipython/ipython/issues/9165#issuecomment-175162079)\n\nIt looks like that a bug in the browser results into a crash of iPython\n @minrk [commented](https://github.com/ipython/ipython/issues/9165#issuecomment-175171726)\n\nI looked through, and I think we list directories in is_hidden as a check for readability. I'm not sure that makes sense to do, though.\n @minrk [commented](https://github.com/ipython/ipython/issues/9165#issuecomment-175172374)\n\njupyter/notebook#998 switches to execute access, which should be equivalent and much less expensive.\n This was fixed by jupyter/notebook#998\n"],"fill_color":["#2ca02c","#9edae5","#9edae5","#9edae5","#ffbb78","#8c564b","#c7c7c7","#8c564b","#c49c94","#ffbb78","#bcbd22","#aec7e8","#ffbb78","#8c564b","#8c564b","#c7c7c7","#c7c7c7","#ffbb78","#9edae5","#c7c7c7","#c7c7c7","#c7c7c7","#f7b6d2","#ff9896","#9edae5","#ffbb78","#98df8a","#9edae5","#aec7e8","#98df8a","#c5b0d5","#1f77b4","#98df8a","#c49c94","#dbdb8d","#c7c7c7","#dbdb8d","#dbdb8d","#8c564b","#ffbb78","#c7c7c7","#c7c7c7","#9edae5","#ffbb78","#1f77b4","#8c564b","#98df8a","#9edae5","#c5b0d5","#c5b0d5","#aec7e8","#c5b0d5","#9edae5","#ffbb78","#ffbb78","#dbdb8d","#c5b0d5","#aec7e8","#9edae5","#ffbb78","#98df8a","#ffbb78","#c5b0d5","#1f77b4","#bcbd22","#1f77b4","#1f77b4","#bcbd22","#ffbb78","#e377c2","#dbdb8d","#c5b0d5","#ffbb78","#2ca02c","#c49c94","#bcbd22","#c5b0d5","#ff7f0e","#c7c7c7","#e377c2","#c7c7c7","#9467bd","#c5b0d5","#c5b0d5","#c5b0d5","#1f77b4","#1f77b4","#ffbb78","#e377c2","#9edae5","#ffbb78","#bcbd22","#dbdb8d","#ffbb78","#9edae5","#ffbb78","#aec7e8","#e377c2","#ff9896","#9467bd","#bcbd22","#8c564b","#9edae5","#8c564b","#9edae5","#1f77b4","#98df8a","#2ca02c","#9467bd","#f7b6d2","#f7b6d2","#e377c2","#1f77b4","#ffbb78","#e377c2","#17becf","#9edae5","#ffbb78","#dbdb8d","#c7c7c7","#f7b6d2","#ffbb78","#dbdb8d","#ffbb78","#dbdb8d","#c5b0d5","#1f77b4","#9edae5","#d62728","#9edae5","#7f7f7f","#8c564b","#c7c7c7","#c49c94","#17becf","#c7c7c7","#c7c7c7","#2ca02c","#c5b0d5","#9edae5","#c5b0d5","#2ca02c","#dbdb8d","#aec7e8","#d62728","#ff7f0e","#c7c7c7","#c49c94","#ffbb78","#c49c94","#c5b0d5","#c5b0d5","#bcbd22","#c7c7c7","#98df8a","#ff9896","#ffbb78","#c49c94","#9edae5","#ff9896","#e377c2","#ffbb78","#17becf","#bcbd22","#ffbb78","#ffbb78","#ff9896","#f7b6d2","#9edae5","#bcbd22","#17becf","#1f77b4","#9edae5","#aec7e8","#9edae5","#c49c94","#ffbb78","#9467bd","#e377c2","#aec7e8","#dbdb8d","#dbdb8d","#9edae5","#bcbd22","#ffbb78","#9edae5","#9edae5","#9edae5","#9edae5","#bcbd22","#8c564b","#c7c7c7","#1f77b4","#ff9896","#e377c2","#9edae5","#ffbb78","#c5b0d5","#1f77b4","#ffbb78","#ffbb78","#98df8a","#98df8a","#aec7e8","#e377c2","#c5b0d5","#ffbb78","#ff9896","#c7c7c7","#c7c7c7","#ffbb78","#c5b0d5","#f7b6d2","#ff9896","#d62728","#8c564b","#c5b0d5","#1f77b4","#c49c94","#aec7e8","#c5b0d5","#ff7f0e","#ffbb78","#9edae5","#ffbb78","#ff7f0e","#9edae5","#f7b6d2","#1f77b4","#1f77b4","#2ca02c","#dbdb8d","#17becf","#c5b0d5","#bcbd22","#c49c94","#aec7e8","#1f77b4","#c49c94","#ffbb78","#bcbd22","#2ca02c","#1f77b4","#9edae5","#ffbb78","#c5b0d5","#8c564b","#8c564b","#8c564b","#ffbb78","#8c564b","#e377c2","#ffbb78","#aec7e8","#c5b0d5","#c7c7c7","#c7c7c7","#ffbb78","#ffbb78","#2ca02c","#c7c7c7","#c7c7c7","#8c564b","#c7c7c7","#17becf","#c7c7c7","#c5b0d5","#8c564b","#9edae5","#8c564b","#8c564b","#c5b0d5","#c5b0d5","#c5b0d5","#9edae5","#aec7e8","#c49c94","#dbdb8d","#bcbd22","#ffbb78","#ffbb78","#1f77b4","#bcbd22","#c5b0d5","#1f77b4","#ffbb78","#ff9896","#7f7f7f","#dbdb8d","#e377c2","#bcbd22","#bcbd22","#2ca02c","#1f77b4","#9edae5","#c7c7c7","#9edae5","#c49c94","#9edae5","#98df8a","#f7b6d2","#c7c7c7","#8c564b","#c5b0d5","#17becf","#c49c94","#1f77b4","#dbdb8d","#d62728","#2ca02c","#1f77b4","#f7b6d2","#e377c2","#ffbb78","#ff9896","#98df8a","#c5b0d5","#aec7e8","#ffbb78","#ffbb78","#c5b0d5","#ff9896","#c5b0d5","#c5b0d5","#c5b0d5","#ffbb78","#98df8a","#1f77b4","#d62728","#c7c7c7","#8c564b","#9edae5","#aec7e8","#c5b0d5","#9467bd","#1f77b4","#ff9896","#1f77b4","#c7c7c7","#1f77b4","#c5b0d5","#bcbd22","#aec7e8","#e377c2","#17becf","#98df8a","#c5b0d5","#1f77b4","#ff9896","#9edae5","#c5b0d5","#c5b0d5","#1f77b4","#aec7e8","#9edae5","#ffbb78","#98df8a","#9edae5","#c7c7c7","#c7c7c7","#c7c7c7","#1f77b4","#9edae5","#ffbb78","#ff7f0e","#bcbd22","#98df8a","#1f77b4","#9edae5","#98df8a","#c7c7c7","#dbdb8d","#c5b0d5","#c49c94","#9edae5","#c7c7c7","#98df8a","#d62728","#ffbb78","#7f7f7f","#ffbb78","#2ca02c","#c49c94","#c7c7c7","#17becf","#f7b6d2","#9edae5","#9edae5","#c7c7c7","#1f77b4","#1f77b4","#1f77b4","#ffbb78","#aec7e8","#ffbb78","#1f77b4","#9467bd","#c49c94","#98df8a","#1f77b4","#f7b6d2","#1f77b4","#9edae5","#1f77b4","#ffbb78","#c7c7c7","#aec7e8","#1f77b4","#9edae5","#9edae5","#9edae5","#1f77b4","#9edae5","#ffbb78","#ffbb78","#ffbb78","#1f77b4","#9edae5","#9edae5","#c5b0d5","#d62728","#8c564b","#c7c7c7","#9edae5","#9edae5","#c7c7c7","#c49c94","#ffbb78","#c5b0d5","#ff9896","#ffbb78","#9edae5","#c5b0d5","#98df8a","#ffbb78","#f7b6d2","#1f77b4","#8c564b","#c7c7c7","#98df8a","#c7c7c7","#d62728","#bcbd22","#8c564b","#c7c7c7","#1f77b4","#ffbb78","#9edae5","#aec7e8","#9edae5","#ffbb78","#c7c7c7","#9467bd","#aec7e8","#c7c7c7","#aec7e8","#c7c7c7","#dbdb8d","#ff9896","#1f77b4","#c7c7c7","#1f77b4","#aec7e8","#aec7e8","#9edae5","#1f77b4","#ffbb78","#c7c7c7","#bcbd22","#bcbd22","#c7c7c7","#98df8a","#aec7e8","#bcbd22","#c49c94","#ff9896","#9edae5","#17becf","#9edae5","#ffbb78","#9edae5","#c7c7c7","#c49c94","#9edae5","#aec7e8","#9edae5","#c7c7c7","#aec7e8","#ffbb78","#bcbd22","#9edae5","#98df8a","#9467bd","#ff7f0e","#ffbb78","#8c564b","#8c564b","#ffbb78","#8c564b","#ffbb78","#c7c7c7","#9edae5","#9edae5","#ffbb78","#9edae5","#ffbb78","#c5b0d5","#f7b6d2","#98df8a","#1f77b4","#1f77b4","#c7c7c7","#ffbb78","#c49c94","#c7c7c7","#bcbd22","#c5b0d5","#e377c2","#c5b0d5","#9edae5","#e377c2","#c49c94","#aec7e8","#1f77b4","#98df8a","#9edae5","#ffbb78","#bcbd22","#e377c2","#e377c2","#9edae5","#ff9896","#ffbb78","#aec7e8","#aec7e8","#dbdb8d","#ffbb78","#ff7f0e","#aec7e8","#aec7e8","#e377c2","#9467bd","#c7c7c7","#17becf","#ff9896","#c7c7c7","#98df8a","#2ca02c","#98df8a","#c5b0d5","#9467bd","#1f77b4","#ff7f0e","#98df8a","#9edae5","#ffbb78","#c7c7c7","#ffbb78","#9467bd","#ffbb78","#ffbb78","#c5b0d5","#ffbb78","#dbdb8d","#9467bd","#ffbb78","#9edae5","#f7b6d2","#2ca02c","#1f77b4","#c5b0d5","#9edae5","#c49c94","#c49c94","#ffbb78","#dbdb8d","#c7c7c7","#c7c7c7","#aec7e8","#8c564b","#9edae5","#ffbb78","#e377c2","#8c564b","#c49c94","#bcbd22","#9467bd","#ffbb78","#c7c7c7","#ffbb78","#98df8a","#2ca02c","#c7c7c7","#9edae5","#c5b0d5","#bcbd22","#c5b0d5","#f7b6d2","#17becf","#f7b6d2","#98df8a","#1f77b4","#c49c94","#ffbb78","#2ca02c","#bcbd22","#8c564b","#ffbb78","#e377c2","#ffbb78","#c5b0d5","#1f77b4","#9edae5","#1f77b4","#bcbd22","#ffbb78","#dbdb8d","#c7c7c7","#ffbb78","#8c564b","#9edae5","#d62728","#17becf","#1f77b4","#9467bd","#ffbb78","#9edae5","#1f77b4","#d62728","#aec7e8","#c5b0d5","#1f77b4","#1f77b4","#ffbb78","#1f77b4","#9edae5","#9edae5","#ffbb78","#98df8a","#c7c7c7","#98df8a","#2ca02c","#c7c7c7","#1f77b4","#c49c94","#2ca02c","#ff9896","#9edae5","#c7c7c7","#c49c94","#c7c7c7","#9edae5","#9edae5","#9edae5","#c7c7c7","#c7c7c7","#1f77b4","#c7c7c7","#c5b0d5","#bcbd22","#bcbd22","#aec7e8","#8c564b","#1f77b4","#2ca02c","#17becf","#98df8a","#c7c7c7","#bcbd22","#9edae5","#1f77b4","#dbdb8d","#c7c7c7","#ff7f0e","#c5b0d5","#c5b0d5","#dbdb8d","#9edae5","#9edae5","#c5b0d5","#c7c7c7","#d62728","#c5b0d5","#aec7e8","#2ca02c","#c7c7c7","#ffbb78","#dbdb8d","#ffbb78","#ffbb78","#8c564b","#ff9896","#ffbb78","#d62728","#9467bd","#c7c7c7","#c5b0d5","#ffbb78","#c7c7c7","#aec7e8","#bcbd22","#98df8a","#9edae5","#9467bd","#c7c7c7","#c5b0d5","#9edae5","#d62728","#f7b6d2","#f7b6d2","#ffbb78","#ffbb78","#c7c7c7","#d62728","#c5b0d5","#c5b0d5","#bcbd22","#9edae5","#aec7e8","#d62728","#ffbb78","#ff9896","#1f77b4","#ffbb78","#dbdb8d","#c5b0d5","#aec7e8","#ffbb78","#9edae5","#c5b0d5","#c5b0d5","#c5b0d5","#98df8a","#ff9896","#c5b0d5","#dbdb8d","#ff9896","#c5b0d5","#ff9896","#c49c94","#9edae5","#9edae5","#e377c2","#f7b6d2","#d62728","#ff9896","#c5b0d5","#f7b6d2","#ffbb78","#8c564b","#9edae5","#e377c2","#ff9896","#1f77b4","#8c564b","#c7c7c7","#d62728","#dbdb8d","#c7c7c7","#ffbb78","#1f77b4","#ff9896","#ffbb78","#c5b0d5","#c5b0d5","#c7c7c7","#9467bd","#aec7e8","#9edae5","#1f77b4","#c5b0d5","#9467bd","#f7b6d2","#ff9896","#ffbb78","#c7c7c7","#9edae5","#98df8a","#ffbb78","#c49c94","#ffbb78","#9edae5","#9edae5","#98df8a","#c49c94","#c49c94","#7f7f7f","#d62728","#c7c7c7","#9edae5","#c49c94","#c5b0d5","#bcbd22","#9edae5","#ffbb78","#98df8a","#9edae5","#c5b0d5","#aec7e8","#1f77b4","#ffbb78","#9edae5","#c7c7c7","#c5b0d5","#ffbb78","#f7b6d2","#ffbb78","#98df8a","#ff9896","#c7c7c7","#9edae5","#2ca02c","#17becf","#dbdb8d","#c49c94","#ff9896","#bcbd22","#2ca02c","#9edae5","#bcbd22","#aec7e8","#dbdb8d","#c7c7c7","#9edae5","#ff9896","#ff9896","#c49c94","#c49c94","#c5b0d5","#98df8a","#2ca02c","#9edae5","#c49c94","#c49c94","#d62728","#c5b0d5","#9edae5","#c49c94","#c5b0d5","#9edae5","#1f77b4","#aec7e8","#c7c7c7","#ff9896","#d62728","#c7c7c7","#d62728","#ffbb78","#e377c2","#c49c94","#ffbb78","#ffbb78","#9edae5","#aec7e8","#ff9896","#bcbd22","#9edae5","#9edae5","#ffbb78","#aec7e8","#c49c94","#1f77b4","#c5b0d5","#c49c94","#c7c7c7","#8c564b","#c5b0d5","#ffbb78","#1f77b4","#c5b0d5","#f7b6d2","#c5b0d5","#9edae5","#c5b0d5","#7f7f7f","#ffbb78","#aec7e8","#c5b0d5","#c5b0d5","#aec7e8","#c5b0d5","#bcbd22","#c5b0d5","#aec7e8","#c49c94","#ffbb78","#ffbb78","#c49c94","#c5b0d5","#dbdb8d","#ffbb78","#9467bd","#ff9896","#ffbb78","#bcbd22","#c7c7c7","#ffbb78","#aec7e8","#8c564b","#98df8a","#c5b0d5","#bcbd22","#c7c7c7","#9edae5","#aec7e8","#9edae5","#9edae5","#9edae5","#c49c94","#ff9896","#9edae5","#17becf","#c7c7c7","#9edae5","#dbdb8d","#9edae5","#ffbb78","#dbdb8d","#c5b0d5","#9467bd","#c49c94","#1f77b4","#c5b0d5","#c5b0d5","#dbdb8d","#9edae5","#9edae5","#ff9896","#c49c94","#9467bd","#1f77b4","#aec7e8","#ffbb78","#9edae5","#9edae5","#c5b0d5","#1f77b4","#ffbb78","#aec7e8","#dbdb8d","#ffbb78","#ff9896","#c49c94","#9467bd","#c7c7c7","#c7c7c7","#ffbb78","#ffbb78","#c49c94","#c5b0d5","#aec7e8","#c7c7c7","#ffbb78","#c5b0d5","#ff9896","#9edae5","#7f7f7f","#c7c7c7","#c5b0d5","#aec7e8","#1f77b4","#9edae5","#ffbb78","#c5b0d5","#bcbd22","#c5b0d5","#c7c7c7","#ff9896","#dbdb8d","#ff9896","#9edae5","#9edae5","#98df8a","#ffbb78","#9edae5","#c49c94","#bcbd22","#ffbb78","#aec7e8","#c5b0d5","#c7c7c7","#9edae5","#f7b6d2","#aec7e8","#ff9896","#c49c94","#ff9896","#9edae5","#aec7e8","#c7c7c7","#c7c7c7","#c5b0d5","#98df8a","#c49c94","#c7c7c7","#aec7e8","#98df8a","#9edae5","#ff9896","#c5b0d5","#9edae5","#ffbb78","#9edae5","#c7c7c7","#ffbb78","#9edae5","#bcbd22","#c5b0d5","#ffbb78","#c49c94","#ffbb78","#9467bd","#c5b0d5","#9edae5","#1f77b4","#c5b0d5","#98df8a","#9edae5","#c7c7c7","#9edae5","#c5b0d5","#c49c94","#1f77b4","#9edae5","#aec7e8","#e377c2","#ffbb78","#ffbb78","#c7c7c7","#17becf","#c7c7c7","#9467bd","#8c564b","#bcbd22","#bcbd22","#8c564b","#1f77b4","#d62728","#bcbd22","#bcbd22","#9edae5","#9edae5","#9edae5","#9467bd","#9edae5","#2ca02c","#ffbb78","#ff9896","#1f77b4","#9edae5","#1f77b4","#c5b0d5","#9467bd","#9467bd","#dbdb8d","#c7c7c7","#9467bd","#9edae5","#9edae5","#17becf","#ffbb78","#2ca02c","#ffbb78","#2ca02c","#c5b0d5","#98df8a","#ffbb78","#9edae5","#1f77b4","#8c564b","#c7c7c7","#9467bd","#f7b6d2","#9edae5","#c49c94","#c7c7c7","#ffbb78","#c7c7c7","#aec7e8","#c49c94","#bcbd22","#c7c7c7","#ff9896","#ffbb78","#ff9896","#ffbb78","#c5b0d5","#1f77b4","#c49c94","#9edae5","#e377c2","#17becf","#aec7e8","#ffbb78","#2ca02c","#9edae5","#c49c94","#c5b0d5","#c7c7c7","#c7c7c7","#c5b0d5","#c5b0d5","#1f77b4","#c49c94","#2ca02c","#ffbb78","#2ca02c","#9edae5","#9edae5","#7f7f7f","#ffbb78","#1f77b4","#ffbb78","#9edae5","#9edae5","#1f77b4","#9edae5","#ffbb78","#7f7f7f","#c7c7c7","#bcbd22","#9edae5","#c7c7c7","#ffbb78","#c49c94","#2ca02c","#9edae5","#aec7e8","#98df8a","#c7c7c7","#ffbb78","#9edae5","#c5b0d5","#c5b0d5","#ff9896","#9edae5","#bcbd22","#9edae5","#2ca02c","#98df8a","#ffbb78","#c7c7c7","#1f77b4","#9edae5","#c7c7c7","#ffbb78","#1f77b4","#c5b0d5","#f7b6d2","#9edae5","#c5b0d5","#aec7e8","#ffbb78","#2ca02c","#9edae5","#9edae5","#c5b0d5","#9edae5","#c5b0d5","#e377c2","#7f7f7f","#c5b0d5","#c7c7c7","#ffbb78","#c7c7c7","#9edae5","#9edae5","#2ca02c","#ffbb78","#c7c7c7","#c7c7c7","#c5b0d5","#bcbd22","#9467bd","#9edae5","#ffbb78","#9edae5","#aec7e8","#c5b0d5","#9edae5","#dbdb8d","#2ca02c","#c5b0d5","#2ca02c","#c7c7c7","#1f77b4","#c5b0d5","#9edae5","#c7c7c7","#aec7e8","#ff9896","#9edae5","#98df8a","#aec7e8","#9edae5","#dbdb8d","#c7c7c7","#ffbb78","#1f77b4","#ffbb78","#9edae5","#1f77b4","#2ca02c","#ff9896","#bcbd22","#1f77b4","#bcbd22","#c5b0d5","#c7c7c7","#ffbb78","#e377c2","#c7c7c7","#c49c94","#ffbb78","#aec7e8","#9edae5","#c5b0d5","#dbdb8d","#17becf","#9edae5","#c5b0d5","#8c564b","#8c564b","#9edae5","#ff9896","#1f77b4","#e377c2","#c49c94","#ff9896","#9edae5","#9edae5","#aec7e8","#ffbb78","#c7c7c7","#ff9896","#ff9896","#9467bd","#c5b0d5","#e377c2","#c5b0d5","#aec7e8","#c7c7c7","#9edae5","#aec7e8","#c49c94","#ffbb78","#9edae5","#2ca02c","#98df8a","#ff9896","#ffbb78","#aec7e8","#17becf","#aec7e8","#ffbb78","#9edae5","#ffbb78","#dbdb8d","#c7c7c7","#c7c7c7","#c5b0d5","#c7c7c7","#dbdb8d","#e377c2","#ff9896","#dbdb8d","#9edae5","#ff9896","#ffbb78","#c7c7c7","#c7c7c7","#ff9896","#ff9896","#9edae5","#9edae5","#ff9896","#bcbd22","#aec7e8","#c5b0d5","#aec7e8","#dbdb8d","#9467bd","#c7c7c7","#aec7e8","#9edae5","#ff9896","#2ca02c","#c49c94","#c7c7c7","#ffbb78","#ffbb78","#aec7e8","#98df8a","#c5b0d5","#98df8a","#c49c94","#98df8a","#aec7e8","#c7c7c7","#1f77b4","#9edae5","#8c564b","#9edae5","#ff9896","#1f77b4","#c49c94","#bcbd22","#dbdb8d","#2ca02c","#8c564b","#aec7e8","#aec7e8","#9edae5","#ff9896","#ffbb78","#98df8a","#aec7e8","#c7c7c7","#c5b0d5","#9edae5","#c49c94","#98df8a","#ffbb78","#9467bd","#aec7e8","#ffbb78","#bcbd22","#bcbd22","#ffbb78","#c7c7c7","#c7c7c7","#dbdb8d","#ff9896","#d62728","#9edae5","#ffbb78","#9edae5","#ff9896","#c7c7c7","#dbdb8d","#ffbb78","#9edae5","#ffbb78","#c5b0d5","#9edae5","#bcbd22","#1f77b4","#c7c7c7","#c5b0d5","#1f77b4","#c5b0d5","#c5b0d5","#17becf","#f7b6d2","#9edae5","#f7b6d2","#aec7e8","#c7c7c7","#2ca02c","#ffbb78","#8c564b","#c7c7c7","#aec7e8","#c7c7c7","#ff9896","#2ca02c","#c5b0d5","#ff9896","#ffbb78","#aec7e8","#aec7e8","#ffbb78","#8c564b","#c7c7c7","#dbdb8d","#9edae5","#aec7e8","#c49c94","#9edae5","#c7c7c7","#aec7e8","#17becf","#ffbb78","#9edae5","#bcbd22","#e377c2","#bcbd22","#c7c7c7","#9467bd","#9467bd","#9edae5","#aec7e8","#ffbb78","#aec7e8","#ffbb78","#c49c94","#9edae5","#98df8a","#bcbd22","#9edae5","#17becf","#ffbb78","#c49c94","#c5b0d5","#1f77b4","#8c564b","#2ca02c","#aec7e8","#f7b6d2","#9edae5","#dbdb8d","#9edae5","#9467bd","#8c564b","#ffbb78","#aec7e8","#c7c7c7","#1f77b4","#98df8a","#1f77b4","#aec7e8","#8c564b","#9edae5","#c7c7c7","#c5b0d5","#9edae5","#bcbd22","#98df8a","#c7c7c7","#c7c7c7","#c7c7c7","#9467bd","#aec7e8","#c5b0d5","#8c564b","#9edae5","#c5b0d5","#9edae5","#c7c7c7","#c7c7c7","#98df8a","#f7b6d2","#ffbb78","#9edae5","#8c564b","#c5b0d5","#c7c7c7","#bcbd22","#1f77b4","#c5b0d5","#1f77b4","#d62728","#dbdb8d","#aec7e8","#2ca02c","#ff9896","#c5b0d5","#c7c7c7","#c7c7c7","#ff9896","#f7b6d2","#bcbd22","#1f77b4","#c7c7c7","#dbdb8d","#ffbb78","#ffbb78","#ff9896","#aec7e8","#bcbd22","#9edae5","#1f77b4","#c49c94","#98df8a","#c7c7c7","#c5b0d5","#c49c94","#ff9896","#c7c7c7","#1f77b4","#c5b0d5","#9edae5","#d62728","#c7c7c7","#9edae5","#dbdb8d","#c7c7c7","#d62728","#c5b0d5","#d62728","#ffbb78","#1f77b4","#c5b0d5","#1f77b4","#c5b0d5","#1f77b4","#9edae5","#9edae5","#c5b0d5","#8c564b","#ffbb78","#ff9896","#ffbb78","#98df8a","#d62728","#ffbb78","#1f77b4","#c5b0d5","#c7c7c7","#c5b0d5","#1f77b4","#c5b0d5","#c5b0d5","#c49c94","#1f77b4","#c7c7c7","#9467bd","#bcbd22","#aec7e8","#ff9896","#ff9896","#8c564b","#bcbd22","#c7c7c7","#9edae5","#c7c7c7","#ffbb78","#98df8a","#8c564b","#aec7e8","#9edae5","#98df8a","#aec7e8","#c49c94","#2ca02c","#1f77b4","#d62728","#8c564b","#1f77b4","#98df8a","#ff9896","#c5b0d5","#ffbb78","#8c564b","#c7c7c7","#c5b0d5","#8c564b","#ff9896","#c5b0d5","#c5b0d5","#2ca02c","#ff9896","#ffbb78","#1f77b4","#8c564b","#c5b0d5","#ff9896","#9edae5","#ff7f0e","#c7c7c7","#8c564b","#9edae5","#8c564b","#9edae5","#2ca02c","#1f77b4","#dbdb8d","#c5b0d5","#c5b0d5","#1f77b4","#8c564b","#1f77b4","#2ca02c","#9edae5","#c7c7c7","#c49c94","#17becf","#8c564b","#9edae5","#1f77b4","#c7c7c7","#c5b0d5","#2ca02c","#1f77b4","#c49c94","#ffbb78","#9edae5","#c49c94","#c5b0d5","#c5b0d5","#9467bd","#1f77b4","#aec7e8","#aec7e8","#1f77b4","#aec7e8","#9edae5","#9edae5","#aec7e8","#ff9896","#c7c7c7","#98df8a","#ffbb78","#1f77b4","#bcbd22","#ffbb78","#9edae5","#9edae5","#2ca02c","#9edae5","#9edae5","#ffbb78","#aec7e8","#9edae5","#9467bd","#1f77b4","#9edae5","#ffbb78","#c5b0d5","#ffbb78","#9467bd","#1f77b4","#ffbb78","#2ca02c","#9edae5","#9edae5","#c5b0d5","#1f77b4","#9edae5","#dbdb8d","#2ca02c","#aec7e8","#98df8a","#2ca02c","#1f77b4","#9edae5","#1f77b4","#bcbd22","#ffbb78","#c7c7c7","#8c564b","#ffbb78","#c5b0d5","#9edae5","#c5b0d5","#c7c7c7","#9edae5","#c7c7c7","#1f77b4","#2ca02c","#9edae5","#c7c7c7","#9edae5","#c7c7c7","#c5b0d5","#9edae5","#ff9896","#9edae5","#ffbb78","#c5b0d5","#c7c7c7","#9edae5","#aec7e8","#c5b0d5","#1f77b4","#9edae5","#1f77b4","#9edae5","#9467bd","#9edae5","#ffbb78","#1f77b4","#ff9896","#ff9896","#9edae5","#e377c2","#c7c7c7","#aec7e8","#1f77b4","#c7c7c7","#1f77b4","#dbdb8d","#9edae5","#9edae5","#c5b0d5","#aec7e8","#c5b0d5","#c5b0d5","#ffbb78","#c5b0d5","#9edae5","#1f77b4","#1f77b4","#9467bd","#d62728","#f7b6d2","#9edae5","#ffbb78","#c5b0d5","#c7c7c7","#c7c7c7","#bcbd22","#aec7e8","#d62728","#c7c7c7","#1f77b4","#9edae5","#9467bd","#bcbd22","#9edae5","#c49c94","#c5b0d5","#c5b0d5","#1f77b4","#c7c7c7","#9edae5","#1f77b4","#c5b0d5","#98df8a","#17becf","#1f77b4","#1f77b4","#8c564b","#1f77b4","#c7c7c7","#c5b0d5","#2ca02c","#c7c7c7","#bcbd22","#9edae5","#c7c7c7","#e377c2","#8c564b","#c7c7c7","#e377c2","#e377c2","#2ca02c","#e377c2","#e377c2","#e377c2","#ffbb78","#aec7e8","#dbdb8d","#c5b0d5","#9467bd","#1f77b4","#c7c7c7","#bcbd22","#1f77b4","#ffbb78","#9edae5","#9edae5","#1f77b4","#1f77b4","#c5b0d5","#ffbb78","#1f77b4","#1f77b4","#c5b0d5","#1f77b4","#1f77b4","#e377c2","#ffbb78","#8c564b","#9edae5","#9edae5","#dbdb8d","#bcbd22","#9edae5","#98df8a","#2ca02c","#ffbb78","#2ca02c","#e377c2","#ffbb78","#c5b0d5","#bcbd22","#ff7f0e","#ffbb78","#e377c2","#aec7e8","#e377c2","#9edae5","#1f77b4","#d62728","#aec7e8","#1f77b4","#bcbd22","#bcbd22","#17becf","#dbdb8d","#9edae5","#9edae5","#9467bd","#ffbb78","#c5b0d5","#c5b0d5","#ffbb78","#e377c2","#ff9896","#c7c7c7","#c7c7c7","#bcbd22","#c5b0d5","#ffbb78","#1f77b4","#1f77b4","#9467bd","#1f77b4","#17becf","#bcbd22","#c7c7c7","#9edae5","#9edae5","#c7c7c7","#c7c7c7","#c7c7c7","#1f77b4","#8c564b","#bcbd22","#dbdb8d","#e377c2","#c7c7c7","#dbdb8d","#9edae5","#c7c7c7","#c5b0d5","#ffbb78","#c7c7c7","#2ca02c","#2ca02c","#9edae5","#dbdb8d","#c7c7c7","#9edae5","#8c564b","#9edae5","#e377c2","#ff9896","#c5b0d5","#17becf","#9edae5","#1f77b4","#1f77b4","#c5b0d5","#c5b0d5","#1f77b4","#dbdb8d","#9edae5","#ffbb78","#bcbd22","#2ca02c","#1f77b4","#1f77b4","#1f77b4","#1f77b4","#1f77b4","#1f77b4","#c5b0d5","#c5b0d5","#c5b0d5","#2ca02c","#c7c7c7","#8c564b","#8c564b","#8c564b","#9edae5","#c5b0d5","#1f77b4","#d62728","#dbdb8d","#bcbd22","#bcbd22","#9edae5","#c5b0d5","#c5b0d5","#c5b0d5","#c7c7c7","#1f77b4","#c7c7c7","#1f77b4","#9467bd","#c5b0d5","#c5b0d5","#17becf","#9edae5","#c49c94","#98df8a","#c5b0d5","#d62728","#c5b0d5","#bcbd22","#1f77b4","#c5b0d5","#ff9896","#c7c7c7","#bcbd22","#c7c7c7","#bcbd22","#c49c94","#c5b0d5","#e377c2","#ffbb78","#c5b0d5","#8c564b","#1f77b4","#1f77b4","#e377c2","#9edae5","#f7b6d2","#c5b0d5","#9edae5","#ffbb78","#9edae5","#c7c7c7","#2ca02c","#aec7e8","#ff9896","#9edae5","#e377c2","#c5b0d5","#c7c7c7","#c7c7c7","#c5b0d5","#9edae5","#bcbd22","#c5b0d5","#2ca02c","#98df8a","#ffbb78","#bcbd22","#c5b0d5","#98df8a","#1f77b4","#9edae5","#1f77b4","#1f77b4","#ffbb78","#f7b6d2","#f7b6d2","#f7b6d2","#e377c2","#f7b6d2","#8c564b","#98df8a","#c5b0d5","#8c564b","#2ca02c","#c7c7c7","#c7c7c7","#c5b0d5","#1f77b4","#e377c2","#f7b6d2","#8c564b","#aec7e8","#e377c2","#c49c94","#c7c7c7","#f7b6d2","#c5b0d5","#e377c2","#ffbb78","#c5b0d5","#e377c2","#f7b6d2","#e377c2","#c7c7c7","#c5b0d5","#9467bd","#1f77b4","#e377c2","#1f77b4","#ffbb78","#1f77b4","#9467bd","#ffbb78","#17becf","#ffbb78","#9467bd","#c5b0d5","#c7c7c7","#c5b0d5","#c5b0d5","#9edae5","#ffbb78","#9edae5","#9edae5","#9edae5","#bcbd22","#f7b6d2","#1f77b4","#bcbd22","#c5b0d5","#c5b0d5","#c5b0d5","#9edae5","#c5b0d5","#c49c94","#1f77b4","#1f77b4","#9edae5","#bcbd22","#8c564b","#9467bd","#ff9896","#2ca02c","#2ca02c","#c7c7c7","#17becf","#c5b0d5","#c7c7c7","#9edae5","#c7c7c7","#2ca02c","#2ca02c","#c7c7c7","#ffbb78","#ff9896","#9edae5","#bcbd22","#2ca02c","#ff7f0e","#c5b0d5","#9edae5","#ffbb78","#c5b0d5","#1f77b4","#ffbb78","#c5b0d5","#ffbb78","#c7c7c7","#dbdb8d","#aec7e8","#ff9896","#bcbd22","#ffbb78","#c5b0d5","#98df8a","#9467bd","#bcbd22","#7f7f7f","#9edae5","#c7c7c7","#c7c7c7","#c49c94","#8c564b","#9edae5","#2ca02c","#ff9896","#ffbb78"],"line_color":["#2ca02c","#9edae5","#9edae5","#9edae5","#ffbb78","#8c564b","#c7c7c7","#8c564b","#c49c94","#ffbb78","#bcbd22","#aec7e8","#ffbb78","#8c564b","#8c564b","#c7c7c7","#c7c7c7","#ffbb78","#9edae5","#c7c7c7","#c7c7c7","#c7c7c7","#f7b6d2","#ff9896","#9edae5","#ffbb78","#98df8a","#9edae5","#aec7e8","#98df8a","#c5b0d5","#1f77b4","#98df8a","#c49c94","#dbdb8d","#c7c7c7","#dbdb8d","#dbdb8d","#8c564b","#ffbb78","#c7c7c7","#c7c7c7","#9edae5","#ffbb78","#1f77b4","#8c564b","#98df8a","#9edae5","#c5b0d5","#c5b0d5","#aec7e8","#c5b0d5","#9edae5","#ffbb78","#ffbb78","#dbdb8d","#c5b0d5","#aec7e8","#9edae5","#ffbb78","#98df8a","#ffbb78","#c5b0d5","#1f77b4","#bcbd22","#1f77b4","#1f77b4","#bcbd22","#ffbb78","#e377c2","#dbdb8d","#c5b0d5","#ffbb78","#2ca02c","#c49c94","#bcbd22","#c5b0d5","#ff7f0e","#c7c7c7","#e377c2","#c7c7c7","#9467bd","#c5b0d5","#c5b0d5","#c5b0d5","#1f77b4","#1f77b4","#ffbb78","#e377c2","#9edae5","#ffbb78","#bcbd22","#dbdb8d","#ffbb78","#9edae5","#ffbb78","#aec7e8","#e377c2","#ff9896","#9467bd","#bcbd22","#8c564b","#9edae5","#8c564b","#9edae5","#1f77b4","#98df8a","#2ca02c","#9467bd","#f7b6d2","#f7b6d2","#e377c2","#1f77b4","#ffbb78","#e377c2","#17becf","#9edae5","#ffbb78","#dbdb8d","#c7c7c7","#f7b6d2","#ffbb78","#dbdb8d","#ffbb78","#dbdb8d","#c5b0d5","#1f77b4","#9edae5","#d62728","#9edae5","#7f7f7f","#8c564b","#c7c7c7","#c49c94","#17becf","#c7c7c7","#c7c7c7","#2ca02c","#c5b0d5","#9edae5","#c5b0d5","#2ca02c","#dbdb8d","#aec7e8","#d62728","#ff7f0e","#c7c7c7","#c49c94","#ffbb78","#c49c94","#c5b0d5","#c5b0d5","#bcbd22","#c7c7c7","#98df8a","#ff9896","#ffbb78","#c49c94","#9edae5","#ff9896","#e377c2","#ffbb78","#17becf","#bcbd22","#ffbb78","#ffbb78","#ff9896","#f7b6d2","#9edae5","#bcbd22","#17becf","#1f77b4","#9edae5","#aec7e8","#9edae5","#c49c94","#ffbb78","#9467bd","#e377c2","#aec7e8","#dbdb8d","#dbdb8d","#9edae5","#bcbd22","#ffbb78","#9edae5","#9edae5","#9edae5","#9edae5","#bcbd22","#8c564b","#c7c7c7","#1f77b4","#ff9896","#e377c2","#9edae5","#ffbb78","#c5b0d5","#1f77b4","#ffbb78","#ffbb78","#98df8a","#98df8a","#aec7e8","#e377c2","#c5b0d5","#ffbb78","#ff9896","#c7c7c7","#c7c7c7","#ffbb78","#c5b0d5","#f7b6d2","#ff9896","#d62728","#8c564b","#c5b0d5","#1f77b4","#c49c94","#aec7e8","#c5b0d5","#ff7f0e","#ffbb78","#9edae5","#ffbb78","#ff7f0e","#9edae5","#f7b6d2","#1f77b4","#1f77b4","#2ca02c","#dbdb8d","#17becf","#c5b0d5","#bcbd22","#c49c94","#aec7e8","#1f77b4","#c49c94","#ffbb78","#bcbd22","#2ca02c","#1f77b4","#9edae5","#ffbb78","#c5b0d5","#8c564b","#8c564b","#8c564b","#ffbb78","#8c564b","#e377c2","#ffbb78","#aec7e8","#c5b0d5","#c7c7c7","#c7c7c7","#ffbb78","#ffbb78","#2ca02c","#c7c7c7","#c7c7c7","#8c564b","#c7c7c7","#17becf","#c7c7c7","#c5b0d5","#8c564b","#9edae5","#8c564b","#8c564b","#c5b0d5","#c5b0d5","#c5b0d5","#9edae5","#aec7e8","#c49c94","#dbdb8d","#bcbd22","#ffbb78","#ffbb78","#1f77b4","#bcbd22","#c5b0d5","#1f77b4","#ffbb78","#ff9896","#7f7f7f","#dbdb8d","#e377c2","#bcbd22","#bcbd22","#2ca02c","#1f77b4","#9edae5","#c7c7c7","#9edae5","#c49c94","#9edae5","#98df8a","#f7b6d2","#c7c7c7","#8c564b","#c5b0d5","#17becf","#c49c94","#1f77b4","#dbdb8d","#d62728","#2ca02c","#1f77b4","#f7b6d2","#e377c2","#ffbb78","#ff9896","#98df8a","#c5b0d5","#aec7e8","#ffbb78","#ffbb78","#c5b0d5","#ff9896","#c5b0d5","#c5b0d5","#c5b0d5","#ffbb78","#98df8a","#1f77b4","#d62728","#c7c7c7","#8c564b","#9edae5","#aec7e8","#c5b0d5","#9467bd","#1f77b4","#ff9896","#1f77b4","#c7c7c7","#1f77b4","#c5b0d5","#bcbd22","#aec7e8","#e377c2","#17becf","#98df8a","#c5b0d5","#1f77b4","#ff9896","#9edae5","#c5b0d5","#c5b0d5","#1f77b4","#aec7e8","#9edae5","#ffbb78","#98df8a","#9edae5","#c7c7c7","#c7c7c7","#c7c7c7","#1f77b4","#9edae5","#ffbb78","#ff7f0e","#bcbd22","#98df8a","#1f77b4","#9edae5","#98df8a","#c7c7c7","#dbdb8d","#c5b0d5","#c49c94","#9edae5","#c7c7c7","#98df8a","#d62728","#ffbb78","#7f7f7f","#ffbb78","#2ca02c","#c49c94","#c7c7c7","#17becf","#f7b6d2","#9edae5","#9edae5","#c7c7c7","#1f77b4","#1f77b4","#1f77b4","#ffbb78","#aec7e8","#ffbb78","#1f77b4","#9467bd","#c49c94","#98df8a","#1f77b4","#f7b6d2","#1f77b4","#9edae5","#1f77b4","#ffbb78","#c7c7c7","#aec7e8","#1f77b4","#9edae5","#9edae5","#9edae5","#1f77b4","#9edae5","#ffbb78","#ffbb78","#ffbb78","#1f77b4","#9edae5","#9edae5","#c5b0d5","#d62728","#8c564b","#c7c7c7","#9edae5","#9edae5","#c7c7c7","#c49c94","#ffbb78","#c5b0d5","#ff9896","#ffbb78","#9edae5","#c5b0d5","#98df8a","#ffbb78","#f7b6d2","#1f77b4","#8c564b","#c7c7c7","#98df8a","#c7c7c7","#d62728","#bcbd22","#8c564b","#c7c7c7","#1f77b4","#ffbb78","#9edae5","#aec7e8","#9edae5","#ffbb78","#c7c7c7","#9467bd","#aec7e8","#c7c7c7","#aec7e8","#c7c7c7","#dbdb8d","#ff9896","#1f77b4","#c7c7c7","#1f77b4","#aec7e8","#aec7e8","#9edae5","#1f77b4","#ffbb78","#c7c7c7","#bcbd22","#bcbd22","#c7c7c7","#98df8a","#aec7e8","#bcbd22","#c49c94","#ff9896","#9edae5","#17becf","#9edae5","#ffbb78","#9edae5","#c7c7c7","#c49c94","#9edae5","#aec7e8","#9edae5","#c7c7c7","#aec7e8","#ffbb78","#bcbd22","#9edae5","#98df8a","#9467bd","#ff7f0e","#ffbb78","#8c564b","#8c564b","#ffbb78","#8c564b","#ffbb78","#c7c7c7","#9edae5","#9edae5","#ffbb78","#9edae5","#ffbb78","#c5b0d5","#f7b6d2","#98df8a","#1f77b4","#1f77b4","#c7c7c7","#ffbb78","#c49c94","#c7c7c7","#bcbd22","#c5b0d5","#e377c2","#c5b0d5","#9edae5","#e377c2","#c49c94","#aec7e8","#1f77b4","#98df8a","#9edae5","#ffbb78","#bcbd22","#e377c2","#e377c2","#9edae5","#ff9896","#ffbb78","#aec7e8","#aec7e8","#dbdb8d","#ffbb78","#ff7f0e","#aec7e8","#aec7e8","#e377c2","#9467bd","#c7c7c7","#17becf","#ff9896","#c7c7c7","#98df8a","#2ca02c","#98df8a","#c5b0d5","#9467bd","#1f77b4","#ff7f0e","#98df8a","#9edae5","#ffbb78","#c7c7c7","#ffbb78","#9467bd","#ffbb78","#ffbb78","#c5b0d5","#ffbb78","#dbdb8d","#9467bd","#ffbb78","#9edae5","#f7b6d2","#2ca02c","#1f77b4","#c5b0d5","#9edae5","#c49c94","#c49c94","#ffbb78","#dbdb8d","#c7c7c7","#c7c7c7","#aec7e8","#8c564b","#9edae5","#ffbb78","#e377c2","#8c564b","#c49c94","#bcbd22","#9467bd","#ffbb78","#c7c7c7","#ffbb78","#98df8a","#2ca02c","#c7c7c7","#9edae5","#c5b0d5","#bcbd22","#c5b0d5","#f7b6d2","#17becf","#f7b6d2","#98df8a","#1f77b4","#c49c94","#ffbb78","#2ca02c","#bcbd22","#8c564b","#ffbb78","#e377c2","#ffbb78","#c5b0d5","#1f77b4","#9edae5","#1f77b4","#bcbd22","#ffbb78","#dbdb8d","#c7c7c7","#ffbb78","#8c564b","#9edae5","#d62728","#17becf","#1f77b4","#9467bd","#ffbb78","#9edae5","#1f77b4","#d62728","#aec7e8","#c5b0d5","#1f77b4","#1f77b4","#ffbb78","#1f77b4","#9edae5","#9edae5","#ffbb78","#98df8a","#c7c7c7","#98df8a","#2ca02c","#c7c7c7","#1f77b4","#c49c94","#2ca02c","#ff9896","#9edae5","#c7c7c7","#c49c94","#c7c7c7","#9edae5","#9edae5","#9edae5","#c7c7c7","#c7c7c7","#1f77b4","#c7c7c7","#c5b0d5","#bcbd22","#bcbd22","#aec7e8","#8c564b","#1f77b4","#2ca02c","#17becf","#98df8a","#c7c7c7","#bcbd22","#9edae5","#1f77b4","#dbdb8d","#c7c7c7","#ff7f0e","#c5b0d5","#c5b0d5","#dbdb8d","#9edae5","#9edae5","#c5b0d5","#c7c7c7","#d62728","#c5b0d5","#aec7e8","#2ca02c","#c7c7c7","#ffbb78","#dbdb8d","#ffbb78","#ffbb78","#8c564b","#ff9896","#ffbb78","#d62728","#9467bd","#c7c7c7","#c5b0d5","#ffbb78","#c7c7c7","#aec7e8","#bcbd22","#98df8a","#9edae5","#9467bd","#c7c7c7","#c5b0d5","#9edae5","#d62728","#f7b6d2","#f7b6d2","#ffbb78","#ffbb78","#c7c7c7","#d62728","#c5b0d5","#c5b0d5","#bcbd22","#9edae5","#aec7e8","#d62728","#ffbb78","#ff9896","#1f77b4","#ffbb78","#dbdb8d","#c5b0d5","#aec7e8","#ffbb78","#9edae5","#c5b0d5","#c5b0d5","#c5b0d5","#98df8a","#ff9896","#c5b0d5","#dbdb8d","#ff9896","#c5b0d5","#ff9896","#c49c94","#9edae5","#9edae5","#e377c2","#f7b6d2","#d62728","#ff9896","#c5b0d5","#f7b6d2","#ffbb78","#8c564b","#9edae5","#e377c2","#ff9896","#1f77b4","#8c564b","#c7c7c7","#d62728","#dbdb8d","#c7c7c7","#ffbb78","#1f77b4","#ff9896","#ffbb78","#c5b0d5","#c5b0d5","#c7c7c7","#9467bd","#aec7e8","#9edae5","#1f77b4","#c5b0d5","#9467bd","#f7b6d2","#ff9896","#ffbb78","#c7c7c7","#9edae5","#98df8a","#ffbb78","#c49c94","#ffbb78","#9edae5","#9edae5","#98df8a","#c49c94","#c49c94","#7f7f7f","#d62728","#c7c7c7","#9edae5","#c49c94","#c5b0d5","#bcbd22","#9edae5","#ffbb78","#98df8a","#9edae5","#c5b0d5","#aec7e8","#1f77b4","#ffbb78","#9edae5","#c7c7c7","#c5b0d5","#ffbb78","#f7b6d2","#ffbb78","#98df8a","#ff9896","#c7c7c7","#9edae5","#2ca02c","#17becf","#dbdb8d","#c49c94","#ff9896","#bcbd22","#2ca02c","#9edae5","#bcbd22","#aec7e8","#dbdb8d","#c7c7c7","#9edae5","#ff9896","#ff9896","#c49c94","#c49c94","#c5b0d5","#98df8a","#2ca02c","#9edae5","#c49c94","#c49c94","#d62728","#c5b0d5","#9edae5","#c49c94","#c5b0d5","#9edae5","#1f77b4","#aec7e8","#c7c7c7","#ff9896","#d62728","#c7c7c7","#d62728","#ffbb78","#e377c2","#c49c94","#ffbb78","#ffbb78","#9edae5","#aec7e8","#ff9896","#bcbd22","#9edae5","#9edae5","#ffbb78","#aec7e8","#c49c94","#1f77b4","#c5b0d5","#c49c94","#c7c7c7","#8c564b","#c5b0d5","#ffbb78","#1f77b4","#c5b0d5","#f7b6d2","#c5b0d5","#9edae5","#c5b0d5","#7f7f7f","#ffbb78","#aec7e8","#c5b0d5","#c5b0d5","#aec7e8","#c5b0d5","#bcbd22","#c5b0d5","#aec7e8","#c49c94","#ffbb78","#ffbb78","#c49c94","#c5b0d5","#dbdb8d","#ffbb78","#9467bd","#ff9896","#ffbb78","#bcbd22","#c7c7c7","#ffbb78","#aec7e8","#8c564b","#98df8a","#c5b0d5","#bcbd22","#c7c7c7","#9edae5","#aec7e8","#9edae5","#9edae5","#9edae5","#c49c94","#ff9896","#9edae5","#17becf","#c7c7c7","#9edae5","#dbdb8d","#9edae5","#ffbb78","#dbdb8d","#c5b0d5","#9467bd","#c49c94","#1f77b4","#c5b0d5","#c5b0d5","#dbdb8d","#9edae5","#9edae5","#ff9896","#c49c94","#9467bd","#1f77b4","#aec7e8","#ffbb78","#9edae5","#9edae5","#c5b0d5","#1f77b4","#ffbb78","#aec7e8","#dbdb8d","#ffbb78","#ff9896","#c49c94","#9467bd","#c7c7c7","#c7c7c7","#ffbb78","#ffbb78","#c49c94","#c5b0d5","#aec7e8","#c7c7c7","#ffbb78","#c5b0d5","#ff9896","#9edae5","#7f7f7f","#c7c7c7","#c5b0d5","#aec7e8","#1f77b4","#9edae5","#ffbb78","#c5b0d5","#bcbd22","#c5b0d5","#c7c7c7","#ff9896","#dbdb8d","#ff9896","#9edae5","#9edae5","#98df8a","#ffbb78","#9edae5","#c49c94","#bcbd22","#ffbb78","#aec7e8","#c5b0d5","#c7c7c7","#9edae5","#f7b6d2","#aec7e8","#ff9896","#c49c94","#ff9896","#9edae5","#aec7e8","#c7c7c7","#c7c7c7","#c5b0d5","#98df8a","#c49c94","#c7c7c7","#aec7e8","#98df8a","#9edae5","#ff9896","#c5b0d5","#9edae5","#ffbb78","#9edae5","#c7c7c7","#ffbb78","#9edae5","#bcbd22","#c5b0d5","#ffbb78","#c49c94","#ffbb78","#9467bd","#c5b0d5","#9edae5","#1f77b4","#c5b0d5","#98df8a","#9edae5","#c7c7c7","#9edae5","#c5b0d5","#c49c94","#1f77b4","#9edae5","#aec7e8","#e377c2","#ffbb78","#ffbb78","#c7c7c7","#17becf","#c7c7c7","#9467bd","#8c564b","#bcbd22","#bcbd22","#8c564b","#1f77b4","#d62728","#bcbd22","#bcbd22","#9edae5","#9edae5","#9edae5","#9467bd","#9edae5","#2ca02c","#ffbb78","#ff9896","#1f77b4","#9edae5","#1f77b4","#c5b0d5","#9467bd","#9467bd","#dbdb8d","#c7c7c7","#9467bd","#9edae5","#9edae5","#17becf","#ffbb78","#2ca02c","#ffbb78","#2ca02c","#c5b0d5","#98df8a","#ffbb78","#9edae5","#1f77b4","#8c564b","#c7c7c7","#9467bd","#f7b6d2","#9edae5","#c49c94","#c7c7c7","#ffbb78","#c7c7c7","#aec7e8","#c49c94","#bcbd22","#c7c7c7","#ff9896","#ffbb78","#ff9896","#ffbb78","#c5b0d5","#1f77b4","#c49c94","#9edae5","#e377c2","#17becf","#aec7e8","#ffbb78","#2ca02c","#9edae5","#c49c94","#c5b0d5","#c7c7c7","#c7c7c7","#c5b0d5","#c5b0d5","#1f77b4","#c49c94","#2ca02c","#ffbb78","#2ca02c","#9edae5","#9edae5","#7f7f7f","#ffbb78","#1f77b4","#ffbb78","#9edae5","#9edae5","#1f77b4","#9edae5","#ffbb78","#7f7f7f","#c7c7c7","#bcbd22","#9edae5","#c7c7c7","#ffbb78","#c49c94","#2ca02c","#9edae5","#aec7e8","#98df8a","#c7c7c7","#ffbb78","#9edae5","#c5b0d5","#c5b0d5","#ff9896","#9edae5","#bcbd22","#9edae5","#2ca02c","#98df8a","#ffbb78","#c7c7c7","#1f77b4","#9edae5","#c7c7c7","#ffbb78","#1f77b4","#c5b0d5","#f7b6d2","#9edae5","#c5b0d5","#aec7e8","#ffbb78","#2ca02c","#9edae5","#9edae5","#c5b0d5","#9edae5","#c5b0d5","#e377c2","#7f7f7f","#c5b0d5","#c7c7c7","#ffbb78","#c7c7c7","#9edae5","#9edae5","#2ca02c","#ffbb78","#c7c7c7","#c7c7c7","#c5b0d5","#bcbd22","#9467bd","#9edae5","#ffbb78","#9edae5","#aec7e8","#c5b0d5","#9edae5","#dbdb8d","#2ca02c","#c5b0d5","#2ca02c","#c7c7c7","#1f77b4","#c5b0d5","#9edae5","#c7c7c7","#aec7e8","#ff9896","#9edae5","#98df8a","#aec7e8","#9edae5","#dbdb8d","#c7c7c7","#ffbb78","#1f77b4","#ffbb78","#9edae5","#1f77b4","#2ca02c","#ff9896","#bcbd22","#1f77b4","#bcbd22","#c5b0d5","#c7c7c7","#ffbb78","#e377c2","#c7c7c7","#c49c94","#ffbb78","#aec7e8","#9edae5","#c5b0d5","#dbdb8d","#17becf","#9edae5","#c5b0d5","#8c564b","#8c564b","#9edae5","#ff9896","#1f77b4","#e377c2","#c49c94","#ff9896","#9edae5","#9edae5","#aec7e8","#ffbb78","#c7c7c7","#ff9896","#ff9896","#9467bd","#c5b0d5","#e377c2","#c5b0d5","#aec7e8","#c7c7c7","#9edae5","#aec7e8","#c49c94","#ffbb78","#9edae5","#2ca02c","#98df8a","#ff9896","#ffbb78","#aec7e8","#17becf","#aec7e8","#ffbb78","#9edae5","#ffbb78","#dbdb8d","#c7c7c7","#c7c7c7","#c5b0d5","#c7c7c7","#dbdb8d","#e377c2","#ff9896","#dbdb8d","#9edae5","#ff9896","#ffbb78","#c7c7c7","#c7c7c7","#ff9896","#ff9896","#9edae5","#9edae5","#ff9896","#bcbd22","#aec7e8","#c5b0d5","#aec7e8","#dbdb8d","#9467bd","#c7c7c7","#aec7e8","#9edae5","#ff9896","#2ca02c","#c49c94","#c7c7c7","#ffbb78","#ffbb78","#aec7e8","#98df8a","#c5b0d5","#98df8a","#c49c94","#98df8a","#aec7e8","#c7c7c7","#1f77b4","#9edae5","#8c564b","#9edae5","#ff9896","#1f77b4","#c49c94","#bcbd22","#dbdb8d","#2ca02c","#8c564b","#aec7e8","#aec7e8","#9edae5","#ff9896","#ffbb78","#98df8a","#aec7e8","#c7c7c7","#c5b0d5","#9edae5","#c49c94","#98df8a","#ffbb78","#9467bd","#aec7e8","#ffbb78","#bcbd22","#bcbd22","#ffbb78","#c7c7c7","#c7c7c7","#dbdb8d","#ff9896","#d62728","#9edae5","#ffbb78","#9edae5","#ff9896","#c7c7c7","#dbdb8d","#ffbb78","#9edae5","#ffbb78","#c5b0d5","#9edae5","#bcbd22","#1f77b4","#c7c7c7","#c5b0d5","#1f77b4","#c5b0d5","#c5b0d5","#17becf","#f7b6d2","#9edae5","#f7b6d2","#aec7e8","#c7c7c7","#2ca02c","#ffbb78","#8c564b","#c7c7c7","#aec7e8","#c7c7c7","#ff9896","#2ca02c","#c5b0d5","#ff9896","#ffbb78","#aec7e8","#aec7e8","#ffbb78","#8c564b","#c7c7c7","#dbdb8d","#9edae5","#aec7e8","#c49c94","#9edae5","#c7c7c7","#aec7e8","#17becf","#ffbb78","#9edae5","#bcbd22","#e377c2","#bcbd22","#c7c7c7","#9467bd","#9467bd","#9edae5","#aec7e8","#ffbb78","#aec7e8","#ffbb78","#c49c94","#9edae5","#98df8a","#bcbd22","#9edae5","#17becf","#ffbb78","#c49c94","#c5b0d5","#1f77b4","#8c564b","#2ca02c","#aec7e8","#f7b6d2","#9edae5","#dbdb8d","#9edae5","#9467bd","#8c564b","#ffbb78","#aec7e8","#c7c7c7","#1f77b4","#98df8a","#1f77b4","#aec7e8","#8c564b","#9edae5","#c7c7c7","#c5b0d5","#9edae5","#bcbd22","#98df8a","#c7c7c7","#c7c7c7","#c7c7c7","#9467bd","#aec7e8","#c5b0d5","#8c564b","#9edae5","#c5b0d5","#9edae5","#c7c7c7","#c7c7c7","#98df8a","#f7b6d2","#ffbb78","#9edae5","#8c564b","#c5b0d5","#c7c7c7","#bcbd22","#1f77b4","#c5b0d5","#1f77b4","#d62728","#dbdb8d","#aec7e8","#2ca02c","#ff9896","#c5b0d5","#c7c7c7","#c7c7c7","#ff9896","#f7b6d2","#bcbd22","#1f77b4","#c7c7c7","#dbdb8d","#ffbb78","#ffbb78","#ff9896","#aec7e8","#bcbd22","#9edae5","#1f77b4","#c49c94","#98df8a","#c7c7c7","#c5b0d5","#c49c94","#ff9896","#c7c7c7","#1f77b4","#c5b0d5","#9edae5","#d62728","#c7c7c7","#9edae5","#dbdb8d","#c7c7c7","#d62728","#c5b0d5","#d62728","#ffbb78","#1f77b4","#c5b0d5","#1f77b4","#c5b0d5","#1f77b4","#9edae5","#9edae5","#c5b0d5","#8c564b","#ffbb78","#ff9896","#ffbb78","#98df8a","#d62728","#ffbb78","#1f77b4","#c5b0d5","#c7c7c7","#c5b0d5","#1f77b4","#c5b0d5","#c5b0d5","#c49c94","#1f77b4","#c7c7c7","#9467bd","#bcbd22","#aec7e8","#ff9896","#ff9896","#8c564b","#bcbd22","#c7c7c7","#9edae5","#c7c7c7","#ffbb78","#98df8a","#8c564b","#aec7e8","#9edae5","#98df8a","#aec7e8","#c49c94","#2ca02c","#1f77b4","#d62728","#8c564b","#1f77b4","#98df8a","#ff9896","#c5b0d5","#ffbb78","#8c564b","#c7c7c7","#c5b0d5","#8c564b","#ff9896","#c5b0d5","#c5b0d5","#2ca02c","#ff9896","#ffbb78","#1f77b4","#8c564b","#c5b0d5","#ff9896","#9edae5","#ff7f0e","#c7c7c7","#8c564b","#9edae5","#8c564b","#9edae5","#2ca02c","#1f77b4","#dbdb8d","#c5b0d5","#c5b0d5","#1f77b4","#8c564b","#1f77b4","#2ca02c","#9edae5","#c7c7c7","#c49c94","#17becf","#8c564b","#9edae5","#1f77b4","#c7c7c7","#c5b0d5","#2ca02c","#1f77b4","#c49c94","#ffbb78","#9edae5","#c49c94","#c5b0d5","#c5b0d5","#9467bd","#1f77b4","#aec7e8","#aec7e8","#1f77b4","#aec7e8","#9edae5","#9edae5","#aec7e8","#ff9896","#c7c7c7","#98df8a","#ffbb78","#1f77b4","#bcbd22","#ffbb78","#9edae5","#9edae5","#2ca02c","#9edae5","#9edae5","#ffbb78","#aec7e8","#9edae5","#9467bd","#1f77b4","#9edae5","#ffbb78","#c5b0d5","#ffbb78","#9467bd","#1f77b4","#ffbb78","#2ca02c","#9edae5","#9edae5","#c5b0d5","#1f77b4","#9edae5","#dbdb8d","#2ca02c","#aec7e8","#98df8a","#2ca02c","#1f77b4","#9edae5","#1f77b4","#bcbd22","#ffbb78","#c7c7c7","#8c564b","#ffbb78","#c5b0d5","#9edae5","#c5b0d5","#c7c7c7","#9edae5","#c7c7c7","#1f77b4","#2ca02c","#9edae5","#c7c7c7","#9edae5","#c7c7c7","#c5b0d5","#9edae5","#ff9896","#9edae5","#ffbb78","#c5b0d5","#c7c7c7","#9edae5","#aec7e8","#c5b0d5","#1f77b4","#9edae5","#1f77b4","#9edae5","#9467bd","#9edae5","#ffbb78","#1f77b4","#ff9896","#ff9896","#9edae5","#e377c2","#c7c7c7","#aec7e8","#1f77b4","#c7c7c7","#1f77b4","#dbdb8d","#9edae5","#9edae5","#c5b0d5","#aec7e8","#c5b0d5","#c5b0d5","#ffbb78","#c5b0d5","#9edae5","#1f77b4","#1f77b4","#9467bd","#d62728","#f7b6d2","#9edae5","#ffbb78","#c5b0d5","#c7c7c7","#c7c7c7","#bcbd22","#aec7e8","#d62728","#c7c7c7","#1f77b4","#9edae5","#9467bd","#bcbd22","#9edae5","#c49c94","#c5b0d5","#c5b0d5","#1f77b4","#c7c7c7","#9edae5","#1f77b4","#c5b0d5","#98df8a","#17becf","#1f77b4","#1f77b4","#8c564b","#1f77b4","#c7c7c7","#c5b0d5","#2ca02c","#c7c7c7","#bcbd22","#9edae5","#c7c7c7","#e377c2","#8c564b","#c7c7c7","#e377c2","#e377c2","#2ca02c","#e377c2","#e377c2","#e377c2","#ffbb78","#aec7e8","#dbdb8d","#c5b0d5","#9467bd","#1f77b4","#c7c7c7","#bcbd22","#1f77b4","#ffbb78","#9edae5","#9edae5","#1f77b4","#1f77b4","#c5b0d5","#ffbb78","#1f77b4","#1f77b4","#c5b0d5","#1f77b4","#1f77b4","#e377c2","#ffbb78","#8c564b","#9edae5","#9edae5","#dbdb8d","#bcbd22","#9edae5","#98df8a","#2ca02c","#ffbb78","#2ca02c","#e377c2","#ffbb78","#c5b0d5","#bcbd22","#ff7f0e","#ffbb78","#e377c2","#aec7e8","#e377c2","#9edae5","#1f77b4","#d62728","#aec7e8","#1f77b4","#bcbd22","#bcbd22","#17becf","#dbdb8d","#9edae5","#9edae5","#9467bd","#ffbb78","#c5b0d5","#c5b0d5","#ffbb78","#e377c2","#ff9896","#c7c7c7","#c7c7c7","#bcbd22","#c5b0d5","#ffbb78","#1f77b4","#1f77b4","#9467bd","#1f77b4","#17becf","#bcbd22","#c7c7c7","#9edae5","#9edae5","#c7c7c7","#c7c7c7","#c7c7c7","#1f77b4","#8c564b","#bcbd22","#dbdb8d","#e377c2","#c7c7c7","#dbdb8d","#9edae5","#c7c7c7","#c5b0d5","#ffbb78","#c7c7c7","#2ca02c","#2ca02c","#9edae5","#dbdb8d","#c7c7c7","#9edae5","#8c564b","#9edae5","#e377c2","#ff9896","#c5b0d5","#17becf","#9edae5","#1f77b4","#1f77b4","#c5b0d5","#c5b0d5","#1f77b4","#dbdb8d","#9edae5","#ffbb78","#bcbd22","#2ca02c","#1f77b4","#1f77b4","#1f77b4","#1f77b4","#1f77b4","#1f77b4","#c5b0d5","#c5b0d5","#c5b0d5","#2ca02c","#c7c7c7","#8c564b","#8c564b","#8c564b","#9edae5","#c5b0d5","#1f77b4","#d62728","#dbdb8d","#bcbd22","#bcbd22","#9edae5","#c5b0d5","#c5b0d5","#c5b0d5","#c7c7c7","#1f77b4","#c7c7c7","#1f77b4","#9467bd","#c5b0d5","#c5b0d5","#17becf","#9edae5","#c49c94","#98df8a","#c5b0d5","#d62728","#c5b0d5","#bcbd22","#1f77b4","#c5b0d5","#ff9896","#c7c7c7","#bcbd22","#c7c7c7","#bcbd22","#c49c94","#c5b0d5","#e377c2","#ffbb78","#c5b0d5","#8c564b","#1f77b4","#1f77b4","#e377c2","#9edae5","#f7b6d2","#c5b0d5","#9edae5","#ffbb78","#9edae5","#c7c7c7","#2ca02c","#aec7e8","#ff9896","#9edae5","#e377c2","#c5b0d5","#c7c7c7","#c7c7c7","#c5b0d5","#9edae5","#bcbd22","#c5b0d5","#2ca02c","#98df8a","#ffbb78","#bcbd22","#c5b0d5","#98df8a","#1f77b4","#9edae5","#1f77b4","#1f77b4","#ffbb78","#f7b6d2","#f7b6d2","#f7b6d2","#e377c2","#f7b6d2","#8c564b","#98df8a","#c5b0d5","#8c564b","#2ca02c","#c7c7c7","#c7c7c7","#c5b0d5","#1f77b4","#e377c2","#f7b6d2","#8c564b","#aec7e8","#e377c2","#c49c94","#c7c7c7","#f7b6d2","#c5b0d5","#e377c2","#ffbb78","#c5b0d5","#e377c2","#f7b6d2","#e377c2","#c7c7c7","#c5b0d5","#9467bd","#1f77b4","#e377c2","#1f77b4","#ffbb78","#1f77b4","#9467bd","#ffbb78","#17becf","#ffbb78","#9467bd","#c5b0d5","#c7c7c7","#c5b0d5","#c5b0d5","#9edae5","#ffbb78","#9edae5","#9edae5","#9edae5","#bcbd22","#f7b6d2","#1f77b4","#bcbd22","#c5b0d5","#c5b0d5","#c5b0d5","#9edae5","#c5b0d5","#c49c94","#1f77b4","#1f77b4","#9edae5","#bcbd22","#8c564b","#9467bd","#ff9896","#2ca02c","#2ca02c","#c7c7c7","#17becf","#c5b0d5","#c7c7c7","#9edae5","#c7c7c7","#2ca02c","#2ca02c","#c7c7c7","#ffbb78","#ff9896","#9edae5","#bcbd22","#2ca02c","#ff7f0e","#c5b0d5","#9edae5","#ffbb78","#c5b0d5","#1f77b4","#ffbb78","#c5b0d5","#ffbb78","#c7c7c7","#dbdb8d","#aec7e8","#ff9896","#bcbd22","#ffbb78","#c5b0d5","#98df8a","#9467bd","#bcbd22","#7f7f7f","#9edae5","#c7c7c7","#c7c7c7","#c49c94","#8c564b","#9edae5","#2ca02c","#ff9896","#ffbb78"],"topic_key":[4,19,19,19,3,10,15,10,11,3,16,1,3,10,10,15,15,3,19,15,15,15,13,7,19,3,5,19,1,5,9,0,5,11,17,15,17,17,10,3,15,15,19,3,0,10,5,19,9,9,1,9,19,3,3,17,9,1,19,3,5,3,9,0,16,0,0,16,3,12,17,9,3,4,11,16,9,2,15,12,15,8,9,9,9,0,0,3,12,19,3,16,17,3,19,3,1,12,7,8,16,10,19,10,19,0,5,4,8,13,13,12,0,3,12,18,19,3,17,15,13,3,17,3,17,9,0,19,6,19,14,10,15,11,18,15,15,4,9,19,9,4,17,1,6,2,15,11,3,11,9,9,16,15,5,7,3,11,19,7,12,3,18,16,3,3,7,13,19,16,18,0,19,1,19,11,3,8,12,1,17,17,19,16,3,19,19,19,19,16,10,15,0,7,12,19,3,9,0,3,3,5,5,1,12,9,3,7,15,15,3,9,13,7,6,10,9,0,11,1,9,2,3,19,3,2,19,13,0,0,4,17,18,9,16,11,1,0,11,3,16,4,0,19,3,9,10,10,10,3,10,12,3,1,9,15,15,3,3,4,15,15,10,15,18,15,9,10,19,10,10,9,9,9,19,1,11,17,16,3,3,0,16,9,0,3,7,14,17,12,16,16,4,0,19,15,19,11,19,5,13,15,10,9,18,11,0,17,6,4,0,13,12,3,7,5,9,1,3,3,9,7,9,9,9,3,5,0,6,15,10,19,1,9,8,0,7,0,15,0,9,16,1,12,18,5,9,0,7,19,9,9,0,1,19,3,5,19,15,15,15,0,19,3,2,16,5,0,19,5,15,17,9,11,19,15,5,6,3,14,3,4,11,15,18,13,19,19,15,0,0,0,3,1,3,0,8,11,5,0,13,0,19,0,3,15,1,0,19,19,19,0,19,3,3,3,0,19,19,9,6,10,15,19,19,15,11,3,9,7,3,19,9,5,3,13,0,10,15,5,15,6,16,10,15,0,3,19,1,19,3,15,8,1,15,1,15,17,7,0,15,0,1,1,19,0,3,15,16,16,15,5,1,16,11,7,19,18,19,3,19,15,11,19,1,19,15,1,3,16,19,5,8,2,3,10,10,3,10,3,15,19,19,3,19,3,9,13,5,0,0,15,3,11,15,16,9,12,9,19,12,11,1,0,5,19,3,16,12,12,19,7,3,1,1,17,3,2,1,1,12,8,15,18,7,15,5,4,5,9,8,0,2,5,19,3,15,3,8,3,3,9,3,17,8,3,19,13,4,0,9,19,11,11,3,17,15,15,1,10,19,3,12,10,11,16,8,3,15,3,5,4,15,19,9,16,9,13,18,13,5,0,11,3,4,16,10,3,12,3,9,0,19,0,16,3,17,15,3,10,19,6,18,0,8,3,19,0,6,1,9,0,0,3,0,19,19,3,5,15,5,4,15,0,11,4,7,19,15,11,15,19,19,19,15,15,0,15,9,16,16,1,10,0,4,18,5,15,16,19,0,17,15,2,9,9,17,19,19,9,15,6,9,1,4,15,3,17,3,3,10,7,3,6,8,15,9,3,15,1,16,5,19,8,15,9,19,6,13,13,3,3,15,6,9,9,16,19,1,6,3,7,0,3,17,9,1,3,19,9,9,9,5,7,9,17,7,9,7,11,19,19,12,13,6,7,9,13,3,10,19,12,7,0,10,15,6,17,15,3,0,7,3,9,9,15,8,1,19,0,9,8,13,7,3,15,19,5,3,11,3,19,19,5,11,11,14,6,15,19,11,9,16,19,3,5,19,9,1,0,3,19,15,9,3,13,3,5,7,15,19,4,18,17,11,7,16,4,19,16,1,17,15,19,7,7,11,11,9,5,4,19,11,11,6,9,19,11,9,19,0,1,15,7,6,15,6,3,12,11,3,3,19,1,7,16,19,19,3,1,11,0,9,11,15,10,9,3,0,9,13,9,19,9,14,3,1,9,9,1,9,16,9,1,11,3,3,11,9,17,3,8,7,3,16,15,3,1,10,5,9,16,15,19,1,19,19,19,11,7,19,18,15,19,17,19,3,17,9,8,11,0,9,9,17,19,19,7,11,8,0,1,3,19,19,9,0,3,1,17,3,7,11,8,15,15,3,3,11,9,1,15,3,9,7,19,14,15,9,1,0,19,3,9,16,9,15,7,17,7,19,19,5,3,19,11,16,3,1,9,15,19,13,1,7,11,7,19,1,15,15,9,5,11,15,1,5,19,7,9,19,3,19,15,3,19,16,9,3,11,3,8,9,19,0,9,5,19,15,19,9,11,0,19,1,12,3,3,15,18,15,8,10,16,16,10,0,6,16,16,19,19,19,8,19,4,3,7,0,19,0,9,8,8,17,15,8,19,19,18,3,4,3,4,9,5,3,19,0,10,15,8,13,19,11,15,3,15,1,11,16,15,7,3,7,3,9,0,11,19,12,18,1,3,4,19,11,9,15,15,9,9,0,11,4,3,4,19,19,14,3,0,3,19,19,0,19,3,14,15,16,19,15,3,11,4,19,1,5,15,3,19,9,9,7,19,16,19,4,5,3,15,0,19,15,3,0,9,13,19,9,1,3,4,19,19,9,19,9,12,14,9,15,3,15,19,19,4,3,15,15,9,16,8,19,3,19,1,9,19,17,4,9,4,15,0,9,19,15,1,7,19,5,1,19,17,15,3,0,3,19,0,4,7,16,0,16,9,15,3,12,15,11,3,1,19,9,17,18,19,9,10,10,19,7,0,12,11,7,19,19,1,3,15,7,7,8,9,12,9,1,15,19,1,11,3,19,4,5,7,3,1,18,1,3,19,3,17,15,15,9,15,17,12,7,17,19,7,3,15,15,7,7,19,19,7,16,1,9,1,17,8,15,1,19,7,4,11,15,3,3,1,5,9,5,11,5,1,15,0,19,10,19,7,0,11,16,17,4,10,1,1,19,7,3,5,1,15,9,19,11,5,3,8,1,3,16,16,3,15,15,17,7,6,19,3,19,7,15,17,3,19,3,9,19,16,0,15,9,0,9,9,18,13,19,13,1,15,4,3,10,15,1,15,7,4,9,7,3,1,1,3,10,15,17,19,1,11,19,15,1,18,3,19,16,12,16,15,8,8,19,1,3,1,3,11,19,5,16,19,18,3,11,9,0,10,4,1,13,19,17,19,8,10,3,1,15,0,5,0,1,10,19,15,9,19,16,5,15,15,15,8,1,9,10,19,9,19,15,15,5,13,3,19,10,9,15,16,0,9,0,6,17,1,4,7,9,15,15,7,13,16,0,15,17,3,3,7,1,16,19,0,11,5,15,9,11,7,15,0,9,19,6,15,19,17,15,6,9,6,3,0,9,0,9,0,19,19,9,10,3,7,3,5,6,3,0,9,15,9,0,9,9,11,0,15,8,16,1,7,7,10,16,15,19,15,3,5,10,1,19,5,1,11,4,0,6,10,0,5,7,9,3,10,15,9,10,7,9,9,4,7,3,0,10,9,7,19,2,15,10,19,10,19,4,0,17,9,9,0,10,0,4,19,15,11,18,10,19,0,15,9,4,0,11,3,19,11,9,9,8,0,1,1,0,1,19,19,1,7,15,5,3,0,16,3,19,19,4,19,19,3,1,19,8,0,19,3,9,3,8,0,3,4,19,19,9,0,19,17,4,1,5,4,0,19,0,16,3,15,10,3,9,19,9,15,19,15,0,4,19,15,19,15,9,19,7,19,3,9,15,19,1,9,0,19,0,19,8,19,3,0,7,7,19,12,15,1,0,15,0,17,19,19,9,1,9,9,3,9,19,0,0,8,6,13,19,3,9,15,15,16,1,6,15,0,19,8,16,19,11,9,9,0,15,19,0,9,5,18,0,0,10,0,15,9,4,15,16,19,15,12,10,15,12,12,4,12,12,12,3,1,17,9,8,0,15,16,0,3,19,19,0,0,9,3,0,0,9,0,0,12,3,10,19,19,17,16,19,5,4,3,4,12,3,9,16,2,3,12,1,12,19,0,6,1,0,16,16,18,17,19,19,8,3,9,9,3,12,7,15,15,16,9,3,0,0,8,0,18,16,15,19,19,15,15,15,0,10,16,17,12,15,17,19,15,9,3,15,4,4,19,17,15,19,10,19,12,7,9,18,19,0,0,9,9,0,17,19,3,16,4,0,0,0,0,0,0,9,9,9,4,15,10,10,10,19,9,0,6,17,16,16,19,9,9,9,15,0,15,0,8,9,9,18,19,11,5,9,6,9,16,0,9,7,15,16,15,16,11,9,12,3,9,10,0,0,12,19,13,9,19,3,19,15,4,1,7,19,12,9,15,15,9,19,16,9,4,5,3,16,9,5,0,19,0,0,3,13,13,13,12,13,10,5,9,10,4,15,15,9,0,12,13,10,1,12,11,15,13,9,12,3,9,12,13,12,15,9,8,0,12,0,3,0,8,3,18,3,8,9,15,9,9,19,3,19,19,19,16,13,0,16,9,9,9,19,9,11,0,0,19,16,10,8,7,4,4,15,18,9,15,19,15,4,4,15,3,7,19,16,4,2,9,19,3,9,0,3,9,3,15,17,1,7,16,3,9,5,8,16,14,19,15,15,11,10,19,4,7,3],"x":{"__ndarray__":"GSsa7rri4z8iw/eRPsIkwOG5OejogynANM64tZl4LMA5QWnOnH0HwF0mxlHXUhRATSot3PxTKkBottfhhGkJQDS5Bf1dEDDAj03wCIo0EcANr0tZgagrwGLwTz1Tqx5A8H92SLWfCMCFsHK1IlAYQHRI2FMylwZAsFr1dl/WKUAV2+jxENgmQHaM9sDjoRHA3MD49eECKcDHmommtQ0YQG7ilNF31ShAhEhw9kv7GkATqkc9oSkZwF/l+PIFohvA9CI//B8YJ8BNoPL3y/ACwKWfDUhBcBRAODbj7KKSHcDQteUOEbcNQOwmLBif6xVAPvnsbS5iJUCCHHaHa6QAwCF68ykl1xVAT1MCgb5NLMBz7Mt8RfUTwLegHKozniJAyNLeMswqEcABedlMcLsFwGZ22ennLghAT2Dcg/ak97+EfMAgBJwkQHfjSfrXTC1AGbxsVl4MGcCGCRuFK18eQHqp5XTyJxDAp6pECmR5EED1kMbBFd0FQCIrjiHwMyTAqUzkCXENKEAhDCgfreAkQECCN6C1MhFAEfsKjEFeMUDsB18Dd1YswAiYi/1VffC/JHSAbi5eIEDraeJbwYoUwGAd2B7mJSZAWjjiOwLrC0BDhAdDCgMewHMe25Rp3uO/3X7OK5au8z+nadDgsdQSwHRBzN8SxCxAgZcnMJYn57/EG6qV1A0nwIGXJzCWJ+e/YD42zFskC8C3qcW7PSMrwDIISpzOv/Q/2nXmt11J4D8MIlOoP5sSwOcUm2mZojFATIrgYlVbFsCd9rmXn+3Jvyg16+cYgCzAH5FLZaU2L8B3ROf0+KgmQO4UwnKSk+s/xkR83kkEI0D/O2bU55bzv1dYH+fYOxtA1zZ/ik/QI8Art0yadD0mQHKLI6WPEy1AkXUoFtyXI0CBlycwlifnv4GXJzCWJ+e/CTmWWrI8DMCbLFbxvabQP0RhXMnkxBzABGi/e4vcD8A8WfWXd7IqwNksqqWhHArAOK6MPjZBEMD8Q8DtDCcPwI+gXRct3Pq/pTLp9IjU+T80gKskX6Ltv9qpVQ8QgiPA5uYfbh9fK8AWc9pwADMawCF/V6CQ0iXALMp5fouKBUCLKBCdL2oTQBQy/72DWSnA6SedWp9eHcB8aDRge9cSQBJFDezZhhHAzrPgNIIgKMA1k86RrxkHwGy+jdJV7RfA3saneg0Z3z+BlycwlifnvyORzjg14B9A4vLutl46DMBkxBNCP+IhQEGWqHY6YhFA6n7aZyo60D85G8WnQawDwClXlFujgShA2uM95HDu7j9hsADlA8sGQL8w/3vwDBjArjMvsl76879m9uYirm8RwOcUm2mZojFAJJEzlKStIEAWg1hhwJkSwI7+q8GpLApAAOtli3eWJMASJwRPQGkmQFbrKicXeApAMzOGWxhAFkCNfk9aMtUjQHdJREffIiJAT4Ff3XEpJ0CIhryLmr8mQC3hGnwBEfS/bdkwSn23KEC92M6/a2EpwDmZUEqpUy1AlIQiFltH+L+G9v0C/3gMwOqcwGdVDQJAQF2kjdHuCECMsU+FDqfmP4fIEB6CDyJAUKFbLnYUHMAv5KKO9OsLwLl1OQfI4i/AhBvHk4ahJkBf2zrNATwyQPHhpA8kJijAqglTmJkbJkB4U+xVgHv7PxBmKo++XCTAOSmqpr5NGMDbz52ITAgwwJx4nGRv9SHAr5NgEVePIMCnS7WRb8nWPxPFiXKeQd2/gMIxq4kQGkDdxETaVMsmwG+km3iAuBPAitNrZdkfBsBsYPK2Q90gwLSgAYPsLhzAqsm6flGHJcBEEp86QOUmwOrq/yRvGSFAgZcnMJYn579Bix8o8zoowNKR50M05hJARVk+A6CmJECUxFgbbUswwCLcNpaENQbA6JYDKQsKLMB0aza6QRbxv2lW2u3hjAFA3AlZUb4TC8DXGTO46CAGwLKGU+inqSnALHTWjcKuK8A96NteUP3yv5w2JyAstyXAj/GXSGX1E8AwU7uEKpYLQP5ADkTSjBXAVCkDvkneJMA8QGXms2EQQH8ydBmcbi5AgZcnMJYn57+z8M97ZVElwF8hCs7xqfW/88YD6Q3jJEB/IjYJ6t4DwL8gBl/cFzNAwxlfYW6UGMCXELOt0uEeQFOzO3w2dwvA7DwrnaXVFUC7b4OeZELwP8p0iQ4F9xBAnwjBzrfl4b/Z/m+vevApQEDKHlo3RfK/hnADo5c2IsBpQ7DL6XwpQLegHKozniJAuIdfLGLz+b/XxIrVlJsuQNq4+2yZYRbAN6141GAPIsAY1kfS2A0JQDjRXJNkyA5AaQ3Zd3FkJEA+XZY1txcWwCgv7m+FHivANgogCzNRH0AzVsQOMUwiQCuP3gkn4x9AE0a+sMktEsAizuRuTxz6v9+qfvtgwgzAY5aFtWHfFMAyiWIpP3QUQBSqPkGSRh3AgZcnMJYn57/LiYL8c2gSwHH8ompOR+0/aKoFMzbtB8BKYxw4wjIjQOUzTPEMHyRAk7U7F/OYLsCtWvUvklscwG092P9JndW/gZcnMJYn57+XOee0GswwwLiHXyxi8/m/EMcScpFXJcDit9YLlOoPwAKjNfFr6xvAOxNsfT0MKcCfOB/jTIEfQDmZUEqpUy1ALAhRSurZCUDYDjU4+eIMQLMI5FH+rCxAzJMij6gyHkCpri/A0kAUQJz5HDUGNAVASBMKx+n2C8BThltbeDIRQM0V9XkeNy1At6AcqjOeIkDIcMoWvsQlQOKyYtHyUQRAbYW8nz+05b8DW/K8+PEQwE++gX5srShA96xOvQvlKEBFWLEwDQ4NQPci+RpqgB1AAzOmH6RpJMCdfqAQkuUfQDjcwdT28DJAwBqrnm7yFEDQiHe9Bu0qwGFp/zSF0BRA0ymY5YceB8B3ROf0+KgmQFOnajSgnihAmpYT9qp2KkCEnNt0FbokwE7Gx6cZeRlAJd/nbRWOHMDBh2MdxEQFwGLgDEAkzSrAPejbXlD98r/QXfrvZv4iwAh/MazsIxnAJ5u6z3B2G8BfVk5cvDAhQNDkS9G/aBnA8YEt/+tP6r+I6emKUDEpwLl3K5qVdyZADlljJ8KREsAuVCgcXM37v8MsbafaySHAjXw/qL7aKsD5A+KtmwTzv7hPRIAZ4R7APlsOXAYHJsCPY4FxmG4qQHrIelIsNyfAwVobtKTHLsBMBEsApuIlwBG1S9O06gRAN1twRYleE8C3oByqM54iQNI36b4BmBhAHGwkm2jILUB36ZWxvD/bv7yy4yqAPi3Awo7eMRu2CMA0YxTkJT0HwAz3DJjOoxFASTGieXQPEMCBlycwlifnv9nQ+1NVFBvADmIUQ9N4oL8XOcmJWtgXQEoVbOsGzSHAg8/Hfm4MEUDNFfV5HjctQMrNEw4/AAJA/zqG96eK6r9Ne71O/LMjwHdE5/T4qCZA5eQNxJWQI8Bt2TBKfbcoQHu2lHpSES5Ad0Tn9PioJkBpjiIaWC0JwPmWQwGlhRNAkzirM7qyFcAINJy9pMMRQOXJksS45CVABx9zO7QbFUABfEQcq5AqwLFAjl4i6hJAzRX1eR43LUD3fX3LN+8nwIGXJzCWJ+e/UBjlF5a4IMDuW/41NFsewAkK7v0SdCJANCHsLq4ZGMC4vqV0GFstQHcPYbzUryjAaCYYMQjwFUBxgo6ZVEEEwF45YRDm9xhAAL7n/PmMEUDnFJtpmaIxQIGXJzCWJ+e/6uhGcCbfHcBq8p3rOYwiwKaeeBke7yhAWGWP/Tj6JkCBlycwlifnv1H3WXYWROE/QXhcLL7xJcDH84aV3M0KwJeBt9DilhNASZy7YKAsJsCVzrY8cYsbQIAs6M/p+BpACeyvgjX9KUCMjZg3kXIPwM9IbOBqOQNAOafhGEq0IEAkeK4ttzzkP3k0gXMp4irAtrO5VwBQEkDfgd6P2AYfwAWZBOmTpRPAy+9R4kdQFECddGv6WVweQN7NSNjQ0RLAd0Tn9PioJkDuudkaf0kxwNI+1ZVqXSfALRVIoJrQHECGjyJFQp4QQN9W7X99BQxAs0HArexM9z+WwstmvXkmQIXrrbok9fQ/C8ge/AUR1b9omSQl3z8wwLegHKozniJAulNaIyszI0ChDdLxVM0UwI7B5D6hWCnAbWYV1S43IsAbO+KN3BcnQM3cL+BpvRzAAiAWYSdJGMDZw9EDOtwXwLmOMtxf8hnAMzEK1SXwE0BuHQ6uZAvjP4GXJzCWJ+e/LZyjlVLtJMC6dayzmiIswNZ4BLCUIxVAgZcnMJYn578rz2pcoy8VwFImCo48IP6/PnRb3O9XJMDSROimah8NwBkhxiy7IPO/t6AcqjOeIkDfgZ26ZXDdv/3+DTkDTg/ANdleHU+ZJcDQYaS8gQkQQLwqiRspbSbAgZcnMJYn578yFiTgGsopwJMcov/XjRDACSWeUeD6C8DTL/YxJH8JwIGXJzCWJ+e/72WO6tf1EECHXwZM1UknwOBoGqf0nDBAVHl254YyEUDYQpcEeJYRwKqAInpMNydAKJrbtxcSKcBEDVPLqBMYwDUoE2dYwRFAQ2S5AToZMMCbVLn5E7gQwEB5tGsTQixAD7rDk78+JMDD04cnh8oAQMJDNVagYQlAmI32Wh+LMEDL+z3yDwoVQMsH4g7AIBDAyaMeEOibG8C6TWX6+hgKwCUuu9aNLxBAe6AB6QpMLkCBpBmK+3oGQMr4hgFIPSlAhOO90pqKCkAF8sDOp/4pwOeTsGh+YhNAt6AcqjOeIkCBlycwlifnv3/tCGxT6BrA8SsefAlGI8AVzr97unEUwGLDoivVeRzAuIdfLGLz+b/B12lgtecVQCqjqwm5myjA1cqJS61c9T8e67Qy2JknQKvImf7ghQdAocqteb7ZE0CuTL4dYuwQwMjhYr4AuSDAgZcnMJYn579sxxCzPOQiQEZ1ydosbxHA6HlcxO3DFUBEE0PWnWMJQAPbWv32cifAZHBw/b4dE8DnOtAKky/1v1idGHMjoyRASHQ0Wfc/HcDpiLe+H6crwCpf/SLp2CtAp+2uDrGrC0DzFOE6nYsAQFBhfSdy4RzAFKCqn2HVHsAlmBv2YN8fwLVXh7CijyRA6NNOrB0BIkD2rJYnYUAiwJ8q7+Gr9Q7AYLwGNnNuLMD7O9yupqErQAbFW62vPzHAx7Tlrx0lEkCvNAOml78VQIsCAd0AfAhAQ5I1UgUeH0Ajy353nrsXQM4Ejkh6HgfAPRID6H6uKMDJAu8JBV0cwBngF+EuNx1AUzkGWaWxKMDBjfAFnHTzP46afCRGrAzAwvn2Dn3aE0ChvrWgQKUGQB7jpd6NxAXAFHDEJ81jE0DCo+KWowwgQEe8RNn/DitAuA+K3OVSDEDfM8e/Q2gkwL3fMYkRx/m/ynqBEw4YJsBT2OUY8WMRwCoQDct62TJARe79MsMzGsBHEM53EmkVQKCxp65UHhzAgZcnMJYn579jlQ1g1SkqQMejOyaawA/A9y92rtZQE0AeBROMGn0pQCHXdq3EmifAOGhUo6jQJkCCi9amgfnhv8TtvJ44XCpAmAVLnrD/FsBiQVae7dkwQAxVsHAHGTHA9S3NcsQ0FECeu5SW0xYHwH8/aLchixFAGeXQr64EI8CXyHLbOjsMwDhHmadaMSfAQ9QbgdmC0b+3BrfFeo/XvzcmuNwWFSjA5q5sFUVwIsDZu/BxB+UGwNSce04ROR9A3+F+kIJ7GkD1Qr6HDh0EwKGO+Lu00xhA4BmUUlKq9T9B9CRjlEsNQL9d17riMg9AwHsSLWjl1b93Ro/pefIqwAVjwql97QFAjO67j0DIIkA8VCPfTFAkwCspiyR/jyZAuUl1UCo1CEA489yaQgcVwIrUoyAYhhNAOMEOh/kHJkDzvlU34kUpwIGXJzCWJ+e/Q9d5rTa+9D/qVk+VcF4RQFaZP2ZqeyzAmRT3+fg8BsCz/jvMlo4rQA5KDOeCUOY/Tip1aEjwK8AljwKA8XEaQNeU4n32Mvy/X31QG74wJEBGyzUi36cJwJtKgz4PWg3ALR3ymftfI8DCLhK1JecWwMaMjUFg5yPA+64NYGfqCMC/todEAUYNwHyxg7cynQzA/owEFtZcK0CF5MXaW/MswHV6UKzrOTDAUQe/tGBSG8BI/1RzFtUSwM3tMdZyqg/AcFlp6x2CIUAJ7K+CNf0pQDQoT/SSABdAVnf6xrC8D0APdg8kEjktwCmYPzXCvA/AEW9SXvqG1T/4M8MjFDgGQHRVX5FBuC3AM50ddHAjL8ATq/ybjfMqwJ4Li0SSrw1AG6spxFcrFMD/CdJGidYewKIFLzViYQdAqunr4bFOBsDqA6ULqzkbQJF+IqtlnxBA83T13onUL0CJ211oB9gmwCPIIn/ZECRA5USaZtD0FcCerQ1hCVsgQJqXhdJuGRbAGZL5QnyGDkAWLnpP0XccwN2fqYx/GzDAOuptLUlfJsBtE9P9YaOlP7jXZfSGoCFALuChZ99mFUADHVCnCkb5v2pMaWBa9+G/JXU8pjxq4L9GJe21x/cjQIGXJzCWJ+e/FQ1gYXxo+r+Inj68NcUPwCw63ItENhvAIUn7kZbj1T+RaUioTnQFwI+E8kQ+XRdASWUsByD2CcCOEra/YJ8XQK7UGE9DbhBA9W6DsviGEUAFQHAw7oIhQKuTRlQNgBjAOtofRNU/KMDngrV2CMcJQEZSyZsv0iXAgZcnMJYn578UCsdBEDYSQO7GCfwtsgZAsSFDvK3IKUCBlycwlifnv4M3cvF9hhrARZJtwN9zyj+Blycwlifnv3wJZhKGXgdA7oHuab/hKcB0jw0YJvcXwAs+PmoIZBRAxrDrqFaLEEDup+05InISQOx+vJkkhRTAAKwJOSoiJ0CBlycwlifnv+FmYZhEWizAN8foWDXuCcC/ha/Q+2wbwNhii38KcCfAhtIuPKpB9r+KHJ9b4GgxwEBeX+O4ECJAjTEGChGnI8DTH25aNP4kwMCfjL1OEybA4XjQ8XLhKUAiT84BeKQgwIGXJzCWJ+e/3fvuRjp2G0BT56XX5jEiQKQ45/EycCjAMXahKuIVKMAHj/Ki8hsXQKcMoG9uEQZAgZcnMJYn57/vqTjwqffdv+HSQsNeRCHA5bQPJqnDAkDv4GcGPZkrQNXsWnwaEyHAWr5U6BfREcC8aJTTVrcgwNbdZEwqeRTACeyvgjX9KUBgp3vrPoLjPwjhngYwyiBAPREBbYHvMEB4J19B/soLwLqp/NmdxR/A/PhUX5t4JcDG1hTTTcoxQKxvU8od+ylAQvheBKNuE0DNFfV5HjctQMcMnNd8wBBAjuFTYa25E8CILAawDw4kQBj5bT0x5x5ArUvRcvg+CMAtTOHR/kfgP8Aa9Dt6FfC/CyskfCO5D0A7GnI5UigfwJO/npUb5RLAS1gfGg0fEkDJdDlGXOMmwLLHynqNSCBAJj0DDTpUI0DnV7t5qaX+P3zHBaZQ0ilAOvEe/lGOE0DMWy41PJ8nwJXedrtIxRJAC76ABtXrH8AloUlBessrwFRu7meEoihArWvVpuORI0AlSBnRLXEYwBZGOQLbCBNAQeisspuxGsBESu+koc4ZwOwaYimTfR5AJmp1v5RN879gob/pkqsFQLQNYfyoMSbAd0Tn9PioJkCvOLBqddMiQL+x9wkTyyfAaoeV9ZUNJMDoXvBOSnwQQEoy8MjKMRhADmAOEdT9D8C54qTZGMAmwFkPhzwA+gfAquANHTzUEsAa0atQSjAJwOBoGqf0nDBAp88xQ6NNFkChlJFOVlHtvxD+1PHAHCbAzRX1eR43LUBUp+9YwlUiQHdE5/T4qCZAHUo0cBxyGkBTBl9m+0EgwPaJZFuvLCFAiwK7gl9qFMA1MVe8W+ApwHdE5/T4qCZAjU9/RhiiIMCp2Mulw8ErwLypijUVSRDAuunBdYkn0r/Yrw6i4zJyP2Q6BBk8KvA/6S6VPmytBEDieU8U+zYLwCE0lVhAayBAL2/jvLQaFcCzGy+PMV8RQGBPGtEJ0RVAViRKVgj9J8D6i8LCmJTtv4tcyQrfoSDAgZcnMJYn57+OAi990xsUQAAtUwf+WCJAytkXrzXZEUApie2hZgL7v9fEwhXp6wZAFiymQy7wDECBlycwlifnv4E5pRXoNCLA4vtNrurGIcAtUhXhpDwyQGJZLegSwShALRW4mWa8J0DrnGdqKVEpwGPpsoXhmfo/gy3MM00BHMCBlycwlifnv5PHtrGslCRA7jbgupgRK8CBNP7NzXEUwIVotNv4QyLAuLISVOf1GcDvBj2Q1nMgwABWjuoJnyPAI2E++6lpEkDBhNaFZuICQHw7ZngO7i/AZIKdqHVn8b/0ZofwW2QpwMHSLAhSXCfAHv2M1fzMFkBPAHpjdLYrwBFNi9AqYDDAT1mCzhl0JkAnAFUYquAIQKEu+Ez8SSlAb4Gv3JdBCkBoEslh3zowwHdE5/T4qCZAFBW8L7vPKcCYmwTSUf4QQHtq784ycOW/2D1BnSX/DUAz1CZP7EQrwGkbWXQe0TBALT/TpYO/AkBv9C5IrT0WwFfztJagVOa/uHrfKfmMCUBQEr1Zc0QTQHdE5/T4qCZAvUlNkhLRGcBlGwM29IMXwDd5lzdoDRvAV4khGCG0FkBZ1aYw0w0gwFkTec/o6RZAGOnS5BArJMCrjdZcjqLrv2saJMdMABpAM4ac+LddGcCjeYXodBAswFdWjxY5DyLAFtpV0vIxK8CcH4RLZk/hP6HH/VmtbCbAqLeJntZoKcBzwd/V0bYXQHkZm3sKnQXAPhm6Wr5uJkCpAKvyH5sswLqDc3khWyLAggz2g6gMIsCa3k+NR4ovwE8TeaL0vi7AIzITLC6RIkDKBcc1y1wSQEHEvDiI8H8/F1ESuCLyKMDEGpaMsh4wwClaBYsNEjDA6QQ9XvZMBUBN51qTarwhQItlkPry9xrAwGN5ldFYF8DnFJtpmaIxQH8nH7nAbR9Aql0y70ZD8r/nikMe5sUVQI2vsuD03RRAEjvLj02pHMDuEwKJaTYSQKH9hdhZjSBA4/ih6LZBD0BDvb3eJfXiP7cRtLuCfNO/GBKX/ULSL8APf9emCuEhwLx8DnZlZgFAc50gWBZeIMCQQ6pvWiQRQF7AgLKhvyNA4xmkMLywKcCzJR49u98GQFO0pl9uzyXAS8K8ealaJsC9amGuCiD8P6PPrj4NzS/AgZcnMJYn57819sF1hTYtQEY1hoNj5B7AfavhtNRNJECsqxjZ8ZQJQJdDXgd36CtArthziSIwGsCBlycwlifnv1YmS24cPy9AySV9/IqnFcAYOPObEn4oQKEEz+ZhPC/AcZgwuveNLUAZrPanW08mQPOUPPJODRLASOGYf/6OFUDNFfV5HjctQHdE5/T4qCZAZkGXxm69F8A/YOYeEJcaQLpjUdmPty7A9yIVqMznK0CpwER5+ggSQHQgP3c/WC/Allbd7vo2F8CPgjXqG3DzP3TYU4kr2C/AvsOjfenCMkD5tt5Ils0RwDBIThXzMMu/uNu7nspGLMAw0k+K09wiwOZvoqOrOBvAOy6M/VyNKMDzd62yjeYYQDlbdmtDyiBARk+mHrCmEEDbKDCIWC8VQFfMT1bBsAZABIXTuFzwJEAO1Q4VT+8bwA3+ihQEVxHADt0BCPkFDcD7IdmIZW8RQGa8rKtNbiLAfxyDezw4LcAhQdY6WGYWQNjTm2G9YzDAoG4PfE1gIMC7m9CENykmwFM2dsYrcRpAKbOtSJOBF0Bpjhy+ZmAjwMV575oMvBbAoafFOKI+K8AwSE4V8zDLv3SvKcQ8kBPAe+n3xCJo9b+f5bTi61QpwIEkuUvMfjDAORjy/vZKG8AyZLSX3lEsQAveIxqcxTJAsvgbNulqDcCol+ukPYAcwM7bGA7C7xZA6AYM8DIbJMCEJI/GlmckwI4S3yRtmCTA5IHZ8emfDsAt91JmfcUOQIYsNnVCbCDA+AzZ87niEMDisM3v7Ej+P/+moLAJmTBAgZcnMJYn57/zrxjlVXYWwOKYixyo9RVAVhiKyPClEMDbvalmrpYFwAVpCYCs5SPAh/8DEvOSMMBGZuGuVDoowPaZAWmsniJAHCtk/Hy3JUAihhoBKFHgv8W8b0s3pdo/NmV+v31yL8AsxZXa45orQC5lmZI7WBNAIM92C2ldJ0Co/VBKWnsUwHdE5/T4qCZAHQYeuVMGJMD7E5JSRAAtwB7ZhlPsOidAeCa7wuMTJkC3eS0pZmwgQDnskYtaXwxAgZcnMJYn579vHj9gpL8KQL+9MvcDIiLA/NlpQFSRLUBZEZESpXkqwPqMOJDOUzFA8zQDoEeAK0B3w5qjbkIhwIYUyPsRwgPAFUbll7uuIMCjHDUJEY4SwDRpT5A/XhTAq5Bcm3QaDkC/sQLCL8L2v4kr0oEvXyXALwRZxBmqGsAnpmKP3MspwFkMmoiedwjAogQbHCWxFUBNJKj36aUmQKOq17vN2BxA0PrVuiEsKsD9qtkJdj8VwJGWoyCGJxBAq/iRWveyJsCPWJ7rBvQWwDiBn20GNiDAn/uYISu5JsC3212tw5kLQPaZAWmsniJAZ7M4mZMeKkCUTzF5rQYzQH2hINyhshNAujdhDghKMcC2lVH09jUlQHvKkx0iFxBA9ZZIpCikFUBRBllIjIEOwHuVEaomESRAUCc3mgvfLUCyMjunDEkpwMVh/81LHBHADQ176TlQJMBn8Y6cygAoQNi2iVXXJ+8/mSLymvQ3IMAnpmKP3MspwMu/4KVZvChASctB3bDgCMDTQxJ+jVYewPVOmmwWEQvAqAfNTIHaJ8B3ROf0+KgmQAd6/sjs0hPA1vwgFcthCMDFwCbMsfooQNdZuxhEZhVAWj8R8t2MJMAbhivNc44pQMACgf3iPibAyKfdmvKvJEBXy5BMC1gwwPmmxjsacRvAB8Iyd4T3D0DJMhHhApYVQArYgXl9PgbA0GL6gLaUGsC8+NEI3bABwPaZAWmsniJARULxmiZKI0BXgCMGJvgjQIFwesb95SvAq6Tnvf/PFEAF0PWHjPAoQCemYo/cyynAYlgKnvS4JsCBlycwlifnv1//gATtpRFAK3mhsxMmK8BRgUe7kyMqwEHKmOWd3hBAZ5fCOycLLMAnZY1ao0knwIJ+GNlaVyzAS5MSWy7iG8CZ4sPSdb8QwL6Iz3g28/o/oG4PfE1gIMBKBu61TL0YwNbAtKzlBiDAgZcnMJYn57/k9A4XB/UyQC7tWJ77/CjAHIegc8RrKsAKIiApqPgTwHQZTnuWlilADf/FU8SkKMDYeGk6mjYgwIjCW+kRiBnABrluQbznIUBGN7jI2rjWP16v0DiLyQTA7TG/Rokz7D8MMaGYO1MTwOljusRVfiFACFPbOv7ZDUCOxjW97CARQOPLRnJpDxDAUGlJphT3DsAR474LsP8XQAh8dnZ9ASpAfdS1igWjJ8B0a9ADp80YwOpSOvhNcyvAIBNRuXSdLsDfiwoFgeInQDAZSG+TzQnAj+fw4j6mKECXOx1Bj2wUQM6K3JnjrDDAt6nFuz0jK8BtAdK0WGotQATAhEo1PRvAX/sstTzpIEB4cyJQ1zwLwGE2T1DmZ9I/sTx1PBMhJUCBlycwlifnvyRj1M2iBiLABpD5lqzFJMCwKPbGGBz/v+sC9y7X6SBAsK62tbZWA0B/XTVyAbQKwIjTlHbkZAvAEAlSYu8VB0BkVxONZCkxwFN9i8yHcClAHgUTjBp9KUCiQB+IZ5wWQOcUm2mZojFA5c56k35GJECBlycwlifnvwXiefk/LzDAw25PXx9pE8CWKKnjNc31v6pkVs68IALAiPIjKxgcIMAY9Ee7b2MpwJySAKZZZiZAjRuQvvvG4r+Blycwlifnv70/XfpvHfO/KahwdFJaJsB0ZFmGnHcmwIGXJzCWJ+e/jl9dud6FH8DY2HPfliPtP+mcYgcWniVAm5Q7KDY0JUC9AxQo1icowJeuyOQFYxRAcltuV/gg/L8wSE4V8zDLvwmgUk3E7BvA8WOUnBzG7L9OlNB6xsMNQBRLT4IYqAJAMlxK8RwAB0CgU9CgNaYlQMiY1BaLzBPATMzIT5LcJMB3ROf0+KgmQHdE5/T4qCZALZm97PdpIcBIUDMcwFkhwNafsFsgkirApADTVEMFIcDNH/CrpTwXwFCuY87QjBpAMEhOFfMwy79dGVXmGzgjQAK5S+F7ZRXA4YVQxwIGG8D2mQFprJ4iQJAPKp/ayxPABCSDq9wmCsBqtU+xHBImQFFzOL6EiRfAa4RGu20uKcAWzkcgSWQiQIwwuUyTRfY/9PlgoKZpIEDqVu8bDxsQwPHtVdtTJvE/HQ4kWHPXKMDNFfV5HjctQEVRe2IhgRvAd7u2PlziKEDo9IY5+U3xv9XgojUtSSZAx9HPkXvUMEA93aU1gacpQIOA5sy70wXABqg8KXxhKkAN/EIZLJgkQD0o0a3gzCjA/CD4jtntCcD59CSjN/Prvyag+JdvfypAKYQ/Q9d4JkB3ROf0+KgmQNZb4bdROirAK57tiybgKsAicPUwXJcgwG5E1FIMThXAcoLRTIDGGsB7bKFuWGAEQLhZb8cNZy1AQ3n9bh1sIcAaG5qoZNcEwD6BQ4/QPLQ/4Ggap/ScMEABKLDVpBv2v2re6PdFIypAgZcnMJYn57+jmDTOiO0oQHVJfmPRrw/AEh9pS3p6JkCjvPLYExUVQBJlOZ0jxBzAxyGb0+IKI8BggPuzV2sRQIZE8+DNRgZA+jgnY8UvEMAmPpjt1jIawIIyFYaoRSZAH0824Vu/GsAZjGQm6dkTwDBIThXzMMu/hJmNo20PI8Dc6sX0OKcMwGlI1UgvMfw/AHUZ6erbCcAXIftJ+LkWwLa0+laQpQ7At6nFuz0jK8Cah0UMxJ8pQK3BtOiRrSVAI/bw+imuGcCMJOqyqEnUP0gxnI9mhStAml6yTa1VMMDDoilH8xsIwIZ5baMWhxlAi9c/pxDKLsCf4nRzaWcwQG3XdMBLdQrA2rUpzv8AI0Akfbe3tn0hwJxL4lFzqyZALCekjSHCGEDJUJYtInsWQM8qjjirhiDAnS9soU6wKcD+aje+B8YFwKUKdFQt2tM/mE/uN783MMCeQTDmF3ImwKMWmB6ZLRzANianzfZZJMC6rmSE28MVQO1yIJR7NiLAvZEPFa8GK0Ad3/a+Lu8RwBrgKYCjIxvAYCq+QBBlKsAZ0fELDp4gQKmZBrUxgbw/zRX1eR43LUDOEMraRcEVQAa117rQCStAbkbQXiTBJMBbn2PO53n6PxM3mqyMWzHAEn1f4R+SBECUZL+bkzonwA8dcSZ1EQ7AP2pJjkL/G0Cuq9RMk64gwAyN1xVbFiLAXSjGT0mGFkD8GT7osjUjQDU9TDEAGiFANCJRZrSpC8CK4ARSazgZwFL5hl4GHwPAtPp0I3+jFsDS5XWHvm4XQFj0WCWC+RBApI9Iz6vtKECofY3reNEmQCPrK3GocwHAuvLg2RBWBkBN67KT8aEhwL102eCh3RXAuT2a7gi1GMAMjJUbrw0lwN7j1PsmEfO/gSA2xNgVJ0CY3xqK/bshQMkQT08LWSXAzR65M4flIsAzv/jPbdwbwMLoqLPLURRA95rLlJ8eIcBz90Onb3ErwDuoP1cP9xlA/GPazCt6JUAHkMI+DikOQOh8ukA0E/W/WDtsEY4iKsDyN1amycIZQLvsgwWPuhVA0mLzuBVmEsA7OSD7MGsMwPz9MkthZxbAdDjNMHYkMcAu56VCGsIkQJMJcZ9LVBFA4tzreV6sHkAcbmjnMC4RQCkU9FT46xBA4Ggap/ScMECeNRHLyq8NQIGJAlV90iHARk3TS9pgFUCmA3mxXsAVQMW5WQc3MCJAv/nlY9OwCUC+aJPAVT8hwKVQtk8emRNA24uUurKuEsBteo3fMzkWwML2ic+OygLAIfRw/UGiMMAaHmuPzXspwMzT50SP1QjAqdDfyf+u7r+rpOe9/88UQNPZtjNJUwBA0bgNdbCjFUB7Tl04eaYiwA+XvYShTSfAQWeYPpxy4L9b9UhVmYwAQDMUxagNERdA9pkBaayeIkBiEnWxdYsnQHbY1ab03SnA0rKEeOQaL8CSO9S6V2UdQFWs6EiXEwnACQVDPO7iJsBFBo9xWr4UQG5GTkjfbxvAl5DurDMLKMD7f2Tw3sUpwCqvOaFG8R7AdhV68h3XJkBNmFLhIgAjQKUcbojkVQrAcPczbyMMIcCG90kRFsQTQAQxyGYw/fK/+fAlYVe78D8x+Gb0IoIZwKFc2Fyppv+/y5Nw+dHwKUBYmohV2LsEwDW7flfCj/O/7Xa8mZXGD0CxkJnlIZT3vzXTe3l9fiJACgYS1frNFcB+cumewpEVwAHosZY4iA/Apu+nUAyD+L+fPi+gkQIyQLEKr2dFpQVAIgwMlh7LMEDNFfV5HjctQCpkQEavnR9Anoha8/U3F8AYCzGBYMUkwI75VM26oBvA+hCvcgDOFUCJEtsWwdEkQGNFRhjUfeU/lGhb5RfD5j8i5rWZNEgbQMVzA87V3ilATX6ujyOmB0Dz/zjlutAjQLMe55KPciLAnrFUGfEsEMB2tXtxzbwoQLNh1ullwRXAv+j+bnSmGEDNdWXEBMMVQO9mcXTXohRAm+3tFJDY8z+fes7gtkMUQDAsOWWrACpA7vD8p56ZA8ARb1H0XUUQQOJTBV2FtwdABWIiyUJxMMDmLRf2J2sHQG5bTzJZRyNAOqO+vd7MC0CgNpH0W0AjQKFheCytXvG/5cXTubVqIsAB2BbVaaEZwLAsMNMpJQrA4nx1CliXKMCpqwlON5AkQObzEImwCSnAIYVKhkYKKsCq6PJWwAgmwL+T8+8rS/0/PpVyGamrAsD4pHNe1F75P/Swln/X9QrAmIbwbuReH8AD7WzhbgwQQLAXUzdl/BBAw3q5JavTJ8AZiXFospEXQD8eQCoQBCNAKBa3qW/pAcAsZy+6KDkwwGbdpZSrojFAmKM3wVYbE8DVaAeNswwQQMSlPSojaQjA5k/P3okSGUDGYJ5LOvAYwO+yuACBJyjAfLhZKywBEMBrd3zZTnnkP/RHQcWrVCnALIhiaFYoFUCFn21SeogKwCBR/a++2BlA8hnZONAOFkCNU4cPD9/+v59WRI+Z1QZAYXWSLDvIH8BrA7NMCVIHQN4sryaJ9RlAzOoHKhX9EMDUth4+2dIoQHYxMa0YBCNAjFGj2O++JcDSFxFbnyUswGLsQNmYDBJAvVNjpOYKJEBK41LbZAwnQLDI3Ne8wx1Atktxt48nKcCQ3x6YgbomQIXVsfY25ihA2VVRPx+tGEDlxp7m04MkQOBoGqf0nDBAmpijkTzLJcBJxXQxXFMZQNJWzvPhABZApPcopYAe8D8UbsthTzkbwKJASRrPmhDApYJGUe/dJMA4vBN2JOMZQAPI/pOMFCtA9lcsXAtBK0D7vS8nZkQowIGXJzCWJ+e/4JIU4C4wLUCBlycwlifnvyb5myoIbgxAaNPHoy/eGMCGZkKfcpwXQE6K70DUiey/x7hkj7OnEcA5Zla0FsUpQDAsOWWrACpA2Q4Uah2GFUANMTjITyIYwIHwvGmfTxXABkLZUgFPG8CBlycwlifnvz5RImm1IRfAUx7+F7PLDsBVk/a/Uf/VP0K0uBIagADAOqcp334ZIsCe9FKS93cQQJXkte1VqijADkBJCo0YJsCBlycwlifnvx9fK7x8KTDAtUwBXZQ0EUBu/M9ULn0mQDL+ylV9YSlAj1FKtHYgL8CAuexAgYwkwOa6+yYjMC1Awoy3167EC8DNFfV5HjctQMcj3FuB5ynAeDo8WCB2IECNXQgm3iYiQGgpkFiSfRBAIjDpg4fnBcCY6mGiWQYhQMCpKOCeGxJAScitkBHeLUCJwIKGs3wUQNri7088oApAJ3ys6rMQGsAPJKXRLgojQKDTvftSSyDA4Ggap/ScMEAlR1fUDGj1vx7FidBwAAzAIxb0BzyvF0C4cxKPr/kxQIdMUpCrIRVAOBXrF/sVCMBAhcoaOF4gwPGHTnZkFew/SeELb6jIG0BLsJ9NSjMZQAww/xHi4SFAgZcnMJYn57/NFfV5HjctQB4002nd2CZAfWWxF1qAIEAIjiQhdKILwJxL4lFzqyZAcb/Q8M9tJ0AB1mc+ZSsvwIGXJzCWJ+e/8oXWyCHPFUDArZKcj5EowBXRGeXP7CrA0fSqofPKFECEtUs2wfIfwAyBNmicviDAG7byonS+EkBmbz83D4wrwMxxK/uIyClAJUewT38kFsCbgQIKSYsrQG79YBC3EtC/vhx80gsQFkCqLPPi6bsYQHo3GQJriSBAWnkxZFHrGsAJlEdrB74UQFJ9nfvs6gVAYx4rGZmWKcDsKIS1AV34v+V2VSXG9hTARJdi2I1wE0DVfpOVKD0WQBP6H/0z6wvAum3jyqOUGkDZIbual6MmwO9spbkA7TBAaiD6rCQ/DcCSl8YqMe4PQB4FE4wafSlAvs4f1zcWKUAylgiMd1IWQLcxHm3k0RHA6aCckJ6rMECor1S2yUwtQNQH20fdyuO/8iGjaEJWHsBSThe9/6EAwH0LOa2CsBzAu0mKbRjaE0BwqUmKsGctQFfu/XOVZiJAnq/qH8N1JMAeftQj/IP2PytpC/uBHCxAT8Pl4A28DkAkjJEtoeYnwINqq67gdRFASDesMmXIIcC6hV8hrqT5P4GXJzCWJ+e/XPKVfB2qCcBn8gaNclYrQPRLoA7e7ShASPgOisN2HMCIztqFdKAKQIGXJzCWJ+e/jzHKnTPpB8A06SyyuLgmwKyk4cQpmCNAjf2dEgacMMBVYPYniCkjQJy9qY1DsBhAapwCmUgOEsA3zM7VAvMHwJM2NSQybCpAbj/YrdjbMkAlESHcPHcQwOunMqYdAhDA2i+BofExH8BrHVpyp34NwN2EQ/toQBbARhWc57ROMMDNFfV5HjctQDl3okLtMCdAwK2SnI+RKMCBlycwlifnv/kZ6T7cfxVAMpbwG4Wb5T+Blycwlifnv6rhEBsZaBhAno7LEFmlE8BcclyzmjztP3o3GQJriSBA4NLMv/PNG8DqZ6wFzNwpQEr2TJ+3feA/UgOKeyIPD8CKDqCFgrsQwDXRPXodQCXAQMJTLlLiEcBuLI6h6+0mwE/qUqxaOSvAtMvVFh+qEsCr0w5D0FEGQH+hbjo+XSnAgXux3Ey4BkBleUeTVzAUQNPvPBIz0fQ/wK2SnI+RKMBIKzpuZ9kdwMsVJHr9SifA7tIyJ8bqBsD/fDKQmVAiQP9Ig3CUSRHAsNHX9mv2KMBmA2on24EPwPRCGz2f6hzAXwmXAxl9079+Ro3QvUMjwAWLOvphcR/ABEP3JiC4IEAYH1wJ2oQawIhGDEurCyXAi7bHHFCoGcCAJFUROxLgPzAbBUtn3xVABCKlGTyCFUDkpBkFuqH5vyJWbcp0KxDAF4FonzKLEcCBlycwlifnv8jhTtVz3x1A3b5zm/Xu9L9MSqrf7IgmQEaieESAdA5AF0V6bGmNF0C21yrJAAYyQPKHPMUe2ATArYcfGbD4I0A6YkERagskQHN6Gk50UCDASiQNRFlzHUAyPi1r5wL7v4AxkQF9CeK/Mhzy/eJM8j8CkeHYdyEmQPhxvdTGBAxApUQ8aEv/F0BqX7xdWa8rQJli3y8BffM/z3qtxyD6JsAHMEC5v2kHQA/kbtG8vBpAFMgySwL5MkDz54BL45AfQDbtGdCf/SjABKaCPWtFFUDR4WNmk0wyQJjHruUSkBbAn9GVDs23FcD7ehh8BcsHwGevWanYDRFAUJFZzIIOJ8CltlgFDKcawDrtaxfkxgjAqswN684QGMBnb2rGXFkiwNLT4yNPbhXAvgt0Z6ABKcA3H4ctZp7Rv59Xj51XNyRAA96OjEvUEkAMBnj3CA4QwN/sAXl23CZALtG4dOD08b8mjcX2xs0bwIMLQr1XXxPAzwVE7X5vLMDmzK5GbYwpQH1LdFflSxVAzRX1eR43LUDNFfV5HjctQPlt8rrlReY/ZwiCV0YBL0D3W4ksEyoewOS5RmbR2f2/HDqmSXZ8G8B879PS73wqwPZsbxGsKAtA0JIUSe1WGsCEkav4goIpwB9ACGhllA3AzRX1eR43LUD2mQFprJ4iQOOvKgcSFytAR5ZUCdBnJsB6NxkCa4kgQOGq5+LcpRhA9pkBaayeIkDNzhxLUy0PwDtDvNr4diHAmtGndZIcKMCxesCg2q0nwNdaCcfAPyfA3z4YwXXxHsDUYdVdGEIoQDuzEuaXgyJAhnTbKjCOCMAj0SSkOmgRQGAHS5YHqxfA4McpX6aSDcAvkRLCt9kfQPTx4cYq7hVAvKoDmesrGEAxr15yd9kbwDtyDIcpbRvAo11RdW+fJsBYhpDoPyoBwKFgHzwsdhlAnEviUXOrJkDQOihs92D3v4077KyInyhAZcG6bRXsKsBD7toHA80UQHzkprp6LihAU9a4nmfZMEBL86BfYkwVQMbYT10XTh9ArYnIaruR0T/ELvidIrANwO21G8qoxw3ASfzHC7eR2b+LjbDpp9XzvxeQziErvCFAwKaQD791G8CigZ3memoYQJAbJn2qJhvAn+J0c2lnMED0/OrDMEArwDXP7funShHAYLGUDdHq+78npmKP3MspwL93nRcnOBDAvRk0auM5HcBu5X/n0zMKwPheRmkHosC/gZcnMJYn579OOiUSI3gRwE4knvU8Dy1AnIBa7JLKAEDZMyWgw/MNwIvPM+uSgA7A9EugDt7tKEBpuxd7UUUQwKLuqyWgiP6/zWaKicfa1D8wSE4V8zDLvyw2c200ug1AAJinrxn1B0AONd9SCMoRwFtUitFxihvAAiv95TtOAMAyUJxAP5AZwH9LhzVfiBRAAQJnKrZ2EMD/BICTSYIGwLZs0SK93QzA6Qo05EOg8b/zM5laNysZQPUH+/9afC9AZ5BF5oEwKsAnK9uFomnjP+oKfyx+8RrAgBvOgOgg5r9WBrkAORQAQJ5ygvWvPd8//Jp8G9ebFEBgC1IeQYsXwPBHZUO6+hdAdTq/GdPBD0AdrhJKxngIwAwyn08HWyjAvjBi3ahiK8D8LahQPT0jQC2eZOf0qAjAJ5lOHvioFsBTI16RLOwmwPeADnkqIvG/GdKai3mAGUA4mcSEk8UvQPV2C0SLzypA9dosVPkI8j80XL6/eTzDvzDARAhDRR7AmkOUiwkSJECr7Od6jYwlQBTh2zjuXSrA1If6BDyLLEBM/zD0DJgCwKTli6vNGRDAagkaWqvTEcBqPwHeT64mwCuBde3TwxHAnQiWgPWAIEACrnDFvzkowJjgEWmIcyRAaC3tiyRfKsA33sCELOQNQJR/NBcI4CpAWwa6Dj0xJkAozgv8y3sqQMDBAwYdyx3A9MEiUQiZDEDz88tv+KwpwMX7IHFh8AzAmtY+nI9tCMBYj93HAkIaQFPnb0kXdwXAVVqs6fhJJMAx8zTxiWwnQIR0En7C/CNAdyE8z2BeCsBNUCCz+nQkQKE/2TcKyCTARQ7SiFqh9j/ddqX+t/YuwHWKKmWzXRLABx2z7rrHKUCFJ8DWwkkfwHmP3WyLzBNAiQcOOM0+LMBmUEm3QRbgP4bevbgABiRAGTfva3tKMkAWg6j/aFgjQJ2n0OC18yDAgZcnMJYn57+Blycwlifnv5ocx2KzWjBA5otN+AoQJECBEYfh1+wSwJm8e606NxbAtLoW8tlGG8BQcqPZzGghQBggF1UF3ynAOrv2dIG5IkAriQPicNMWwJ9eNfYAjQnAmlVfumVpAcAerkDg18oAwPhXPw8umgvAOhl71W7w/r+jH5/38rwrQCalHkNuZTBAZt2llKuiMUC/UVtDtYoJwCi+8CZlfClABolMiGcsGEAJNI25LNsTQDRkr6yH0RRAkbfMCOOVHMAsaNpIjZUoQHptuJkgjxfA56BbP2LwB0Bd7VfPWPsTwImtqagZWyfAt2qiksWNJ8AaM1+1KzQXwOBoGqf0nDBALuD5tT//MUBxHPtFY0MtQOOnIlSNsRpAgZcnMJYn578JbpAIVoMrQIGXJzCWJ+e/DM4z7lCZKcCcS+JRc6smQC6iwBVtFC5AzmmMMMGxIkAt3KCt0u4gwFOLArclDiRAc3SBwzk7FUBGOJUoNLkoQG/8e6HHShNA808Xfy+pMkC4AtkSLJUiQIGXJzCWJ+e/4Ggap/ScMEB0iHFgNxkgwCAsRUagoCdAbiaGE/LqKEBNawxPNmIlQI+DXz+zDibAZgf+1VBGMMCcS+JRc6smQFT2DQrNzuK/Xfafp04HGED89jrfmHAtQIJkoa745w9AwZwu/9BXFsCZU7h2FVcawOF3TrKGJ/O/GeyE1K72LMCgniHOMDYYwOBoGqf0nDBAdn2yYe7yFcC8PQmh+n4TwPWUqY5AXiDAHovaaFguIkBp2bpE46cPwDf1XgUKvxNA8txuC/BNJMAgDGoKkakgwPPD9O2MkwRAVr5LnSEEJUAovvAmZXwpQEJ/7PMZdSVAZt2llKuiMUDfZN4XXqEmwA4Ayefl/CvAlLK/lpgEM0CJbcPQwCYXwBcRDoTKrx1AWvwgvKFJyT/ixJIEMzUiQKYPypaXOTNAuJrEjs0TFkCBlycwlifnv7oUQDgsKB3AGuQCHODXEMCBlycwlifnv5ig4X7UPh5AqqT/MfE0G8BR3vdNfooZwNUS17kBbBnAMqrMDtgs878FPhaoBAMawOL4EjocGRtAIHEYVdOrFUCpNbLM/pkgQOTvPKYi5QZAnoQZbYWw6r8gjKC+L4AfQAH9JzbvASNAnEviUXOrJkAwLcgCQW8AwJdf9hUFBPS/U6r1HLbDGcCnZBbrRywJQFOsB4+DCxRAguqsvIEe9L8DWLOILg4kQGFxSuFuvCNA3MbWSLvrFcCHc4iOpV4eQEMTYpCg3PO/wu8dOIgEDMBm3aWUq6IxQEZYEO0yNda/VACIsGx/EsDTZl7N6MvZP2AjSCBNkxtAU6I19Pf5J0Dylbf1K1fgv9QqUDU+BhDA3vyn56bzAMCsDOU+h5AAwNfxW6cJ79e/l2tICgMA/r+PSy/CkZwpwIKAUXbb2wzA/Pvfb5zy878S+AZDsyYPwMVGBCpjLyvAL0wmSRTPMECtLqDbVpkpQJnXVcAUcS1AZt2llKuiMUDFcGsweeUkQGzQnvC2TvK/LkVLOXc4IsD7N2AMYxcmwFIB/wHrVizAeSoNJArwKcA3B7UEZR0WwNh4jf+k5RPAxPE+6gSoJsA6M3mJFlgtQBheEr/waSFA4hPwql3XLEAzY2N5WZEmwHOWNVtn5SZA8H8KXoU6MMBNst3x0HwRwPCOTbntFhvASM0y85wZKMB+cJ3v+3wrwGGM2UdtIxxAo9TQr74UKMCpAhwKoAckwNzU6kRVqxPAO7K5wduzxT8pMcU7ESApQF6hT2V4KSNAQwkgQcWKLEAovvAmZXwpQNnGuRKNwRJAC20a8ajMJkBYUmdPSr7hv0VH1/K3DcW/XCc6pP9RGkDJ28hr8E8OQJSEQKTvHyLAAnmnzlNiHkC3Om2D+TgiwMbwysKvg+G/mGu12cYp9D8bA8mFc+YkQD3x+qOwQCLAYt7XFr4JDsAcaV8GReApQPbjYrw/OxDAiNSeBZzxH8C0sYSCblQhQKxp359gS/A/xfXsUZpfIkAUsIcAvDgFwMbIpSHz8QVAbKkehdcZIcBacm8LQCApwOydb+1Y0vC/808Xfy+pMkDbm4xMieEbQN3DdTnuPiDASXAkVRo0IsDvMeSTHXwmQLWxyR7mxiPAKTfkpP2yHEDcViMWD/cpQIuzLQrqGi/AaN033t1QIsCRJBosOFonwDU7Ye5mKRLAX2i4KompIsAQ8trsl6sewA==","dtype":"float64","shape":[2051]},"y":{"__ndarray__":"1NaJzJVAGcDC5MOIDAv2Px4iHqCoqg9ALPqYRtmO4r8+cW+21YAiQMmJtU+OUSrAqExK1duqJcCnIJIsS5UlwE8bPq2JlPc/p54tM1fOGkBdkDDfkWYlwCnVNVZamyxAi4+9HcUmIkCkW4yxutEnwNDKOS6IqwPA4QorGstzIcAIcyXW0VMawJnRk4HQTi1A4ghMjZmZEUDGu4A0h48DwC41zL6qvA/AeYwgh6x+I8C1SowzB4XhP4rZmHve9BFAvfaPyF2lEMC2u7jAAD8lQIB/CvQkIgVAjjGf2/gMyL9BXPdq2EwvQF8Dvce04ARAIrWaZ9N9yz/3y88yhwIywE4tb9PhpgVAzOc+Q2NBGkC2JgyPJUkHwAVNSw3aTxnAWkrLgZseA8DwxNlwO8MbQKK8rsxCVyjAcv54is+xH0Czupg3QvElwGubWQs0OSLAwQWA/KEiDcDNWsoP3AcTQIzXU7yP3THAcUO2wyvWJ8AXCaM93cgFQAZzkcGSjBnAh7Vtx2qF978MYEaGVo4QQAToiXFFQy5A+5aauObgE0D/ySCCycLIPxkS7rP1nyhApp/DUrZYKUBfZuS2IeAPwJsE8mPHZxVA8om1KxF9MEBhVgdoO8MrwAMMvFWD3itAjUHirT1RGkB9ajODgSsdQEofyda6nxlArJorT1E+AkBGch0WDvIjwKyaK09RPgJA+2pGaSRdLMAh237buKIlwHdAfdna+S5ACgSFzCCcKMBRXMrKr8gPwKqbZzGb1RdAHuZgsfUaIkD/Vw849McYwAUpwGvL6uY/HUD4vz5nJMCw/cPF6BERQPdc5IcXZQHAJYqnXDyqFcA2x6s9LCkkwPtTP3lY0BLAzUyZ5rIuKECSno1weHL6v0ZXr+ieMQ9AsWbfGIUAIECsmitPUT4CQKyaK09RPgJAK/BvO1sVJkBX+0pI3FYnwD2l6ESedf+/51w1mBslLUC+qBleb2ciwLp6DMOoigbA5XRnN4NBLUDU8tojcJ0ewF1BvvRQbyRAoODBA7PpLkCWFOrHYnwjwDA2IyTZCv8/XdbFT4AdHUA1Usu5Fo0XwMQa4kGB6ybAMPXnvNWQIcB0TUXvFdQpwBquTvAy6wbAsL64K30OLsBCGOVNrHMGQGQ7JFcPNiLA2D9RKcKvJkDHGLtmMK7zP7rfvLSLyPA/s4/kALzpJMCsmitPUT4CQJlBW+ejhhJA/ZR86S2EKMCrwjbJYb8pQOO4yq9K7iLAqpkHr7cKFsCoWQJU0v4HwFbpQskGmhnAMB8lWxLbH0B4nmOvt5knQCsIaY0rBhTANszApsH4IECt9qh4KXgTwKqbZzGb1RdAG7P66RYQCkA8vHa/SyAXQM2NQxCaeiVAwBjkk9RBF8CqiaG9QdklQJcydZTmZyjApDgbAap8FcB8wEswfYMQwIIYLjDs6ChABakJ4MdiGcDw/Zv5nMsZwHpffbFqrhnA6NgyuwjK/T8Akq2z/rAIwDt+FDra4whA+boJed5HHMClpsf8WOYTwICXM9vD+C1AfHfNRWVwJUDvdamP2kzwv8rPg/3OxxrAbLimGnY7IEA7FRowcjQnQLYHxTDbrQ1AtJXKjvz3E0CNlOD3yeUXQE17wkphwyHAr8dPZ4sQIsCqrZo+o5APQJaKWJ8P9g5AEew0O9DhIkCwZzJ4FO/1P9TaCnJFRB3AkqlzWZKIGEDjpl8ilrUnwO1vyn2A1yJAKctl6I9gJ0De9qu1pIonwKeiTQuM9RtANS1PFsc6K0B3cAQ4H94XQAAeO5Y1Cfu/Z6R8e49eAkCUWfJRlnckwFHDAkBevypArJorT1E+AkD91+Mn/47Ev3Saz5wrMjBAU6ifRCe6tr8W7Uq+e7sBwOitGUkxRCtANLq1eUtDH0C0tUczoAAowOc75L/XJi5AodldI34HC8DjKwu7jq0VwL0c+oYgG+8/1cxaLJT3JsANzFlW+AMpQJi3nTOenP6/OAFmVQ1WEMCFMPZd+OgjwIBxIVBxPyLA8PKkXXKFIMDwAH8LUqQiwEYl7qkedCHArJorT1E+AkBRkOrazy0QQOq0L421fSfAmpKKZcFd+z/Ktp3IAX0sQARhx1oT4hdAdoe01eVtLcC07XrsFLkRQEoNTroVJipA/vUMA9yUBED+X0LoZZgQwEf18HHKjyHA3H5wiyX02j/+YA0ahskEQJwaFESJkSNAR5NCNVw1CUApQYr4l+AKwAVNSw3aTxnAnkfW7SNuJEAUnv1oXNMKQD8zzK5d7rc/j7GAvmtgB0Bxf4Nj5EEkQFMnU+d7AiXARnVBMBKJAUB7qb1ENFsowNTAUv82Rh5AgQ+BJV6XLECTZEhuTJARQClTcuHy0hXAXULxuluILEAkOJZjnLoTwMlR9vbPUiVAWni6XFC/F0CFuurzp7kCwAINo9OF8sC/rJorT1E+AkC7gK5QcqoxwBLumZTzvhHAvn4U37Z+CMB/rHfVdlIrQMPx1xRV+RhAqyi9Bjf7JMBkHprLJG0hQJWdxfHMEhRArJorT1E+AkAHAtq7WZjFv55H1u0jbiRAEhJmz9DvIsCA0WL5Xy8jwEDOD2MVnC/AO5J2XHRe978t2agaAzIRQDt+FDra4whAPbWpZMsQK8BE/jsL0YskwBMmmQtpgMs/OhuyfBSnIEBe4FS9PIYpwK2Ilo1WrAXAgiH4hvBkK0CbeafBQvIuQNDHS6xZtBZABU1LDdpPGcAhvOuuoJ8hwMq76XC+jxJAcbAH8QJwKEChl7ih3SsmwM32LN7Kjw/ACY7J9UsLG8CjTCHrELckwKioH3Ap5yXAKRahvt7eJECDIM/snoUdwDwME+MRGhhAXc9+5y2EKcCvOTcE/skiQJfmIfnYmSnAAjz1nsbf8j+w/cPF6BERQC2CM6xGBxRALNFoiXe8BcAHrIT8NAYXwGO61w/C8DBALsHxyQXpIEA5mq0P3W4cQLD0mlS7EiPADcxZVvgDKUCXkJXC7mAoQPzKfaoQpizAORbeqHG6F8B+Nh8+9WsgQLAxJrw5HS7AL9jq3cGTJEAFsG3JogYNQAdnzgW35SVAX5R3fB2CEMBfrE2KseMnwJiG7razPCHAyZg0DHNEIsDytph4vIguwJ9A1RBdJC7A3mslnnQR+z9/zj66/fYjwK1xTT2yrQRA1jUpwsf50T/Tpey2VY76P4RNLzAzUxJAlHNQ3Vy3AcAFTUsN2k8ZwLCwRjdwayjAMZV6tRJkEkD9CpNprVUUQLSXnCvPqeY/dhSFoMLIMcDvx9Ch370EwIgya0qUjyZAbfeEXUOjJMCsmitPUT4CQP93O1oiyPG/ZM47eX4JJ8Cf9/I0WjMfQBeA7i/fOBhAmtvKsuE1AEDQx0usWbQWQP6hBgzDWTBAx6gJMiJEG0C+mhTxZDkoQLD9w8XoERFAtvS3YAuFEEDo2DK7CMr9P4UsA4CkjBRAsP3DxegREUBvCf0FCBUgQOPwmnSVjPM/n0+yqk/ALsCor/j5RaMnQP70fZg5wQ3ANmyMLsMFI8B4umNEX+/vP7TxpLfF5zBA0MdLrFm0FkBThKKEeBghQKyaK09RPgJAIZa/EKrS/D8YdXyJ5dEtwPXBB638IB3AMgt8obEZLcAaK1j8fdkHQAz8dPd0sCDAOQQdRIumMkA1XPnkbdwpwKgcEaeuLipAy9DVQd7Wzz+qm2cxm9UXQKyaK09RPgJA7JUJmKk3CEBfAoKaW18JwH0qBFh1swTAEq9DTpTf5r+smitPUT4CQIoimbSRWzBAipUbH79pCsAqMNuXrfwhQNj8Duf93xBApccmKN/VBUBQzIpj31YXwDKJjgzR5xbAEUWVlDjLIsDpd8ytMsIxwEvX9Bs5+CPAOjH+oNCjIEDJ+wQCcdXwvxbcxyh+QyLA9+d/x3WHEUD4ZCCsT9QtwP/CJjjQBBtARfRodx/ADUDI6VGgbFIlwHFM3cV8PhHAsP3DxegREUAAkhy74LwKQO9pd3sjWBDAR6sLC5tpC8AxMV8KBcqwv75gQjJIlSVAfJb6l2v98j90DcS3X+0lQCc7hXNdmxhAO5fJ9sbhGsCcNzc5AEYCQAVNSw3aTxnAsAI3sDxYK0DwaDMl+qP1P1WvDMd97hDA2FTU6z4NCcBqRQYRxR0iwLT3kRmscyzAxKyHogAwKcDKjvVQmZopwDo63bCQPiNAy96/W2SzMEAEJb54u2QYwKyaK09RPgJASiU3HfPoJECc0ZIyM40bQGSrSOO+bAVArJorT1E+AkAJfwn+9hPivzxLzqFuMTLApzWlos6hDcBbt5d3Z0YwwJ8VHSGpVylABU1LDdpPGcCqjm1XdFQUQKyFk0T09TDAEiPmSLO+CsAiGQ9gsBvbv6L/xiQpMQVArJorT1E+AkCdbXflfo8NwNCgmzCcbi1AmoFtXoliLECAY6q9EhMsQKyaK09RPgJAfmDYB6TuFMAk0KKuebYCQOTIcZwGcxdA/J6vXicEJUCA5gnMFWIDQEDG9rjeaiLAeID1Y23cDMCZbXN2q5YOwGkjxAPr0B1AtWhV0RfzBEClEF9SRpwtQCjsg/V1gQNALRHTGRKOEECDk697jQQmQP2blqMzoOc/KIDI+1fiFEBLAXSMSGe3vwO/seLZ6ixAyGcLab3M/D/flpBqdnsxwAy7C/NygybAzfrA6NSTIcABxebAp2gOQEuf73Il9iXAThHu8B7cJkDbUo86aFsiwAtXv+DNSCvABU1LDdpPGcCsmitPUT4CQNFH+tK8RSJAWExGN+4KGMAqeS/XH0ESQB65RZWnj/2/nkfW7SNuJEAaPqbwkU4gwPom+PaAPSZAueD6fGAIL0CB/EsaLt8iwJfS3nvGLy9AQmrEN+2YD8AK7hiXKcAQwFbVekkQmBdArJorT1E+AkBEccrBSmoVwNBhPNbVWCvAaxGzfxfaMkBkw276heovQK8aY2yiLQVAlKKrK/VVMcBQYKzCzjcnQEk+YeKBxCLAOlT5bPHqHcAhG8tPjGUlwElHXCTghCPAwDIMQKEXD0AOjI2IOSQwQD5NB+F53RfAYzCZgqE7H0BU9k5p4aQKQDc35H56VPY/wfOJkFVXK0Bfg50gvAEJwHiwfKOnJCdAGOWs2ow+5b94rnqMAzogwMFbgY2MwwNAiG4DLzdmEcDPTDuKoMMxQKXffOE0xirA8aGV29oqH8Cl4W+wEnMxQJfyh96T/CVADT7rKQxeJcB9bFmJM6gPwPL6WuMgj+i/4/aaWYJtJkCcZeATMXYCwMuW/E8DlCpASwvZmYADKcCwUhbWQIoDwB1R1BI3Sx5Adcrb+AOrKMDE/ta73LQRQGzz7CUJNCHADVHWfbMI3T+AYJF9V37gP7/YV7pvIR9AOdOHFBeAHcBU1YJ5s8EsQJPm1k0D4RdAtuZbzE9b1D9CLMaIr5YBQKS70BGXWS/ArJorT1E+AkBJX5FZHMMhwFa6DrJVexpA8vxMl1IzEkDXQOTfHakhwLRjacKceifAmQX7sU6vB0D6+HFzXWgowOl2CeZ3UAPAZ/y3HwmrD8ATckLzL5T0P+GGHYNrSgRANXb1D3BKMkB60rZfYdQuwEGNwtg80QJAY0pzF6k7tz8dfvVA2IAlQPHvjVgEwB7ADbP6oZQ7J8AOFOzbLgYmwFB68Fq60wNAh5AtyH3DE0DzvnfqS9glQLmtbduSxixApvETMpf9MUB+DwPwX6YHwBzIRdqEtx9Ah06q5fsF5b9qPA5/HSYVQNLoBtGNLi9A0YiWLOT5JcDNdN4GnxYjQMqN/Ce3xRTAeyF87SwVK0Cukd0pyvUNQAnbqeszXCXAltR7bm3OC0DUrT33Y7YiwO/OIegFj/E/WXbl/keP9L/XDs2CQg0lQKyaK09RPgJA3gQQP21zAMAgC7zXE1XHP8n1NLvK6Pi/alQKNWZOIkCLUt9xplMlwDP+Gx4ebi1Av/JT+RsdIEBh7cyIbd4gQGLJUn2gRSJAaWbwq9IDGUAX5Xem50wqQMl3DM8uhAzA/n5+DiilIkDcLyh6PWwjQMwe3LtJ9xjAPqDoUprHAUBkfvSk2pcewCUo6r4LwS/Ad4MlprgeBEA3cmMgUhLwv80pUymyiPQ/AqOO/vTBI0DFIq3QnSsdQMeZzt8t8RHAEuzNDdZEEcARRZWUOMsiwNry/9LUJDJAGR5LFGc4JcBV+W9rUH8DQNhwKhqFTh5APdAV5dIzKMDCij6a+b4hwPVJ22RbsfG/DQ3dpWeFJMBr6z7HPTojQMvcfstpTB9AQOfqPnuQLsAYsP+HX/QfQF9oQeShdwVAjfyg0E7pHsDXVmP+PFwTwOPKG3PooyxAuhH+GNWtGUBjMJshGvwmwHeSM+HIlhhA3tEcYh67wz9tv9T3m9UrQJ1G2CidysM/4tLYbCegBUCd968vufUowI0N96ejgPU/G5BL4vSaJkA5H9j0gZIZwDBw1STUuybAcngjfCj2KcBbPewNGJErQCCGqbEhMCLAa8oUvOvUJEBUFgh/j8EgQKyaK09RPgJA6gIhVVWLE8APpl/ybdcxwOZwZOOXbva/6lVjh9DLH0BcCsehiBbsv7fhQYtx6xLARtpJQgVmIEB4LElsYmYowEwbZHypo9W/ozP56IgNJkBzylvlyRsqQBFwFYtgVivAZP6SIUf6IUDXkFPo5UEaQEEIY6eAxv2/rJorT1E+AkAIoqQhkP8lQO5/pSnpazBACxmfnoJ+B8CsmitPUT4CQFtAm/wAAS/AULEXAh0VJUCsmitPUT4CQKoshXxB8x/AesFpizm3DcAcbCy+6fghQIRAZehyQARAn9masZzaFMCASNNBsowSQKK8iFnQdyLAMEwBCxpjIsCsmitPUT4CQIuQfHxwVRpAnAhwpsS7IMBk3lSXrJ0EQFeii3jHgAVAMMlSX5YcE8CWibM2b6YEQP0BePIvZCbAMBnK4cGwBcA23MzGzN4HwG62ix+ntPc//yBM0rL0HsADynUBJTMiwKyaK09RPgJArRNLeMFWEsDoPHldw2vkPyhcEoqt+SXABBv/xRQoIMD+25e/lEAyQHnw1ttssCHArJorT1E+AkA2y6XWs6YbwJUplC36tyJAKh+5w+szE0DXLTUsiwkjwKnSlVyFrCLAeTtKbDGNFcDJK8jtW7ouwOY6fk5W4w/AEUWVlDjLIsCC6dR9DMXvv16sxOXh2Pw/+iIj96MSHUCZ2Bl4QGgRwMAbJN3gyBPArP9Dfeer/D9kxJ1zlOUXQFFEii8IxR3AxzJ09W2uJEDQx0usWbQWQPTTuaTdvi5AEM8kFSteIsBhylWEs5ASwAJx5jp1SBVAJFSx9sjkCsDMBoPuNcMbQKTzvToASSJAZA3vdqUaI8DFX7f4VWH6P+t1FbDweihA5vdz3MqoJkAgTc2IzrYmQGIgziA3OxfAqYjuktowIEBhbFmVmQYuQNjWHsxSBxbAY4xKtTYhMUBloS/wC0MmwHK1O8kslug/PPqCYQyDLMBPuEHLKukdQKXcAmBNTRjA9NoWRn3DIEC18NxF3C0fQPCMEtGMqiZAQICbx0wk+D9WuABMssPYP7ROEcVfIx5AxIs8WygEIEAUr0vzjZgRwGlCTGVbwyhAsP3DxegREUBHSP6/AlARQMrzSLBHox/AtJ53MNG8EMC5kh6pTygyQEV5nkL+DidAz1Cz5uEmKkCnet5eA/wGQEwJo+2JZy7A8NWOdQj7K0D8VGLn8Ef+v+TIcZwGcxdAwrmKBeMeMEASvFPbiXQoQF0OEaesiPc/0MdLrFm0FkA/pMrKxJgdQLD9w8XoERFAq0GY/7kB+r+fgbZQ1t38P+v1IIrok+Q/ZPSijGM3DcAAmiKoINgNQLD9w8XoERFA2TWFJI8iGkDKyxslkIYQQJAF1NIqjh3AEpOisak5C8B/NdUGXIsnwBlAm077zh9AFIrCG1RCJkB5mSEOfScHQF6qEao4EQxAJN5IsuBs27/HImQsSG8eQPwO0uRJFirAgauBzY6PIUBoGWSgHRwnwOjgswP7ughArJorT1E+AkAFzVbbDZUnwMqCehhUpyDAPWrWO2BiJkAqCuSyEA77vxny7G61ChLAJtU2gAQSIECsmitPUT4CQImjXOh6uBNAP2OYxzUTIEA+9kQRkOMXQHMoqx0orgHAORDsYtcnEMDSn465nSAmQDUpzGcRYC9AcwxJULbX/L+smitPUT4CQJar6Kn9Tvg/pX7UxzvnIkBn7is9fo3zP7NUU+ESyh5AK7Davba1IUBNu3s/A2siwOJCneYWifi/5q6gzpan3j9m51lpocoXQNKLU59moA1AcQ6SQopqJUAuR4uffscQwCkNdqHRbwRAoUhc6h6GA0CLEiFInF4SQIfAs67dJwJAlN4pH+TxJUBdGHREqKonQMaaoFJhIyLAxejaJeskJMAyeyZDbJADwLD9w8XoERFADmvnM54sJsBf4BMCFerUvz3o+xMLaB9AL08vjYS8CEB4nD5WGLEiQNtWR0MsVAFA5Pf+1CvuLkD3x6Jba2AwwC3cSoDp8iNAmB+TP2EkJMDApgRQmM4ZwLD9w8XoERFATZv98u96JkCDxhGeWsj1P6itT6JhAyJAqrpdbVgrl78q57iN9yAYQN43zjFnbxPAtSgOURW/AsBoz7LexsUcwOwYvZBfVSdA8D1+ePAZFsA9hElJFLUeQH+hih8rUxJAcuXeioCFJMAHVV7Zee4SwJM/8g/NMf8/FL4LvkazJsDLp6FnYE4yQFhAchi5JRxAx7qcy2/vIcAhSvq2Lqrgvwn/iuUlzhRAKikogeD7FEBk0RscMM0IQF6ktk8RhPU/GHM+CvgtAkDtRWwjAWfeP0ghcLIfShrArV13CwHxEMDEgj1VRuHXP1cfKx/XiPU/CQwSRe8vJkDfGH7WCBfmP4gjuWASjh5A4reOLM3FIUCqm2cxm9UXQJabGR24fBBA5xQiUuAmMMCoFH1Y6aAwQF2yw/spbRrATui5gc5fAkDlqFYLc2QmQC5QBF95HRDAb5antNBOJkC6mWrBi+giQODEieY7eCbAPJ3V192T9D+2mfqavxUgQBoTnmRf7SVAYDYL2lY93L8mQD+B3FEuQDjnD+d4fBpAA2oa4KFeIsDLLuRYoMQjwMyxt+x9Uvm/kRfOfORyF0BdBS44bnAtQFNVB4rbLO0/rJorT1E+AkBcVN/OhpAKQBCa5hrleyRA6g2qDTk/JcBSwEdpe/0jwMAwrDZhXRBA8E3lZmHxJUCsmitPUT4CQHK+0yQ5CxdAQiRLFAvc8D8q14oFZTQQQKuTOJvGn9y/cbKAnZT0EUCBXTNwDb8lQBoBbHh7Xx5A0ns5lB6yMkDQx0usWbQWQLD9w8XoERFA1OXx0sYhEUBesbXThj0fQO/sl9d37iTAvpRmUrnfHEDonr3oS0ogwNSVjj5LhgBAvZ+RsDUuIEC+I83nwmUaQPTv3M+cfgVANKcIUknTF0ALv+xb0wcPwL5PI+G3bCRA7DeebtlKFUCX/QfBuMASQHdjqYoiFSJAq27FgNMhH8AEGbmwAPYWwAoFwdkdMSBATLjZQmguL0CUI6ahhA4jwD+VbWU0cRRASukh8oVRxj+kTTHTpZMiwNcfTfokuhTAzkEfaymjH8DxhkjdUzMUQBkrqPcpdhrAZwNcjKm04D+ukHfTXv4VwBfvnErW/fY/Yjez2FG9EUCjfjVTrxP6P3S+i/O4fSdA1dIpqrGbIsA6ka52GKgRwEQf0AUMIQnAVq5+mzLMIkC+TyPht2wkQOIMJWDyFQ7AGxH/hdVo879D2MVfiZYmQLlxBen1Gf8/tuLe7SJ1KMCf0REOw/7WP+bu/y3zhxdADkI8gtJPDMBhOkpG+J0QwHhXcvzOTRbA/hMJspb2DUB+j85hA9sbQKZ/m68/4iRAsvDgAoC6KMAp3AT8DD8yQBCYqrnwJiJASeeS62J/HcB7u/3EocAgwIjg1wYi3R1ArJorT1E+AkCzp12FhJcfQD1gJ2tUlypAvkoDMPsBD8BQxuxvk9IlQC2jbAQR+gtAG9SB9mQtzj+iGoVKoJ0jQPyTb346UBnAxXqWge2WIcAnzJUIbyUnQEMcoHp1cC1AkorWUHMG0L8Rx/WyJxYWQN54t4nfYjFACrw5EhPrIcC0UA7I0iMmQLD9w8XoERFA4m6wETOHEEAWjIa5faWwP2a1ejUPkRlAMULROdJKHsC68L6FdWH/P8p+Z/c6RzBArJorT1E+AkCWCkmnyPbqP+H20sELpihAign7XEvYFkCOhbNVaUAkwFHiV5T11xpAosrQr+x8IMAG9YxxcwkTQEVpR3YSJQHA4oQgp/iyGEBfkvnfasYaQEp4ghibsxTAOXjWFrsI+z9NY0sfTmwgQGm34kwY3AJAVY55BaMdJEA3OMktwykmwKcQ/X1EaSlApV5TvV9qMkDP7zBQSt0UQKL1yo6L+gHAAa+9LJDoyD8uAbzNCRXdv4H9PlltQS9ALwYs29jQEUBITOBkG7QlQCanY1ImFRRA2+D2wYXC8L+Ycvn9wEYwQPyTb346UBnAdAHhDGmsDMBVC589NMsXQODTrGCOXgtAYXiKpzodB0Ay2q69PpoVwMI1FR14hy5AGVbP1jFHAUAth/ue3owZQMxoBnawmBlAlcz0giJjCUCQ6qTfp3WYPw55nA2CDyFA3wUzrIvkIMDJP1UJOw8iwAZCwcLoHy5AmDcfLA7VGMA3OMktwykmwEgboZ61e/c/SeC5gOK+JUCRmTH2Vo8gQKmbFbIG/R9AfzgMlMxHI0Cw/cPF6BERQBG+db+E4RTAt5wwXYS2McCmonC4GsvxvzvXqJIBugFAQruOpyNSEcCG0c0/9/EVwMxc8FpO1grA1w6WjFFICkADpm0awlcIQMVboilhBS/Ab3M5NLqqFMA4FZtvU5YxQHtgB2t62yfAY+gMwC8JIkDdah6MfYUnQPyTb346UBnA5ZyD9OJWK0CI+CURSbMfwAiWGuJUzR5AbikoGGuXKcCRDwEV3dTtPzc4yS3DKSbA7acX3DtaJ8CsmitPUT4CQEChZpi60SVAbhj0UB8QJ8AcmX+ygjkiwMcITfA8fCxAxUIeQDqA2T+60CrZebYPwG+VUcXdtBpAJhP0DcFHEMAURl7ygjEnwDzGlzwCphXAYjez2FG9EUCFVQmUymYvwFZwahaVdKE/rJorT1E+AkB21braXd4XQOc7qrYRMiVAjOKKNEugIUAkHYCqRvYPwP0rHwEgmhvAiLb/eAClJUBhxO/ehxQZwMqI1X+lIhDAqCWrpqLMKkCrcOdweccawNlWKc4s3iDAEe85xfJNGMDajA7VN5giwOkrWVhIlOc//K7v80s2EkBB97CPe+4dQGwpplSTXR7Alre9/If5KsCy/8kgbDsmwIdsEOzgdRrAyhfg0vHrJ0ANTfMJvZvVPyEjwRlEfeM/ZLXJh5Pj+j/C7higFSkiwIIK39XjPS1AHQ8mTIL9BsCP3jqtRTQxQEbNw66dnQdAIdt+27iiJcBOKIscciQiwChTMTcR/xRAFKjmqp5YIEB7oxk9HqcRQJv+Z0KX9B5A/qIWSLrf+z+smitPUT4CQJAo6X1PLCBA08ZHEyKIGsC53IE1PhYpwDOPaxqNtClAWZMu/dhPMECNfkc12AUsQIfZRevpgSHAy7eNFp4QIMA+1VZdor0DQNvHwXF2rg9A10Dk3x2pIcDrv1Tm1IogwKqbZzGb1RdA5To3xx1l+j+smitPUT4CQIikYtgZbvY/hVqOyBpIIsCdRtvGAYYpQP8SVW1e1x7AahxFna1t2r+JOYrt6v4HwKPZ5Sgk+iVA/MsRYxdaI0CsmitPUT4CQJT94CyunCZAAQdX0no18r/jQkQebsoLwKyaK09RPgJA7yzYTxXaLcBtR985/1cuQM6H4+NYhCZAE1jaykMSGcDEnmYXwUYiwGN5KKwPQwzAvSRpNZ4wMsC+TyPht2wkQMJ8Lnc/syNActylRP2BHMA0GTYmQslmP4lQsaGK4i1AD4YRlESK/D8tyZCHqJQgwB2xBXpzaCtAxQHD35dKFcCw/cPF6BERQLD9w8XoERFABp5B1rH0E0DRLuSWwVodwDTH7OlwmyLAEwsZ0PH9HcD1k8QyqQEjwDxa/SCgtNo/vk8j4bdsJECCQuXH5kYmwL4CSxTkoC7ATtS3eeNdKcD8k29+OlAZwLzFWqD+VyxAJ1vFcrtoK8DFzfQF6SXmPw2B8S2uL/c/glb2NCwlEcDKG6t0nuwEQH4ym2JlqRVASSlxEO2KIED/J0O4ziskwJafZH4bSALAMI5B9i6nD8DQx0usWbQWQETAcxkBhxHAi8jfKSrWE0DWYTtlTY4jwAACdCJH+CVA36ZCtoY0AUC/GPkUKrUKwK30t5HuwSFA/HNdXkTGCcBA2LIIbyaYPxxNfYMVYg1AevDcMkHCI8BK2BaxiYMoQCEKlYMs6AzASfdt2U9CIsCw/cPF6BERQFOKZmmOdCPAThkle3XCIkBHrqZ9AWQgwKmYnPRsTiZA8YU8M+HQH0DQ2htj8ykwQON7nnYxIeM/sMHCg8o2HsDEaKEwb94GwFOZPECNkhbA5MhxnAZzF0CFKaeT0ZogwH7s89UkwiLArJorT1E+AkAv8zXTIoUXQOXiBTbrOR7Ay/wcG+QFIsCBtEhxucMtQN/KmThO+whAo8BFY7smG8D7rReAHSUJQBXxt+DjmzBAY6WOaka+HcDpSQfYEIIXwO9GJRFj6iTALf41AFEQJEC6ekwDEkUrwL5PI+G3bCRADPx6MjceEMAiC8m/XD4swBhH3uK5HBbAA0sdAdlID0DHr6OV7t8iwMJ69VLIFCzAIdt+27iiJcD29H4VPrMGwOreUkzOciHA1tCRaWWPJkB1Avrcu8snwP0ce+dpQCXAWHXfTGAp3j+nKLXaoiAjQFTLj67R1C9ALuvBnOK/1j/vTLWHwoQbQGuGYIEy/grA5jCcNA06K0D9IJ7OqSQDwC3+xM4bExFAQwr3xuxEKMDFdt2mxPQowEYuAhLkHyzAkb9LWkwfFEAEsasG4N4xwF9OSniJQyjA7XVukOdOB0AnjcqM3rwQQNk4+MWo0BTAE04zi4SAGcCgNgsZfNEyQALGhMQEiyhAPIgV58dpIcCI0QzSejkGQC/l7wMZGxRAdrsrIzJDHkD2SqXeZ/z9PweY1IfXjiPA0MdLrFm0FkAjexBfJMYyQA/aC80phCTA8PeX+7w9EcDnt97IURItQFJwEYCsGAZA0jPNK4f+/T8yZPsCX2McwCmAJ6vzuB7AQ80Osc3K/7//nf7mNQoKQD9GvnQi1x1ATozj0Eo/MUDOuwUoAlcrQIPvAGysRA/AF485e7giJkDOZHZCq8AawPjSx1yquylAuV8cdhaiD8CM1xfJW0AUwBm9jzDsKBXAK8re6xRYAcCbBx/O4O0kwKAsxtEI0ADAzxPnhrkGIkDOAT2i6IYRQMXvQPB+NBDA651N2qXhDMDbr8G3vVERQCTv0CHg2yBAXpZ8/8YOIsA+wa/j544mwENmTGzukw9AmGDgWQH2EkD+Yz3PL0kOwNu2GAIjnAPAU6zEYbOLEUDatfy1SxImwM58hhqgETJAIeqTMIyXzz9oeGP/cYkwQOYt0aiJiiPAC5wGexQaJUB3ova58wgAwMUVNeY1MjJA9ZwC59adJcDxBqOE5csRQPkFvZR1BSPAyWl1Gc2DAkD6gySMBBwVwHTB7gdnDB5Av/VZe2JTH0BfZMMD0CgyQJCznYqCnQFA5MhxnAZzF0Coce1h/eEQQGhUfUiJbiBARL/o1e3AAkBMj15pqjQxQCn4Je4QTBnAhLN/IKlZK8DbL8UBI0AfwJNcBDI5JSvA7CM1R66HG0B4E7JslG4SQHBrplmoCTLAdd2pGKKi/j8GjrU2Zm8mwF+ykYXLVwPA2eQ5tzDNGsBuKSgYa5cpwNSDHGQg/yxAqYxJKGktMUBaWi62clIgwGdxA/08iAlAPqFF+J8hJUBhoyUk9DoQQFSdxbtwvTFA/JNvfjpQGcAivv2XjGPzvyOMAz8+YxDABTmPJ54O4j9906s2weLxv+i9+u1uHChAD+CA5Y3FJUDKnLzey28yQHvKxPH4zRVAZrN8t5qMJ8AYIbhpo9AgwMQs9O40TiNARKmmssutGcBTYlk6JG4fwGDIU3LfzAHAlw+qmt0BGEC5CyTELJYlQKm65ichwBJAbrVCt5frH0CS5jnQmcEbQIXOge5xn6a/HnfuyJJJEcBU7O7g3JcQwFeFzPN0RCFAT6wK9GdQI8C1+fZXERQpQMcLUOZldvs/nXfW9edaHcBgtCkyH1AiwKpRPfJozjHAL5p+FYBgLMD4l2Afl/MXQLPVz2siPwZA6sMyasAX/j/Qx0usWbQWQNzbXWdVcCxAIh4f77O7zj9mvoBDcaEJwKv4e9/q+P0/ZqLBFue9MUB0ZyTh6c8kwAEBetUhNBPAln2cjQ2GIkBPBLn2deolwCs3ek0eQwrAazefCV+wLEBsE41kWdIcwOK92cLpHhNAaIZPg/7CJMAw4oz7IWPBvyFxzkxjghJAJiqlpI4+HkDfi5h3S9EyQOutavYaES9AtWAed8vwLkAJNsNnkCsjwGTALjsTyyLAySA4hxZ4G0BdGuB1en7DvybbNdxkPilAHoJ6k4D3+T+cIqsk02jUP/QW+Fs7lhTAtkgEI6zuFED8WlvDjlorQCJjkBgc/xFA9Mfp7mBgA8DSDR+SMgYjwIQzVh/FCyvAGL+OMtC2HsBpcs/6r7YlwMFssPkGEyZAkKZzUpWyI0BcQWTRSrUKwM932AXGZC9APU3SJY3PKkB4JzmWDH0UQPvzfjmAACJAYvSJq9X3IUDn4WpF3AXQv1BEtJjbeQlAoTTpfPj4HMC8WxL37IARwBc0D5OyMCtAkVAZ7Jz3J0DMepEY6yb3P54GL3Ge1xdA2IkH+Ax6McDAfCZ5MiUlwJhDSfznVyPA8+wgaF0dMEBlrL5Xc6vpP0xaE5KCZApA7bWJIVp1BcAUdu72aJ8AwHyxdragdiZAgDch2UlCI8DFM8igM08lQKEBmWc0mS9A9deB0Fk4BsBdaBbOhyMywE4l47XYGPo/py88PC2JKMDJEVoOEJ0wQOAfGMy6KibAaTBKoUOtHMCWXDuANHYmwOrgcBmJTiBAUiIUA1Lj/z9uhqdO2l0lwONTlEgs1ANANoNf/NhlIMBOCzAjHTAlwHEuGnAqXhrAfd5lonrYEkDmAYQmDU4GQDsyguVUFPQ/670fQjknJsAGepqAwgX4P+TIcZwGcxdAUgJWNzUnIMDaZp+oTUcXwGmQ1fiaoSLA5INBg0e5EMC3tiUGCR/pPzZ33Z0Dcy1AhOFi8VCSBEBvPunxdecowPRIH+ziGALAb52PS3LTI8Blw/BSqWUiwKyaK09RPgJA/DxEXpZeD0CsmitPUT4CQH37SLix6yZAxdx23jkAFMANuz/O25wxQBaGjOSRKh3AvaLQ6PbxBEBKyydpMRPyv2TALjsTyyLAVJK4HL9ZCMBqQ0L6q0cRQP1LEgoFafY/AizIZpuc9L+smitPUT4CQOMPsSQW8iJAZ/KevO+9C8BWqF+RllctQIgeGrf+XCxAE4jnlmZ4EkDnQqoxtq8wQJvZJyy+jSHAmRG3YYcPC8CsmitPUT4CQIqy4NWlmNk/x334m2111D8IPRLfVNIgwKx5KoHv6wDAoWVrwati9z+fFVWyEPAQQCBZogzPSCLAkB+BJQcxLMDQx0usWbQWQOlLDoU4fg3A6hshx2D6IcCY19STow0hwO8NUB38icC/+fAGyM5pG0DwVXxkNqYawAiGK24fZCVAgI8ZHUHECEB+NY6rulUqQHMNxnAuXBZA3rtmmJbDLsCDtQwI5FMgQM19PxJ3qSrA5MhxnAZzF0DYXAG0CU4wwBtxP4emWSDAqEHSvGJfDsBLjAZRbU8VQJ30mbuU7yDAqtrUdZCFIEAVzfi5C3INQMS/lp78dh1A6fsEiUdz2T91TFQJOiwnQC1kiSXb/x5ArJorT1E+AkDQx0usWbQWQPQ7NRBp9yLAv50xhABw/z/ta0CfH5UswC3+xM4bExFAe+aJxdC/DEDV+7NcUtDgP6yaK09RPgJAISZ5/ErJIMDUdvlhkTImQBXb0DAhYCLAXNaCoARAMkCW3mc41qcRQMCm8LT9Dw5Ay4JSeOPlKcDY24HE0U4kwDkVv4GlPA3AWwbLPUK3IMAYs8Vlwz8lwPU0jMqt+iJA751KEjQD9T9nqpcb3VsmwLZE+OBrFxDALAtQpCbKDMD+ljDg4gIEQIgFYPK5RTBA5rrY/CP4879bsP6MjroswJ6YPFXMWyvAlntoltLjJECfD5RAIGgqwJuIhTPCeC7AwPGzIpfL1D/0qqWvQScJQBS1ftswixVAxJqwuwEiJkD1s30dZXcmwNdA5N8dqSHAS8SZtl4AA8DB4Qf9e/gpwDDHR144lAJAp+Vj58WxGEBgjseFkoHdPxLywaARgBfAq+GCXyyHGED51H2480AqQEbSCFiTMC/AHNSwedwDKcDDBq7zejjgP0oOUAn5sB1ADp+zJDWkF8CtxaB1apn5v5wS1mJJeiHADPlAn7W/KMATz7UaW+nTP8Nib8DTNCbArHrUsCDK+r9Dunr8evwQwKyaK09RPgJA5+juR/EFAMCg4EiLfbEDQHRWYOo0sgTAchEazcKwLsDbtBERpr4qwKyaK09RPgJAZI7fPTcAI8A6K3SBmOsAwPjWNwAdrh7AT6D4PZHoxD/DH1ZnH1YrQH72ufmDGSnA3/UC0TvWHsCmpFb86tQuwLuA1STcLAvAzRbU5A/jF0CO4ga1H9IkwLYdexgA6DHAckbOLRceIkC2c+RC+bssQHRAyxYATR/AF99us3ad9z/Qx0usWbQWQNyxoXrERKe/1Hb5YZEyJkCsmitPUT4CQC3n97tnkjJATQD1RQpAMECsmitPUT4CQIACjmM79TBAdSe+Lz+nJcBYck/khr4BwLZE+OBrFxDAczofbIITBEB3OrJG7XkiwJUpOt47mhpADKFrRPp8LEDvrwbD6sErwPMjzV0rByPAjkHOUw6wKEBFlVZk5aDsP+o9CM92OvG/iGqhSFBzIsCqEeyAVU/0Pxgf3G/F1QjAdV/vzmkgJkC+JXOe1V0vQHUtlZSKoALA1Hb5YZEyJkBZTbzsUdctwLOZAup31gNAXeAb1kL7KUBshpdIUsMRQJ4JqfpZ4CxAV7Zzdc9LJkDdYi/rVF0xwNe9aQ6fnyNA8j8EkehnHMBVECwlRGP4v72CwkwDaBjARLW77lzGHkAcnJvP6/wswOv6jr01vPS/8Ya6Y4/+FsBrLyQOuuQSwA9jxJ0DzTJA06lYmmGjEUDG6QTEAwovwBuh00DB9THAWg7NyoAhJsCsmitPUT4CQCdPHH7dTSbAY+KCd1mGIEAQ89370RYlwAuYgUOq6yTAydtvEd6CH0AIE3Pt7FwVQM5TekkbBdE/lRieuunuGUA9tQUgKOQSwK0VaA2So9i/IR+7bnO/AMAcZBYxO84swE2l4Xc6XBzACszQ544f/b8OyoDFg5kBwCmNDWYUWvE/fc/WCphqFcCmaumrU4cXQNCitlswUAPAO8m8yFQWC0BAV7GP+K8hwLuCsjbZgR9A0YyZThzCF0D3Xlrl0kIfwCKh1p7PwRDAMuT67LQnMEDRupnVBFMWQBeFC5Loxi3AmFjs9uUeJsCypWewscguwCactsJ+zdi/Iun+8qupJkBEwjqm6uMowBp3GhDDmiBATbBFjrqrLMCnLFhX/ngTQHiCyIj2jBJAPxifP3vOyj+nnE38LDAlwAyf3fA2MBLATN8ZpPTrL0DjH9r9bNgswBjlsRzGphnAHROJpd8gMMCPQB9fhAsowFthRCCUbx3AaWMTm8BVxz/1ge1PGJYUQKBpmcuGcjJA0MdLrFm0FkDQx0usWbQWQK/a0YZINSNAdq4K5DTeE0ATS2yF0ikUwDFapp5ZFjLA2mJtn3fiLsCFp6FHWsMdQCCO9bjBTCZAw610x7ve4z9iQ4qUERERwGxSAWrY1SZA0MdLrFm0FkD8k29+OlAZwJcvjHLyHiHA7M7MFqSGJMC2RPjgaxcQwKHaSxmYNidA/JNvfjpQGcAE1rSOSdQwwKX0Gty1Xh7ApAV3LrrjJkBo0koCPRIjwGFbJsFbyxzAQBWsEDrkIUBEwfDmf+sBwEV6o9JXSuE/KzW7ILsmLMDihJrYriQeQJSKZBGLkwLARPc9PQJdLMBnseR6CawVQMxNQr201QRAlaxHb2f9KUDLIJm/DKspwMdz8oNAKCjA4BBXjAHsJ8AbX3AoeBEywLbZtMJcDxvALf7EzhsTEUC5kgCW9X0uwMLm2qsq2CXAhz5Omov/JMCvgB12ez4fwBlF66c7oSbA+L/uojhj8z+Jh3XQZOYjwNCMn48+1R7AmMCfudiJI8BKsndDsRUowDnH+26QhCLAEo3728rLJ8Ddo8MUPD4nwNLk31gOhOI/1va+yUs5IEBaR6oVTdcwQL0xcPzNKxFA70y1h8KEG0DrhoNwXmsiQDV70RW8tyzAe5IWrnaVMcA3OMktwykmwIYJZNEMCzLADWa1ERYzJEDrQFhS5r0hwKOodyerDQzArJorT1E+AkAni9ehiZEuwLDUcAHECgdAwZ0yXucPGEB1gsOlhfExwKC1hH030zHAdFZg6jSyBMD2Bu43UmQxwBnutBV5ITLAMnsxcsOaJ8C+TyPht2wkQNLkEq8PrCTAuVLQkT0rIcBCjrTKQ64cQApBzvq3sSfAEb6MJu7JsL/bcSAYyVQgQGvUXhxFgQRAsB/qRGdRJsB3xYvcjGIsQHZAcc8vNyfASzRwXIkCKMAwCaW0qRwdQAh4UiqIMg1A0f8IQV2VIcAFjEpg8o/vv2I55chCliJAe07qh2W5JsBG3J4X/g4wQGjblrU1iCjAy2t9G+tXAMB4WJgxZzstwJWukjzs1CZAbB9Pb0crMkC61s2fDg0vwESVRTd8uiDAEu8fyeJyJMDYGaOBUFgrQNhljXxoQAvAh6V2dD/gHcB4Cn3jRfkdwIY2PbzpYhBAbbQ0X5aXIECO+JBmAPARQEgZsH3CLAPA4LCIT5+VF8CNY4498YAlwEfU3HewWhBA2pS4GH3xGsCSkm6ygSwlwPhxqifLeybAsgsDoFG4HEBVF4Orp08lQLf4fH5PwCzAulZEBnLSLMBgDSuoGVQoQObn2xPpQi3AP9HRIUjRK0CT6wQ/7u8fwDDh4wm4ziTABGqYvwmu7T935ky5SjPnP/tp0dkeCyXAMyCLlV3mIMAlmt/ZLbkkwIpVWzkgBy3AMERnGxudKsDUx6LFx1omwCU9z34PowzAjs+Q0kQIK8A1TsIW6sEawL4WcgA5YBDArsLD58X73j/DfNA+3A8DwFjSKMOpeiBAPp8njecmIkA3ymZF8oslwGnj5/Fnd/K/3neZgCckEsAV/FuhhGjVv3B7nRxrtRLA0Fy9pU4JFcCw3XoYvHkPwKVkA7t4cyfA22tOahfc5T/An76JsLgowA+GI1SBJRpAzBzRG7dtGUDUBrRK+l4rQLI0U6f0vhjArJorT1E+AkCsmitPUT4CQB9/NpqhLRhAsO4nwwOcBEDoVZlPwJcxwGIxg/YcogfA+UbRu89SK8CynAq4tY8VQDnM3Y5/riDAaE39h342+78LnJqsbmouwImX2HanNTHA/CG1uBIyMMBUIVufuDIwwJDmlAl/fjHAO7va6XoRMMAhZ16u/cQDQJP1V5Iy2RNAngYvcZ7XF0B1aWF07ygjwEI7abTOqCHAv6HVfip/J8Bb4pVSrwEpwPAiCnQzminAhtAMrHIYLMDxT+3hk478P620o5wVLy7AW4bb7G3oKEAVBxMfmLcMwNA10KBWTyDAx0HIRrywHsC4sSAYrBsHwOTIcZwGcxdAImRqxh6kGECMMQJLdnEZQDUlP0C8YBfArJorT1E+AkBhfyPHaUUlwKyaK09RPgJA4do+WGh9E0At/sTOGxMRQNgdBOh9gwlAz/hnsJU6K0Dr6KoUXsMcwKAhfCVJShHAE/bK3UnJBEBEGwPIlmXyP1FzMu6+IiVA2eUaXDPfF0CHmroZJcsmwKyaK09RPgJA5MhxnAZzF0BkOOw/nw4RQErJqf/1BAPAMIqb0JNT7j/hE4zthrklwOR7jVl8NyHAofDIdjK99z8t/sTOGxMRQEa0VkRDgeY/IRj4KAxeH0Cl7KMdgsQHQNh8OIu5wiXAUnhy7xF0LcC5D6Sj1ZwswFE9n+txzSXAX+O+zt9C8r8DetS/lTHWP+TIcZwGcxdAb6Z9n2jLCkDOkGHUHWcoQPGR87XFBve/vsTRYOOWJsC7Tb68oIUiwHKjyyj8ezFA8ng1mE1tD0CQsaAAb/UdwKQiEyFyZCjAea6cYmS2EUBCO2m0zqghwL+FHqWKA/2/ngYvcZ7XF0AaMn8iCy4AQLchsKLFayXAK50B0ULuF0B/++WytwUjwC8y5TPoDu2/TB52uSoOLUDVbofKK80mwAaAq+fRzxdAZp71qaRi5b+smitPUT4CQIBAKT06SyvAg55GqBglMcCsmitPUT4CQHnbRLsA3SBAJ1oz0Cm/0z9cjCFHTkTYP6SQAZdOE9o/fWnRSuuvJ8BzF1/XHNLTP9UiF6i+AibAKGt6HblMpb/J9EmeeG8RQA1ay1E7u/S/j0nW24JrGcAVfH2XVB8fwI4P7RdGHhjALf7EzhsTEUAIPxaeFU0xwBkJedpIGSjAGlf1T/FP3D8yBFrG7zIowKZR6J7BGTBAlqu2GhdSKMCxfg5zjUoRwCpmr/gD2iLAgm6THEDVo7/FOOzG0jrzP1GV1JSYECTAF8f6FlDsJUCeBi9xntcXQNpnLFdcjyXA8jCZm04KAEAeycUKSC4owKrkR5t0Xh/ACK69sWtHCUAl0ypUAHkUQAz+zhDHsivAUFarFCN8KcD2gZAIP3sxwJGPIZvYSSVAfb1Vh/NwMMCrFmhm504mQBh5LLCA6SBAuuQiqfnN8L95z3kuMwEnQCfuAeC6wyJAT8b0MIAG/z9fMteCRC0mwCYSUqnbTOE/ngYvcZ7XF0CPNd2dTxD2PwddF+V9myJAxhJ/TlikF8DpzmZdtn/4P8b3xS/7s6I/FVafbY4hIsBZ+ydVBYLUPw4WLPoNpDDA50d4T632JsDokwv4gRXiPwvlTHQCQiBAtSgx9fwbGkD9ejVCYXYdwJLBLsovNvu/N0PGz1/2AcB2Z5f+N6gswJDLO6LzwS7A8+WRgYaEEMAO4H3Yl3MnwMtXKxLb5CfAsTnymdQzJ0D9Z0qACa8HQLUv/4FuTSLAwUSI7ZZPGcDJPcwf2xQmwIGSjo/lKStAiDt998PWG0BCO2m0zqghwA7ZNYibJg/ARv9+SUAjIsAowlRfrsUbwLMfp4ZlkhvAo6DCp6CCG8AJ3Mul290cQKYBi3L+FBVAMgUu8JwUDEAbFv6w2NglwA//LGn+QiHAFHkGBVT71z/NwXa82ZkNQFTAXIMDkRzAM8hf0QsjLUC3H/7E2O4ZQCXdsLQb6jHAOpCTbBNjGUDbomG70RkKQHQCFztaUC1Agz6P5H4qF8D+2JXKWSwEwGpr+geadTBA7DcAdEuyF0A4OCqER6sbwOM8A/QOQSZA2eUaXDPfF0CzAGXikHXSv3IgDxR7ACVAhrtWRLDVJcB5XNFpsuslQO6tFTOQ3BnAjw+UGOWrEcDHqZmbXiMiwO4YKDs58uI/BK4EINj/J0DSemQRntsOwGK/MDmgCR/AwG+PS3dCE0BFn22sW5waQA==","dtype":"float64","shape":[2051]}}},"id":"54ca3d98-afd0-49fb-8fb3-e3629b32c359","type":"ColumnDataSource"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-13.829111853111977},"y":{"value":-10.700331663778508}},"id":"7ad94a78-c86c-4619-ab99-478ff46fc2e5","type":"Text"},{"attributes":{"callback":null,"plot":{"id":"c6f187f7-74ac-4a91-a79e-65f3b674b7fa","subtype":"Figure","type":"Plot"},"tooltips":[["content","@content - topic: @topic_key"]]},"id":"ac57fd9a-2eec-4c16-beec-cf803702e67b","type":"HoverTool"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["image usr dist tex latex"]}},"id":"cc9ccf06-bb22-4883-9040-600612481737","type":"ColumnDataSource"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["config extensions extension nbextensions nbextension"]}},"id":"25534209-e070-4f8c-be85-a6ac686ce301","type":"ColumnDataSource"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-13.829111853111977},"y":{"value":-10.700331663778508}},"id":"f9b1d2e5-45bd-49a5-98df-dca30cf225cd","type":"Text"},{"attributes":{"data_source":{"id":"e0fc6975-f267-4ec4-96e5-5328f048946c","type":"ColumnDataSource"},"glyph":{"id":"44208c84-eb87-4bd2-baf2-788746a04725","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"eccf3f22-2ea0-4cef-a9ed-47a40245e1be","type":"Text"},"selection_glyph":null},"id":"6efcc021-cc3b-4cc9-8fea-2d9384cf89ca","type":"GlyphRenderer"},{"attributes":{"text_color":{"value":"black"},"x":{"value":3.271808159886695},"y":{"value":10.73945666145928}},"id":"365f5cd6-57f8-4df1-bbdf-611cc4484dc9","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":10.691760478188936},"y":{"value":0.2147773986702442}},"id":"9d978c10-9114-4057-a51d-e42827e4deb9","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":7.667309720996942},"y":{"value":14.303423589774484}},"id":"3985ab84-fe63-4f20-b167-efd859049eb8","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-10.379383622641004},"y":{"value":1.3776975004569043}},"id":"27cb5a62-2bbf-4534-9e77-e63144d1ad58","type":"Text"},{"attributes":{"data_source":{"id":"998a52f8-262d-4c2d-82b0-095bc65da4c8","type":"ColumnDataSource"},"glyph":{"id":"2882c2a1-ab0d-4fca-bc61-40db595e37b0","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"fdae98cc-37bf-44ba-8438-c5b599a34428","type":"Text"},"selection_glyph":null},"id":"dfda66a2-d552-4c18-bef2-472e864ccb36","type":"GlyphRenderer"},{"attributes":{"callback":null},"id":"5e3ae4fd-dddb-470e-9327-24c7af48fe88","type":"DataRange1d"},{"attributes":{"data_source":{"id":"657691ef-c976-4326-8ad1-ef32a64a9865","type":"ColumnDataSource"},"glyph":{"id":"44f4c9fd-cab1-43f6-851d-61f2d96eb0d1","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"45c104a4-fdb4-4eba-96f1-db84bde3c370","type":"Text"},"selection_glyph":null},"id":"e5a407ab-8e8d-426b-9f15-eb9bbe9da52e","type":"GlyphRenderer"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["pr release change master ll"]}},"id":"369e9512-ae20-46d4-ae8f-2e44d85e5c96","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"65078b44-d737-43f8-bf57-37bd7caaa8b9","type":"ColumnDataSource"},"glyph":{"id":"f6e9ef6c-970a-4182-a402-efbe3237121e","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"d3a068ec-e245-47a8-8e5e-229371bfef67","type":"Text"},"selection_glyph":null},"id":"0e971831-8dfc-412c-9845-39773f8f2cd3","type":"GlyphRenderer"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["pr release change master ll"]}},"id":"4d484f85-c33b-416d-967d-5d9888e297cf","type":"ColumnDataSource"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["assets cloud githubusercontent png 11e5"]}},"id":"801c0c6d-23e1-4fa1-b4b4-0269c319214a","type":"ColumnDataSource"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["code issues jupyterlab ui different"]}},"id":"0fb854b3-c18e-4f62-809c-ad43867a2524","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"3d2a9b70-e876-464f-aa9c-cf06b8aa0a80","type":"ColumnDataSource"},"glyph":{"id":"3aa0302c-3ca7-4a5a-9751-df896edf5826","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"91e3f29d-e05b-473c-a7f8-57c0d4a6ed0b","type":"Text"},"selection_glyph":null},"id":"a93688a0-f50b-4311-8d5f-508c7a9d76fc","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"779314ff-ae70-43c5-97b0-1edf7f44f361","type":"ColumnDataSource"},"glyph":{"id":"c71a6a95-5065-49ae-b2ab-23934aaed45a","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"151dd32d-ed0e-4d44-be3d-67382135a12f","type":"Text"},"selection_glyph":null},"id":"82f66ef3-dec1-480a-9b08-32df2f67e168","type":"GlyphRenderer"},{"attributes":{"text_color":{"value":"black"},"x":{"value":8.941888871109946},"y":{"value":12.873792922911283}},"id":"bbe7aeeb-b2d2-4001-ab00-4b2d1a09dfca","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["markdown mathjax table output metadata"]}},"id":"857b7a08-2251-43ae-aabe-1ee88ca1e9cc","type":"ColumnDataSource"},{"attributes":{"text_color":{"value":"black"},"x":{"value":0.508955821209095},"y":{"value":-12.304937735783842}},"id":"635e62a7-fe92-4844-99f4-4520f28635da","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-13.829111853111977},"y":{"value":-10.700331663778508}},"id":"8d788b86-f58f-43a6-9465-ff1b838efabf","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-10.379383622641004},"y":{"value":1.3776975004569043}},"id":"f445c279-bec9-406e-a17a-e71a5f7d82dc","type":"Text"},{"attributes":{"plot":{"id":"c6f187f7-74ac-4a91-a79e-65f3b674b7fa","subtype":"Figure","type":"Plot"}},"id":"4f08b6d7-675a-4674-9307-14c5b0557b9f","type":"WheelZoomTool"},{"attributes":{"data_source":{"id":"5ca2eded-7c03-474b-8da3-db1160f7b7c9","type":"ColumnDataSource"},"glyph":{"id":"69e083a0-052e-4d98-93d1-838cb1784271","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"2c726cb8-ec93-49bb-8cfd-20c7d5957dd0","type":"Text"},"selection_glyph":null},"id":"b346d6de-6f1e-4a8b-832d-cc47d04d9f3b","type":"GlyphRenderer"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["file files path directory home"]}},"id":"e4c258d3-dc00-4da0-b0cd-d1b7e84c759f","type":"ColumnDataSource"},{"attributes":{"text_color":{"value":"black"},"x":{"value":0.8617641679162753},"y":{"value":-2.1743612877431775}},"id":"ff8b9827-64c3-4b7c-b97e-b6ff2bd74957","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":10.691760478188936},"y":{"value":0.2147773986702442}},"id":"c71a6a95-5065-49ae-b2ab-23934aaed45a","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["docs documentation latest en readthedocs"]}},"id":"bcc56b34-107c-48da-b7d8-d0ac7b097439","type":"ColumnDataSource"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["notebookapp kernels localhost root 8888"]}},"id":"99c13b27-10c1-4c33-9e8a-4c09414cd5eb","type":"ColumnDataSource"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":3.271808159886695},"y":{"value":10.73945666145928}},"id":"812ab2e9-aeb6-4550-895a-79f22e4e8328","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-4.989522886225234},"y":{"value":-2.9107161689360863}},"id":"21554279-4bce-4621-9213-33e0ad2a2e5a","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":0.508955821209095},"y":{"value":-12.304937735783842}},"id":"1f2a668c-c69c-4100-a477-212c13478e69","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-2.0802832205695845},"y":{"value":-18.009875465137124}},"id":"3aa0302c-3ca7-4a5a-9751-df896edf5826","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-6.290654141902013},"y":{"value":0.5474887854382674}},"id":"4c9b6823-be4e-443c-869a-23d341fb8c74","type":"Text"},{"attributes":{"data_source":{"id":"36147a35-f71b-48cc-8e24-7da44fe48b3f","type":"ColumnDataSource"},"glyph":{"id":"07fe649b-a872-4fe6-b717-e3939fc00cb7","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"8c249964-222d-4d74-92d7-fb1552754c64","type":"Text"},"selection_glyph":null},"id":"06c05487-7222-4e85-84ea-277a55cd628b","type":"GlyphRenderer"},{"attributes":{"text_color":{"value":"black"},"x":{"value":8.941888871109946},"y":{"value":12.873792922911283}},"id":"d8acd395-2975-4e74-9d8d-69afee714ee6","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-9.906856849698142},"y":{"value":12.09120865460718}},"id":"44f4c9fd-cab1-43f6-851d-61f2d96eb0d1","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["image usr dist tex latex"]}},"id":"b345414c-a5f1-4b63-98cf-44ea0ab89e8f","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"bb87dcff-87c0-468f-b934-67c03b2faf78","type":"ColumnDataSource"},"glyph":{"id":"365f5cd6-57f8-4df1-bbdf-611cc4484dc9","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"41e95b21-c57f-475a-9683-0b747cfade8d","type":"Text"},"selection_glyph":null},"id":"98a92a61-cd42-455a-90c5-6fe667091fa7","type":"GlyphRenderer"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":10.691760478188936},"y":{"value":0.2147773986702442}},"id":"8bcb0236-fcfa-4888-b025-5194f1512280","type":"Text"},{"attributes":{"data_source":{"id":"99c13b27-10c1-4c33-9e8a-4c09414cd5eb","type":"ColumnDataSource"},"glyph":{"id":"724cac34-39c9-4e27-80b0-0343ba73491a","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"812ab2e9-aeb6-4550-895a-79f22e4e8328","type":"Text"},"selection_glyph":null},"id":"bfefaa0f-6ce0-461c-a426-8eaa0d85785c","type":"GlyphRenderer"},{"attributes":{"text_color":{"value":"black"},"x":{"value":11.205568761116897},"y":{"value":10.924329687088932}},"id":"dcec8393-bf18-418e-b2ec-adf06194fba2","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":10.691760478188936},"y":{"value":0.2147773986702442}},"id":"eccf3f22-2ea0-4cef-a9ed-47a40245e1be","type":"Text"},{"attributes":{"data_source":{"id":"056e9bc7-689c-4d9b-8e10-4aacf99b176a","type":"ColumnDataSource"},"glyph":{"id":"4c76d544-508f-492e-885c-d322664ba51b","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"067b6b52-c0e4-4b55-a95d-47a539349d9d","type":"Text"},"selection_glyph":null},"id":"03ba5561-effb-447f-ace7-642049e97e71","type":"GlyphRenderer"},{"attributes":{"text_color":{"value":"black"},"x":{"value":3.271808159886695},"y":{"value":10.73945666145928}},"id":"724cac34-39c9-4e27-80b0-0343ba73491a","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-6.90822581905499},"y":{"value":4.489129954532823}},"id":"0ce4ed7a-6f55-47a9-8079-a2443445876d","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-2.936334240519639},"y":{"value":9.251630498031428}},"id":"7dc6c19d-9562-45d4-bd53-80189cfc6539","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["import nbconvert code custom print"]}},"id":"10f9763f-0063-42ec-b6bd-dd7c14203652","type":"ColumnDataSource"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":5.080899503440006},"y":{"value":-13.159288874540737}},"id":"1de1da7b-fed8-47c5-bfd9-f0467e053e30","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":5.10962402899887},"y":{"value":2.6416720452979803}},"id":"997ad564-33d5-492a-913a-3e0092f49f8a","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":13.164038544190726},"y":{"value":-10.833708443946605}},"id":"afe20285-5694-4f47-8e96-52ee175f7016","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-6.290654141902013},"y":{"value":0.5474887854382674}},"id":"62df2fd8-d805-4185-8483-30649be5b679","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["code issues jupyterlab ui different"]}},"id":"903b149c-a3dc-4d27-a98b-de451ace770d","type":"ColumnDataSource"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-16.063934148690535},"y":{"value":1.4737641112603403}},"id":"8c249964-222d-4d74-92d7-fb1552754c64","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["notifications view email wrote reply"]}},"id":"3d2a9b70-e876-464f-aa9c-cf06b8aa0a80","type":"ColumnDataSource"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-2.936334240519639},"y":{"value":9.251630498031428}},"id":"72c08bc2-d0a4-442c-8fc7-92eb68a35168","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-4.989522886225234},"y":{"value":-2.9107161689360863}},"id":"0e69e633-6d91-4c5b-ad27-20090d41aa67","type":"Text"},{"attributes":{"data_source":{"id":"ee77ffd3-39fa-4008-b897-8f250177ebc6","type":"ColumnDataSource"},"glyph":{"id":"3444694d-73a4-46f2-b79c-c55d8f0c439a","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1d9cfa9e-33c2-478f-8e8a-369e2174db08","type":"Text"},"selection_glyph":null},"id":"c2ccc0be-343e-4d5c-b319-db1ad2329704","type":"GlyphRenderer"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["pr release change master ll"]}},"id":"f8dead91-1771-40d8-9066-c72e6ba96a5f","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"46d36688-fcfb-4e53-a619-a5258f691123","type":"ColumnDataSource"},"glyph":{"id":"d0d70aa8-1994-474e-b3b2-99cfce0c937c","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"8f7b6efe-ca6a-40f3-957a-ab17189c6d16","type":"Text"},"selection_glyph":null},"id":"9a2231ff-743b-4b12-913d-49330093bde3","type":"GlyphRenderer"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":7.667309720996942},"y":{"value":14.303423589774484}},"id":"8b72b40f-03b0-438a-81fc-b55aed27b23b","type":"Text"},{"attributes":{"plot":{"id":"c6f187f7-74ac-4a91-a79e-65f3b674b7fa","subtype":"Figure","type":"Plot"}},"id":"101b2305-05da-40ee-b82b-869c7ee561c4","type":"ResetTool"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-6.90822581905499},"y":{"value":4.489129954532823}},"id":"82d83462-1916-481e-9d52-04ad4622f2c8","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":13.164038544190726},"y":{"value":-10.833708443946605}},"id":"7db291be-34f9-4e78-b08c-a61220a59e62","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":0.6214270258363711},"y":{"value":-6.3130714377527575}},"id":"79f86fc3-bd27-42c7-85cb-14829317632e","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-9.906856849698142},"y":{"value":12.09120865460718}},"id":"29cd66d8-3296-47f0-bab2-a1006b1f92cc","type":"Text"},{"attributes":{"data_source":{"id":"54c8089b-f420-465d-855b-5360c19f052e","type":"ColumnDataSource"},"glyph":{"id":"7fce7860-0a81-4537-8407-c6617a90970b","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1012a299-c6fa-4090-a6e5-95599bb50aaa","type":"Text"},"selection_glyph":null},"id":"0c16d91c-d89a-4394-925f-b93a55777866","type":"GlyphRenderer"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["code issues jupyterlab ui different"]}},"id":"e494bd2e-3f46-408f-8438-3d710315f570","type":"ColumnDataSource"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["config extensions extension nbextensions nbextension"]}},"id":"54c8089b-f420-465d-855b-5360c19f052e","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"0fc02496-e464-46ba-adc5-057df3968abd","type":"ColumnDataSource"},"glyph":{"id":"4607e894-6c6f-4216-a707-448a2ac0e480","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"4c9b6823-be4e-443c-869a-23d341fb8c74","type":"Text"},"selection_glyph":null},"id":"67842bce-f4a7-4738-ad82-ef34b09203ad","type":"GlyphRenderer"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":5.10962402899887},"y":{"value":2.6416720452979803}},"id":"545fa07f-d720-4a02-abc6-1f6d60e87126","type":"Text"},{"attributes":{"data_source":{"id":"4e001a91-3439-48a3-a382-ab5b5dba4efa","type":"ColumnDataSource"},"glyph":{"id":"82d83462-1916-481e-9d52-04ad4622f2c8","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"e285ae30-ae14-4f8a-b55c-c9e71622ccc4","type":"Text"},"selection_glyph":null},"id":"412f95a3-de25-4974-9384-a973c8d7c820","type":"GlyphRenderer"},{"attributes":{},"id":"ca190edd-52af-44a2-9921-fa4595e162ef","type":"LinearScale"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":5.10962402899887},"y":{"value":2.6416720452979803}},"id":"067b6b52-c0e4-4b55-a95d-47a539349d9d","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-6.290654141902013},"y":{"value":0.5474887854382674}},"id":"c0d83c9f-0ead-4a36-a7db-ce6c72c5d09d","type":"Text"},{"attributes":{"fill_color":{"field":"fill_color"},"line_color":{"field":"line_color"},"x":{"field":"x"},"y":{"field":"y"}},"id":"21cdcc78-277e-4864-97a7-8e49f768b71c","type":"Circle"},{"attributes":{"data_source":{"id":"3c9ecff4-e24c-4279-8dda-a17e6e8aaa1d","type":"ColumnDataSource"},"glyph":{"id":"7db9f874-8a31-4e6c-be70-d31aa4c4ac7a","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"26ad0107-2dfa-46c3-90fa-1c7d9755c72f","type":"Text"},"selection_glyph":null},"id":"b5723939-3bc2-4b49-8625-33426a9681fd","type":"GlyphRenderer"},{"attributes":{"text_color":{"value":"black"},"x":{"value":0.6214270258363711},"y":{"value":-6.3130714377527575}},"id":"d0d70aa8-1994-474e-b3b2-99cfce0c937c","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-4.989522886225234},"y":{"value":-2.9107161689360863}},"id":"412f6edf-ee17-4f96-a8a4-2fca781dc751","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-6.290654141902013},"y":{"value":0.5474887854382674}},"id":"7fce7860-0a81-4537-8407-c6617a90970b","type":"Text"},{"attributes":{"data_source":{"id":"10f9763f-0063-42ec-b6bd-dd7c14203652","type":"ColumnDataSource"},"glyph":{"id":"c906bc4a-f9ab-45ec-adad-60f110f83b57","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"dc76aed3-8959-4db4-8afc-2a06af6d629d","type":"Text"},"selection_glyph":null},"id":"22bbba11-83b0-4d08-81c1-373af645c208","type":"GlyphRenderer"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_scroll":"auto","active_tap":"auto","tools":[{"id":"6f946c26-eaf7-4ea8-9b13-f14be0f95e14","type":"PanTool"},{"id":"4f08b6d7-675a-4674-9307-14c5b0557b9f","type":"WheelZoomTool"},{"id":"b9cd8cd0-eec5-4745-bea8-53d39f95c6df","type":"BoxZoomTool"},{"id":"101b2305-05da-40ee-b82b-869c7ee561c4","type":"ResetTool"},{"id":"ac57fd9a-2eec-4c16-beec-cf803702e67b","type":"HoverTool"},{"id":"2e00f79b-3314-40f4-b4fd-093bf0796560","type":"SaveTool"}]},"id":"33106ba9-161d-45c4-95f4-d13efe6aab18","type":"Toolbar"},{"attributes":{"plot":null,"text":"20 newsgroups LDA viz"},"id":"86a2a08b-ecc7-48fd-b75c-e16d7f479250","type":"Title"},{"attributes":{"text_color":{"value":"black"},"x":{"value":0.508955821209095},"y":{"value":-12.304937735783842}},"id":"13221198-e807-4000-81b1-019074ed9a09","type":"Text"},{"attributes":{"data_source":{"id":"ee83c20e-0215-4b06-93ad-4482f62be7e7","type":"ColumnDataSource"},"glyph":{"id":"0f62dbc8-5235-40c9-b0ac-743e64bd8caf","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"412f6edf-ee17-4f96-a8a4-2fca781dc751","type":"Text"},"selection_glyph":null},"id":"4d987bf3-31b9-4e4e-9935-a535f951d3e3","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"8f16a268-558c-42fc-a112-9b60f8f8c248","type":"ColumnDataSource"},"glyph":{"id":"79f86fc3-bd27-42c7-85cb-14829317632e","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"ea417a48-1859-4d74-93e1-86ddfa7ae9ee","type":"Text"},"selection_glyph":null},"id":"9222ff07-503e-41f9-a3ec-3c646405e455","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"2378ca15-74c7-449a-87dc-a11a1e62f515","type":"ColumnDataSource"},"glyph":{"id":"13221198-e807-4000-81b1-019074ed9a09","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"b331f938-90ff-42f3-bb03-25be3b292b0b","type":"Text"},"selection_glyph":null},"id":"d70f9c9f-231f-4c8e-bd40-1a547677e97c","type":"GlyphRenderer"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-4.989522886225234},"y":{"value":-2.9107161689360863}},"id":"eb30a189-3fe3-4d99-9c59-9502d3d9ed7b","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-2.0802832205695845},"y":{"value":-18.009875465137124}},"id":"fa5d1078-af8a-43ee-8566-296579ecebf5","type":"Text"},{"attributes":{"data_source":{"id":"f54023e5-3a70-4017-9494-64024e020ccb","type":"ColumnDataSource"},"glyph":{"id":"d8acd395-2975-4e74-9d8d-69afee714ee6","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"888fbb7e-4f42-494d-864f-1723510e12a5","type":"Text"},"selection_glyph":null},"id":"5e1f91c2-2b9d-42c6-8816-c86113e24e71","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"08f9990e-e32f-40f0-ad32-a3a2b3bca161","type":"ColumnDataSource"},"glyph":{"id":"9d978c10-9114-4057-a51d-e42827e4deb9","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"8bcb0236-fcfa-4888-b025-5194f1512280","type":"Text"},"selection_glyph":null},"id":"a33ae946-a9e3-477b-9498-209008fdebcc","type":"GlyphRenderer"},{"attributes":{"text_color":{"value":"black"},"x":{"value":13.164038544190726},"y":{"value":-10.833708443946605}},"id":"c133852b-77ce-4425-a390-3c1c0ab1fbbf","type":"Text"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"plot":null,"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"29df0758-eaf1-466a-b2fd-85077652d754","type":"BoxAnnotation"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-2.0802832205695845},"y":{"value":-18.009875465137124}},"id":"d88328ba-279b-47b1-ab83-0159069e696a","type":"Text"},{"attributes":{"data_source":{"id":"4d484f85-c33b-416d-967d-5d9888e297cf","type":"ColumnDataSource"},"glyph":{"id":"c133852b-77ce-4425-a390-3c1c0ab1fbbf","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"afe20285-5694-4f47-8e96-52ee175f7016","type":"Text"},"selection_glyph":null},"id":"0a364a57-c309-4339-8ed8-7452956d5c22","type":"GlyphRenderer"},{"attributes":{"text_color":{"value":"black"},"x":{"value":3.271808159886695},"y":{"value":10.73945666145928}},"id":"7db9f874-8a31-4e6c-be70-d31aa4c4ac7a","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-10.379383622641004},"y":{"value":1.3776975004569043}},"id":"1d9cfa9e-33c2-478f-8e8a-369e2174db08","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":5.10962402899887},"y":{"value":2.6416720452979803}},"id":"4c76d544-508f-492e-885c-d322664ba51b","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":0.6214270258363711},"y":{"value":-6.3130714377527575}},"id":"cc18db1d-d511-4b3a-83cc-4c4b6bb659cd","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-2.0802832205695845},"y":{"value":-18.009875465137124}},"id":"ec32c195-0726-4fa0-8622-982961e1b51b","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["file files path directory home"]}},"id":"4e001a91-3439-48a3-a382-ab5b5dba4efa","type":"ColumnDataSource"},{"attributes":{"plot":{"id":"c6f187f7-74ac-4a91-a79e-65f3b674b7fa","subtype":"Figure","type":"Plot"}},"id":"6f946c26-eaf7-4ea8-9b13-f14be0f95e14","type":"PanTool"},{"attributes":{"data_source":{"id":"903b149c-a3dc-4d27-a98b-de451ace770d","type":"ColumnDataSource"},"glyph":{"id":"7ad94a78-c86c-4619-ab99-478ff46fc2e5","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"d5098947-81ee-4066-ba6e-9e39717a264c","type":"Text"},"selection_glyph":null},"id":"8f4dd5cc-463a-4bf3-89e0-d9aef36c3098","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"f8dead91-1771-40d8-9066-c72e6ba96a5f","type":"ColumnDataSource"},"glyph":{"id":"997fb059-6a3e-476f-a52d-0625e6523ad5","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"0d65b448-25aa-4651-8987-442313723431","type":"Text"},"selection_glyph":null},"id":"786fdff0-5d55-47eb-880c-5863e614e674","type":"GlyphRenderer"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["js notebookapp users 21 grant"]}},"id":"57a08444-8b1b-4f14-888e-61a924e7cdb3","type":"ColumnDataSource"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["image usr dist tex latex"]}},"id":"376ab2ab-11f3-4a93-b578-a23de3679674","type":"ColumnDataSource"},{"attributes":{"text_color":{"value":"black"},"x":{"value":11.205568761116897},"y":{"value":10.924329687088932}},"id":"83643f41-25f3-4fa8-95b3-45c125cd934e","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":0.8617641679162753},"y":{"value":-2.1743612877431775}},"id":"58d672fb-acf3-4edb-8748-5b89e9005858","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-16.063934148690535},"y":{"value":1.4737641112603403}},"id":"5d65ba17-1558-4973-8a59-a15cf88d5a5a","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":0.508955821209095},"y":{"value":-12.304937735783842}},"id":"63efbda6-97d1-42e9-a8a3-6fe992139c6c","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-2.0802832205695845},"y":{"value":-18.009875465137124}},"id":"91e3f29d-e05b-473c-a7f8-57c0d4a6ed0b","type":"Text"},{"attributes":{"data_source":{"id":"22feb423-7b8e-42fe-a314-2691357cae25","type":"ColumnDataSource"},"glyph":{"id":"83643f41-25f3-4fa8-95b3-45c125cd934e","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"baa3c032-870a-44d9-868f-b3714d19f2c9","type":"Text"},"selection_glyph":null},"id":"16a4325e-4689-46f2-854d-18f9f5ce8d71","type":"GlyphRenderer"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["js static require npm main"]}},"id":"2cdd007d-6822-4a18-8602-c8e513a08e9e","type":"ColumnDataSource"},{"attributes":{"text_color":{"value":"black"},"x":{"value":0.6214270258363711},"y":{"value":-6.3130714377527575}},"id":"38608572-f400-4aee-aac6-b6ddd8d9a5d3","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":0.8617641679162753},"y":{"value":-2.1743612877431775}},"id":"c0c3c8a9-621f-47ac-9dc0-e28cd68f1dda","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":0.8617641679162753},"y":{"value":-2.1743612877431775}},"id":"386165ee-da73-4c60-8e88-e30a56ad5e95","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-10.379383622641004},"y":{"value":1.3776975004569043}},"id":"ce702fc9-766c-4ef8-8218-eec973fb4379","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["problem try issues browser chrome"]}},"id":"9fddf6d3-7bd0-4091-a0f4-6a4340df5b5d","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"cdb1b7b5-71c8-4ccf-8f84-2b70568b8afe","type":"ColumnDataSource"},"glyph":{"id":"5b6469a6-dec9-45d1-bc20-0330c6ccfc6c","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"5d65ba17-1558-4973-8a59-a15cf88d5a5a","type":"Text"},"selection_glyph":null},"id":"6ffed050-794d-47ed-8aa8-5ac6639edee7","type":"GlyphRenderer"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["assets cloud githubusercontent png 11e5"]}},"id":"2378ca15-74c7-449a-87dc-a11a1e62f515","type":"ColumnDataSource"},{"attributes":{},"id":"f6ffe1d3-2475-4680-adff-f2091f2cc8ad","type":"LinearScale"},{"attributes":{"data_source":{"id":"9fddf6d3-7bd0-4091-a0f4-6a4340df5b5d","type":"ColumnDataSource"},"glyph":{"id":"c7169f8f-4b2b-40dd-b547-e3ba75d7b7a1","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1b280ef3-183b-4bae-8661-5028670e3395","type":"Text"},"selection_glyph":null},"id":"68e71da7-81df-4192-b2ca-116e29e34b84","type":"GlyphRenderer"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["js notebookapp users 21 grant"]}},"id":"e3bb0c95-24ee-41a0-ae19-d1a6fd0cbc66","type":"ColumnDataSource"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-4.989522886225234},"y":{"value":-2.9107161689360863}},"id":"4e19a531-4632-4bfe-8dcb-1a68f5965a1d","type":"Text"},{"attributes":{"callback":null},"id":"1dccfa4b-4905-4357-8d23-d64c66a4f80a","type":"DataRange1d"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["markdown mathjax table output metadata"]}},"id":"ee83c20e-0215-4b06-93ad-4482f62be7e7","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"79281607-a305-403f-9aaf-410526407d67","type":"ColumnDataSource"},"glyph":{"id":"4c964e0e-29ae-4019-b840-3e77101f3924","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"8bb2b99a-01d9-4010-be4e-35723d68e624","type":"Text"},"selection_glyph":null},"id":"168f1a86-9f12-464f-b006-76826b477cb2","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"25534209-e070-4f8c-be85-a6ac686ce301","type":"ColumnDataSource"},"glyph":{"id":"c0d83c9f-0ead-4a36-a7db-ce6c72c5d09d","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"62df2fd8-d805-4185-8483-30649be5b679","type":"Text"},"selection_glyph":null},"id":"17d88604-090a-4f0f-8058-cc3e858b1c4e","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"57a08444-8b1b-4f14-888e-61a924e7cdb3","type":"ColumnDataSource"},"glyph":{"id":"80618ba1-cd95-448c-84d2-f933c6f5d2b6","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"4b28c330-1206-4ba8-8324-a0c69f625afd","type":"Text"},"selection_glyph":null},"id":"ddb4ffd3-8e78-4d34-9402-609db1c120c3","type":"GlyphRenderer"},{"attributes":{"text_color":{"value":"black"},"x":{"value":7.667309720996942},"y":{"value":14.303423589774484}},"id":"89d22dff-b3a4-4e16-999f-ac87868f09a3","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["codemirror pull cells mode keyboard"]}},"id":"46d36688-fcfb-4e53-a619-a5258f691123","type":"ColumnDataSource"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":7.667309720996942},"y":{"value":14.303423589774484}},"id":"0f0e2a80-e14f-4571-a313-bd4becc2c1d1","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-6.90822581905499},"y":{"value":4.489129954532823}},"id":"fdae98cc-37bf-44ba-8438-c5b599a34428","type":"Text"},{"attributes":{},"id":"e68e7eaf-2cd9-4ded-a40a-2d8a085b7859","type":"ToolEvents"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["notebookapp kernels localhost root 8888"]}},"id":"3c9ecff4-e24c-4279-8dda-a17e6e8aaa1d","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"376ab2ab-11f3-4a93-b578-a23de3679674","type":"ColumnDataSource"},"glyph":{"id":"431ae4b9-88bb-4558-a135-1bbc42e511cd","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"c0c3c8a9-621f-47ac-9dc0-e28cd68f1dda","type":"Text"},"selection_glyph":null},"id":"77826264-bf10-4516-8d74-ce42998f5ea5","type":"GlyphRenderer"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":5.080899503440006},"y":{"value":-13.159288874540737}},"id":"ee32f7b1-f9a0-42e1-8dc3-689ab8a58964","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["server run running output message"]}},"id":"36147a35-f71b-48cc-8e24-7da44fe48b3f","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"a0fe2a5e-c6a5-4c3e-a717-20c5e6c86381","type":"ColumnDataSource"},"glyph":{"id":"3985ab84-fe63-4f20-b167-efd859049eb8","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"0f0e2a80-e14f-4571-a313-bd4becc2c1d1","type":"Text"},"selection_glyph":null},"id":"885e50b7-7c90-4d10-bd3a-59750081915c","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"fd4de187-5c90-439c-858e-43c7706da678","type":"ColumnDataSource"},"glyph":{"id":"f445c279-bec9-406e-a17a-e71a5f7d82dc","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"27cb5a62-2bbf-4534-9e77-e63144d1ad58","type":"Text"},"selection_glyph":null},"id":"b16233f4-119d-4242-832e-ddb9aa7dfc8d","type":"GlyphRenderer"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":5.10962402899887},"y":{"value":2.6416720452979803}},"id":"75b8157e-878b-4ead-919b-f74b4d457889","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":7.667309720996942},"y":{"value":14.303423589774484}},"id":"f6e9ef6c-970a-4182-a402-efbe3237121e","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["line file py lib packages"]}},"id":"cdaae5d4-0959-4c28-bf8e-ed5ceeb34ebc","type":"ColumnDataSource"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["notifications view email wrote reply"]}},"id":"f93fc94d-e8e9-4654-ba02-d01cb8cff711","type":"ColumnDataSource"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["install pip conda installed packages"]}},"id":"65078b44-d737-43f8-bf57-37bd7caaa8b9","type":"ColumnDataSource"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["server run running output message"]}},"id":"79281607-a305-403f-9aaf-410526407d67","type":"ColumnDataSource"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["docs documentation latest en readthedocs"]}},"id":"aeaf291a-2604-498d-a5b3-d7c0614b5683","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"6464fa9b-3efe-4b37-8983-9f974883411c","type":"ColumnDataSource"},"glyph":{"id":"29cd66d8-3296-47f0-bab2-a1006b1f92cc","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"df525c00-f5ad-4e69-a8ba-13cd618f89e9","type":"Text"},"selection_glyph":null},"id":"62981eae-7c1b-4e79-b385-fcf5a026a68e","type":"GlyphRenderer"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":8.941888871109946},"y":{"value":12.873792922911283}},"id":"180edd97-e128-46cc-b823-c552c6691cae","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-6.290654141902013},"y":{"value":0.5474887854382674}},"id":"1012a299-c6fa-4090-a6e5-95599bb50aaa","type":"Text"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"x":{"field":"x"},"y":{"field":"y"}},"id":"db05bb8a-b72d-41cd-95d7-66780c6d852d","type":"Circle"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":0.6214270258363711},"y":{"value":-6.3130714377527575}},"id":"ea417a48-1859-4d74-93e1-86ddfa7ae9ee","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-6.90822581905499},"y":{"value":4.489129954532823}},"id":"e285ae30-ae14-4f8a-b55c-c9e71622ccc4","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["codemirror pull cells mode keyboard"]}},"id":"b3e566ec-fb10-41d3-99cd-f1df2f84b203","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"8a01b03d-e491-4da1-af9e-2ba232837fd9","type":"ColumnDataSource"},"glyph":{"id":"ce702fc9-766c-4ef8-8218-eec973fb4379","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"b59a41df-6edd-4b00-bf1e-9a7c0ae7337f","type":"Text"},"selection_glyph":null},"id":"b49cca33-92f8-4f7d-a5e8-cdea28e82fd8","type":"GlyphRenderer"},{"attributes":{"overlay":{"id":"29df0758-eaf1-466a-b2fd-85077652d754","type":"BoxAnnotation"},"plot":{"id":"c6f187f7-74ac-4a91-a79e-65f3b674b7fa","subtype":"Figure","type":"Plot"}},"id":"b9cd8cd0-eec5-4745-bea8-53d39f95c6df","type":"BoxZoomTool"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["tests test travis pr looks"]}},"id":"779314ff-ae70-43c5-97b0-1edf7f44f361","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"801c0c6d-23e1-4fa1-b4b4-0269c319214a","type":"ColumnDataSource"},"glyph":{"id":"1f2a668c-c69c-4100-a477-212c13478e69","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"63efbda6-97d1-42e9-a8a3-6fe992139c6c","type":"Text"},"selection_glyph":null},"id":"067a6b1a-ea96-48b0-86a2-d12b123bc2e8","type":"GlyphRenderer"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["import nbconvert code custom print"]}},"id":"657691ef-c976-4326-8ad1-ef32a64a9865","type":"ColumnDataSource"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["import nbconvert code custom print"]}},"id":"6464fa9b-3efe-4b37-8983-9f974883411c","type":"ColumnDataSource"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-9.906856849698142},"y":{"value":12.09120865460718}},"id":"dc76aed3-8959-4db4-8afc-2a06af6d629d","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":0.8617641679162753},"y":{"value":-2.1743612877431775}},"id":"4178bcff-6532-4dcd-ae3f-770e11cdafaa","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-9.906856849698142},"y":{"value":12.09120865460718}},"id":"45c104a4-fdb4-4eba-96f1-db84bde3c370","type":"Text"},{"attributes":{"data_source":{"id":"cc9ccf06-bb22-4883-9040-600612481737","type":"ColumnDataSource"},"glyph":{"id":"ff8b9827-64c3-4b7c-b97e-b6ff2bd74957","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"4178bcff-6532-4dcd-ae3f-770e11cdafaa","type":"Text"},"selection_glyph":null},"id":"80ee3dcf-6495-4157-8c65-187409acf542","type":"GlyphRenderer"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":8.941888871109946},"y":{"value":12.873792922911283}},"id":"fe943a53-3635-435d-8871-70a89c524634","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["tests test travis pr looks"]}},"id":"e0fc6975-f267-4ec4-96e5-5328f048946c","type":"ColumnDataSource"},{"attributes":{"text_color":{"value":"black"},"x":{"value":11.205568761116897},"y":{"value":10.924329687088932}},"id":"80618ba1-cd95-448c-84d2-f933c6f5d2b6","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":13.164038544190726},"y":{"value":-10.833708443946605}},"id":"0d65b448-25aa-4651-8987-442313723431","type":"Text"},{"attributes":{"data_source":{"id":"e3bb0c95-24ee-41a0-ae19-d1a6fd0cbc66","type":"ColumnDataSource"},"glyph":{"id":"dcec8393-bf18-418e-b2ec-adf06194fba2","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"b52ff2d2-16c4-472b-ad5c-df5aaa3865cf","type":"Text"},"selection_glyph":null},"id":"325efc86-f11a-4deb-aa1b-9e3490471faf","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"857b7a08-2251-43ae-aabe-1ee88ca1e9cc","type":"ColumnDataSource"},"glyph":{"id":"21554279-4bce-4621-9213-33e0ad2a2e5a","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"eb30a189-3fe3-4d99-9c59-9502d3d9ed7b","type":"Text"},"selection_glyph":null},"id":"906d82e6-6c89-41fd-b2d7-cfdb21e897cd","type":"GlyphRenderer"},{"attributes":{"data_source":{"id":"54ca3d98-afd0-49fb-8fb3-e3629b32c359","type":"ColumnDataSource"},"glyph":{"id":"21cdcc78-277e-4864-97a7-8e49f768b71c","type":"Circle"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"db05bb8a-b72d-41cd-95d7-66780c6d852d","type":"Circle"},"selection_glyph":null},"id":"5c8dcfea-ac0a-48d1-9ad1-6a0fd122b95c","type":"GlyphRenderer"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":0.508955821209095},"y":{"value":-12.304937735783842}},"id":"b331f938-90ff-42f3-bb03-25be3b292b0b","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["js notebookapp users 21 grant"]}},"id":"22feb423-7b8e-42fe-a314-2691357cae25","type":"ColumnDataSource"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-2.0802832205695845},"y":{"value":-18.009875465137124}},"id":"43147d13-2d82-4578-8fc2-f141682e0e80","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["tests test travis pr looks"]}},"id":"08f9990e-e32f-40f0-ad32-a3a2b3bca161","type":"ColumnDataSource"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":5.080899503440006},"y":{"value":-13.159288874540737}},"id":"22c003fc-7c94-465c-9a18-62ca090bf98a","type":"Text"},{"attributes":{"text_color":{"value":"black"},"x":{"value":-16.063934148690535},"y":{"value":1.4737641112603403}},"id":"07fe649b-a872-4fe6-b717-e3939fc00cb7","type":"Text"},{"attributes":{"data_source":{"id":"aeaf291a-2604-498d-a5b3-d7c0614b5683","type":"ColumnDataSource"},"glyph":{"id":"27672e20-f9c5-4bf0-9a90-163522b1f5cb","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"22c003fc-7c94-465c-9a18-62ca090bf98a","type":"Text"},"selection_glyph":null},"id":"6379fdc7-1087-4728-a60a-4567932af818","type":"GlyphRenderer"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["install pip conda installed packages"]}},"id":"a0fe2a5e-c6a5-4c3e-a717-20c5e6c86381","type":"ColumnDataSource"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":-6.90822581905499},"y":{"value":4.489129954532823}},"id":"f3b4e7f4-d3e6-40aa-bcf8-c55994a4fdf6","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["markdown mathjax table output metadata"]}},"id":"4fdc4de7-b908-445e-8c2f-733a4eaa8581","type":"ColumnDataSource"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["codemirror pull cells mode keyboard"]}},"id":"8f16a268-558c-42fc-a112-9b60f8f8c248","type":"ColumnDataSource"},{"attributes":{"data_source":{"id":"cdaae5d4-0959-4c28-bf8e-ed5ceeb34ebc","type":"ColumnDataSource"},"glyph":{"id":"7e9505d2-815f-47e0-b328-ffa82d9ff708","type":"Text"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"fe943a53-3635-435d-8871-70a89c524634","type":"Text"},"selection_glyph":null},"id":"54f0cb5e-9709-4c1a-92e0-f1157e8db27c","type":"GlyphRenderer"},{"attributes":{"text_color":{"value":"black"},"x":{"value":10.691760478188936},"y":{"value":0.2147773986702442}},"id":"44208c84-eb87-4bd2-baf2-788746a04725","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["install pip conda installed packages"]}},"id":"13b31f67-f4e3-4e56-aced-04bf706dba42","type":"ColumnDataSource"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":0.508955821209095},"y":{"value":-12.304937735783842}},"id":"f144d0d4-e9cd-42d7-bad6-1d1e5bdbfc0f","type":"Text"},{"attributes":{"text_alpha":{"value":0.1},"text_color":{"value":"black"},"x":{"value":8.941888871109946},"y":{"value":12.873792922911283}},"id":"888fbb7e-4f42-494d-864f-1723510e12a5","type":"Text"},{"attributes":{"callback":null,"column_names":["text"],"data":{"text":["notebookapp kernels localhost root 8888"]}},"id":"bb87dcff-87c0-468f-b934-67c03b2faf78","type":"ColumnDataSource"}],"root_ids":["c6f187f7-74ac-4a91-a79e-65f3b674b7fa"]},"title":"Bokeh Application","version":"0.12.6"}};
              var render_items = [{"docid":"d645900d-1343-4a70-a528-8bb7ec23110b","elementid":"04400f71-71b6-4a82-8dab-6706fc46c85a","modelid":"c6f187f7-74ac-4a91-a79e-65f3b674b7fa"}];
              
              Bokeh.embed.embed_items(docs_json, render_items);
            });
          };
          if (document.readyState != "loading") fn();
          else document.addEventListener("DOMContentLoaded", fn);
        })();
        
        </script>
    </body>
</html>